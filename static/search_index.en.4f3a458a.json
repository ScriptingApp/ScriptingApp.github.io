[{"title":"AppIntent","content":"`AppIntentManager` is used to **register and manage AppIntents** in the **Scripting** app. It serves as the core mechanism for executing script logic behind controls in **Widgets**, **Live Activities**, and **ControlWidgets**.\n\nAll `AppIntent`s **must** be defined in the `app_intents.tsx` file. When an intent is executed, the script runs in the `\"app_intents\"` environment (`Script.env === \"app_intents\"`).\n\nOnce registered, these intents can be triggered by **Button** and **Toggle** controls within Widgets, Live Activities, or ControlWidgets, allowing users to define interactive behavior via script.\n\n***\n\n## 1. Type Definitions\n\n### `AppIntent<T>`\n\nRepresents a concrete intent instance with parameters and metadata.\n\n| Property   | Type                | Description                                                                |\n| ---------- | ------------------- | -------------------------------------------------------------------------- |\n| `script`   | `string`            | The internal script path. Automatically generated by the system.           |\n| `name`     | `string`            | The name of the AppIntent. Must be unique.                                 |\n| `protocol` | `AppIntentProtocol` | The protocol the intent conforms to (e.g., general, audio, Live Activity). |\n| `params`   | `T`                 | The parameters to be passed when the intent is executed.                   |\n\n***\n\n### `AppIntentFactory<T>`\n\nA **factory function** that creates an `AppIntent` instance with specified parameters.\n\n```ts\ntype AppIntentFactory<T> = (params: T) => AppIntent<T>\n```\n\n***\n\n### `AppIntentPerform<T>`\n\nA function that handles intent execution logic asynchronously.\n\n```ts\ntype AppIntentPerform<T> = (params: T) => Promise<void>\n```\n\n***\n\n### `AppIntentProtocol`\n\nAn enumeration that defines the behavior type of the intent.\n\n| Enum Value                 | Description                                                                                                                                                                                                                                                                                                                  |\n| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `AppIntent` (0)            | A general-purpose AppIntent for typical operations.                                                                                                                                                                                                                                                                          |\n| `AudioPlaybackIntent` (1)  | An intent that plays, pauses, or otherwise modifies audio playback.                                                                                                                                                                                                                                                          |\n| `AudioRecordingIntent` (2) | *(iOS 18.0+)* An intent that starts, stops, or modifies audio recording. **Note**: On iOS/iPadOS, when using the `AudioRecordingIntent` protocol, you must start a **Live Activity** at the beginning of the recording and keep it active for the entire session. If you don't, the recording will be automatically stopped. |\n| `LiveActivityIntent` (3)   | An intent that starts, pauses, or modifies a Live Activity.                                                                                                                                                                                                                                                                  |\n\n***\n\n## 2. `AppIntentManager` Class\n\n### `AppIntentManager.register<T>(options): AppIntentFactory<T>`\n\nRegisters a new `AppIntent` by specifying its name, protocol, and perform logic. When a control (e.g., Button or Toggle) triggers the intent, the associated `perform` function is called.\n\n```ts\nstatic register<T = undefined>(options: {\n  name: string;\n  protocol: AppIntentProtocol;\n  perform: AppIntentPerform<T>;\n}): AppIntentFactory<T>\n```\n\n#### Parameters:\n\n| Property   | Type                  | Description                                                                                                        |\n| ---------- | --------------------- | ------------------------------------------------------------------------------------------------------------------ |\n| `name`     | `string`              | A unique identifier for the AppIntent.                                                                             |\n| `protocol` | `AppIntentProtocol`   | The protocol this intent implements.                                                                               |\n| `perform`  | `AppIntentPerform<T>` | The asynchronous function executed when the intent is triggered. The `params` argument is passed from the control. |\n\n#### Returns:\n\n- **`AppIntentFactory<T>`**: A factory function that creates an `AppIntent` instance with the specified parameters.\n\n#### Example:\n\n```tsx\n// app_intents.tsx\nexport const ToggleDoorIntent = AppIntentManager.register({\n  name: \"ToggleDoorIntent\",\n  protocol: AppIntentProtocol.AppIntent,\n  perform: async ({ id, newState }: { id: string; newState: boolean }) => {\n    // Custom logic: toggle the door state\n    await setDoorState(id, newState)\n    // Notify UI to refresh toggle state\n    ControlWidget.reloadToggles()\n  }\n})\n```\n\nIn a control view file (e.g., `control_widget_toggle.tsx`):\n\n```tsx\nControlWidget.present(\n  <ControlWidgetToggle\n    intent={ToggleDoorIntent({ id: \"door1\", newState: !currentState })}\n    label={{\n      title: \"Door 1\",\n      systemImage: currentState ? \"door.garage.opened\" : \"door.garage.closed\"\n    }}\n    activeValueLabel={{ title: \"The door is opened\" }}\n    inactiveValueLabel={{ title: \"The door is closed\" }}\n  />\n)\n```\n\nIn a widget file (`widget.tsx`):\n\n```tsx\n<Toggle\n  title=\"Door 1\"\n  value={currentState}\n  intent={ToggleDoorIntent({ id: \"door1\", newState: !currentState })}\n/>\n```\n\n***\n\n## 3. Execution Environment\n\nAll AppIntents registered via `AppIntentManager` are executed in the `\"app_intents\"` environment.\nThis allows safe use of APIs suitable for background execution, such as:\n\n- Fetching data from the network\n- Controlling Live Activities\n- Triggering control view refreshes\n\n***\n\n## 4. Best Practices\n\n1. **Centralized Definitions**: All AppIntents **must** be defined in `app_intents.tsx` for discoverability and maintainability.\n2. **Strong Typing**: Define explicit parameter types `T` for both `perform` and control usage to benefit from type checking and autocomplete.\n3. **Choose the Right Protocol**:\n\n   - General operation → `AppIntent`\n   - Audio playback → `AudioPlaybackIntent`\n   - Audio recording → `AudioRecordingIntent` *(requires iOS 18+, with Live Activity)*\n   - Live Activity control → `LiveActivityIntent`\n4. **Trigger UI Updates**: If the intent modifies a UI state (e.g., toggle), call:\n\n   - `ControlWidget.reloadButtons()`\n   - `ControlWidget.reloadToggles()`\n   - `Widget.reloadAll()`\n     depending on where the control is hosted.\n","routePath":"/doc/AppIntent","lang":"en","toc":[{"id":"1-type-definitions","text":"1. Type Definitions","depth":2,"charIndex":612},{"id":"appintentt","text":"`AppIntent<T>`","depth":3,"charIndex":636},{"id":"appintentfactoryt","text":"`AppIntentFactory<T>`","depth":3,"charIndex":1415},{"id":"appintentperformt","text":"`AppIntentPerform<T>`","depth":3,"charIndex":1601},{"id":"appintentprotocol","text":"`AppIntentProtocol`","depth":3,"charIndex":1764},{"id":"2-appintentmanager-class","text":"2. `AppIntentManager` Class","depth":2,"charIndex":3957},{"id":"appintentmanagerregistertoptions-appintentfactoryt","text":"`AppIntentManager.register<T>(options): AppIntentFactory<T>`","depth":3,"charIndex":3989},{"id":"parameters","text":"Parameters:","depth":4,"charIndex":4399},{"id":"returns","text":"Returns:","depth":4,"charIndex":5198},{"id":"example","text":"Example:","depth":4,"charIndex":5330},{"id":"3-execution-environment","text":"3. Execution Environment","depth":2,"charIndex":6346},{"id":"4-best-practices","text":"4. Best Practices","depth":2,"charIndex":6652}],"frontmatter":{},"version":"","description":"AppIntentManager is used to register and manage AppIntents in the Scripting app. It serves as the core mechanism for executing script logic behind controls in Widgets, Live Activities, and ControlWidgets. All AppIntents must be defined in the app_intents.tsx file. When an intent is executed, the script runs in the \"app_intents\" environment (Script.env === \"app_intents\"). Once registered, these intents can be triggered by Button and Toggle controls within Widgets, Live Activities, or ControlWidgets, allowing users to define interactive behavior via script."},{"title":"Assistant Conversation APIs <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Assistant Conversation APIs \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Conversation APIs are used to **start, control, and present a system-hosted Assistant chat session**.\nA conversation corresponds to a **fully managed chat page**, where Scripting handles the UI, streaming output, provider selection, and message lifecycle.\n\nKey differences from other Assistant APIs:\n\n- Conversation APIs are designed for **interactive chat experiences**\n- UI, streaming, and message handling are managed by the system\n- Developers control **when the conversation starts, ends, and is shown**\n\n***\n\n## Conversation Lifecycle\n\nA typical conversation follows this lifecycle:\n\n1. `startConversation` — create a conversation (optionally auto-start)\n2. `present` — display the Assistant chat page\n3. User interacts with the Assistant\n4. `dismiss` — temporarily hide the chat page (conversation continues)\n5. `present` — show the same conversation again\n6. `stopConversation` — terminate the conversation and release resources\n\nImportant rules:\n\n- **Only one active conversation can exist at a time**\n- Calling `startConversation` while a conversation is active throws an error\n- Calling `stopConversation` automatically calls `dismiss`\n\n***\n\n## startConversation\n\n### API Definition\n\n```ts\nfunction startConversation(options: {\n  message: string\n  images?: UIImage[]\n  autoStart?: boolean\n  systemPrompt?: string\n  modelId?: string\n  provider?: Provider\n}): Promise<void>\n```\n\n***\n\n### Parameters\n\n#### options.message\n\n- Type: `string`\n- Required\n- The **initial user message** of the conversation\n- Equivalent to the first user input in the chat UI\n\n***\n\n#### options.images (optional)\n\n- Type: `UIImage[]`\n- Sent together with the initial message\n- Common use cases:\n\n  - Image analysis\n  - Starting a conversation from a photo or screenshot\n\n***\n\n#### options.autoStart (optional)\n\n- Type: `boolean`\n- Default: `false`\n\nBehavior:\n\n- `true`\n\n  - The assistant immediately starts generating a reply\n- `false`\n\n  - The conversation is created but not sent automatically\n  - Typically used when the user should press “Send” manually\n\n***\n\n#### options.systemPrompt (optional)\n\n- Type: `string`\n\nBehavior:\n\n- If omitted:\n\n  - The built-in Scripting Assistant system prompt is used\n  - Assistant Tools are available\n- If provided:\n\n  - Fully replaces the default system prompt\n  - **Assistant Tools are disabled**\n\nTypical use cases:\n\n- Creating a highly customized chat role\n- Running the model without any tool access\n\n***\n\n#### options.modelId (optional)\n\n- Type: `string`\n- Specifies the model to use for this conversation\n- Users may still change the model in the chat UI (if allowed)\n\n***\n\n#### options.provider (optional)\n\n- Type: `Provider`\n- Specifies the default provider for the conversation\n- Users may change the provider in the chat UI (if allowed)\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n- Resolves when the conversation is successfully created\n- Rejects if a conversation already exists\n\n***\n\n## present\n\n### API Definition\n\n```ts\nfunction present(): Promise<void>\n```\n\n***\n\n### Behavior\n\n- Presents the Assistant chat page for the current conversation\n- If the page is already presented, calling this has no effect\n- Can be called:\n\n  - After `startConversation`\n  - After `dismiss` to re-present the same conversation\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n- Resolves when the chat page is dismissed by the user\n\n***\n\n## dismiss\n\n### API Definition\n\n```ts\nfunction dismiss(): Promise<void>\n```\n\n***\n\n### Behavior\n\n- Dismisses the Assistant chat page\n- **Does not stop the conversation**\n- Conversation state and history are preserved\n\nTypical use cases:\n\n- Temporarily hiding the chat UI\n- Navigating to another page or task\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n***\n\n## stopConversation\n\n### API Definition\n\n```ts\nfunction stopConversation(): Promise<void>\n```\n\n***\n\n### Behavior\n\n- Fully terminates the current conversation\n- Automatically calls `dismiss`\n- Cleans up conversation state and resources\n- After calling this, a new conversation may be started\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n***\n\n## Conversation State Flags\n\n### Assistant.isAvailable\n\n```ts\nconst isAvailable: boolean\n```\n\n- Indicates whether the current user has access to the Assistant\n- If `false`, all Conversation APIs are unavailable\n\n***\n\n### Assistant.isPresented\n\n```ts\nconst isPresented: boolean\n```\n\n- Indicates whether the Assistant chat page is currently presented\n\n***\n\n### Assistant.hasActiveConversation\n\n```ts\nconst hasActiveConversation: boolean\n```\n\n- Indicates whether there is an active conversation\n- Commonly used to guard against duplicate `startConversation` calls\n\n***\n\n## Examples\n\n### Example 1: Typical usage\n\n```ts\nawait Assistant.startConversation({\n  message: \"Help me summarize this article.\",\n  autoStart: true\n})\n\nawait Assistant.present()\n```\n\n***\n\n### Example 2: Create a conversation without auto-sending\n\n```ts\nawait Assistant.startConversation({\n  message: \"Let's discuss system architecture design.\",\n  autoStart: false\n})\n\nawait Assistant.present()\n// User manually presses Send in the UI\n```\n\n***\n\n### Example 3: Dismiss and re-present the same conversation\n\n```ts\nawait Assistant.startConversation({\n  message: \"Analyze this image.\",\n  images: [image],\n  autoStart: true\n})\n\nawait Assistant.present()\n\nawait Assistant.dismiss()\n\n// Later, re-present the same conversation\nawait Assistant.present()\n```\n\n***\n\n### Example 4: Stop the current conversation and start a new one\n\n```ts\nif (Assistant.hasActiveConversation) {\n  await Assistant.stopConversation()\n}\n\nawait Assistant.startConversation({\n  message: \"Start a new topic.\",\n  autoStart: true\n})\n\nawait Assistant.present()\n```\n\n***\n\n## Best Practices\n\n- Treat Conversation APIs as a **managed chat UI**\n- Do not mix Conversation APIs with `requestStreaming` in the same flow\n- Always check `hasActiveConversation` before calling `startConversation`\n- For one-shot or data-oriented tasks, prefer:\n\n  - `requestStructuredData`\n  - `requestStreaming`\n- Use Conversation APIs when continuous user interaction is required\n\n***\n\n## Design Boundaries\n\n- Conversation APIs are not suitable for headless or background tasks\n- Not intended for fully automated workflows\n- Not ideal when you need strict control over prompts, tokens, or output format\n","routePath":"/doc/Assistant/Assistant Conversation APIs","lang":"en","toc":[{"id":"conversation-lifecycle","text":"Conversation Lifecycle","depth":2,"charIndex":690},{"id":"startconversation","text":"startConversation","depth":2,"charIndex":1328},{"id":"api-definition","text":"API Definition","depth":3,"charIndex":1350},{"id":"parameters","text":"Parameters","depth":3,"charIndex":1568},{"id":"optionsmessage","text":"options.message","depth":4,"charIndex":1584},{"id":"optionsimages-optional","text":"options.images (optional)","depth":4,"charIndex":1743},{"id":"optionsautostart-optional","text":"options.autoStart (optional)","depth":4,"charIndex":1937},{"id":"optionssystemprompt-optional","text":"options.systemPrompt (optional)","depth":4,"charIndex":2225},{"id":"optionsmodelid-optional","text":"options.modelId (optional)","depth":4,"charIndex":2610},{"id":"optionsprovider-optional","text":"options.provider (optional)","depth":4,"charIndex":2780},{"id":"return-value","text":"Return Value","depth":3,"charIndex":2953},{"id":"present","text":"present","depth":2,"charIndex":3102},{"id":"api-definition-1","text":"API Definition","depth":3,"charIndex":3114},{"id":"behavior","text":"Behavior","depth":3,"charIndex":3184},{"id":"return-value-1","text":"Return Value","depth":3,"charIndex":3435},{"id":"dismiss","text":"dismiss","depth":2,"charIndex":3539},{"id":"api-definition-2","text":"API Definition","depth":3,"charIndex":3551},{"id":"behavior-1","text":"Behavior","depth":3,"charIndex":3621},{"id":"return-value-2","text":"Return Value","depth":3,"charIndex":3852},{"id":"stopconversation","text":"stopConversation","depth":2,"charIndex":3900},{"id":"api-definition-3","text":"API Definition","depth":3,"charIndex":3921},{"id":"behavior-2","text":"Behavior","depth":3,"charIndex":4000},{"id":"return-value-3","text":"Return Value","depth":3,"charIndex":4197},{"id":"conversation-state-flags","text":"Conversation State Flags","depth":2,"charIndex":4245},{"id":"assistantisavailable","text":"Assistant.isAvailable","depth":3,"charIndex":4274},{"id":"assistantispresented","text":"Assistant.isPresented","depth":3,"charIndex":4462},{"id":"assistanthasactiveconversation","text":"Assistant.hasActiveConversation","depth":3,"charIndex":4600},{"id":"examples","text":"Examples","depth":2,"charIndex":4812},{"id":"example-1-typical-usage","text":"Example 1: Typical usage","depth":3,"charIndex":4825},{"id":"example-2-create-a-conversation-without-auto-sending","text":"Example 2: Create a conversation without auto-sending","depth":3,"charIndex":5001},{"id":"example-3-dismiss-and-re-present-the-same-conversation","text":"Example 3: Dismiss and re-present the same conversation","depth":3,"charIndex":5257},{"id":"example-4-stop-the-current-conversation-and-start-a-new-one","text":"Example 4: Stop the current conversation and start a new one","depth":3,"charIndex":5568},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":5846},{"id":"design-boundaries","text":"Design Boundaries","depth":2,"charIndex":6236}],"frontmatter":{},"version":"","description":"The Conversation APIs are used to start, control, and present a system-hosted Assistant chat session.\nA conversation corresponds to a fully managed chat page, where Scripting handles the UI, streaming output, provider selection, and message lifecycle. Key differences from other Assistant APIs: Conversation APIs are designed for interactive chat experiencesUI, streaming, and message handling are managed by the systemDevelopers control when the conversation starts, ends, and is shown"},{"title":"Assistant Quick Start <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Assistant Quick Start \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Assistant API in Scripting provides three distinct capabilities, each designed for a different type of use case: **structured data**, **streaming output**, and **interactive conversations**.\n\nBefore choosing an API, first decide **what kind of result you need**.\n\n***\n\n## Assistant API Overview\n\n| Category         | Main APIs                                                        | Best For                         |\n| ---------------- | ---------------------------------------------------------------- | -------------------------------- |\n| Structured Data  | `requestStructuredData`                                          | Extracting predictable JSON data |\n| Streaming Output | `requestStreaming`                                               | Real-time text generation        |\n| Conversations    | `startConversation` / `present` / `dismiss` / `stopConversation` | Fully managed chat UI            |\n\n***\n\n## requestStructuredData\n\n**Purpose**\nRequests **strictly structured JSON output** that conforms to a provided schema.\n\n**Best suited for**\n\n- Parsing receipts, invoices, and bills\n- Extracting fields from natural language\n- Generating configuration or rule objects\n- Any output that must be consumed by program logic\n\n**Key characteristics**\n\n- Stable and predictable output\n- No streaming or incremental updates\n- Ideal for background or headless scenarios\n\n**In one sentence**\n\n> If you need **data**, use `requestStructuredData`.\n\n***\n\n## requestStreaming\n\n**Purpose**\nRequests **streaming output**, allowing you to receive content incrementally as the model generates it.\n\n**Best suited for**\n\n- Typing-effect UI\n- Long-form content generation\n- Low-latency user feedback\n\n**Key characteristics**\n\n- Emits text, reasoning, and usage chunks\n- Can be rendered progressively\n- Output is not guaranteed to be structured\n\n**In one sentence**\n\n> If you need **real-time output**, use `requestStreaming`.\n\n***\n\n## Conversation APIs\n\n**Related methods**\n\n- `startConversation`\n- `present`\n- `dismiss`\n- `stopConversation`\n\n**Purpose**\nCreates and presents a **system-hosted Assistant chat experience**.\n\n**Best suited for**\n\n- ChatGPT-style interactions\n- Multi-turn conversations\n- Scenarios where the system manages UI, streaming, and provider switching\n\n**Key characteristics**\n\n- Built-in chat UI\n- Streaming handled automatically\n- Only one active conversation at a time\n\n**In one sentence**\n\n> If you need a **full chat experience**, use the Conversation APIs.\n\n***\n\n## How to Choose the Right API\n\n### Common Scenarios\n\n- **Parse a receipt →** `requestStructuredData`\n- **Show AI writing text live →** `requestStreaming`\n- **Open a chat interface for users →** Conversation APIs\n- **No UI, just results →** `requestStructuredData` or `requestStreaming`\n- **Let the system manage the chat UI →** Conversation APIs\n\n***\n\n## Minimal Examples\n\n### Structured Data\n\n```ts\nconst result = await Assistant.requestStructuredData(...)\n```\n\n***\n\n### Streaming Output\n\n```ts\nconst stream = await Assistant.requestStreaming(...)\nfor await (const chunk of stream) {\n  // handle chunk\n}\n```\n\n***\n\n### Conversation\n\n```ts\nawait Assistant.startConversation({\n  message: \"Hello\",\n  autoStart: true\n})\nawait Assistant.present()\n```\n\n***\n\n## Usage Tips\n\n- Do not mix Conversation APIs with `requestStreaming` in the same flow\n- Prefer `requestStructuredData` whenever output must be consumed as data\n- Use streaming or conversations for presentation-focused scenarios\n\n***\n\n## Next Steps\n\nFor deeper details, refer to:\n\n- `requestStructuredData` – detailed schema-driven data extraction\n- `requestStreaming` – streaming behavior and chunk handling\n- Conversation APIs – lifecycle and interaction patterns\n","routePath":"/doc/Assistant/Assistant Quick Start","lang":"en","toc":[{"id":"assistant-api-overview","text":"Assistant API Overview","depth":2,"charIndex":438},{"id":"requeststructureddata","text":"requestStructuredData","depth":2,"charIndex":1086},{"id":"requeststreaming","text":"requestStreaming","depth":2,"charIndex":1626},{"id":"conversation-apis","text":"Conversation APIs","depth":2,"charIndex":2095},{"id":"how-to-choose-the-right-api","text":"How to Choose the Right API","depth":2,"charIndex":2656},{"id":"common-scenarios","text":"Common Scenarios","depth":3,"charIndex":2688},{"id":"minimal-examples","text":"Minimal Examples","depth":2,"charIndex":3009},{"id":"structured-data","text":"Structured Data","depth":3,"charIndex":3030},{"id":"streaming-output","text":"Streaming Output","depth":3,"charIndex":3125},{"id":"conversation","text":"Conversation","depth":3,"charIndex":3272},{"id":"usage-tips","text":"Usage Tips","depth":2,"charIndex":3409},{"id":"next-steps","text":"Next Steps","depth":2,"charIndex":3644}],"frontmatter":{},"version":"","description":"The Assistant API in Scripting provides three distinct capabilities, each designed for a different type of use case: structured data, streaming output, and interactive conversations. Before choosing an API, first decide what kind of result you need."},{"title":"requestStreaming <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# requestStreaming \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`requestStreaming` requests a **streaming response** from the Assistant.\nInstead of returning a complete result at once, the Assistant emits **chunks incrementally** as the model generates output.\n\nThis enables:\n\n- Real-time UI updates (typing effect)\n- Low-latency handling of long responses\n- Progressive rendering of results\n- Streaming logs and intermediate output handling\n\nThe API returns a **`ReadableStream<StreamChunk>`**, which can be consumed using `for await ... of`.\n\n***\n\n## API Definition\n\n```ts\nfunction requestStreaming(options: {\n  systemPrompt?: string | null\n  messages: MessageItem | MessageItem[]\n  provider?: Provider\n  modelId?: string\n}): Promise<ReadableStream<StreamChunk>>\n```\n\n***\n\n## Parameters\n\n### options.systemPrompt (optional)\n\n- Type: `string | null`\n- Specifies the system prompt for this request.\n- If omitted:\n\n  - The default Assistant system prompt is used.\n- If provided:\n\n  - It **fully replaces** the default system prompt.\n  - Assistant Tools are **not available**.\n\nTypical use cases:\n\n- Defining a strict role (e.g. reviewer, translator, summarizer)\n- Enforcing output tone or behavior\n- Running the model without built-in tools\n\n***\n\n### options.messages\n\n- Type: `MessageItem | MessageItem[]`\n- Required\n- Represents the conversation context sent to the model.\n\n#### MessageItem\n\n```ts\ntype MessageItem = {\n  role: \"user\" | \"assistant\"\n  content: MessageContent | MessageContent[]\n}\n```\n\n- `role`\n\n  - `\"user\"`: user input\n  - `\"assistant\"`: previous assistant messages (for context)\n\n***\n\n### MessageContent Types\n\n#### Text\n\n```ts\ntype MessageTextContent =\n  | string\n  | { type: \"text\"; content: string }\n```\n\n***\n\n#### Image\n\n```ts\ntype MessageImageContent = {\n  type: \"image\"\n  content: string // data:image/...;base64,...\n}\n```\n\n***\n\n#### Document\n\n```ts\ntype MessageDocumentContent = {\n  type: \"document\"\n  content: {\n    mediaType: string\n    data: string // base64\n  }\n}\n```\n\n***\n\n### options.provider (optional)\n\n- Type: `Provider`\n- Specifies the AI provider.\n- If omitted, the currently configured default provider is used.\n- Supported values:\n\n  - `\"openai\"`\n  - `\"gemini\"`\n  - `\"anthropic\"`\n  - `\"deepseek\"`\n  - `\"openrouter\"`\n  - `{ custom: string }`\n\n***\n\n### options.modelId (optional)\n\n- Type: `string`\n- Specifies the model ID.\n- Must match a model actually supported by the selected provider.\n- If omitted, the provider’s default model is used.\n\n***\n\n## Return Value\n\n```ts\nPromise<ReadableStream<StreamChunk>>\n```\n\nOnce resolved, you receive a stream that can be consumed asynchronously.\n\n***\n\n## StreamChunk Types\n\nThe stream may emit the following chunk types.\n\n***\n\n### StreamTextChunk\n\n```ts\ntype StreamTextChunk = {\n  type: \"text\"\n  content: string\n}\n```\n\n- Represents user-visible generated text.\n- Multiple chunks concatenated form the final response.\n\n***\n\n### StreamReasoningChunk\n\n```ts\ntype StreamReasoningChunk = {\n  type: \"reasoning\"\n  content: string\n}\n```\n\n- Represents intermediate reasoning produced by the model.\n- Availability and granularity depend on the provider and model.\n\n***\n\n### StreamUsageChunk\n\n```ts\ntype StreamUsageChunk = {\n  type: \"usage\"\n  content: {\n    totalCost: number | null\n    cacheReadTokens: number | null\n    cacheWriteTokens: number | null\n    inputTokens: number\n    outputTokens: number\n  }\n}\n```\n\nNotes:\n\n- Typically emitted once near the end of the stream.\n- Some providers may omit certain fields.\n- `totalCost` may be `null` if the provider does not expose pricing data.\n\n***\n\n## Examples\n\n### Example 1: Basic streaming request\n\n```ts\nconst stream = await Assistant.requestStreaming({\n  messages: {\n    role: \"user\",\n    content: \"Tell me a short science fiction story.\"\n  },\n  provider: \"openai\"\n})\n\nlet result = \"\"\n\nfor await (const chunk of stream) {\n  if (chunk.type === \"text\") {\n    result += chunk.content\n    console.log(chunk.content)\n  }\n}\n```\n\n***\n\n### Example 2: Handling text, reasoning, and usage separately\n\n```ts\nconst stream = await Assistant.requestStreaming({\n  systemPrompt: \"You are a precise technical writing assistant.\",\n  messages: [\n    {\n      role: \"user\",\n      content: \"Explain what HTTP/3 is.\"\n    }\n  ]\n})\n\nlet answer = \"\"\nlet reasoningLog = \"\"\nlet usage = null\n\nfor await (const chunk of stream) {\n  switch (chunk.type) {\n    case \"text\":\n      answer += chunk.content\n      break\n\n    case \"reasoning\":\n      reasoningLog += chunk.content\n      break\n\n    case \"usage\":\n      usage = chunk.content\n      break\n  }\n}\n\nconsole.log(answer)\nconsole.log(usage)\n```\n\n***\n\n### Example 3: Streaming with document input\n\n```ts\nconst stream = await Assistant.requestStreaming({\n  messages: [\n    {\n      role: \"user\",\n      content: [\n        { type: \"text\", content: \"Summarize the key points of this document.\" },\n        {\n          type: \"document\",\n          content: {\n            mediaType: \"application/pdf\",\n            data: \"JVBERi0xLjQKJcfs...\"\n          }\n        }\n      ]\n    }\n  ],\n  provider: \"anthropic\"\n})\n\nfor await (const chunk of stream) {\n  if (chunk.type === \"text\") {\n    console.log(chunk.content)\n  }\n}\n```\n\n***\n\n## Usage Notes and Best Practices\n\n- Streams must be consumed **sequentially**; do not read concurrently.\n- For UI scenarios:\n\n  - Render `text` chunks immediately.\n  - Keep `reasoning` for debugging or developer modes.\n  - Process `usage` after completion.\n- If you no longer need the output, stop consuming the stream to avoid unnecessary cost.\n- Not all providers/models emit `reasoning` or `usage`.\n- Do not assume a chunk represents a complete sentence; chunk sizes vary.\n","routePath":"/doc/Assistant/requestStreaming","lang":"en","toc":[{"id":"api-definition","text":"API Definition","depth":2,"charIndex":646},{"id":"parameters","text":"Parameters","depth":2,"charIndex":871},{"id":"optionssystemprompt-optional","text":"options.systemPrompt (optional)","depth":3,"charIndex":886},{"id":"optionsmessages","text":"options.messages","depth":3,"charIndex":1342},{"id":"messageitem","text":"MessageItem","depth":4,"charIndex":1471},{"id":"messagecontent-types","text":"MessageContent Types","depth":3,"charIndex":1699},{"id":"text","text":"Text","depth":4,"charIndex":1725},{"id":"image","text":"Image","depth":4,"charIndex":1827},{"id":"document","text":"Document","depth":4,"charIndex":1949},{"id":"optionsprovider-optional","text":"options.provider (optional)","depth":3,"charIndex":2099},{"id":"optionsmodelid-optional","text":"options.modelId (optional)","depth":3,"charIndex":2381},{"id":"return-value","text":"Return Value","depth":2,"charIndex":2580},{"id":"streamchunk-types","text":"StreamChunk Types","depth":2,"charIndex":2724},{"id":"streamtextchunk","text":"StreamTextChunk","depth":3,"charIndex":2799},{"id":"streamreasoningchunk","text":"StreamReasoningChunk","depth":3,"charIndex":2995},{"id":"streamusagechunk","text":"StreamUsageChunk","depth":3,"charIndex":3232},{"id":"examples","text":"Examples","depth":2,"charIndex":3658},{"id":"example-1-basic-streaming-request","text":"Example 1: Basic streaming request","depth":3,"charIndex":3671},{"id":"example-2-handling-text-reasoning-and-usage-separately","text":"Example 2: Handling text, reasoning, and usage separately","depth":3,"charIndex":4042},{"id":"example-3-streaming-with-document-input","text":"Example 3: Streaming with document input","depth":3,"charIndex":4683},{"id":"usage-notes-and-best-practices","text":"Usage Notes and Best Practices","depth":2,"charIndex":5247}],"frontmatter":{},"version":"","description":"requestStreaming requests a streaming response from the Assistant.\nInstead of returning a complete result at once, the Assistant emits chunks incrementally as the model generates output. This enables: Real-time UI updates (typing effect)Low-latency handling of long responsesProgressive rendering of resultsStreaming logs and intermediate output handling The API returns a ReadableStream<StreamChunk>, which can be consumed using for await ... of."},{"title":"requestStructuredData <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# requestStructuredData \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`requestStructuredData` requests **structured JSON output** from the assistant that conforms to a provided JSON schema.\nThis API is designed for workflows where you want a predictable, programmatically usable result rather than free-form text.\n\nCommon use cases include:\n\n- Extracting structured fields from natural language\n- Parsing invoices, receipts, and tickets\n- Generating configuration objects\n- Normalizing data across different AI providers/models\n\n***\n\n## Supported JSON Schema Types\n\nScripting defines a lightweight schema structure with three building blocks.\n\n### Primitive\n\n```ts\ntype JSONSchemaPrimitive = {\n  type: \"string\" | \"number\" | \"boolean\"\n  required?: boolean\n  description: string\n}\n```\n\n***\n\n### Object\n\n```ts\ntype JSONSchemaObject = {\n  type: \"object\"\n  properties: Record<string, JSONSchemaType>\n  required?: boolean\n  description: string\n}\n```\n\n***\n\n### Array\n\n```ts\ntype JSONSchemaArray = {\n  type: \"array\"\n  items: JSONSchemaType\n  required?: boolean\n  description: string\n}\n```\n\n***\n\n## API Signatures\n\n### Without images\n\n```ts\nfunction requestStructuredData<R>(\n  prompt: string,\n  schema: JSONSchemaArray | JSONSchemaObject,\n  options?: {\n    provider: Provider\n    modelId?: string\n  }\n): Promise<R>\n```\n\n### With images\n\n```ts\nfunction requestStructuredData<R>(\n  prompt: string,\n  images: string[],\n  schema: JSONSchemaArray | JSONSchemaObject,\n  options?: {\n    provider: Provider\n    modelId?: string\n  }\n): Promise<R>\n```\n\n***\n\n## Parameters\n\n### prompt\n\n- Type: `string`\n- Required\n- The instruction to the model describing what to extract or generate.\n- For best reliability, explicitly specify:\n\n  - expected formats (e.g., ISO date)\n  - currency rules\n  - how to handle missing fields\n\n### images (optional)\n\n- Type: `string[]`\n- Each item must be a **data URI**, e.g. `data:image/png;base64,...`\n- Not all providers/models support images.\n- Avoid passing too many images to reduce failure risk.\n\n### schema\n\n- Type: `JSONSchemaArray | JSONSchemaObject`\n- Required\n- Defines the **only acceptable** JSON structure for the response.\n- Every field should have a clear `description` to guide the model.\n\n### options.provider\n\n- Type: `Provider`\n- Optional (uses the default configured provider if omitted)\n- Supported:\n\n  - `\"openai\" | \"gemini\" | \"anthropic\" | \"deepseek\" | \"openrouter\" | { custom: string }`\n\n### options.modelId (optional)\n\n- Type: `string`\n- Must match a model actually supported by the chosen provider.\n- If omitted, Scripting uses the provider’s default model.\n\n***\n\n## Return Value\n\n```ts\nPromise<R>\n```\n\n- `R` is the generic type you provide.\n- The resolved value is expected to match your schema.\n- The promise rejects if the assistant cannot return a valid structured result.\n\n***\n\n## Examples\n\n### Example 1: Parse a receipt/bill into line items (time + amount)\n\nThis example asks the assistant to analyze a textual receipt and extract:\n\n- receipt time (`purchasedAt`)\n- line items (`items[]`)\n\n  - item name\n  - item time (if present; otherwise null)\n  - amount\n- total amount\n\n```ts\ntype ReceiptItem = {\n  name: string\n  time: string | null\n  amount: number\n}\n\ntype ReceiptParsed = {\n  purchasedAt: string | null\n  currency: string | null\n  items: ReceiptItem[]\n  total: number | null\n}\n\nconst receiptText = `\nStar Coffee\n2026-01-08 14:23\nLatte (Large)   $5.50\nBlueberry Muffin $3.20\nTax             $0.79\nTotal           $9.49\n`\n\nconst parsed = await Assistant.requestStructuredData<ReceiptParsed>(\n  [\n    \"Analyze the receipt text below and extract:\",\n    \"- purchasedAt: the purchase date/time in ISO-8601 if possible\",\n    \"- currency: currency code if you can infer it (otherwise null)\",\n    \"- items: only actual purchasable items (exclude tax/total lines)\",\n    \"  - name: item name\",\n    \"  - time: item-level time if present, otherwise null\",\n    \"  - amount: numeric amount\",\n    \"- total: numeric total if present, otherwise null\",\n    \"\",\n    \"Receipt:\",\n    receiptText\n  ].join(\"\\n\"),\n  {\n    type: \"object\",\n    description: \"Parsed receipt content\",\n    properties: {\n      purchasedAt: {\n        type: \"string\",\n        description: \"Purchase date/time in ISO-8601 format if available, otherwise an empty string\"\n      },\n      currency: {\n        type: \"string\",\n        description: \"Currency code like USD/EUR/CNY if inferable, otherwise an empty string\"\n      },\n      items: {\n        type: \"array\",\n        description: \"Purchased line items (exclude tax/total/subtotal/service fee lines)\",\n        items: {\n          type: \"object\",\n          description: \"A single purchased item line\",\n          properties: {\n            name: {\n              type: \"string\",\n              description: \"Item name\"\n            },\n            time: {\n              type: \"string\",\n              description: \"Item-level time in ISO-8601 if available, otherwise an empty string\"\n            },\n            amount: {\n              type: \"number\",\n              description: \"Item amount as a number\"\n            }\n          }\n        }\n      },\n      total: {\n        type: \"number\",\n        description: \"Total amount if present, otherwise -1\"\n      }\n    }\n  },\n  {\n    provider: \"openai\"\n  }\n)\n\n// Post-processing suggestion:\n// Treat \"\" as null for purchasedAt/currency/time, and -1 as null for total.\nconsole.log(parsed)\n```\n\n***\n\n### Example 2: Generate an array\n\n```ts\ntype Expense = {\n  name: string\n  amount: number\n}\n\nconst expenses = await Assistant.requestStructuredData<Expense[]>(\n  \"List three common daily expenses with estimated amounts.\",\n  {\n    type: \"array\",\n    description: \"A list of expenses\",\n    items: {\n      type: \"object\",\n      description: \"A single expense item\",\n      properties: {\n        name: { type: \"string\", description: \"Expense name\" },\n        amount: { type: \"number\", description: \"Estimated amount\" }\n      }\n    }\n  },\n  { provider: \"gemini\" }\n)\n```\n\n***\n\n### Example 3: Use images + schema\n\n```ts\ntype ImageSummary = {\n  description: string\n  containsText: boolean\n}\n\nconst summary = await Assistant.requestStructuredData<ImageSummary>(\n  \"Analyze the image and summarize the main content.\",\n  [\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD...\"],\n  {\n    type: \"object\",\n    description: \"Image analysis result\",\n    properties: {\n      description: { type: \"string\", description: \"What the image shows\" },\n      containsText: { type: \"boolean\", description: \"Whether readable text exists\" }\n    }\n  },\n  { provider: \"openai\" }\n)\n```\n\n***\n\n## Best Practices\n\n- Make the schema explicit and descriptive; ambiguous schemas lead to unstable results.\n- Prefer `requestStructuredData` over parsing free-form text when your output is used by program logic.\n- For business-critical extraction (e.g., finance/receipts), add strict formatting rules in `prompt`.\n","routePath":"/doc/Assistant/requestStructuredData","lang":"en","toc":[{"id":"supported-json-schema-types","text":"Supported JSON Schema Types","depth":2,"charIndex":629},{"id":"primitive","text":"Primitive","depth":3,"charIndex":739},{"id":"object","text":"Object","depth":3,"charIndex":884},{"id":"array","text":"Array","depth":3,"charIndex":1045},{"id":"api-signatures","text":"API Signatures","depth":2,"charIndex":1182},{"id":"without-images","text":"Without images","depth":3,"charIndex":1201},{"id":"with-images","text":"With images","depth":3,"charIndex":1407},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1635},{"id":"prompt","text":"prompt","depth":3,"charIndex":1650},{"id":"images-optional","text":"images (optional)","depth":3,"charIndex":1897},{"id":"schema","text":"schema","depth":3,"charIndex":2108},{"id":"optionsprovider","text":"options.provider","depth":3,"charIndex":2312},{"id":"optionsmodelid-optional","text":"options.modelId (optional)","depth":3,"charIndex":2518},{"id":"return-value","text":"Return Value","depth":2,"charIndex":2696},{"id":"examples","text":"Examples","depth":2,"charIndex":2915},{"id":"example-1-parse-a-receiptbill-into-line-items-time--amount","text":"Example 1: Parse a receipt/bill into line items (time + amount)","depth":3,"charIndex":2928},{"id":"example-2-generate-an-array","text":"Example 2: Generate an array","depth":3,"charIndex":5480},{"id":"example-3-use-images--schema","text":"Example 3: Use images + schema","depth":3,"charIndex":6049},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":6640}],"frontmatter":{},"version":"","description":"requestStructuredData requests structured JSON output from the assistant that conforms to a provided JSON schema.\nThis API is designed for workflows where you want a predictable, programmatically usable result rather than free-form text. Common use cases include: Extracting structured fields from natural languageParsing invoices, receipts, and ticketsGenerating configuration objectsNormalizing data across different AI providers/models"},{"title":"AssistantTool <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# AssistantTool \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n**Assistant Tool** is a system extension mechanism within the Scripting application that enhances the capabilities of an intelligent assistant (Assistant). By defining and implementing an Assistant Tool, developers can provide the Assistant with auxiliary functionalities such as device capability access, file reading/writing, and data analysis. This improves both the intelligence and practicality of the Assistant.\n\nThis document uses an example tool, **\"Request Current Location\"**, to illustrate the full implementation process, including tool creation, configuration file explanation, execution logic, and detailed descriptions of various functions.\n\n***\n\n## 1. Tool Creation Process\n\n1. Open any scripting project and click the “Add Assistant Tool” button in the file manager interface.\n2. Fill in the relevant information about the Assistant Tool in the configuration popup window.\n3. After clicking “Save,” the system will automatically generate two files in the script:\n\n- `assistant_tool.json`: Describes the tool’s metadata and parameter information.\n- `assistant_tool.tsx`: Implements the tool’s execution logic.\n\n***\n\n## 2. Configuration File: `assistant_tool.json`\n\nThis file declares the basic information and behavior settings of the tool. Below is a sample content and explanation of each field:\n\n```json\n{\n  \"displayName\": \"Request Current Location\",\n  \"id\": \"request_current_location\",\n  \"description\": \"This tool allows you to request the one-time delivery of the latitude and longitude of the user’s current location.\",\n  \"icon\": \"location.fill\",\n  \"color\": \"systemBlue\",\n  \"parameters\": [],\n  \"requireApproval\": true,\n  \"autoApprove\": true,\n  \"scriptEditorOnly\": false\n}\n```\n\n### Field Descriptions:\n\n| Field              | Type    | Description                                            |\n| ------------------ | ------- | ------------------------------------------------------ |\n| `displayName`      | string  | Name displayed in the UI                               |\n| `id`               | string  | Unique identifier for the tool (must be unique)        |\n| `description`      | string  | Description of the tool’s functionality                |\n| `icon`             | string  | Name of the SF Symbols icon used                       |\n| `color`            | string  | Primary color of the tool                              |\n| `parameters`       | array   | Parameters required by the tool (empty means no input) |\n| `requireApproval`  | boolean | Whether user approval is required                      |\n| `autoApprove`      | boolean | Whether Assistant can auto-approve                     |\n| `scriptEditorOnly` | boolean | Whether the tool can only be used in the script editor |\n\n***\n\n## 3. Execution Logic Example: `assistant_tool.tsx`\n\n```tsx\ntype RequestCurrentLocationParams = {}\n\nconst locationApprovalRequest: AssistantToolApprovalRequestFn<RequestCurrentLocationParams> = async (\n  params,\n) => {\n  return {\n    message: \"The assistant wants to request your current location.\",\n    primaryButtonLabel: \"Allow\"\n  }\n}\n\nconst requestCurrentLocation: AssistantToolExecuteWithApprovalFn<RequestCurrentLocationParams> = async (\n  params,\n  {\n    primaryConfirmed,\n    secondaryConfirmed,\n  }\n) => {\n  try {\n    const location = await Location.requestCurrent()\n    if (location) {\n      return {\n        success: true,\n        message: [\n          \"The user's current location info:\",\n          `<latitude>${location.latitude}</latitude>`,\n          `<longitude>${location.longitude}</longitude>`\n        ].join(\"\\n\")\n      }\n    }\n    return {\n      success: false,\n      message: \"Failed to request user's current location, ask user to check the device's location permission.\"\n    }\n  } catch {\n    return {\n      success: false,\n      message: \"Failed to request user's current location, ask user to check the device's location permission.\"\n    }\n  }\n}\n\nconst testRequestLocationApprovalFn = AssistantTool.registerApprovalRequest(\n  locationApprovalRequest\n)\n\nconst testRequestLocationExecuteFn = AssistantTool.registerExecuteToolWithApproval(\n  requestCurrentLocation\n)\n\n// Test the tool in the script editor:\ntestRequestLocationApprovalFn({})\ntestRequestLocationExecuteFn({}, {\n  primaryConfirmed: true,\n  secondaryConfirmed: false\n})\n```\n\n***\n\n## 4. AssistantTool Registration Functions Explained\n\n### 1. `registerApprovalRequest`\n\nRegisters a function to request user approval before executing the tool.\n\n```ts\nfunction registerApprovalRequest<P>(\n  requestFn: AssistantToolApprovalRequestFn<P>\n): AssistantToolApprovalRequestTestFn<P>\n```\n\n**Parameters**:\n\n- `requestFn(params, scriptEditorProvider?)`: Returns a prompt with messages and button labels.\n- `params`: Input parameters for the tool.\n- `scriptEditorProvider`: Available only when `scriptEditorOnly` is set to true, provides file access for the script.\n\n**Return Value**:\n\nA test function for simulating approval requests in the script editor.\n\n***\n\n### 2. `registerExecuteToolWithApproval`\n\nRegisters an execution function that requires user approval.\n\n```ts\nfunction registerExecuteToolWithApproval<P>(\n  executeFn: AssistantToolExecuteWithApprovalFn<P>\n): AssistantToolExecuteWithApprovalTestFn<P>\n```\n\n**Parameters**:\n\n- `params`: Input parameters for execution.\n- `userAction`: User's choice in the approval prompt:\n\n```ts\ntype UserActionForApprovalRequest = {\n  primaryConfirmed: boolean\n  secondaryConfirmed: boolean\n}\n```\n\n- `scriptEditorProvider`: Same as above.\n\n**Return Value**:\n\nReturns an object:\n\n```ts\n{\n  success: boolean\n  message: string\n}\n```\n\n- `success`: Whether execution succeeded.\n- `message`: Message returned to the Assistant.\n\n***\n\n### 3. `registerExecuteTool`\n\nRegisters a tool that does **not** require user approval.\n\n```ts\nfunction registerExecuteTool<P>(\n  executeFn: AssistantToolExecuteFn<P>\n): AssistantToolExecuteTestFn<P>\n```\n\n**Use Case**: Suitable for non-sensitive operations or those that don’t involve device permissions.\n\n***\n\n### 4. Testing Functions\n\nEach registration function returns a test function that can be used in the script:\n\n```ts\ntestApprovalRequestFn({ ...params })\ntestExecuteFn({ ...params }, {\n  primaryConfirmed: true,\n  secondaryConfirmed: false,\n})\ntestExecuteToolFn({ ...params })\n```\n\n***\n\n## 5. ScriptEditorProvider Interface\n\nWhen `scriptEditorOnly: true` is set, the system provides a `ScriptEditorProvider` interface that allows access to the script project’s file system and syntax info.\n\nCapabilities include:\n\n- File read/write (read, update, write, insert, replace)\n- Diff comparison (`openDiffEditor`)\n- Linting results (`getLintErrors`)\n- List all files/folders in the project\n\nUseful for tools that edit scripts, perform formatting, or batch modifications.\n\n***\n\n## 6. Execution and User Experience Flow\n\n1. The Assistant determines whether to invoke a tool during a conversation.\n2. If the tool requires approval, a dialog box is displayed:\n   - The prompt is provided by `registerApprovalRequest`.\n   - Once the user clicks “Allow,” the tool logic is executed.\n3. Execution results are returned to the Assistant through the `message` field, and shown to the user.\n\n***\n\n## 7. Tools That Don’t Require Approval\n\nIf you don’t want to show an approval prompt, simply use `registerExecuteTool` and set `requireApproval: false` in `assistant_tool.json`.\n\n```ts\nAssistantTool.registerExecuteTool<MyParams>(async (params) => {\n  return {\n    success: true,\n    message: \"Tool executed successfully.\"\n  }\n})\n```\n\n***\n\n## 8. Summary\n\nAssistant Tool is an extensible module provided by the Scripting application, supporting scenarios such as user authorization, file manipulation, and system-level access. The development process includes:\n\n1. Creating the tool in a scripting project;\n2. Configuring its metadata;\n3. Implementing and registering the logic functions;\n4. Testing tool behavior with test functions;\n5. Triggering tool execution automatically or manually within Assistant conversations.\n","routePath":"/doc/AssistantTool","lang":"en","toc":[{"id":"1-tool-creation-process","text":"1. Tool Creation Process","depth":2,"charIndex":819},{"id":"2-configuration-file-assistant_tooljson","text":"2. Configuration File: `assistant_tool.json`","depth":2,"charIndex":1289},{"id":"field-descriptions","text":"Field Descriptions:","depth":3,"charIndex":1856},{"id":"3-execution-logic-example-assistant_tooltsx","text":"3. Execution Logic Example: `assistant_tool.tsx`","depth":2,"charIndex":2877},{"id":"4-assistanttool-registration-functions-explained","text":"4. AssistantTool Registration Functions Explained","depth":2,"charIndex":4442},{"id":"1-registerapprovalrequest","text":"1. `registerApprovalRequest`","depth":3,"charIndex":4496},{"id":"2-registerexecutetoolwithapproval","text":"2. `registerExecuteToolWithApproval`","depth":3,"charIndex":5111},{"id":"3-registerexecutetool","text":"3. `registerExecuteTool`","depth":3,"charIndex":5821},{"id":"4-testing-functions","text":"4. Testing Functions","depth":3,"charIndex":6132},{"id":"5-scripteditorprovider-interface","text":"5. ScriptEditorProvider Interface","depth":2,"charIndex":6417},{"id":"6-execution-and-user-experience-flow","text":"6. Execution and User Experience Flow","depth":2,"charIndex":6901},{"id":"7-tools-that-dont-require-approval","text":"7. Tools That Don’t Require Approval","depth":2,"charIndex":7310},{"id":"8-summary","text":"8. Summary","depth":2,"charIndex":7650}],"frontmatter":{},"version":"","description":"Assistant Tool is a system extension mechanism within the Scripting application that enhances the capabilities of an intelligent assistant (Assistant). By defining and implementing an Assistant Tool, developers can provide the Assistant with auxiliary functionalities such as device capability access, file reading/writing, and data analysis. This improves both the intelligence and practicality of the Assistant. This document uses an example tool, \"Request Current Location\", to illustrate the full implementation process, including tool creation, configuration file explanation, execution logic, and detailed descriptions of various functions."},{"title":"Animation and Transition","content":"Scripting Animation & Transition System\n\n# Animation Class\n\nThe `Animation` class describes how values animate in time.\n\n## Factory Methods\n\n### `Animation.default()`\n\nCreates a default system animation.\n\n```ts\nstatic default(): Animation\n```\n\n***\n\n### `Animation.linear(duration?)`\n\n```ts\nstatic linear(duration?: number | null): Animation\n```\n\nConstant-speed animation.\n\n***\n\n### `Animation.easeIn(duration?)`\n\n```ts\nstatic easeIn(duration?: number | null): Animation\n```\n\n***\n\n### `Animation.easeOut(duration?)`\n\n```ts\nstatic easeOut(duration?: number | null): Animation\n```\n\n***\n\n### `Animation.bouncy(options?)`\n\n```ts\nstatic bouncy(options?: {\n  duration?: number\n  extraBounce?: number\n}): Animation\n```\n\nSpring-like animation with additional bounce.\n\n***\n\n### `Animation.smooth(options?)`\n\n```ts\nstatic smooth(options?: {\n  duration?: number\n  extraBounce?: number\n}): Animation\n```\n\n***\n\n### `Animation.snappy(options?)`\n\n```ts\nstatic snappy(options?: {\n  duration?: number\n  extraBounce?: number\n}): Animation\n```\n\n***\n\n### `Animation.spring(options?)`\n\nSupports two mutually exclusive modes.\n\n```ts\nstatic spring(options?: {\n  blendDuration?: number\n} & (\n  | {\n      duration?: number\n      bounce?: number\n      response?: never\n      dampingFraction?: never\n    }\n  | {\n      response?: number\n      dampingFraction?: number\n      duration?: never\n      bounce?: never\n    }\n)): Animation\n```\n\n***\n\n### `Animation.interactiveSpring(options?)`\n\n```ts\nstatic interactiveSpring(options?: {\n  response?: number\n  dampingFraction?: number\n  blendDuration?: number\n}): Animation\n```\n\n***\n\n### `Animation.interpolatingSpring(options?)`\n\n```ts\nstatic interpolatingSpring(options?: {\n  mass?: number\n  stiffness: number\n  damping: number\n  initialVelocity?: number\n} | {\n  duration?: number\n  bounce?: number\n  initialVelocity?: number\n  mass?: never\n  stiffness?: never\n  damping?: never\n}): Animation\n```\n\n***\n\n## Modifier Methods\n\n### `.delay(time)`\n\n```ts\ndelay(time: number): Animation\n```\n\n### `.repeatCount(count, autoreverses)`\n\n```ts\nrepeatCount(count: number, autoreverses?: boolean): Animation\n```\n\n### `.repeatForever(autoreverses)`\n\n```ts\nrepeatForever(autoreverses?: boolean): Animation\n```\n\n***\n\n# Transition Class\n\n`Transition` describes how a view enters or leaves the hierarchy.\n\n## Instance Methods\n\n### `.animation(animation)`\n\nAttach a specific animation to a transition.\n\n```ts\nanimation(animation?: Animation): Transition\n```\n\n### `.combined(other)`\n\nCombine transitions.\n\n```ts\ncombined(other: Transition): Transition\n```\n\n***\n\n## Static Transitions\n\n### Identity\n\n```ts\nTransition.identity()\n```\n\n### Move\n\n```ts\nTransition.move(edge: Edge)\n```\n\n### Offset\n\n```ts\nTransition.offset(position?: Point)\n```\n\n### Push\n\n```ts\nTransition.pushFrom(edge: Edge)\n```\n\n### Opacity\n\n```ts\nTransition.opacity()\n```\n\n### Scale\n\n```ts\nTransition.scale(scale?: number, anchor?: Point | KeywordPoint)\n```\n\n### Slide\n\n```ts\nTransition.slide()\n```\n\n### Fade\n\n```ts\nTransition.fade(duration?: number)\n```\n\n### Flip transitions\n\n```ts\nTransition.flipFromLeft(duration?)\nTransition.flipFromRight(duration?)\nTransition.flipFromTop(duration?)\nTransition.flipFromBottom(duration?)\n```\n\n### Asymmetric\n\n```ts\nTransition.asymmetric(insertion: Transition, removal: Transition)\n```\n\n***\n\n# withAnimation\n\n```ts\nfunction withAnimation(body: () => void): Promise<void>\nfunction withAnimation(animation: Animation, body: () => void): Promise<void>\nfunction withAnimation(\n  animation: Animation,\n  completionCriteria: \"logicallyComplete\" | \"removed\",\n  body: () => void\n): Promise<void>\n```\n\nWraps a state update and animates any affected values.\n\nExample:\n\n```ts\nwithAnimation(Animation.easeOut(0.3), () => {\n  visible.setValue(false)\n})\n```\n\n***\n\n# Correct Usage of the animation View Modifier\n\n### (Important Correction)\n\nIn Scripting, the `animation` prop is **not**:\n\n```tsx\nanimation={anim}     // incorrect\n```\n\nThe correct format is:\n\n```tsx\nanimation={{\n  animation: anim,\n  value: <observable or value>\n}}\n```\n\n### Meaning:\n\n| Field       | Description                                           |\n| ----------- | ----------------------------------------------------- |\n| `animation` | The `Animation` instance to use                       |\n| `value`     | The observable value whose changes should be animated |\n\nThis mirrors SwiftUI’s `.animation(animation, value: value)` modifier.\n\n***\n\n## Correct Examples\n\n### Example: Animate size changes\n\n```tsx\nconst size = useObservable(100)\nconst anim = Animation.spring({ duration: 0.3, bounce: 0.3 })\n\n<Rectangle\n  frame={{ width: size.value, height: size.value }}\n  animation={{ animation: anim, value: size.value }}\n/>\n\n<Button\n  title=\"Toggle Size\"\n  action={() => {\n    size.setValue(size.value === 100 ? 200 : 100)\n  }}\n/>\n```\n\n### Example: Animate color changes\n\n```tsx\nconst isOn = useObservable(false)\n\n<Text\n  color={isOn.value ? \"red\" : \"blue\"}\n  animation={{\n    animation: Animation.easeIn(0.25),\n    value: isOn.value\n  }}\n>\n  Changing color\n</Text>\n```\n\n### Example: Animate layout changes\n\n```tsx\nconst expanded = useObservable(false)\n\n<VStack\n  spacing={expanded.value ? 40 : 10}\n  animation={{\n    animation: Animation.smooth({ duration: 0.3 }),\n    value: expanded.value\n  }}\n>\n```\n\n***\n\n# Transition Usage Examples\n\n### Simple visibility toggle with transition\n\n```tsx\nconst visible = useObservable(true)\n\n<VStack>\n  {visible.value &&\n    <Text\n      transition={Transition\n        .slide()\n        .combined(Transition.opacity())\n      }\n    >\n      Slide + Fade\n    </Text>\n  }\n\n  <Button\n    title=\"Toggle\"\n    action={() => {\n      withAnimation(() => {\n        visible.setValue(!visible.value)\n      })\n    }}\n  />\n</VStack>\n```\n\n***\n\n# Combined Example: Animation + Transition\n\n```tsx\nconst visible = useObservable(true)\nconst anim = Animation.spring({ duration: 0.4, bounce: 0.25 })\n\n<VStack spacing={12}>\n  {visible.value &&\n    <Text\n      transition={Transition\n        .move(\"bottom\")\n        .combined(Transition.opacity())\n        .animation(anim)\n      }\n    >\n      Animated panel\n    </Text>\n  }\n\n  <Button\n    title=\"Toggle\"\n    action={() => {\n      withAnimation(anim, () => {\n        visible.setValue(!visible.value)\n      })\n    }}\n  />\n</VStack>\n```\n\n***\n\n# Summary\n\n### Key Points\n\n- `useObservable` drives UI updates.\n- `withAnimation` animates state changes.\n- `Transition` defines enter/exit effects.\n- **Correct animation modifier usage**:\n\n```tsx\nanimation={{ animation: myAnimation, value: myValue }}\n```\n","routePath":"/doc/Changelog/2.4.3/Animation and Transition","lang":"en","toc":[{"id":"factory-methods","text":"Factory Methods","depth":2,"charIndex":121},{"id":"animationdefault","text":"`Animation.default()`","depth":3,"charIndex":141},{"id":"animationlinearduration","text":"`Animation.linear(duration?)`","depth":3,"charIndex":249},{"id":"animationeaseinduration","text":"`Animation.easeIn(duration?)`","depth":3,"charIndex":378},{"id":"animationeaseoutduration","text":"`Animation.easeOut(duration?)`","depth":3,"charIndex":480},{"id":"animationbouncyoptions","text":"`Animation.bouncy(options?)`","depth":3,"charIndex":584},{"id":"animationsmoothoptions","text":"`Animation.smooth(options?)`","depth":3,"charIndex":764},{"id":"animationsnappyoptions","text":"`Animation.snappy(options?)`","depth":3,"charIndex":897},{"id":"animationspringoptions","text":"`Animation.spring(options?)`","depth":3,"charIndex":1030},{"id":"animationinteractivespringoptions","text":"`Animation.interactiveSpring(options?)`","depth":3,"charIndex":1413},{"id":"animationinterpolatingspringoptions","text":"`Animation.interpolatingSpring(options?)`","depth":3,"charIndex":1597},{"id":"modifier-methods","text":"Modifier Methods","depth":2,"charIndex":1918},{"id":"delaytime","text":"`.delay(time)`","depth":3,"charIndex":1939},{"id":"repeatcountcount-autoreverses","text":"`.repeatCount(count, autoreverses)`","depth":3,"charIndex":2001},{"id":"repeatforeverautoreverses","text":"`.repeatForever(autoreverses)`","depth":3,"charIndex":2115},{"id":"instance-methods","text":"Instance Methods","depth":2,"charIndex":2303},{"id":"animationanimation","text":"`.animation(animation)`","depth":3,"charIndex":2324},{"id":"combinedother","text":"`.combined(other)`","depth":3,"charIndex":2455},{"id":"static-transitions","text":"Static Transitions","depth":2,"charIndex":2557},{"id":"identity","text":"Identity","depth":3,"charIndex":2580},{"id":"move","text":"Move","depth":3,"charIndex":2627},{"id":"offset","text":"Offset","depth":3,"charIndex":2676},{"id":"push","text":"Push","depth":3,"charIndex":2735},{"id":"opacity","text":"Opacity","depth":3,"charIndex":2788},{"id":"scale","text":"Scale","depth":3,"charIndex":2833},{"id":"slide","text":"Slide","depth":3,"charIndex":2919},{"id":"fade","text":"Fade","depth":3,"charIndex":2960},{"id":"flip-transitions","text":"Flip transitions","depth":3,"charIndex":3016},{"id":"asymmetric","text":"Asymmetric","depth":3,"charIndex":3191},{"id":"important-correction","text":"(Important Correction)","depth":3,"charIndex":3795},{"id":"meaning","text":"Meaning:","depth":3,"charIndex":4019},{"id":"correct-examples","text":"Correct Examples","depth":2,"charIndex":4399},{"id":"example-animate-size-changes","text":"Example: Animate size changes","depth":3,"charIndex":4420},{"id":"example-animate-color-changes","text":"Example: Animate color changes","depth":3,"charIndex":4788},{"id":"example-animate-layout-changes","text":"Example: Animate layout changes","depth":3,"charIndex":5023},{"id":"simple-visibility-toggle-with-transition","text":"Simple visibility toggle with transition","depth":3,"charIndex":5290},{"id":"key-points","text":"Key Points","depth":3,"charIndex":6263}],"frontmatter":{},"version":"","description":"Scripting Animation & Transition System The Animation class describes how values animate in time."},{"title":"EnvironmentValuesReader","content":"`EnvironmentValuesReader` is a Scripting component that allows you to read environment values from the current view hierarchy.\nIt serves a similar role to SwiftUI’s `@Environment`, but with a more explicit and controlled design:\n**You must specify which environment keys you want to read**, and the component will inject only those values into the `children` callback.\n\nThis makes environment access predictable, explicit, and optimized.\n\n***\n\n# EnvironmentValues Type\n\n```ts\ntype EnvironmentValues = {\n    colorScheme: ColorScheme;\n    colorSchemeContrast: ColorSchemeContrast;\n    displayScale: number;\n    horizontalSizeClass: UserInterfaceSizeClass | null;\n    verticalSizeClass: UserInterfaceSizeClass | null;\n    dismiss: () => void;\n    dismissSearch: () => void;\n    editMode: EditMode | null;\n    widgetRenderingMode: WidgetRenderingMode;\n    showsWidgetContainerBackground: boolean;\n    isSearching: boolean;\n    isPresented: boolean;\n    activityFamily: \"small\" | \"medium\";\n    tabViewBottomAccessoryPlacement: 'expanded' | 'inline';\n};\n```\n\nBelow are the descriptions of each field.\n\n***\n\n# Field Descriptions\n\n### 1. colorScheme\n\nType: `ColorScheme`\nThe current system color appearance (`light` or `dark`).\n\n***\n\n### 2. colorSchemeContrast\n\nType: `ColorSchemeContrast`\nRepresents contrast settings such as `standard` or `increased`.\n\n***\n\n### 3. displayScale\n\nType: `number`\nThe display scale factor of the device (e.g., **2.0**, **3.0**).\n\n***\n\n### 4. horizontalSizeClass\n\nType: `UserInterfaceSizeClass | null`\nThe horizontal size class of the current environment: `compact` or `regular`.\n\n***\n\n### 5. verticalSizeClass\n\nType: `UserInterfaceSizeClass | null`\nThe vertical size class, same categories as above.\n\n***\n\n### 6. dismiss\n\nType: `() => void`\nA function to dismiss the currently presented view (equivalent to SwiftUI’s `dismiss()`).\n\n***\n\n### 7. dismissSearch\n\nType: `() => void`\nA function that dismisses the current searchable field, if active.\n\n***\n\n### 8. editMode\n\nType: `EditMode | null`\nIndicates whether the view is in editing mode (e.g., during List editing).\n\n***\n\n### 9. widgetRenderingMode\n\nType: `WidgetRenderingMode`\nThe current widget rendering mode (e.g., `fullColor`, `accented`).\n\n***\n\n### 10. showsWidgetContainerBackground\n\nType: `boolean`\nIndicates whether the widget is showing the system-provided container background.\n\n***\n\n### 11. isSearching\n\nType: `boolean`\nWhether the view is currently in a searching state triggered by `searchable`.\n\n***\n\n### 12. isPresented\n\nType: `boolean`\nWhether the view is currently being shown, unlike `onAppear` which is called every time the view appears, `isPresented` is called only once when the view is first shown.\n\n***\n\n### 13. activityFamily\n\nType: `\"small\" | \"medium\"`\nThe current LiveActivity size, similar to SwiftUI's `activityFamily`, used to determine the size of LiveActivity UI.\n\n***\n\n### 14. tabViewBottomAccessoryPlacement\n\nType: `'expanded' | 'inline'`\nThe current TabView bottom accessory placement, similar to SwiftUI's `tabViewBottomAccessoryPlacement`.\n\n***\n\n# EnvironmentValuesReader Component\n\n```ts\ntype EnvironmentValuesReaderProps = {\n    /**\n     * The keys to read from the environment values.\n     */\n    keys: Array<keyof EnvironmentValues>;\n    /**\n     * The callback function that receives the environment values.\n     */\n    children: (values: EnvironmentValues) => VirtualNode;\n};\n```\n\n***\n\n# Props Description\n\n### keys\n\nType: `Array<keyof EnvironmentValues>`\nSpecifies exactly which environment keys you want to read.\nOnly these keys will be retrieved and passed to the callback.\n\n***\n\n### children(values)\n\nType: `(values: EnvironmentValues) => VirtualNode`\nA rendering callback that receives the requested environment values and returns the corresponding view.\n\n***\n\n# Component Definition\n\n```ts\ndeclare const EnvironmentValuesReader: FunctionComponent<EnvironmentValuesReaderProps>;\n```\n\n***\n\n# Usage Examples\n\n## Example 1 — Reading colorScheme and displayScale\n\n```tsx\n\n\nfunction View() {\n  return <EnvironmentValuesReader keys={[\"colorScheme\", \"displayScale\"]}>\n    {(env) => {\n      return <VStack>\n        <Text>Color Scheme: {env.colorScheme}</Text>\n        <Text>Scale: {env.displayScale}</Text>\n      </VStack>\n    }}\n  </EnvironmentValuesReader>\n}\n```\n\n***\n\n## Example 2 — Accessing dismiss\n\n```tsx\n<EnvironmentValuesReader keys={[\"dismiss\"]}>\n  {(env) => {\n    return <Button\n      title=\"Close\"\n      action={() => env.dismiss()}\n    />\n  }}\n</EnvironmentValuesReader>\n```\n\n***\n\n## Example 3 — Dynamic layout using size classes\n\n```tsx\n<EnvironmentValuesReader keys={[\"horizontalSizeClass\"]}>\n  {(env) => {\n    const compact = env.horizontalSizeClass === \"compact\"\n    return compact\n      ? <Text>Compact Layout</Text>\n      : <Text>Regular Layout</Text>\n  }}\n</EnvironmentValuesReader>\n```\n\n***\n\n# Behavior Notes\n\n1. **Only the explicitly listed keys are read**. All other environment values will not be included in the callback.\n2. When any of the requested environment values change, the `children()` callback re-renders automatically.\n3. `dismiss` and `dismissSearch` are real functional operations that behave like their SwiftUI equivalents.\n4. Environment values originate from the parent view hierarchy (Navigation, searchable, editMode, Widget context, etc.).\n5. If a key is not included in `keys`, it will not appear in the `values` object.\n6. This API is not intended for global state management—only for accessing the contextual environment of the current view.\n","routePath":"/doc/Changelog/2.4.3/EnvironmentValuesReader","lang":"en","toc":[{"id":"1-colorscheme","text":"1. colorScheme","depth":3,"charIndex":1123},{"id":"2-colorschemecontrast","text":"2. colorSchemeContrast","depth":3,"charIndex":1226},{"id":"3-displayscale","text":"3. displayScale","depth":3,"charIndex":1352},{"id":"4-horizontalsizeclass","text":"4. horizontalSizeClass","depth":3,"charIndex":1459},{"id":"5-verticalsizeclass","text":"5. verticalSizeClass","depth":3,"charIndex":1609},{"id":"6-dismiss","text":"6. dismiss","depth":3,"charIndex":1730},{"id":"7-dismisssearch","text":"7. dismissSearch","depth":3,"charIndex":1861},{"id":"8-editmode","text":"8. editMode","depth":3,"charIndex":1975},{"id":"9-widgetrenderingmode","text":"9. widgetRenderingMode","depth":3,"charIndex":2097},{"id":"10-showswidgetcontainerbackground","text":"10. showsWidgetContainerBackground","depth":3,"charIndex":2226},{"id":"11-issearching","text":"11. isSearching","depth":3,"charIndex":2370},{"id":"12-ispresented","text":"12. isPresented","depth":3,"charIndex":2491},{"id":"13-activityfamily","text":"13. activityFamily","depth":3,"charIndex":2704},{"id":"14-tabviewbottomaccessoryplacement","text":"14. tabViewBottomAccessoryPlacement","depth":3,"charIndex":2878},{"id":"keys","text":"keys","depth":3,"charIndex":3426},{"id":"childrenvalues","text":"children(values)","depth":3,"charIndex":3602},{"id":"example-1--reading-colorscheme-and-displayscale","text":"Example 1 — Reading colorScheme and displayScale","depth":2,"charIndex":3931},{"id":"example-2--accessing-dismiss","text":"Example 2 — Accessing dismiss","depth":2,"charIndex":4287},{"id":"example-3--dynamic-layout-using-size-classes","text":"Example 3 — Dynamic layout using size classes","depth":2,"charIndex":4510}],"frontmatter":{},"version":"","description":"EnvironmentValuesReader is a Scripting component that allows you to read environment values from the current view hierarchy.\nIt serves a similar role to SwiftUI’s @Environment, but with a more explicit and controlled design:\nYou must specify which environment keys you want to read, and the component will inject only those values into the children callback. This makes environment access predictable, explicit, and optimized. Below are the descriptions of each field. 1. colorScheme Type: ColorScheme\nThe current system color appearance (light or dark). 2. colorSchemeContrast Type: ColorSchemeContrast\nRepresents contrast settings such as standard or increased. 3. displayScale Type: number\nThe display scale factor of the device (e.g., 2.0, 3.0). 4. horizontalSizeClass Type: UserInterfaceSizeClass | null\nThe horizontal size class of the current environment: compact or regular. 5. verticalSizeClass Type: UserInterfaceSizeClass | null\nThe vertical size class, same categories as above. 6. dismiss Type: () => void\nA function to dismiss the currently presented view (equivalent to SwiftUI’s dismiss()). 7. dismissSearch Type: () => void\nA function that dismisses the current searchable field, if active. 8. editMode Type: EditMode | null\nIndicates whether the view is in editing mode (e.g., during List editing). 9. widgetRenderingMode Type: WidgetRenderingMode\nThe current widget rendering mode (e.g., fullColor, accented). 10. showsWidgetContainerBackground Type: boolean\nIndicates whether the widget is showing the system-provided container background. 11. isSearching Type: boolean\nWhether the view is currently in a searching state triggered by searchable. 12. isPresented Type: boolean\nWhether the view is currently being shown, unlike onAppear which is called every time the view appears, isPresented is called only once when the view is first shown. 13. activityFamily Type: \"small\" | \"medium\"\nThe current LiveActivity size, similar to SwiftUI's activityFamily, used to determine the size of LiveActivity UI. 14. tabViewBottomAccessoryPlacement Type: 'expanded' | 'inline'\nThe current TabView bottom accessory placement, similar to SwiftUI's tabViewBottomAccessoryPlacement. keys Type: Array<keyof EnvironmentValues>\nSpecifies exactly which environment keys you want to read.\nOnly these keys will be retrieved and passed to the callback. children(values) Type: (values: EnvironmentValues) => VirtualNode\nA rendering callback that receives the requested environment values and returns the corresponding view."},{"title":"ForEach","content":"The `ForEach` component renders a dynamic list of child views. It is used to display collections, create editable lists, and enable system-standard interactions such as swipe-to-delete. It is fully integrated with the Scripting app’s `Observable` state system and mirrors the design of SwiftUI’s `ForEach`.\n\n`ForEach` supports two usage modes:\n\n1. **Deprecated mode**: `count + itemBuilder`\n2. **Recommended mode**: `data: Observable<T[]> + builder`\n\n***\n\n# 1. Type Definitions\n\n## ForEachDeprecatedProps (Not Recommended)\n\n```ts\ntype ForEachDeprecatedProps = {\n  count: number;\n  itemBuilder: (index: number) => VirtualNode;\n  onDelete?: (indices: number[]) => void;\n  onMove?: (indices: number[], newOffset: number) => void;\n};\n```\n\n### Property Details\n\n#### count: number\n\nSpecifies how many items to render. The `itemBuilder` function will be called for indices from 0 to `count - 1`.\n\n#### itemBuilder(index)\n\nBuilds a `VirtualNode` for each index.\n\n#### onDelete(indices)\n\nEnables system-standard swipe-to-delete when the ForEach is placed inside a `List`.\nThis callback is invoked after the row has already been removed from the list UI.\nYou must manually delete the corresponding items from your data source inside this callback.\n\n#### onMove(indices, newOffset)\n\nEnables drag-to-reorder behavior.\nTo disable item movement, pass `null`.\n\n***\n\n# 2. ForEachProps (Recommended)\n\n```ts\ntype ForEachProps<T extends { id: string }> =\n  | ForEachDeprecatedProps\n  | {\n      data: Observable<T[]>;\n      builder: (item: T, index: number) => VirtualNode;\n      editActions?: \"delete\" | \"move\" | \"all\" | null;\n    };\n```\n\n### Property Details\n\n#### data: Observable\\<T\\[]>\n\nAn observable array of items.\nEach item **must** contain a unique `id: string`.\n\nBenefits of using `Observable<T[]>`:\n\n- Automatic refresh when the collection changes\n- Supports animation\n- Behavior closer to SwiftUI’s `ForEach($items)`\n- Integrates cleanly with `List`, `NavigationStack`, and other components\n\n#### builder(item, index)\n\nBuilds a VirtualNode for the element at the given index.\n\n**Important: You must provide a unique `key` (usually `item.id`) on the returned node.**\n\n#### editActions: \"delete\" | \"move\" | \"all\" | null\n\nDefines the editing capabilities of the ForEach component.\n\n| Value      | Description                        |\n| ---------- | ---------------------------------- |\n| `\"delete\"` | Enables deletion only              |\n| `\"move\"`   | Enables reordering only            |\n| `\"all\"`    | Enables both deletion and movement |\n| `null`     | No editing actions (default)       |\n\nWhen used inside a `List`, these actions automatically map to system-standard interactions.\n\n***\n\n# 3. ForEachComponent Interface\n\n```ts\ninterface ForEachComponent {\n  <T extends { id: string }>(props: ForEachProps<T>): VirtualNode;\n}\n```\n\nThe component is generic and supports any item type containing an `id`.\n\n***\n\n# 4. Enabling System-Standard Deletion (Example)\n\nWhen `ForEach` is placed inside a `List`, using `data` and `builder` will automatically activate swipe-to-delete. The only requirement is that each item has a unique `id`.\n\n### Example\n\n```tsx\nfunction View() {\n  const fruits = useObservable(() =>\n    [\"Apple\", \"Bananer\", \"Papaya\", \"Mango\"].map((name, index) => ({\n      id: index.toString(),\n      name,\n    }))\n  );\n\n  return (\n    <NavigationStack>\n      <List\n        navigationTitle=\"Fruits\"\n        toolbar={{\n          topBarTrailing: <EditButton />,\n        }}>\n        <ForEach data={fruits} builder={(item, index) => <Text key={item.id}>{item.name}</Text>} />\n      </List>\n    </NavigationStack>\n  );\n}\n```\n\n***\n\n# 5. Best Practices and Usage Guidelines\n\n### 1. Prefer the `data: Observable<T[]>` API\n\nThis mode provides:\n\n- Better performance\n- Full type inference\n- Proper list diffing and animations\n- Consistent behavior with SwiftUI\n\n### 2. Every item must have a unique `id: string`\n\nThis ensures:\n\n- Correct diff computation\n- Smooth animations\n- Accurate deletion and movement behavior\n\n### 3. Always define `key={item.id}` in the builder\n\nFailing to do so may result in:\n\n- Broken animations\n- Incorrect row updates\n- Misaligned delete/move behavior\n\n### 4. To support editing, place ForEach inside a `List`\n\nAnd optionally add an `EditButton`, for example:\n\n```tsx\ntoolbar={{\n  topBarTrailing: <EditButton />\n}}\n```\n","routePath":"/doc/Changelog/2.4.3/ForEach/","lang":"en","toc":[{"id":"foreachdeprecatedprops-not-recommended","text":"ForEachDeprecatedProps (Not Recommended)","depth":2,"charIndex":479},{"id":"property-details","text":"Property Details","depth":3,"charIndex":735},{"id":"count-number","text":"count: number","depth":4,"charIndex":757},{"id":"itembuilderindex","text":"itemBuilder(index)","depth":4,"charIndex":891},{"id":"ondeleteindices","text":"onDelete(indices)","depth":4,"charIndex":956},{"id":"onmoveindices-newoffset","text":"onMove(indices, newOffset)","depth":4,"charIndex":1240},{"id":"property-details-1","text":"Property Details","depth":3,"charIndex":1621},{"id":"data-observablet","text":"data: Observable<T[]>","depth":4,"charIndex":-1},{"id":"builderitem-index","text":"builder(item, index)","depth":4,"charIndex":1985},{"id":"editactions-delete--move--all--null","text":"editActions: \"delete\" | \"move\" | \"all\" | null","depth":4,"charIndex":2160},{"id":"example","text":"Example","depth":3,"charIndex":3126},{"id":"1-prefer-the-data-observablet-api","text":"1. Prefer the `data: Observable<T[]>` API","depth":3,"charIndex":3670},{"id":"2-every-item-must-have-a-unique-id-string","text":"2. Every item must have a unique `id: string`","depth":3,"charIndex":3854},{"id":"3-always-define-keyitemid-in-the-builder","text":"3. Always define `key={item.id}` in the builder","depth":3,"charIndex":4010},{"id":"4-to-support-editing-place-foreach-inside-a-list","text":"4. To support editing, place ForEach inside a `List`","depth":3,"charIndex":4175}],"frontmatter":{},"version":"","description":"The ForEach component renders a dynamic list of child views. It is used to display collections, create editable lists, and enable system-standard interactions such as swipe-to-delete. It is fully integrated with the Scripting app’s Observable state system and mirrors the design of SwiftUI’s ForEach. ForEach supports two usage modes: Deprecated mode: count + itemBuilderRecommended mode: data: Observable<T[]> + builder"},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  const namedFonts = useObservable(() => {\n    return [\n      \"largeTitle\",\n      \"title\",\n      \"headline\",\n      \"body\",\n      \"caption\"\n    ].map(e => ({\n      id: e,\n      name: e as Font\n    }))\n  })\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Iterating\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n        header={\n          <Text\n            textCase={null}\n          >ForEach</Text>\n        }\n      >\n        <ForEach\n          data={namedFonts}\n          builder={(namedFont) => {\n            return <Text\n              key={namedFont.id}\n              font={namedFont.name}\n            >{namedFont.name}</Text>\n          }}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text\n            textCase={null}\n          >Iterating in code block</Text>\n        }\n      >\n        <VStack>\n          {namedFonts.value.map(namedFont =>\n            <Text\n              font={namedFont.name}\n            >{namedFont.name}</Text>\n          )}\n        </VStack>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Changelog/2.4.3/ForEach/iterating","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"GeometryReader","content":"`GeometryReader` in Scripting is the equivalent of SwiftUI’s GeometryReader. It provides layout information about the container in which its content is placed, including size, safe-area insets, and (on supported systems) container corner insets.\n\nThis component is essential for building responsive layouts that depend on the parent container’s geometry.\n\n***\n\n# GeometryProxy\n\nWhen `GeometryReader` constructs its child content, it injects a `GeometryProxy` instance into the `children` callback. This proxy exposes real-time layout information about the container.\n\n```ts\ninterface GeometryProxy {\n  readonly size: Size;\n  readonly safeAreaInsets: {\n    leading: number;\n    top: number;\n    trailing: number;\n    bottom: number;\n  };\n  /**\n   * Requires iOS 26.0+.\n   */\n  readonly containerCornerInsets: {\n    bottomLeading: Size;\n    bottomTrailing: Size;\n    topLeading: Size;\n    topTrailing: Size;\n  } | null;\n}\n```\n\n***\n\n# GeometryProxy Properties\n\n## 1. size\n\n```ts\nreadonly size: Size\n```\n\nThe actual size of the container during layout.\n\n### Size structure\n\n```ts\ntype Size = {\n  width: number\n  height: number\n}\n```\n\nUse this property when calculating adaptive layout behavior, such as scaling, alignment, or proportional spacing.\n\n***\n\n## 2. safeAreaInsets\n\n```ts\nreadonly safeAreaInsets: {\n  leading: number\n  top: number\n  trailing: number\n  bottom: number\n}\n```\n\nRepresents the safe-area insets of the current container.\nThis ensures content does not overlap with the device notch, home indicator, or other system UI elements.\n\n### Common use cases\n\n- Adjusting content away from the screen edges\n- Implementing custom navigation bars or toolbars\n- Ensuring layout compatibility across devices\n\n***\n\n## 3. containerCornerInsets (iOS 26.0+)\n\n```ts\nreadonly containerCornerInsets: {\n  bottomLeading: Size\n  bottomTrailing: Size\n  topLeading: Size\n  topTrailing: Size\n} | null\n```\n\nAvailable only on **iOS 26+**.\nProvides layout insets corresponding to the physical or visual rounded corners of the container.\n\n### Use cases\n\n- Adapting UI for windowed environments\n- Handling rounded container corners (Stage Manager, split view, floating scenes)\n- Performing precision layout aligned to dynamic corner geometry\n\nIf the platform does not support it, the value will be `null`.\n\n***\n\n# GeometryReader Component\n\n```ts\ntype GeometryReaderProps = {\n  children: (proxy: GeometryProxy) => VirtualNode;\n};\ndeclare const GeometryReader: FunctionComponent<GeometryReaderProps>;\n```\n\n## Props\n\n| Name     | Type                                    | Required | Description                                                               |\n| -------- | --------------------------------------- | -------- | ------------------------------------------------------------------------- |\n| children | `(proxy: GeometryProxy) => VirtualNode` | Yes      | A callback that receives the geometry proxy and returns the view content. |\n\n***\n\n# Behavior\n\n1. GeometryReader occupies the available space in its parent.\n2. During layout, it computes size, safe-area insets, and corner insets.\n3. It passes these values to the `children(proxy)` callback.\n4. The returned VirtualNode content is laid out using these values.\n\nThis behavior matches SwiftUI’s GeometryReader model.\n\n***\n\n# Example: Centered Content\n\n```tsx\n\n\nfunction View() {\n  return <GeometryReader>\n    {(proxy) => {\n      return <VStack\n        frame={{\n          width: proxy.size.width,\n          height: proxy.size.height,\n          alignment: \"center\"\n        }}\n      >\n        <Text>Hello Geometry</Text>\n        <Text>\n          width: {proxy.size.width}\n        </Text>\n        <Text>\n          height: {proxy.size.height}\n        </Text>\n      </VStack>\n    }}\n  </GeometryReader>\n}\n```\n\n***\n\n# Example: Adjusting Layout by Safe Area\n\n```tsx\n<GeometryReader>\n  {(proxy) => {\n    return <VStack\n      padding={{\n        top: proxy.safeAreaInsets.top,\n        bottom: proxy.safeAreaInsets.bottom\n      }}\n    >\n      <Text>Content inside safe area.</Text>\n    </VStack>\n  }}\n</GeometryReader>\n```\n\n***\n\n# Example (iOS 26+): Using containerCornerInsets\n\n```tsx\n<GeometryReader>\n  {(proxy) => {\n    const corners = proxy.containerCornerInsets\n    return <Text>\n      {corners == null\n        ? \"Corner insets not available\"\n        : `Top Leading Corner: ${corners.topLeading.width}, ${corners.topLeading.height}`\n      }\n    </Text>\n  }}\n</GeometryReader>\n```\n\n***\n\n# Best Practices\n\n- Use GeometryReader only when needed, as it creates a flexible layout container.\n- Prefer using it for adaptive, responsive layouts where container size matters.\n- Avoid placing complex or deeply nested views inside GeometryReader unless required.\n","routePath":"/doc/Changelog/2.4.3/GeometryReader","lang":"en","toc":[{"id":"1-size","text":"1. size","depth":2,"charIndex":958},{"id":"size-structure","text":"Size structure","depth":3,"charIndex":1050},{"id":"2-safeareainsets","text":"2. safeAreaInsets","depth":2,"charIndex":1250},{"id":"common-use-cases","text":"Common use cases","depth":3,"charIndex":1545},{"id":"3-containercornerinsets-ios-260","text":"3. containerCornerInsets (iOS 26.0+)","depth":2,"charIndex":1717},{"id":"use-cases","text":"Use cases","depth":3,"charIndex":2025},{"id":"props","text":"Props","depth":2,"charIndex":2489}],"frontmatter":{},"version":"","description":"GeometryReader in Scripting is the equivalent of SwiftUI’s GeometryReader. It provides layout information about the container in which its content is placed, including size, safe-area insets, and (on supported systems) container corner insets. This component is essential for building responsive layouts that depend on the parent container’s geometry. When GeometryReader constructs its child content, it injects a GeometryProxy instance into the children callback. This proxy exposes real-time layout information about the container."},{"title":"LiveActivity View Modifiers","content":"Scripting provides two view modifiers that customize the appearance of Live Activities on the Lock Screen. These modifiers control the background tint color of the Live Activity and the foreground color of the system-provided action button.\n\nThese properties are designed to match SwiftUI’s Live Activity customization options.\n\n***\n\n# Modifier Definitions\n\n```ts\n/**\n * Sets the tint color for the background of a Live Activity that appears on the Lock Screen.\n */\nactivityBackgroundTint?: Color | {\n  light: Color\n  dark: Color\n}\n\n/**\n * Sets the text (foreground) color for the system-provided auxiliary action button\n * that appears next to a Live Activity on the Lock Screen.\n */\nactivitySystemActionForegroundColor?: Color | {\n  light: Color\n  dark: Color\n}\n```\n\n***\n\n# Usage Constraints\n\nThese modifiers **can only be applied to the `content` view** of the Live Activity UI.\n\nThey **do not** take effect when placed in:\n\n- `compactLeading`\n- `compactTrailing`\n- `minimal`\n\nOnly the **full-size Lock Screen presentation** (the `content` region) supports these appearance customizations.\n\n***\n\n# Modifier Details\n\n## 1. activityBackgroundTint\n\n**Type:** `Color | { light: Color; dark: Color }`\n**Description:**\nSets the tint color used as the background of the Live Activity when displayed on the Lock Screen.\n\nThis influences the main card background rendered by the system.\n\n### Typical Use Cases\n\n- Applying a brand color as the Live Activity background\n- Giving different Live Activities distinct themes\n- Improving readability by contrasting text and background colors\n\n***\n\n## 2. activitySystemActionForegroundColor\n\n**Type:** `Color | { light: Color; dark: Color }`\n**Description:**\nSpecifies the foreground (text/icon) color of the system’s auxiliary action button that may appear next to the Live Activity on the Lock Screen.\n\n### Typical Use Cases\n\n- Ensuring button text is readable on dark or bright backgrounds\n- Highlighting an important system-provided action\n- Matching the app’s color theme\n\n***\n\n# Usage Example (Content Only)\n\nThese modifiers must be applied to the **content** view inside your Live Activity UI builder:\n\n```tsx\nfunction ActivityView() {\n  <LiveActivityUI\n    content={\n      <ContentView\n        activityBackgroundTint={\"blue\"}\n        activitySystemActionForegroundColor={\"white\"}\n      />\n    }\n    compactLeading={...}\n    compactTrailing={...}\n    minimal={<Image systemName=\"clock\" />}\n  >\n    <LiveActivityUIExpandedCenter>\n      <ContentView />\n    </LiveActivityUIExpandedCenter>\n  </LiveActivityUI>\n}\n```\n\n***\n\n# Additional Notes\n\n1. These modifiers affect only the Lock Screen presentation of the Live Activity.\n2. They do not modify the compact or minimal variants shown in the Dynamic Island.\n3. If not provided, the system will use default styles consistent with SwiftUI’s behavior.\n","routePath":"/doc/Changelog/2.4.3/LiveActivity View Modifiers","lang":"en","toc":[{"id":"1-activitybackgroundtint","text":"1. activityBackgroundTint","depth":2,"charIndex":1119},{"id":"typical-use-cases","text":"Typical Use Cases","depth":3,"charIndex":1382},{"id":"2-activitysystemactionforegroundcolor","text":"2. activitySystemActionForegroundColor","depth":2,"charIndex":1585},{"id":"typical-use-cases-1","text":"Typical Use Cases","depth":3,"charIndex":1841}],"frontmatter":{},"version":"","description":"Scripting provides two view modifiers that customize the appearance of Live Activities on the Lock Screen. These modifiers control the background tint color of the Live Activity and the foreground color of the system-provided action button. These properties are designed to match SwiftUI’s Live Activity customization options. These modifiers can only be applied to the content view of the Live Activity UI. They do not take effect when placed in: compactLeadingcompactTrailingminimal Only the full-size Lock Screen presentation (the content region) supports these appearance customizations."},{"title":"LiveActivity","content":"The `LiveActivity` API enables you to display real-time, dynamic information from your script on the Lock Screen and, where supported, in the Dynamic Island on iOS devices. It provides a structured interface to start, update, and end Live Activities, and observe their state throughout their lifecycle.\n\nThis document provides a complete guide to using the **LiveActivity API** in the Scripting app, including:\n\n- Core concepts and lifecycle\n- How to register a Live Activity UI\n- How to start, update, and end Live Activities\n- UI layout for Dynamic Island and Lock Screen\n- Full TypeScript/TSX examples\n- Detailed descriptions of every type and option\n\nThe API wraps Apple’s ActivityKit and brings it into the Scripting environment with a React-style UI building approach.\n\n***\n\n# 1. Understanding Live Activities\n\nA Live Activity can appear in the following regions:\n\n- Lock Screen\n- Dynamic Island (iPhone 14 Pro and later)\n- Banner-style presentation on devices without Dynamic Island\n\nLive Activities are used for time-based and progress-based information, such as:\n\n- Timers\n- Fitness progress\n- Delivery tracking\n- Countdowns and reminders\n- Real-time status updates\n\nIn Scripting, each Live Activity consists of:\n\n1. **contentState** (a JSON-serializable object that updates over time)\n2. **UI Builder** (a function that produces TSX UI for each state)\n\n***\n\n# 2. Live Activity State Types\n\n```ts\ntype LiveActivityState = \"active\" | \"dismissed\" | \"ended\" | \"stale\";\n```\n\n| State     | Description                                                                                 |\n| --------- | ------------------------------------------------------------------------------------------- |\n| active    | The Live Activity is visible and can receive content updates.                               |\n| stale     | The Live Activity is out of date. The system expects an update.                             |\n| ended     | The Live Activity ended but may remain visible for up to four hours or a user-defined time. |\n| dismissed | The Live Activity is no longer visible.                                                     |\n\n***\n\n# 3. LiveActivityDetail Type\n\n```ts\ntype LiveActivityDetail = {\n  id: string;\n  state: LiveActivityState;\n};\n```\n\nRepresents a summary of each active Live Activity.\n\n***\n\n# 4. Live Activity UI Types\n\n## 4.1 LiveActivityUIProps\n\n```ts\ntype LiveActivityUIProps = {\n  content: VirtualNode;\n  compactLeading: VirtualNode;\n  compactTrailing: VirtualNode;\n  minimal: VirtualNode;\n  children: VirtualNode | VirtualNode[];\n};\n```\n\nThese regions correspond to ActivityKit’s UI areas:\n\n| Property        | Region                                                |\n| --------------- | ----------------------------------------------------- |\n| content         | Lock Screen and non–Dynamic Island devices            |\n| compactLeading  | Leading area of compact Dynamic Island                |\n| compactTrailing | Trailing area of compact Dynamic Island               |\n| minimal         | The smallest pill-style display                       |\n| children        | The expanded Dynamic Island layout (multiple regions) |\n\n***\n\n# 5. Registering a Live Activity UI\n\nLive Activities **must** be registered inside a standalone file such as `live_activity.tsx`.\n\n```tsx\n\n\nexport type State = {\n  mins: number;\n};\n\nfunction ContentView(state: State) {\n  return (\n    <HStack activityBackgroundTint={{ light: \"clear\", dark: \"clear\" }}>\n      <Image systemName=\"waterbottle\" foregroundStyle=\"systemBlue\" />\n      <Text>{state.mins} minutes left until the next drink</Text>\n    </HStack>\n  );\n}\n\nconst builder: LiveActivityUIBuilder<State> = (state) => {\n  return (\n    <LiveActivityUI\n      content={<ContentView {...state} />}\n      compactLeading={\n        <HStack>\n          <Image systemName=\"clock\" />\n          <Text>{state.mins}m</Text>\n        </HStack>\n      }\n      compactTrailing={<Image systemName=\"waterbottle\" foregroundStyle=\"systemBlue\" />}\n      minimal={<Image systemName=\"clock\" />}>\n      <LiveActivityUIExpandedCenter>\n        <ContentView {...state} />\n      </LiveActivityUIExpandedCenter>\n    </LiveActivityUI>\n  );\n};\n\nexport const MyLiveActivity = LiveActivity.register(\"MyLiveActivity\", builder);\n```\n\n***\n\n# 6. Using a Live Activity in Your Script\n\n```tsx\nimport {\n  Button,\n  Text,\n  VStack,\n  Navigation,\n  NavigationStack,\n  useMemo,\n  useState,\n  LiveActivityState,\n  BackgroundKeeper,\n} from \"scripting\";\n\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss();\n  const [state, setState] = useState<LiveActivityState>();\n\n  const activity = useMemo(() => {\n    const instance = MyLiveActivity();\n\n    instance.addUpdateListener((s) => {\n      setState(s);\n      if (s === \"dismissed\") {\n        BackgroundKeeper.stop();\n      }\n    });\n\n    return instance;\n  }, []);\n\n  return (\n    <NavigationStack>\n      <VStack\n        navigationTitle=\"Live Activity Example\"\n        navigationBarTitleDisplayMode=\"inline\"\n        toolbar={{\n          cancellationAction: <Button title=\"Done\" action={dismiss} />,\n        }}>\n        <Text>Activity State: {state ?? \"-\"}</Text>\n\n        <Button\n          title=\"Start Live Activity\"\n          disabled={state != null}\n          action={() => {\n            let count = 5;\n            BackgroundKeeper.keepAlive();\n\n            activity.start({ mins: count });\n\n            function tick() {\n              setTimeout(() => {\n                count -= 1;\n                if (count === 0) {\n                  activity.end({ mins: 0 });\n                  BackgroundKeeper.stop();\n                } else {\n                  activity.update({ mins: count });\n                  tick();\n                }\n              }, 60000);\n            }\n\n            tick();\n          }}\n        />\n      </VStack>\n    </NavigationStack>\n  );\n}\n\nasync function run() {\n  await Navigation.present(<Example />);\n  Script.exit();\n}\n\nrun();\n```\n\n***\n\n# 7. LiveActivity Class API Reference\n\n## 7.1 start(contentState, options?)\n\n```ts\nstart(contentState: T, options?: LiveActivityOptions): Promise<boolean>\n```\n\nStarts a Live Activity.\n\n### LiveActivityOptions\n\n```ts\ntype LiveActivityOptions = {\n  staleDate?: number | Date;\n  relevanceScore?: number;\n};\n```\n\n- **staleDate**: Timestamp(ms) or Date object at which the activity becomes stale\n- **relevanceScore**: Determines which Live Activity is prioritized in the Dynamic Island\n\n***\n\n## 7.2 update(contentState, options?)\n\n```ts\nupdate(contentState: T, options?: LiveActivityUpdateOptions)\n```\n\n### LiveActivityUpdateOptions\n\n```ts\ntype LiveActivityUpdateOptions = {\n  staleDate?: number | Date;\n  relevanceScore?: number;\n  alert?: {\n    title: string;\n    body: string;\n  };\n};\n```\n\nAlerts appear on Apple Watch when sending an update.\n\n***\n\n## 7.3 end(contentState, options?)\n\n```ts\nend(contentState: T, options?: LiveActivityEndOptions)\n```\n\n### LiveActivityEndOptions\n\n```ts\ntype LiveActivityEndOptions = {\n  staleDate?: number ｜ Date\n  relevanceScore?: number\n  dismissTimeInterval?: number\n}\n```\n\nRules for dismissal (seconds):\n\n- Not provided: default system retention (up to 4 hours)\n- <= 0: remove immediately\n- \\> 0: remove after the specified interval\n\n***\n\n## 7.4 Reading Activity State\n\n```ts\ngetActivityState(): Promise<LiveActivityState | null>\n```\n\n***\n\n## 7.5 Listening for State Changes\n\n```ts\naddUpdateListener(listener);\nremoveUpdateListener(listener);\n```\n\nTriggered when the Live Activity transitions between:\n\n- active → stale\n- active → ended\n- ended → dismissed\n\n***\n\n## 7.6 Static Methods\n\n```ts\nstatic areActivitiesEnabled(): Promise<boolean>\nstatic getAllActivities(): Promise<LiveActivityDetail[]>\nstatic getAllActivitiesIds(): Promise<string[]>\nstatic getActivityState(activityId: string)\nstatic from(activityId, name)\nstatic endAllActivities(options?)\n```\n\n***\n\n# 8. UI Components for Expanded Layout\n\n| Component                      | Description                       |\n| ------------------------------ | --------------------------------- |\n| LiveActivityUI                 | Root layout container             |\n| LiveActivityUIExpandedLeading  | Leading region of expanded layout |\n| LiveActivityUIExpandedTrailing | Trailing region                   |\n| LiveActivityUIExpandedCenter   | Center region                     |\n| LiveActivityUIExpandedBottom   | Bottom region                     |\n\nThese components help structure the expanded Dynamic Island.\n\n***\n\n# 9. Best Practices\n\n## 9.1 contentState must be JSON-serializable\n\nThe following are not allowed:\n\n- Functions\n- Date objects (must use timestamps)\n- Class instances\n- Non-serializable structures\n\n## 9.2 Live Activity registration must be in a standalone file\n\nThis is required due to UI compilation and ActivityKit rules.\n\n## 9.3 Live Activities survive script termination\n\nIf your script needs to keep running (e.g., timers), use:\n\n```ts\nBackgroundKeeper.keepAlive();\n```\n\n***\n\n# 10. Minimal Example\n\n```ts\nconst activity = MyLiveActivity();\n\nawait activity.start({ mins: 10 });\n\nawait activity.update({ mins: 5 });\n\nawait activity.end({ mins: 0 }, { dismissTimeInterval: 0 });\n```\n\n# 11. Notes\n\n- Live Activity starts asynchronously. You need to wait for `start` to return `true` before calling `update` and `end`.\n- Live Activity cannot access documents and iCloud directories. If you want to access files or render images, you must save them to `FileManager.appGroupDocumentsDirectory`. For example, to render an image, you save it to `FileManager.appGroupDocumentsDirectory`, then use `<Image filePath={Path.join(FileManager.appGroupDocumentsDirectory, 'example.png')} />` to render it.\n- Live Activity can access the Storage data shared with the app.\n","routePath":"/doc/Changelog/2.4.3/LiveActivity","lang":"en","toc":[{"id":"41-liveactivityuiprops","text":"4.1 LiveActivityUIProps","depth":2,"charIndex":2334},{"id":"71-startcontentstate-options","text":"7.1 start(contentState, options?)","depth":2,"charIndex":5961},{"id":"liveactivityoptions","text":"LiveActivityOptions","depth":3,"charIndex":6107},{"id":"72-updatecontentstate-options","text":"7.2 update(contentState, options?)","depth":2,"charIndex":6409},{"id":"liveactivityupdateoptions","text":"LiveActivityUpdateOptions","depth":3,"charIndex":6520},{"id":"73-endcontentstate-options","text":"7.3 end(contentState, options?)","depth":2,"charIndex":6769},{"id":"liveactivityendoptions","text":"LiveActivityEndOptions","depth":3,"charIndex":6871},{"id":"74-reading-activity-state","text":"7.4 Reading Activity State","depth":2,"charIndex":7195},{"id":"75-listening-for-state-changes","text":"7.5 Listening for State Changes","depth":2,"charIndex":7296},{"id":"76-static-methods","text":"7.6 Static Methods","depth":2,"charIndex":7519},{"id":"91-contentstate-must-be-json-serializable","text":"9.1 contentState must be JSON-serializable","depth":2,"charIndex":8445},{"id":"92-live-activity-registration-must-be-in-a-standalone-file","text":"9.2 Live Activity registration must be in a standalone file","depth":2,"charIndex":8622},{"id":"93-live-activities-survive-script-termination","text":"9.3 Live Activities survive script termination","depth":2,"charIndex":8749}],"frontmatter":{},"version":"","description":"The LiveActivity API enables you to display real-time, dynamic information from your script on the Lock Screen and, where supported, in the Dynamic Island on iOS devices. It provides a structured interface to start, update, and end Live Activities, and observe their state throughout their lifecycle. This document provides a complete guide to using the LiveActivity API in the Scripting app, including: Core concepts and lifecycleHow to register a Live Activity UIHow to start, update, and end Live ActivitiesUI layout for Dynamic Island and Lock ScreenFull TypeScript/TSX examplesDetailed descriptions of every type and option The API wraps Apple’s ActivityKit and brings it into the Scripting environment with a React-style UI building approach. A Live Activity can appear in the following regions: Lock ScreenDynamic Island (iPhone 14 Pro and later)Banner-style presentation on devices without Dynamic Island Live Activities are used for time-based and progress-based information, such as: TimersFitness progressDelivery trackingCountdowns and remindersReal-time status updates In Scripting, each Live Activity consists of: contentState (a JSON-serializable object that updates over time)UI Builder (a function that produces TSX UI for each state) Represents a summary of each active Live Activity."},{"title":"ReorderableForEach","content":"`ReorderableForEach` is a high-level component in Scripting that provides **built-in drag-to-reorder capability**.\nIt preserves the familiar usage pattern of `ForEach` while adding native support for:\n\n- Drag gesture recognition\n- Active item tracking\n- Manual reorder callbacks\n\nThis allows developers to implement **sortable lists and grids with minimal effort**.\n\nTypical use cases include:\n\n- Draggable card layouts\n- Reorderable grids (`LazyVGrid`, `LazyHGrid`)\n- User-defined module arrangements\n\n***\n\n## 1. Component Definition\n\n```ts\ntype ReorderableForEachProps<T extends {\n  id: string\n}> = {\n  active: Observable<T | null>\n  data: T[]\n  builder: (item: T, index: number) => VirtualNode\n  onMove: (indices: number[], newOffset: number) => void\n}\n\ninterface ReorderableForEachComponent {\n  <T extends {\n    id: string\n  }>(props: ReorderableForEachProps<T>): VirtualNode\n}\n\ndeclare const ReorderableForEach: ReorderableForEachComponent\n```\n\n***\n\n## 2. Generic Constraint\n\n### `id` Is Required and Must Be Stable\n\nThe generic type `T` must satisfy:\n\n```ts\nT extends { id: string }\n```\n\nThis means:\n\n- Every item **must contain a unique and stable `id`**\n- The `id` is used to:\n\n  - Identify the dragged element\n  - Maintain drag consistency\n  - Calculate reorder positions correctly\n\nIf `id` values are duplicated or change during runtime, drag behavior will become unstable.\n\n***\n\n## 3. Props Reference\n\n### 3.1 `active`\n\n```ts\nactive: Observable<T | null>\n```\n\nTracks the **currently dragged item**.\n\nBehavior:\n\n- When dragging starts, the active item is assigned to `active.value`\n- When dragging ends, `active.value` is automatically reset to `null`\n\nTypical use cases:\n\n- Highlighting the active item\n- Adjusting opacity or scale\n- Driving linked animations\n- Displaying drag helper UI\n\n***\n\n### 3.2 `data`\n\n```ts\ndata: T[]\n```\n\nThe current sortable data source.\n\nImportant notes:\n\n- `ReorderableForEach` **does NOT mutate this array automatically**\n- You **must update the order manually inside `onMove`**\n- It is strongly recommended to use an observable source:\n\n```ts\nconst data = useObservable<T[]>(...)\n```\n\n***\n\n### 3.3 `builder`\n\n```ts\nbuilder: (item: T, index: number) => VirtualNode\n```\n\nDefines how each item is rendered.\n\nParameters:\n\n| Parameter | Description                                   |\n| --------- | --------------------------------------------- |\n| `item`    | The current data item                         |\n| `index`   | The **live index** within the reordered array |\n\nThe return value must be a valid `VirtualNode`.\n\nImportant:\n\n- `index` reflects the reordered position\n- Do not rely on previous fixed indices for logic safety inside `builder`\n\n***\n\n### 3.4 `onMove`\n\n```ts\nonMove: (indices: number[], newOffset: number) => void\n```\n\nTriggered when a drag reorder operation completes.\n\nParameter reference:\n\n| Parameter   | Type       | Description                         |\n| ----------- | ---------- | ----------------------------------- |\n| `indices`   | `number[]` | Original indices of the moved items |\n| `newOffset` | `number`   | Target insertion start index        |\n\nYou must perform the full reorder update manually:\n\n1. Extract the moving items\n2. Remove them from the original array\n3. Insert them at `newOffset`\n4. Call `Observable.setValue` with the new array\n\nStandard implementation:\n\n```ts\nconst onMove = (indices: number[], newOffset: number) => {\n  const movingItems = indices.map(index => data.value[index])\n  const newValue = data.value.filter((_, index) => !indices.includes(index))\n  newValue.splice(newOffset, 0, ...movingItems)\n  data.setValue(newValue)\n}\n```\n\n***\n\n## 4. Real Purpose of `contentShape` (Drag Preview Consistency)\n\nFrom your example:\n\n```tsx\n.contentShape({\n  kind: 'dragPreview',\n  shape: {\n    type: 'rect',\n    cornerRadius: 16\n  }\n})\n```\n\nThe **primary purpose of this configuration is**:\n\n> To define the **drag preview shape**, ensuring that the appearance during dragging **matches the non-drag state**, such as preserving the `RoundedRectangle` corner radius.\n\nIt is used for:\n\n- Defining the drag hit-testing region\n- Synchronizing the visual shape during dragging\n- Preventing the drag preview from degrading into a default rectangular mask\n\nIf this is omitted:\n\n- The drag preview may revert to a plain rectangle\n- Visual consistency with custom rounded backgrounds may be lost\n\n***\n\n## 5. Full Usage Flow Overview\n\n### 5.1 Data Model\n\n```ts\ntype Item = {\n  id: string\n  color: Color\n}\n```\n\n***\n\n### 5.2 Observable Data Source\n\n```ts\nconst data = useObservable<Item[]>(() => {\n  return new Array(30)\n    .fill(0)\n    .map((_, index) => ({\n      id: String(index),\n      color: colors[index % colors.length]\n    }))\n})\n```\n\n***\n\n### 5.3 Active Drag State\n\n```ts\nconst active = useObservable<Item | null>(null)\n```\n\n***\n\n### 5.4 Item View with Consistent Drag Preview Shape\n\n```tsx\n<VStack\n  modifiers={\n    modifiers()\n      .frame({ height: 80 })\n      .frame({ maxWidth: 'infinity' })\n      .background(\n        <RoundedRectangle\n          cornerRadius={16}\n          fill={item.color}\n        />\n      )\n      .contentShape({\n        kind: 'dragPreview',\n        shape: {\n          type: 'rect',\n          cornerRadius: 16\n        }\n      })\n  }\n>\n```\n\n***\n\n### 5.5 Usage Inside `LazyVGrid`\n\n```tsx\n<ReorderableForEach\n  active={active}\n  data={data.value}\n  builder={(item) =>\n    <ItemView item={item} />\n  }\n  onMove={onMove}\n/>\n```\n\n***\n\n## 6. Why `ReorderableForEach` Is **Not Recommended Inside `List`**\n\nAlthough technically it can be placed inside a `List`, it is **generally discouraged**, because `List` applies a strong set of built-in system behaviors:\n\n- Automatic separators\n- Fixed row height management\n- Native selection system\n- Built-in swipe gestures\n- System editing mode\n- Cell reuse logic\n\nThese behaviors often **conflict with custom drag reordering**, causing:\n\n- Drag jumping or snapping\n- Incorrect hit-testing\n- Unwanted system edit mode activation\n- Visual desynchronization\n\n### Recommended Containers\n\n- `ScrollView`\n- `LazyVGrid`\n- `LazyHGrid`\n- Fully custom layout containers\n\n### Not Recommended\n\n- `List`\n\n***\n\n## 7. Internal Behavior Summary\n\n`ReorderableForEach` follows this internal workflow:\n\n1. Builds drag-enabled child nodes from `data`\n2. Uses `dragPreview contentShape` to define the drag hit area and preview shape\n3. During dragging:\n\n   - Automatically updates `active`\n   - Continuously recalculates the target insertion index\n4. On drag completion:\n\n   - Calls `onMove`\n   - The developer applies the final reorder\n\n***\n\n## 8. Typical Use Cases\n\n- Custom tool layout sorting\n- Draggable dashboard modules\n- Reorderable widgets\n- Visual task priority organization\n- Card-based grid layouts\n","routePath":"/doc/Changelog/2.4.3/ReorderableForEach/","lang":"en","toc":[{"id":"1-component-definition","text":"1. Component Definition","depth":2,"charIndex":508},{"id":"2-generic-constraint","text":"2. Generic Constraint","depth":2,"charIndex":955},{"id":"id-is-required-and-must-be-stable","text":"`id` Is Required and Must Be Stable","depth":3,"charIndex":981},{"id":"3-props-reference","text":"3. Props Reference","depth":2,"charIndex":1390},{"id":"31-active","text":"3.1 `active`","depth":3,"charIndex":1413},{"id":"32-data","text":"3.2 `data`","depth":3,"charIndex":1805},{"id":"33-builder","text":"3.3 `builder`","depth":3,"charIndex":2132},{"id":"34-onmove","text":"3.4 `onMove`","depth":3,"charIndex":2692},{"id":"4-real-purpose-of-contentshape-drag-preview-consistency","text":"4. Real Purpose of `contentShape` (Drag Preview Consistency)","depth":2,"charIndex":3634},{"id":"5-full-usage-flow-overview","text":"5. Full Usage Flow Overview","depth":2,"charIndex":4379},{"id":"51-data-model","text":"5.1 Data Model","depth":3,"charIndex":4411},{"id":"52-observable-data-source","text":"5.2 Observable Data Source","depth":3,"charIndex":4491},{"id":"53-active-drag-state","text":"5.3 Active Drag State","depth":3,"charIndex":4723},{"id":"54-item-view-with-consistent-drag-preview-shape","text":"5.4 Item View with Consistent Drag Preview Shape","depth":3,"charIndex":4814},{"id":"55-usage-inside-lazyvgrid","text":"5.5 Usage Inside `LazyVGrid`","depth":3,"charIndex":5255},{"id":"6-why-reorderableforeach-is-not-recommended-inside-list","text":"6. Why `ReorderableForEach` Is **Not Recommended Inside `List`**","depth":2,"charIndex":5439},{"id":"recommended-containers","text":"Recommended Containers","depth":3,"charIndex":6002},{"id":"not-recommended","text":"Not Recommended","depth":3,"charIndex":6107},{"id":"7-internal-behavior-summary","text":"7. Internal Behavior Summary","depth":2,"charIndex":6143},{"id":"8-typical-use-cases","text":"8. Typical Use Cases","depth":2,"charIndex":6568}],"frontmatter":{},"version":"","description":"ReorderableForEach is a high-level component in Scripting that provides built-in drag-to-reorder capability.\nIt preserves the familiar usage pattern of ForEach while adding native support for: Drag gesture recognitionActive item trackingManual reorder callbacks This allows developers to implement sortable lists and grids with minimal effort. Typical use cases include: Draggable card layoutsReorderable grids (LazyVGrid, LazyHGrid)User-defined module arrangements"},{"title":"Example","content":"```tsx\n\n\ntype Item = {\n  id: string\n  color: Color\n}\n\nconst colors: Color[] = [\n  'systemRed',\n  'systemBlue',\n  'systemGreen',\n  'systemPink',\n  'systemOrange',\n  'systemPurple',\n]\n\nfunction ItemView({\n  item\n}: {\n  item: Item\n}) {\n\n  return <VStack\n    modifiers={\n      modifiers()\n        .frame({\n          height: 80\n        })\n        .frame({\n          maxWidth: 'infinity'\n        })\n        .background(\n          <RoundedRectangle\n            cornerRadius={16}\n            fill={item.color}\n          />\n        )\n        .contentShape({\n          kind: 'dragPreview',\n          shape: {\n            type: 'rect',\n            cornerRadius: 16\n          }\n        })\n    }\n  >\n    <Text\n      foregroundStyle=\"white\"\n      font=\"title\"\n    >{item.id}</Text>\n  </VStack>\n}\n\nfunction View() {\n  // Access dismiss function.\n  const dismiss = Navigation.useDismiss()\n\n  const data = useObservable<Item[]>(() => {\n    return new Array(30)\n      .fill(0)\n      .map((_, index) => ({\n        id: String(index),\n        color: colors[index % colors.length]\n      }))\n  })\n\n  const active = useObservable<Item | null>(null)\n\n  const onMove = (indices: number[], newOffset: number) => {\n    const movingItems = indices.map(index => data.value[index])\n    const newValue = data.value.filter((_, index) => !indices.includes(index))\n    newValue.splice(newOffset, 0, ...movingItems)\n    data.setValue(newValue)\n  }\n\n  return <NavigationStack>\n    <ScrollView\n      navigationTitle=\"ReorderableForEach demo\"\n      toolbar={\n        <Toolbar>\n          <ToolbarItem\n            placement=\"topBarLeading\"\n          >\n            <Button\n              title=\"Close\"\n              action={dismiss}\n            />\n          </ToolbarItem>\n        </Toolbar>\n      }\n    >\n      <LazyVGrid\n        columns={[\n          {\n            size: {\n              type: 'flexible'\n            }\n          },\n          {\n            size: {\n              type: 'flexible'\n            }\n          }\n        ]}\n        padding={{\n          horizontal: true\n        }}\n      >\n        <ReorderableForEach\n          active={active}\n          data={data.value}\n          builder={(item) =>\n            <ItemView\n              item={item}\n            />\n          }\n          onMove={onMove}\n        />\n      </LazyVGrid>\n    </ScrollView>\n  </NavigationStack>\n}\n\nasync function run() {\n  // Present view.\n  await Navigation.present({\n    element: <View />\n  })\n\n  // Avoiding memory leaks.\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Changelog/2.4.3/ReorderableForEach/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"SSH Client <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SSH Client \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `SSHClient` class provides an interface for connecting to a remote SSH server, executing commands, opening TTY or PTY sessions, transferring files via SFTP, and performing multi-hop SSH jumps. It supports both command-based and interactive terminal-based workflows.\n\nThis class is central to establishing and managing SSH sessions in your script.\n\n***\n\n## Static Methods\n\n### `SSHClient.connect(options): Promise<SSHClient>`\n\nEstablishes a connection to a remote SSH server.\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `host` (`string`):\n    The hostname or IP address of the SSH server.\n\n  - `port?` (`number`):\n    The port number to connect to. Defaults to `22`.\n\n  - `authenticationMethod` (`SSHAuthenticationMethod`):\n    The authentication method to use (e.g., password, RSA key).\n\n  - `trustedHostKeys?` (`string[]`):\n    Optional list of trusted server public keys. If provided, the client will validate the server against this list.\n\n  - `reconnect?` (`\"never\" | \"once\" | \"always\"`):\n    Optional strategy for reconnecting if the connection drops. Default is `\"never\"`.\n\n#### Returns:\n\n- A `Promise` that resolves to an `SSHClient` instance upon successful connection.\n\n#### Example:\n\n```ts\nconst ssh = await SSHClient.connect({\n  host: \"192.168.0.10\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"root\", \"password\")\n})\n```\n\n***\n\n## Properties\n\n### `onDisconnect: (() => void) | null`\n\nCallback function to be invoked when the SSH connection is lost or closed.\n\n#### Example:\n\n```ts\nssh.onDisconnect = () => {\n  console.log(\"Disconnected from SSH server.\")\n}\n```\n\n***\n\n## Instance Methods\n\n### `executeCommand(command: string, options?): Promise<string>`\n\nExecutes a shell command on the remote server and returns its output.\n\n#### Parameters:\n\n- `command` (`string`):\n  The command to execute.\n\n- `options?` (`object`):\n\n  - `maxResponseSize?` (`number`):\n    Maximum number of bytes to return.\n\n  - `includeStderr?` (`boolean`):\n    If `true`, includes standard error output in the result.\n\n  - `inShell?` (`boolean`):\n    If `true`, executes the command inside a shell (e.g., `sh -c`). Default is `false`.\n\n#### Returns:\n\n- A `Promise` that resolves to the command output as a string.\n\n#### Example:\n\n```ts\nconst result = await ssh.executeCommand(\"uname -a\")\n```\n\n***\n\n### `executeCommandStream(command, onOutput, options?): Promise<void>`\n\nExecutes a command and streams its output line-by-line.\n\n#### Parameters:\n\n- `command` (`string`):\n  The command to run.\n\n- `onOutput` (`function`):\n  Callback `(data: Data, isStderr: boolean) => boolean`\n  Called for each line of output. Return `false` to stop receiving output.\n\n- `options?`:\n\n  - `inShell?` (`boolean`):\n    Whether to run the command in a shell.\n\n#### Returns:\n\n- A `Promise` that resolves when the command completes.\n\n#### Example:\n\n```ts\nconst output = Data.fromIntArray([])\nawait ssh.executeCommandStream(\"ping -c 4 google.com\", (data, isStderr) => {\n  output.append(data)\n  return true\n})\nconsole.log(output.toDecodedString()())\n```\n\n***\n\n### `withPTY(options): Promise<TTYStdinWriter>`\n\nOpens a PTY (pseudo-terminal) session.\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `wantReply?` (`boolean`):\n    Whether to wait for a reply from the server. Defaults to `true`.\n\n  - `term?` (`string`):\n    Terminal type (default is `\"xterm\"`).\n\n  - `terminalCharacterWidth?` (`number`):\n    Terminal character width. Default is `80`.\n\n  - `terminalRowHeight?` (`number`):\n    Terminal row height. Default is `24`.\n\n  - `terminalPixelWidth?` (`number`):\n    Terminal pixel width. Default is `0`.\n\n  - `terminalPixelHeight?` (`number`):\n    Terminal pixel height. Default is `0`.\n\n  - `onOutput` (`function`):\n    Callback `(data: Data, isStderr: boolean) => boolean` for receiving terminal output.\n\n  - `onError?` (`function`):\n    Optional error callback `(error: string) => void`.\n\n#### Returns:\n\n- A `Promise` that resolves to a `TTYStdinWriter` instance.\n\n#### Example:\n\n```ts\nlet output: Data | undefined\nlet timerId: number | undefined\nconst writer = await ssh.withPTY({\n  onOutput: (data, isStderr) => {\n    if (output == null) {\n      output = data\n    } else {\n      output.append(data)\n    }\n    clearTimeout(timerId)\n    timerId = setTimeout(() => {\n      console.log(output.toDecodedString()())\n      output = undefined\n    }, 500)\n    return true\n  }\n})\nawait writer.write(\"top\\n\")\n```\n\n***\n\n### `withTTY(options): Promise<TTYStdinWriter>`\n\nOpens a TTY session with simplified options (without explicit dimensions).\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `onOutput` (`function`):\n    Callback `(data: Data, isStderr: boolean) => boolean` for receiving terminal output.\n\n  - `onError?` (`function`):\n    Optional error callback `(error: string) => void`.\n\n#### Returns:\n\n- A `Promise` that resolves to a `TTYStdinWriter`.\n\n***\n\n### `openSFTP(): Promise<SFTPClient>`\n\nOpens an SFTP session for file transfer operations.\n\n#### Returns:\n\n- A `Promise` that resolves to an `SFTPClient` instance.\n\n#### Example:\n\n```ts\nconst sftp = await ssh.openSFTP()\nawait sftp.writeFile(\"/tmp/test.txt\", \"Hello world\")\n```\n\n***\n\n### `jump(options): Promise<SSHClient>`\n\nPerforms an SSH jump (proxy) to another remote host from the current SSH session.\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `host` (`string`):\n    The destination host to jump to.\n\n  - `port?` (`number`):\n    Port to connect to (default is `22`).\n\n  - `authenticationMethod` (`SSHAuthenticationMethod`):\n    Authentication method for the next host.\n\n  - `trustedHostKeys?` (`string[]`):\n    Optional list of trusted host keys.\n\n#### Returns:\n\n- A `Promise` that resolves to a new `SSHClient` representing the jump connection.\n\n#### Example:\n\n```ts\nconst nextHop = await ssh.jump({\n  host: \"10.0.0.2\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"user2\", \"pass2\")\n})\n```\n\n***\n\n### `close(): Promise<void>`\n\nCloses the SSH connection and releases associated resources.\n\n> **Important:** You should call this method when the SSH client is no longer needed to avoid potential memory or socket leaks.\n\n#### Returns:\n\n- A `Promise` that resolves when the SSH connection is successfully closed.\n\n#### Example:\n\n```ts\nawait ssh.close()\n```\n\n***\n\n## Usage Example\n\n```ts\nconst ssh = await SSHClient.connect({\n  host: \"192.168.1.10\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"user\", \"password\")\n})\n\nconst output = await ssh.executeCommand(\"uptime\")\nconsole.log(\"Uptime:\", output)\n\nconst sftp = await ssh.openSFTP()\nawait sftp.writeFile(\"/tmp/hello.txt\", \"Hello SSH\")\n\nawait ssh.close()\n```\n","routePath":"/doc/Changelog/2.4.3/SSH Client","lang":"en","toc":[{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":511},{"id":"sshclientconnectoptions-promisesshclient","text":"`SSHClient.connect(options): Promise<SSHClient>`","depth":3,"charIndex":530},{"id":"parameters","text":"Parameters:","depth":4,"charIndex":634},{"id":"returns","text":"Returns:","depth":4,"charIndex":1242},{"id":"example","text":"Example:","depth":4,"charIndex":1341},{"id":"properties","text":"Properties","depth":2,"charIndex":1519},{"id":"ondisconnect---void--null","text":"`onDisconnect: (() => void) | null`","depth":3,"charIndex":1534},{"id":"example-1","text":"Example:","depth":4,"charIndex":1651},{"id":"instance-methods","text":"Instance Methods","depth":2,"charIndex":1758},{"id":"executecommandcommand-string-options-promisestring","text":"`executeCommand(command: string, options?): Promise<string>`","depth":3,"charIndex":1779},{"id":"parameters-1","text":"Parameters:","depth":4,"charIndex":1916},{"id":"returns-1","text":"Returns:","depth":4,"charIndex":2299},{"id":"example-2","text":"Example:","depth":4,"charIndex":2378},{"id":"executecommandstreamcommand-onoutput-options-promisevoid","text":"`executeCommandStream(command, onOutput, options?): Promise<void>`","depth":3,"charIndex":2461},{"id":"parameters-2","text":"Parameters:","depth":4,"charIndex":2590},{"id":"returns-2","text":"Returns:","depth":4,"charIndex":2901},{"id":"example-3","text":"Example:","depth":4,"charIndex":2973},{"id":"withptyoptions-promisettystdinwriter","text":"`withPTY(options): Promise<TTYStdinWriter>`","depth":3,"charIndex":3197},{"id":"parameters-3","text":"Parameters:","depth":4,"charIndex":3286},{"id":"returns-3","text":"Returns:","depth":4,"charIndex":4034},{"id":"example-4","text":"Example:","depth":4,"charIndex":4110},{"id":"withttyoptions-promisettystdinwriter","text":"`withTTY(options): Promise<TTYStdinWriter>`","depth":3,"charIndex":4555},{"id":"parameters-4","text":"Parameters:","depth":4,"charIndex":4680},{"id":"returns-4","text":"Returns:","depth":4,"charIndex":4927},{"id":"opensftp-promisesftpclient","text":"`openSFTP(): Promise<SFTPClient>`","depth":3,"charIndex":4999},{"id":"returns-5","text":"Returns:","depth":4,"charIndex":5091},{"id":"example-5","text":"Example:","depth":4,"charIndex":5164},{"id":"jumpoptions-promisesshclient","text":"`jump(options): Promise<SSHClient>`","depth":3,"charIndex":5282},{"id":"parameters-5","text":"Parameters:","depth":4,"charIndex":5406},{"id":"returns-6","text":"Returns:","depth":4,"charIndex":5757},{"id":"example-6","text":"Example:","depth":4,"charIndex":5856},{"id":"close-promisevoid","text":"`close(): Promise<void>`","depth":3,"charIndex":6023},{"id":"returns-7","text":"Returns:","depth":4,"charIndex":6244},{"id":"example-7","text":"Example:","depth":4,"charIndex":6336},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":6385}],"frontmatter":{},"version":"","description":"The SSHClient class provides an interface for connecting to a remote SSH server, executing commands, opening TTY or PTY sessions, transferring files via SFTP, and performing multi-hop SSH jumps. It supports both command-based and interactive terminal-based workflows. This class is central to establishing and managing SSH sessions in your script."},{"title":"ScrollViewReader","content":"The **ScrollViewReader** component equivalent to SwiftUI’s ScrollViewReader, allowing scripts to programmatically control scrolling position within scrollable content such as `List` or `ScrollView`.\n\n***\n\n# ScrollViewProxy\n\n`ScrollViewProxy` represents the programmatic interface for controlling scrolling. It is provided by `ScrollViewReader` during rendering.\n\n```ts\ninterface ScrollViewProxy {\n    scrollTo: (id: string | number, anchor?: KeywordPoint | Point) => void\n}\n```\n\n## Methods\n\n### scrollTo(id, anchor?)\n\nScrolls the closest scrollable container until the element with the specified `key` becomes visible.\n\n#### Parameters\n\n| Parameter | Type           | Required | Description |                                                                                                          |\n| --------- | -------------- | -------- | ----------- | -------------------------------------------------------------------------------------------------------- |\n| id        | `string`       | `number` | Yes         | The `key` of the target element. Must match the `key` assigned to a child inside the scrollable content. |\n| anchor    | `KeywordPoint` | `Point`  | No          | Controls how the target is aligned within the visible area. Optional.                                    |\n\n### KeywordPoint\n\nPredefined scroll alignment keywords:\n\n- `'top'`\n- `'center'`\n- `'bottom'`\n\n### Point\n\nPrecise alignment coordinates:\n\n```ts\ntype Point = {\n  x: number\n  y: number\n}\n```\n\n***\n\n# ScrollViewReader Component\n\n```ts\ntype ScrollViewReaderProps = {\n    children: (scrollViewProxy: ScrollViewProxy) => VirtualNode;\n};\ndeclare const ScrollViewReader: FunctionComponent<ScrollViewReaderProps>;\n```\n\n## Props\n\n| Name     | Type                                      | Required | Description                                                                  |\n| -------- | ----------------------------------------- | -------- | ---------------------------------------------------------------------------- |\n| children | `(proxy: ScrollViewProxy) => VirtualNode` | Yes      | A function that receives a `ScrollViewProxy` and returns scrollable content. |\n\n***\n\n# Behavior and Usage Notes\n\n1. ScrollViewReader must wrap a `List`, `ScrollView`, or another scrollable container.\n2. The `proxy` is created once during rendering. Use `useRef` if you need to store it.\n3. `scrollTo` works only with elements that have a **unique `key`**.\n4. Using `withAnimation` enables smooth scrolling.\n5. The API follows React’s identity model, but scroll behavior matches SwiftUI.\n\n***\n\n# Example Usage\n\n```tsx\nimport {\n  Button,\n  Navigation,\n  NavigationStack,\n  Script,\n  Text,\n  List,\n  ScrollViewReader,\n  ScrollView,\n  VStack,\n  useRef,\n  ScrollViewProxy,\n  withAnimation\n} from \"scripting\"\n\n\nfunction Item({ index }: { index: number }) {\n  return <Text>\n    Item - {index}\n  </Text>\n}\n\nfunction View() {\n  const dismiss = Navigation.useDismiss()\n  const proxyRef = useRef<ScrollViewProxy>()\n\n  return <NavigationStack>\n    <VStack navigationTitle=\"ScrollViewReader\">\n\n      <ScrollViewReader>\n        {(proxy) => {\n          // Store the proxy instance\n          proxyRef.current = proxy\n\n          return <List>\n            {new Array(100).fill(0).map((_, index) =>\n              <Item\n                key={index}\n                index={index}\n              />\n            )}\n            <Text key=\"bottom\">\n              Bottom\n            </Text>\n          </List>\n        }}\n      </ScrollViewReader>\n\n      <Button\n        title=\"Jump\"\n        action={() => {\n          if (proxyRef.current == null) {\n            console.log(\"no proxy found\")\n            return\n          }\n\n          const index = Math.random() * 100 | 0\n\n          withAnimation(() => {\n            proxyRef.current?.scrollTo(index)\n\n            // Scroll to the element identified by key=\"bottom\"\n            // proxyRef.current?.scrollTo(\"bottom\", \"bottom\")\n          })\n        }}\n      />\n\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <View />\n  })\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n# How `key` Works in Scripting\n\nScripting does not support `.id()` as in SwiftUI.\nInstead:\n\n```tsx\n<Text key=\"bottom\">Bottom</Text>\n```\n\n- `key` identifies the element within the virtual node tree\n- `scrollTo(\"bottom\")` will scroll to this element\n- `key` must be stable and unique, similar to React and SwiftUI’s `.id()`\n\n***\n\n# Animation Support\n\nScroll operations can be wrapped in `withAnimation` to enable smooth transitions:\n\n```tsx\nwithAnimation(() => {\n  proxy.scrollTo(\"targetKey\", \"center\")\n})\n```\n\nThe animation behavior follows SwiftUI’s animation engine.\n\n***\n\n# Important Notes\n\n1. Every scroll target must have a unique `key`.\n2. `scrollTo` will not work without a matching `key`.\n3. The scrollable content must be inside the same ScrollViewReader.\n4. The alignment anchor is optional but useful for precise positioning.\n5. The API mirrors SwiftUI’s ScrollViewReader logic but adopts React-style identity handling.\n","routePath":"/doc/Changelog/2.4.3/ScrollViewReader","lang":"en","toc":[{"id":"methods","text":"Methods","depth":2,"charIndex":479},{"id":"scrolltoid-anchor","text":"scrollTo(id, anchor?)","depth":3,"charIndex":491},{"id":"parameters","text":"Parameters","depth":4,"charIndex":620},{"id":"keywordpoint","text":"KeywordPoint","depth":3,"charIndex":1290},{"id":"point","text":"Point","depth":3,"charIndex":1384},{"id":"props","text":"Props","depth":2,"charIndex":1698}],"frontmatter":{},"version":"","description":"The ScrollViewReader component equivalent to SwiftUI’s ScrollViewReader, allowing scripts to programmatically control scrolling position within scrollable content such as List or ScrollView. ScrollViewProxy represents the programmatic interface for controlling scrolling. It is provided by ScrollViewReader during rendering."},{"title":"Set environment values (environments)","content":"The `environments` view modifier allows injecting specific environment values into the current view hierarchy.\nIt serves a role similar to SwiftUI’s `.environment()`, but with a more explicit and controlled design tailored for Scripting.\n\nCurrently, the modifier supports:\n\n- `editMode` — controls editing behavior in views such as `List`\n- `openURL` — customizes how links are handled when tapped\n\nThese environment values affect all descendants within the modified view subtree.\n\n***\n\n# Modifier Definition\n\n```ts\nenvironments?: {\n  editMode?: Observable<EditMode>;\n  openURL?: (url: string) => OpenURLActionResult;\n};\n```\n\n***\n\n# 1. editMode Environment\n\nThe `editMode` environment value controls the editing state of views that support editing behavior, such as `List` with row deletion or movement.\n\nIt must be provided as an `Observable<EditMode>` so views can reactively update when the editing state changes.\n\n## EditMode Type\n\n```ts\nclass EditMode {\n  readonly value: \"active\" | \"inactive\" | \"transient\" | \"unknown\";\n  readonly isEditing: boolean;\n\n  static active(): EditMode;\n  static inactive(): EditMode;\n  static transient(): EditMode;\n}\n```\n\n### Meaning of `value`\n\n| Value       | Description                   |\n| ----------- | ----------------------------- |\n| `active`    | Editing mode is enabled       |\n| `inactive`  | Editing mode is disabled      |\n| `transient` | Temporary transitional state  |\n| `unknown`   | Undefined or unexpected state |\n\n***\n\n## editMode Example\n\n```tsx\nconst editMode = useObservable(() => EditMode.active())\n\n<List\n  environments={{\n    editMode: editMode\n  }}\n>\n  <ForEach\n    editActions=\"all\"\n    data={items}\n    builder={item => <Text key={item.id}>{item}</Text>}\n  />\n</List>\n```\n\n***\n\n# 2. openURL Environment\n\nThe `openURL` environment value customizes how URLs are handled when interacted with inside the view tree.\nIt overrides the default behavior of components such as `<Link>`.\n\nThis is useful for:\n\n- Deciding whether URLs should open inside the app or externally\n- Filtering or validating URLs\n- Redirecting URLs to different handlers\n\n## Function Signature\n\n```ts\nopenURL?: (url: string) => OpenURLActionResult;\n```\n\n***\n\n# OpenURLActionResult\n\n```ts\nclass OpenURLActionResult {\n  type: string;\n\n  static handled(): OpenURLActionResult;\n  static discarded(): OpenURLActionResult;\n\n  static systemAction(options?: {\n    url?: string;\n    /**\n     * Whether the system should prefer opening the URL in-app.\n     * Requires iOS 26.0+.\n     */\n    prefersInApp: boolean;\n  }): OpenURLActionResult;\n}\n```\n\n### Result Behavior\n\n| Method           | Meaning                                                     |\n| ---------------- | ----------------------------------------------------------- |\n| `handled()`      | The URL is considered fully handled; default behavior stops |\n| `discarded()`    | The URL is ignored                                          |\n| `systemAction()` | Requests the system to open a (possibly modified) URL       |\n\n### iOS Requirement\n\n- `prefersInApp` **requires iOS 26.0+**\n- On earlier versions, the parameter may have no effect and system defaults will apply\n\n***\n\n# openURL Example\n\n```tsx\n<Group\n  environments={{\n    openURL: (url) => {\n      return OpenURLActionResult.systemAction({\n        url,\n        prefersInApp: false   // Requires iOS 26.0+\n      })\n    }\n  }}\n>\n  {urls.map(url =>\n    <Link url={url}>{url}</Link>\n  )}\n</Group>\n```\n\n***\n\n# Combined Example (editMode + openURL)\n\n```tsx\nconst editMode = useObservable(() => EditMode.inactive())\n\n<VStack\n  environments={{\n    editMode,\n    openURL: (url) => {\n      if (url.startsWith(\"https://safe.com\")) {\n        return OpenURLActionResult.systemAction({\n          url,\n          prefersInApp: true   // iOS 26.0+ only\n        })\n      }\n      return OpenURLActionResult.discarded()\n    }\n  }}\n>\n  <Button\n    title=\"Toggle Edit\"\n    action={() => {\n      editMode.value = editMode.value.isEditing\n        ? EditMode.inactive()\n        : EditMode.active()\n    }}\n  />\n\n  <List>\n    ...\n  </List>\n\n  <Link url=\"https://safe.com\">Safe Link</Link>\n  <Link url=\"https://blocked.com\">Blocked Link</Link>\n</VStack>\n```\n\n***\n\n# Notes & Behavior Summary\n\n1. The `environments` modifier applies only to the subtree where it is used.\n2. `editMode` must be an `Observable<EditMode>` for reactive updates.\n3. `openURL` replaces default URL-handling behavior for all descendant views.\n4. Returning `handled()` stops further URL processing.\n5. `systemAction()` delegates handling back to the system.\n6. **`prefersInApp` requires iOS 26.0+** and may be ignored on earlier versions.\n7. Scripting’s environment system is explicit—only the values you define are injected.\n","routePath":"/doc/Changelog/2.4.3/Set environment values (environments)","lang":"en","toc":[{"id":"editmode-type","text":"EditMode Type","depth":2,"charIndex":918},{"id":"meaning-of-value","text":"Meaning of `value`","depth":3,"charIndex":1157},{"id":"editmode-example","text":"editMode Example","depth":2,"charIndex":1475},{"id":"function-signature","text":"Function Signature","depth":2,"charIndex":2102},{"id":"result-behavior","text":"Result Behavior","depth":3,"charIndex":2568},{"id":"ios-requirement","text":"iOS Requirement","depth":3,"charIndex":3005}],"frontmatter":{},"version":"","description":"The environments view modifier allows injecting specific environment values into the current view hierarchy.\nIt serves a role similar to SwiftUI’s .environment(), but with a more explicit and controlled design tailored for Scripting. Currently, the modifier supports: editMode — controls editing behavior in views such as ListopenURL — customizes how links are handled when tapped These environment values affect all descendants within the modified view subtree. The editMode environment value controls the editing state of views that support editing behavior, such as List with row deletion or movement. It must be provided as an Observable<EditMode> so views can reactively update when the editing state changes."},{"title":"Thread","content":"Scripting’s UI rendering system and the vast majority of JavaScript execution run on the main thread by default. In normal usage, developers rarely need to manually switch threads.\n\nHowever, some system APIs or internal operations may occasionally execute on a background thread. To ensure UI updates are always safe, and to support running heavy work without blocking the main thread, Scripting provides the global `Thread` API.\n\n`Thread` is a global namespace and does not require imports.\n\n***\n\n## `Thread.isMainThread: boolean`\n\nIndicates whether the current JavaScript execution context is running on the main thread.\n\nMost of the time this value is `true`, but certain system callbacks or asynchronous operations may occur on background threads. When performing UI updates, this property can be used to confirm that the current thread is safe for UI operations.\n\n```ts\nif (Thread.isMainThread) {\n  console.log('On main thread')\n} else {\n  console.log('On background thread')\n}\n```\n\n***\n\n## `Thread.runInMain(execute: () => void): void`\n\nExecutes the given function on the main thread.\n\nBecause JavaScript normally runs on the main thread, you usually do not need to call this method explicitly. It is mainly useful when:\n\n- A system API callback happens on a background thread and you need to update the UI\n- You want to strictly ensure that a specific piece of logic runs on the main thread\n\nThis method does not return a value and does not switch back to the previous thread. It simply guarantees synchronous execution on the main thread.\n\n```ts\nThread.runInMain(() => {\n  title.value = 'Updated on main thread'\n})\n```\n\n***\n\n## `Thread.runInBackground<T>(execute: () => T | Promise<T>): Promise<T>`\n\nRuns the provided function on a background thread and returns its result as a Promise.\nOnce the background task completes, the result is delivered back on the thread that initiated the call (typically the main thread).\n\nThis is ideal for:\n\n- CPU-intensive tasks\n- Large data processing\n- Any work that should not block the UI\n\nThe function may return either a value or a Promise.\n\n```ts\nconst total = await Thread.runInBackground(() => {\n  let v = 0\n  for (let i = 0; i < 5_000_000; i++) v += i\n  return v\n})\n\nconsole.log('Computed result:', total)\n```\n\nAsync example:\n\n```ts\nconst filtered = await Thread.runInBackground(async () => {\n  const image = await loadImage()\n  return applyFilter(image)\n})\n\nThread.runInMain(() => {\n  setImage(filtered)\n})\n```\n\n***\n\n## Automatic Thread Switching in Asynchronous I/O\n\nMany **asynchronous I/O methods in Scripting already run on background threads automatically**, so developers do **not** need to manually call `runInBackground` for them.\n\nExample:\n\n```ts\nconst text = await FileManager.readAsString(path)\n```\n\n`readAsString` automatically performs file reading on a background thread, then returns the result back on the thread where the call was made (usually the main thread).\n\nThis means asynchronous I/O will **not** block the UI, even if you call them directly in your UI logic.\n\n### Only synchronous I/O runs on the main thread\n\nFor example:\n\n```ts\nconst text = FileManager.readAsStringSync(path)\n```\n\nSynchronous methods **always** execute on the main thread and do **not** switch threads internally.\n\nTherefore:\n\n- Avoid using synchronous I/O on large files\n- Prefer asynchronous versions (e.g., `readAsString`) for better performance\n- Use `runInBackground` only when you must perform blocking synchronous work or heavy computation\n\n***\n\n## Recommendations\n\n- JavaScript runs on the main thread by default; `runInMain` is rarely needed\n- Asynchronous I/O methods already run on background threads automatically\n- Use `runInBackground` for CPU-heavy or blocking synchronous tasks\n- If an API callback occurs on a background thread, use `runInMain` to safely update UI\n- Do not manipulate UI inside `runInBackground`; switch back first\n","routePath":"/doc/Changelog/2.4.3/Thread","lang":"en","toc":[{"id":"threadismainthread-boolean","text":"`Thread.isMainThread: boolean`","depth":2,"charIndex":498},{"id":"threadruninmainexecute---void-void","text":"`Thread.runInMain(execute: () => void): void`","depth":2,"charIndex":993},{"id":"threadruninbackgroundtexecute---t--promiset-promiset","text":"`Thread.runInBackground<T>(execute: () => T | Promise<T>): Promise<T>`","depth":2,"charIndex":1633},{"id":"automatic-thread-switching-in-asynchronous-io","text":"Automatic Thread Switching in Asynchronous I/O","depth":2,"charIndex":2469},{"id":"only-synchronous-io-runs-on-the-main-thread","text":"Only synchronous I/O runs on the main thread","depth":3,"charIndex":3038},{"id":"recommendations","text":"Recommendations","depth":2,"charIndex":3500}],"frontmatter":{},"version":"","description":"Scripting’s UI rendering system and the vast majority of JavaScript execution run on the main thread by default. In normal usage, developers rarely need to manually switch threads. However, some system APIs or internal operations may occasionally execute on a background thread. To ensure UI updates are always safe, and to support running heavy work without blocking the main thread, Scripting provides the global Thread API. Thread is a global namespace and does not require imports."},{"title":"useObservable","content":"Scripting provides a reactive state system formed by `Observable<T>` and the `useObservable<T>` hook.\nThis system drives UI updates, interacts with the animation engine, and aligns closely with SwiftUI’s binding model—enabling future APIs such as `List(selection:)`, `NavigationStack(path:)`, `TextField(text:)`, and more.\n\n***\n\n# 1. Observable\\<T>\n\n`Observable<T>` is a reactive container that holds a mutable value.\nWhenever the value changes, any UI components that read this value are automatically re-rendered.\n\n## 1.1 Class Definition\n\n```ts\nclass Observable<T> {\n  constructor(initialValue: T);\n  value: T;\n  setValue(value: T): void;\n  subscribe(callback: (value: T, oldValue: T) => void): void;\n  unsubscribe(callback: (value: T, oldValue: T) => void): void;\n  dispose(): void;\n}\n```\n\n***\n\n## 1.2 Property & Method Details\n\n### value\n\nThe current value stored inside the observable.\n\n### setValue(newValue)\n\nUpdates the value and triggers UI re-rendering.\n\n```ts\nobservable.setValue(newValue);\n```\n\n`T` may be **any type**: primitives, arrays, objects, or class instances.\n\n### subscribe / unsubscribe\n\nAllows external listeners to respond to value changes.\nMost components do not need to use these manually.\n\n### dispose\n\nReleases internal subscriptions.\nTypically only needed when manually managing observables outside the component system.\n\n***\n\n# 2. useObservable\\<T>\n\n`useObservable<T>` creates component-local reactive state and provides an `Observable<T>` instance whose value persists across re-renders.\n\n## 2.1 Function Signature\n\n```ts\ndeclare function useObservable<T>(): Observable<T | undefined>;\ndeclare function useObservable<T>(value: T): Observable<T>;\ndeclare function useObservable<T>(initializer: () => T): Observable<T>;\n```\n\n***\n\n## 2.2 Initialization Modes\n\n### 1. Without initial value\n\nValue defaults to `undefined`.\n\n```tsx\nconst data = useObservable<string>();\n```\n\n### 2. With initial value\n\n```tsx\nconst count = useObservable(0);\n```\n\n### 3. Lazy initialization\n\nThe initializer is executed only on the first render.\n\n```tsx\nconst user = useObservable(() => createDefaultUser());\n```\n\n***\n\n# 3. Using Observable in UI Components\n\nReading `.value` inside JSX automatically establishes dependency tracking.\n\n```tsx\n<Text>{name.value}</Text>\n```\n\nUpdating the state triggers re-render:\n\n```tsx\n<Button title=\"Change\" action={() => name.setValue(\"Updated\")} />\n```\n\nThis behavior is similar to React’s `useState`, but aligned with SwiftUI’s reactive identity-based rendering.\n\n***\n\n# 4. Integration with Animation\n\nObservable values participate directly in Scripting’s animation system.\n\nThere are two main animation mechanisms:\n\n***\n\n## 4.1 Explicit animations: withAnimation\n\n```tsx\nwithAnimation(() => {\n  size.setValue(size.value + 20);\n});\n```\n\nAny view that depends on `size.value` will animate its change.\n\n***\n\n## 4.2 Implicit animations: the animation modifier\n\nViews can animate whenever a specific dependency changes.\n\n### Correct syntax:\n\n```tsx\nanimation={{\n  animation: Animation.spring({ duration: 0.3 }),\n  value: size.value\n}}\n```\n\nThis mirrors SwiftUI’s `.animation(animation, value: value)` API.\n\nExample:\n\n```tsx\n<Rectangle\n  frame={{\n    width: size.value,\n    height: size.value,\n  }}\n  animation={{\n    animation: Animation.easeIn(0.25),\n    value: size.value,\n  }}\n/>\n```\n\n***\n\n# 5. Forward Compatibility with SwiftUI-Style Binding APIs\n\n`Observable` is the foundation for future SwiftUI-style binding APIs.\nUpcoming components will accept `Observable<T>` directly, matching SwiftUI’s `$binding` behavior.\n\n### 5.1 List(selection:)\n\n```tsx\nconst selection = useObservable<string | undefined>(undefined)\n\n<List selection={selection}>\n  ...\n</List>\n```\n\n***\n\n### 5.2 NavigationStack(path:)\n\n```tsx\nconst path = useObservable<string[]>([])\n\n<NavigationStack path={path}>\n  ...\n</NavigationStack>\n```\n\nThis allows fully type-safe and reactive navigation, mirroring SwiftUI’s native patterns.\n\n***\n\n# 6. ForEach: Recommended Data Binding Pattern\n\nScripting provides a SwiftUI-aligned ForEach API:\n\n```tsx\n<ForEach data={items} builder={(item, index) => <Text>{item.name}</Text>} />\n```\n\nWhere each item must satisfy:\n\n```ts\nT extends { id: string }\n```\n\n### Why this is the recommended pattern:\n\n- Enables insertion/removal animations\n- Avoids index-based rendering issues\n- Improves performance for large lists\n\nExample:\n\n```tsx\nconst items = useObservable([\n  { id: \"1\", name: \"Apple\" },\n  { id: \"2\", name: \"Banana\" }\n])\n\n<ForEach\n  data={items}\n  editActions=\"all\"\n  builder={(item) => <Text>{item.name}</Text>}\n/>\n```\n\n***\n\n# 7. Complete Example\n\n```tsx\nexport function Demo() {\n  const visible = useObservable(true);\n  const size = useObservable(100);\n\n  return (\n    <VStack spacing={20}>\n      {visible.value && (\n        <Rectangle\n          frame={{\n            width: size.value,\n            height: size.value,\n          }}\n          background=\"blue\"\n          animation={{\n            animation: Animation.spring({ duration: 0.4, bounce: 0.3 }),\n            value: size.value,\n          }}\n          transition={Transition.opacity()}\n        />\n      )}\n\n      <Button\n        title=\"Toggle Visible\"\n        action={() => {\n          withAnimation(() => {\n            visible.setValue(!visible.value);\n          });\n        }}\n      />\n\n      <Button\n        title=\"Resize\"\n        action={() => {\n          withAnimation(Animation.easeOut(0.25), () => {\n            size.setValue(size.value === 100 ? 160 : 100);\n          });\n        }}\n      />\n    </VStack>\n  );\n}\n```\n\n***\n\n# 8. Summary\n\n- `Observable<T>` is the core reactive state container in Scripting.\n- `useObservable` creates component-local observable state.\n- Any change to `.value` automatically re-renders dependent UI.\n- Observable integrates directly with animations (explicit and implicit).\n- It is the foundation for SwiftUI-style binding APIs such as `List(selection:)` and `NavigationStack(path:)`.\n- ForEach works best with `data: Observable<Array<T>>` for identity-based diffing and smooth animations.\n","routePath":"/doc/Changelog/2.4.3/useObservable","lang":"en","toc":[{"id":"11-class-definition","text":"1.1 Class Definition","depth":2,"charIndex":517},{"id":"12-property--method-details","text":"1.2 Property & Method Details","depth":2,"charIndex":799},{"id":"value","text":"value","depth":3,"charIndex":833},{"id":"setvaluenewvalue","text":"setValue(newValue)","depth":3,"charIndex":893},{"id":"subscribe--unsubscribe","text":"subscribe / unsubscribe","depth":3,"charIndex":1083},{"id":"dispose","text":"dispose","depth":3,"charIndex":1219},{"id":"21-function-signature","text":"2.1 Function Signature","depth":2,"charIndex":1522},{"id":"22-initialization-modes","text":"2.2 Initialization Modes","depth":2,"charIndex":1761},{"id":"1-without-initial-value","text":"1. Without initial value","depth":3,"charIndex":1790},{"id":"2-with-initial-value","text":"2. With initial value","depth":3,"charIndex":1902},{"id":"3-lazy-initialization","text":"3. Lazy initialization","depth":3,"charIndex":1973},{"id":"41-explicit-animations-withanimation","text":"4.1 Explicit animations: withAnimation","depth":2,"charIndex":2669},{"id":"42-implicit-animations-the-animation-modifier","text":"4.2 Implicit animations: the animation modifier","depth":2,"charIndex":2853},{"id":"correct-syntax","text":"Correct syntax:","depth":3,"charIndex":2964},{"id":"51-listselection","text":"5.1 List(selection:)","depth":3,"charIndex":3565},{"id":"52-navigationstackpath","text":"5.2 NavigationStack(path:)","depth":3,"charIndex":3715},{"id":"why-this-is-the-recommended-pattern","text":"Why this is the recommended pattern:","depth":3,"charIndex":4207}],"frontmatter":{},"version":"","description":"Scripting provides a reactive state system formed by Observable<T> and the useObservable<T> hook.\nThis system drives UI updates, interacts with the animation engine, and aligns closely with SwiftUI’s binding model—enabling future APIs such as List(selection:), NavigationStack(path:), TextField(text:), and more. Observable<T> is a reactive container that holds a mutable value.\nWhenever the value changes, any UI components that read this value are automatically re-rendered."},{"title":"ConcentricRectangle","content":"`ConcentricRectangle` is a **concentric rectangle shape view** introduced in iOS 26+. It is designed to create rectangles with **progressively inset (concentric) corner geometry**, which adapts naturally to modern UI designs.\n\nIt is especially suitable for:\n\n- Glass-style buttons\n- Card backgrounds\n- Interactive clipping regions\n- Glass transition masks\n- Layered container UI\n\nIn Scripting, `ConcentricRectangle` can be used both as:\n\n- A **standalone Shape view**\n- A **specialized shape inside**:\n\n  - `clipShape`\n  - `background`\n  - `contentShape`\n\n***\n\n## 1. ConcentricRectangle Core Definition\n\n```ts\ntype ConcentricRectangleProps = ShapeProps & ConcentricRectangleShape\n\n/**\n * A concentric rectangle aligned inside the frame of the view containing it.\n * @available iOS 26+.\n */\ndeclare const ConcentricRectangle: FunctionComponent<ConcentricRectangleProps>\n```\n\n### Description\n\n- `ConcentricRectangle` is a standard **Shape component**\n- Supports:\n\n  - Fill\n  - Stroke\n  - Trimmed paths\n  - Advanced corner distribution via `ConcentricRectangleShape`\n- Always renders **inside the parent view’s frame**\n- Available on **iOS 26 and later only**\n\n***\n\n## 2. Corner Style System: EdgeCornerStyle\n\nThe core visual behavior of `ConcentricRectangle` is controlled through `EdgeCornerStyle`, which defines how each corner behaves.\n\n```ts\ntype EdgeCornerStyle =\n  | {\n      style: \"fixed\"\n      radius: number\n    }\n  | {\n      style: \"concentric\"\n      minimum: number\n    }\n  | \"concentric\"\n```\n\n***\n\n### 2.1 Fixed Corner Style\n\n```ts\n{\n  style: \"fixed\"\n  radius: number\n}\n```\n\nUsed to create traditional fixed-radius rounded corners.\n\n| Property | Description                   |\n| -------- | ----------------------------- |\n| `radius` | Fixed corner radius in points |\n\nThis mode is appropriate for classic static cards and buttons.\n\n***\n\n### 2.2 Concentric Corner Style\n\n```ts\n{\n  style: \"concentric\"\n  minimum: number\n}\n```\n\nCreates a dynamically inset **concentric corner effect**.\n\n| Property  | Description                                                                |\n| --------- | -------------------------------------------------------------------------- |\n| `minimum` | The minimum inner corner radius used as the base for automatic progression |\n\nRecommended for:\n\n- Glass-style controls\n- Dynamic cards\n- Layered UI surfaces\n- Animated masking effects\n\n***\n\n### 2.3 Shorthand Mode\n\n```ts\n\"concentric\"\n```\n\nEquivalent to:\n\n```ts\n{\n  style: \"concentric\"\n  minimum: systemDefault\n}\n```\n\n***\n\n## 3. ConcentricRectangleShape (Corner Distribution Rules)\n\n`ConcentricRectangleShape` defines **how corner styles are distributed** across all four corners.\nIt supports **seven structural configuration patterns**.\n\n***\n\n### 3.1 Uniform Corners (Most Common)\n\n```ts\n{\n  corners: EdgeCornerStyle\n  isUniform?: boolean\n}\n```\n\n| Property    | Description                                  |\n| ----------- | -------------------------------------------- |\n| `corners`   | Corner style applied to all four corners     |\n| `isUniform` | Forces strict uniformity, default is `false` |\n\nExample:\n\n```tsx\n<ConcentricRectangle\n  corners={{\n    style: \"concentric\",\n    minimum: 8\n  }}\n  fill=\"red\"\n/>\n```\n\n***\n\n### 3.2 Fully Independent Corners\n\n```ts\n{\n  topLeadingCorner?: EdgeCornerStyle\n  topTrailingCorner?: EdgeCornerStyle\n  bottomLeadingCorner?: EdgeCornerStyle\n  bottomTrailingCorner?: EdgeCornerStyle\n}\n```\n\nUsed for:\n\n- Asymmetric cards\n- Special edge treatments\n- Adaptive container layouts\n\n***\n\n### 3.3 Uniform Bottom Corners\n\n```ts\n{\n  uniformBottomCorners?: EdgeCornerStyle\n  topLeadingCorner?: EdgeCornerStyle\n  topTrailingCorner?: EdgeCornerStyle\n}\n```\n\nTypical for bottom sheets and lifted panels.\n\n***\n\n### 3.4 Uniform Top Corners\n\n```ts\n{\n  uniformTopCorners?: EdgeCornerStyle\n  bottomLeadingCorner?: EdgeCornerStyle\n  bottomTrailingCorner?: EdgeCornerStyle\n}\n```\n\nTypical for modal headers and floating top panels.\n\n***\n\n### 3.5 Uniform Top and Bottom\n\n```ts\n{\n  uniformTopCorners?: EdgeCornerStyle\n  uniformBottomCorners?: EdgeCornerStyle\n}\n```\n\n***\n\n### 3.6 Uniform Leading Corners\n\n```ts\n{\n  uniformLeadingCorners?: EdgeCornerStyle\n  topTrailingCorner?: EdgeCornerStyle\n  bottomTrailingCorner?: EdgeCornerStyle\n}\n```\n\n***\n\n### 3.7 Uniform Leading and Trailing\n\n```ts\n{\n  uniformLeadingCorners?: EdgeCornerStyle\n  uniformTrailingCorners?: EdgeCornerStyle\n}\n```\n\n***\n\n## 4. Shared Shape Properties (ShapeProps)\n\n```ts\ntype ShapeProps = {\n  trim?: {\n    from: number\n    to: number\n  }\n\n  fill?: ShapeStyle | DynamicShapeStyle\n\n  stroke?: ShapeStyle | DynamicShapeStyle | {\n    shapeStyle: ShapeStyle | DynamicShapeStyle\n    strokeStyle: StrokeStyle\n  }\n}\n```\n\n***\n\n### 4.1 trim (Path Trimming)\n\n```ts\ntrim={{\n  from: 0.0,\n  to: 0.5\n}}\n```\n\nUsed for:\n\n- Progressive path animations\n- Partial rendering effects\n- Stroke-only transitions\n\n***\n\n### 4.2 fill (Shape Fill)\n\n```ts\nfill=\"red\"\nfill=\"ultraThinMaterial\"\n```\n\nSupports:\n\n- Solid colors\n- System materials\n- Gradient styles\n\n***\n\n### 4.3 stroke (Outline Rendering)\n\n```ts\nstroke=\"blue\"\n\nstroke={{\n  shapeStyle: \"blue\",\n  strokeStyle: {\n    lineWidth: 2\n  }\n}}\n```\n\n***\n\n## 5. Using ConcentricRectangle in View Modifiers\n\n### 5.1 As clipShape\n\n```ts\nclipShape?: Shape | \"concentricRect\" | ({\n  type: \"concentricRect\"\n} & ConcentricRectangleShape)\n```\n\nExample:\n\n```tsx\n<VStack\n  clipShape={{\n    type: \"concentricRect\",\n    corners: {\n      style: \"concentric\",\n      minimum: 10\n    }\n  }}\n/>\n```\n\nUsed for:\n\n- Actual visual clipping\n- Glass transition masking\n- Blur boundary control\n\n***\n\n### 5.2 As background\n\n```ts\nbackground?: ShapeStyle | DynamicShapeStyle | {\n  style: ShapeStyle | DynamicShapeStyle\n  shape: Shape | \"concentricRect\" | ({\n    type: \"concentricRect\"\n  } & ConcentricRectangleShape)\n} | VirtualNode | {\n  content: VirtualNode\n  alignment: Alignment\n}\n```\n\nExample:\n\n```tsx\n<VStack\n  background={{\n    style: \"ultraThinMaterial\",\n    shape: {\n      type: \"concentricRect\",\n      corners: \"concentric\"\n    }\n  }}\n/>\n```\n\n***\n\n### 5.3 As contentShape (Hit Testing Area)\n\n```ts\ncontentShape?: Shape | {\n  kind: ContentShapeKinds\n  shape: Shape | \"concentricRect\" | ({\n    type: \"concentricRect\"\n  } & ConcentricRectangleShape)\n}\n```\n\nDefines the interactive region for:\n\n- Taps\n- Gestures\n- Hover detection\n- Drag operations\n\n***\n\n## 6. Full Example Breakdown\n\n```tsx\n<ZStack\n  frame={{\n    width: 300,\n    height: 200\n  }}\n  containerShape={{\n    type: \"rect\",\n    cornerRadius: 32\n  }}\n>\n  <ConcentricRectangle\n    corners={{\n      style: \"concentric\",\n      minimum: 8\n    }}\n    fill=\"red\"\n  />\n</ZStack>\n```\n\nThis configuration produces:\n\n- A fixed-radius outer container\n- A concentric inner rectangle\n- A layered depth effect between the two shapes\n- A visually emphasized inner hierarchy via red fill\n\n***\n\n## 7. Design and Implementation Notes\n\n1. `minimum` should never exceed half of the smallest side of the container.\n2. Concentric corner styles work best when combined with:\n\n   - Glass material\n   - Blur\n   - Opacity layering\n3. When used as `contentShape`, it only affects hit-testing, not rendering.\n4. When used as `clipShape`, it physically clips the rendered content.\n5. Nested `ConcentricRectangle` layers create stronger depth cues than uniform rounded rectangles.\n","routePath":"/doc/Changelog/2.4.4/ConcentricRectangle","lang":"en","toc":[{"id":"1-concentricrectangle-core-definition","text":"1. ConcentricRectangle Core Definition","depth":2,"charIndex":561},{"id":"description","text":"Description","depth":3,"charIndex":874},{"id":"2-corner-style-system-edgecornerstyle","text":"2. Corner Style System: EdgeCornerStyle","depth":2,"charIndex":1163},{"id":"21-fixed-corner-style","text":"2.1 Fixed Corner Style","depth":3,"charIndex":1508},{"id":"22-concentric-corner-style","text":"2.2 Concentric Corner Style","depth":3,"charIndex":1848},{"id":"23-shorthand-mode","text":"2.3 Shorthand Mode","depth":3,"charIndex":2381},{"id":"3-concentricrectangleshape-corner-distribution-rules","text":"3. ConcentricRectangleShape (Corner Distribution Rules)","depth":2,"charIndex":2512},{"id":"31-uniform-corners-most-common","text":"3.1 Uniform Corners (Most Common)","depth":3,"charIndex":2733},{"id":"32-fully-independent-corners","text":"3.2 Fully Independent Corners","depth":3,"charIndex":3211},{"id":"33-uniform-bottom-corners","text":"3.3 Uniform Bottom Corners","depth":3,"charIndex":3508},{"id":"34-uniform-top-corners","text":"3.4 Uniform Top Corners","depth":3,"charIndex":3722},{"id":"35-uniform-top-and-bottom","text":"3.5 Uniform Top and Bottom","depth":3,"charIndex":3942},{"id":"36-uniform-leading-corners","text":"3.6 Uniform Leading Corners","depth":3,"charIndex":4073},{"id":"37-uniform-leading-and-trailing","text":"3.7 Uniform Leading and Trailing","depth":3,"charIndex":4247},{"id":"4-shared-shape-properties-shapeprops","text":"4. Shared Shape Properties (ShapeProps)","depth":2,"charIndex":4390},{"id":"41-trim-path-trimming","text":"4.1 trim (Path Trimming)","depth":3,"charIndex":4687},{"id":"42-fill-shape-fill","text":"4.2 fill (Shape Fill)","depth":3,"charIndex":4863},{"id":"43-stroke-outline-rendering","text":"4.3 stroke (Outline Rendering)","depth":3,"charIndex":5006},{"id":"5-using-concentricrectangle-in-view-modifiers","text":"5. Using ConcentricRectangle in View Modifiers","depth":2,"charIndex":5146},{"id":"51-as-clipshape","text":"5.1 As clipShape","depth":3,"charIndex":5197},{"id":"52-as-background","text":"5.2 As background","depth":3,"charIndex":5567},{"id":"53-as-contentshape-hit-testing-area","text":"5.3 As contentShape (Hit Testing Area)","depth":3,"charIndex":6023},{"id":"6-full-example-breakdown","text":"6. Full Example Breakdown","depth":2,"charIndex":6326},{"id":"7-design-and-implementation-notes","text":"7. Design and Implementation Notes","depth":2,"charIndex":6810}],"frontmatter":{},"version":"","description":"ConcentricRectangle is a concentric rectangle shape view introduced in iOS 26+. It is designed to create rectangles with progressively inset (concentric) corner geometry, which adapts naturally to modern UI designs. It is especially suitable for: Glass-style buttonsCard backgroundsInteractive clipping regionsGlass transition masksLayered container UI In Scripting, ConcentricRectangle can be used both as: A standalone Shape viewA specialized shape inside:clipShapebackgroundcontentShape"},{"title":"Glass Effect Transition","content":"This document provides a comprehensive explanation of **Glass Effect Transitions** in Scripting, including how Liquid Glass materials animate during view changes, how geometry matching works, and how to correctly use `NamespaceReader` to access SwiftUI’s `@Namespace` within TSX code.\n\nContents include:\n\n- Overview of Liquid Glass transitions\n- The three transition types\n- Relationship among `glassEffectTransition`, `glassEffectID`, and `namespace`\n- Role of `glassEffectUnion`\n- Purpose and behavior of `GlassEffectContainer`\n- Design and usage of `NamespaceReader`\n- Detailed walkthrough of the provided example\n- Best practice recommendations\n\n***\n\n# 1. Overview: What Is a Glass Effect Transition?\n\nA **Glass Effect Transition** defines how a Liquid Glass material animates when:\n\n- A view is inserted or removed\n- Layout changes\n- Views switch between two states\n\n```ts\ntype GlassEffectTransition = 'identity' | 'materialize' | 'matchedGeometry'\n```\n\nThese transitions affect **only the Liquid Glass material**—not the rest of the view’s opacity or scale.\n\nA transition controls:\n\n1. How the glass material appears or disappears\n2. Whether the shape of the glass participates in animation\n3. Whether the glass attempts to match geometry with other shapes\n\n***\n\n# 2. Transition Types\n\n## 2.1 identity\n\n```tsx\nglassEffectTransition=\"identity\"\n```\n\nBehavior:\n\n- No animation or geometry change.\n- The glass effect appears immediately with no fade or shape transformation.\n\nUse cases:\n\n- Disabling animations\n- Static UI\n- Debugging transitions\n\n***\n\n## 2.2 materialize\n\n```tsx\nglassEffectTransition=\"materialize\"\n```\n\nBehavior:\n\n- The material fades in or out smoothly.\n- No attempt is made to match geometry with any other glass shape.\n- Content transitions in a simple, clean way.\n\nUse cases:\n\n- Basic menu transitions\n- Buttons appearing or disappearing\n- When geometric continuity is not needed\n\n***\n\n## 2.3 matchedGeometry (most powerful)\n\n```tsx\nglassEffectTransition=\"matchedGeometry\"\n```\n\nBehavior:\n\n- The Liquid Glass shape morphs between views that share the same ID and namespace.\n- Creates smooth, fluid transitions between corresponding glass shapes.\n- Requires `glassEffectID` and `namespace`.\n\nUse cases:\n\n- Menu switching (e.g., Edit → Home)\n- Toolbar reconfiguration\n- Any UI element where continuity matters\n\n***\n\n# 3. glassEffectID and namespace\n\n**The core of geometric matching**\n\nLiquid Glass’ geometric-matching transitions require the ability to identify and relate specific glass shapes.\n\n***\n\n## 3.1 Why IDs Are Required\n\nTo animate a shape from state A → state B, the system must know:\n\n- which old shape matches which new shape\n\nThe identity is provided by:\n\n```tsx\nglassEffectID={{\n  id: 1,\n  namespace\n}}\n```\n\nViews with the same `id` in the same namespace are treated as the **same conceptual glass entity** across states.\n\n***\n\n## 3.2 Why a namespace Is Required\n\nSwiftUI’s matchedGeometry system requires an `@Namespace` to define the animation scope.\n\nSince TSX cannot define SwiftUI property wrappers, Scripting provides:\n\n```tsx\n<NamespaceReader>\n  {namespace => (…)}\n</NamespaceReader>\n```\n\nInside the closure:\n\n- `namespace` refers to a real SwiftUI `@Namespace`\n- All `glassEffectID` and `glassEffectUnion` inside this closure must use this namespace\n\nBenefits:\n\n- Provides correct scope for geometry transitions\n- Prevents accidental cross-scope animation\n- Ensures matchedGeometry and unions behave predictably\n\nWithout a namespace, geometric matching does not work.\n\n***\n\n# 4. glassEffectUnion: Unifying Glass Regions\n\n`glassEffectUnion` merges multiple views into a **single continuous glass material region**.\n\n```tsx\nglassEffectUnion={{\n  id: 1,\n  namespace\n}}\n```\n\nEffects:\n\n- Buttons appear to share a single underlying piece of glass\n- Material may shift or reflow cohesively\n- Enhances visual coherence in grouped UI elements\n\nTypically paired with matchedGeometry transitions.\n\n***\n\n# 5. GlassEffectContainer\n\nThe container provides:\n\n- A shared environment for geometry matching\n- A rendering boundary for unioned glass\n- Optimized rendering for clusters of Liquid Glass views\n\nExample:\n\n```tsx\n<GlassEffectContainer>\n  <HStack> ... </HStack>\n</GlassEffectContainer>\n```\n\nEvery view participating in glass transitions should be placed inside the same container.\n\n***\n\n# 6. NamespaceReader\n\n**Exposing SwiftUI’s `@Namespace` to TSX**\n\n## 6.1 Why NamespaceReader Exists\n\nSwiftUI defines matchedGeometry transitions using:\n\n```swift\n@Namespace private var namespace\n```\n\nBut TSX code cannot create Swift `@Namespace` values.\nTherefore Scripting provides:\n\n```tsx\n<NamespaceReader>\n  {namespace => (…)}\n</NamespaceReader>\n```\n\n### Purpose:\n\n- Internally creates and manages a real SwiftUI `@Namespace`\n- Makes the namespace accessible to JavaScript/TypeScript\n- Ensures all participating views share the same namespace\n- Enables matchedGeometry transitions to work in TSX\n\n## 6.2 How It Works\n\n- NamespaceReader creates a SwiftUI view containing `@Namespace`.\n- That namespace is passed to the TSX children via a function parameter.\n- All `glassEffectID` and `glassEffectUnion` must use this namespace.\n- All participating views inside the closure are guaranteed to match within the same namespace.\n\n***\n\n# 7. Example Analysis\n\nBelow is the provided example, demonstrating a dynamic menu switching between two states:\n\n- Menu A: Home / Settings\n- Menu B: Edit / Erase / Delete\n- Using animation for transitions\n- Using matchedGeometry via ID sharing\n- Using union IDs for continuous material appearance\n\n### Key excerpts:\n\n```tsx\nisAlternativeMenu.value\n  ? <>\n      <Button\n        title=\"Home\"\n        glassEffectID={{id:1, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n      <Button\n        title=\"Settings\"\n        glassEffectID={{id:2, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n    </>\n  : <>\n      <Button\n        title=\"Edit\"\n        glassEffectID={{id:1, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n      <Button\n        title=\"Erase\"\n        glassEffectID={{id:3, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n        glassEffectTransition=\"materialize\"\n      />\n      <Button\n        title=\"Delete\"\n        glassEffectID={{id:2, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n    </>\n```\n\n### 1. Shared union (id = 1)\n\nAll buttons belong to the same glass union.\nThis produces a smooth, unified underlying glass region.\n\n### 2. Shared glassEffectID for corresponding buttons\n\n- `Home` and `Edit` share `id = 1`\n- `Settings` and `Delete` share `id = 2`\n\n→ They animate between each other using `matchedGeometry`.\n\n### 3. “Erase” uses a different transition\n\n```tsx\nglassEffectTransition=\"materialize\"\n```\n\nThis button fades its material rather than matching geometry, making its appearance more distinct.\n\n### 4. Animation is triggered explicitly\n\n```tsx\nwithAnimation(() => {\n  isAlternativeMenu.setValue(\n    !isAlternativeMenu.value\n  )\n})\n```\n\nGlass transitions attach themselves to this animation transaction automatically.\n\n***\n\n# 8. Best Practices\n\n### 1. Use a single GlassEffectContainer\n\nAll participating glass views must share one container.\n\n### 2. Use one NamespaceReader per animated region\n\nDo not create multiple namespaces unless intentionally separating animation scopes.\n\n### 3. Use consistent glassEffectID between states\n\nBoth old and new states must contain the same ID to animate geometrically.\n\n### 4. Use glassEffectUnion for cohesive material appearance\n\nEspecially in toolbars and menus.\n\n### 5. Prefer matchedGeometry for sophisticated transitions\n\nUse materialize only for elements needing simple appearance behavior.\n\n***\n\n# 9. Summary\n\nGlass Effect Transitions enable highly expressive and fluid animations for Liquid Glass materials in iOS 26.\nIn Scripting:\n\n- `glassEffectTransition` defines how the material animates\n- `glassEffectID` and `namespace` enable geometric matching\n- `glassEffectUnion` creates unified material regions\n- `GlassEffectContainer` manages the animation environment\n- `NamespaceReader` exposes SwiftUI’s `@Namespace` to TSX, making advanced animations possible\n","routePath":"/doc/Changelog/2.4.4/Glass Effect Transition/","lang":"en","toc":[{"id":"21-identity","text":"2.1 identity","depth":2,"charIndex":1292},{"id":"22-materialize","text":"2.2 materialize","depth":2,"charIndex":1555},{"id":"23-matchedgeometry-most-powerful","text":"2.3 matchedGeometry (most powerful)","depth":2,"charIndex":1910},{"id":"31-why-ids-are-required","text":"3.1 Why IDs Are Required","depth":2,"charIndex":2524},{"id":"32-why-a-namespace-is-required","text":"3.2 Why a namespace Is Required","depth":2,"charIndex":2865},{"id":"61-why-namespacereader-exists","text":"6.1 Why NamespaceReader Exists","depth":2,"charIndex":4390},{"id":"purpose","text":"Purpose:","depth":3,"charIndex":4679},{"id":"62-how-it-works","text":"6.2 How It Works","depth":2,"charIndex":4925},{"id":"key-excerpts","text":"Key excerpts:","depth":3,"charIndex":5556},{"id":"1-shared-union-id--1","text":"1. Shared union (id = 1)","depth":3,"charIndex":-1},{"id":"2-shared-glasseffectid-for-corresponding-buttons","text":"2. Shared glassEffectID for corresponding buttons","depth":3,"charIndex":6474},{"id":"3-erase-uses-a-different-transition","text":"3. “Erase” uses a different transition","depth":3,"charIndex":6666},{"id":"4-animation-is-triggered-explicitly","text":"4. Animation is triggered explicitly","depth":3,"charIndex":6858},{"id":"1-use-a-single-glasseffectcontainer","text":"1. Use a single GlassEffectContainer","depth":3,"charIndex":7108},{"id":"2-use-one-namespacereader-per-animated-region","text":"2. Use one NamespaceReader per animated region","depth":3,"charIndex":7207},{"id":"3-use-consistent-glasseffectid-between-states","text":"3. Use consistent glassEffectID between states","depth":3,"charIndex":7344},{"id":"4-use-glasseffectunion-for-cohesive-material-appearance","text":"4. Use glassEffectUnion for cohesive material appearance","depth":3,"charIndex":7472},{"id":"5-prefer-matchedgeometry-for-sophisticated-transitions","text":"5. Prefer matchedGeometry for sophisticated transitions","depth":3,"charIndex":7569}],"frontmatter":{},"version":"","description":"This document provides a comprehensive explanation of Glass Effect Transitions in Scripting, including how Liquid Glass materials animate during view changes, how geometry matching works, and how to correctly use NamespaceReader to access SwiftUI’s @Namespace within TSX code. Contents include: Overview of Liquid Glass transitionsThe three transition typesRelationship among glassEffectTransition, glassEffectID, and namespaceRole of glassEffectUnionPurpose and behavior of GlassEffectContainerDesign and usage of NamespaceReaderDetailed walkthrough of the provided exampleBest practice recommendations A Glass Effect Transition defines how a Liquid Glass material animates when: A view is inserted or removedLayout changesViews switch between two states These transitions affect only the Liquid Glass material—not the rest of the view’s opacity or scale. A transition controls: How the glass material appears or disappearsWhether the shape of the glass participates in animationWhether the glass attempts to match geometry with other shapes"},{"title":"Example","content":"```tsx\n\n\nfunction View() {\n\n  const isAlternativeMenu = useObservable(false)\n\n  return <NamespaceReader>{namespace => <VStack\n    spacing={50}\n    frame={{\n      maxWidth: 'infinity',\n      maxHeight: 'infinity'\n    }}\n    background=\"systemYellow\"\n  >\n    <GlassEffectContainer\n    >\n      <HStack\n        spacing={0}\n        font=\"largeTitle\"\n        imageScale=\"large\"\n        buttonStyle=\"glass\"\n        labelStyle=\"iconOnly\"\n      >\n        {\n          isAlternativeMenu.value\n            ? <>\n              <Button\n                title=\"Home\"\n                systemImage=\"house\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 1,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n              <Button\n                title=\"Settings\"\n                systemImage=\"gear\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 2,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n            </>\n\n            : <>\n              <Button\n                title=\"Edit\"\n                systemImage=\"pencil\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 1,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n              <Button\n                title=\"Erase\"\n                systemImage=\"eraser\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 3,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n                glassEffectTransition=\"materialize\"\n              />\n              <Button\n                title=\"Delete\"\n                systemImage=\"trash\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 2,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n            </>\n        }\n      </HStack>\n    </GlassEffectContainer>\n\n    <Button\n      title=\"Toggle\"\n      buttonStyle=\"bordered\"\n      action={() => {\n        withAnimation(() => {\n          isAlternativeMenu.setValue(\n            !isAlternativeMenu.value\n          )\n        })\n      }}\n    />\n  </VStack>\n  }</NamespaceReader>\n}\n\nasync function run() {\n  await Navigation.present(<View />)\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Changelog/2.4.4/Glass Effect Transition/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Intent.continueInForeground <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Intent.continueInForeground \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`Intent.continueInForeground` is an API that leverages the **iOS 26+ AppIntents framework** to request the system to bring the **Scripting app** to the foreground while a Shortcut is running.\n\nThis method is used when a script—invoked from Shortcuts—requires full UI interaction within the Scripting app (for example: presenting a form, editing content, picking files, showing a full screen navigation flow, etc.).\n\nWhen invoked:\n\n- The system displays a dialog asking the user to continue the workflow in the app.\n- If the user **confirms**, the system opens Scripting in the foreground and the script continues.\n- If the user **cancels**, the script terminates immediately.\n\nBecause this is a system-level capability of AppIntents:\n\n**This API requires iOS 26 or later.**\n\n***\n\n# API Definition\n\n```ts\nfunction continueInForeground(\n  dialog?: Dialog | null,\n  options?: {\n    alwaysConfirm?: boolean;\n  }\n): Promise<void>;\n```\n\n## Parameters\n\n### `dialog?: Dialog | null`\n\nAn optional message explaining why the workflow needs to continue in the foreground.\n\n`Dialog` supports four formats:\n\n```ts\ntype Dialog =\n  | string\n  | { full: string; supporting: string }\n  | { full: string; supporting: string; systemImageName: string }\n  | { full: string; systemImageName: string }\n```\n\nExamples:\n\n```ts\n\"Do you want to continue in the app?\"\n```\n\n```ts\n{\n  full: \"Continue in the Scripting app?\",\n  supporting: \"The next step requires full UI interaction.\",\n  systemImageName: \"app\"\n}\n```\n\nPassing `null` will suppress the dialog entirely (not recommended unless you fully understand the UX implications).\n\n***\n\n### `options?: { alwaysConfirm?: boolean }`\n\nControls whether the system should always ask for confirmation:\n\n- `alwaysConfirm: false` *(default)*\n  The system may decide whether confirmation is needed based on context.\n\n- `alwaysConfirm: true`\n  The system always presents the confirmation dialog.\n\n***\n\n# Execution Behavior\n\nWhen called inside `intent.tsx`:\n\n1. The Shortcut pauses execution.\n2. The system presents a confirmation dialog.\n3. If the user accepts:\n\n   - The Scripting app opens in the foreground.\n   - The script continues executing after the `await`.\n4. If the user cancels:\n\n   - The entire script is terminated immediately.\n\nThis mirrors the behavior of Apple’s AppIntents `continueInApp()` functionality for system apps.\n\n***\n\n# Common Use Cases\n\nUse `continueInForeground` when the next step **cannot** run in the background, including:\n\n- Presenting a full-screen UI (`Navigation.present`)\n- Editing content in a custom form or navigation stack\n- Selecting files or interacting with UI components\n- Scenarios requiring user input or multi-step flows\n- Showing UI unavailable to background extensions\n\nIt should **not** be used for simple data processing or non-interactive tasks.\n\n***\n\n# Full Code Example\n\nBelow is the full working example demonstrating how `continueInForeground` enables a Shortcut to transfer execution into the Scripting app and then return UI input back to Shortcuts.\n\n```tsx\n// intent.tsx\nimport {\n  Button,\n  Intent,\n  List,\n  Navigation,\n  NavigationStack,\n  Script,\n  Section,\n  TextField,\n  useState\n} from \"scripting\"\n\nfunction View() {\n  const dismiss = Navigation.useDismiss()\n  const [text, setText] = useState(\"\")\n\n  return <NavigationStack>\n\n    <List navigationTitle=\"Intent Demo\">\n\n      <TextField\n        title=\"Enter a text\"\n        value={text}\n        onChanged={setText}\n      />\n\n      <Section>\n        <Button\n          title=\"Return Text\"\n          action={() => {\n            dismiss(text)\n          }}\n          disabled={!/\\S+/.test(text)}\n        />\n      </Section>\n\n    </List>\n\n  </NavigationStack>\n}\n\nasync function runIntent() {\n\n  // Step 1: Ask the user to continue in the foreground app\n  await Intent.continueInForeground(\n    \"Do you want to open the app and continue?\"\n  )\n\n  // Step 2: Present UI inside the Scripting app\n  const text = await Navigation.present<string | null>(\n    <View />\n  )\n\n  // Step 3: Optionally go back to Shortcuts\n  Safari.openURL(\"shortcuts://\")\n\n  // Step 4: Return the result to Shortcuts\n  Script.exit(\n    Intent.text(\n      text ?? \"No text return\"\n    )\n  )\n}\n\nrunIntent()\n```\n\n***\n\n# Notes and Recommendations\n\n1. **Requires iOS 26+**\n   Do not call this API on older systems.\n\n2. **Use dialogs to explain why foreground interaction is required**\n   This improves user trust and Shortcuts clarity.\n\n3. **Always handle the cancellation case**\n   If the user cancels, your script stops. Avoid assuming foreground UI will always appear.\n\n4. **Foreground UI must be meaningful**\n   Only use this API when the upcoming step truly requires UI.\n\n5. **Can be combined with SnippetIntent (iOS 26+)**\n   For workflows that mix in-Shortcut Snippet UI with in-app full UI.\n\n***\n\n# Summary\n\n`Intent.continueInForeground` enables scripts invoked from Shortcuts to request foreground execution when UI interaction is required. It is:\n\n- Based on iOS 26 AppIntents capabilities\n- A system-confirmed context switch\n- Essential for workflows involving full UI interactions\n- Safely integrated via a structured `Dialog` system\n\nThis method allows Scripting to support advanced automation flows that seamlessly transition between Shortcuts and the full Scripting app UI.\n","routePath":"/doc/Changelog/2.4.4/Intent.continueInForeground","lang":"en","toc":[{"id":"parameters","text":"Parameters","depth":2,"charIndex":1102},{"id":"dialog-dialog--null","text":"`dialog?: Dialog | null`","depth":3,"charIndex":1117},{"id":"options--alwaysconfirm-boolean-","text":"`options?: { alwaysConfirm?: boolean }`","depth":3,"charIndex":1780}],"frontmatter":{},"version":"","description":"Intent.continueInForeground is an API that leverages the iOS 26+ AppIntents framework to request the system to bring the Scripting app to the foreground while a Shortcut is running. This method is used when a script—invoked from Shortcuts—requires full UI interaction within the Scripting app (for example: presenting a form, editing content, picking files, showing a full screen navigation flow, etc.). When invoked: The system displays a dialog asking the user to continue the workflow in the app.If the user confirms, the system opens Scripting in the foreground and the script continues.If the user cancels, the script terminates immediately. Because this is a system-level capability of AppIntents: This API requires iOS 26 or later."},{"title":"Intent.requestConfirmation <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Intent.requestConfirmation \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`Intent.requestConfirmation` pauses script execution and asks the user to confirm an action through a **system-managed confirmation UI**.\nThe confirmation interface consists of:\n\n- A **SnippetIntent UI** (provided by you)\n- Optional dialog text (system-generated or developer-defined)\n\nBehavior:\n\n- If the user **confirms**, the script continues (Promise resolves).\n- If the user **cancels**, the script terminates immediately.\n- The UI is fully managed by the system.\n- The presented UI is defined by the provided SnippetIntent’s `perform()` return.\n\n**This API is only available on iOS 26 or later.**\n\n***\n\n# API Definition\n\n```ts\nIntent.requestConfirmation(\n  actionName: ConfirmationActionName,\n  snippetIntent: AppIntent<any, VirtualNode, AppIntentProtocol.SnippetIntent>,\n  options?: {\n    dialog?: Dialog;\n    showDialogAsPrompt?: boolean;\n  }\n): Promise<void>\n```\n\n***\n\n# Parameter Details\n\n## actionName: ConfirmationActionName\n\nA semantic keyword describing the type of action being confirmed.\nApple uses this value to generate natural language around the confirmation UI.\n\nAccepted values include:\n\n```\n\"add\" | \"addData\" | \"book\" | \"buy\" | \"call\" | \"checkIn\" |\n\"continue\" | \"create\" | \"do\" | \"download\" | \"filter\" |\n\"find\" | \"get\" | \"go\" | \"log\" | \"open\" | \"order\" |\n\"pay\" | \"play\" | \"playSound\" | \"post\" | \"request\" |\n\"run\" | \"search\" | \"send\" | \"set\" | \"share\" |\n\"start\" | \"startNavigation\" | \"toggle\" | \"turnOff\" |\n\"turnOn\" | \"view\"\n```\n\nExamples:\n\n- `\"set\"` → “Do you want to set…?”\n- `\"buy\"` → “Do you want to buy…?”\n- `\"toggle\"` → “Do you want to toggle…?”\n\nChoosing the correct semantic verb improves the clarity of the user-facing dialog.\n\n***\n\n## snippetIntent: SnippetIntent\n\nThis must be an AppIntent registered with:\n\n```ts\nprotocol: AppIntentProtocol.SnippetIntent;\n```\n\nThe UI displayed in the confirmation step **comes from this SnippetIntent’s `perform()` return**, which must be a TSX-based `VirtualNode`.\n\nThis is what the user sees and interacts with during confirmation.\n\n***\n\n## `options?: { dialog?: Dialog; showDialogAsPrompt?: boolean }`\n\n### dialog?: Dialog\n\nOptional text describing the confirmation request.\nSupports four formats:\n\n```ts\ntype Dialog =\n  | string\n  | { full: string; supporting: string }\n  | { full: string; supporting: string; systemImageName: string }\n  | { full: string; systemImageName: string };\n```\n\nExamples:\n\n```ts\n\"Are you sure you want to continue?\";\n```\n\nMore structured version:\n\n```ts\n{\n  full: \"Set this color?\",\n  supporting: \"This will update the theme color used across the app.\",\n  systemImageName: \"paintpalette\"\n}\n```\n\nUse this to clearly explain what the user is confirming.\n\n***\n\n### showDialogAsPrompt?: boolean\n\n- Default: `true`\n  The system shows the dialog as a modal prompt.\n\n- `false`\n  The dialog may be integrated directly inside the Snippet card instead of a separate prompt.\n\n***\n\n# Execution Flow\n\nWhen the script executes:\n\n```ts\nawait Intent.requestConfirmation(...)\n```\n\nThe following occurs:\n\n1. Script execution is paused.\n\n2. The system displays:\n\n   - The SnippetIntent UI\n   - Optional dialog text\n\n3. The user chooses:\n\n   - **Confirm** → Promise resolves → script continues\n   - **Cancel** → script stops immediately\n\n4. The system handles UI presentation and dismissal automatically.\n\nThere is no need to manually manage the UI lifecycle.\n\n***\n\n# Usage Scenarios\n\nRecommended for:\n\n- Confirming important changes (colors, appearance, configurations)\n- Confirming destructive or irreversible actions\n- Steps requiring explicit user approval\n- Initiating subflows requiring UI preview or choice (e.g., color picker, item selector)\n- Sensitive operations (e.g., updating settings, performing actions with side effects)\n\nNot recommended for:\n\n- Actions that do not require user approval\n- Simple background data processing\n\n***\n\n# Complete Example\n\nBelow is a full working example demonstrating how to request user confirmation using a SnippetIntent.\n\nIt assumes you have two SnippetIntent AppIntents:\n\n- `PickColorIntent` — allows user to select a color\n- `ShowResultIntent` — displays the final result\n\n## intent.tsx\n\n```tsx\n\n\n\nasync function runIntent() {\n  // Step 1: Ask the user to confirm the action via a Snippet UI\n  await Intent.requestConfirmation(\"set\", PickColorIntent(), {\n    dialog: {\n      full: \"Are you sure you want to set this color?\",\n      supporting: \"This will update the theme color used by your app.\",\n      systemImageName: \"paintpalette\",\n    },\n  });\n\n  // Step 2: Read input from Shortcuts\n  const text =\n    Intent.shortcutParameter?.type === \"text\"\n      ? Intent.shortcutParameter.value\n      : \"No text parameter from Shortcuts\";\n\n  // Step 3: Return another SnippetIntent result\n  const snippet = Intent.snippetIntent({\n    snippetIntent: ShowResultIntent({ content: text }),\n  });\n\n  Script.exit(snippet);\n}\n\nrunIntent();\n```\n\n***\n\n# Notes & Best Practices\n\n- **Requires iOS 26+** — do not call this API on earlier versions.\n- Always include a clear **dialog** message to improve user understanding.\n- Use for actions that require explicit approval or confirmation.\n- When possible, combine with SnippetIntent to provide a richer preview UI.\n- Scripts terminate automatically when the user cancels; do not rely on cleanup code afterward.\n- Avoid calling it unnecessarily; only use when confirmation is truly meaningful.\n","routePath":"/doc/Changelog/2.4.4/Intent.requestConfirmation","lang":"en","toc":[{"id":"actionname-confirmationactionname","text":"actionName: ConfirmationActionName","depth":2,"charIndex":1069},{"id":"snippetintent-snippetintent","text":"snippetIntent: SnippetIntent","depth":2,"charIndex":1834},{"id":"options--dialog-dialog-showdialogasprompt-boolean-","text":"`options?: { dialog?: Dialog; showDialogAsPrompt?: boolean }`","depth":2,"charIndex":2178},{"id":"dialog-dialog","text":"dialog?: Dialog","depth":3,"charIndex":2244},{"id":"showdialogasprompt-boolean","text":"showDialogAsPrompt?: boolean","depth":3,"charIndex":2826},{"id":"intenttsx","text":"intent.tsx","depth":2,"charIndex":4270}],"frontmatter":{},"version":"","description":"Intent.requestConfirmation pauses script execution and asks the user to confirm an action through a system-managed confirmation UI.\nThe confirmation interface consists of: A SnippetIntent UI (provided by you)Optional dialog text (system-generated or developer-defined) Behavior: If the user confirms, the script continues (Promise resolves).If the user cancels, the script terminates immediately.The UI is fully managed by the system.The presented UI is defined by the provided SnippetIntent’s perform() return. This API is only available on iOS 26 or later."},{"title":"IntentMemoryStorage","content":"IntentMemoryStorage is an in-memory storage mechanism used inside AppIntent execution environments.\nIt allows multiple AppIntents—such as multi-step workflows involving SnippetIntents—to share temporary data.\n\nHowever, **its lifecycle does not follow the lifecycle of AppIntent execution or Script.exit()**.\nIt is controlled by the **system’s management of the Extension process**, which is unpredictable.\n\nThis document describes its real behavior, its storage scopes, how the system manages JSContexts in Shortcuts, Widgets, and Live Activities, and how developers should use it safely.\n\n***\n\n# Overview\n\nEach AppIntent in Scripting runs inside its own **Script Execution Context** (JSContext).\nWhen:\n\n- The AppIntent’s `perform()` finishes, or\n- `Script.exit()` is called\n\nthe *execution* ends.\n\nBut this does **not** mean that IntentMemoryStorage (or the JSContext) is destroyed.\n\nInstead:\n\n**IntentMemoryStorage persists as long as the system keeps the Extension process alive**\n\nIt will only be cleared when:\n\n- The Extension process is terminated by the system\n- The system decides to reclaim memory\n- The environment hosting the Intent Extension or Widget Extension is destroyed\n\nTherefore:\n\n- **Running the same Shortcut again may read leftover values from the previous run.**\n- **Widget or Live Activity AppIntent calls may reuse the same JSContext, preserving MemoryStorage.**\n- **MemoryStorage can disappear at any time if the system kills the Extension process.**\n\nThis behavior is normal and inherent to the AppExtension lifecycle.\n\nIntentMemoryStorage is:\n\n**A short-lived, extension-scoped, non-persistent memory store**\n\n***\n\n# Storage Scopes\n\nIntentMemoryStorage provides two scopes.\n\n## 1. Script-scoped (default)\n\nWhen `shared: true` is *not* provided:\n\n- Storage belongs to a single script project\n- Only AppIntents from the same script can access it\n- System may keep it alive across executions\n- It is cleared when the system finally terminates the Extension process\n\nUseful for multi-step flows inside a single script.\n\n***\n\n## 2. Shared storage\n\nWhen `{ shared: true }` is specified:\n\n- All scripts can access the same shared memory space\n- Useful for cross-script workflow coordination\n- Still relies on the same Extension process lifecycle\n- Data disappears when the Extension is killed\n\nBoth scopes are **temporary** and tied to the system’s handling of the Extension environment.\n\n***\n\n# System Lifecycle and JSContext Behavior\n\nIntentMemoryStorage’s behavior is entirely dependent on how the OS manages the AppIntent/Widget Extension process.\n\nBelow is a complete explanation of observed behaviors.\n\n***\n\n## Case 1: Shortcuts running an Intent\n\nWhen a Shortcut executes an Intent:\n\n- The AppIntent finishes\n- The Script.exit() returns a result\n- The JSContext used for execution is destroyed\n\nBut:\n\n### IntentMemoryStorage does *not* necessarily clear.\n\nIf the system keeps the Intent Extension process alive, the stored data remains in memory.\n\nTherefore:\n\n**Running the same Shortcut again may still read values saved previously.**\n\nThis is expected behavior.\n\n***\n\n## Case 2: Widgets calling AppIntents\n\nWidget Extensions behave differently:\n\n- The system prefers **reusing the same JSContext**\n- Therefore, IntentMemoryStorage may persist across multiple AppIntent calls\n- But the system may kill the Widget Extension at any time\n- When this happens, both the JSContext and MemoryStorage are cleared\n\nHence:\n\n**MemoryStorage may survive across widget updates, or it may vanish unpredictably.**\n\n***\n\n## Case 3: Live Activity calling AppIntents\n\nLive Activity environments also reuse JSContexts:\n\n- Multiple AppIntent calls often share the same JSContext\n- MemoryStorage persists as long as the Extension stays alive\n- The system may terminate the Live Activity extension at any time\n- MemoryStorage then disappears immediately\n\n***\n\n## Final Lifecycle Summary\n\n| Event                              | Does MemoryStorage clear immediately? |\n| ---------------------------------- | ------------------------------------- |\n| AppIntent finish                   | No                                    |\n| Script.exit()                      | No                                    |\n| Shortcut flow finishes             | Not necessarily                       |\n| Widget AppIntent call              | Not necessarily                       |\n| Live Activity AppIntent call       | Not necessarily                       |\n| System kills the Extension process | Yes (completely cleared)              |\n\nTherefore:\n\n**MemoryStorage should never be treated as reliable or persistent.**\n\n**It may remain, or it may disappear at any time.**\n\n***\n\n# API Definition\n\n```ts\nnamespace IntentMemoryStorage {\n  function get<T>(key: string, options?: { shared?: boolean }): T | null\n  function set(key: string, value: any, options?: { shared?: boolean }): void\n  function remove(key: string, options?: { shared?: boolean }): void\n  function contains(key: string, options?: { shared?: boolean }): boolean\n  function clear(): void\n  function keys(): string[]\n}\n```\n\nNotes:\n\n- `shared` applies only to get / set / remove / contains\n- `clear()` and `keys()` operate **only on script-scoped storage**, never on shared storage\n\n***\n\n# API Details\n\n## get\n\n```ts\nfunction get<T>(key: string, options?: { shared?: boolean }): T | null\n```\n\nRetrieves a value.\n\nHowever:\n\n- If the Extension is still alive → may return leftover values\n- If the Extension was killed → returns null\n\nExamples:\n\nScript-scoped:\n\n```ts\nconst color = IntentMemoryStorage.get<string>(\"color\")\n```\n\nShared:\n\n```ts\nconst token = IntentMemoryStorage.get<string>(\"token\", { shared: true })\n```\n\n***\n\n## set\n\n```ts\nfunction set(key: string, value: any, options?: { shared?: boolean }): void\n```\n\nStores a value in the selected scope.\n\n***\n\n## remove\n\n```ts\nfunction remove(key: string, options?: { shared?: boolean }): void\n```\n\nDeletes the key in the selected scope.\n\n***\n\n## contains\n\n```ts\nfunction contains(key: string, options?: { shared?: boolean }): boolean\n```\n\nChecks whether a key exists.\n\nThis depends on whether the Extension process has remained alive.\n\n***\n\n## clear\n\n```ts\nfunction clear(): void\n```\n\nClears **script-scoped** memory only.\n\nTo clear shared memory, remove keys manually.\n\n***\n\n## keys\n\n```ts\nfunction keys(): string[]\n```\n\nReturns keys in script-scoped storage.\n\nShared keys must be tracked manually by the developer.\n\n***\n\n# Usage Scenarios\n\n## Script-scoped (default)\n\nGood for:\n\n- Multi-step flows inside a single script\n- SnippetIntent → AppIntent → SnippetIntent\n- Temporary UI state\n- Step numbers, temporary selections\n\n***\n\n## Shared storage\n\nGood for:\n\n- Multi-script cooperation\n- Coordinating global workflow IDs\n- Sharing ephemeral state across multiple AppIntent calls\n\n***\n\n# Not Recommended For\n\n- Persistent data\n- Large objects (images, binary, long text)\n- Data that must be reliably present\n- Data that must be reliably cleared\n- Any workflow requiring deterministic behavior\n\nUse instead:\n\n- `Storage` for durable key–value data\n- `FileManager` for files in the shared App Group directory\n\n***\n\n# Examples\n\n## Script-scoped\n\n```ts\nIntentMemoryStorage.set(\"color\", \"red\")\n\nconst color = IntentMemoryStorage.get<string>(\"color\")\n```\n\n***\n\n## Shared across scripts\n\nScript A:\n\n```ts\nIntentMemoryStorage.set(\"sessionID\", \"12345\", { shared: true })\n```\n\nScript B:\n\n```ts\nconst id = IntentMemoryStorage.get<string>(\"sessionID\", { shared: true })\n```\n\n***\n\n# Storage Structure Example\n\nIf you store:\n\n```ts\nIntentMemoryStorage.set(\"color\", \"green\")\nIntentMemoryStorage.set(\"step\", 2)\nIntentMemoryStorage.set(\"token\", \"xyz\", { shared: true })\n```\n\nThen the extension process holds:\n\nScript-scoped:\n\n```json\n{\n  \"color\": \"green\",\n  \"step\": 2\n}\n```\n\nShared:\n\n```json\n{\n  \"token\": \"xyz\"\n}\n```\n\nBoth disappear once the system kills the Extension process.\n\n***\n\n# Best Practices\n\n- Treat MemoryStorage as an in-memory *cache*, not a storage layer\n- Never assume the value will exist\n- Never assume the value will be cleared\n- Do not store large data\n- Use structured keys like:\n\n  - `\"workflow.step\"`\n  - `\"ui.selectedColor\"`\n  - `\"global.sessionID\"`\n- For persistent or critical data, always use `Storage` or `FileManager`\n","routePath":"/doc/Changelog/2.4.4/IntentMemoryStorage","lang":"en","toc":[{"id":"1-script-scoped-default","text":"1. Script-scoped (default)","depth":2,"charIndex":1703},{"id":"2-shared-storage","text":"2. Shared storage","depth":2,"charIndex":2049},{"id":"case-1-shortcuts-running-an-intent","text":"Case 1: Shortcuts running an Intent","depth":2,"charIndex":2635},{"id":"intentmemorystorage-does-not-necessarily-clear","text":"IntentMemoryStorage does *not* necessarily clear.","depth":3,"charIndex":2829},{"id":"case-2-widgets-calling-appintents","text":"Case 2: Widgets calling AppIntents","depth":2,"charIndex":3098},{"id":"case-3-live-activity-calling-appintents","text":"Case 3: Live Activity calling AppIntents","depth":2,"charIndex":3534},{"id":"final-lifecycle-summary","text":"Final Lifecycle Summary","depth":2,"charIndex":3867},{"id":"get","text":"get","depth":2,"charIndex":5256},{"id":"set","text":"set","depth":2,"charIndex":5676},{"id":"remove","text":"remove","depth":2,"charIndex":5815},{"id":"contains","text":"contains","depth":2,"charIndex":5949},{"id":"clear","text":"clear","depth":2,"charIndex":6147},{"id":"keys","text":"keys","depth":2,"charIndex":6282},{"id":"script-scoped-default","text":"Script-scoped (default)","depth":2,"charIndex":6448},{"id":"shared-storage","text":"Shared storage","depth":2,"charIndex":6637},{"id":"script-scoped","text":"Script-scoped","depth":2,"charIndex":6448},{"id":"shared-across-scripts","text":"Shared across scripts","depth":2,"charIndex":7262}],"frontmatter":{},"version":"","description":"IntentMemoryStorage is an in-memory storage mechanism used inside AppIntent execution environments.\nIt allows multiple AppIntents—such as multi-step workflows involving SnippetIntents—to share temporary data. However, its lifecycle does not follow the lifecycle of AppIntent execution or Script.exit().\nIt is controlled by the system’s management of the Extension process, which is unpredictable. This document describes its real behavior, its storage scopes, how the system manages JSContexts in Shortcuts, Widgets, and Live Activities, and how developers should use it safely. Each AppIntent in Scripting runs inside its own Script Execution Context (JSContext).\nWhen: The AppIntent’s perform() finishes, orScript.exit() is called the execution ends. But this does not mean that IntentMemoryStorage (or the JSContext) is destroyed. Instead: IntentMemoryStorage persists as long as the system keeps the Extension process alive It will only be cleared when: The Extension process is terminated by the systemThe system decides to reclaim memoryThe environment hosting the Intent Extension or Widget Extension is destroyed Therefore: Running the same Shortcut again may read leftover values from the previous run.Widget or Live Activity AppIntent calls may reuse the same JSContext, preserving MemoryStorage.MemoryStorage can disappear at any time if the system kills the Extension process. This behavior is normal and inherent to the AppExtension lifecycle. IntentMemoryStorage is: A short-lived, extension-scoped, non-persistent memory store IntentMemoryStorage provides two scopes."},{"title":"Liquid Glass Effect","content":"Scripting provides full support for the new **Liquid Glass** visual system introduced in iOS 26. This includes `glassEffect`, `GlassEffectContainer`, `UIGlass`, and related geometry-matching and transition APIs. These APIs allow scripts to create rich translucent materials, fluid glass shapes, matched geometry animations, and unioned glass regions directly within TSX.\n\nThis document explains how the Liquid Glass APIs are used in Scripting, including:\n\n- Concepts and fundamentals\n- How to apply glass effects\n- UIGlass configuration\n- Geometry transitions\n- glassEffect identifiers and unions\n- GlassEffectContainer behavior\n- Practical examples and best practices\n\n***\n\n# 1. Overview of Liquid Glass\n\nLiquid Glass is a new material and animation system in iOS 26. Compared to earlier blur or material effects, Liquid Glass provides:\n\n- Fluid, dynamic shapes that follow view geometry\n- Tintable and interactive glass materials\n- Geometry-matched transitions\n- Grouped “glass unions” to merge multiple regions\n- High-performance rendering inside containers\n\n***\n\n# 2. The `glassEffect` Modifier\n\nAny view that adopts `GlassProps` can apply a Liquid Glass effect using the `glassEffect` property.\n\n### Definition\n\n```ts\ntype GlassProps = {\n  glassEffect?: boolean | UIGlass | Shape | {\n    glass: UIGlass\n    shape: Shape\n  }\n\n  glassEffectTransition?: GlassEffectTransition\n\n  glassEffectID?: {\n    id: string | number\n    namespace: NamespaceID\n  }\n\n  glassEffectUnion?: {\n    id: string | number\n    namespace: NamespaceID\n  }\n}\n```\n\n***\n\n## 2.1 Ways to Use `glassEffect`\n\n### **1. Enable default Liquid Glass material**\n\n```tsx\n<Text glassEffect>Foo</Text>\n```\n\nEquivalent to `UIGlass.regular()`.\n\n***\n\n### **2. Apply a specific UIGlass instance**\n\n```tsx\n<Text glassEffect={UIGlass.regular().interactive(false)}>\n  Foo\n</Text>\n```\n\nYou can chain configuration calls such as `interactive()` and `tint()`.\n\n***\n\n### **3. Provide a specific Shape**\n\n```tsx\n<Text\n  glassEffect={{\n    glass: UIGlass.regular(),\n    shape: { type: 'rect', cornerRadius: 10 }\n  }}\n>\n  Foo\n</Text>\n```\n\nOr directly provide a Shape object:\n\n```tsx\n<Text glassEffect={{ type: 'rect', cornerRadius: 10 }}>\n  Foo\n</Text>\n```\n\nThe glass material will be clipped to the shape’s geometry.\n\n***\n\n### **4. Boolean shorthand**\n\n```tsx\n<View glassEffect />\n```\n\nActs the same as default Liquid Glass material.\n\n***\n\n# 3. The `UIGlass` Class\n\n`UIGlass` represents the Liquid Glass material configuration.\n\n### Static factories\n\n| Method               | Description                                                    |\n| -------------------- | -------------------------------------------------------------- |\n| `UIGlass.clear()`    | Fully clear variant, used for overlay or blending composition. |\n| `UIGlass.regular()`  | Standard Liquid Glass material.                                |\n| `UIGlass.identity()` | Identity material that leaves content visually unchanged.      |\n\n### Instance configuration\n\n```ts\ninteractive(value?: boolean): UIGlass\ntint(color: Color): UIGlass\n```\n\nExample:\n\n```tsx\nglassEffect={UIGlass.regular().interactive().tint(\"red\")}\n```\n\n***\n\n# 4. Glass Effect Transitions\n\n```ts\ntype GlassEffectTransition = 'identity' | 'materialize' | 'matchedGeometry'\n```\n\n### Transition Types\n\n| Transition          | Description                                                                 |\n| ------------------- | --------------------------------------------------------------------------- |\n| `'identity'`        | No change or animation applied.                                             |\n| `'materialize'`     | Fades in content and animates the glass material without geometry matching. |\n| `'matchedGeometry'` | Matches the geometry of other glass shapes during transitions.              |\n\n### Usage\n\n```tsx\n<Text\n  glassEffect\n  glassEffectTransition=\"materialize\"\n>\n  Foo\n</Text>\n```\n\n`matchedGeometry` works best with **glassEffectID** or **glassEffectUnion**.\n\n***\n\n# 5. glassEffectID and glassEffectUnion\n\nLiquid Glass can identify or group glass effects to create smooth geometry animations or unified material regions.\n\n***\n\n## 5.1 glassEffectID\n\nAssigns a unique identity to a glass effect for matched geometry animations.\n\n```tsx\n<Text\n  glassEffect\n  glassEffectID={{ id: \"avatar\", namespace }}\n>\n  Foo\n</Text>\n```\n\nViews with the same `id + namespace` can participate in matched geometry transitions.\n\n***\n\n## 5.2 glassEffectUnion\n\nGroups multiple glass effects into a single unioned glass region.\n\n```tsx\n<Text\n  glassEffect\n  glassEffectUnion={{ id: 1, namespace }}\n/>\n```\n\nThis merges material rendering across multiple views.\n\n***\n\n# 6. GlassEffectContainer\n\n`GlassEffectContainer` is used to group and manage correlated glass effects. Views inside the container:\n\n- Participate in matched geometry\n- Support glass unions\n- Render glass transitions more efficiently\n\n### Example\n\n```tsx\n<GlassEffectContainer>\n  <HStack spacing={40}>\n    <Image systemName=\"1.circle\" glassEffect />\n    <Image systemName=\"2.circle\" glassEffect />\n  </HStack>\n</GlassEffectContainer>\n```\n\nNo configuration is required; the container acts as a shared environment.\n\n***\n\n# 7. Glass Button Styles\n\nScripting supports additional iOS 26 button styles:\n\n- `\"glass\"`\n- `\"glassProminent\"`\n\n### Examples\n\n```tsx\n<Button title=\"Glass\" buttonStyle=\"glass\" />\n\n<Button title=\"Glass Prominent\" buttonStyle=\"glassProminent\" />\n\n<Button\n  title=\"Glass & Tint\"\n  buttonStyle=\"glass\"\n  tint=\"red\"\n/>\n```\n\nThese styles use Liquid Glass materials and integrate with tint and interaction behaviors.\n\n***\n\n# 8. Practical Example\n\nBelow is a real example combining multiple features:\n\n- Glass buttons\n- GlassEffectContainer\n- UIGlass configurations\n- Shape-based glass\n- Offset effects\n\n```tsx\n<GlassEffectContainer>\n  <HStack spacing={40}>\n    <Image\n      systemName=\"1.circle\"\n      frame={{ width: 80, height: 80 }}\n      font={36}\n      glassEffect\n      offset={{ x: 30, y: 0 }}\n    />\n    <Image\n      systemName=\"2.circle\"\n      frame={{ width: 80, height: 80 }}\n      font={36}\n      glassEffect\n      offset={{ x: -30, y: 0 }}\n    />\n  </HStack>\n</GlassEffectContainer>\n```\n\n***\n\n# 9. Best Practices\n\n### 1. Place related glass views inside a single GlassEffectContainer\n\nImproves performance and produces more consistent transitions.\n\n### 2. Provide glassEffectID for matched geometry animations\n\nWithout IDs, transitions cannot interpolate shapes.\n\n### 3. Use glassEffectUnion to merge nearby glass regions\n\nCreates a seamless material surface.\n\n### 4. Avoid deeply nested glass hierarchies\n\nPrefer using a container with ZStack for organization.\n\n### 5. Use UIGlass.identity when structure must remain but material disabled\n\nUseful for conditionally enabling glass without changing layout.\n","routePath":"/doc/Changelog/2.4.4/Liquid Glass Effect/","lang":"en","toc":[{"id":"definition","text":"Definition","depth":3,"charIndex":1201},{"id":"21-ways-to-use-glasseffect","text":"2.1 Ways to Use `glassEffect`","depth":2,"charIndex":1545},{"id":"1-enable-default-liquid-glass-material","text":"**1. Enable default Liquid Glass material**","depth":3,"charIndex":1579},{"id":"2-apply-a-specific-uiglass-instance","text":"**2. Apply a specific UIGlass instance**","depth":3,"charIndex":1710},{"id":"3-provide-a-specific-shape","text":"**3. Provide a specific Shape**","depth":3,"charIndex":1918},{"id":"4-boolean-shorthand","text":"**4. Boolean shorthand**","depth":3,"charIndex":2272},{"id":"static-factories","text":"Static factories","depth":3,"charIndex":2478},{"id":"instance-configuration","text":"Instance configuration","depth":3,"charIndex":2951},{"id":"transition-types","text":"Transition Types","depth":3,"charIndex":3259},{"id":"usage","text":"Usage","depth":3,"charIndex":3792},{"id":"51-glasseffectid","text":"5.1 glassEffectID","depth":2,"charIndex":4134},{"id":"52-glasseffectunion","text":"5.2 glassEffectUnion","depth":2,"charIndex":4420},{"id":"example","text":"Example","depth":3,"charIndex":4884},{"id":"examples","text":"Examples","depth":3,"charIndex":5281},{"id":"1-place-related-glass-views-inside-a-single-glasseffectcontainer","text":"1. Place related glass views inside a single GlassEffectContainer","depth":3,"charIndex":6188},{"id":"2-provide-glasseffectid-for-matched-geometry-animations","text":"2. Provide glassEffectID for matched geometry animations","depth":3,"charIndex":6323},{"id":"3-use-glasseffectunion-to-merge-nearby-glass-regions","text":"3. Use glassEffectUnion to merge nearby glass regions","depth":3,"charIndex":6438},{"id":"4-avoid-deeply-nested-glass-hierarchies","text":"4. Avoid deeply nested glass hierarchies","depth":3,"charIndex":6535},{"id":"5-use-uiglassidentity-when-structure-must-remain-but-material-disabled","text":"5. Use UIGlass.identity when structure must remain but material disabled","depth":3,"charIndex":6637}],"frontmatter":{},"version":"","description":"Scripting provides full support for the new Liquid Glass visual system introduced in iOS 26. This includes glassEffect, GlassEffectContainer, UIGlass, and related geometry-matching and transition APIs. These APIs allow scripts to create rich translucent materials, fluid glass shapes, matched geometry animations, and unioned glass regions directly within TSX. This document explains how the Liquid Glass APIs are used in Scripting, including: Concepts and fundamentalsHow to apply glass effectsUIGlass configurationGeometry transitionsglassEffect identifiers and unionsGlassEffectContainer behaviorPractical examples and best practices Liquid Glass is a new material and animation system in iOS 26. Compared to earlier blur or material effects, Liquid Glass provides: Fluid, dynamic shapes that follow view geometryTintable and interactive glass materialsGeometry-matched transitionsGrouped “glass unions” to merge multiple regionsHigh-performance rendering inside containers Any view that adopts GlassProps can apply a Liquid Glass effect using the glassEffect property. Definition"},{"title":"Example","content":"```tsx\n\n\nfunction View({\n  image\n}: {\n  image: UIImage\n}) {\n  // Access dismiss function.\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle=\"GlassEffect DEMO\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <ZStack>\n        <Image\n          image={image}\n          resizable\n          scaleToFill\n        />\n        <VStack>\n          <HStack>\n            <Button\n              title=\"Glass\"\n              action={() => { }}\n              buttonStyle=\"glass\"\n            />\n            <Button\n              title=\"Glass & Tint\"\n              action={() => { }}\n              buttonStyle=\"glass\"\n              tint=\"red\"\n            />\n          </HStack>\n          <HStack>\n            <Button\n              title=\"Glass Prominent\"\n              action={() => { }}\n              buttonStyle=\"glassProminent\"\n            />\n            <Button\n              title=\"Glass Prominent & Tint\"\n              action={() => { }}\n              buttonStyle=\"glassProminent\"\n              tint=\"red\"\n            />\n          </HStack>\n          <GlassEffectContainer>\n            <HStack spacing={40}>\n              <Image\n                systemName=\"1.circle\"\n                frame={{ width: 80, height: 80 }}\n                font={36}\n                glassEffect\n                offset={{ x: 30, y: 0 }}\n              />\n              <Image\n                systemName=\"2.circle\"\n                frame={{ width: 80, height: 80 }}\n                font={36}\n                glassEffect\n                offset={{ x: -30, y: 0 }}\n              />\n            </HStack>\n          </GlassEffectContainer>\n          <HStack spacing={12}>\n            <Text\n              padding\n              glassEffect\n            >Foo</Text>\n            <Text\n              padding\n              glassEffect={{\n                type: 'rect',\n                cornerRadius: 10\n              }}\n            >Foo</Text>\n            <Text\n              padding\n              glassEffect={UIGlass.regular().interactive()}\n            >Foo</Text>\n            <Text\n              padding\n              glassEffect={UIGlass.regular().tint(\"red\")}\n              foregroundStyle=\"white\"\n            >Foo</Text>\n          </HStack>\n        </VStack>\n      </ZStack>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  try {\n    const image = (await Photos.pickPhotos(1))?.at(0)\n    if (!image) {\n      throw new Error(\"You must pick an image as the background.\")\n    }\n    // Present view.\n    await Navigation.present({\n      element: <View\n        image={image}\n      />\n    })\n  } catch (e) {\n    console.present()\n    console.error(e)\n  }\n\n  // Avoiding memory leaks.\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Changelog/2.4.4/Liquid Glass Effect/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"NamespaceReader","content":"`NamespaceReader` is used to **create and manage a geometry animation namespace (Namespace)**.\nThis namespace is the **foundational requirement** for enabling:\n\n- `matchedGeometryEffect` (component-level geometry animation)\n- `matchedTransitionSource` (page-level navigation transition)\n- `navigationTransition` (such as zoom transitions)\n\nYou can think of `NamespaceReader` as:\n\n> A “geometry animation coordinate provider” that defines which views belong to the **same animation scope**.\n\n***\n\n## 1. Role of NamespaceReader\n\n`NamespaceReader` is **not a visual UI component**. It is a **namespace generator** whose responsibilities are:\n\n- Creating a brand-new `NamespaceID`\n- Exposing that namespace via a render function\n- Defining the **boundary of a geometry animation group**\n\nIn Scripting, this corresponds conceptually to SwiftUI’s:\n\n- `@Namespace`\n- `Namespace.ID`\n\n***\n\n## 2. Basic Usage Pattern\n\n### 2.1 Minimal Structure\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    // All views inside this scope\n    // can use this namespace for matched geometry animations\n  )}\n</NamespaceReader>\n```\n\nExplanation:\n\n- `NamespaceReader` accepts a **function as its child**\n- This function receives a single argument: `namespace`\n- The returned `namespace` is the unique animation scope for all child views\n\n***\n\n## 3. The True Purpose of a Namespace\n\n### 3.1 What a Namespace Really Does\n\nThe real purpose of a `namespace` is to:\n\n- Declare a group of views as **eligible for shared geometry animation**\n- Explicitly define **which views are allowed to match each other**\n\nWithout using the same `namespace`:\n\n- Even if two views have the **same `id`**\n- **No geometry animation will ever happen**\n\n***\n\n### 3.2 Isolation Provided by Namespaces\n\n| Condition                              | Geometry Matching Occurs |\n| -------------------------------------- | ------------------------ |\n| Same `id` + Same `namespace`           | Yes                      |\n| Same `id` + Different `namespace`      | No                       |\n| Different `id` + Same `namespace`      | No                       |\n| Different `id` + Different `namespace` | No                       |\n\nConclusion:\n\n> **Both `id` and `namespace` must match exactly for geometry animation to be established.**\n\n***\n\n## 4. Relationship with the Geometry Animation System\n\n### 4.1 Relationship with matchedGeometryEffect\n\n- `matchedGeometryEffect` relies on `namespace` to establish cross-view geometry mapping\n- `NamespaceReader` is a **mandatory prerequisite** for `matchedGeometryEffect`\n- Without `NamespaceReader`:\n\n  - `matchedGeometryEffect` cannot function\n\n***\n\n### 4.2 Relationship with matchedTransitionSource\n\n- Page-level navigation transitions also depend on `namespace` to pair:\n\n  - The source view\n  - The destination page\n- `NamespaceReader` is used to:\n\n  - Create the namespace on the source page\n  - Pass the same namespace into the destination page\n\n***\n\n## 5. Basic NamespaceReader Example (Component-Level)\n\n```tsx\nconst expanded = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <VStack>\n      {!expanded.value && (\n        <Circle\n          matchedGeometryEffect={{\n            id: \"shape\",\n            namespace\n          }}\n          onTapGesture={() => {\n            expanded.setValue(true)\n          }}\n        />\n      )}\n\n      {expanded.value && (\n        <Circle\n          frame={{ width: 200, height: 200 }}\n          matchedGeometryEffect={{\n            id: \"shape\",\n            namespace,\n            isSource: false\n          }}\n        />\n      )}\n    </VStack>\n  )}\n</NamespaceReader>\n```\n\nIn this example:\n\n- `NamespaceReader` provides the animation coordinate system\n- Both `Circle` views share:\n\n  - The same `id`\n  - The same `namespace`\n- Therefore, they are geometrically linked\n\n***\n\n## 6. Typical NamespaceReader Structure in Navigation Transitions\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    <NavigationLink\n      destination={\n        <DetailPage\n          navigationTransition={{\n            type: \"zoom\",\n            namespace,\n            sourceID: \"cover\"\n          }}\n        />\n      }\n    >\n      <Image\n        source=\"cover\"\n        matchedTransitionSource={{\n          id: \"cover\",\n          namespace\n        }}\n      />\n    </NavigationLink>\n  )}\n</NamespaceReader>\n```\n\nThis structure demonstrates:\n\n- `namespace` is created by `NamespaceReader`\n- The same `namespace` is used by:\n\n  - The source view\n  - The destination page\n- This enables full page-level shared-geometry transitions\n\n***\n\n## 7. Namespace Lifecycle and Scope\n\n### 7.1 Lifecycle\n\n- Every time `NamespaceReader` is created:\n\n  - A **new namespace instance** is generated\n- The namespace:\n\n  - Exists only within the current component tree\n  - Is destroyed automatically when the component is unmounted\n\n***\n\n### 7.2 Scope\n\n- A namespace is valid **only inside the render function of its `NamespaceReader`**\n- It is **not shared automatically across component hierarchies**\n- If cross-component sharing is required:\n\n  - The namespace must be passed explicitly via props\n\n***\n\n## 8. Common Errors and Debugging Tips\n\n### 8.1 Geometry Animations Do Not Trigger\n\nCheck the following:\n\n- Is `NamespaceReader` actually present?\n- Is the `namespace` correctly received and passed?\n- Are both source and target using **the exact same namespace instance**?\n\n***\n\n### 8.2 Animations Are Unstable or Occasionally Fail\n\nCommon cause:\n\n- `NamespaceReader` is being conditionally rendered and destroyed repeatedly\n- Each destruction/recreation produces a **new namespace**\n- The old and new views are no longer in the same animation coordinate system\n\nRecommendation:\n\n- Place `NamespaceReader` in a **stable parent node**\n- Avoid wrapping it in `if` or ternary conditions\n\n***\n\n### 8.3 Nested NamespaceReader Causing Unexpected Behavior\n\nSymptoms:\n\n- `id` appears to be correct\n- But geometry matching still fails\n\nLikely cause:\n\n- Source and target views are actually using **different NamespaceReader instances**\n- Even though their `id` values are the same\n\n***\n\n## 9. Design Guidelines\n\n1. Use **one NamespaceReader per independent animation region**\n2. Do not create a separate NamespaceReader for every individual view\n3. For page-level transitions:\n\n   - Place `NamespaceReader` near the page root\n4. For component-level animations:\n\n   - Place `NamespaceReader` around the logical animation group\n5. Inside the same namespace:\n\n   - Do not reuse the same `id` for unrelated views\n\n***\n\n## 10. Recommended Use Cases\n\nAppropriate scenarios for using `NamespaceReader`:\n\n- Card → Detail shared-element transitions\n- Tab indicator geometry animation\n- Image zoom previews\n- List item → Detail content transitions\n- Spatially continuous multi-view animations\n\nScenarios where `NamespaceReader` is **not required**:\n\n- Simple opacity or scale animations\n- Single-view internal transitions\n- Animations that do not involve cross-view geometry matching\n","routePath":"/doc/Changelog/2.4.4/NamespaceReader","lang":"en","toc":[{"id":"1-role-of-namespacereader","text":"1. Role of NamespaceReader","depth":2,"charIndex":496},{"id":"2-basic-usage-pattern","text":"2. Basic Usage Pattern","depth":2,"charIndex":881},{"id":"21-minimal-structure","text":"2.1 Minimal Structure","depth":3,"charIndex":908},{"id":"3-the-true-purpose-of-a-namespace","text":"3. The True Purpose of a Namespace","depth":2,"charIndex":1313},{"id":"31-what-a-namespace-really-does","text":"3.1 What a Namespace Really Does","depth":3,"charIndex":1352},{"id":"32-isolation-provided-by-namespaces","text":"3.2 Isolation Provided by Namespaces","depth":3,"charIndex":1705},{"id":"4-relationship-with-the-geometry-animation-system","text":"4. Relationship with the Geometry Animation System","depth":2,"charIndex":2280},{"id":"41-relationship-with-matchedgeometryeffect","text":"4.1 Relationship with matchedGeometryEffect","depth":3,"charIndex":2335},{"id":"42-relationship-with-matchedtransitionsource","text":"4.2 Relationship with matchedTransitionSource","depth":3,"charIndex":2633},{"id":"5-basic-namespacereader-example-component-level","text":"5. Basic NamespaceReader Example (Component-Level)","depth":2,"charIndex":2939},{"id":"6-typical-namespacereader-structure-in-navigation-transitions","text":"6. Typical NamespaceReader Structure in Navigation Transitions","depth":2,"charIndex":3807},{"id":"7-namespace-lifecycle-and-scope","text":"7. Namespace Lifecycle and Scope","depth":2,"charIndex":4535},{"id":"71-lifecycle","text":"7.1 Lifecycle","depth":3,"charIndex":4572},{"id":"72-scope","text":"7.2 Scope","depth":3,"charIndex":4818},{"id":"8-common-errors-and-debugging-tips","text":"8. Common Errors and Debugging Tips","depth":2,"charIndex":5086},{"id":"81-geometry-animations-do-not-trigger","text":"8.1 Geometry Animations Do Not Trigger","depth":3,"charIndex":5126},{"id":"82-animations-are-unstable-or-occasionally-fail","text":"8.2 Animations Are Unstable or Occasionally Fail","depth":3,"charIndex":5365},{"id":"83-nested-namespacereader-causing-unexpected-behavior","text":"8.3 Nested NamespaceReader Causing Unexpected Behavior","depth":3,"charIndex":5776},{"id":"9-design-guidelines","text":"9. Design Guidelines","depth":2,"charIndex":6064},{"id":"10-recommended-use-cases","text":"10. Recommended Use Cases","depth":2,"charIndex":6492}],"frontmatter":{},"version":"","description":"NamespaceReader is used to create and manage a geometry animation namespace (Namespace).\nThis namespace is the foundational requirement for enabling: matchedGeometryEffect (component-level geometry animation)matchedTransitionSource (page-level navigation transition)navigationTransition (such as zoom transitions) You can think of NamespaceReader as: A “geometry animation coordinate provider” that defines which views belong to the same animation scope."},{"title":"New List View Modifiers","content":"# Overview of Properties\n\n| Property                     | Type                                                        | Availability | Description                                                        |   |   |\n| ---------------------------- | ----------------------------------------------------------- | ------------ | ------------------------------------------------------------------ | - | - |\n| `listSectionIndexVisibility` | `Visibility`                                                | iOS 26.0+    | Controls the visibility of the List's right-side section index     |   |   |\n| `listSectionMargins`         | `number \\| EdgeSets \\| { edges: EdgeSets; length: number }` | iOS 26.0+    | Customizes section margins, replacing SwiftUI’s automatic defaults |   |   |\n| `sectionIndexLabel`          | `string`                                                    | iOS 26.0+    | Sets the character displayed in the section index                  |   |   |\n| `sectionActions`             | `VirtualNode`                                               | iOS 18.0+    | Adds custom actions to the section header area                     |   |   |\n\n***\n\n# 1. listSectionIndexVisibility\n\n```ts\n/**\n * Sets the visibility of the list section index.\n * @available iOS 26.0+.\n */\nlistSectionIndexVisibility?: Visibility\n```\n\n### Description\n\nControls whether the List shows the right-side section index (commonly used for A–Z navigation in contact lists).\n\nPossible values:\n\n- `\"visible\"`\n- `\"hidden\"`\n- `\"automatic\"` (default system behavior)\n\n### Example\n\n```tsx\n<List listSectionIndexVisibility=\"visible\">\n  <ForEach\n    data={groups}\n    builder={group => (\n      <Section\n        header={<Text>{group.title}</Text>}\n        sectionIndexLabel={group.title}\n      >\n        {group.items.map(item => <Text key={item}>{item}</Text>)}\n      </Section>\n    )}\n  />\n</List>\n```\n\n***\n\n# 2. listSectionMargins\n\n```ts\n/**\n * Set the section margins for the specific edges.\n * @available iOS 26.0+.\n */\nlistSectionMargins?: number | EdgeSets | {\n  edges: EdgeSets\n  length: number\n}\n```\n\n### Description\n\nCustomizes the margins of a section. When set, it **fully replaces** SwiftUI’s default section margin rules.\n\n### Supported Formats\n\n### 2.1 Single number\n\nApplies the same margin to all edges.\n\n```tsx\nlistSectionMargins={12}\n```\n\n### 2.2 EdgeSets\n\nApplies the specified edges with the default margin.\n\n```tsx\nlistSectionMargins={[\"horizontal\", \"top\"]}\n```\n\n### 2.3 Specific edges with length\n\nApplies a margin of `length` only to the specified edges.\n\n```tsx\nlistSectionMargins={{\n  edges: \"horizontal\",\n  length: 20\n}}\n```\n\nEquivalent to SwiftUI:\n\n```swift\n.listSectionMargins(.horizontal, 20)\n```\n\n### Example\n\n```tsx\n<Section\n  header={<Text>Favorites</Text>}\n  listSectionMargins={{\n  edges: \"horizontal\",\n  length: 20\n  }}\n>\n  <Text>Item A</Text>\n  <Text>Item B</Text>\n</Section>\n```\n\n***\n\n# 3. sectionIndexLabel\n\n```ts\n/**\n * Sets the label that is used in a section index.\n * @available iOS 26.0+.\n */\nsectionIndexLabel?: string\n```\n\n### Description\n\nSets the character or text displayed in the right-side section index for this section. Typically a single letter.\n\n### Example\n\n```tsx\n<Section\n  header={<Text>A</Text>}\n  sectionIndexLabel=\"A\"\n>\n  <Text>Adam</Text>\n  <Text>Ana</Text>\n</Section>\n```\n\n***\n\n# 4. sectionActions\n\n```ts\n/**\n * Adds custom actions to a section.\n * @available iOS 18.0+\n */\nsectionActions?: VirtualNode\n```\n\n### Description\n\nAdds custom UI elements such as buttons or menus to the section header’s trailing (accessory) area.\n\n### Example: Refresh button\n\n```tsx\n<Section\n  header={<Text>Downloads</Text>}\n  sectionActions={\n    <Button title=\"Refresh\" action={() => doRefresh()} />\n  }\n>\n  <Text>File 1</Text>\n  <Text>File 2</Text>\n</Section>\n```\n\n### Example: Menu with multiple actions\n\n```tsx\n<Section\n  header={<Text>Photos</Text>}\n  sectionActions={\n    <Menu title=\"Actions\">\n      <Button title=\"Upload All\" action={() => uploadAll()} />\n      <Button title=\"Delete All\" action={() => deleteAll()} />\n    </Menu>\n  }\n>\n  {photos.map(photo => <Text key={photo.id}>{photo.name}</Text>)}\n</Section>\n```\n\n***\n\n# Full Example\n\n```tsx\n<List listSectionIndexVisibility=\"visible\">\n  <ForEach\n    data={groups}\n    builder={group => (\n      <Section\n        header={<Text>{group.title}</Text>}\n        sectionIndexLabel={group.title}\n        listSectionMargins={12}\n        sectionActions={\n          <Button title=\"Refresh\" action={() => refreshGroup(group)} />\n        }\n      >\n        {group.items.map(item => <Text key={item}>{item}</Text>)}\n      </Section>\n    )}\n  />\n</List>\n```\n","routePath":"/doc/Changelog/2.4.4/New List View Modifiers","lang":"en","toc":[{"id":"description","text":"Description","depth":3,"charIndex":1321},{"id":"example","text":"Example","depth":3,"charIndex":1541},{"id":"description-1","text":"Description","depth":3,"charIndex":2078},{"id":"supported-formats","text":"Supported Formats","depth":3,"charIndex":2205},{"id":"21-single-number","text":"2.1 Single number","depth":3,"charIndex":2228},{"id":"22-edgesets","text":"2.2 EdgeSets","depth":3,"charIndex":2326},{"id":"23-specific-edges-with-length","text":"2.3 Specific edges with length","depth":3,"charIndex":2453},{"id":"example-1","text":"Example","depth":3,"charIndex":2696},{"id":"description-2","text":"Description","depth":3,"charIndex":3037},{"id":"example-2","text":"Example","depth":3,"charIndex":3169},{"id":"description-3","text":"Description","depth":3,"charIndex":3440},{"id":"example-refresh-button","text":"Example: Refresh button","depth":3,"charIndex":3558},{"id":"example-menu-with-multiple-actions","text":"Example: Menu with multiple actions","depth":3,"charIndex":3780}],"frontmatter":{},"version":"","description":"Description Controls whether the List shows the right-side section index (commonly used for A–Z navigation in contact lists). Possible values: \"visible\"\"hidden\"\"automatic\" (default system behavior) Example Description Customizes the margins of a section. When set, it fully replaces SwiftUI’s default section margin rules. Supported Formats 2.1 Single number Applies the same margin to all edges. 2.2 EdgeSets Applies the specified edges with the default margin. 2.3 Specific edges with length Applies a margin of length only to the specified edges. Equivalent to SwiftUI: Example Description Sets the character or text displayed in the right-side section index for this section. Typically a single letter. Example Description Adds custom UI elements such as buttons or menus to the section header’s trailing (accessory) area. Example: Refresh button Example: Menu with multiple actions"},{"title":"Notification","content":"The `Notification` module in the **Scripting** app allows you to schedule, manage, and display local notifications with advanced trigger types, interactive actions, and rich UI capabilities.\n\n***\n\n## Table of Contents\n\n1. [Scheduling Notifications]()\n2. [Notification Triggers]()\n\n   - [TimeIntervalNotificationTrigger]()\n   - [CalendarNotificationTrigger]()\n   - [LocationNotificationTrigger]()\n3. [Notification Actions]()\n4. [Rich Notifications with Custom UI]()\n5. [Managing Notifications]()\n6. [NotificationInfo and Request Structure]()\n7. [Comprehensive Example]()\n\n***\n\n## Scheduling Notifications\n\nUse `Notification.schedule` to schedule a local notification. It supports content, triggers, tap behaviors, action buttons, rich UI, and delivery configurations:\n\n```ts\nawait Notification.schedule({\n  title: \"Reminder\",\n  body: \"Time to stand up!\",\n  trigger: new TimeIntervalNotificationTrigger({\n    timeInterval: 1800,\n    repeats: true\n  }),\n  actions: [\n    {\n      title: \"OK\",\n      url: Script.createRunURLScheme(\"My Script\", { acknowledged: true })\n    }\n  ],\n  tapAction: {\n    type: \"runScript\",\n    scriptName: \"Acknowledge Script\"\n  },\n  customUI: false\n})\n```\n\n### Parameters\n\n| Name                | Type                                                                                                          | Description                                                                      |\n| ------------------- | ------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |\n| `title`             | `string`                                                                                                      | Required. Notification title.                                                    |\n| `subtitle`          | `string?`                                                                                                     | Optional. Additional context.                                                    |\n| `body`              | `string?`                                                                                                     | Optional. Main content text.                                                     |\n| `badge`             | `number?`                                                                                                     | Optional. App icon badge count.                                                  |\n| `iconImageData`     | `Data` \\| `SystemImageIcon` \\| `null`                                                                         | Optional. Custom notification icon image data or system icon name.               |\n| `silent`            | `boolean?`                                                                                                    | Optional. Defaults to `false`. If `true`, delivers silently without sound.       |\n| `interruptionLevel` | `\"active\"` \\| `\"passive\"` \\| `\"timeSensitive\"`                                                                | Optional. Defines priority and delivery behavior.                                |\n| `userInfo`          | `Record<string, any>?`                                                                                        | Optional. Custom metadata.                                                       |\n| `threadIdentifier`  | `string?`                                                                                                     | Optional. Identifier for grouping notifications.                                 |\n| `trigger`           | `TimeIntervalNotificationTrigger` \\| `CalendarNotificationTrigger` \\| `LocationNotificationTrigger` \\| `null` | Optional. Defines when the notification is delivered.                            |\n| `actions`           | `NotificationAction[]?`                                                                                       | Optional. Action buttons shown when long-pressing or expanding the notification. |\n| `customUI`          | `boolean?`                                                                                                    | Optional. Enables rich notification UI using `notification.tsx`.                 |\n| `tapAction`         | `\"none\"` \\| `{ type: \"runScript\", scriptName: string }` \\| `{ type: \"openURL\", url: string }`                 | Optional. Controls what happens when the user taps the notification.             |\n\n#### SystemImageIcon\n\n```ts\ntype SystemImageIcon = {\n  systemImage: string\n  color: Color\n}\n```\n\nUsed to define notification icon using system image name and color.\n\n- `systemImage`: SFSymbol name\n- `color`: Icon color\n\n***\n\n### Notification Actions (`actions`)\n\nThe `actions` parameter defines action buttons that are shown when the user long-presses or expands the notification. Each action has a title and an optional URL to open when tapped.\n\n#### Notification Action (`NotificationAction`)\n\n```ts\ntype NotificationAction = {\n  title: string;\n  icon?: string;\n  url: string;\n  destructive?: boolean;\n}\n```\n\n- `title`: Action button title\n- `icon`: Action button icon\n- `url`: URL to open when tapped\n- `destructive`: Whether the action is destructive\n\n***\n\n### Tap Behavior (`tapAction`)\n\nThe `tapAction` parameter gives you precise control over what happens when the user taps the notification:\n\n- `\"none\"` – Do nothing when tapped\n- `{ type: \"runScript\", scriptName: string }` – Run a different script\n- `{ type: \"openURL\", url: string }` – Open a deep link or web page\n\nIf `tapAction` is not provided, the default behavior is to run the **current script**, and the notification details can be accessed using `Notification.current`.\n\n***\n\n## Notification Triggers\n\n### TimeIntervalNotificationTrigger\n\nTriggers a notification after a specified number of seconds.\n\n```ts\nnew TimeIntervalNotificationTrigger({\n  timeInterval: 3600,\n  repeats: true\n})\n```\n\n- `timeInterval`: Delay in seconds\n- `repeats`: Whether it repeats\n- `nextTriggerDate()`: Returns the next expected trigger date\n\n***\n\n### CalendarNotificationTrigger\n\nTriggers when the current date matches specific calendar components.\n\n```ts\nconst components = new DateComponents({ hour: 8, minute: 0 })\nnew CalendarNotificationTrigger({\n  dateMatching: components,\n  repeats: true\n})\n```\n\n- Supports components like `year`, `month`, `day`, `hour`, etc.\n- Useful for daily or weekly reminders\n\n***\n\n### LocationNotificationTrigger\n\nTriggers when entering or exiting a geographic region.\n\n```ts\nnew LocationNotificationTrigger({\n  region: {\n    identifier: \"Work\",\n    center: { latitude: 37.7749, longitude: -122.4194 },\n    radius: 100,\n    notifyOnEntry: true,\n    notifyOnExit: false\n  },\n  repeats: false\n})\n```\n\n- Fires based on entering/exiting the specified circular region\n\n***\n\n## Notification Actions\n\nUse the `actions` array to define buttons shown when the notification is expanded:\n\n```ts\nactions: [\n  {\n    title: \"Open Details\",\n    url: Script.createRunURLScheme(\"Details Script\", { fromNotification: true })\n  },\n  {\n    title: \"Dismiss\",\n    url: Script.createRunURLScheme(\"Dismiss Script\", { dismissed: true }),\n    destructive: true\n  }\n]\n```\n\n- Use `Script.createRunURLScheme(...)` to generate Scripting app URLs\n- Action buttons appear on long-press or pull-down\n\n***\n\n## Rich Notifications with Custom UI\n\nYou can provide an interactive JSX interface:\n\n1. Set `customUI: true` in the `Notification.schedule()` call\n2. Create a `notification.tsx` file\n3. Call `Notification.present(element)` inside that file\n\n### `Notification.present(element: JSX.Element): void`\n\nMust be called from `notification.tsx`. Renders the element as the expanded notification interface.\n\n***\n\n### Example `notification.tsx`\n\n```tsx\n\n\nfunction NotificationView() {\n  return (\n    <VStack>\n      <Text>Need to complete your task?</Text>\n      <Button title=\"Done\" action={() => console.log(\"Task completed\")} />\n      <Button title=\"Later\" action={() => console.log(\"Task postponed\")} />\n    </VStack>\n  )\n}\n\nNotification.present(<NotificationView />)\n```\n\n***\n\n## Managing Notifications\n\n| Method                                 | Description                                           |\n| -------------------------------------- | ----------------------------------------------------- |\n| `getAllDelivereds()`                   | Returns all delivered notifications.                  |\n| `getAllPendings()`                     | Returns all scheduled but undelivered notifications.  |\n| `removeAllDelivereds()`                | Removes all delivered notifications.                  |\n| `removeAllPendings()`                  | Cancels all pending notifications.                    |\n| `removeDelivereds(ids)`                | Removes delivered notifications with matching IDs.    |\n| `removePendings(ids)`                  | Cancels scheduled notifications with matching IDs.    |\n| `getAllDeliveredsOfCurrentScript()`    | Delivered notifications from the current script only. |\n| `getAllPendingsOfCurrentScript()`      | Scheduled notifications from the current script only. |\n| `removeAllDeliveredsOfCurrentScript()` | Clears current script’s delivered notifications.      |\n| `removeAllPendingsOfCurrentScript()`   | Cancels current script’s pending notifications.       |\n| `setBadgeCount(count)`                 | Sets the app icon badge value.                        |\n\n***\n\n## NotificationInfo and Request Structure\n\nUse `Notification.current` to get launch context when the script is opened from a notification tap:\n\n```ts\nif (Notification.current) {\n  const { title, userInfo } = Notification.current.request.content\n  console.log(`Launched from: ${title}`, userInfo)\n}\n```\n\n### `NotificationRequest` Fields\n\n| Field                      | Description                           |\n| -------------------------- | ------------------------------------- |\n| `identifier`               | Unique ID for the request             |\n| `content.title`            | Notification title                    |\n| `content.subtitle`         | Optional subtitle                     |\n| `content.body`             | Notification body                     |\n| `content.userInfo`         | Custom metadata                       |\n| `content.threadIdentifier` | Grouping key                          |\n| `trigger`                  | Trigger object that controls delivery |\n\n***\n\n## Comprehensive Example\n\nThis example demonstrates a full-featured notification with actions, rich UI, and repeated delivery.\n\n### Step 1: Schedule the Notification\n\n```ts\nawait Notification.schedule({\n  title: \"Hydration Reminder\",\n  body: \"Time to drink water!\",\n  interruptionLevel: \"timeSensitive\",\n  iconImageData: UIImage\n    .fromSFSymbol(\"waterbottle\")!\n    .withTintColor(\"systemBlue\")!\n    .toPNGData(),\n  customUI: true,\n  trigger: new TimeIntervalNotificationTrigger({\n    timeInterval: 3600,\n    repeats: true\n  }),\n  tapAction: {\n    type: \"runScript\",\n    scriptName: \"Hydration Tracker\"\n  },\n  actions: [\n    {\n      title: \"I Drank\",\n      url: Script.createRunURLScheme(\"Hydration Tracker\", { drank: true }),\n    },\n    {\n      title: \"Ignore\",\n      url: Script.createRunURLScheme(\"Hydration Tracker\", { drank: false }),\n      destructive: true\n    }\n  ]\n})\n```\n\n### Step 2: Define `notification.tsx`\n\n```tsx\n\n\nfunction HydrationUI() {\n  return (\n    <VStack>\n      <Text>Have you drunk water?</Text>\n      <Button title=\"Yes\" action={() => console.log(\"Hydration confirmed\")} />\n      <Button title=\"No\" action={() => console.log(\"Reminder ignored\")} />\n    </VStack>\n  )\n}\n\nNotification.present(<HydrationUI />)\n```\n\n***\n\n## Summary\n\nThe `Notification` API in the Scripting app supports:\n\n- Time, calendar, and location-based triggers\n- Actionable buttons and script redirection\n- Tap behaviors via `tapAction`\n- Rich notification UI via `notification.tsx`\n- Full lifecycle management (deliver, remove, query)\n","routePath":"/doc/Changelog/2.4.4/Notification/","lang":"en","toc":[{"id":"table-of-contents","text":"Table of Contents","depth":2,"charIndex":197},{"id":"scheduling-notifications","text":"Scheduling Notifications","depth":2,"charIndex":576},{"id":"parameters","text":"Parameters","depth":3,"charIndex":1180},{"id":"systemimageicon","text":"SystemImageIcon","depth":4,"charIndex":4482},{"id":"notification-actions-actions","text":"Notification Actions (`actions`)","depth":3,"charIndex":4707},{"id":"notification-action-notificationaction","text":"Notification Action (`NotificationAction`)","depth":4,"charIndex":4929},{"id":"tap-behavior-tapaction","text":"Tap Behavior (`tapAction`)","depth":3,"charIndex":5243},{"id":"notification-triggers","text":"Notification Triggers","depth":2,"charIndex":5727},{"id":"timeintervalnotificationtrigger","text":"TimeIntervalNotificationTrigger","depth":3,"charIndex":5753},{"id":"calendarnotificationtrigger","text":"CalendarNotificationTrigger","depth":3,"charIndex":6077},{"id":"locationnotificationtrigger","text":"LocationNotificationTrigger","depth":3,"charIndex":6443},{"id":"notification-actions","text":"Notification Actions","depth":2,"charIndex":4708},{"id":"rich-notifications-with-custom-ui","text":"Rich Notifications with Custom UI","depth":2,"charIndex":7335},{"id":"notificationpresentelement-jsxelement-void","text":"`Notification.present(element: JSX.Element): void`","depth":3,"charIndex":7576},{"id":"example-notificationtsx","text":"Example `notification.tsx`","depth":3,"charIndex":7738},{"id":"managing-notifications","text":"Managing Notifications","depth":2,"charIndex":8105},{"id":"notificationinfo-and-request-structure","text":"NotificationInfo and Request Structure","depth":2,"charIndex":9425},{"id":"notificationrequest-fields","text":"`NotificationRequest` Fields","depth":3,"charIndex":9728},{"id":"comprehensive-example","text":"Comprehensive Example","depth":2,"charIndex":10407},{"id":"step-1-schedule-the-notification","text":"Step 1: Schedule the Notification","depth":3,"charIndex":10535},{"id":"step-2-define-notificationtsx","text":"Step 2: Define `notification.tsx`","depth":3,"charIndex":11290},{"id":"summary","text":"Summary","depth":2,"charIndex":11651}],"frontmatter":{},"version":"","description":"The Notification module in the Scripting app allows you to schedule, manage, and display local notifications with advanced trigger types, interactive actions, and rich UI capabilities."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Notification\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n      >\n        <Button\n          title={\"Schedule a Notification with actions\"}\n          action={async () => {\n            Notification.schedule({\n              title: \"Notification Testing\",\n              body: \"Long Press or Pull Down\",\n              actions: [\n                {\n                  title: \"Widget\",\n                  url: Script.createRunURLScheme(Script.name, {\n                    doc: \"Widget\",\n                  })\n                },\n                {\n                  title: \"LiveActivity\",\n                  url: Script.createRunURLScheme(Script.name, {\n                    doc: \"LiveActivity\",\n                  })\n                }\n              ]\n            })\n          }}\n        />\n      </Section>\n\n      <Section\n      >\n        <Button\n          title={\"Schedule a Notification with Rich Content\"}\n          action={async () => {\n            Notification.schedule({\n              title: \"Notification Testing\",\n              body: \"Long Press or Pull Down to show rich content.\",\n              customUI: true,\n              userInfo: {\n                title: \"AudioRecorder\",\n                subtitle: \"The interface allows you to record audio data to a file. It provides functionalities to start, stop, pause, and manage audio recordings, with configurable settings for audio quality, sample rate, format, and more.\",\n              }\n            })\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Changelog/2.4.4/Notification/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"SFTP Client <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SFTP Client \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`SFTPClient` provides access to a remote file system over an SSH connection using the SFTP protocol.\nIt supports directory operations, file management, attribute retrieval, and path resolution.\nFiles can be opened using `openFile()`, which returns an `SFTPFile` instance for reading and writing.\n\nInstances of this class are typically created through:\n\n```ts\nconst sftp = await ssh.openSFTP()\n```\n\n***\n\n## Properties\n\n### `readonly isActive: boolean`\n\nIndicates whether the SFTP connection is still active.\n\n- `true`: The connection is active\n- `false`: The connection is closed or invalid\n\n***\n\n## Methods\n\n***\n\n## `close(): Promise<void>`\n\nCloses the SFTP connection.\n\n#### Returns:\n\n- A promise that resolves when the connection is successfully closed.\n\n#### Example:\n\n```ts\nawait sftp.close()\n```\n\n***\n\n## `readDirectory(atPath: string): Promise<DirectoryEntry[]>`\n\nReads the contents of a directory.\n\n### Parameters:\n\n- **`atPath`**: The path of the directory to read.\n\n### Returns:\n\nAn array of directory entries:\n\n```ts\n{\n  filename: string\n  longname: string\n  attributes: {\n    size?: number\n    userId?: number\n    groupId?: number\n    accessTime?: Date\n    modificationTime?: Date\n    permissions?: number\n  }\n}[]\n```\n\n### Example:\n\n```ts\nconst items = await sftp.readDirectory(\"/var/log\")\n```\n\n***\n\n## `createDirectory(atPath: string): Promise<void>`\n\nCreates a directory at the specified path.\n\n### Parameters:\n\n- `atPath`: The path where the directory should be created.\n\n### Returns:\n\nA promise that resolves when the directory is created.\n\n### Example:\n\n```ts\nawait sftp.createDirectory(\"/home/user/new-folder\")\n```\n\n***\n\n## `removeDirectory(atPath: string): Promise<void>`\n\nRemoves a directory. The directory must be empty.\n\n### Parameters:\n\n- `atPath`: The directory path to remove.\n\n### Example:\n\n```ts\nawait sftp.removeDirectory(\"/home/user/empty-dir\")\n```\n\n***\n\n## `rename(oldPath: string, newPath: string): Promise<void>`\n\nRenames or moves a file or directory.\n\n### Parameters:\n\n- `oldPath`: The current path.\n- `newPath`: The new path.\n\n### Example:\n\n```ts\nawait sftp.rename(\"/home/user/a.txt\", \"/home/user/b.txt\")\n```\n\n***\n\n## `getAttributes(atPath: string): Promise<FileAttributes>`\n\nRetrieves file or directory metadata.\n\n### Returns:\n\n```ts\n{\n  size?: number\n  userId?: number\n  groupId?: number\n  accessTime?: Date\n  modificationTime?: Date\n  permissions?: number\n}\n```\n\n### Example:\n\n```ts\nconst attrs = await sftp.getAttributes(\"/etc/hosts\")\n```\n\n***\n\n## `openFile(filePath: string, flags: SFTPOpenFileFlags | SFTPOpenFileFlags[]): Promise<SFTPFile>`\n\nOpens a file with the specified flags and returns an `SFTPFile` instance.\n\n### Parameters:\n\n- `filePath`: The path of the file to open.\n- `flags`: One or more of the following:\n\n```\n\"read\" | \"write\" | \"append\" | \"create\" | \"truncate\" | \"forceCreate\"\n```\n\n### Returns:\n\n- A promise that resolves to an `SFTPFile` object.\n\n### Example:\n\n```ts\nconst file = await sftp.openFile(\"/home/user/log.txt\", [\"read\"])\nconst data = await file.readAll()\nawait file.close()\n```\n\n***\n\n## `remove(atPath: string): Promise<void>`\n\nRemoves a file.\n\n### Parameters:\n\n- `atPath`: The file path to remove.\n\n### Example:\n\n```ts\nawait sftp.remove(\"/home/user/old.txt\")\n```\n\n***\n\n## `getRealPath(atPath: string): Promise<string>`\n\nResolves symbolic links, `~`, and relative paths to an absolute path.\n\n### Example:\n\n```ts\nconst real = await sftp.getRealPath(\"~/documents\")\n```\n\n***\n\n# Usage Example\n\n```ts\nconst ssh = await SSHClient.connect({\n  host: \"192.168.1.10\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"user\", \"pass\")\n})\n\nconst sftp = await ssh.openSFTP()\n\n// Read a directory\nconst list = await sftp.readDirectory(\"/home/user\")\n\n// Open a file and read contents\nconst file = await sftp.openFile(\"/home/user/info.txt\", \"read\")\nconst data = await file.readAll()\nawait file.close()\n\n// Create a directory\nawait sftp.createDirectory(\"/home/user/new-folder\")\n\n// Delete a file\nawait sftp.remove(\"/home/user/temp.txt\")\n\nawait sftp.close()\n```\n","routePath":"/doc/Changelog/2.4.4/SFTP Client","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":558},{"id":"readonly-isactive-boolean","text":"`readonly isActive: boolean`","depth":3,"charIndex":573},{"id":"methods","text":"Methods","depth":2,"charIndex":751},{"id":"close-promisevoid","text":"`close(): Promise<void>`","depth":2,"charIndex":768},{"id":"returns","text":"Returns:","depth":4,"charIndex":826},{"id":"example","text":"Example:","depth":4,"charIndex":912},{"id":"readdirectoryatpath-string-promisedirectoryentry","text":"`readDirectory(atPath: string): Promise<DirectoryEntry[]>`","depth":2,"charIndex":962},{"id":"parameters","text":"Parameters:","depth":3,"charIndex":1061},{"id":"returns-1","text":"Returns:","depth":3,"charIndex":1130},{"id":"example-1","text":"Example:","depth":3,"charIndex":1385},{"id":"createdirectoryatpath-string-promisevoid","text":"`createDirectory(atPath: string): Promise<void>`","depth":2,"charIndex":1466},{"id":"parameters-1","text":"Parameters:","depth":3,"charIndex":1563},{"id":"returns-2","text":"Returns:","depth":3,"charIndex":1641},{"id":"example-2","text":"Example:","depth":3,"charIndex":1711},{"id":"removedirectoryatpath-string-promisevoid","text":"`removeDirectory(atPath: string): Promise<void>`","depth":2,"charIndex":1793},{"id":"parameters-2","text":"Parameters:","depth":3,"charIndex":1897},{"id":"example-3","text":"Example:","depth":3,"charIndex":1957},{"id":"renameoldpath-string-newpath-string-promisevoid","text":"`rename(oldPath: string, newPath: string): Promise<void>`","depth":2,"charIndex":2038},{"id":"parameters-3","text":"Parameters:","depth":3,"charIndex":2139},{"id":"example-4","text":"Example:","depth":3,"charIndex":2215},{"id":"getattributesatpath-string-promisefileattributes","text":"`getAttributes(atPath: string): Promise<FileAttributes>`","depth":2,"charIndex":2303},{"id":"returns-3","text":"Returns:","depth":3,"charIndex":2403},{"id":"example-5","text":"Example:","depth":3,"charIndex":2554},{"id":"openfilefilepath-string-flags-sftpopenfileflags--sftpopenfileflags-promisesftpfile","text":"`openFile(filePath: string, flags: SFTPOpenFileFlags | SFTPOpenFileFlags[]): Promise<SFTPFile>`","depth":2,"charIndex":2637},{"id":"parameters-4","text":"Parameters:","depth":3,"charIndex":2812},{"id":"returns-4","text":"Returns:","depth":3,"charIndex":2992},{"id":"example-6","text":"Example:","depth":3,"charIndex":3058},{"id":"removeatpath-string-promisevoid","text":"`remove(atPath: string): Promise<void>`","depth":2,"charIndex":3206},{"id":"parameters-5","text":"Parameters:","depth":3,"charIndex":3267},{"id":"example-7","text":"Example:","depth":3,"charIndex":3322},{"id":"getrealpathatpath-string-promisestring","text":"`getRealPath(atPath: string): Promise<string>`","depth":2,"charIndex":3392},{"id":"example-8","text":"Example:","depth":3,"charIndex":3514}],"frontmatter":{},"version":"","description":"SFTPClient provides access to a remote file system over an SSH connection using the SFTP protocol.\nIt supports directory operations, file management, attribute retrieval, and path resolution.\nFiles can be opened using openFile(), which returns an SFTPFile instance for reading and writing. Instances of this class are typically created through:"},{"title":"SFTP File <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SFTP File \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`SFTPFile` represents an opened remote file accessed through an SFTP session.\nIt provides low-level operations such as reading, writing, retrieving attributes, and closing the file.\n\nInstances of this class are typically obtained through:\n\n```ts\nconst file = await sftp.openFile(path, flags)\n```\n\n***\n\n## Properties\n\n***\n\n### `readonly isActive: boolean`\n\nIndicates whether the file handle is still open.\n\n- `true`: The file is open and can be used\n- `false`: The file has been closed or is no longer valid\n\n***\n\n## Methods\n\n***\n\n## `readAttributes(): Promise<FileAttributes>`\n\nReads metadata attributes of the file.\n\n### Returns:\n\nAn object containing file attributes:\n\n```ts\n{\n  size?: number\n  userId?: number\n  groupId?: number\n  accessTime?: Date\n  modificationTime?: Date\n  permissions?: number\n}\n```\n\n### Example:\n\n```ts\nconst attrs = await file.readAttributes()\nconsole.log(attrs.size)\n```\n\n***\n\n## `read(options?: { from?: number, length?: number }): Promise<Data>`\n\nReads data from the file with optional offset and length.\n\n### Parameters:\n\n- `from?`: The byte offset to start reading from. Defaults to `0`.\n- `length?`: The number of bytes to read. Defaults to reading until the end of the file.\n\n### Returns:\n\n- A `Promise<Data>` containing the read bytes.\n\n### Example:\n\n```ts\nconst data = await file.read({ from: 100, length: 50 })\n```\n\n***\n\n## `readAll(): Promise<Data>`\n\nReads the entire contents of the file.\n\n### Returns:\n\n- A `Promise<Data>` containing all file data.\n\n### Example:\n\n```ts\nconst data = await file.readAll()\n```\n\n***\n\n## `write(data: Data, at?: number): Promise<void>`\n\nWrites data to the file.\n\n### Parameters:\n\n- `data`: The binary data to write.\n- `at?`: The byte offset at which to start writing.\n\n  - If omitted, behavior depends on the flags used to open the file:\n\n    - `\"append\"` will write at the end of the file.\n    - `\"write\"` will write from offset 0 unless the implementation maintains a current offset.\n\n### Returns:\n\n- A promise that resolves when the write completes.\n\n### Example:\n\n```ts\nawait file.write(Data.fromRawString(\"Hello world\"))\n```\n\n***\n\n## `close(): Promise<void>`\n\nCloses the file handle.\nAfter closing, `isActive` becomes `false`, and no further reads or writes are allowed.\n\n### Example:\n\n```ts\nawait file.close()\n```\n\n***\n\n## Usage Example\n\n```ts\n// Open file in read mode\nconst file = await sftp.openFile(\"/home/user/info.txt\", [\"read\"])\n\n// Get file attributes\nconst attrs = await file.readAttributes()\n\n// Read the entire file\nconst allData = await file.readAll()\n\n// Read part of the file\nconst partialData = await file.read({ from: 50, length: 100 })\n\n// Close the file\nawait file.close()\n```\n","routePath":"/doc/Changelog/2.4.4/SFTP File","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":455},{"id":"readonly-isactive-boolean","text":"`readonly isActive: boolean`","depth":3,"charIndex":475},{"id":"methods","text":"Methods","depth":2,"charIndex":666},{"id":"readattributes-promisefileattributes","text":"`readAttributes(): Promise<FileAttributes>`","depth":2,"charIndex":683},{"id":"returns","text":"Returns:","depth":3,"charIndex":771},{"id":"example","text":"Example:","depth":3,"charIndex":961},{"id":"readoptions--from-number-length-number--promisedata","text":"`read(options?: { from?: number, length?: number }): Promise<Data>`","depth":2,"charIndex":1057},{"id":"parameters","text":"Parameters:","depth":3,"charIndex":1188},{"id":"returns-1","text":"Returns:","depth":3,"charIndex":1362},{"id":"example-1","text":"Example:","depth":3,"charIndex":1424},{"id":"readall-promisedata","text":"`readAll(): Promise<Data>`","depth":2,"charIndex":1510},{"id":"returns-2","text":"Returns:","depth":3,"charIndex":1581},{"id":"example-2","text":"Example:","depth":3,"charIndex":1642},{"id":"writedata-data-at-number-promisevoid","text":"`write(data: Data, at?: number): Promise<void>`","depth":2,"charIndex":1706},{"id":"parameters-1","text":"Parameters:","depth":3,"charIndex":1784},{"id":"returns-3","text":"Returns:","depth":3,"charIndex":2108},{"id":"example-3","text":"Example:","depth":3,"charIndex":2175},{"id":"close-promisevoid","text":"`close(): Promise<void>`","depth":2,"charIndex":2257},{"id":"example-4","text":"Example:","depth":3,"charIndex":2398},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":2447}],"frontmatter":{},"version":"","description":"SFTPFile represents an opened remote file accessed through an SFTP session.\nIt provides low-level operations such as reading, writing, retrieving attributes, and closing the file. Instances of this class are typically obtained through:"},{"title":"SnippetIntent <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SnippetIntent \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nSnippetIntent is a special kind of AppIntent whose purpose is to render **interactive Snippet UI cards** inside the Shortcuts app (iOS 26+).\n\nKey characteristics:\n\n1. Must be registered in `app_intents.tsx`\n2. Must specify `protocol: AppIntentProtocol.SnippetIntent`\n3. `perform()` **must return a VirtualNode (TSX UI)**\n4. Must be returned via `Intent.snippetIntent()`\n5. Must be invoked from the Shortcuts action **“Show Snippet Intent”**\n6. SnippetIntent is ideal for building interactive, step-based UI inside a Shortcut\n\nIt is not a data-returning Intent; it is exclusively for UI rendering in Shortcuts.\n\n***\n\n# 2. System Requirements\n\n**SnippetIntent requires iOS 26 or later.**\n\nOn iOS versions earlier than 26:\n\n- `Intent.snippetIntent()` is not available\n- `Intent.requestConfirmation()` cannot be used\n- The Shortcuts action “Show Snippet Intent” does not exist\n- SnippetIntent-type AppIntents cannot be invoked by Shortcuts\n\n***\n\n# 3. Registering a SnippetIntent (app\\_intents.tsx)\n\nExample:\n\n```tsx\nexport const PickColorIntent = AppIntentManager.register<void>({\n  name: \"PickColorIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async () => {\n    return <PickColorView />\n  }\n})\n```\n\nAnother SnippetIntent:\n\n```tsx\nexport const ShowResultIntent = AppIntentManager.register({\n  name: \"ShowResultIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async ({ content }: { content: string }) => {\n    return <ResultView content={content} />\n  }\n})\n```\n\nRequirements:\n\n- `protocol` **must** be `AppIntentProtocol.SnippetIntent`\n- `perform()` **must** return a TSX UI (VirtualNode)\n- SnippetIntent cannot return non-UI types such as text, numbers, JSON, or file paths\n\n***\n\n# 4. Wrapping SnippetIntent Return Values — `Intent.snippetIntent`\n\nA SnippetIntent cannot be passed directly to `Script.exit()`.\nIt must be wrapped in a `IntentSnippetIntentValue`.\n\n```tsx\nconst snippetValue = Intent.snippetIntent(\n  ShowResultIntent({ content: \"Example Text\" })\n)\n\nScript.exit(snippetValue)\n```\n\n### Type Definition\n\n```ts\ntype SnippetIntentValue = {\n  value?: IntentAttributedTextValue | IntentFileURLValue | IntentJsonValue | IntentTextValue | IntentURLValue | IntentFileValue | null\n  snippetIntent: AppIntent<any, VirtualNode, AppIntentProtocol.SnippetIntent>\n}\n\ndeclare class IntentSnippetIntentValue extends IntentValue<\n  'SnippetIntent',\n  SnippetIntentValue\n> {\n  value: SnippetIntentValue\n  type: 'SnippetIntent'\n}\n```\n\nThis wrapper makes the return value compatible with the Shortcuts “Show Snippet Intent” action.\n\n***\n\n# 5. Snippet Confirmation UI — `Intent.requestConfirmation`\n\niOS 26 Snippet Framework provides built-in confirmation UI driven by SnippetIntent.\n\n### API\n\n```ts\nIntent.requestConfirmation(\n  actionName: ConfirmationActionName,\n  intent: AppIntent<any, VirtualNode, AppIntentProtocol.SnippetIntent>,\n  options?: {\n    dialog?: Dialog;\n    showDialogAsPrompt?: boolean;\n  }\n): Promise<void>\n```\n\n### ConfirmationActionName\n\nA predefined list of semantic action names used by system UI:\n\n```\n\"add\" | \"addData\" | \"book\" | \"buy\" | \"call\" | \"checkIn\" |\n\"continue\" | \"create\" | \"do\" | \"download\" | \"filter\" |\n\"find\" | \"get\" | \"go\" | \"log\" | \"open\" | \"order\" |\n\"pay\" | \"play\" | \"playSound\" | \"post\" | \"request\" |\n\"run\" | \"search\" | \"send\" | \"set\" | \"share\" |\n\"start\" | \"startNavigation\" | \"toggle\" | \"turnOff\" |\n\"turnOn\" | \"view\"\n```\n\n### Example\n\n```tsx\nawait Intent.requestConfirmation(\n  \"set\",\n  PickColorIntent()\n)\n```\n\nExecution behavior:\n\n- Displays a Snippet UI for confirmation\n- If the user confirms → Promise resolves and script continues\n- If the user cancels → execution stops (system-driven behavior)\n\n***\n\n# 6. The “Show Snippet Intent” Action in Shortcuts (iOS 26+)\n\niOS 26 adds a new Shortcuts action:\n\n**Show Snippet Intent**\n\nThis action is the only correct way to display SnippetIntent UI.\n\n### Comparison with Other Scripting Actions\n\n| Shortcuts Action              | UI Shown                       | Supports SnippetIntent | Usage               |\n| ----------------------------- | ------------------------------ | ---------------------- | ------------------- |\n| Run Script                    | None                           | No                     | Background logic    |\n| Run Script in App             | Fullscreen UI inside Scripting | No                     | Rich app-level UI   |\n| Show Snippet Intent (iOS 26+) | Snippet card UI                | Yes                    | SnippetIntent flows |\n\n### Usage\n\n1. Add “Show Snippet Intent” in Shortcuts\n2. Select a Scripting script project\n3. The script must return `Intent.snippetIntent(...)`\n4. Shortcuts renders the UI in a Snippet card\n\n***\n\n# 7. IntentMemoryStorage — Cross-Intent State Store\n\n## Why It Exists\n\nEvery AppIntent execution runs in an isolated environment:\n\n- After an AppIntent `perform()` completes → its execution context is destroyed\n- After a script calls `Script.exit()` → the JS context is destroyed\n\nThis means local variables **cannot persist between AppIntent calls**.\n\nSnippet flows commonly involve:\nPickColor → SetColor → ShowResult\n\nTherefore a cross-Intent state mechanism is required.\n\n***\n\n## IntentMemoryStorage API\n\n```ts\nnamespace IntentMemoryStorage {\n  function get<T>(key: string): T | null\n  function set(key: string, value: any): void\n  function remove(key: string): void\n  function contains(key: string): boolean\n  function clear(): void\n  function keys(): string[]\n}\n```\n\n### Purpose\n\n- Store small pieces of shared data across multiple AppIntents\n- Works during the entire Shortcut flow\n- Ideal for selections, temporary configuration, or intent-to-intent handoff\n\n### Example\n\n```ts\nIntentMemoryStorage.set(\"color\", \"systemBlue\")\n\nconst color = IntentMemoryStorage.get<Color>(\"color\")\n```\n\n### Guidelines\n\nNot recommended for large data.\nFor large data:\n\n- Use `Storage` (persistent key-value store)\n- Or save files via `FileManager` in `appGroupDocumentsDirectory`\n\nIntentMemoryStorage should be treated as **temporary, lightweight state**.\n\n***\n\n# 8. Full Example Combining All Features (iOS 26+)\n\n## app\\_intents.tsx\n\n```tsx\nexport const SetColorIntent = AppIntentManager.register({\n  name: \"SetColorIntent\",\n  protocol: AppIntentProtocol.AppIntent,\n  perform: async (color: Color) => {\n    IntentMemoryStorage.set(\"color\", color)\n  }\n})\n\nexport const PickColorIntent = AppIntentManager.register<void>({\n  name: \"PickColorIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async () => {\n    return <PickColorView />\n  }\n})\n\nexport const ShowResultIntent = AppIntentManager.register({\n  name: \"ShowResultIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async ({ content }: { content: string }) => {\n    const color = IntentMemoryStorage.get<Color>(\"color\") ?? \"systemBlue\"\n    return <ResultView content={content} color={color} />\n  }\n})\n```\n\n## intent.tsx\n\n```tsx\nasync function runIntent() {\n\n  // 1. Ask the user to confirm setting the color via Snippet\n  await Intent.requestConfirmation(\n    \"set\",\n    PickColorIntent()\n  )\n\n  // 2. Read Shortcuts input\n  const textContent =\n    Intent.shortcutParameter?.type === \"text\"\n      ? Intent.shortcutParameter.value\n      : \"No text parameter from Shortcuts\"\n\n  // 3. Create final SnippetIntent UI\n  const snippetIntentValue = Intent.snippetIntent({\n    snippetIntent: ShowResultIntent({ content: textContent })\n  })\n\n  Script.exit(snippetIntentValue)\n}\n\nrunIntent()\n```\n\n## Shortcuts Flow\n\n1. User provides text\n2. “Show Snippet Intent” runs the script\n3. Script displays PickColorIntent confirmation UI via requestConfirmation\n4. After confirmation, displays ShowResultIntent Snippet UI\n5. Uses IntentMemoryStorage to persist the selected color\n\n***\n\n# 9. Summary\n\nThis document introduces all **new** Scripting features added for iOS 26+:\n\n1. **SnippetIntent**\n\n   - Registered using `AppIntentManager`\n   - Returns TSX UI\n   - Requires iOS 26+\n\n2. **Intent.snippetIntent**\n\n   - Wraps a SnippetIntent for Script.exit\n\n3. **Intent.requestConfirmation**\n\n   - Presents a confirmation Snippet UI\n   - Requires SnippetIntent\n\n4. **“Show Snippet Intent” action in Shortcuts**\n\n   - Required to display SnippetIntent UI\n\n5. **IntentMemoryStorage**\n\n   - Lightweight cross-AppIntent storage\n   - Not suitable for large binary/content data\n   - Complements multi-step Snippet flows\n","routePath":"/doc/Changelog/2.4.4/SnippetIntent","lang":"en","toc":[{"id":"type-definition","text":"Type Definition","depth":3,"charIndex":2183},{"id":"api","text":"API","depth":3,"charIndex":2865},{"id":"confirmationactionname","text":"ConfirmationActionName","depth":3,"charIndex":3113},{"id":"example","text":"Example","depth":3,"charIndex":3546},{"id":"comparison-with-other-scripting-actions","text":"Comparison with Other Scripting Actions","depth":3,"charIndex":4022},{"id":"usage","text":"Usage","depth":3,"charIndex":4638},{"id":"why-it-exists","text":"Why It Exists","depth":2,"charIndex":4887},{"id":"intentmemorystorage-api","text":"IntentMemoryStorage API","depth":2,"charIndex":5314},{"id":"purpose","text":"Purpose","depth":3,"charIndex":5606},{"id":"example-1","text":"Example","depth":3,"charIndex":5800},{"id":"guidelines","text":"Guidelines","depth":3,"charIndex":5926},{"id":"app_intentstsx","text":"app_intents.tsx","depth":2,"charIndex":-1},{"id":"intenttsx","text":"intent.tsx","depth":2,"charIndex":7011},{"id":"shortcuts-flow","text":"Shortcuts Flow","depth":2,"charIndex":7591}],"frontmatter":{},"version":"","description":"SnippetIntent is a special kind of AppIntent whose purpose is to render interactive Snippet UI cards inside the Shortcuts app (iOS 26+). Key characteristics: Must be registered in app_intents.tsxMust specify protocol: AppIntentProtocol.SnippetIntentperform() must return a VirtualNode (TSX UI)Must be returned via Intent.snippetIntent()Must be invoked from the Shortcuts action “Show Snippet Intent”SnippetIntent is ideal for building interactive, step-based UI inside a Shortcut It is not a data-returning Intent; it is exclusively for UI rendering in Shortcuts. SnippetIntent requires iOS 26 or later. On iOS versions earlier than 26: Intent.snippetIntent() is not availableIntent.requestConfirmation() cannot be usedThe Shortcuts action “Show Snippet Intent” does not existSnippetIntent-type AppIntents cannot be invoked by Shortcuts Example: Another SnippetIntent: Requirements: protocol must be AppIntentProtocol.SnippetIntentperform() must return a TSX UI (VirtualNode)SnippetIntent cannot return non-UI types such as text, numbers, JSON, or file paths A SnippetIntent cannot be passed directly to Script.exit().\nIt must be wrapped in a IntentSnippetIntentValue. Type Definition This wrapper makes the return value compatible with the Shortcuts “Show Snippet Intent” action. iOS 26 Snippet Framework provides built-in confirmation UI driven by SnippetIntent. API ConfirmationActionName A predefined list of semantic action names used by system UI: Example Execution behavior: Displays a Snippet UI for confirmationIf the user confirms → Promise resolves and script continuesIf the user cancels → execution stops (system-driven behavior) iOS 26 adds a new Shortcuts action: Show Snippet Intent This action is the only correct way to display SnippetIntent UI. Comparison with Other Scripting Actions Usage Add “Show Snippet Intent” in ShortcutsSelect a Scripting script projectThe script must return Intent.snippetIntent(...)Shortcuts renders the UI in a Snippet card"},{"title":"TabView","content":"Scripting provides a modern Tab system aligned with iOS 18+:\n\n- `TabView` — container that manages multiple tabs and switching between them\n- `Tab` — a single tab and its associated content\n- `TabSection` — a way to group tabs into sections, each with its own configuration and header\n\nCombined with TabView-level options and `TabViewCustomization`, this enables rich tab layouts, including sidebar representations, customization, and persistence.\n\nThis document focuses on:\n\n- How to structure tab content using `TabView`, `Tab`, and `TabSection`\n- How to configure tab bar and sidebar behaviors\n- How to use `TabViewCustomization` to persist and restore user customizations\n\n***\n\n## 1. Basic Usage: TabView + Tab\n\nIn the simplest case, `TabView` hosts multiple `Tab` elements. Each `Tab` defines:\n\n- A title and system image for the tab item\n- A value used for selection\n- An optional role (for example `search`)\n- The actual view content\n\n```tsx\n\n\nfunction RootView() {\n  const selection = useObservable<number>(0)\n\n  return (\n    <TabView selection={selection}>\n      <Tab\n        title=\"Home\"\n        systemImage=\"house.fill\"\n        value={0}\n      >\n        <HomeView />\n      </Tab>\n\n      <Tab\n        title=\"Search\"\n        systemImage=\"magnifyingglass\"\n        value={1}\n        role=\"search\"\n      >\n        <SearchView />\n      </Tab>\n\n      <Tab\n        title=\"Settings\"\n        systemImage=\"gearshape.fill\"\n        value={2}\n      >\n        <SettingsView />\n      </Tab>\n    </TabView>\n  )\n}\n```\n\nKey points:\n\n- `TabView selection={selection}` binds the **current tab** to an observable value.\n- Each `Tab`’s `value` must match the observable’s type (`number` or `string`).\n- Tabs with `role=\"search\"` integrate with `tabViewSearchActivation` behavior (see below).\n\n***\n\n## 2. Grouping Tabs with TabSection\n\nWhen you have many tabs, or when you want a sidebar-like structure, use `TabSection` to group related tabs.\n\nThe structure becomes:\n\n```text\nTabView\n ├─ TabSection\n │   ├─ Tab\n │   ├─ Tab\n │   └─ ...\n ├─ TabSection\n │   ├─ Tab\n │   └─ ...\n```\n\n### 2.1 Using `title` as a section header\n\n```tsx\nfunction MailRootView() {\n  const selection = useObservable<string>('inbox')\n\n  return (\n    <TabView selection={selection}>\n      <TabSection title=\"Mailboxes\">\n        <Tab\n          title=\"Inbox\"\n          systemImage=\"tray.full.fill\"\n          value=\"inbox\"\n        >\n          <InboxView />\n        </Tab>\n\n        <Tab\n          title=\"Sent\"\n          systemImage=\"paperplane.fill\"\n          value=\"sent\"\n        >\n          <SentView />\n        </Tab>\n      </TabSection>\n\n      <TabSection title=\"Labels\">\n        <Tab\n          title=\"Important\"\n          systemImage=\"star.fill\"\n          value=\"important\"\n        >\n          <ImportantView />\n        </Tab>\n      </TabSection>\n    </TabView>\n  )\n}\n```\n\n### 2.2 Using `header` for a custom section header\n\nIf you need a richer header (icon + text + description, etc.), use `header` instead of `title`:\n\n```tsx\n<TabSection\n  header={\n    <HStack spacing={8}>\n      <Image systemName=\"folder.fill\" />\n      <VStack alignment=\"leading\">\n        <Text fontWeight=\"bold\">Projects</Text>\n        <Text fontSize={12} foregroundColor=\"secondary\">\n          Recently opened projects\n        </Text>\n      </VStack>\n    </HStack>\n  }\n>\n  <Tab title=\"Project A\" systemImage=\"doc.fill\" value=\"projectA\">\n    <ProjectAView />\n  </Tab>\n\n  <Tab title=\"Project B\" systemImage=\"doc.fill\" value=\"projectB\">\n    <ProjectBView />\n  </Tab>\n</TabSection>\n```\n\n`title` and `header` are mutually exclusive: use one or the other per section.\n\n***\n\n## 3. Section-Level Configuration: Layout, Actions, Drag & Drop\n\n`TabSection` can control how a section is presented and how it behaves.\n\n### 3.1 `tabPlacement`\n\nControls where and how the section’s tabs appear. Common values:\n\n- `automatic` — let the system decide based on environment.\n- `pinned` — pins tabs so they remain visible in the bar.\n- `sidebarOnly` — show tabs only in the sidebar representation.\n\nExample: a section that only appears in the sidebar:\n\n```tsx\n<TabSection\n  title=\"Tags\"\n  tabPlacement=\"sidebarOnly\"\n>\n  <Tab title=\"Important\" systemImage=\"star.fill\" value=\"important\">\n    <ImportantView />\n  </Tab>\n</TabSection>\n```\n\n### 3.2 `sectionActions`\n\nProvides extra actions associated with a section, such as “Add” or “More”.\n\n```tsx\n<TabSection\n  title=\"Lists\"\n  sectionActions={\n    <Button\n      title=\"Add\"\n      systemImage=\"plus\"\n      action={addNewList}\n    />\n  }\n>\n  <Tab title=\"Today\" systemImage=\"sun.max.fill\" value=\"today\">\n    <TodayView />\n  </Tab>\n</TabSection>\n```\n\n### 3.3 Visibility and customization behavior\n\nAt the section level you can configure:\n\n- Default visibility in different placements (tab bar, sidebar)\n- Customization behavior (whether users can reorder or adjust the section)\n\nTypical use-case: a section that users can reorder in a Tab layout editor:\n\n```tsx\n<TabSection\n  title=\"Files\"\n  customizationID=\"files-section\"\n  customizationBehavior=\"reorderable\"\n>\n  <Tab title=\"Recent\" systemImage=\"clock.fill\" value=\"recent\">\n    <RecentFilesView />\n  </Tab>\n</TabSection>\n```\n\n### 3.4 Drag & drop integration\n\nBoth `TabSection` and `Tab` can participate in drag & drop via:\n\n- `draggable` — logical drag identifier\n- `dropDestination` — handler for dropped items\n\nExample:\n\n```tsx\n<TabSection\n  title=\"Files\"\n  draggable=\"files-section\"\n  dropDestination={items => handleDroppedItems(items)}\n>\n  <Tab title=\"Recent\" systemImage=\"clock.fill\" value=\"recent\">\n    <RecentFilesView />\n  </Tab>\n</TabSection>\n```\n\n***\n\n## 4. TabView-Level Configuration\n\nOn the TabView (or the view owning the TabView) you can configure global behavior such as:\n\n- Tab bar minimization\n- Bottom accessories\n- Search activation behavior\n- Sidebar header/footer/bottom bar\n- Customization state (`tabViewCustomization`)\n\n### 4.1 `tabBarMinimizeBehavior` (iOS 26.0+)\n\nControls how the tab bar minimizes in response to scrolling:\n\n- `automatic`\n- `never`\n- `onScrollDown`\n- `onScrollUp`\n\n```tsx\n<TabView\n  selection={selection}\n  tabBarMinimizeBehavior=\"onScrollDown\"\n>\n  {/* sections + tabs */}\n</TabView>\n```\n\n### 4.2 `tabViewBottomAccessory` (iOS 26.0+)\n\nPlaces a view at the bottom of the TabView—below the tab bar or tab area.\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewBottomAccessory={\n    <HStack spacing={8}>\n      <Text fontSize={12}>Swipe left or right to switch tabs</Text>\n      <Spacer />\n      <Button title=\"Got it\" action={dismissHint} />\n    </HStack>\n  }\n>\n  {/* sections + tabs */}\n</TabView>\n```\n\n### 4.3 `tabViewSearchActivation` (iOS 26.0+)\n\nConfigures how search is activated for tabs with `role=\"search\"`:\n\n- `automatic`\n- `searchTabSelection` — activate search when the search tab is selected\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewSearchActivation=\"searchTabSelection\"\n>\n  <Tab title=\"Home\" systemImage=\"house.fill\" value=\"home\">\n    <HomeView />\n  </Tab>\n\n  <Tab\n    title=\"Search\"\n    systemImage=\"magnifyingglass\"\n    value=\"search\"\n    role=\"search\"\n  >\n    <SearchView />\n  </Tab>\n</TabView>\n```\n\n### 4.4 Sidebar-specific views (iOS 18.0+)\n\nFor sidebar-style TabView, you can add:\n\n- `tabViewSidebarHeader` — top area (user info, app logo, etc.)\n- `tabViewSidebarFooter` — bottom area (settings, logout)\n- `tabViewSidebarBottomBar` — bar between main content and bottom edge\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewSidebarHeader={\n    <VStack alignment=\"leading\" spacing={4}>\n      <Image systemName=\"person.circle.fill\" fontSize={32} />\n      <Text fontWeight=\"bold\">User Name</Text>\n      <Text fontSize={12} foregroundColor=\"secondary\">\n        Welcome back\n      </Text>\n    </VStack>\n  }\n  tabViewSidebarFooter={\n    <Button title=\"Settings\" systemImage=\"gearshape\" action={openSettings} />\n  }\n  tabViewSidebarBottomBar={\n    <Button title=\"Upgrade to Pro\" systemImage=\"star.fill\" action={upgrade} />\n  }\n>\n  {/* sections + tabs */}\n</TabView>\n```\n\n***\n\n## 5. TabViewCustomization: Persisting Layout and Visibility\n\n`TabViewCustomization` is the core object that represents the customization state of a TabView. It can:\n\n- Track section order\n- Track tab order within each section\n- Track tab visibility (tab bar vs sidebar)\n- Reset section order or visibility\n- Be serialized to / from `Data` for persistence\n\nThe typical pattern is:\n\n1. Initialize `TabViewCustomization` from storage (if present), otherwise create a new instance.\n2. Observe changes to it and save serialized data back to storage.\n3. Use it to query and modify section and tab customizations.\n4. Pass it into the TabView via `tabViewCustomization`.\n\n### 5.1 Initializing and persisting TabViewCustomization\n\nBelow is the **correct example** using `useObservable` and `Storage`:\n\n```tsx\nconst customization = useObservable<TabViewCustomization>(() => {\n  const data = Storage.get('tab_customization')\n  if (data) {\n    return TabViewCustomization.fromData(data) ?? new TabViewCustomization()\n  }\n  return new TabViewCustomization()\n})\n\nuseEffect(() => {\n  const listener = (newValue: TabViewCustomization) => {\n    const data = newValue.toData()\n    if (data) {\n      Storage.set('tab_customization', data)\n    }\n  }\n  customization.subscribe(listener)\n  return () => {\n    customization.unsubscribe(listener)\n  }\n}, [])\n```\n\nExplanation:\n\n- The initializer:\n\n  - Reads raw `Data` from `Storage` using the key `tab_customization`.\n  - Uses `TabViewCustomization.fromData(data)` to recreate a customization object.\n  - Falls back to `new TabViewCustomization()` if the data is invalid or missing.\n- The `useEffect`:\n\n  - Subscribes to changes on the observable.\n  - Every time the `TabViewCustomization` changes, `toData()` is called and persisted.\n  - Cleans up the subscription on unmount.\n\nThis ensures the layout is restored on launch and any user changes are saved automatically.\n\n### 5.2 Using TabViewCustomization with TabView\n\nYou typically pass the observable itself into the TabView:\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewCustomization={customization}\n>\n  {/* TabSection + Tab structure */}\n</TabView>\n```\n\nInternally, the Tab system updates the `TabViewCustomization` object as the user edits the layout, reorders sections, hides tabs, and so on. The observable subscription persists these updates.\n\n### 5.3 Working with sections: getSection and section order\n\nYou can query a section by its `customizationID`:\n\n```tsx\nconst filesSection = customization.value.getSection('files-section')\n```\n\nA section customization can:\n\n- Expose `tabOrder`: the array of tab IDs in this section (or `null` if not customized).\n- Provide `resetTabOrder()`: to restore the original system-defined order of tabs in this section.\n\nExample:\n\n```tsx\nfunction resetFilesSectionOrder() {\n  const section = customization.value.getSection('files-section')\n  section?.resetTabOrder()\n}\n```\n\n### 5.4 Working with tabs: getTab and visibility\n\nYou can query a tab by its `customizationID`:\n\n```tsx\nconst importantTab = customization.value.getTab('important-tab')\n```\n\nA tab customization exposes:\n\n- `tabBarVisibility` — read-only current visibility in the tab bar.\n- `sidebarVisibility` — read/write visibility in the sidebar representation.\n\nExample: hiding a tab from the sidebar only:\n\n```tsx\nconst importantTab = customization.value.getTab('important-tab')\nif (importantTab) {\n  importantTab.sidebarVisibility = 'hidden'\n}\n```\n\nThis allows you to:\n\n- Implement “show/hide in sidebar” toggles.\n- Sync visibility with user preferences or other settings.\n\n### 5.5 Global resets: section order and visibility\n\nTwo convenience methods reset parts of the customization:\n\n```tsx\ncustomization.value.resetSectionOrder()\ncustomization.value.resetVisibility()\n```\n\nTypical usage: a “Reset layout” button.\n\n```tsx\n<Button\n  title=\"Restore Default Layout\"\n  action={() => {\n    customization.value.resetSectionOrder()\n    customization.value.resetVisibility()\n  }}\n/>\n```\n\nThis restores both:\n\n- Section ordering\n- Tab visibility (in tab bar and sidebar)\n\nto their original default state.\n\n***\n\n## 6. Relationship with `tabItem`-based API\n\nEarlier examples in the project may use a `tabItem` view modifier to configure tab labels. That approach is documented elsewhere and is suitable for simple Tab views.\n\nHowever, for:\n\n- Grouped tabs (`TabSection`)\n- Sidebar representations\n- Tab reordering and visibility customization (`TabViewCustomization`)\n- Per-section actions and layouts\n\nyou should use the `TabView + Tab + TabSection + TabViewCustomization` structure described here.\n\nIt provides a clearer model, matches modern iOS Tab APIs, and is designed to work seamlessly with customization and persistence.\n","routePath":"/doc/Changelog/2.4.4/TabView","lang":"en","toc":[{"id":"1-basic-usage-tabview--tab","text":"1. Basic Usage: TabView + Tab","depth":2,"charIndex":682},{"id":"2-grouping-tabs-with-tabsection","text":"2. Grouping Tabs with TabSection","depth":2,"charIndex":1786},{"id":"21-using-title-as-a-section-header","text":"2.1 Using `title` as a section header","depth":3,"charIndex":2067},{"id":"22-using-header-for-a-custom-section-header","text":"2.2 Using `header` for a custom section header","depth":3,"charIndex":2833},{"id":"3-section-level-configuration-layout-actions-drag--drop","text":"3. Section-Level Configuration: Layout, Actions, Drag & Drop","depth":2,"charIndex":3602},{"id":"31-tabplacement","text":"3.1 `tabPlacement`","depth":3,"charIndex":3740},{"id":"32-sectionactions","text":"3.2 `sectionActions`","depth":3,"charIndex":4250},{"id":"33-visibility-and-customization-behavior","text":"3.3 Visibility and customization behavior","depth":3,"charIndex":4609},{"id":"34-drag--drop-integration","text":"3.4 Drag & drop integration","depth":3,"charIndex":5137},{"id":"4-tabview-level-configuration","text":"4. TabView-Level Configuration","depth":2,"charIndex":5574},{"id":"41-tabbarminimizebehavior-ios-260","text":"4.1 `tabBarMinimizeBehavior` (iOS 26.0+)","depth":3,"charIndex":5857},{"id":"42-tabviewbottomaccessory-ios-260","text":"4.2 `tabViewBottomAccessory` (iOS 26.0+)","depth":3,"charIndex":6146},{"id":"43-tabviewsearchactivation-ios-260","text":"4.3 `tabViewSearchActivation` (iOS 26.0+)","depth":3,"charIndex":6559},{"id":"44-sidebar-specific-views-ios-180","text":"4.4 Sidebar-specific views (iOS 18.0+)","depth":3,"charIndex":7081},{"id":"5-tabviewcustomization-persisting-layout-and-visibility","text":"5. TabViewCustomization: Persisting Layout and Visibility","depth":2,"charIndex":7954},{"id":"51-initializing-and-persisting-tabviewcustomization","text":"5.1 Initializing and persisting TabViewCustomization","depth":3,"charIndex":8619},{"id":"52-using-tabviewcustomization-with-tabview","text":"5.2 Using TabViewCustomization with TabView","depth":3,"charIndex":9853},{"id":"53-working-with-sections-getsection-and-section-order","text":"5.3 Working with sections: getSection and section order","depth":3,"charIndex":10290},{"id":"54-working-with-tabs-gettab-and-visibility","text":"5.4 Working with tabs: getTab and visibility","depth":3,"charIndex":10855},{"id":"55-global-resets-section-order-and-visibility","text":"5.5 Global resets: section order and visibility","depth":3,"charIndex":11519},{"id":"6-relationship-with-tabitem-based-api","text":"6. Relationship with `tabItem`-based API","depth":2,"charIndex":12049}],"frontmatter":{},"version":"","description":"Scripting provides a modern Tab system aligned with iOS 18+: TabView — container that manages multiple tabs and switching between themTab — a single tab and its associated contentTabSection — a way to group tabs into sections, each with its own configuration and header Combined with TabView-level options and TabViewCustomization, this enables rich tab layouts, including sidebar representations, customization, and persistence. This document focuses on: How to structure tab content using TabView, Tab, and TabSectionHow to configure tab bar and sidebar behaviorsHow to use TabViewCustomization to persist and restore user customizations"},{"title":"Use with Toolbar Component","content":"In Scripting, views can populate their navigation bar or toolbar area using either the original `ToolBarProps` object or the declarative component-based API that mirrors SwiftUI’s toolbar system. This document explains in detail how to use the `Toolbar`, `ToolbarItem`, `ToolbarItemGroup`, `ToolbarSpacer`, and `DefaultToolbarItem` components, including parameters, types, and usage patterns.\n\n***\n\n# Overview\n\nThe `toolbar` property can be used in two ways:\n\n- By passing a `ToolBarProps` object\n- By passing a **VirtualNode**, which **must be a `<Toolbar>` component**\n\nWhen using the component-based API, all toolbar content is declared inside a `<Toolbar>` container, and each item defines its placement explicitly. This provides clearer structure and more precise layout control, similar to SwiftUI.\n\n```tsx\n<List\n  toolbar={\n    <Toolbar>\n      {/* toolbar items here */}\n    </Toolbar>\n  }\n>\n  {/* main content */}\n</List>\n```\n\n***\n\n# Toolbar\n\nThe `<Toolbar>` component serves as a container for toolbar content. It does not define placement itself; instead, `ToolbarItem` and `ToolbarItemGroup` determine where items go.\n\n## Example\n\n```tsx\n<List\n  toolbar={\n    <Toolbar>\n      <ToolbarItem placement=\"topBarLeading\">\n        <Button title=\"Close\" action={dismiss} />\n      </ToolbarItem>\n      <ToolbarItem placement=\"topBarTrailing\">\n        <Button title=\"Done\" action={handleDone} />\n      </ToolbarItem>\n    </Toolbar>\n  }\n>\n  {/* content */}\n</List>\n```\n\n***\n\n# ToolbarItem\n\n`ToolbarItem` represents a single toolbar element placed at a specific position.\n\n## Parameters\n\n| Parameter   | Type                   | Default     | Description                                                                  |\n| ----------- | ---------------------- | ----------- | ---------------------------------------------------------------------------- |\n| `placement` | `ToolbarItemPlacement` | `automatic` | Position of the item, such as `topBarLeading`, `navigation`, `primaryAction` |\n| `children`  | `VirtualNode`          | required    | The item’s content, usually a button or text                                 |\n\n## Example\n\n```tsx\n<Toolbar>\n  <ToolbarItem placement=\"navigation\">\n    <Button title=\"Back\" action={Navigation.useDismiss()} />\n  </ToolbarItem>\n</Toolbar>\n```\n\n***\n\n# ToolbarItemGroup\n\n`ToolbarItemGroup` allows multiple toolbar items to be grouped together in a single placement.\n\n## Parameters\n\n| Parameter   | Type                    | Default     | Description                    |\n| ----------- | ----------------------- | ----------- | ------------------------------ |\n| `placement` | `ToolbarItemPlacement`  | `automatic` | Placement for the entire group |\n| `children`  | multiple `VirtualNode`s | required    | The grouped toolbar items      |\n\n## Example\n\n```tsx\n<Toolbar>\n  <ToolbarItemGroup placement=\"topBarTrailing\">\n    <Button title=\"Refresh\" action={reload} />\n    <Button title=\"More\" action={openMenu} />\n  </ToolbarItemGroup>\n</Toolbar>\n```\n\n***\n\n# ToolbarSpacer\n\n`ToolbarSpacer` inserts empty space in a toolbar. It can be used to fine-tune layout between items.\n\n## Parameters\n\n| Parameter   | Type                    | Default     | Description                                          |\n| ----------- | ----------------------- | ----------- | ---------------------------------------------------- |\n| `sizing`    | `'fixed' \\| 'flexible'` | `flexible`  | Determines whether the spacer expands or stays fixed |\n| `placement` | `ToolbarItemPlacement`  | `automatic` | Placement for the  spacer                            |\n\n### Behavior\n\n- `flexible`: Expands to fill available space.\n- `fixed`: Adds a fixed separation between items.\n\n## Example\n\n```tsx\n<Toolbar>\n  <ToolbarItem placement=\"topBarTrailing\">\n    <Button title=\"Edit\" action={edit} />\n  </ToolbarItem>\n\n  <ToolbarSpacer sizing=\"fixed\" />\n\n  <ToolbarItem placement=\"topBarTrailing\">\n    <Button title=\"Save\" action={save} />\n  </ToolbarItem>\n</Toolbar>\n```\n\n***\n\n# DefaultToolbarItem\n\n`DefaultToolbarItem` inserts system-provided toolbar items, such as the sidebar toggle button or search button.\n\n## Parameters\n\n| Parameter   | Type                                     | Default     | Description                           |\n| ----------- | ---------------------------------------- | ----------- | ------------------------------------- |\n| `kind`      | `\"sidebarToggle\" \\| \"search\" \\| \"title\"` | required    | Specifies which system item to insert |\n| `placement` | `ToolbarItemPlacement`                   | `automatic` | Toolbar placement                     |\n\n## Example\n\n```tsx\n<Toolbar>\n  <DefaultToolbarItem kind=\"search\" placement=\"topBarTrailing\" />\n</Toolbar>\n```\n\n***\n\n# Complete Example\n\n```tsx\n<NavigationStack>\n  <List\n    toolbar={\n      <Toolbar>\n\n        {/* Navigation button */}\n        <ToolbarItem placement=\"navigation\">\n          <Button title=\"Back\" action={Navigation.useDismiss()} />\n        </ToolbarItem>\n\n        {/* Title */}\n        <DefaultToolbarItem kind=\"title\" />\n\n        {/* Trailing group */}\n        <ToolbarItem placement=\"topBarTrailing\">\n          <Button title=\"Edit\" action={edit} />\n        </ToolbarItem>\n        <ToolbarSpacer sizing=\"fixed\" />\n        <ToolbarItem placement=\"topBarTrailing\">\n          <Button title=\"Done\" action={finish} />\n        </ToolbarItem>\n\n        {/* Bottom bar item */}\n        <ToolbarItem placement=\"bottomBar\">\n          <Button title=\"Help\" action={showHelp} />\n        </ToolbarItem>\n\n      </Toolbar>\n    }\n  >\n    {/* content */}\n  </List>\n</NavigationStack>\n```\n\n***\n\n# Relationship with ToolBarProps\n\n| Method                                    | Description                                              |\n| ----------------------------------------- | -------------------------------------------------------- |\n| `toolbar={{ topBarTrailing: <Button/> }}` | Simple and declarative for straightforward scenarios     |\n| `toolbar={<Toolbar>...</Toolbar>}`        | More explicit, structured, and ideal for complex layouts |\n\nBoth approaches remain fully supported. When a `VirtualNode` is passed, it **must be a `<Toolbar>` component** to ensure proper layout interpretation.\n","routePath":"/doc/Changelog/2.4.4/Use with Toolbar Component","lang":"en","toc":[{"id":"example","text":"Example","depth":2,"charIndex":1130},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1572},{"id":"example-1","text":"Example","depth":2,"charIndex":2124},{"id":"parameters-1","text":"Parameters","depth":2,"charIndex":2407},{"id":"example-2","text":"Example","depth":2,"charIndex":2779},{"id":"parameters-2","text":"Parameters","depth":2,"charIndex":3110},{"id":"behavior","text":"Behavior","depth":3,"charIndex":3570},{"id":"example-3","text":"Example","depth":2,"charIndex":3682},{"id":"parameters-3","text":"Parameters","depth":2,"charIndex":4108},{"id":"example-4","text":"Example","depth":2,"charIndex":4576}],"frontmatter":{},"version":"","description":"In Scripting, views can populate their navigation bar or toolbar area using either the original ToolBarProps object or the declarative component-based API that mirrors SwiftUI’s toolbar system. This document explains in detail how to use the Toolbar, ToolbarItem, ToolbarItemGroup, ToolbarSpacer, and DefaultToolbarItem components, including parameters, types, and usage patterns. The toolbar property can be used in two ways: By passing a ToolBarProps objectBy passing a VirtualNode, which must be a <Toolbar> component When using the component-based API, all toolbar content is declared inside a <Toolbar> container, and each item defines its placement explicitly. This provides clearer structure and more precise layout control, similar to SwiftUI. The <Toolbar> component serves as a container for toolbar content. It does not define placement itself; instead, ToolbarItem and ToolbarItemGroup determine where items go."},{"title":"matchedGeometryEffect","content":"`matchedGeometryEffect` establishes a **geometric relationship between different views**, allowing them to animate smoothly when transitioning across:\n\n- Different layouts\n- Different containers\n- Different conditional render states\n- Different size and position configurations\n\nIt corresponds to SwiftUI’s `matchedGeometryEffect` and is a **component-level geometry animation system**, independent of navigation.\n\n***\n\n## 1. API Definition\n\n```ts\nmatchedGeometryEffect?: {\n  id: string | number\n  namespace: NamespaceID\n  properties?: MatchedGeometryProperties\n  anchor?: Point | KeywordPoint\n  isSource?: boolean\n}\n```\n\n```ts\ntype MatchedGeometryProperties = \"frame\" | \"position\" | \"size\"\n```\n\n***\n\n## 2. Core Purpose\n\nThe core purpose of `matchedGeometryEffect` is:\n\n> To make two views that represent the same logical element share geometry information across different layouts, producing a continuous animated transition instead of a visual jump.\n\nThis solves issues such as:\n\n- Sudden jumps when a view moves between containers\n- Abrupt size changes when expanding a card\n- Layout discontinuity between list and detail views\n- Teleport-like behavior of tab indicators\n\n***\n\n## 3. Parameter Details\n\n### 3.1 `id` — Geometry Matching Identifier\n\n```ts\nid: string | number\n```\n\n- Identifies which views belong to the same geometry group.\n- Only views with the **same `id` inside the same `namespace`** will match.\n- Typically derived from:\n\n  - Model identifiers\n  - Index values\n  - Stable business keys\n\nRules:\n\n- The `id` must remain stable during animation.\n- One `id` can have **only one `isSource = true` at any moment**.\n\n***\n\n### 3.2 `namespace` — Geometry Namespace\n\n```ts\nnamespace: NamespaceID\n```\n\n- Defines the animation scope.\n- Even if two views share the same `id`, they **will not animate** unless the `namespace` is also the same.\n- Must be created and injected via `NamespaceReader`.\n\nRules:\n\n- Source and target **must use the exact same namespace instance**.\n- Cross-namespace matching is not allowed.\n\n***\n\n### 3.3 `properties` — Geometry Properties to Match\n\n```ts\nproperties?: \"frame\" | \"position\" | \"size\"\n```\n\nDefault:\n\n```ts\nproperties = \"frame\"\n```\n\nMeaning:\n\n| Value        | Description                      |\n| ------------ | -------------------------------- |\n| `\"frame\"`    | Matches both position and size   |\n| `\"position\"` | Matches only the center position |\n| `\"size\"`     | Matches only width and height    |\n\nGuidelines:\n\n- Use `\"frame\"` for natural transitions\n- Use `\"position\"` for indicators and sliding highlights\n- Use `\"size\"` for zooming and expansion effects\n\n***\n\n### 3.4 `anchor` — Animation Anchor Point\n\n```ts\nanchor?: Point | KeywordPoint\n```\n\nDefault:\n\n```ts\nanchor = \"center\"\n```\n\nControls how the geometry alignment is calculated during animation.\n\nCommon values:\n\n- `\"center\"`\n- `\"topLeading\"`\n- `\"topTrailing\"`\n- `\"bottomLeading\"`\n- `\"bottomTrailing\"`\n\nUsage examples:\n\n- Expanding a card from the top-left\n- Zooming an avatar from the top-right\n- Sliding a panel upward from the bottom\n\n***\n\n### 3.5 `isSource` — Geometry Data Provider\n\n```ts\nisSource?: boolean\n```\n\nDefault:\n\n```ts\nisSource = true\n```\n\nMeaning:\n\n| Value   | Behavior                              |\n| ------- | ------------------------------------- |\n| `true`  | This view provides geometry data      |\n| `false` | This view receives geometry animation |\n\nStandard pattern:\n\n- Original view → `isSource: true`\n- Target view → `isSource: false`\n\nIf omitted:\n\n- The first appearing view becomes the source by default.\n\n***\n\n## 4. Minimal Working Example (Position + Size Matching)\n\nThis example shows a circle moving and scaling smoothly between two containers.\n\n```tsx\nconst expanded = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <VStack spacing={40}>\n      <Button\n        title=\"Toggle\"\n        onTapGesture={() => {\n          expanded.setValue(!expanded.value)\n        }}\n      />\n\n      <ZStack\n        frame={{ width: 300, height: 200 }}\n        background=\"systemGray6\"\n      >\n        {!expanded.value && (\n          <Circle\n            fill=\"systemOrange\"\n            frame={{ width: 60, height: 60 }}\n            matchedGeometryEffect={{\n              id: \"circle\",\n              namespace\n            }}\n          />\n        )}\n      </ZStack>\n\n      <ZStack\n        frame={{ width: 300, height: 300 }}\n        background=\"systemGray4\"\n      >\n        {expanded.value && (\n          <Circle\n            fill=\"systemOrange\"\n            frame={{ width: 150, height: 150 }}\n            matchedGeometryEffect={{\n              id: \"circle\",\n              namespace,\n              isSource: false\n            }}\n          />\n        )}\n      </ZStack>\n    </VStack>\n  )}\n</NamespaceReader>\n```\n\n### Behavior\n\n- The same logical circle:\n\n  - Moves downward\n  - Grows in size\n  - Maintains continuous animation\n- No visual teleportation occurs\n\n***\n\n## 5. Position-Only Matching (Tab Indicator)\n\n```tsx\nconst selected = useObservable(0)\n\n<NamespaceReader>\n  {namespace => (\n    <HStack spacing={24}>\n      <Text\n        onTapGesture={() => selected.setValue(0)}\n        matchedGeometryEffect={{\n          id: \"indicator\",\n          namespace,\n          properties: \"position\",\n          isSource: selected.value === 0\n        }}\n      >\n        Tab 1\n      </Text>\n\n      <Text\n        onTapGesture={() => selected.setValue(1)}\n        matchedGeometryEffect={{\n          id: \"indicator\",\n          namespace,\n          properties: \"position\",\n          isSource: selected.value === 1\n        }}\n      >\n        Tab 2\n      </Text>\n    </HStack>\n  )}\n</NamespaceReader>\n```\n\nUsed for:\n\n- Tab selection indicators\n- Sliding highlights\n- Moving selection backgrounds\n\n***\n\n## 6. Size-Only Matching (Zoom Animation)\n\n```tsx\nconst expanded = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <ZStack>\n      <Circle\n        fill=\"systemBlue\"\n        frame={{\n          width: expanded.value ? 200 : 80,\n          height: expanded.value ? 200 : 80\n        }}\n        matchedGeometryEffect={{\n          id: \"avatar\",\n          namespace,\n          properties: \"size\"\n        }}\n        onTapGesture={() => {\n          expanded.setValue(!expanded.value)\n        }}\n      />\n    </ZStack>\n  )}\n</NamespaceReader>\n```\n\nSuitable for:\n\n- Avatar zooming\n- Card expansion\n- Press feedback animations\n\n***\n\n## 7. Multi-Element Matching (Card → Detail View)\n\n```tsx\nconst showDetail = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <ZStack>\n      {!showDetail.value && (\n        <VStack spacing={16}>\n          <Image\n            source=\"cover\"\n            matchedGeometryEffect={{\n              id: \"card.image\",\n              namespace\n            }}\n            onTapGesture={() => {\n              showDetail.setValue(true)\n            }}\n          />\n\n          <Text\n            matchedGeometryEffect={{\n              id: \"card.title\",\n              namespace\n            }}\n          >\n            Card Title\n          </Text>\n        </VStack>\n      )}\n\n      {showDetail.value && (\n        <VStack spacing={24}>\n          <Image\n            source=\"cover\"\n            frame={{ width: 300, height: 200 }}\n            matchedGeometryEffect={{\n              id: \"card.image\",\n              namespace,\n              isSource: false\n            }}\n          />\n\n          <Text\n            font=\"largeTitle\"\n            matchedGeometryEffect={{\n              id: \"card.title\",\n              namespace,\n              isSource: false\n            }}\n          >\n            Card Title\n          </Text>\n        </VStack>\n      )}\n    </ZStack>\n  )}\n</NamespaceReader>\n```\n\nEffect:\n\n- Image and title animate together\n- Transition from compact card to expanded detail layout\n- No navigation system required\n\n***\n\n## 8. Key Usage Rules\n\n1. **`namespace` must be identical**\n2. **`id` must be identical**\n3. At any time:\n\n   - One `id` → only one `isSource = true`\n4. Default behavior:\n\n   ```ts\n   properties = \"frame\"\n   anchor = \"center\"\n   isSource = true\n   ```\n5. Source and target must switch within the same render cycle\n6. If both views are marked as `isSource: true`, results are undefined\n7. Live Activity and Widget environments do not fully support matched geometry animations\n\n***\n\n## 9. Suitable Use Cases\n\nRecommended:\n\n- Tab indicators\n- Card-to-detail transitions\n- Image zoom previews\n- List selection animations\n- Split-view selection synchronization\n\nNot recommended:\n\n- High-frequency updating lists\n- Large grids with many simultaneous matches\n- Real-time chart rendering\n","routePath":"/doc/Changelog/2.4.4/matchedGeometryEffect","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":420},{"id":"2-core-purpose","text":"2. Core Purpose","depth":2,"charIndex":701},{"id":"3-parameter-details","text":"3. Parameter Details","depth":2,"charIndex":1180},{"id":"31-id--geometry-matching-identifier","text":"3.1 `id` — Geometry Matching Identifier","depth":3,"charIndex":1205},{"id":"32-namespace--geometry-namespace","text":"3.2 `namespace` — Geometry Namespace","depth":3,"charIndex":1637},{"id":"33-properties--geometry-properties-to-match","text":"3.3 `properties` — Geometry Properties to Match","depth":3,"charIndex":2032},{"id":"34-anchor--animation-anchor-point","text":"3.4 `anchor` — Animation Anchor Point","depth":3,"charIndex":2617},{"id":"35-issource--geometry-data-provider","text":"3.5 `isSource` — Geometry Data Provider","depth":3,"charIndex":3055},{"id":"4-minimal-working-example-position--size-matching","text":"4. Minimal Working Example (Position + Size Matching)","depth":2,"charIndex":3552},{"id":"behavior","text":"Behavior","depth":3,"charIndex":4746},{"id":"5-position-only-matching-tab-indicator","text":"5. Position-Only Matching (Tab Indicator)","depth":2,"charIndex":4899},{"id":"6-size-only-matching-zoom-animation","text":"6. Size-Only Matching (Zoom Animation)","depth":2,"charIndex":5719},{"id":"7-multi-element-matching-card--detail-view","text":"7. Multi-Element Matching (Card → Detail View)","depth":2,"charIndex":6352},{"id":"8-key-usage-rules","text":"8. Key Usage Rules","depth":2,"charIndex":7771},{"id":"9-suitable-use-cases","text":"9. Suitable Use Cases","depth":2,"charIndex":8252}],"frontmatter":{},"version":"","description":"matchedGeometryEffect establishes a geometric relationship between different views, allowing them to animate smoothly when transitioning across: Different layoutsDifferent containersDifferent conditional render statesDifferent size and position configurations It corresponds to SwiftUI’s matchedGeometryEffect and is a component-level geometry animation system, independent of navigation."},{"title":"matchedTransitionSource","content":"`matchedTransitionSource` marks a view as the **geometric source of a navigation transition**. It allows a view to act as the starting point of a page-level transition animation, such as a **zoom (Hero-style) transition**.\n\nThis API corresponds to SwiftUI’s `matchedTransitionSource` and is intended **only for navigation transitions**, not for component-level layout animations.\n\nTypical use cases include:\n\n- Image → Image detail zoom\n- Card → Detail page Hero animation\n- Avatar → Profile page transition\n\n***\n\n## 1. API Definition\n\n```ts\n/**\n * Identifies this view as the source of a navigation transition, such as a zoom transition.\n * @available iOS 18.0+\n */\nmatchedTransitionSource?: {\n  id: string | number\n  namespace: NamespaceID\n}\n```\n\n***\n\n## 2. Core Purpose\n\nThe core purpose of `matchedTransitionSource` is:\n\n> To define **which exact view** should be used as the **starting geometry** of a navigation transition.\n\nIt solves the following problems:\n\n- Eliminates the visual disconnect between a tapped view and the destination page\n- Prevents “disappear → new page appears” jump cuts\n- Enables spatial continuity between the source element and the destination layout\n\nWith this API, the system can:\n\n- Read the source view’s real on-screen frame\n- Compute the destination page’s final layout frame\n- Animate smoothly between the two\n\n***\n\n## 3. Parameter Details\n\n### 3.1 `id` — Transition Source Identifier\n\n```ts\nid: string | number\n```\n\nMeaning:\n\n- Uniquely identifies **which view is the transition source**\n- Must **exactly match** the destination page’s `navigationTransition.sourceID`\n\nRules:\n\n- Within the same `namespace`, `id` must be unique\n- Per navigation transition:\n\n  - Only **one** `matchedTransitionSource` may match the `sourceID`\n\n***\n\n### 3.2 `namespace` — Transition Namespace\n\n```ts\nnamespace: NamespaceID\n```\n\nMeaning:\n\n- Defines the **transition animation scope**\n- Created and injected by `NamespaceReader`\n\nRules:\n\n1. The source view and the destination page **must use the exact same namespace**\n2. Different namespaces will **never** produce a matched transition\n3. Even if `id` is the same, a different namespace disables the animation\n\n***\n\n## 4. How matchedTransitionSource Works\n\nA successful navigation zoom transition requires **all four conditions** to be satisfied:\n\n1. A view defines `matchedTransitionSource`\n2. The destination page defines `navigationTransition`\n3. `navigationTransition.sourceID === matchedTransitionSource.id`\n4. Both sides use the **same `namespace`**\n\nOnly when all conditions are met will the system:\n\n- Capture the source view’s:\n\n  - Frame\n  - Position\n  - Scale\n- Capture the destination layout’s final frame\n- Compute:\n\n  - Translation path\n  - Scale ratio\n- Perform the full transition animation\n\n***\n\n## 5. Minimal Working Example: Image → Detail Zoom\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    <NavigationLink\n      destination={\n        <DetailPage\n          navigationTransition={{\n            type: \"zoom\",\n            namespace,\n            sourceID: \"cover\"\n          }}\n        />\n      }\n    >\n      <Image\n        source=\"cover\"\n        frame={{\n          width: 120,\n          height: 160\n        }}\n        matchedTransitionSource={{\n          id: \"cover\",\n          namespace\n        }}\n      />\n    </NavigationLink>\n  )}\n</NamespaceReader>\n```\n\n### Resulting Behavior\n\n1. The user taps the image\n2. Navigation begins\n3. The destination page does not appear instantly\n4. Instead, it **zooms smoothly from the tapped image’s position and size**\n\n***\n\n## 6. Card → Detail Hero Transition Example\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    <NavigationLink\n      destination={\n        <DetailPage\n          navigationTransition={{\n            type: \"zoom\",\n            namespace,\n            sourceID: \"card-1\"\n          }}\n        />\n      }\n    >\n      <VStack\n        frame={{\n          width: 280,\n          height: 180\n        }}\n        background=\"systemGray6\"\n        matchedTransitionSource={{\n          id: \"card-1\",\n          namespace\n        }}\n      >\n        <Text>Card Title</Text>\n      </VStack>\n    </NavigationLink>\n  )}\n</NamespaceReader>\n```\n\nEffect:\n\n- The entire card becomes the transition origin\n- The detail page expands naturally from that card\n- Produces a classic Hero-style animation\n\n***\n\n## 7. Difference Between matchedTransitionSource and matchedGeometryEffect\n\n| Aspect                      | matchedTransitionSource | matchedGeometryEffect  |\n| --------------------------- | ----------------------- | ---------------------- |\n| Scope                       | Page-level navigation   | Component-level layout |\n| Requires Navigation         | Yes                     | No                     |\n| Multiple elements supported | No                      | Yes                    |\n| Needs `sourceID`            | Yes                     | No                     |\n| Geometry property control   | No                      | Yes                    |\n| Internal layout animation   | No                      | Yes                    |\n\nSummary:\n\n- `matchedTransitionSource`: controls **where a page transition starts**\n- `matchedGeometryEffect`: controls **how layout changes animate inside views**\n\n***\n\n## 8. Common Issues and Debug Checklist\n\n### 8.1 Transition Does Not Trigger\n\nCheck:\n\n- Does `sourceID` exactly match `matchedTransitionSource.id`?\n- Are both using the same `namespace` instance?\n- Is the navigation actually triggered via `NavigationLink`?\n\n***\n\n### 8.2 Wrong Direction or Scaling Artifacts\n\nCommon causes:\n\n- The source view uses:\n\n  - `scaleEffect`\n  - `offset`\n  - `rotation`\n- Or is wrapped by:\n\n  - `clipShape`\n  - `mask`\n  - `containerShape`\n\nThese affect how the system reads the real geometry frame.\n\n***\n\n### 8.3 Multiple Sources with the Same ID\n\nIncorrect:\n\n- Multiple views share the same `id`\n- All define `matchedTransitionSource`\n\nResult:\n\n- The system cannot determine the true source\n- The transition becomes undefined or fails\n\n***\n\n## 9. Platform and Environment Limitations\n\n1. `matchedTransitionSource` works only with:\n\n   - Navigation-based transitions\n2. It is **not supported or is limited** in:\n\n   - Widgets\n   - Live Activities\n3. It should not be used for:\n\n   - Tab switching\n   - Collapsing/expanding menus\n   - Component state animations\n\nUse `matchedGeometryEffect` for those cases.\n\n***\n\n## 10. Recommended Use Cases\n\nHighly suitable:\n\n- Image → full-screen preview\n- Article cover → reading page\n- Product card → product detail\n- Avatar → profile page\n- Large card → immersive detail view\n\nNot suitable:\n\n- High-frequency UI state changes\n- Dense grid transitions\n- Real-time updating interfaces\n","routePath":"/doc/Changelog/2.4.4/matchedTransitionSource","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":514},{"id":"2-core-purpose","text":"2. Core Purpose","depth":2,"charIndex":754},{"id":"3-parameter-details","text":"3. Parameter Details","depth":2,"charIndex":1355},{"id":"31-id--transition-source-identifier","text":"3.1 `id` — Transition Source Identifier","depth":3,"charIndex":1380},{"id":"32-namespace--transition-namespace","text":"3.2 `namespace` — Transition Namespace","depth":3,"charIndex":1772},{"id":"4-how-matchedtransitionsource-works","text":"4. How matchedTransitionSource Works","depth":2,"charIndex":2188},{"id":"5-minimal-working-example-image--detail-zoom","text":"5. Minimal Working Example: Image → Detail Zoom","depth":2,"charIndex":2785},{"id":"resulting-behavior","text":"Resulting Behavior","depth":3,"charIndex":3348},{"id":"6-card--detail-hero-transition-example","text":"6. Card → Detail Hero Transition Example","depth":2,"charIndex":3552},{"id":"7-difference-between-matchedtransitionsource-and-matchedgeometryeffect","text":"7. Difference Between matchedTransitionSource and matchedGeometryEffect","depth":2,"charIndex":4324},{"id":"8-common-issues-and-debug-checklist","text":"8. Common Issues and Debug Checklist","depth":2,"charIndex":5234},{"id":"81-transition-does-not-trigger","text":"8.1 Transition Does Not Trigger","depth":3,"charIndex":5275},{"id":"82-wrong-direction-or-scaling-artifacts","text":"8.2 Wrong Direction or Scaling Artifacts","depth":3,"charIndex":5497},{"id":"83-multiple-sources-with-the-same-id","text":"8.3 Multiple Sources with the Same ID","depth":3,"charIndex":5765},{"id":"9-platform-and-environment-limitations","text":"9. Platform and Environment Limitations","depth":2,"charIndex":6002},{"id":"10-recommended-use-cases","text":"10. Recommended Use Cases","depth":2,"charIndex":6373}],"frontmatter":{},"version":"","description":"matchedTransitionSource marks a view as the geometric source of a navigation transition. It allows a view to act as the starting point of a page-level transition animation, such as a zoom (Hero-style) transition. This API corresponds to SwiftUI’s matchedTransitionSource and is intended only for navigation transitions, not for component-level layout animations. Typical use cases include: Image → Image detail zoomCard → Detail page Hero animationAvatar → Profile page transition"},{"title":"AVPlayerView","content":"`AVPlayerView` is a video playback component introduced in Scripting that wraps the system-native `AVPlayerViewController`.\nUnlike `VideoPlayer`, `AVPlayerView` **fully supports system Picture in Picture (PiP)** and exposes PiP lifecycle state to scripts.\n\nThis component is intended for **media-centric scenarios** where native playback behavior, PiP, Now Playing integration, and background playback are required.\n\n***\n\n## 1. When to Use AVPlayerView\n\nUse `AVPlayerView` when you need:\n\n- System Picture in Picture (PiP) for video\n- Native playback controls\n- Integration with Now Playing / Control Center / Lock Screen\n- Automatic PiP when entering background\n- Fine-grained observation of PiP lifecycle\n\nIf you do **not** need PiP, `VideoPlayer` remains a lighter alternative.\n\n***\n\n## 2. Core Properties Explained\n\n### 2.1 `player`\n\n```ts\nplayer: AVPlayer\n```\n\n- The underlying media player\n- Fully managed by the developer\n- Supports local files, remote URLs, HLS streams, etc.\n\n`AVPlayerView` **does not own the player lifecycle**.\nThe player must remain alive while PiP is active.\n\n***\n\n### 2.2 `pipStatus`\n\n```ts\npipStatus: Observable<PIPStatus>\n```\n\nProvides real-time updates for the PiP lifecycle.\n\nPossible values:\n\n| Value              | Meaning               |\n| ------------------ | --------------------- |\n| `willStart`        | PiP is about to start |\n| `didStart`         | PiP has started       |\n| `willStop`         | PiP is about to stop  |\n| `didStop`          | PiP has stopped       |\n| `undefined / null` | No PiP activity yet   |\n\nThis value is **system-controlled**.\nYou should **observe it only**, never assign values manually.\n\n***\n\n## 3. Picture in Picture Configuration\n\n### 3.1 `allowsPictureInPicturePlayback`\n\n- Enables or disables PiP entirely\n- Default: `true`\n\nWhen set to `false`:\n\n- PiP controls are hidden\n- PiP cannot be activated\n\n***\n\n### 3.2 `canStartPictureInPictureAutomaticallyFromInline`\n\n- If enabled, PiP starts automatically when:\n\n  - The app moves to background\n  - Video is playing inline\n- Default: `false`\n\nRecommended for:\n\n- Media apps\n- Continuous playback experiences\n\n***\n\n### 3.3 `updatesNowPlayingInfoCenter`\n\n- Controls automatic updates to:\n\n  - Lock screen\n  - Control Center\n  - External playback controls\n- Default: `true`\n\nShould generally remain enabled for video playback apps.\n\n***\n\n## 4. Full-Screen Playback Behavior\n\n### 4.1 `entersFullScreenWhenPlaybackBegins`\n\n- Automatically enters full screen on play\n- Default: `false`\n\n***\n\n### 4.2 `exitsFullScreenWhenPlaybackEnds`\n\n- Automatically exits full screen on completion\n- Default: `false`\n\n***\n\n## 5. Video Scaling (`videoGravity`)\n\n```ts\nvideoGravity?: AVLayerVideoGravity\n```\n\n| Value              | Behavior                                    |\n| ------------------ | ------------------------------------------- |\n| `resize`           | Stretch to fill (no aspect ratio)           |\n| `resizeAspect`     | Preserve aspect ratio, fit inside (default) |\n| `resizeAspectFill` | Preserve aspect ratio, fill and crop        |\n\n***\n\n## 6. Complete Demo Example\n\nThe following example demonstrates:\n\n- Creating and configuring `AVPlayer`\n- Activating audio playback session\n- Observing PiP lifecycle\n- Controlling playback state\n- Proper cleanup\n\n```tsx\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [status, setStatus] = useState<TimeControlStatus>(\n    TimeControlStatus.paused\n  )\n  const pipstatus = useObservable<PIPStatus>()\n\n  console.log(pipstatus.value)\n\n  const player = useMemo(() => {\n    const player = new AVPlayer()\n\n    player.setSource(\n      \"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\"\n    )\n\n    player.onTimeControlStatusChanged = status => {\n      setStatus(status)\n    }\n\n    SharedAudioSession.setActive(true)\n    SharedAudioSession.setCategory(\n      \"playback\",\n      [\"defaultToSpeaker\"]\n    )\n\n    return player\n  }, [])\n\n  useEffect(() => {\n    return () => {\n      player.dispose()\n    }\n  }, [])\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle=\"VideoPlayer\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        cancellationAction: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <AVPlayerView\n        player={player}\n        pipStatus={pipstatus}\n        canStartPictureInPictureAutomaticallyFromInline\n        updatesNowPlayingInfoCenter\n        entersFullScreenWhenPlaybackBegins\n      />\n\n      <Button\n        title={\n          status === TimeControlStatus.paused\n            ? \"Play\"\n            : \"Pause\"\n        }\n        action={() => {\n          if (status === TimeControlStatus.paused) {\n            player.play()\n          } else {\n            player.pause()\n          }\n        }}\n      />\n    </VStack>\n  </NavigationStack>\n}\n```\n\n***\n\n## 7. PiP Lifecycle Notes\n\nTypical PiP state progression:\n\n1. `willStart`\n2. `didStart`\n3. PiP running\n4. `willStop`\n5. `didStop`\n\nThe system may skip stages in error or interruption scenarios.\nAlways treat `didStart` and `didStop` as authoritative.\n\n***\n\n## 8. Important Notes and Constraints\n\n### 8.1 AVPlayerView PiP is System-Level PiP\n\n- Uses native video PiP\n- Completely separate from Scripting’s custom PiP View Modifiers\n- These two mechanisms must not be mixed\n\n***\n\n### 8.2 Audio Session Is Required\n\nFor PiP to work reliably:\n\n- An active audio session is required\n- Category should be `playback`\n- Background audio capability must be enabled\n\nFailing to configure the audio session may cause PiP to fail silently.\n\n***\n\n### 8.3 Do Not Dispose AVPlayer While PiP Is Active\n\n- Disposing or replacing `AVPlayer` during PiP\n- Will force PiP to stop unexpectedly\n- May result in system errors\n\nAlways wait until `pipStatus` reaches `didStop` before releasing the player.\n\n***\n\n## 9. Recommended Best Practices\n\n- Use `AVPlayerView` exclusively for video PiP\n- Treat `pipStatus` as read-only state\n- Keep `AVPlayer` lifecycle stable during PiP\n- Configure audio session explicitly\n- Avoid frequent player replacement\n- Clean up resources only after PiP has fully stopped\n","routePath":"/doc/Changelog/2.4.5/AVPlayerView","lang":"en","toc":[{"id":"1-when-to-use-avplayerview","text":"1. When to Use AVPlayerView","depth":2,"charIndex":422},{"id":"2-core-properties-explained","text":"2. Core Properties Explained","depth":2,"charIndex":787},{"id":"21-player","text":"2.1 `player`","depth":3,"charIndex":820},{"id":"22-pipstatus","text":"2.2 `pipStatus`","depth":3,"charIndex":1095},{"id":"3-picture-in-picture-configuration","text":"3. Picture in Picture Configuration","depth":2,"charIndex":1664},{"id":"31-allowspictureinpictureplayback","text":"3.1 `allowsPictureInPicturePlayback`","depth":3,"charIndex":1704},{"id":"32-canstartpictureinpictureautomaticallyfrominline","text":"3.2 `canStartPictureInPictureAutomaticallyFromInline`","depth":3,"charIndex":1880},{"id":"33-updatesnowplayinginfocenter","text":"3.3 `updatesNowPlayingInfoCenter`","depth":3,"charIndex":2136},{"id":"4-full-screen-playback-behavior","text":"4. Full-Screen Playback Behavior","depth":2,"charIndex":2357},{"id":"41-entersfullscreenwhenplaybackbegins","text":"4.1 `entersFullScreenWhenPlaybackBegins`","depth":3,"charIndex":2394},{"id":"42-exitsfullscreenwhenplaybackends","text":"4.2 `exitsFullScreenWhenPlaybackEnds`","depth":3,"charIndex":2508},{"id":"5-video-scaling-videogravity","text":"5. Video Scaling (`videoGravity`)","depth":2,"charIndex":2624},{"id":"6-complete-demo-example","text":"6. Complete Demo Example","depth":2,"charIndex":3059},{"id":"7-pip-lifecycle-notes","text":"7. PiP Lifecycle Notes","depth":2,"charIndex":4843},{"id":"8-important-notes-and-constraints","text":"8. Important Notes and Constraints","depth":2,"charIndex":5099},{"id":"81-avplayerview-pip-is-system-level-pip","text":"8.1 AVPlayerView PiP is System-Level PiP","depth":3,"charIndex":5138},{"id":"82-audio-session-is-required","text":"8.2 Audio Session Is Required","depth":3,"charIndex":5320},{"id":"83-do-not-dispose-avplayer-while-pip-is-active","text":"8.3 Do Not Dispose AVPlayer While PiP Is Active","depth":3,"charIndex":5576},{"id":"9-recommended-best-practices","text":"9. Recommended Best Practices","depth":2,"charIndex":5828}],"frontmatter":{},"version":"","description":"AVPlayerView is a video playback component introduced in Scripting that wraps the system-native AVPlayerViewController.\nUnlike VideoPlayer, AVPlayerView fully supports system Picture in Picture (PiP) and exposes PiP lifecycle state to scripts. This component is intended for media-centric scenarios where native playback behavior, PiP, Now Playing integration, and background playback are required."},{"title":"AppStore <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# AppStore \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `AppStore` API allows you to display App Store app information **directly inside the Scripting app**, without navigating users away to the system App Store application.\n\nThis API is built on top of Apple’s native App Store presentation components and is suitable for scenarios such as **app recommendations, app collections, related app discovery, and ecosystem entry points**.\n\n***\n\n## Namespace: `AppStore`\n\n```ts\nnamespace AppStore\n```\n\n***\n\n## Overview\n\n- Present an App Store product page inside the Scripting app using a **modal view**\n- Users can view app details, screenshots, ratings, and release notes\n- Users can **download, update, or open** the app directly\n- Automatically returns to the current script UI after dismissal\n- Does not launch or switch to the system App Store app\n\n***\n\n## API Summary\n\n| Method                   | Description                                              |\n| ------------------------ | -------------------------------------------------------- |\n| `presentApp(id: string)` | Presents an App Store product page for the specified app |\n| `dismissApp()`           | Dismisses the currently presented App Store page         |\n\n***\n\n## API Reference\n\n### `presentApp(id: string): Promise<void>`\n\nPresents the App Store product page for a specific app inside the Scripting app.\n\n#### Parameters\n\n| Name | Type     | Description                               |\n| ---- | -------- | ----------------------------------------- |\n| `id` | `string` | The **App Store app identifier (App ID)** |\n\n- The App ID is the numeric identifier used by the App Store\n- It can be extracted from an App Store URL\n  Example:\n  `https://apps.apple.com/app/id123456789`\n  The ID is `\"123456789\"`\n\n#### Return Value\n\n- Returns a `Promise<void>`\n- The promise resolves when the App Store modal is dismissed\n- Throws an error if another App Store modal is already presented\n\n#### Behavior\n\n- Presents the App Store page as a modal view\n- Only **one App Store modal** can be active at a time\n- Calling `presentApp` again while one is already open will result in an error\n\n#### Example\n\n```ts\nawait AppStore.presentApp(\"123456789\")\n```\n\n***\n\n### `dismissApp(): Promise<void>`\n\nDismisses the App Store modal that was opened using `presentApp`.\n\n#### Return Value\n\n- Returns a `Promise<void>`\n- Resolves when the modal has been successfully dismissed\n\n#### Usage Notes\n\n- In most cases, manual dismissal is not required\n- Useful when:\n\n  - Implementing custom UI-driven dismissal logic\n  - Closing the App Store page at a specific point in a script’s workflow\n\n#### Example\n\n```ts\nawait AppStore.dismissApp()\n```\n\n***\n\n## Usage Examples\n\n### Example 1: App Recommendation Entry\n\n```ts\n\n\nfunction AppRecommendation() {\n  return (\n    <Button\n      title=\"View Recommended App\"\n      action={() => {\n        AppStore.presentApp(\"123456789\")\n      }}\n    />\n  )\n}\n```\n\n***\n\n### Example 2: App Collection / Favorites\n\n```ts\nconst favoriteApps = [\n  { name: \"App A\", id: \"123456789\" },\n  { name: \"App B\", id: \"987654321\" }\n]\n\nfunction AppList() {\n  return favoriteApps.map(app => (\n    <Button\n      title={app.name}\n      action={() => {\n        AppStore.presentApp(app.id)\n      }}\n    />\n  ))\n}\n```\n\n***\n\n## Errors and Considerations\n\n### Common Errors\n\n- **An App Store modal is already presented**\n\n  - Calling `presentApp` again will throw an error\n  - Ensure your logic prevents duplicate presentations\n\n### Limitations\n\n- Only App Store app product pages are supported\n- Subscription pages, developer profiles, and other App Store sections are not supported\n- The provided App ID must be valid and publicly available on the App Store\n","routePath":"/doc/Changelog/2.4.5/AppStore","lang":"en","toc":[{"id":"namespace-appstore","text":"Namespace: `AppStore`","depth":2,"charIndex":540},{"id":"overview","text":"Overview","depth":2,"charIndex":601},{"id":"api-summary","text":"API Summary","depth":2,"charIndex":954},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":1328},{"id":"presentappid-string-promisevoid","text":"`presentApp(id: string): Promise<void>`","depth":3,"charIndex":1346},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1473},{"id":"return-value","text":"Return Value","depth":4,"charIndex":1869},{"id":"behavior","text":"Behavior","depth":4,"charIndex":2044},{"id":"example","text":"Example","depth":4,"charIndex":2240},{"id":"dismissapp-promisevoid","text":"`dismissApp(): Promise<void>`","depth":3,"charIndex":2309},{"id":"return-value-1","text":"Return Value","depth":4,"charIndex":2411},{"id":"usage-notes","text":"Usage Notes","depth":4,"charIndex":2517},{"id":"example-1","text":"Example","depth":4,"charIndex":2726},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":2784},{"id":"example-1-app-recommendation-entry","text":"Example 1: App Recommendation Entry","depth":3,"charIndex":2803},{"id":"example-2-app-collection--favorites","text":"Example 2: App Collection / Favorites","depth":3,"charIndex":3036},{"id":"errors-and-considerations","text":"Errors and Considerations","depth":2,"charIndex":3368},{"id":"common-errors","text":"Common Errors","depth":3,"charIndex":3398},{"id":"limitations","text":"Limitations","depth":3,"charIndex":3571}],"frontmatter":{},"version":"","description":"The AppStore API allows you to display App Store app information directly inside the Scripting app, without navigating users away to the system App Store application. This API is built on top of Apple’s native App Store presentation components and is suitable for scenarios such as app recommendations, app collections, related app discovery, and ecosystem entry points."},{"title":"Assistant Conversation APIs <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Assistant Conversation APIs \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Conversation APIs are used to **start, control, and present a system-hosted Assistant chat session**.\nA conversation corresponds to a **fully managed chat page**, where Scripting handles the UI, streaming output, provider selection, and message lifecycle.\n\nKey differences from other Assistant APIs:\n\n- Conversation APIs are designed for **interactive chat experiences**\n- UI, streaming, and message handling are managed by the system\n- Developers control **when the conversation starts, ends, and is shown**\n\n***\n\n## Conversation Lifecycle\n\nA typical conversation follows this lifecycle:\n\n1. `startConversation` — create a conversation (optionally auto-start)\n2. `present` — display the Assistant chat page\n3. User interacts with the Assistant\n4. `dismiss` — temporarily hide the chat page (conversation continues)\n5. `present` — show the same conversation again\n6. `stopConversation` — terminate the conversation and release resources\n\nImportant rules:\n\n- **Only one active conversation can exist at a time**\n- Calling `startConversation` while a conversation is active throws an error\n- Calling `stopConversation` automatically calls `dismiss`\n\n***\n\n## startConversation\n\n### API Definition\n\n```ts\nfunction startConversation(options: {\n  message: string\n  images?: UIImage[]\n  autoStart?: boolean\n  systemPrompt?: string\n  modelId?: string\n  provider?: Provider\n}): Promise<void>\n```\n\n***\n\n### Parameters\n\n#### options.message\n\n- Type: `string`\n- Required\n- The **initial user message** of the conversation\n- Equivalent to the first user input in the chat UI\n\n***\n\n#### options.images (optional)\n\n- Type: `UIImage[]`\n- Sent together with the initial message\n- Common use cases:\n\n  - Image analysis\n  - Starting a conversation from a photo or screenshot\n\n***\n\n#### options.autoStart (optional)\n\n- Type: `boolean`\n- Default: `false`\n\nBehavior:\n\n- `true`\n\n  - The assistant immediately starts generating a reply\n- `false`\n\n  - The conversation is created but not sent automatically\n  - Typically used when the user should press “Send” manually\n\n***\n\n#### options.systemPrompt (optional)\n\n- Type: `string`\n\nBehavior:\n\n- If omitted:\n\n  - The built-in Scripting Assistant system prompt is used\n  - Assistant Tools are available\n- If provided:\n\n  - Fully replaces the default system prompt\n  - **Assistant Tools are disabled**\n\nTypical use cases:\n\n- Creating a highly customized chat role\n- Running the model without any tool access\n\n***\n\n#### options.modelId (optional)\n\n- Type: `string`\n- Specifies the model to use for this conversation\n- Users may still change the model in the chat UI (if allowed)\n\n***\n\n#### options.provider (optional)\n\n- Type: `Provider`\n- Specifies the default provider for the conversation\n- Users may change the provider in the chat UI (if allowed)\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n- Resolves when the conversation is successfully created\n- Rejects if a conversation already exists\n\n***\n\n## present\n\n### API Definition\n\n```ts\nfunction present(): Promise<void>\n```\n\n***\n\n### Behavior\n\n- Presents the Assistant chat page for the current conversation\n- If the page is already presented, calling this has no effect\n- Can be called:\n\n  - After `startConversation`\n  - After `dismiss` to re-present the same conversation\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n- Resolves when the chat page is dismissed by the user\n\n***\n\n## dismiss\n\n### API Definition\n\n```ts\nfunction dismiss(): Promise<void>\n```\n\n***\n\n### Behavior\n\n- Dismisses the Assistant chat page\n- **Does not stop the conversation**\n- Conversation state and history are preserved\n\nTypical use cases:\n\n- Temporarily hiding the chat UI\n- Navigating to another page or task\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n***\n\n## stopConversation\n\n### API Definition\n\n```ts\nfunction stopConversation(): Promise<void>\n```\n\n***\n\n### Behavior\n\n- Fully terminates the current conversation\n- Automatically calls `dismiss`\n- Cleans up conversation state and resources\n- After calling this, a new conversation may be started\n\n***\n\n### Return Value\n\n```ts\nPromise<void>\n```\n\n***\n\n## Conversation State Flags\n\n### Assistant.isAvailable\n\n```ts\nconst isAvailable: boolean\n```\n\n- Indicates whether the current user has access to the Assistant\n- If `false`, all Conversation APIs are unavailable\n\n***\n\n### Assistant.isPresented\n\n```ts\nconst isPresented: boolean\n```\n\n- Indicates whether the Assistant chat page is currently presented\n\n***\n\n### Assistant.hasActiveConversation\n\n```ts\nconst hasActiveConversation: boolean\n```\n\n- Indicates whether there is an active conversation\n- Commonly used to guard against duplicate `startConversation` calls\n\n***\n\n## Examples\n\n### Example 1: Typical usage\n\n```ts\nawait Assistant.startConversation({\n  message: \"Help me summarize this article.\",\n  autoStart: true\n})\n\nawait Assistant.present()\n```\n\n***\n\n### Example 2: Create a conversation without auto-sending\n\n```ts\nawait Assistant.startConversation({\n  message: \"Let's discuss system architecture design.\",\n  autoStart: false\n})\n\nawait Assistant.present()\n// User manually presses Send in the UI\n```\n\n***\n\n### Example 3: Dismiss and re-present the same conversation\n\n```ts\nawait Assistant.startConversation({\n  message: \"Analyze this image.\",\n  images: [image],\n  autoStart: true\n})\n\nawait Assistant.present()\n\nawait Assistant.dismiss()\n\n// Later, re-present the same conversation\nawait Assistant.present()\n```\n\n***\n\n### Example 4: Stop the current conversation and start a new one\n\n```ts\nif (Assistant.hasActiveConversation) {\n  await Assistant.stopConversation()\n}\n\nawait Assistant.startConversation({\n  message: \"Start a new topic.\",\n  autoStart: true\n})\n\nawait Assistant.present()\n```\n\n***\n\n## Best Practices\n\n- Treat Conversation APIs as a **managed chat UI**\n- Do not mix Conversation APIs with `requestStreaming` in the same flow\n- Always check `hasActiveConversation` before calling `startConversation`\n- For one-shot or data-oriented tasks, prefer:\n\n  - `requestStructuredData`\n  - `requestStreaming`\n- Use Conversation APIs when continuous user interaction is required\n\n***\n\n## Design Boundaries\n\n- Conversation APIs are not suitable for headless or background tasks\n- Not intended for fully automated workflows\n- Not ideal when you need strict control over prompts, tokens, or output format\n","routePath":"/doc/Changelog/2.4.5/Assistant/Assistant Conversation APIs","lang":"en","toc":[{"id":"conversation-lifecycle","text":"Conversation Lifecycle","depth":2,"charIndex":690},{"id":"startconversation","text":"startConversation","depth":2,"charIndex":1328},{"id":"api-definition","text":"API Definition","depth":3,"charIndex":1350},{"id":"parameters","text":"Parameters","depth":3,"charIndex":1568},{"id":"optionsmessage","text":"options.message","depth":4,"charIndex":1584},{"id":"optionsimages-optional","text":"options.images (optional)","depth":4,"charIndex":1743},{"id":"optionsautostart-optional","text":"options.autoStart (optional)","depth":4,"charIndex":1937},{"id":"optionssystemprompt-optional","text":"options.systemPrompt (optional)","depth":4,"charIndex":2225},{"id":"optionsmodelid-optional","text":"options.modelId (optional)","depth":4,"charIndex":2610},{"id":"optionsprovider-optional","text":"options.provider (optional)","depth":4,"charIndex":2780},{"id":"return-value","text":"Return Value","depth":3,"charIndex":2953},{"id":"present","text":"present","depth":2,"charIndex":3102},{"id":"api-definition-1","text":"API Definition","depth":3,"charIndex":3114},{"id":"behavior","text":"Behavior","depth":3,"charIndex":3184},{"id":"return-value-1","text":"Return Value","depth":3,"charIndex":3435},{"id":"dismiss","text":"dismiss","depth":2,"charIndex":3539},{"id":"api-definition-2","text":"API Definition","depth":3,"charIndex":3551},{"id":"behavior-1","text":"Behavior","depth":3,"charIndex":3621},{"id":"return-value-2","text":"Return Value","depth":3,"charIndex":3852},{"id":"stopconversation","text":"stopConversation","depth":2,"charIndex":3900},{"id":"api-definition-3","text":"API Definition","depth":3,"charIndex":3921},{"id":"behavior-2","text":"Behavior","depth":3,"charIndex":4000},{"id":"return-value-3","text":"Return Value","depth":3,"charIndex":4197},{"id":"conversation-state-flags","text":"Conversation State Flags","depth":2,"charIndex":4245},{"id":"assistantisavailable","text":"Assistant.isAvailable","depth":3,"charIndex":4274},{"id":"assistantispresented","text":"Assistant.isPresented","depth":3,"charIndex":4462},{"id":"assistanthasactiveconversation","text":"Assistant.hasActiveConversation","depth":3,"charIndex":4600},{"id":"examples","text":"Examples","depth":2,"charIndex":4812},{"id":"example-1-typical-usage","text":"Example 1: Typical usage","depth":3,"charIndex":4825},{"id":"example-2-create-a-conversation-without-auto-sending","text":"Example 2: Create a conversation without auto-sending","depth":3,"charIndex":5001},{"id":"example-3-dismiss-and-re-present-the-same-conversation","text":"Example 3: Dismiss and re-present the same conversation","depth":3,"charIndex":5257},{"id":"example-4-stop-the-current-conversation-and-start-a-new-one","text":"Example 4: Stop the current conversation and start a new one","depth":3,"charIndex":5568},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":5846},{"id":"design-boundaries","text":"Design Boundaries","depth":2,"charIndex":6236}],"frontmatter":{},"version":"","description":"The Conversation APIs are used to start, control, and present a system-hosted Assistant chat session.\nA conversation corresponds to a fully managed chat page, where Scripting handles the UI, streaming output, provider selection, and message lifecycle. Key differences from other Assistant APIs: Conversation APIs are designed for interactive chat experiencesUI, streaming, and message handling are managed by the systemDevelopers control when the conversation starts, ends, and is shown"},{"title":"Assistant Quick Start <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Assistant Quick Start \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Assistant API in Scripting provides three distinct capabilities, each designed for a different type of use case: **structured data**, **streaming output**, and **interactive conversations**.\n\nBefore choosing an API, first decide **what kind of result you need**.\n\n***\n\n## Assistant API Overview\n\n| Category         | Main APIs                                                        | Best For                         |\n| ---------------- | ---------------------------------------------------------------- | -------------------------------- |\n| Structured Data  | `requestStructuredData`                                          | Extracting predictable JSON data |\n| Streaming Output | `requestStreaming`                                               | Real-time text generation        |\n| Conversations    | `startConversation` / `present` / `dismiss` / `stopConversation` | Fully managed chat UI            |\n\n***\n\n## requestStructuredData\n\n**Purpose**\nRequests **strictly structured JSON output** that conforms to a provided schema.\n\n**Best suited for**\n\n- Parsing receipts, invoices, and bills\n- Extracting fields from natural language\n- Generating configuration or rule objects\n- Any output that must be consumed by program logic\n\n**Key characteristics**\n\n- Stable and predictable output\n- No streaming or incremental updates\n- Ideal for background or headless scenarios\n\n**In one sentence**\n\n> If you need **data**, use `requestStructuredData`.\n\n***\n\n## requestStreaming\n\n**Purpose**\nRequests **streaming output**, allowing you to receive content incrementally as the model generates it.\n\n**Best suited for**\n\n- Typing-effect UI\n- Long-form content generation\n- Low-latency user feedback\n\n**Key characteristics**\n\n- Emits text, reasoning, and usage chunks\n- Can be rendered progressively\n- Output is not guaranteed to be structured\n\n**In one sentence**\n\n> If you need **real-time output**, use `requestStreaming`.\n\n***\n\n## Conversation APIs\n\n**Related methods**\n\n- `startConversation`\n- `present`\n- `dismiss`\n- `stopConversation`\n\n**Purpose**\nCreates and presents a **system-hosted Assistant chat experience**.\n\n**Best suited for**\n\n- ChatGPT-style interactions\n- Multi-turn conversations\n- Scenarios where the system manages UI, streaming, and provider switching\n\n**Key characteristics**\n\n- Built-in chat UI\n- Streaming handled automatically\n- Only one active conversation at a time\n\n**In one sentence**\n\n> If you need a **full chat experience**, use the Conversation APIs.\n\n***\n\n## How to Choose the Right API\n\n### Common Scenarios\n\n- **Parse a receipt →** `requestStructuredData`\n- **Show AI writing text live →** `requestStreaming`\n- **Open a chat interface for users →** Conversation APIs\n- **No UI, just results →** `requestStructuredData` or `requestStreaming`\n- **Let the system manage the chat UI →** Conversation APIs\n\n***\n\n## Minimal Examples\n\n### Structured Data\n\n```ts\nconst result = await Assistant.requestStructuredData(...)\n```\n\n***\n\n### Streaming Output\n\n```ts\nconst stream = await Assistant.requestStreaming(...)\nfor await (const chunk of stream) {\n  // handle chunk\n}\n```\n\n***\n\n### Conversation\n\n```ts\nawait Assistant.startConversation({\n  message: \"Hello\",\n  autoStart: true\n})\nawait Assistant.present()\n```\n\n***\n\n## Usage Tips\n\n- Do not mix Conversation APIs with `requestStreaming` in the same flow\n- Prefer `requestStructuredData` whenever output must be consumed as data\n- Use streaming or conversations for presentation-focused scenarios\n\n***\n\n## Next Steps\n\nFor deeper details, refer to:\n\n- `requestStructuredData` – detailed schema-driven data extraction\n- `requestStreaming` – streaming behavior and chunk handling\n- Conversation APIs – lifecycle and interaction patterns\n","routePath":"/doc/Changelog/2.4.5/Assistant/Assistant Quick Start","lang":"en","toc":[{"id":"assistant-api-overview","text":"Assistant API Overview","depth":2,"charIndex":438},{"id":"requeststructureddata","text":"requestStructuredData","depth":2,"charIndex":1086},{"id":"requeststreaming","text":"requestStreaming","depth":2,"charIndex":1626},{"id":"conversation-apis","text":"Conversation APIs","depth":2,"charIndex":2095},{"id":"how-to-choose-the-right-api","text":"How to Choose the Right API","depth":2,"charIndex":2656},{"id":"common-scenarios","text":"Common Scenarios","depth":3,"charIndex":2688},{"id":"minimal-examples","text":"Minimal Examples","depth":2,"charIndex":3009},{"id":"structured-data","text":"Structured Data","depth":3,"charIndex":3030},{"id":"streaming-output","text":"Streaming Output","depth":3,"charIndex":3125},{"id":"conversation","text":"Conversation","depth":3,"charIndex":3272},{"id":"usage-tips","text":"Usage Tips","depth":2,"charIndex":3409},{"id":"next-steps","text":"Next Steps","depth":2,"charIndex":3644}],"frontmatter":{},"version":"","description":"The Assistant API in Scripting provides three distinct capabilities, each designed for a different type of use case: structured data, streaming output, and interactive conversations. Before choosing an API, first decide what kind of result you need."},{"title":"requestStreaming <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# requestStreaming \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`requestStreaming` requests a **streaming response** from the Assistant.\nInstead of returning a complete result at once, the Assistant emits **chunks incrementally** as the model generates output.\n\nThis enables:\n\n- Real-time UI updates (typing effect)\n- Low-latency handling of long responses\n- Progressive rendering of results\n- Streaming logs and intermediate output handling\n\nThe API returns a **`ReadableStream<StreamChunk>`**, which can be consumed using `for await ... of`.\n\n***\n\n## API Definition\n\n```ts\nfunction requestStreaming(options: {\n  systemPrompt?: string | null\n  messages: MessageItem | MessageItem[]\n  provider?: Provider\n  modelId?: string\n}): Promise<ReadableStream<StreamChunk>>\n```\n\n***\n\n## Parameters\n\n### options.systemPrompt (optional)\n\n- Type: `string | null`\n- Specifies the system prompt for this request.\n- If omitted:\n\n  - The default Assistant system prompt is used.\n- If provided:\n\n  - It **fully replaces** the default system prompt.\n  - Assistant Tools are **not available**.\n\nTypical use cases:\n\n- Defining a strict role (e.g. reviewer, translator, summarizer)\n- Enforcing output tone or behavior\n- Running the model without built-in tools\n\n***\n\n### options.messages\n\n- Type: `MessageItem | MessageItem[]`\n- Required\n- Represents the conversation context sent to the model.\n\n#### MessageItem\n\n```ts\ntype MessageItem = {\n  role: \"user\" | \"assistant\"\n  content: MessageContent | MessageContent[]\n}\n```\n\n- `role`\n\n  - `\"user\"`: user input\n  - `\"assistant\"`: previous assistant messages (for context)\n\n***\n\n### MessageContent Types\n\n#### Text\n\n```ts\ntype MessageTextContent =\n  | string\n  | { type: \"text\"; content: string }\n```\n\n***\n\n#### Image\n\n```ts\ntype MessageImageContent = {\n  type: \"image\"\n  content: string // data:image/...;base64,...\n}\n```\n\n***\n\n#### Document\n\n```ts\ntype MessageDocumentContent = {\n  type: \"document\"\n  content: {\n    mediaType: string\n    data: string // base64\n  }\n}\n```\n\n***\n\n### options.provider (optional)\n\n- Type: `Provider`\n- Specifies the AI provider.\n- If omitted, the currently configured default provider is used.\n- Supported values:\n\n  - `\"openai\"`\n  - `\"gemini\"`\n  - `\"anthropic\"`\n  - `\"deepseek\"`\n  - `\"openrouter\"`\n  - `{ custom: string }`\n\n***\n\n### options.modelId (optional)\n\n- Type: `string`\n- Specifies the model ID.\n- Must match a model actually supported by the selected provider.\n- If omitted, the provider’s default model is used.\n\n***\n\n## Return Value\n\n```ts\nPromise<ReadableStream<StreamChunk>>\n```\n\nOnce resolved, you receive a stream that can be consumed asynchronously.\n\n***\n\n## StreamChunk Types\n\nThe stream may emit the following chunk types.\n\n***\n\n### StreamTextChunk\n\n```ts\ntype StreamTextChunk = {\n  type: \"text\"\n  content: string\n}\n```\n\n- Represents user-visible generated text.\n- Multiple chunks concatenated form the final response.\n\n***\n\n### StreamReasoningChunk\n\n```ts\ntype StreamReasoningChunk = {\n  type: \"reasoning\"\n  content: string\n}\n```\n\n- Represents intermediate reasoning produced by the model.\n- Availability and granularity depend on the provider and model.\n\n***\n\n### StreamUsageChunk\n\n```ts\ntype StreamUsageChunk = {\n  type: \"usage\"\n  content: {\n    totalCost: number | null\n    cacheReadTokens: number | null\n    cacheWriteTokens: number | null\n    inputTokens: number\n    outputTokens: number\n  }\n}\n```\n\nNotes:\n\n- Typically emitted once near the end of the stream.\n- Some providers may omit certain fields.\n- `totalCost` may be `null` if the provider does not expose pricing data.\n\n***\n\n## Examples\n\n### Example 1: Basic streaming request\n\n```ts\nconst stream = await Assistant.requestStreaming({\n  messages: {\n    role: \"user\",\n    content: \"Tell me a short science fiction story.\"\n  },\n  provider: \"openai\"\n})\n\nlet result = \"\"\n\nfor await (const chunk of stream) {\n  if (chunk.type === \"text\") {\n    result += chunk.content\n    console.log(chunk.content)\n  }\n}\n```\n\n***\n\n### Example 2: Handling text, reasoning, and usage separately\n\n```ts\nconst stream = await Assistant.requestStreaming({\n  systemPrompt: \"You are a precise technical writing assistant.\",\n  messages: [\n    {\n      role: \"user\",\n      content: \"Explain what HTTP/3 is.\"\n    }\n  ]\n})\n\nlet answer = \"\"\nlet reasoningLog = \"\"\nlet usage = null\n\nfor await (const chunk of stream) {\n  switch (chunk.type) {\n    case \"text\":\n      answer += chunk.content\n      break\n\n    case \"reasoning\":\n      reasoningLog += chunk.content\n      break\n\n    case \"usage\":\n      usage = chunk.content\n      break\n  }\n}\n\nconsole.log(answer)\nconsole.log(usage)\n```\n\n***\n\n### Example 3: Streaming with document input\n\n```ts\nconst stream = await Assistant.requestStreaming({\n  messages: [\n    {\n      role: \"user\",\n      content: [\n        { type: \"text\", content: \"Summarize the key points of this document.\" },\n        {\n          type: \"document\",\n          content: {\n            mediaType: \"application/pdf\",\n            data: \"JVBERi0xLjQKJcfs...\"\n          }\n        }\n      ]\n    }\n  ],\n  provider: \"anthropic\"\n})\n\nfor await (const chunk of stream) {\n  if (chunk.type === \"text\") {\n    console.log(chunk.content)\n  }\n}\n```\n\n***\n\n## Usage Notes and Best Practices\n\n- Streams must be consumed **sequentially**; do not read concurrently.\n- For UI scenarios:\n\n  - Render `text` chunks immediately.\n  - Keep `reasoning` for debugging or developer modes.\n  - Process `usage` after completion.\n- If you no longer need the output, stop consuming the stream to avoid unnecessary cost.\n- Not all providers/models emit `reasoning` or `usage`.\n- Do not assume a chunk represents a complete sentence; chunk sizes vary.\n","routePath":"/doc/Changelog/2.4.5/Assistant/requestStreaming","lang":"en","toc":[{"id":"api-definition","text":"API Definition","depth":2,"charIndex":646},{"id":"parameters","text":"Parameters","depth":2,"charIndex":871},{"id":"optionssystemprompt-optional","text":"options.systemPrompt (optional)","depth":3,"charIndex":886},{"id":"optionsmessages","text":"options.messages","depth":3,"charIndex":1342},{"id":"messageitem","text":"MessageItem","depth":4,"charIndex":1471},{"id":"messagecontent-types","text":"MessageContent Types","depth":3,"charIndex":1699},{"id":"text","text":"Text","depth":4,"charIndex":1725},{"id":"image","text":"Image","depth":4,"charIndex":1827},{"id":"document","text":"Document","depth":4,"charIndex":1949},{"id":"optionsprovider-optional","text":"options.provider (optional)","depth":3,"charIndex":2099},{"id":"optionsmodelid-optional","text":"options.modelId (optional)","depth":3,"charIndex":2381},{"id":"return-value","text":"Return Value","depth":2,"charIndex":2580},{"id":"streamchunk-types","text":"StreamChunk Types","depth":2,"charIndex":2724},{"id":"streamtextchunk","text":"StreamTextChunk","depth":3,"charIndex":2799},{"id":"streamreasoningchunk","text":"StreamReasoningChunk","depth":3,"charIndex":2995},{"id":"streamusagechunk","text":"StreamUsageChunk","depth":3,"charIndex":3232},{"id":"examples","text":"Examples","depth":2,"charIndex":3658},{"id":"example-1-basic-streaming-request","text":"Example 1: Basic streaming request","depth":3,"charIndex":3671},{"id":"example-2-handling-text-reasoning-and-usage-separately","text":"Example 2: Handling text, reasoning, and usage separately","depth":3,"charIndex":4042},{"id":"example-3-streaming-with-document-input","text":"Example 3: Streaming with document input","depth":3,"charIndex":4683},{"id":"usage-notes-and-best-practices","text":"Usage Notes and Best Practices","depth":2,"charIndex":5247}],"frontmatter":{},"version":"","description":"requestStreaming requests a streaming response from the Assistant.\nInstead of returning a complete result at once, the Assistant emits chunks incrementally as the model generates output. This enables: Real-time UI updates (typing effect)Low-latency handling of long responsesProgressive rendering of resultsStreaming logs and intermediate output handling The API returns a ReadableStream<StreamChunk>, which can be consumed using for await ... of."},{"title":"requestStructuredData <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# requestStructuredData \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`requestStructuredData` requests **structured JSON output** from the assistant that conforms to a provided JSON schema.\nThis API is designed for workflows where you want a predictable, programmatically usable result rather than free-form text.\n\nCommon use cases include:\n\n- Extracting structured fields from natural language\n- Parsing invoices, receipts, and tickets\n- Generating configuration objects\n- Normalizing data across different AI providers/models\n\n***\n\n## Supported JSON Schema Types\n\nScripting defines a lightweight schema structure with three building blocks.\n\n### Primitive\n\n```ts\ntype JSONSchemaPrimitive = {\n  type: \"string\" | \"number\" | \"boolean\"\n  required?: boolean\n  description: string\n}\n```\n\n***\n\n### Object\n\n```ts\ntype JSONSchemaObject = {\n  type: \"object\"\n  properties: Record<string, JSONSchemaType>\n  required?: boolean\n  description: string\n}\n```\n\n***\n\n### Array\n\n```ts\ntype JSONSchemaArray = {\n  type: \"array\"\n  items: JSONSchemaType\n  required?: boolean\n  description: string\n}\n```\n\n***\n\n## API Signatures\n\n### Without images\n\n```ts\nfunction requestStructuredData<R>(\n  prompt: string,\n  schema: JSONSchemaArray | JSONSchemaObject,\n  options?: {\n    provider: Provider\n    modelId?: string\n  }\n): Promise<R>\n```\n\n### With images\n\n```ts\nfunction requestStructuredData<R>(\n  prompt: string,\n  images: string[],\n  schema: JSONSchemaArray | JSONSchemaObject,\n  options?: {\n    provider: Provider\n    modelId?: string\n  }\n): Promise<R>\n```\n\n***\n\n## Parameters\n\n### prompt\n\n- Type: `string`\n- Required\n- The instruction to the model describing what to extract or generate.\n- For best reliability, explicitly specify:\n\n  - expected formats (e.g., ISO date)\n  - currency rules\n  - how to handle missing fields\n\n### images (optional)\n\n- Type: `string[]`\n- Each item must be a **data URI**, e.g. `data:image/png;base64,...`\n- Not all providers/models support images.\n- Avoid passing too many images to reduce failure risk.\n\n### schema\n\n- Type: `JSONSchemaArray | JSONSchemaObject`\n- Required\n- Defines the **only acceptable** JSON structure for the response.\n- Every field should have a clear `description` to guide the model.\n\n### options.provider\n\n- Type: `Provider`\n- Optional (uses the default configured provider if omitted)\n- Supported:\n\n  - `\"openai\" | \"gemini\" | \"anthropic\" | \"deepseek\" | \"openrouter\" | { custom: string }`\n\n### options.modelId (optional)\n\n- Type: `string`\n- Must match a model actually supported by the chosen provider.\n- If omitted, Scripting uses the provider’s default model.\n\n***\n\n## Return Value\n\n```ts\nPromise<R>\n```\n\n- `R` is the generic type you provide.\n- The resolved value is expected to match your schema.\n- The promise rejects if the assistant cannot return a valid structured result.\n\n***\n\n## Examples\n\n### Example 1: Parse a receipt/bill into line items (time + amount)\n\nThis example asks the assistant to analyze a textual receipt and extract:\n\n- receipt time (`purchasedAt`)\n- line items (`items[]`)\n\n  - item name\n  - item time (if present; otherwise null)\n  - amount\n- total amount\n\n```ts\ntype ReceiptItem = {\n  name: string\n  time: string | null\n  amount: number\n}\n\ntype ReceiptParsed = {\n  purchasedAt: string | null\n  currency: string | null\n  items: ReceiptItem[]\n  total: number | null\n}\n\nconst receiptText = `\nStar Coffee\n2026-01-08 14:23\nLatte (Large)   $5.50\nBlueberry Muffin $3.20\nTax             $0.79\nTotal           $9.49\n`\n\nconst parsed = await Assistant.requestStructuredData<ReceiptParsed>(\n  [\n    \"Analyze the receipt text below and extract:\",\n    \"- purchasedAt: the purchase date/time in ISO-8601 if possible\",\n    \"- currency: currency code if you can infer it (otherwise null)\",\n    \"- items: only actual purchasable items (exclude tax/total lines)\",\n    \"  - name: item name\",\n    \"  - time: item-level time if present, otherwise null\",\n    \"  - amount: numeric amount\",\n    \"- total: numeric total if present, otherwise null\",\n    \"\",\n    \"Receipt:\",\n    receiptText\n  ].join(\"\\n\"),\n  {\n    type: \"object\",\n    description: \"Parsed receipt content\",\n    properties: {\n      purchasedAt: {\n        type: \"string\",\n        description: \"Purchase date/time in ISO-8601 format if available, otherwise an empty string\"\n      },\n      currency: {\n        type: \"string\",\n        description: \"Currency code like USD/EUR/CNY if inferable, otherwise an empty string\"\n      },\n      items: {\n        type: \"array\",\n        description: \"Purchased line items (exclude tax/total/subtotal/service fee lines)\",\n        items: {\n          type: \"object\",\n          description: \"A single purchased item line\",\n          properties: {\n            name: {\n              type: \"string\",\n              description: \"Item name\"\n            },\n            time: {\n              type: \"string\",\n              description: \"Item-level time in ISO-8601 if available, otherwise an empty string\"\n            },\n            amount: {\n              type: \"number\",\n              description: \"Item amount as a number\"\n            }\n          }\n        }\n      },\n      total: {\n        type: \"number\",\n        description: \"Total amount if present, otherwise -1\"\n      }\n    }\n  },\n  {\n    provider: \"openai\"\n  }\n)\n\n// Post-processing suggestion:\n// Treat \"\" as null for purchasedAt/currency/time, and -1 as null for total.\nconsole.log(parsed)\n```\n\n***\n\n### Example 2: Generate an array\n\n```ts\ntype Expense = {\n  name: string\n  amount: number\n}\n\nconst expenses = await Assistant.requestStructuredData<Expense[]>(\n  \"List three common daily expenses with estimated amounts.\",\n  {\n    type: \"array\",\n    description: \"A list of expenses\",\n    items: {\n      type: \"object\",\n      description: \"A single expense item\",\n      properties: {\n        name: { type: \"string\", description: \"Expense name\" },\n        amount: { type: \"number\", description: \"Estimated amount\" }\n      }\n    }\n  },\n  { provider: \"gemini\" }\n)\n```\n\n***\n\n### Example 3: Use images + schema\n\n```ts\ntype ImageSummary = {\n  description: string\n  containsText: boolean\n}\n\nconst summary = await Assistant.requestStructuredData<ImageSummary>(\n  \"Analyze the image and summarize the main content.\",\n  [\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD...\"],\n  {\n    type: \"object\",\n    description: \"Image analysis result\",\n    properties: {\n      description: { type: \"string\", description: \"What the image shows\" },\n      containsText: { type: \"boolean\", description: \"Whether readable text exists\" }\n    }\n  },\n  { provider: \"openai\" }\n)\n```\n\n***\n\n## Best Practices\n\n- Make the schema explicit and descriptive; ambiguous schemas lead to unstable results.\n- Prefer `requestStructuredData` over parsing free-form text when your output is used by program logic.\n- For business-critical extraction (e.g., finance/receipts), add strict formatting rules in `prompt`.\n","routePath":"/doc/Changelog/2.4.5/Assistant/requestStructuredData","lang":"en","toc":[{"id":"supported-json-schema-types","text":"Supported JSON Schema Types","depth":2,"charIndex":629},{"id":"primitive","text":"Primitive","depth":3,"charIndex":739},{"id":"object","text":"Object","depth":3,"charIndex":884},{"id":"array","text":"Array","depth":3,"charIndex":1045},{"id":"api-signatures","text":"API Signatures","depth":2,"charIndex":1182},{"id":"without-images","text":"Without images","depth":3,"charIndex":1201},{"id":"with-images","text":"With images","depth":3,"charIndex":1407},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1635},{"id":"prompt","text":"prompt","depth":3,"charIndex":1650},{"id":"images-optional","text":"images (optional)","depth":3,"charIndex":1897},{"id":"schema","text":"schema","depth":3,"charIndex":2108},{"id":"optionsprovider","text":"options.provider","depth":3,"charIndex":2312},{"id":"optionsmodelid-optional","text":"options.modelId (optional)","depth":3,"charIndex":2518},{"id":"return-value","text":"Return Value","depth":2,"charIndex":2696},{"id":"examples","text":"Examples","depth":2,"charIndex":2915},{"id":"example-1-parse-a-receiptbill-into-line-items-time--amount","text":"Example 1: Parse a receipt/bill into line items (time + amount)","depth":3,"charIndex":2928},{"id":"example-2-generate-an-array","text":"Example 2: Generate an array","depth":3,"charIndex":5480},{"id":"example-3-use-images--schema","text":"Example 3: Use images + schema","depth":3,"charIndex":6049},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":6640}],"frontmatter":{},"version":"","description":"requestStructuredData requests structured JSON output from the assistant that conforms to a provided JSON schema.\nThis API is designed for workflows where you want a predictable, programmatically usable result rather than free-form text. Common use cases include: Extracting structured fields from natural languageParsing invoices, receipts, and ticketsGenerating configuration objectsNormalizing data across different AI providers/models"},{"title":"CalendarEvent","content":"The `CalendarEvent` API enables creating, reading, editing, and managing events in the iOS calendar.\nDevelopers can configure event details such as title, time, location, participants, recurrence rules, alarms, availability, and structured locations, and can display system-provided interfaces for creating or editing events.\n\n***\n\n# 1. Types\n\n## EventParticipant\n\nRepresents an attendee of the event:\n\n- `isCurrentUser: boolean` – Indicates whether this attendee represents the current user\n- `name?: string` – Display name\n- `role: ParticipantRole` – The attendee’s role\n- `type: ParticipantType` – The type of attendee\n- `status: ParticipantStatus` – The attendee’s participation status\n\n### ParticipantRole\n\n- `chair`\n- `nonParticipant`\n- `optional`\n- `required`\n- `unknown`\n\n### ParticipantType\n\n- `group`\n- `person`\n- `resource`\n- `room`\n- `unknown`\n\n### ParticipantStatus\n\n- `unknown`\n- `pending`\n- `accepted`\n- `declined`\n- `tentative`\n- `delegated`\n- `completed`\n- `inProcess`\n\n***\n\n## EventAvailability\n\nIndicates how the event affects the user’s availability:\n\n- `notSupported`\n- `busy`\n- `free`\n- `tentative`\n- `unavailable`\n\n***\n\n## EventStructuredLocation\n\nDescribes a location that can be used for location-based alarms.\n\n- `title: string | null` – A name for the location\n- `geoLocation: LocationInfo | null` – Latitude and longitude\n- `radius: number` – Radius in meters for the geofence trigger\n\n***\n\n## AlarmProximity\n\nDescribes how a location alarm triggers:\n\n- `none`\n- `enter`\n- `leave`\n\n***\n\n# 2. EventAlarm\n\n`CalendarEvent` supports attaching one or more `EventAlarm` instances.\nAlarms may be:\n\n- absolute date alarms\n- relative alarms (relative to the start of the event)\n- location-based alarms using geofence triggers\n\nSee the EventAlarm documentation for detailed information.\n\n***\n\n# 3. CalendarEvent Class\n\n## Constructor\n\n```ts\nnew(): CalendarEvent\n```\n\nCreates an in-memory event instance.\nCall `save()` to persist it into the calendar.\n\n***\n\n# 4. Properties\n\n## General Information\n\n### identifier: string\n\nA unique identifier for the event.\n\n### title: string\n\nThe title of the event.\n\n### notes: string | null\n\nAdditional notes.\n\n### url: string | null\n\nA URL associated with the event.\n\n### calendar: Calendar | null\n\nThe calendar to which the event belongs.\nThis property cannot be set to `null`. To remove an event, use `remove()`.\n\n***\n\n## Time and Location\n\n### isAllDay: boolean\n\nIndicates whether the event lasts all day.\n\n### startDate: Date\n\nThe start date and time.\n\n### endDate: Date\n\nThe end date and time.\n\n### timeZone: string | null\n\nThe event’s time zone.\n\n### location: string | null\n\nA text description of the location.\n\n### structuredLocation: EventStructuredLocation | null\n\nA structured location that includes geolocation data for alarms.\n\n***\n\n## Event Metadata\n\n### creationDate: Date | null\n\nThe date when the event was created.\n\n### lastModifiedDate: Date | null\n\nThe date of the most recent modification.\n\n### occurrenceDate: Date\n\nFor recurring events, this is the original scheduled date of this specific occurrence.\n\n### isDetached: boolean\n\nIndicates whether this event represents a modified occurrence of a recurring series.\n\n***\n\n## Participants and Availability\n\n### attendees: EventParticipant\\[] | null\n\nAn array of attendees.\n\n### organizer: EventParticipant | null\n\nThe organizer of the event.\n\n### hasAttendees: boolean\n\nIndicates whether the event has attendees.\n\n### availability: EventAvailability\n\nIndicates the event’s impact on availability.\n\n***\n\n## Alarms\n\n### alarms: EventAlarm\\[] | null\n\nThe alarms associated with the event.\n\n### hasAlarm: boolean\n\nIndicates whether the event has any alarms.\n\n***\n\n## Recurrence\n\n### recurrenceRules: RecurrenceRule\\[] | null\n\nThe recurrence rules of the event.\n\n### hasRecurrenceRules: boolean\n\nIndicates whether the event has recurrence rules.\n\n***\n\n## Additional State Flags\n\n### hasNotes: boolean\n\nIndicates whether the event contains notes.\n\n### hasChanges: boolean\n\nIndicates whether the event or any nested objects contain unsaved changes.\n\n***\n\n# 5. Instance Methods\n\n## Alarm Management\n\n### addAlarm(alarm: EventAlarm): void\n\nAdds an alarm to the event.\n\n### removAlarm(alarm: EventAlarm): void\n\nRemoves an alarm from the event.\n(Note: The method name is `removAlarm`.)\n\n***\n\n## Recurrence Management\n\n### addRecurrenceRule(rule: RecurrenceRule): void\n\nAppends a recurrence rule.\n\n### removeRecurrenceRule(rule: RecurrenceRule): void\n\nRemoves a recurrence rule.\n\n***\n\n## Saving and Deleting\n\n### `save(): Promise<void>`\n\nSaves the event to the calendar.\n\n### `remove(): Promise<void>`\n\nRemoves the event from the calendar.\n\n***\n\n## Editing UI\n\n### `presentEditView(): Promise<EventEditViewAction>`\n\nDisplays the system event-editing interface and resolves with:\n\n- `saved`\n- `deleted`\n- `canceled`\n\n***\n\n# 6. Static Methods\n\n### `CalendarEvent.getAll(startDate: Date, endDate: Date, calendars?: Calendar[]): Promise<CalendarEvent[]>`\n\nFetches calendar events within a given date range.\n\n- Provide an array of calendars to restrict the search\n- Use `null` or omit the parameter to search all calendars\n\n***\n\n### `CalendarEvent.presentCreateView(): Promise<CalendarEvent | null>`\n\nDisplays the system interface for creating a new event.\n\n- Returns the created event if saved\n- Returns `null` if canceled\n\n***\n\n# 7. Usage Examples\n\n## Creating and Saving an Event\n\n```ts\nconst defaultCalendar = await Calendar.defaultForEvents()\nconst event = new CalendarEvent()\nevent.title = \"Team Meeting\"\nevent.calendar = defaultCalendar!\nevent.startDate = new Date(\"2024-01-15T09:00:00\")\nevent.endDate = new Date(\"2024-01-15T10:00:00\")\nevent.location = \"Conference Room\"\n\nawait event.save()\n```\n\n***\n\n## Adding a Recurrence Rule\n\n```ts\nconst rule = RecurrenceRule.create({\n  frequency: \"weekly\",\n  interval: 1,\n  daysOfTheWeek: [\"monday\", \"wednesday\", \"friday\"],\n  end: RecurrenceEnd.fromDate(new Date(\"2024-12-31\")),\n})\n\nevent.addRecurrenceRule(rule)\nawait event.save()\n```\n\n***\n\n## Adding an Alarm\n\n```ts\nconst alarm = EventAlarm.fromRelativeOffset(-600)\nevent.addAlarm(alarm)\nawait event.save()\n```\n\n***\n\n## Fetching Events\n\n```ts\nconst events = await CalendarEvent.getAll(\n  new Date(\"2024-01-01\"),\n   new Date(\"2024-01-31\")\n )\n\nfor (const e of events) {\n  console.log(`Event: ${e.title}, Starts: ${e.startDate}`)\n}\n```\n\n***\n\n## Presenting the Create View\n\n```ts\nconst created = await CalendarEvent.presentCreateView()\nif (created) {\n  console.log(\"Created event:\", created.title)\n}\n```\n\n***\n\n## Editing an Existing Event\n\n```ts\nconst result = await event.presentEditView()\nconsole.log(\"Edit action:\", result)\n```\n\n***\n\n## Removing an Event\n\n```ts\nawait event.remove()\nconsole.log(\"Event removed\")\n```\n\n***\n\n# 8. Additional Notes\n\n### Time Zone Considerations\n\nWhen working with events that span time zones, set `timeZone` explicitly to avoid incorrect scheduling or display.\n\n### Recurring Events\n\nEditing individual occurrences of a recurring event may produce a detached instance.\nUse `occurrenceDate` to determine the original date of the modified occurrence.\n\n### Attendees\n\nAttendee data depends on the calendar source (iCloud, Exchange, etc.) and may vary in availability.\n\n### Structured Location\n\nWhen using location-based alarms, the user must grant the necessary location permissions.\n","routePath":"/doc/Changelog/2.4.5/CalendarEvent","lang":"en","toc":[{"id":"eventparticipant","text":"EventParticipant","depth":2,"charIndex":344},{"id":"participantrole","text":"ParticipantRole","depth":3,"charIndex":691},{"id":"participanttype","text":"ParticipantType","depth":3,"charIndex":780},{"id":"participantstatus","text":"ParticipantStatus","depth":3,"charIndex":857},{"id":"eventavailability","text":"EventAvailability","depth":2,"charIndex":992},{"id":"eventstructuredlocation","text":"EventStructuredLocation","depth":2,"charIndex":1143},{"id":"alarmproximity","text":"AlarmProximity","depth":2,"charIndex":1419},{"id":"constructor","text":"Constructor","depth":2,"charIndex":1837},{"id":"general-information","text":"General Information","depth":2,"charIndex":1992},{"id":"identifier-string","text":"identifier: string","depth":3,"charIndex":2016},{"id":"title-string","text":"title: string","depth":3,"charIndex":2076},{"id":"notes-string--null","text":"notes: string | null","depth":3,"charIndex":2120},{"id":"url-string--null","text":"url: string | null","depth":3,"charIndex":2165},{"id":"calendar-calendar--null","text":"calendar: Calendar | null","depth":3,"charIndex":2223},{"id":"time-and-location","text":"Time and Location","depth":2,"charIndex":2376},{"id":"isallday-boolean","text":"isAllDay: boolean","depth":3,"charIndex":2398},{"id":"startdate-date","text":"startDate: Date","depth":3,"charIndex":2465},{"id":"enddate-date","text":"endDate: Date","depth":3,"charIndex":2512},{"id":"timezone-string--null","text":"timeZone: string | null","depth":3,"charIndex":2555},{"id":"location-string--null","text":"location: string | null","depth":3,"charIndex":2608},{"id":"structuredlocation-eventstructuredlocation--null","text":"structuredLocation: EventStructuredLocation | null","depth":3,"charIndex":2674},{"id":"event-metadata","text":"Event Metadata","depth":2,"charIndex":2801},{"id":"creationdate-date--null","text":"creationDate: Date | null","depth":3,"charIndex":2820},{"id":"lastmodifieddate-date--null","text":"lastModifiedDate: Date | null","depth":3,"charIndex":2889},{"id":"occurrencedate-date","text":"occurrenceDate: Date","depth":3,"charIndex":2967},{"id":"isdetached-boolean","text":"isDetached: boolean","depth":3,"charIndex":3081},{"id":"participants-and-availability","text":"Participants and Availability","depth":2,"charIndex":3197},{"id":"attendees-eventparticipant--null","text":"attendees: EventParticipant[] | null","depth":3,"charIndex":-1},{"id":"organizer-eventparticipant--null","text":"organizer: EventParticipant | null","depth":3,"charIndex":3298},{"id":"hasattendees-boolean","text":"hasAttendees: boolean","depth":3,"charIndex":3367},{"id":"availability-eventavailability","text":"availability: EventAvailability","depth":3,"charIndex":3438},{"id":"alarms","text":"Alarms","depth":2,"charIndex":3527},{"id":"alarms-eventalarm--null","text":"alarms: EventAlarm[] | null","depth":3,"charIndex":-1},{"id":"hasalarm-boolean","text":"hasAlarm: boolean","depth":3,"charIndex":3611},{"id":"recurrence","text":"Recurrence","depth":2,"charIndex":3684},{"id":"recurrencerules-recurrencerule--null","text":"recurrenceRules: RecurrenceRule[] | null","depth":3,"charIndex":-1},{"id":"hasrecurrencerules-boolean","text":"hasRecurrenceRules: boolean","depth":3,"charIndex":3782},{"id":"additional-state-flags","text":"Additional State Flags","depth":2,"charIndex":3871},{"id":"hasnotes-boolean","text":"hasNotes: boolean","depth":3,"charIndex":3898},{"id":"haschanges-boolean","text":"hasChanges: boolean","depth":3,"charIndex":3966},{"id":"alarm-management","text":"Alarm Management","depth":2,"charIndex":4095},{"id":"addalarmalarm-eventalarm-void","text":"addAlarm(alarm: EventAlarm): void","depth":3,"charIndex":4116},{"id":"removalarmalarm-eventalarm-void","text":"removAlarm(alarm: EventAlarm): void","depth":3,"charIndex":4184},{"id":"recurrence-management","text":"Recurrence Management","depth":2,"charIndex":4305},{"id":"addrecurrencerulerule-recurrencerule-void","text":"addRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":4331},{"id":"removerecurrencerulerule-recurrencerule-void","text":"removeRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":4410},{"id":"saving-and-deleting","text":"Saving and Deleting","depth":2,"charIndex":4497},{"id":"save-promisevoid","text":"`save(): Promise<void>`","depth":3,"charIndex":4521},{"id":"remove-promisevoid","text":"`remove(): Promise<void>`","depth":3,"charIndex":4584},{"id":"editing-ui","text":"Editing UI","depth":2,"charIndex":4658},{"id":"presenteditview-promiseeventeditviewaction","text":"`presentEditView(): Promise<EventEditViewAction>`","depth":3,"charIndex":4673},{"id":"calendareventgetallstartdate-date-enddate-date-calendars-calendar-promisecalendarevent","text":"`CalendarEvent.getAll(startDate: Date, endDate: Date, calendars?: Calendar[]): Promise<CalendarEvent[]>`","depth":3,"charIndex":4854},{"id":"calendareventpresentcreateview-promisecalendarevent--null","text":"`CalendarEvent.presentCreateView(): Promise<CalendarEvent | null>`","depth":3,"charIndex":5136},{"id":"creating-and-saving-an-event","text":"Creating and Saving an Event","depth":2,"charIndex":5358},{"id":"adding-a-recurrence-rule","text":"Adding a Recurrence Rule","depth":2,"charIndex":5715},{"id":"adding-an-alarm","text":"Adding an Alarm","depth":2,"charIndex":5995},{"id":"fetching-events","text":"Fetching Events","depth":2,"charIndex":6122},{"id":"presenting-the-create-view","text":"Presenting the Create View","depth":2,"charIndex":6344},{"id":"editing-an-existing-event","text":"Editing an Existing Event","depth":2,"charIndex":6511},{"id":"removing-an-event","text":"Removing an Event","depth":2,"charIndex":6638},{"id":"time-zone-considerations","text":"Time Zone Considerations","depth":3,"charIndex":6749},{"id":"recurring-events","text":"Recurring Events","depth":3,"charIndex":6895},{"id":"attendees","text":"Attendees","depth":3,"charIndex":7083},{"id":"structured-location","text":"Structured Location","depth":3,"charIndex":7199}],"frontmatter":{},"version":"","description":"The CalendarEvent API enables creating, reading, editing, and managing events in the iOS calendar.\nDevelopers can configure event details such as title, time, location, participants, recurrence rules, alarms, availability, and structured locations, and can display system-provided interfaces for creating or editing events."},{"title":"DateFormatter","content":"The `DateFormatter` class provides comprehensive date and time formatting capabilities. It allows converting `Date` objects into localized strings and parsing strings back into `Date` values.\nThis API wraps iOS-native date formatting behavior and supports multiple calendars, time zones, localized formats, and custom formatting templates.\n\n***\n\n# Enums and Type Definitions\n\n## DateFormatterStyle\n\nDefines the level of detail used for date or time formatting.\n\n| Value    | Description                                   |\n| -------- | --------------------------------------------- |\n| `none`   | No date or time displayed                     |\n| `short`  | Short format, e.g., `12/1/25`, `3:20 PM`      |\n| `medium` | Medium format, e.g., `Dec 1, 2025`            |\n| `long`   | Long format, e.g., `December 1, 2025`         |\n| `full`   | Full format, e.g., `Monday, December 1, 2025` |\n\n***\n\n## DateFormatterBehavior\n\nControls the formatter behavior mode.\n\n| Value          | Description                                  |\n| -------------- | -------------------------------------------- |\n| `default`      | System default behavior                      |\n| `behavior10_4` | Compatibility mode for older system behavior |\n\n***\n\n## CalendarIdentifier\n\nSpecifies the calendar used for formatting. This enables formatting using:\n\n- Gregorian calendar\n- Chinese lunar calendar\n- Japanese calendar\n- Islamic calendars\n- Buddhist calendar\n- ISO 8601 calendar\n  and more.\n\nExample values:\n\n```\n\"current\" | \"gregorian\" | \"chinese\" | \"japanese\" | \"islamic\" | \"iso8601\" | ...\n```\n\nNotes:\n\n- `\"current\"` uses the system’s current calendar\n- `\"autoupdatingCurrent\"` automatically updates when system settings change\n\n***\n\n## TimeZoneIdentifier\n\nSpecifies the time zone.\n\nAvailable values:\n\n```\n\"current\" | \"autoupdatingCurrent\" | \"gmt\" | string\n```\n\nIf a string is used, it must be a valid time-zone identifier such as:\n\n- `\"Asia/Shanghai\"`\n- `\"America/Los_Angeles\"`\n- `\"UTC\"`\n\n***\n\n# Class: DateFormatter\n\n## Initialization\n\n### `new(): DateFormatter`\n\nCreates a new date formatter instance.\n\n***\n\n# Static Methods\n\n## `DateFormatter.localizedString(date, options)`\n\nReturns a localized date string based on the specified date and time styles.\n\n```ts\nDateFormatter.localizedString(date: Date, options: {\n  dateStyle: DateFormatterStyle\n  timeStyle: DateFormatterStyle\n}): string\n```\n\nUseful for quick formatting without manually configuring a formatter instance.\n\n***\n\n## `DateFormatter.dateFormat(template, locale?)`\n\nGenerates a localized date format string based on a template.\n\n```\nstatic dateFormat(template: string, locale?: string): string | null\n```\n\nExamples of templates:\n\n- `\"yyyyMMdd\"`\n- `\"MMM d\"`\n- `\"HH:mm\"`\n\nIf `locale` is omitted, the system locale is used.\n\n***\n\n# Instance Methods\n\n## `string(date: Date): string`\n\nFormats a `Date` into a string.\n\nBehavior:\n\n- If `dateFormat` is set, it takes priority.\n- Otherwise, formatting is based on `dateStyle` and `timeStyle`.\n\n***\n\n## `date(string: string): Date | null`\n\nParses a string into a `Date` object.\nParsing behavior depends on properties such as `dateFormat`, `locale`, and `calendar`.\n\n***\n\n## `setLocalizedDateFormatFromTemplate(template: string): void`\n\nGenerates a localized format string from the template and assigns it to `dateFormat`.\n\n***\n\n# Properties\n\n## Core Formatting Properties\n\n### `calendar: CalendarIdentifier`\n\nDetermines the calendar system used for formatting.\nExamples: `\"gregorian\"`, `\"chinese\"`, `\"buddhist\"`.\n\n***\n\n### `timeZone: TimeZoneIdentifier`\n\nDefines the time zone, such as `\"Asia/Shanghai\"`.\n\n***\n\n### `locale: string`\n\nSpecifies the formatting locale, such as:\n\n- `\"zh_CN\"`\n- `\"en_US\"`\n- `\"ja_JP\"`\n\n***\n\n### `dateFormat: string`\n\nManually sets a custom date format template. Examples:\n\n```\n\"yyyy-MM-dd HH:mm\"\n\"MMM d, yyyy\"\n\"EEEE\"\n```\n\nWhen set, it overrides `dateStyle` and `timeStyle`.\n\n***\n\n### `dateStyle: DateFormatterStyle`\n\n### `timeStyle: DateFormatterStyle`\n\nControl the granularity of date and time output.\n\n***\n\n## Behavior Control\n\n### `generatesCalendarDates: boolean`\n\nControls whether the formatter generates calendar-based dates. Typically left as default.\n\n***\n\n### `formatterBehavior: DateFormatterBehavior`\n\nControls the formatter behavior mode.\n\n***\n\n### `isLenient: boolean`\n\nEnables lenient parsing of input strings, allowing more flexible interpretation.\nDefaults to `false` to avoid accidental incorrect parsing.\n\n***\n\n### `twoDigitStartDate: Date | null`\n\nDetermines the interpretation range for two-digit years.\n\n***\n\n### `defaultDate: Date | null`\n\nUsed when parsing strings that do not specify a full date.\n\n***\n\n## Localization Symbol Properties\n\nThese properties customize how months, weekdays, quarters, and eras are displayed:\n\n- `eraSymbols`\n- `monthSymbols`\n- `shortMonthSymbols`\n- `weekdaySymbols`\n- `shortWeekdaySymbols`\n- `standaloneMonthSymbols`\n- `quarterSymbols`\n- `veryShortWeekdaySymbols`\n- `amSymbol`\n- `pmSymbol`\n- `gregorianStartDate`\n\nThese are typically used only when overriding the system-provided localized symbols.\n\n***\n\n## Relative Date Formatting\n\n### `doesRelativeDateFormatting: boolean`\n\nEnables output like:\n\n- Today\n- Yesterday\n- Tomorrow\n\nin the corresponding locale.\n\nExample in Chinese:\n\n- 今天\n- 昨天\n\nOnly works with certain date styles (e.g., medium and long).\n\n***\n\n# Code Examples\n\n***\n\n## Example 1: Localized formatting using dateStyle and timeStyle\n\n```tsx\n\n\nconst df = new DateFormatter()\ndf.locale = \"zh_CN\"\ndf.dateStyle = DateFormatterStyle.full\ndf.timeStyle = DateFormatterStyle.short\n\nconst result = df.string(new Date())\n// Example output: \"Friday, December 12, 2025 at 3:20 PM\"\n```\n\n***\n\n## Example 2: Custom date format\n\n```tsx\nconst df = new DateFormatter()\ndf.locale = \"en_US\"\ndf.dateFormat = \"yyyy-MM-dd HH:mm\"\ndf.timeZone = \"Asia/Shanghai\"\n\nconst str = df.string(new Date())\n// Example output: \"2025-12-12 15:20\"\n```\n\n***\n\n## Example 3: Formatting using the Chinese lunar calendar\n\n```tsx\nconst df = new DateFormatter()\ndf.calendar = \"chinese\"\ndf.locale = \"zh_CN\"\ndf.dateFormat = \"yyyy年MM月dd日 EEEE\"\n\nconst lunar = df.string(new Date())\n// Example output: \"四十三年十月二十二日 星期五\"\n```\n\n***\n\n## Example 4: Parsing a date string\n\n```tsx\nconst df = new DateFormatter()\ndf.dateFormat = \"yyyy/MM/dd HH:mm\"\n\nconst date = df.date(\"2025/12/12 08:00\")\n```\n\n***\n\n## Example 5: Using a localized template\n\n```tsx\nconst df = new DateFormatter()\ndf.locale = \"zh_CN\"\n\n// Automatically becomes a localized format, e.g., \"12月12日\"\ndf.setLocalizedDateFormatFromTemplate(\"MMdd\")\n\nconst result = df.string(new Date())\n```\n\n***\n\n## Example 6: Quick formatting using localizedString\n\n```tsx\nconst str = DateFormatter.localizedString(new Date(), {\n  dateStyle: DateFormatterStyle.medium,\n  timeStyle: DateFormatterStyle.short\n})\n```\n","routePath":"/doc/Changelog/2.4.5/DateFormatter","lang":"en","toc":[{"id":"dateformatterstyle","text":"DateFormatterStyle","depth":2,"charIndex":376},{"id":"dateformatterbehavior","text":"DateFormatterBehavior","depth":2,"charIndex":895},{"id":"calendaridentifier","text":"CalendarIdentifier","depth":2,"charIndex":1230},{"id":"timezoneidentifier","text":"TimeZoneIdentifier","depth":2,"charIndex":1712},{"id":"initialization","text":"Initialization","depth":2,"charIndex":1997},{"id":"new-dateformatter","text":"`new(): DateFormatter`","depth":3,"charIndex":2016},{"id":"dateformatterlocalizedstringdate-options","text":"`DateFormatter.localizedString(date, options)`","depth":2,"charIndex":2107},{"id":"dateformatterdateformattemplate-locale","text":"`DateFormatter.dateFormat(template, locale?)`","depth":2,"charIndex":2460},{"id":"stringdate-date-string","text":"`string(date: Date): string`","depth":2,"charIndex":2791},{"id":"datestring-string-date--null","text":"`date(string: string): Date | null`","depth":2,"charIndex":2984},{"id":"setlocalizeddateformatfromtemplatetemplate-string-void","text":"`setLocalizedDateFormatFromTemplate(template: string): void`","depth":2,"charIndex":3155},{"id":"core-formatting-properties","text":"Core Formatting Properties","depth":2,"charIndex":3326},{"id":"calendar-calendaridentifier","text":"`calendar: CalendarIdentifier`","depth":3,"charIndex":3357},{"id":"timezone-timezoneidentifier","text":"`timeZone: TimeZoneIdentifier`","depth":3,"charIndex":3503},{"id":"locale-string","text":"`locale: string`","depth":3,"charIndex":3595},{"id":"dateformat-string","text":"`dateFormat: string`","depth":3,"charIndex":3702},{"id":"datestyle-dateformatterstyle","text":"`dateStyle: DateFormatterStyle`","depth":3,"charIndex":3891},{"id":"timestyle-dateformatterstyle","text":"`timeStyle: DateFormatterStyle`","depth":3,"charIndex":3928},{"id":"behavior-control","text":"Behavior Control","depth":2,"charIndex":4020},{"id":"generatescalendardates-boolean","text":"`generatesCalendarDates: boolean`","depth":3,"charIndex":4041},{"id":"formatterbehavior-dateformatterbehavior","text":"`formatterBehavior: DateFormatterBehavior`","depth":3,"charIndex":4176},{"id":"islenient-boolean","text":"`isLenient: boolean`","depth":3,"charIndex":4268},{"id":"twodigitstartdate-date--null","text":"`twoDigitStartDate: Date | null`","depth":3,"charIndex":4440},{"id":"defaultdate-date--null","text":"`defaultDate: Date | null`","depth":3,"charIndex":4541},{"id":"localization-symbol-properties","text":"Localization Symbol Properties","depth":2,"charIndex":4638},{"id":"relative-date-formatting","text":"Relative Date Formatting","depth":2,"charIndex":5069},{"id":"doesrelativedateformatting-boolean","text":"`doesRelativeDateFormatting: boolean`","depth":3,"charIndex":5098},{"id":"example-1-localized-formatting-using-datestyle-and-timestyle","text":"Example 1: Localized formatting using dateStyle and timeStyle","depth":2,"charIndex":5346},{"id":"example-2-custom-date-format","text":"Example 2: Custom date format","depth":2,"charIndex":5657},{"id":"example-3-formatting-using-the-chinese-lunar-calendar","text":"Example 3: Formatting using the Chinese lunar calendar","depth":2,"charIndex":5897},{"id":"example-4-parsing-a-date-string","text":"Example 4: Parsing a date string","depth":2,"charIndex":6156},{"id":"example-5-using-a-localized-template","text":"Example 5: Using a localized template","depth":2,"charIndex":6318},{"id":"example-6-quick-formatting-using-localizedstring","text":"Example 6: Quick formatting using localizedString","depth":2,"charIndex":6573}],"frontmatter":{},"version":"","description":"The DateFormatter class provides comprehensive date and time formatting capabilities. It allows converting Date objects into localized strings and parsing strings back into Date values.\nThis API wraps iOS-native date formatting behavior and supports multiple calendars, time zones, localized formats, and custom formatting templates."},{"title":"EventAlarm","content":"`EventAlarm` represents a reminder rule that can be attached to both **CalendarEvent** and **Reminder** objects.\nIt supports three major alarm types:\n\n- **Absolute-time alarms**\n- **Relative alarms** (relative to an event’s start time)\n- **Location-based alarms** (geofence triggers)\n\nThis class aligns with the behavior of iOS EventKit alarms and provides flexible notification capabilities across calendar and reminder data.\n\n***\n\n## 1. Creating an Alarm\n\n### EventAlarm.fromAbsoluteDate(date: Date): EventAlarm\n\nCreates an alarm that fires at a specific, absolute moment in time.\n\n- Independent from the event’s `startDate`\n- Triggers when the system time reaches the specified date\n\nExample:\n\n```ts\nconst alarm = EventAlarm.fromAbsoluteDate(new Date(\"2025-01-01T09:00:00\"))\n```\n\n***\n\n### EventAlarm.fromRelativeOffset(offset: DurationInSeconds): EventAlarm\n\nCreates an alarm that fires relative to the event’s start time.\n\n`offset` interpretation:\n\n- Negative value: fires *before* the event starts\n- Positive value: fires *after* the event starts\n\nExample (alarm 10 minutes before the event):\n\n```ts\nconst alarm = EventAlarm.fromRelativeOffset(-600)\n```\n\n***\n\n## 2. Properties\n\n### absoluteDate: Date | null\n\nThe absolute date on which the alarm fires.\n\nBehavior:\n\n- Setting this property on a **relative alarm** converts it into an absolute alarm and clears `relativeOffset`.\n- When `null`, the alarm may be relative or location-based.\n\n***\n\n### relativeOffset: number\n\nTime offset in seconds from the event’s start time.\n\nBehavior:\n\n- Setting this property on an **absolute alarm** converts the alarm into a relative alarm and clears `absoluteDate`.\n- Always measured relative to the `startDate` of a CalendarEvent or Reminder.\n\nExample:\n\n```ts\nalarm.relativeOffset = -300  // fire 5 minutes before\n```\n\n***\n\n### structuredLocation: EventStructuredLocation | null\n\nDefines the location used for location-based alarms.\n\n`EventStructuredLocation` contains:\n\n- `title: string | null` – Human-readable name\n- `geoLocation: LocationInfo | null` – Latitude/longitude\n- `radius: number` – Geofence radius in meters\n\nExample:\n\n```ts\nalarm.structuredLocation = {\n  title: \"Office\",\n  geoLocation: { latitude: 37.332, longitude: -122.030 },\n  radius: 100\n}\n```\n\n***\n\n### proximity: AlarmProximity\n\nDefines how the location alarm is triggered.\n\n| Value   | Meaning                                 |\n| ------- | --------------------------------------- |\n| `none`  | Default; no location trigger            |\n| `enter` | Trigger when the user enters the region |\n| `leave` | Trigger when the user exits the region  |\n\nExample:\n\n```ts\nalarm.proximity = AlarmProximity.enter\n```\n\n***\n\n## 3. Usage in CalendarEvent and Reminder APIs\n\n### Using EventAlarm with CalendarEvent\n\n```ts\nconst event = new CalendarEvent()\nevent.title = \"Team Meeting\"\nevent.startDate = ...\nevent.endDate = ...\n\nconst alarm = EventAlarm.fromRelativeOffset(-900) // 15 min before\nevent.addAlarm(alarm)\n\nawait event.save()\n```\n\n***\n\n### Using EventAlarm with Reminder\n\nReminders also support alarms:\n\n```ts\nconst reminder = new Reminder()\nreminder.title = \"Pay Electricity Bill\"\n\nconst alarm = EventAlarm.fromAbsoluteDate(new Date(\"2025-02-01T10:00:00\"))\nreminder.addAlarm(alarm)\n\nawait reminder.save()\n```\n\nLocation-based alarms work for reminders as well.\n\n***\n\n## 4. Best Practices\n\n1. **Use absolute alarms** for fixed calendar moments (e.g., birthdays, bill due dates).\n2. **Use relative alarms** when the trigger depends on the event’s start time (e.g., meeting reminders).\n3. **Use geofence alarms** for contextual triggers (e.g., remind me to pick up a package when I get home).\n4. Location alarms require appropriate location permissions from the user.\n","routePath":"/doc/Changelog/2.4.5/EventAlarm","lang":"en","toc":[{"id":"1-creating-an-alarm","text":"1. Creating an Alarm","depth":2,"charIndex":433},{"id":"eventalarmfromabsolutedatedate-date-eventalarm","text":"EventAlarm.fromAbsoluteDate(date: Date): EventAlarm","depth":3,"charIndex":458},{"id":"eventalarmfromrelativeoffsetoffset-durationinseconds-eventalarm","text":"EventAlarm.fromRelativeOffset(offset: DurationInSeconds): EventAlarm","depth":3,"charIndex":788},{"id":"2-properties","text":"2. Properties","depth":2,"charIndex":1165},{"id":"absolutedate-date--null","text":"absoluteDate: Date | null","depth":3,"charIndex":1183},{"id":"relativeoffset-number","text":"relativeOffset: number","depth":3,"charIndex":1448},{"id":"structuredlocation-eventstructuredlocation--null","text":"structuredLocation: EventStructuredLocation | null","depth":3,"charIndex":1816},{"id":"proximity-alarmproximity","text":"proximity: AlarmProximity","depth":3,"charIndex":2264},{"id":"3-usage-in-calendarevent-and-reminder-apis","text":"3. Usage in CalendarEvent and Reminder APIs","depth":2,"charIndex":2677},{"id":"using-eventalarm-with-calendarevent","text":"Using EventAlarm with CalendarEvent","depth":3,"charIndex":2725},{"id":"using-eventalarm-with-reminder","text":"Using EventAlarm with Reminder","depth":3,"charIndex":2997},{"id":"4-best-practices","text":"4. Best Practices","depth":2,"charIndex":3328}],"frontmatter":{},"version":"","description":"EventAlarm represents a reminder rule that can be attached to both CalendarEvent and Reminder objects.\nIt supports three major alarm types: Absolute-time alarmsRelative alarms (relative to an event’s start time)Location-based alarms (geofence triggers) This class aligns with the behavior of iOS EventKit alarms and provides flexible notification capabilities across calendar and reminder data."},{"title":"Keychain","content":"`Keychain` provides secure access to the system keychain for storing **sensitive and persistent data** inside the Scripting environment. It is designed for:\n\n- Authentication tokens\n- Login credentials\n- License and subscription states\n- Encryption keys\n- Private user data\n\nAll data is protected using the system-level Keychain security mechanism.\n\n***\n\n## 1. Per-Script Keychain Scope\n\nIn Scripting, `Keychain` uses a **per-script isolation model**.\n\n### 1.1 Scope Rules\n\n- Each script has its **own independent Keychain scope**\n- A script can **only access the Keychain data it has written**\n- Different scripts:\n\n  - Cannot read each other’s Keychain data\n  - Cannot overwrite each other’s keys\n  - Even if the same key name is used\n  - Even if `synchronizable: true` is enabled\n- Each script is treated as an **independent security sandbox**\n\n***\n\n### 1.2 Security Implications\n\nThis design ensures that:\n\n- No script can steal credentials from another script\n- Subscription, login state, and authorization data are fully isolated\n- Malicious scripts cannot access private user data stored by other scripts\n- The security boundary is stricter than the system-level app Keychain alone\n\n***\n\n### 1.3 Script Removal Behavior\n\n- When a script is deleted:\n\n  - All Keychain data under that script’s scope is automatically removed\n- Other scripts’ Keychain data is not affected\n\n***\n\n## 2. Namespace\n\n```ts\nnamespace Keychain\n```\n\n***\n\n## 3. Supported Data Types\n\n`Keychain` supports three data types:\n\n| Type        | Write     | Read      |\n| ----------- | --------- | --------- |\n| String      | `set`     | `get`     |\n| Boolean     | `setBool` | `getBool` |\n| Binary Data | `setData` | `getData` |\n\n***\n\n## 4. KeychainAccessibility\n\n```ts\ntype KeychainAccessibility =\n  | 'passcode'\n  | 'unlocked'\n  | 'unlocked_this_device'\n  | 'first_unlock'\n  | 'first_unlock_this_device'\n```\n\n| Value                      | Description                                                                     |\n| -------------------------- | ------------------------------------------------------------------------------- |\n| `passcode`                 | Accessible only when a device passcode is set; does not migrate to a new device |\n| `unlocked`                 | Accessible only while the device is unlocked                                    |\n| `unlocked_this_device`     | Accessible only on the current device; does not migrate                         |\n| `first_unlock`             | Accessible after the first unlock following a restart                           |\n| `first_unlock_this_device` | Same as `first_unlock`, but does not migrate                                    |\n\nDefault value:\n\n```ts\naccessibility: \"unlocked\"\n```\n\n***\n\n## 5. iCloud Synchronization (synchronizable)\n\n```ts\nsynchronizable?: boolean\n```\n\n| Value   | Description                                         |\n| ------- | --------------------------------------------------- |\n| `true`  | Synchronizes across devices using the same Apple ID |\n| `false` | Stored only on the local device                     |\n\nDefault:\n\n```ts\nsynchronizable: false\n```\n\nEven when enabled, synchronization is still restricted to the **current script scope**.\n\n***\n\n## 6. Writing Data\n\n### 6.1 Store a String\n\n```ts\nKeychain.set(key: string, value: string, options?): boolean\n```\n\n```ts\nKeychain.set(\"token\", \"abcdef\")\n```\n\n```ts\nKeychain.set(\"token\", \"abcdef\", {\n  accessibility: \"first_unlock\",\n  synchronizable: true\n})\n```\n\n***\n\n### 6.2 Store a Boolean\n\n```ts\nKeychain.setBool(key: string, value: boolean, options?): boolean\n```\n\n```ts\nKeychain.setBool(\"is_login\", true)\n```\n\n***\n\n### 6.3 Store Binary Data\n\n```ts\nKeychain.setData(key: string, value: Data, options?): boolean\n```\n\n```ts\nKeychain.setData(\"avatar\", imageData)\n```\n\n***\n\n### 6.4 Overwrite Rules\n\n- Existing values are automatically overwritten\n- `true` is returned on success\n- `false` is returned on failure\n\n***\n\n## 7. Reading Data\n\n### 7.1 Read a String\n\n```ts\nKeychain.get(key: string, options?): string | null\n```\n\n***\n\n### 7.2 Read a Boolean\n\n```ts\nKeychain.getBool(key: string, options?): boolean | null\n```\n\n***\n\n### 7.3 Read Binary Data\n\n```ts\nKeychain.getData(key: string, options?): Data | null\n```\n\n***\n\n## 8. Removing Data\n\n```ts\nKeychain.remove(key: string, options?): boolean\n```\n\n- If the key exists, it is deleted and returns `true`\n- If the key does not exist, it still safely returns `true`\n\n***\n\n## 9. Checking for Key Existence\n\n```ts\nKeychain.contains(key: string, options?): boolean\n```\n\n***\n\n## 10. Listing All Keys\n\n```ts\nKeychain.keys(options?): string[]\n```\n\n***\n\n## 11. Clearing the Keychain\n\n```ts\nKeychain.clear(options?): boolean\n```\n\nBehavior:\n\n- Only clears data within the **current script scope**\n- Does not affect other scripts\n- Does not affect the app’s own Keychain data or other apps\n\n***\n\n## 12. synchronizable Read/Write Consistency Rules\n\nIf a key is written with:\n\n```ts\nsynchronizable: true\n```\n\nThen all subsequent operations **must use the same flag**:\n\n```ts\nKeychain.set(\"token\", \"abc\", { synchronizable: true })\n\nKeychain.get(\"token\") // Cannot read\nKeychain.get(\"token\", { synchronizable: true }) // Can read\n```\n\n***\n\n## 13. Security Recommendations\n\n### Suitable Data\n\n- Authentication tokens\n- Subscription and license states\n- User identifiers\n- Encryption keys\n\n### Not Recommended\n\n- Large binary files\n- High-frequency cache data\n- Public configuration values\n\n***\n\n## 14. Typical Usage Examples\n\n```ts\n// Write\nKeychain.set(\"token\", \"abcdef\")\nKeychain.setBool(\"is_login\", true)\nKeychain.setData(\"avatar\", avatarData)\n\n// Read\nconst token = Keychain.get(\"token\")\nconst isLogin = Keychain.getBool(\"is_login\")\nconst avatar = Keychain.getData(\"avatar\")\n\n// Remove\nKeychain.remove(\"token\")\n\n// Check existence\nKeychain.contains(\"token\")\n\n// List all keys\nKeychain.keys()\n\n// Clear\nKeychain.clear()\n```\n","routePath":"/doc/Changelog/2.4.5/Keychain","lang":"en","toc":[{"id":"1-per-script-keychain-scope","text":"1. Per-Script Keychain Scope","depth":2,"charIndex":355},{"id":"11-scope-rules","text":"1.1 Scope Rules","depth":3,"charIndex":453},{"id":"12-security-implications","text":"1.2 Security Implications","depth":3,"charIndex":853},{"id":"13-script-removal-behavior","text":"1.3 Script Removal Behavior","depth":3,"charIndex":1195},{"id":"2-namespace","text":"2. Namespace","depth":2,"charIndex":1383},{"id":"3-supported-data-types","text":"3. Supported Data Types","depth":2,"charIndex":1435},{"id":"4-keychainaccessibility","text":"4. KeychainAccessibility","depth":2,"charIndex":1708},{"id":"5-icloud-synchronization-synchronizable","text":"5. iCloud Synchronization (synchronizable)","depth":2,"charIndex":2734},{"id":"6-writing-data","text":"6. Writing Data","depth":2,"charIndex":3219},{"id":"61-store-a-string","text":"6.1 Store a String","depth":3,"charIndex":3239},{"id":"62-store-a-boolean","text":"6.2 Store a Boolean","depth":3,"charIndex":3486},{"id":"63-store-binary-data","text":"6.3 Store Binary Data","depth":3,"charIndex":3638},{"id":"64-overwrite-rules","text":"6.4 Overwrite Rules","depth":3,"charIndex":3792},{"id":"7-reading-data","text":"7. Reading Data","depth":2,"charIndex":3936},{"id":"71-read-a-string","text":"7.1 Read a String","depth":3,"charIndex":3956},{"id":"72-read-a-boolean","text":"7.2 Read a Boolean","depth":3,"charIndex":4046},{"id":"73-read-binary-data","text":"7.3 Read Binary Data","depth":3,"charIndex":4142},{"id":"8-removing-data","text":"8. Removing Data","depth":2,"charIndex":4237},{"id":"9-checking-for-key-existence","text":"9. Checking for Key Existence","depth":2,"charIndex":4437},{"id":"10-listing-all-keys","text":"10. Listing All Keys","depth":2,"charIndex":4537},{"id":"11-clearing-the-keychain","text":"11. Clearing the Keychain","depth":2,"charIndex":4612},{"id":"12-synchronizable-readwrite-consistency-rules","text":"12. synchronizable Read/Write Consistency Rules","depth":2,"charIndex":4851},{"id":"13-security-recommendations","text":"13. Security Recommendations","depth":2,"charIndex":5191},{"id":"suitable-data","text":"Suitable Data","depth":3,"charIndex":5224},{"id":"not-recommended","text":"Not Recommended","depth":3,"charIndex":5339},{"id":"14-typical-usage-examples","text":"14. Typical Usage Examples","depth":2,"charIndex":5445}],"frontmatter":{},"version":"","description":"Keychain provides secure access to the system keychain for storing sensitive and persistent data inside the Scripting environment. It is designed for: Authentication tokensLogin credentialsLicense and subscription statesEncryption keysPrivate user data All data is protected using the system-level Keychain security mechanism."},{"title":"LivePhotoView","content":"`LivePhoto` represents a system Live Photo, which consists of:\n\n- A high-resolution still image\n- A short video clip bound to that image\n\nIn Scripting, `LivePhoto` is a **system-managed object**. It cannot be instantiated directly with `new` and is typically obtained from:\n\n- A photo picker result\n- Asynchronous construction from local image and video files\n\nLivePhoto is commonly used to:\n\n- Display Live Photos in the UI\n- Access underlying image and video resources\n- Decompose, rebuild, or re-save Live Photos\n\n***\n\n## LivePhoto Class\n\n### size\n\n```ts\nreadonly size: Size\n```\n\nThe pixel size of the Live Photo, corresponding to its still image component.\n\nTypical use cases include layout calculation, scaling decisions, and inspecting the original resolution.\n\n***\n\n### getAssetResources()\n\n```ts\ngetAssetResources(): Promise<{\n  data: Data\n  assetLocalIdentifier: string\n  contentType: UTType\n  originalFilename: string\n  pixelHeight: number\n  pixelWidth: number\n}[]>\n```\n\nRetrieves the **underlying asset resources** of the Live Photo.\n\nA Live Photo usually contains at least:\n\n- One still image resource (JPEG / HEIC)\n- One video resource (QuickTime MOV)\n\nEach returned resource object includes:\n\n- `data`\n  The raw binary data of the resource\n\n- `assetLocalIdentifier`\n  The Photos framework local identifier for this resource\n\n- `contentType`\n  The uniform type identifier (UTType), indicating image or video\n\n- `originalFilename`\n  The original filename in the photo library\n\n- `pixelWidth` / `pixelHeight`\n  The actual resolution of the resource\n\nCommon scenarios include exporting Live Photos, splitting them into image and video files, or re-saving them without intermediate temporary files.\n\n***\n\n### LivePhoto.from(options)\n\n```ts\nstatic from(options: {\n  imagePath: string\n  videoPath: string\n  targetSize?: Size | null\n  placeholderImage: UIImage | null\n  contentMode?: \"aspectFit\" | \"aspectFill\"\n  onResult: (\n    result: LivePhoto | null,\n    info: {\n      error: string | null\n      degraded: boolean | null\n      cancelled: boolean | null\n    }\n  ) => void\n}): Promise<() => void>\n```\n\nAsynchronously constructs a Live Photo from a still image file and a matching video file.\n\nKey characteristics:\n\n- The operation is asynchronous\n- `onResult` may be invoked multiple times\n- Supports degraded (low-quality) intermediate results\n- Can be cancelled explicitly\n\n#### Parameters\n\n- `imagePath`\n  Path to the still image file (JPEG / HEIC)\n\n- `videoPath`\n  Path to the associated video file (MOV)\n\n- `targetSize`\n  The desired output size of the Live Photo\n  Pass `null` to preserve the original size\n\n- `placeholderImage`\n  A UIImage displayed while the Live Photo is loading\n\n- `contentMode`\n  How the placeholder image is rendered\n\n  - `aspectFit`: preserves aspect ratio\n  - `aspectFill`: fills the container, possibly cropping\n\n- `onResult(result, info)`\n  Callback invoked when loading completes or updates\n\n#### info Object\n\n- `error`\n  Error message if the request fails\n\n- `degraded`\n  Indicates whether the result is a lower-quality version\n\n- `cancelled`\n  Indicates whether the request was cancelled\n\n#### Return Value\n\nReturns a Promise that resolves to a **cancellation function**:\n\n```ts\n() => void\n```\n\nCalling this function cancels the Live Photo loading request.\n\n***\n\n## LivePhotoView\n\n`LivePhotoView` is a native UI component used to **display and play a Live Photo**, matching the behavior of the system Photos app.\n\nIt is purely a presentation component and does not handle loading, permissions, or persistence.\n\n***\n\n### LivePhotoViewProps\n\n```ts\ntype LivePhotoViewProps = {\n  livePhoto: Observable<LivePhoto | null>\n}\n```\n\n#### livePhoto\n\n- Type: `Observable<LivePhoto | null>`\n- Required\n\nAn observable binding to the Live Photo being displayed.\n\nUsing `Observable` allows:\n\n- Asynchronous loading workflows\n- Dynamic replacement of the Live Photo\n- Automatic UI updates without manual refresh logic\n\nWhen the observable value changes, `LivePhotoView` updates accordingly.\n\n***\n\n## LivePhotoView Example\n\nThe following concise example demonstrates how to display a Live Photo using `LivePhotoView`.\n\n```tsx\n\n\nfunction Example() {\n  const livePhoto = useObservable<LivePhoto | null>(null)\n\n  return <>\n    <Button\n      title=\"Set Live Photo\"\n      action={async () => {\n        const lp = await getLivePhotoSomehow()\n        livePhoto.setValue(lp)\n      }}\n    />\n\n    <LivePhotoView\n      livePhoto={livePhoto}\n      frame={{ idealHeight: 300 }}\n    />\n  </>\n}\n```\n\n### Explanation\n\n- `useObservable<LivePhoto | null>`\n  Declares an observable Live Photo state\n\n- `livePhoto.setValue(lp)`\n  Updates the observable once the Live Photo is available\n\n- `LivePhotoView`\n  Automatically renders and plays the Live Photo when the observable value is non-null\n\nThis pattern highlights the core design principles:\n\n- Data acquisition and UI presentation are decoupled\n- UI updates are driven by reactive state\n- No manual invalidation or redraw logic is required\n\n***\n\n## Design Notes\n\n- `LivePhoto` instances are system-managed objects\n- `LivePhotoView` must be driven by an `Observable`\n- A single LivePhoto can be shared across multiple views\n- The recommended pattern is always **state-driven rendering**\n\n***\n\n## Summary\n\nLive Photo support in Scripting consists of two core components:\n\n- **LivePhoto**\n  A data model for representing, constructing, and inspecting system Live Photos\n\n- **LivePhotoView**\n  A native UI component for rendering Live Photos with dynamic updates\n","routePath":"/doc/Changelog/2.4.5/LivePhotoView","lang":"en","toc":[{"id":"livephoto-class","text":"LivePhoto Class","depth":2,"charIndex":522},{"id":"size","text":"size","depth":3,"charIndex":542},{"id":"getassetresources","text":"getAssetResources()","depth":3,"charIndex":773},{"id":"livephotofromoptions","text":"LivePhoto.from(options)","depth":3,"charIndex":1714},{"id":"parameters","text":"Parameters","depth":4,"charIndex":2384},{"id":"info-object","text":"info Object","depth":4,"charIndex":2934},{"id":"return-value","text":"Return Value","depth":4,"charIndex":3133},{"id":"livephotoview","text":"LivePhotoView","depth":2,"charIndex":3307},{"id":"livephotoviewprops","text":"LivePhotoViewProps","depth":3,"charIndex":3560},{"id":"livephoto","text":"livePhoto","depth":4,"charIndex":3667},{"id":"livephotoview-example","text":"LivePhotoView Example","depth":2,"charIndex":4024},{"id":"explanation","text":"Explanation","depth":3,"charIndex":4512},{"id":"design-notes","text":"Design Notes","depth":2,"charIndex":5007},{"id":"summary","text":"Summary","depth":2,"charIndex":5253}],"frontmatter":{},"version":"","description":"LivePhoto represents a system Live Photo, which consists of: A high-resolution still imageA short video clip bound to that image In Scripting, LivePhoto is a system-managed object. It cannot be instantiated directly with new and is typically obtained from: A photo picker resultAsynchronous construction from local image and video files LivePhoto is commonly used to: Display Live Photos in the UIAccess underlying image and video resourcesDecompose, rebuild, or re-save Live Photos"},{"title":"NavigationStack with path","content":"`NavigationStack.path` provides **observable, programmatic control over the navigation stack**. It allows direct manipulation of the navigation history using a bound observable array.\n\nIt enables:\n\n- Programmatic navigation\n- Multi-level stack control\n- Returning to the root view\n- Dynamic page resolution via `NavigationDestination`\n\n***\n\n## 1. API Definition\n\n```ts\ntype NavigationStackProps = {\n  path?: Observable<string[]>\n  ...\n}\n\ndeclare const NavigationStack: FunctionComponent<NavigationStackProps>\n```\n\n***\n\n## 2. Type and Semantics of path\n\n```ts\npath?: Observable<string[]>\n```\n\n`path` is an observable string array representing the **current navigation stack**.\n\nRules:\n\n- Each `string` represents a unique page identifier\n- The array order defines the navigation order\n- The last element is the currently visible page\n- An empty array represents the root view\n\nExamples:\n\n```ts\n[]\n```\n\nRepresents the root view\n\n```ts\n[\"a\"]\n```\n\nRepresents navigation to page `a`\n\n```ts\n[\"a\", \"b\"]\n```\n\nRepresents navigation to page `a`, then to page `b`, with `b` as the active page\n\n***\n\n## 3. Basic Usage Example\n\n```tsx\nfunction Page() {\n  const path = useObservable<string[]>([\"a\"])\n\n  return <NavigationStack\n    path={path}\n  >\n    <VStack\n      navigationTitle=\"Navigation Demo\"\n      navigationDestination={\n        <NavigationDestination>\n          {(page) =>\n            <VStack>\n              <Text>\n                Current page:\n                {page}\n              </Text>\n              {path.value.length > 1\n                && <Button\n                  title=\"Go to Root\"\n                  action={() => {\n                    path.setValue([])\n                  }}\n                />}\n            </VStack>\n          }\n        </NavigationDestination>\n      }\n    >\n      <Button\n        title=\"Show page a\"\n        action={() => {\n          path.setValue([\"a\"])\n        }}\n      />\n      <Button\n        title=\"Show page b\"\n        action={() => {\n          path.setValue([\"b\"])\n        }}\n      />\n      <Button\n        title=\"Show page a then b\"\n        action={() => {\n          path.setValue([\"a\", \"b\"])\n        }}\n      />\n    </VStack>\n  </NavigationStack>\n}\n```\n\n***\n\n## 4. How path Controls Navigation\n\n### 4.1 path as the Single Source of Navigation State\n\nWhen `path` is bound:\n\n- The full navigation stack is determined exclusively by `path.value`\n- UI navigation state stays fully synchronized with `path`\n- Implicit push/pop navigation is replaced by explicit state control\n\n***\n\n### 4.2 Pushing Pages\n\n```ts\npath.setValue([\"a\"])\n```\n\nSystem behavior:\n\n- Pushes page `a` onto the stack\n- Displays page `a`\n\n```ts\npath.setValue([\"a\", \"b\"])\n```\n\nSystem behavior:\n\n- Pushes page `a`\n- Then pushes page `b`\n- Displays page `b`\n\n***\n\n### 4.3 Popping Pages and Returning to Root\n\n```ts\npath.setValue([])\n```\n\nSystem behavior:\n\n- Clears the entire navigation stack\n- Immediately returns to the root view\n\n***\n\n## 5. Relationship Between path and NavigationDestination\n\n`NavigationDestination` dynamically renders destination views based on the **current value of `path`**:\n\n```tsx\n<NavigationDestination>\n  {(page) => ...}\n</NavigationDestination>\n```\n\nRules:\n\n- `page` is always equal to the **last element of `path.value`**\n- When `path` changes:\n\n  - `page` updates automatically\n  - The destination view re-renders automatically\n\nMapping result examples:\n\n```ts\n[\"a\"]        -> page === \"a\"\n[\"a\", \"b\"]   -> page === \"b\"\n```\n\n***\n\n## 6. Controlling Navigation with Buttons\n\nNavigate to page `a`:\n\n```ts\npath.setValue([\"a\"])\n```\n\nNavigate to page `b`:\n\n```ts\npath.setValue([\"b\"])\n```\n\nNavigate through multiple pages:\n\n```ts\npath.setValue([\"a\", \"b\"])\n```\n\nReturn to the root view:\n\n```ts\npath.setValue([])\n```\n\n***\n\n## 7. Synchronization with System Back Gestures\n\nWhen the user navigates back using:\n\n- The system back gesture\n- The navigation bar back button\n\nThen:\n\n- `path.value` is automatically updated\n- The navigation stack and UI remain fully synchronized\n- No manual back handling is required\n\n***\n\n## 8. Typical Use Cases\n\n`NavigationStack.path` is suitable for:\n\n- Deep linking\n- Multi-step navigation flows\n- Programmatic routing\n- Script-driven navigation\n- Navigation state restoration\n- Wizard-style navigation\n- Cross-page navigation control\n\n***\n\n## 9. Common Errors\n\n### 9.1 Incorrect Initialization\n\nIncorrect:\n\n```ts\nconst path = useObservable<string[]>(null)\n```\n\nCorrect:\n\n```ts\nconst path = useObservable<string[]>([])\n```\n\n***\n\n### 9.2 Invalid Path Element Types\n\nIncorrect:\n\n```ts\npath.setValue([1, 2])\n```\n\nCorrect:\n\n```ts\npath.setValue([\"1\", \"2\"])\n```\n\nCurrently, only `string[]` is supported as the navigation path type.\n\n***\n\n## 10. Difference Between Using path and Default NavigationStack\n\n| Feature                   | Without path  | With path        |\n| ------------------------- | ------------- | ---------------- |\n| Manual push/pop           | Supported     | Not recommended  |\n| Programmatic navigation   | Not supported | Fully supported  |\n| Multi-level routing       | Limited       | Fully supported  |\n| State restoration         | Difficult     | Simple           |\n| Centralized routing state | Not available | Fully controlled |\n","routePath":"/doc/Changelog/2.4.5/NavigationStack with path","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":341},{"id":"2-type-and-semantics-of-path","text":"2. Type and Semantics of path","depth":2,"charIndex":519},{"id":"3-basic-usage-example","text":"3. Basic Usage Example","depth":2,"charIndex":1088},{"id":"4-how-path-controls-navigation","text":"4. How path Controls Navigation","depth":2,"charIndex":2190},{"id":"41-path-as-the-single-source-of-navigation-state","text":"4.1 path as the Single Source of Navigation State","depth":3,"charIndex":2226},{"id":"42-pushing-pages","text":"4.2 Pushing Pages","depth":3,"charIndex":2508},{"id":"43-popping-pages-and-returning-to-root","text":"4.3 Popping Pages and Returning to Root","depth":3,"charIndex":2757},{"id":"5-relationship-between-path-and-navigationdestination","text":"5. Relationship Between path and NavigationDestination","depth":2,"charIndex":2931},{"id":"6-controlling-navigation-with-buttons","text":"6. Controlling Navigation with Buttons","depth":2,"charIndex":3455},{"id":"7-synchronization-with-system-back-gestures","text":"7. Synchronization with System Back Gestures","depth":2,"charIndex":3739},{"id":"8-typical-use-cases","text":"8. Typical Use Cases","depth":2,"charIndex":4032},{"id":"9-common-errors","text":"9. Common Errors","depth":2,"charIndex":4288},{"id":"91-incorrect-initialization","text":"9.1 Incorrect Initialization","depth":3,"charIndex":4309},{"id":"92-invalid-path-element-types","text":"9.2 Invalid Path Element Types","depth":3,"charIndex":4476},{"id":"10-difference-between-using-path-and-default-navigationstack","text":"10. Difference Between Using path and Default NavigationStack","depth":2,"charIndex":4679}],"frontmatter":{},"version":"","description":"NavigationStack.path provides observable, programmatic control over the navigation stack. It allows direct manipulation of the navigation history using a bound observable array. It enables: Programmatic navigationMulti-level stack controlReturning to the root viewDynamic page resolution via NavigationDestination"},{"title":"Photos","content":"The `Photos` module provides unified access to the system photo library and camera. It enables scripts to:\n\n- Capture photos or record videos using the system camera\n- Pick images, videos, or Live Photos from the photo library\n- Retrieve the most recent photos\n- Save images or videos to the Photos app\n\nAll APIs are built on top of native iOS frameworks such as Photos and PHPicker, and follow these principles:\n\n- System-managed permissions\n- Promise-based asynchronous APIs\n- System-controlled UI presentation\n- Secure and constrained access to media data\n\n***\n\n## CaptureInfo\n\n```ts\ntype CaptureInfo = {\n  cropRect: {\n    x: number\n    y: number\n    width: number\n    height: number\n  } | null\n  originalImage: UIImage | null\n  editedImage: UIImage | null\n  imagePath: string | null\n  mediaMetadata: Record<string, any> | null\n  mediaPath: string | null\n  mediaType: string | null\n}\n```\n\n`CaptureInfo` describes the complete result of a capture operation (photo or video).\n\n### Properties\n\n- `cropRect`\n  The cropping rectangle applied during editing.\n  `null` if no cropping was performed.\n\n- `originalImage`\n  The original image captured by the camera.\n\n- `editedImage`\n  The edited image, if editing was enabled and applied.\n\n- `imagePath`\n  File path to the captured image on disk.\n\n- `mediaMetadata`\n  Metadata associated with the captured media, such as EXIF data.\n\n- `mediaPath`\n  File path to the captured video.\n\n- `mediaType`\n  The UTType string describing the media type.\n\n***\n\n## availableMediaTypes()\n\n```ts\nfunction availableMediaTypes(): string[] | null\n```\n\nReturns the list of media UTTypes supported by the current device’s camera.\n\nCommon use cases include checking whether video capture is supported or dynamically adjusting capture options.\n\nReturns `null` if the information is unavailable.\n\n***\n\n## capture(options)\n\n```ts\nfunction capture(options: {\n  mode: \"photo\" | \"video\"\n  mediaTypes: UTType[]\n  allowsEditing?: boolean\n  cameraDevice?: \"rear\" | \"front\"\n  cameraFlashMode?: \"auto\" | \"on\" | \"off\"\n  videoMaximumDuration?: DurationInSeconds\n  videoQuality?: \n    | \"low\"\n    | \"medium\"\n    | \"high\"\n    | \"640x480\"\n    | \"iFrame960x540\"\n    | \"iFrame1280x720\"\n}): Promise<CaptureInfo | null>\n```\n\nPresents the system camera interface to capture a photo or record a video.\n\n### Options\n\n- `mode`\n  Capture mode\n\n  - `\"photo\"`: capture a photo\n  - `\"video\"`: record a video\n\n- `mediaTypes`\n  Allowed media UTTypes.\n\n- `allowsEditing`\n  Whether the user can edit the captured media.\n\n- `cameraDevice`\n  Camera to use. Defaults to `\"rear\"`.\n\n- `cameraFlashMode`\n  Flash behavior. Defaults to `\"auto\"`.\n\n- `videoMaximumDuration`\n  Maximum video duration in seconds.\n\n- `videoQuality`\n  Video resolution and encoding quality.\n\n### Behavior Notes\n\n- The UI is fully system-managed\n- The Promise resolves only after the user finishes or cancels the operation\n- Permission prompts are handled by the system\n\n***\n\n## pick(options)\n\n```ts\nfunction pick(options?: {\n  mode?: \"default\" | \"compact\"\n  filter?: PHPickerFilter\n  limit?: number\n}): Promise<PHPickerResult[]>\n```\n\nPresents the system photo picker to select media items from the photo library.\n\n### Options\n\n- `mode`\n  Picker layout style\n\n  - `default`: grid layout\n  - `compact`: linear layout\n\n- `filter`\n  A `PHPickerFilter` that restricts selectable asset types.\n\n- `limit`\n  Maximum number of selectable items. Defaults to `1`.\n\n### Return Value\n\nReturns an array of `PHPickerResult` objects.\nEach result must be explicitly resolved into a concrete media representation.\n\n***\n\n## PHPickerFilter\n\n`PHPickerFilter` defines which asset types can be selected in `Photos.pick`.\n\nIt is a non-instantiable class and can only be constructed via static methods.\n\n***\n\n### Basic Filters\n\n- `PHPickerFilter.images()`\n  Allows selection of standard images.\n\n- `PHPickerFilter.videos()`\n  Allows selection of videos.\n\n- `PHPickerFilter.livePhotos()`\n  Allows selection of Live Photos.\n\n- `PHPickerFilter.bursts()`\n  Burst photo sequences.\n\n- `PHPickerFilter.panoramas()`\n  Panorama photos.\n\n- `PHPickerFilter.screenshots()`\n  Screenshots.\n\n- `PHPickerFilter.screenRecordings()`\n  Screen recording videos.\n\n- `PHPickerFilter.depthEffectPhotos()`\n  Photos with depth effects (portrait photos).\n\n- `PHPickerFilter.cinematicVideos()`\n  Cinematic mode videos.\n\n- `PHPickerFilter.slomoVideos()`\n  Slow-motion videos.\n\n- `PHPickerFilter.timelapseVideos()`\n  Time-lapse videos.\n\n***\n\n### Composite Filters\n\n- `PHPickerFilter.all(filters)`\n  Matches assets that satisfy all provided filters\n  Logical AND\n\n- `PHPickerFilter.any(filters)`\n  Matches assets that satisfy at least one filter\n  Logical OR\n\n- `PHPickerFilter.not(filter)`\n  Excludes assets matching the specified filter\n  Logical NOT\n\n#### Example\n\n```ts\nconst filter = PHPickerFilter.any([\n  PHPickerFilter.livePhotos(),\n  PHPickerFilter.images()\n])\n\nawait Photos.pick({ filter })\n```\n\n***\n\n## PHPickerResult\n\nRepresents a single item returned from the photo picker.\n\n### itemProvider: ItemProvider\n\nThe item provider for the selected asset, which can be used to load the asset.\n\n### livePhoto()\n\n```ts\nlivePhoto(): Promise<LivePhoto | null>\n```\n\nAttempts to read the result as a Live Photo.\nResolves to `null` if the asset cannot be represented as a Live Photo.\n\n***\n\n### uiImage()\n\n```ts\nuiImage(): Promise<UIImage | null>\n```\n\nAttempts to read the result as a UIImage object.\nResolves to `null` if the asset cannot be represented as an image.\n\n***\n\n### imagePath()\n\n```ts\nimagePath(): Promise<string | null>\n```\n\nIf this result can be read as an image, this file will be copied to the app group's sandbox and returns a promise that resolves to the image path, otherwise returns null, or rejects with an error. You should delete the image file when you no longer need it.\n\n#### Example\n\n```ts\nconst filePath = await result.imagePath()\n```\n\n***\n\n### videoPath()\n\n```ts\nvideoPath(): Promise<string | null>\n```\n\nIf this result can be read as a video, this file will be copied to the app group's sandbox and returns a promise that resolves to the video path, otherwise returns null, or rejects with an error. You should delete the video file when you no longer need it.\n\n***\n\n## getLatestPhotos(count)\n\n```ts\nfunction getLatestPhotos(count: number): Promise<UIImage[] | null>\n```\n\nRetrieves the most recent photos from the photo library.\n\n### Notes\n\n- Images only (no videos)\n- Ordered from newest to oldest\n- Returns `null` if access is unavailable\n\n***\n\n## pickPhotos(count)\n\n```ts\nfunction pickPhotos(count: number): Promise<UIImage[]>\n```\n\nLegacy convenience API for selecting a fixed number of photos.\n\nReturns an array of `UIImage` objects without file paths or metadata.\n\n***\n\n## takePhoto()\n\n```ts\nfunction takePhoto(): Promise<UIImage | null>\n```\n\nQuick photo capture API.\n\n- No advanced configuration\n- Returns `null` if the user cancels\n\n***\n\n## savePhoto(path, options)\n\n```ts\nfunction savePhoto(\n  path: string,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves an image file from disk to the Photos app.\n\n***\n\n## savePhoto(image, options)\n\n```ts\nfunction savePhoto(\n  image: Data,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves raw image data directly to the Photos app, avoiding temporary files.\n\n***\n\n## saveVideo(path, options)\n\n```ts\nfunction saveVideo(\n  path: string,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves a video file from disk to the Photos app.\n\n***\n\n## saveVideo(video, options)\n\n```ts\nfunction saveVideo(\n  video: Data,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves raw video data directly to the Photos app.\n\n***\n\n## Design Notes\n\n- All APIs are asynchronous and permission-aware\n- All UI is system-managed and not customizable\n- Picker results are lazy and must be explicitly resolved\n- Save APIs return only success status, not asset identifiers\n","routePath":"/doc/Changelog/2.4.5/Photos/","lang":"en","toc":[{"id":"captureinfo","text":"CaptureInfo","depth":2,"charIndex":565},{"id":"properties","text":"Properties","depth":3,"charIndex":978},{"id":"availablemediatypes","text":"availableMediaTypes()","depth":2,"charIndex":1493},{"id":"captureoptions","text":"capture(options)","depth":2,"charIndex":1823},{"id":"options","text":"Options","depth":3,"charIndex":2304},{"id":"behavior-notes","text":"Behavior Notes","depth":3,"charIndex":2752},{"id":"pickoptions","text":"pick(options)","depth":2,"charIndex":2935},{"id":"options-1","text":"Options","depth":3,"charIndex":3174},{"id":"return-value","text":"Return Value","depth":3,"charIndex":3414},{"id":"phpickerfilter","text":"PHPickerFilter","depth":2,"charIndex":3562},{"id":"basic-filters","text":"Basic Filters","depth":3,"charIndex":3744},{"id":"composite-filters","text":"Composite Filters","depth":3,"charIndex":4448},{"id":"example","text":"Example","depth":4,"charIndex":4759},{"id":"phpickerresult","text":"PHPickerResult","depth":2,"charIndex":4916},{"id":"itemprovider-itemprovider","text":"itemProvider: ItemProvider","depth":3,"charIndex":4993},{"id":"livephoto","text":"livePhoto()","depth":3,"charIndex":5105},{"id":"uiimage","text":"uiImage()","depth":3,"charIndex":5294},{"id":"imagepath","text":"imagePath()","depth":3,"charIndex":5477},{"id":"example-1","text":"Example","depth":4,"charIndex":5800},{"id":"videopath","text":"videoPath()","depth":3,"charIndex":5872},{"id":"getlatestphotoscount","text":"getLatestPhotos(count)","depth":2,"charIndex":6199},{"id":"notes","text":"Notes","depth":3,"charIndex":6362},{"id":"pickphotoscount","text":"pickPhotos(count)","depth":2,"charIndex":6479},{"id":"takephoto","text":"takePhoto()","depth":2,"charIndex":6707},{"id":"savephotopath-options","text":"savePhoto(path, options)","depth":2,"charIndex":6877},{"id":"savephotoimage-options","text":"savePhoto(image, options)","depth":2,"charIndex":7062},{"id":"savevideopath-options","text":"saveVideo(path, options)","depth":2,"charIndex":7273},{"id":"savevideovideo-options","text":"saveVideo(video, options)","depth":2,"charIndex":7457},{"id":"design-notes","text":"Design Notes","depth":2,"charIndex":7642}],"frontmatter":{},"version":"","description":"The Photos module provides unified access to the system photo library and camera. It enables scripts to: Capture photos or record videos using the system cameraPick images, videos, or Live Photos from the photo libraryRetrieve the most recent photosSave images or videos to the Photos app All APIs are built on top of native iOS frameworks such as Photos and PHPicker, and follow these principles: System-managed permissionsPromise-based asynchronous APIsSystem-controlled UI presentationSecure and constrained access to media data"},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Photos\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n        footer={\n          <Text>Get the latest specified number of photos from the Photos app.</Text>\n        }\n      >\n        <Button\n          title={\"Photos.getLatestPhotos\"}\n          action={async () => {\n            const images = await Photos.getLatestPhotos(1)\n            const image = images?.[0]\n\n            if (image != null) {\n              Dialog.alert({\n                message: `Image size: ${image.width}*${image.height}`\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Present a photo picker dialog and pick limited number of photos.</Text>\n        }\n      >\n\n        <Button\n          title={\"Photos.pickPhotos\"}\n          action={async () => {\n            const images = await Photos.pickPhotos(1)\n            const image = images?.[0]\n\n            if (image != null) {\n              Dialog.alert({\n                message: `Image size: ${image.width}*${image.height}`\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Take a photo and return a UIImage instance.</Text>\n        }\n      >\n        <Button\n          title={\"Photos.takePhoto\"}\n          action={async () => {\n            const image = await Photos.takePhoto()\n\n            if (image != null) {\n              Dialog.alert({\n                message: `Image size: ${image.width}*${image.height}`\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Save an image to the Photos app. Returns a boolean value indicates that whether the operation is successful.</Text>\n        }\n      >\n        <Button\n          title={\"Photos.savePhoto\"}\n          action={async () => {\n            const image = await Photos.takePhoto()\n\n            if (image != null) {\n              const success = await Photos.savePhoto(Data.fromJPEG(image, 0.5)!)\n              Dialog.alert({\n                message: \"The photo has been saved: \" + success\n              })\n            } else {\n              Dialog.alert({\n                message: \"Canceled\"\n              })\n            }\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Changelog/2.4.5/Photos/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Picture in Pictuer View Modifiers <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Picture in Pictuer View Modifiers \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nScripting provides a set of Picture in Picture (PiP) view modifiers that allow developers to render any SwiftUI view inside a system PiP window.\nThese APIs abstract away the underlying `AVPictureInPicture` implementation and provide a declarative, script-friendly way to control PiP presentation, interaction, and lifecycle.\n\nPiP is suitable for the following scenarios:\n\n- Real-time status display (timers, workouts, progress indicators)\n- Audio or video playback companion UI\n- Lightweight views that should remain visible when the app enters background\n\n***\n\n## 1. PiPProps API Definition\n\n```ts\ntype PiPProps = {\n  pip?: {\n    isPresented: Observable<boolean>\n    maximumUpdatesPerSecond?: number\n    content: VirtualNode\n  }\n  \n  onPipStart?: () => void\n  onPipStop?: () => void\n  onPipPlayPauseToggle?: (isPlaying: boolean) => void\n  onPipSkip?: (isForward: boolean) => void\n  onPipRenderSizeChanged?: (size: Size) => void\n\n  pipHideOnForeground?: boolean\n  pipShowOnBackground?: boolean\n}\n```\n\n***\n\n## 2. Core Properties\n\n### 2.1 `pip.isPresented`\n\n```ts\nisPresented: Observable<boolean>\n```\n\n- The **single source of truth** for PiP presentation\n- `true`: PiP window is presented\n- `false`: PiP window is dismissed\n\nThis value is typically controlled by user actions or app lifecycle events.\n\n***\n\n### 2.2 `pip.content`\n\n```ts\ncontent: VirtualNode\n```\n\n- The view rendered inside the PiP window\n- Strongly recommended to be a **dedicated PiP view**\n- Should be minimal, stable, and predictable in layout\n\n***\n\n### 2.3 `pip.maximumUpdatesPerSecond`\n\n```ts\nmaximumUpdatesPerSecond?: number\n```\n\n- **Default value: 30**\n- Limits how often the PiP view can be re-rendered per second\n- One of the most important performance-related parameters\n\n#### Recommended values\n\n- **No animation / low-frequency updates**\n  Use `1–5`\n\n- **Animated PiP views**\n  Can be set to `60`\n\nImportant:\nSetting this value to `60` has a **significant performance impact**, increasing both CPU and GPU usage. This should only be used when animation is strictly required.\n\n***\n\n## 3. PiP Lifecycle Callbacks\n\n(Only valid inside the PiP view)\n\n### 3.1 `onPipStart`\n\n```ts\nonPipStart?: () => void\n```\n\n- Called when the PiP window is successfully presented\n- Typical use cases:\n\n  - Start timers\n  - Begin state updates\n  - Subscribe to data streams\n\n***\n\n### 3.2 `onPipStop`\n\n```ts\nonPipStop?: () => void\n```\n\n- Called when PiP is dismissed or stopped by the system\n- All side effects should be cleaned up here:\n\n  - Timers\n  - Subscriptions\n  - Long-running tasks\n\n***\n\n## 4. PiP Interaction Callbacks\n\n(Only valid inside the PiP view)\n\n### 4.1 Play / Pause Toggle\n\n```ts\nonPipPlayPauseToggle?: (isPlaying: boolean) => void\n```\n\n- Triggered when the user taps the play/pause control in the PiP window\n- `isPlaying` indicates the resulting playback state\n- Commonly used for audio, video, or workout scenarios\n\n***\n\n### 4.2 Skip Forward / Backward\n\n```ts\nonPipSkip?: (isForward: boolean) => void\n```\n\n- `true`: skip forward\n- `false`: skip backward\n\n***\n\n## 5. Render Size Changes\n\n### `onPipRenderSizeChanged`\n\n```ts\nonPipRenderSizeChanged?: (size: Size) => void\n```\n\n- Called whenever the PiP render size changes\n- Can be used to adapt layout for different PiP sizes or orientations\n\n***\n\n## 6. Foreground and Background Behavior\n\n(Only valid inside the PiP view)\n\n### 6.1 `pipHideOnForeground`\n\n```ts\npipHideOnForeground?: boolean\n```\n\n- When the app enters foreground:\n\n  - Determines whether an active PiP session should be stopped\n- Default: `false`\n\n***\n\n### 6.2 `pipShowOnBackground`\n\n```ts\npipShowOnBackground?: boolean\n```\n\n- Automatically starts PiP when the app moves to background\n- Commonly used for audio playback or real-time status displays\n\n***\n\n## 7. Complete Code Example\n\n### 7.1 PiP Content View\n\n```tsx\nfunction PipView() {\n  const started = useObservable(false)\n  const count = useObservable(0)\n\n  useEffect(() => {\n    if (!started.value) {\n      return\n    }\n\n    let timerId: number\n\n    function startTimer() {\n      timerId = setTimeout(() => {\n        count.setValue(count.value + 1)\n        startTimer()\n      }, 1000)\n    }\n\n    startTimer()\n\n    return () => {\n      clearTimeout(timerId)\n    }\n  }, [started.value])\n\n  return <HStack\n    onPipStart={() => {\n      started.setValue(true)\n    }}\n    frame={{\n      width: Device.screen.width,\n      height: 50\n    }}\n    background=\"systemBlue\"\n  >\n    <Image\n      systemName=\"figure.walk\"\n      font=\"title\"\n    />\n    <Text foregroundStyle=\"white\">\n      Count: {count.value}\n    </Text>\n  </HStack>\n}\n```\n\n***\n\n### 7.2 Enabling PiP on a Page\n\n```tsx\nfunction PageView() {\n  const dismiss = Navigation.useDismiss()\n  const pipPresented = useObservable(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"PiP Demo\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n      pip={{\n        isPresented: pipPresented,\n        content: <PipView />\n      }}\n    >\n      <Button\n        title=\"Toggle PiP\"\n        action={() => {\n          pipPresented.setValue(!pipPresented.value)\n        }}\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## 8. Critical Notes\n\n### 8.1 PiP views are constructed even when not presented\n\nWhen `isPresented` is `false`:\n\n- The PiP view is **not visible**\n- But it is still constructed and participates in state binding\n\nTherefore:\n\n- Do not perform heavy computation in the view body\n- Delay all side effects until `onPipStart`\n- Always clean up in `onPipStop`\n\n***\n\n### 8.2 PiP-specific modifiers must be used only in the PiP view\n\nThe following properties and callbacks:\n\n- `onPipStart`\n- `onPipStop`\n- `onPipPlayPauseToggle`\n- `onPipSkip`\n- `onPipRenderSizeChanged`\n- `pipHideOnForeground`\n- `pipShowOnBackground`\n\n**Must be declared on the PiP content view (PipView)**.\n\nDeclaring them on a normal page view will result in:\n\n- No callbacks being triggered\n- Missing or incorrect state updates\n- Undefined behavior\n\n***\n\n### 8.3 PiP is not suitable for complex UI\n\nAvoid using the following inside PiP:\n\n- `List` or `ScrollView`\n- Complex or chained animations\n- High-frequency state updates\n- Network-driven UI rendering\n\nPiP is designed for:\n\nLightweight, stable, and continuously visible system-level companion views.\n\n***\n\n## 9. Recommended Best Practices\n\n- Design a dedicated, minimal PiP view\n- Keep layout fixed and predictable\n- Tune `maximumUpdatesPerSecond` carefully\n- Start all logic in `onPipStart`\n- Always release resources in `onPipStop`\n- Never reuse complex page-level views inside PiP\n","routePath":"/doc/Changelog/2.4.5/Picture in Pictuer View Modifiers","lang":"en","toc":[{"id":"1-pipprops-api-definition","text":"1. PiPProps API Definition","depth":2,"charIndex":739},{"id":"2-core-properties","text":"2. Core Properties","depth":2,"charIndex":1183},{"id":"21-pipispresented","text":"2.1 `pip.isPresented`","depth":3,"charIndex":1206},{"id":"22-pipcontent","text":"2.2 `pip.content`","depth":3,"charIndex":1483},{"id":"23-pipmaximumupdatespersecond","text":"2.3 `pip.maximumUpdatesPerSecond`","depth":3,"charIndex":1695},{"id":"recommended-values","text":"Recommended values","depth":4,"charIndex":1924},{"id":"3-pip-lifecycle-callbacks","text":"3. PiP Lifecycle Callbacks","depth":2,"charIndex":2235},{"id":"31-onpipstart","text":"3.1 `onPipStart`","depth":3,"charIndex":2300},{"id":"32-onpipstop","text":"3.2 `onPipStop`","depth":3,"charIndex":2511},{"id":"4-pip-interaction-callbacks","text":"4. PiP Interaction Callbacks","depth":2,"charIndex":2727},{"id":"41-play--pause-toggle","text":"4.1 Play / Pause Toggle","depth":3,"charIndex":2794},{"id":"42-skip-forward--backward","text":"4.2 Skip Forward / Backward","depth":3,"charIndex":3072},{"id":"5-render-size-changes","text":"5. Render Size Changes","depth":2,"charIndex":3211},{"id":"onpiprendersizechanged","text":"`onPipRenderSizeChanged`","depth":3,"charIndex":3238},{"id":"6-foreground-and-background-behavior","text":"6. Foreground and Background Behavior","depth":2,"charIndex":3447},{"id":"61-piphideonforeground","text":"6.1 `pipHideOnForeground`","depth":3,"charIndex":3523},{"id":"62-pipshowonbackground","text":"6.2 `pipShowOnBackground`","depth":3,"charIndex":3718},{"id":"7-complete-code-example","text":"7. Complete Code Example","depth":2,"charIndex":3920},{"id":"71-pip-content-view","text":"7.1 PiP Content View","depth":3,"charIndex":3949},{"id":"72-enabling-pip-on-a-page","text":"7.2 Enabling PiP on a Page","depth":3,"charIndex":4753},{"id":"8-critical-notes","text":"8. Critical Notes","depth":2,"charIndex":5409},{"id":"81-pip-views-are-constructed-even-when-not-presented","text":"8.1 PiP views are constructed even when not presented","depth":3,"charIndex":5431},{"id":"82-pip-specific-modifiers-must-be-used-only-in-the-pip-view","text":"8.2 PiP-specific modifiers must be used only in the PiP view","depth":3,"charIndex":5768},{"id":"83-pip-is-not-suitable-for-complex-ui","text":"8.3 PiP is not suitable for complex UI","depth":3,"charIndex":6225},{"id":"9-recommended-best-practices","text":"9. Recommended Best Practices","depth":2,"charIndex":6531}],"frontmatter":{},"version":"","description":"Scripting provides a set of Picture in Picture (PiP) view modifiers that allow developers to render any SwiftUI view inside a system PiP window.\nThese APIs abstract away the underlying AVPictureInPicture implementation and provide a declarative, script-friendly way to control PiP presentation, interaction, and lifecycle. PiP is suitable for the following scenarios: Real-time status display (timers, workouts, progress indicators)Audio or video playback companion UILightweight views that should remain visible when the app enters background"},{"title":"Reminder","content":"The `Reminder` API provides the ability to create, edit, and manage reminders in the iOS calendar system.\nIt supports configuring due dates through `DateComponents`, assigning priorities, adding notes, managing recurrence rules, working with alarms, and tracking completion state.\nThis API is suitable for a wide range of task and schedule reminder scenarios.\n\n***\n\n# 1. Class: `Reminder`\n\nThe `Reminder` class represents an individual reminder item and provides properties and methods to read and modify its data.\n\n***\n\n# 2. Properties\n\n### identifier: string\n\nA unique identifier assigned by the system (read-only).\n\n### calendar: Calendar\n\nThe calendar to which the reminder belongs.\nEach reminder must be associated with a calendar.\n\n### title: string\n\nThe title or summary of the reminder.\n\n### notes: string | null\n\nOptional notes providing additional context.\n\n***\n\n## Completion State\n\n### isCompleted: boolean\n\nIndicates whether the reminder is marked as completed.\n\n- Setting this property to `true` automatically sets `completionDate` to the current date.\n- Setting it to `false` sets `completionDate` to `null`.\n\nSpecial consideration:\nIf a reminder is completed on another device or client, `isCompleted` may be `true` while `completionDate` remains `null`.\n\n### completionDate: Date | null\n\nThe date on which the reminder was completed.\n\n- Assigning a date sets `isCompleted = true`.\n- Assigning `null` clears the completed state.\n\n***\n\n## Due Date\n\n### dueDateComponents: DateComponents | null\n\nRepresents the reminder’s due date using date components.\nSupports partially specified date or time fields.\nUseful for date-based or recurring reminders.\n\nYou may use `DateComponents.isValidDate` to check whether the components form a valid date.\n\n### dueDate: Date | null\n\nDeprecated.\nUse `dueDateComponents` instead.\nYou can read the equivalent date using `dueDateComponents?.date`.\n\n### dueDateIncludesTime: boolean\n\nDeprecated.\nUse `dueDateComponents?.hour != null && dueDateComponents?.minute != null` to determine whether the due date includes a time component.\n\n***\n\n## Priority\n\n### priority: number\n\nAn integer representing the reminder’s priority.\nHigher values typically indicate greater importance or urgency.\n\n***\n\n## Recurrence\n\n### recurrenceRules: RecurrenceRule\\[] | null\n\nAn array of recurrence rules associated with the reminder.\n\n### hasRecurrenceRules: boolean\n\nIndicates whether the reminder contains recurrence rules (read-only).\n\n***\n\n## Alarms\n\n### alarms: EventAlarm\\[] | null\n\nA collection of alarms associated with the reminder.\nAlarms may be based on:\n\n- absolute dates\n- relative offsets\n- structured locations (geofence triggers)\n\n### hasAlarm: boolean\n\nIndicates whether the reminder contains any alarms.\n\n***\n\n## Attendees\n\n### attendees: EventParticipant\\[] | null\n\nAn array of attendee objects (read-only).\nNot all reminder sources support attendee data.\n\n### hasAttendees: boolean\n\nIndicates whether the reminder has attendees.\n\n***\n\n## State Indicators\n\n### hasNotes: boolean\n\nIndicates whether the reminder contains notes.\n\n### hasChanges: boolean\n\nIndicates whether the reminder or any of its nested objects contains unsaved changes.\n\n***\n\n# 3. Instance Methods\n\n### addAlarm(alarm: EventAlarm): void\n\nAdds an alarm to the reminder.\n\n### removAlarm(alarm: EventAlarm): void\n\nRemoves the specified alarm.\n(Method name is `removAlarm`.)\n\n***\n\n### addRecurrenceRule(rule: RecurrenceRule): void\n\nAdds a recurrence rule.\n\n### removeRecurrenceRule(rule: RecurrenceRule): void\n\nRemoves a recurrence rule.\n\n***\n\n### `save(): Promise<void>`\n\nSaves changes to the reminder.\nIf the reminder has not been saved before, it is added to its associated calendar.\n\n### `remove(): Promise<void>`\n\nDeletes the reminder from the calendar.\n\n***\n\n# 4. Static Methods\n\n### `Reminder.getAll(calendars?: Calendar[]): Promise<Reminder[]>`\n\nReturns all reminders, optionally filtered by the specified calendars.\n\n***\n\n### `Reminder.getIncompletes(options?): Promise<Reminder[]>`\n\nReturns incomplete reminders filtered by due date range and/or calendar set.\n\nOptions:\n\n- `startDate?: Date`\n  Includes reminders whose due date is after this date.\n\n- `endDate?: Date`\n  Includes reminders whose due date is before this date.\n\n- `calendars?: Calendar[]`\n  Specifies which calendars to search.\n\nThis method does not expand recurrence rules; it only returns reminders with concrete due dates.\n\n***\n\n### `Reminder.getCompleteds(options?): Promise<Reminder[]>`\n\nReturns completed reminders filtered by completion date range and/or calendar set.\n\nOptions:\n\n- `startDate?: Date`\n  Includes reminders completed after this date.\n\n- `endDate?: Date`\n  Includes reminders completed before this date.\n\n- `calendars?: Calendar[]`\n  Specifies which calendars to search.\n\n***\n\n# 5. Usage Examples\n\n## Creating a Reminder with DateComponents\n\n```ts\nconst reminder = new Reminder()\nreminder.title = \"Prepare meeting materials\"\nreminder.notes = \"Finish before Monday’s team meeting\"\n\nreminder.dueDateComponents = new DateComponents({\n  year: 2025,\n  month: 10,\n  day: 6,\n  hour: 9,\n  minute: 30,\n})\n\nreminder.priority = 2\nawait reminder.save()\n```\n\n***\n\n## Creating a Date-Only Reminder\n\n```ts\nreminder.dueDateComponents = new DateComponents({\n  year: 2025,\n  month: 10,\n  day: 6,\n})\n```\n\n***\n\n## Creating DateComponents from a Date\n\n```ts\nconst now = new Date()\nreminder.dueDateComponents = DateComponents.fromDate(now)\n```\n\n***\n\n## Fetching All Reminders\n\n```ts\nconst reminders = await Reminder.getAll()\nfor (const r of reminders) {\n  console.log(`Reminder: ${r.title}`)\n}\n```\n\n***\n\n## Fetching Incomplete Reminders\n\n```ts\nconst incompletes = await Reminder.getIncompletes({\n  startDate: new Date(\"2025-01-01\"),\n  endDate: new Date(\"2025-01-31\"),\n})\n```\n\n***\n\n## Marking a Reminder as Completed\n\n```ts\nreminder.isCompleted = true\nawait reminder.save()\n```\n\n***\n\n## Deleting a Reminder\n\n```ts\nawait reminder.remove()\n```\n\n***\n\n# 6. Additional Notes\n\n### Date Management\n\nUsing `dueDateComponents` is recommended for all due-date handling.\nIt supports:\n\n- date-only values\n- date with time\n- partial components\n- validity checks through `isValidDate`\n\n### Recurrence\n\nReminder queries do not expand recurrence rules.\nThey operate only on the reminder objects that have concrete due dates.\nRecurrence rules can be added or removed through the API.\n\n### Alarms\n\nAlarms may be absolute, relative, or location-based, and are shared with the `CalendarEvent` API.\n\n### Attendees\n\nSome reminder sources do not support attendee data; in such cases, the attendees array may be `null`.\n","routePath":"/doc/Changelog/2.4.5/Reminder","lang":"en","toc":[{"id":"identifier-string","text":"identifier: string","depth":3,"charIndex":538},{"id":"calendar-calendar","text":"calendar: Calendar","depth":3,"charIndex":619},{"id":"title-string","text":"title: string","depth":3,"charIndex":738},{"id":"notes-string--null","text":"notes: string | null","depth":3,"charIndex":796},{"id":"completion-state","text":"Completion State","depth":2,"charIndex":873},{"id":"iscompleted-boolean","text":"isCompleted: boolean","depth":3,"charIndex":894},{"id":"completiondate-date--null","text":"completionDate: Date | null","depth":3,"charIndex":1272},{"id":"due-date","text":"Due Date","depth":2,"charIndex":1451},{"id":"duedatecomponents-datecomponents--null","text":"dueDateComponents: DateComponents | null","depth":3,"charIndex":1464},{"id":"duedate-date--null","text":"dueDate: Date | null","depth":3,"charIndex":1758},{"id":"duedateincludestime-boolean","text":"dueDateIncludesTime: boolean","depth":3,"charIndex":1896},{"id":"priority","text":"Priority","depth":2,"charIndex":2084},{"id":"priority-number","text":"priority: number","depth":3,"charIndex":2097},{"id":"recurrence","text":"Recurrence","depth":2,"charIndex":2238},{"id":"recurrencerules-recurrencerule--null","text":"recurrenceRules: RecurrenceRule[] | null","depth":3,"charIndex":-1},{"id":"hasrecurrencerules-boolean","text":"hasRecurrenceRules: boolean","depth":3,"charIndex":2360},{"id":"alarms","text":"Alarms","depth":2,"charIndex":2469},{"id":"alarms-eventalarm--null","text":"alarms: EventAlarm[] | null","depth":3,"charIndex":-1},{"id":"hasalarm-boolean","text":"hasAlarm: boolean","depth":3,"charIndex":2672},{"id":"attendees","text":"Attendees","depth":2,"charIndex":2753},{"id":"attendees-eventparticipant--null","text":"attendees: EventParticipant[] | null","depth":3,"charIndex":-1},{"id":"hasattendees-boolean","text":"hasAttendees: boolean","depth":3,"charIndex":2901},{"id":"state-indicators","text":"State Indicators","depth":2,"charIndex":2980},{"id":"hasnotes-boolean","text":"hasNotes: boolean","depth":3,"charIndex":3001},{"id":"haschanges-boolean","text":"hasChanges: boolean","depth":3,"charIndex":3072},{"id":"addalarmalarm-eventalarm-void","text":"addAlarm(alarm: EventAlarm): void","depth":3,"charIndex":3212},{"id":"removalarmalarm-eventalarm-void","text":"removAlarm(alarm: EventAlarm): void","depth":3,"charIndex":3283},{"id":"addrecurrencerulerule-recurrencerule-void","text":"addRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":3390},{"id":"removerecurrencerulerule-recurrencerule-void","text":"removeRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":3466},{"id":"save-promisevoid","text":"`save(): Promise<void>`","depth":3,"charIndex":3553},{"id":"remove-promisevoid","text":"`remove(): Promise<void>`","depth":3,"charIndex":3697},{"id":"remindergetallcalendars-calendar-promisereminder","text":"`Reminder.getAll(calendars?: Calendar[]): Promise<Reminder[]>`","depth":3,"charIndex":3795},{"id":"remindergetincompletesoptions-promisereminder","text":"`Reminder.getIncompletes(options?): Promise<Reminder[]>`","depth":3,"charIndex":3940},{"id":"remindergetcompletedsoptions-promisereminder","text":"`Reminder.getCompleteds(options?): Promise<Reminder[]>`","depth":3,"charIndex":4415},{"id":"creating-a-reminder-with-datecomponents","text":"Creating a Reminder with DateComponents","depth":2,"charIndex":4802},{"id":"creating-a-date-only-reminder","text":"Creating a Date-Only Reminder","depth":2,"charIndex":5155},{"id":"creating-datecomponents-from-a-date","text":"Creating DateComponents from a Date","depth":2,"charIndex":5295},{"id":"fetching-all-reminders","text":"Fetching All Reminders","depth":2,"charIndex":5432},{"id":"fetching-incomplete-reminders","text":"Fetching Incomplete Reminders","depth":2,"charIndex":5586},{"id":"marking-a-reminder-as-completed","text":"Marking a Reminder as Completed","depth":2,"charIndex":5763},{"id":"deleting-a-reminder","text":"Deleting a Reminder","depth":2,"charIndex":5865},{"id":"date-management","text":"Date Management","depth":3,"charIndex":5952},{"id":"recurrence-1","text":"Recurrence","depth":3,"charIndex":-1},{"id":"alarms-1","text":"Alarms","depth":3,"charIndex":-1},{"id":"attendees-1","text":"Attendees","depth":3,"charIndex":-1}],"frontmatter":{},"version":"","description":"The Reminder API provides the ability to create, edit, and manage reminders in the iOS calendar system.\nIt supports configuring due dates through DateComponents, assigning priorities, adding notes, managing recurrence rules, working with alarms, and tracking completion state.\nThis API is suitable for a wide range of task and schedule reminder scenarios. The Reminder class represents an individual reminder item and provides properties and methods to read and modify its data. identifier: string A unique identifier assigned by the system (read-only). calendar: Calendar The calendar to which the reminder belongs.\nEach reminder must be associated with a calendar. title: string The title or summary of the reminder. notes: string | null Optional notes providing additional context."},{"title":"ReorderableForEach","content":"`ReorderableForEach` is a high-level component in Scripting that provides **built-in drag-to-reorder capability**.\nIt preserves the familiar usage pattern of `ForEach` while adding native support for:\n\n- Drag gesture recognition\n- Active item tracking\n- Manual reorder callbacks\n\nThis allows developers to implement **sortable lists and grids with minimal effort**.\n\nTypical use cases include:\n\n- Draggable card layouts\n- Reorderable grids (`LazyVGrid`, `LazyHGrid`)\n- User-defined module arrangements\n\n***\n\n## 1. Component Definition\n\n```ts\ntype ReorderableForEachProps<T extends {\n  id: string\n}> = {\n  active: Observable<T | null>\n  data: T[]\n  builder: (item: T, index: number) => VirtualNode\n  onMove: (indices: number[], newOffset: number) => void\n}\n\ninterface ReorderableForEachComponent {\n  <T extends {\n    id: string\n  }>(props: ReorderableForEachProps<T>): VirtualNode\n}\n\ndeclare const ReorderableForEach: ReorderableForEachComponent\n```\n\n***\n\n## 2. Generic Constraint\n\n### `id` Is Required and Must Be Stable\n\nThe generic type `T` must satisfy:\n\n```ts\nT extends { id: string }\n```\n\nThis means:\n\n- Every item **must contain a unique and stable `id`**\n- The `id` is used to:\n\n  - Identify the dragged element\n  - Maintain drag consistency\n  - Calculate reorder positions correctly\n\nIf `id` values are duplicated or change during runtime, drag behavior will become unstable.\n\n***\n\n## 3. Props Reference\n\n### 3.1 `active`\n\n```ts\nactive: Observable<T | null>\n```\n\nTracks the **currently dragged item**.\n\nBehavior:\n\n- When dragging starts, the active item is assigned to `active.value`\n- When dragging ends, `active.value` is automatically reset to `null`\n\nTypical use cases:\n\n- Highlighting the active item\n- Adjusting opacity or scale\n- Driving linked animations\n- Displaying drag helper UI\n\n***\n\n### 3.2 `data`\n\n```ts\ndata: T[]\n```\n\nThe current sortable data source.\n\nImportant notes:\n\n- `ReorderableForEach` **does NOT mutate this array automatically**\n- You **must update the order manually inside `onMove`**\n- It is strongly recommended to use an observable source:\n\n```ts\nconst data = useObservable<T[]>(...)\n```\n\n***\n\n### 3.3 `builder`\n\n```ts\nbuilder: (item: T, index: number) => VirtualNode\n```\n\nDefines how each item is rendered.\n\nParameters:\n\n| Parameter | Description                                   |\n| --------- | --------------------------------------------- |\n| `item`    | The current data item                         |\n| `index`   | The **live index** within the reordered array |\n\nThe return value must be a valid `VirtualNode`.\n\nImportant:\n\n- `index` reflects the reordered position\n- Do not rely on previous fixed indices for logic safety inside `builder`\n\n***\n\n### 3.4 `onMove`\n\n```ts\nonMove: (indices: number[], newOffset: number) => void\n```\n\nTriggered when a drag reorder operation completes.\n\nParameter reference:\n\n| Parameter   | Type       | Description                         |\n| ----------- | ---------- | ----------------------------------- |\n| `indices`   | `number[]` | Original indices of the moved items |\n| `newOffset` | `number`   | Target insertion start index        |\n\nYou must perform the full reorder update manually:\n\n1. Extract the moving items\n2. Remove them from the original array\n3. Insert them at `newOffset`\n4. Call `Observable.setValue` with the new array\n\nStandard implementation:\n\n```ts\nconst onMove = (indices: number[], newOffset: number) => {\n  const movingItems = indices.map(index => data.value[index])\n  const newValue = data.value.filter((_, index) => !indices.includes(index))\n  newValue.splice(newOffset, 0, ...movingItems)\n  data.setValue(newValue)\n}\n```\n\n***\n\n## 4. Real Purpose of `contentShape` (Drag Preview Consistency)\n\nFrom your example:\n\n```tsx\n.contentShape({\n  kind: 'dragPreview',\n  shape: {\n    type: 'rect',\n    cornerRadius: 16\n  }\n})\n```\n\nThe **primary purpose of this configuration is**:\n\n> To define the **drag preview shape**, ensuring that the appearance during dragging **matches the non-drag state**, such as preserving the `RoundedRectangle` corner radius.\n\nIt is used for:\n\n- Defining the drag hit-testing region\n- Synchronizing the visual shape during dragging\n- Preventing the drag preview from degrading into a default rectangular mask\n\nIf this is omitted:\n\n- The drag preview may revert to a plain rectangle\n- Visual consistency with custom rounded backgrounds may be lost\n\n***\n\n## 5. Full Usage Flow Overview\n\n### 5.1 Data Model\n\n```ts\ntype Item = {\n  id: string\n  color: Color\n}\n```\n\n***\n\n### 5.2 Observable Data Source\n\n```ts\nconst data = useObservable<Item[]>(() => {\n  return new Array(30)\n    .fill(0)\n    .map((_, index) => ({\n      id: String(index),\n      color: colors[index % colors.length]\n    }))\n})\n```\n\n***\n\n### 5.3 Active Drag State\n\n```ts\nconst active = useObservable<Item | null>(null)\n```\n\n***\n\n### 5.4 Item View with Consistent Drag Preview Shape\n\n```tsx\n<VStack\n  modifiers={\n    modifiers()\n      .frame({ height: 80 })\n      .frame({ maxWidth: 'infinity' })\n      .background(\n        <RoundedRectangle\n          cornerRadius={16}\n          fill={item.color}\n        />\n      )\n      .contentShape({\n        kind: 'dragPreview',\n        shape: {\n          type: 'rect',\n          cornerRadius: 16\n        }\n      })\n  }\n>\n```\n\n***\n\n### 5.5 Usage Inside `LazyVGrid`\n\n```tsx\n<ReorderableForEach\n  active={active}\n  data={data.value}\n  builder={(item) =>\n    <ItemView item={item} />\n  }\n  onMove={onMove}\n/>\n```\n\n***\n\n## 6. Why `ReorderableForEach` Is **Not Recommended Inside `List`**\n\nAlthough technically it can be placed inside a `List`, it is **generally discouraged**, because `List` applies a strong set of built-in system behaviors:\n\n- Automatic separators\n- Fixed row height management\n- Native selection system\n- Built-in swipe gestures\n- System editing mode\n- Cell reuse logic\n\nThese behaviors often **conflict with custom drag reordering**, causing:\n\n- Drag jumping or snapping\n- Incorrect hit-testing\n- Unwanted system edit mode activation\n- Visual desynchronization\n\n### Recommended Containers\n\n- `ScrollView`\n- `LazyVGrid`\n- `LazyHGrid`\n- Fully custom layout containers\n\n### Not Recommended\n\n- `List`\n\n***\n\n## 7. Internal Behavior Summary\n\n`ReorderableForEach` follows this internal workflow:\n\n1. Builds drag-enabled child nodes from `data`\n2. Uses `dragPreview contentShape` to define the drag hit area and preview shape\n3. During dragging:\n\n   - Automatically updates `active`\n   - Continuously recalculates the target insertion index\n4. On drag completion:\n\n   - Calls `onMove`\n   - The developer applies the final reorder\n\n***\n\n## 8. Typical Use Cases\n\n- Custom tool layout sorting\n- Draggable dashboard modules\n- Reorderable widgets\n- Visual task priority organization\n- Card-based grid layouts\n","routePath":"/doc/Changelog/2.4.5/ReorderableForEach/","lang":"en","toc":[{"id":"1-component-definition","text":"1. Component Definition","depth":2,"charIndex":508},{"id":"2-generic-constraint","text":"2. Generic Constraint","depth":2,"charIndex":955},{"id":"id-is-required-and-must-be-stable","text":"`id` Is Required and Must Be Stable","depth":3,"charIndex":981},{"id":"3-props-reference","text":"3. Props Reference","depth":2,"charIndex":1390},{"id":"31-active","text":"3.1 `active`","depth":3,"charIndex":1413},{"id":"32-data","text":"3.2 `data`","depth":3,"charIndex":1805},{"id":"33-builder","text":"3.3 `builder`","depth":3,"charIndex":2132},{"id":"34-onmove","text":"3.4 `onMove`","depth":3,"charIndex":2692},{"id":"4-real-purpose-of-contentshape-drag-preview-consistency","text":"4. Real Purpose of `contentShape` (Drag Preview Consistency)","depth":2,"charIndex":3634},{"id":"5-full-usage-flow-overview","text":"5. Full Usage Flow Overview","depth":2,"charIndex":4379},{"id":"51-data-model","text":"5.1 Data Model","depth":3,"charIndex":4411},{"id":"52-observable-data-source","text":"5.2 Observable Data Source","depth":3,"charIndex":4491},{"id":"53-active-drag-state","text":"5.3 Active Drag State","depth":3,"charIndex":4723},{"id":"54-item-view-with-consistent-drag-preview-shape","text":"5.4 Item View with Consistent Drag Preview Shape","depth":3,"charIndex":4814},{"id":"55-usage-inside-lazyvgrid","text":"5.5 Usage Inside `LazyVGrid`","depth":3,"charIndex":5255},{"id":"6-why-reorderableforeach-is-not-recommended-inside-list","text":"6. Why `ReorderableForEach` Is **Not Recommended Inside `List`**","depth":2,"charIndex":5439},{"id":"recommended-containers","text":"Recommended Containers","depth":3,"charIndex":6002},{"id":"not-recommended","text":"Not Recommended","depth":3,"charIndex":6107},{"id":"7-internal-behavior-summary","text":"7. Internal Behavior Summary","depth":2,"charIndex":6143},{"id":"8-typical-use-cases","text":"8. Typical Use Cases","depth":2,"charIndex":6568}],"frontmatter":{},"version":"","description":"ReorderableForEach is a high-level component in Scripting that provides built-in drag-to-reorder capability.\nIt preserves the familiar usage pattern of ForEach while adding native support for: Drag gesture recognitionActive item trackingManual reorder callbacks This allows developers to implement sortable lists and grids with minimal effort. Typical use cases include: Draggable card layoutsReorderable grids (LazyVGrid, LazyHGrid)User-defined module arrangements"},{"title":"Example","content":"```tsx\n\n\ntype Item = {\n  id: string\n  color: Color\n}\n\nconst colors: Color[] = [\n  'systemRed',\n  'systemBlue',\n  'systemGreen',\n  'systemPink',\n  'systemOrange',\n  'systemPurple',\n]\n\nfunction ItemView({\n  item\n}: {\n  item: Item\n}) {\n\n  return <VStack\n    modifiers={\n      modifiers()\n        .frame({\n          height: 80\n        })\n        .frame({\n          maxWidth: 'infinity'\n        })\n        .background(\n          <RoundedRectangle\n            cornerRadius={16}\n            fill={item.color}\n          />\n        )\n        .contentShape({\n          kind: 'dragPreview',\n          shape: {\n            type: 'rect',\n            cornerRadius: 16\n          }\n        })\n    }\n  >\n    <Text\n      foregroundStyle=\"white\"\n      font=\"title\"\n    >{item.id}</Text>\n  </VStack>\n}\n\nfunction View() {\n  // Access dismiss function.\n  const dismiss = Navigation.useDismiss()\n\n  const data = useObservable<Item[]>(() => {\n    return new Array(30)\n      .fill(0)\n      .map((_, index) => ({\n        id: String(index),\n        color: colors[index % colors.length]\n      }))\n  })\n\n  const active = useObservable<Item | null>(null)\n\n  const onMove = (indices: number[], newOffset: number) => {\n    const movingItems = indices.map(index => data.value[index])\n    const newValue = data.value.filter((_, index) => !indices.includes(index))\n    newValue.splice(newOffset, 0, ...movingItems)\n    data.setValue(newValue)\n  }\n\n  return <NavigationStack>\n    <ScrollView\n      navigationTitle=\"ReorderableForEach demo\"\n      toolbar={\n        <Toolbar>\n          <ToolbarItem\n            placement=\"topBarLeading\"\n          >\n            <Button\n              title=\"Close\"\n              action={dismiss}\n            />\n          </ToolbarItem>\n        </Toolbar>\n      }\n    >\n      <LazyVGrid\n        columns={[\n          {\n            size: {\n              type: 'flexible'\n            }\n          },\n          {\n            size: {\n              type: 'flexible'\n            }\n          }\n        ]}\n        padding={{\n          horizontal: true\n        }}\n      >\n        <ReorderableForEach\n          active={active}\n          data={data.value}\n          builder={(item) =>\n            <ItemView\n              item={item}\n            />\n          }\n          onMove={onMove}\n        />\n      </LazyVGrid>\n    </ScrollView>\n  </NavigationStack>\n}\n\nasync function run() {\n  // Present view.\n  await Navigation.present({\n    element: <View />\n  })\n\n  // Avoiding memory leaks.\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Changelog/2.4.5/ReorderableForEach/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Selectable List","content":"`List.selection` provides **selection state binding** for the `List` component. It enables:\n\n- Single selection mode\n- Multiple selection mode\n- Integration with edit mode via `EditButton`\n- Automatic synchronization with user interaction\n\n***\n\n## 1. API Definition\n\n```ts\ntype ListProps = {\n  selection?: Observable<string | null> | Observable<string[]>\n  ...\n}\n\ndeclare const List: FunctionComponent<ListProps>\n```\n\n***\n\n## 2. selection Type Description\n\nThe selection mode is determined by the generic type of `Observable`:\n\n| Mode               | Observable Type              | Description                                   |\n| ------------------ | ---------------------------- | --------------------------------------------- |\n| Single selection   | `Observable<string \\| null>` | Only one item can be selected                 |\n| Multiple selection | `Observable<string[]>`       | Multiple items can be selected simultaneously |\n\n***\n\n## 3. Automatic Binding Rules with ForEach\n\nWhen `List` is bound to `selection`, **every item inside `ForEach.data` must conform to the following structure**:\n\n```ts\n{\n  id: string\n}\n```\n\nBinding behavior:\n\n1. The `id` property is automatically used as the **unique selection identifier**\n2. When a list item is tapped:\n\n   - Single selection mode: `selected.value` is automatically set to the tapped item’s `id`\n   - Multiple selection mode: the `id` is automatically added to or removed from `selected.value`\n3. Manual tap handling is not required\n4. The `id` value must remain unique and stable; otherwise, selection behavior becomes undefined\n\n***\n\n## 4. Single Selection Mode\n\n### 1. Definition\n\n```tsx\nconst selected = useObservable<string | null>(null)\n```\n\n### 2. Usage Example\n\n```tsx\nfunction View() {\n  const selected = useObservable<string | null>(null)\n\n  const options = useObservable<{ id: string }[]>(() =>\n    new Array(10).fill(0).map((_, i) => ({ \n      id: i.toString() \n    }))\n  )\n\n  return <NavigationStack>\n    <List selection={selected}>\n      <ForEach\n        data={options}\n        builder={item =>\n          <Text>{item.id}</Text>\n        }\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n### 3. State Description\n\n- `null`: no item is currently selected\n- `\"3\"`: the item whose `id` is `\"3\"` is selected\n\n***\n\n## 5. Multiple Selection Mode\n\n### 1. Definition\n\n```tsx\nconst selected = useObservable<string[]>([])\n```\n\n### 2. Usage Example\n\n```tsx\nfunction View() {\n  const dismiss = Navigation.useDismiss()\n  const selected = useObservable<string[]>([])\n\n  const options = useObservable<{ id: string }[]>(() =>\n    new Array(30).fill(0).map((_, i) => ({\n      id: i.toString()\n    }))\n  )\n\n  console.log(selected.value)\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"Page Title\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />,\n        topBarTrailing: <EditButton />\n      }}\n      selection={selected}\n    >\n      <ForEach\n        data={options}\n        builder={item =>\n          <Text>{item.id}</Text>\n        }\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n### 3. State Description\n\n`selected.value` is always an array of strings, for example:\n\n```ts\n[\"2\", \"5\", \"8\"]\n```\n\nThis indicates that three items are currently selected.\n\n***\n\n## 6. Interaction Between selection and EditButton\n\nWhen `List` is bound to `selection`:\n\n1. `EditButton` automatically enables list editing mode\n2. While in edit mode:\n\n   - Single selection: tapping an item replaces the current selection\n   - Multiple selection: multiple items can be selected simultaneously\n3. After exiting edit mode:\n\n   - `selected.value` is **automatically reset**\n\n     - Single selection resets to `null`\n     - Multiple selection resets to an empty array `[]`\n\nThis behavior matches SwiftUI’s native edit mode behavior.\n\n***\n\n## 7. Programmatic Control of selection\n\nIn addition to user interaction, selection can be modified by code.\n\n### Single Selection\n\n```ts\nselected.setValue(\"5\")\n```\n\n### Multiple Selection\n\n```ts\nselected.setValue([\"1\", \"3\", \"7\"])\n```\n\nThe UI will update automatically to reflect the new selection state.\n\n***\n\n## 8. Compatibility with NavigationStack\n\n`List.selection` is fully compatible with `NavigationStack` and does not affect:\n\n- Navigation behavior\n- Toolbar layout\n- Edit mode interactions\n- Back navigation behavior\n\nRecommended structure:\n\n```tsx\n<NavigationStack>\n  <List selection={selected}>\n    ...\n  </List>\n</NavigationStack>\n```\n\n***\n\n## 9. Common Errors and Misuse\n\n### 1. Incorrect selection Type\n\nIncorrect:\n\n```ts\nconst selected = useObservable<number | null>(null)\n```\n\nCorrect:\n\n```ts\nconst selected = useObservable<string | null>(null)\n```\n\nCurrently, only `string` is supported as the selection identifier type.\n\n***\n\n### 2. Incorrect Initialization for Multiple Selection\n\nIncorrect:\n\n```ts\nconst selected = useObservable<string[]>(null)\n```\n\nCorrect:\n\n```ts\nconst selected = useObservable<string[]>([])\n```\n\n***\n\n### 3. Missing id in ForEach.data\n\nIncorrect:\n\n```tsx\nconst options = [{ name: \"A\" }, { name: \"B\" }]\n```\n\nThis will cause:\n\n- Selection to fail\n- Unstable checked state\n- List reuse inconsistencies\n\n***\n\n## 10. Typical Use Cases\n\n`List.selection` is suitable for:\n\n- Single-choice settings (themes, languages, preferences)\n- Batch deletion\n- Batch export\n- Batch sharing\n- File managers\n- Contact pickers\n- Task lists with selection\n","routePath":"/doc/Changelog/2.4.5/Selectable List","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":245},{"id":"2-selection-type-description","text":"2. selection Type Description","depth":2,"charIndex":423},{"id":"3-automatic-binding-rules-with-foreach","text":"3. Automatic Binding Rules with ForEach","depth":2,"charIndex":942},{"id":"4-single-selection-mode","text":"4. Single Selection Mode","depth":2,"charIndex":1595},{"id":"1-definition","text":"1. Definition","depth":3,"charIndex":1624},{"id":"2-usage-example","text":"2. Usage Example","depth":3,"charIndex":1707},{"id":"3-state-description","text":"3. State Description","depth":3,"charIndex":2160},{"id":"5-multiple-selection-mode","text":"5. Multiple Selection Mode","depth":2,"charIndex":2282},{"id":"1-definition-1","text":"1. Definition","depth":3,"charIndex":2313},{"id":"2-usage-example-1","text":"2. Usage Example","depth":3,"charIndex":2389},{"id":"3-state-description-1","text":"3. State Description","depth":3,"charIndex":3155},{"id":"6-interaction-between-selection-and-editbutton","text":"6. Interaction Between selection and EditButton","depth":2,"charIndex":3332},{"id":"7-programmatic-control-of-selection","text":"7. Programmatic Control of selection","depth":2,"charIndex":3885},{"id":"single-selection","text":"Single Selection","depth":3,"charIndex":3995},{"id":"multiple-selection","text":"Multiple Selection","depth":3,"charIndex":4051},{"id":"8-compatibility-with-navigationstack","text":"8. Compatibility with NavigationStack","depth":2,"charIndex":4196},{"id":"9-common-errors-and-misuse","text":"9. Common Errors and Misuse","depth":2,"charIndex":4538},{"id":"1-incorrect-selection-type","text":"1. Incorrect selection Type","depth":3,"charIndex":4570},{"id":"2-incorrect-initialization-for-multiple-selection","text":"2. Incorrect Initialization for Multiple Selection","depth":3,"charIndex":4829},{"id":"3-missing-id-in-foreachdata","text":"3. Missing id in ForEach.data","depth":3,"charIndex":5026},{"id":"10-typical-use-cases","text":"10. Typical Use Cases","depth":2,"charIndex":5230}],"frontmatter":{},"version":"","description":"List.selection provides selection state binding for the List component. It enables: Single selection modeMultiple selection modeIntegration with edit mode via EditButtonAutomatic synchronization with user interaction"},{"title":"VideoPreviewView","content":"`VideoPreviewView` is a UI component that displays the live camera preview associated with a `VideoRecorder` instance.\nIt renders the real-time output of the recorder’s capture session and serves as the visual foundation for custom camera interfaces.\n\n`VideoPreviewView` does **not** control recording behavior. All recording logic—preparation, start, pause, resume, stop, and disposal—is handled exclusively by `VideoRecorder`.\n\n***\n\n## Purpose and Responsibilities\n\n- Display the live camera preview from a `VideoRecorder`\n- Automatically follow the lifecycle of the recorder’s capture session\n- Serve as a composable preview layer for custom camera UIs\n- Support layout and sizing through standard view props such as `frame` and `aspectRatio`\n\n***\n\n## Component Definition\n\n```ts\ntype VideoPreviewViewProps = {\n  recorder: VideoRecorder\n}\n\ndeclare const VideoPreviewView: FunctionComponent<VideoPreviewViewProps>\n```\n\n***\n\n## Props\n\n### recorder\n\n```ts\nrecorder: VideoRecorder\n```\n\nThe `VideoRecorder` instance that provides the preview source.\n\n#### Behavior\n\n- After `recorder.prepare()` completes successfully, the preview becomes available.\n- When `recorder.dispose()` is called, the preview stops and underlying resources are released.\n- `VideoPreviewView` does not own the recorder lifecycle; it only references it.\n\n***\n\n## Relationship to VideoRecorder State\n\nThe preview behavior typically correlates with `VideoRecorder.state` as follows (exact behavior may vary slightly by system):\n\n| Recorder State | Preview Behavior                    |\n| -------------- | ----------------------------------- |\n| `idle`         | No preview or empty output          |\n| `preparing`    | Preview may not yet be available    |\n| `ready`        | Preview is available                |\n| `recording`    | Live, continuously updating preview |\n| `paused`       | Usually frozen at the last frame    |\n| `finishing`    | Preview stops updating              |\n| `finished`     | Preview stopped                     |\n| `failed`       | Preview unavailable                 |\n\n***\n\n## Recommended Lifecycle Management\n\n`VideoRecorder` should be created at the page level and disposed of when the page is dismissed.\n\nRecommended practices:\n\n- Create the recorder using `useMemo` to avoid unnecessary re-instantiation.\n- Assign `onStateChanged` inside `useEffect`.\n- Call `recorder.dispose()` in the cleanup function.\n- Always call `await recorder.prepare()` before starting a recording.\n\n***\n\n## Complete Example\n\n```tsx\nfunction View() {\n  // Access dismiss function.\n  const dismiss = Navigation.useDismiss()\n  const recorder = useMemo(() => {\n    return new VideoRecorder({\n      camera: {\n        position: \"front\",\n      },\n      frameRate: 30,\n      audioEnabled: true,\n      orientation: \"portrait\",\n      sessionPreset: \"hd1280x720\",\n      videoCodec: \"hevc\"\n    })\n  }, [])\n  const [state, setState] = useState<VideoRecorderState>(\"idle\")\n\n  useEffect(() => {\n    recorder.onStateChanged = (state, details) => {\n      setState(state)\n\n      if (state === \"failed\") {\n        Dialog.alert(details!)\n      }\n    }\n\n    return () => {\n      recorder.dispose()\n    }\n  }, [])\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"Page Title\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <Text>State: {state}</Text>\n\n      <Button\n        title=\"Start\"\n        action={async () => {\n          await recorder.prepare()\n          recorder.startRecording(\n            Path.join(\n              FileManager.documentsDirectory,\n              \"test.mov\"\n            )\n          )\n        }}\n      />\n\n      <Button\n        title=\"Pause\"\n        action={() => {\n          recorder.pauseRecording()\n        }}\n      />\n\n      <Button\n        title=\"Resume\"\n        action={() => {\n          recorder.resumeRecording()\n        }}\n      />\n\n      <Button\n        title=\"Stop\"\n        action={async () => {\n          await recorder.stopRecording()\n        }}\n      />\n\n      <VideoPreviewView\n        recorder={recorder}\n        frame={{\n          width: 300\n        }}\n        aspectRatio={{\n          value: 3 / 4,\n          contentMode: \"fill\"\n        }}\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## Layout and Rendering Guidance\n\n### Controlling Size with `frame`\n\n`VideoPreviewView` supports standard layout props such as `frame`.\n\nExamples:\n\n- Specify only `width` and rely on `aspectRatio` to determine height\n- Specify both `width` and `height` to force a fixed size (may crop or stretch depending on aspect ratio)\n\n***\n\n### Controlling Aspect Ratio\n\n```tsx\n<VideoPreviewView\n  recorder={recorder}\n  aspectRatio={{\n    value: 3 / 4,\n    contentMode: \"fill\"\n  }}\n/>\n```\n\n- `value`: width-to-height ratio\n- `contentMode: \"fill\"`: fills the view and crops if necessary\n- Use `contentMode: \"fit\"` (if supported by your common props) to fully contain the preview with possible letterboxing\n\n***\n\n## Important Notes\n\n### Preparation Is Required\n\nBinding a `VideoRecorder` to `VideoPreviewView` does not automatically start the capture session.\n\nIf `prepare()` is not called:\n\n- The preview may remain empty\n- The preview may become available only intermittently\n- Relying on implicit behavior is discouraged\n\nBest practice: explicitly call `await recorder.prepare()` before recording, as shown in the example.\n\n***\n\n### Resource Cleanup\n\n- Always call `recorder.dispose()` when leaving the page or when the preview is no longer needed.\n- Failing to dispose may keep the camera active, increase power usage, or block subsequent camera access.\n\n***\n\n### Error Handling\n\nWhen `state === \"failed\"`:\n\n- Display `details` to the user (for example, using `Dialog.alert`)\n- Disable recording controls\n- Optionally allow retry by calling `await recorder.reset()` followed by `prepare()`\n\n***\n\n## Responsibility Boundary\n\n- **VideoRecorder**\n  Controls recording logic, state transitions, and resource management.\n\n- **VideoPreviewView**\n  Renders the camera preview and participates only in UI layout.\n\nThis separation keeps recording logic deterministic and the UI layer composable.\n","routePath":"/doc/Changelog/2.4.5/VideoPreviewView","lang":"en","toc":[{"id":"purpose-and-responsibilities","text":"Purpose and Responsibilities","depth":2,"charIndex":435},{"id":"component-definition","text":"Component Definition","depth":2,"charIndex":752},{"id":"props","text":"Props","depth":2,"charIndex":926},{"id":"recorder","text":"recorder","depth":3,"charIndex":936},{"id":"behavior","text":"Behavior","depth":4,"charIndex":1049},{"id":"relationship-to-videorecorder-state","text":"Relationship to VideoRecorder State","depth":2,"charIndex":1331},{"id":"recommended-lifecycle-management","text":"Recommended Lifecycle Management","depth":2,"charIndex":2074},{"id":"complete-example","text":"Complete Example","depth":2,"charIndex":2484},{"id":"layout-and-rendering-guidance","text":"Layout and Rendering Guidance","depth":2,"charIndex":4332},{"id":"controlling-size-with-frame","text":"Controlling Size with `frame`","depth":3,"charIndex":4366},{"id":"controlling-aspect-ratio","text":"Controlling Aspect Ratio","depth":3,"charIndex":4661},{"id":"important-notes","text":"Important Notes","depth":2,"charIndex":5031},{"id":"preparation-is-required","text":"Preparation Is Required","depth":3,"charIndex":5051},{"id":"resource-cleanup","text":"Resource Cleanup","depth":3,"charIndex":5450},{"id":"error-handling","text":"Error Handling","depth":3,"charIndex":5682},{"id":"responsibility-boundary","text":"Responsibility Boundary","depth":2,"charIndex":5918}],"frontmatter":{},"version":"","description":"VideoPreviewView is a UI component that displays the live camera preview associated with a VideoRecorder instance.\nIt renders the real-time output of the recorder’s capture session and serves as the visual foundation for custom camera interfaces. VideoPreviewView does not control recording behavior. All recording logic—preparation, start, pause, resume, stop, and disposal—is handled exclusively by VideoRecorder."},{"title":"VideoRecorder <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# VideoRecorder \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`VideoRecorder` provides a programmable video recording session in Scripting.\nIt encapsulates camera selection, audio/video capture, encoding, pause/resume handling, zoom, focus, torch control, and final file writing.\n\nThis API is intended for custom camera interfaces, video capture utilities, and automated recording workflows.\n\n***\n\n## Capabilities Overview\n\n- Front and back camera support\n- Explicit camera type selection (wide, ultra-wide, telephoto, etc.)\n- Multiple frame rates (24 / 30 / 60 / 120)\n- Optional audio recording\n- Multiple system capture session presets\n- Multiple video codecs (HEVC / H.264 / ProRes, etc.)\n- Pause and resume during recording\n- Independent focus and exposure control\n- Zoom and smooth zoom (ramp) control\n- Torch (flashlight) control\n- Deterministic state machine with callbacks\n- Explicit lifecycle management (`prepare / reset / dispose`)\n\n***\n\n## Type Definitions\n\n### CameraPosition\n\n```ts\ntype CameraPosition = \"front\" | \"back\"\n```\n\nRepresents the physical camera position.\n\n***\n\n### CameraType\n\n```ts\ntype CameraType =\n  | \"wide\"\n  | \"ultraWide\"\n  | \"telephoto\"\n  | \"trueDepth\"\n  | \"dual\"\n  | \"dualWide\"\n  | \"triple\"\n```\n\nRepresents the physical camera device type.\nAvailability depends on the device hardware.\n\n***\n\n### VideoRecorderState\n\n```ts\ntype VideoRecorderState =\n  | \"idle\"\n  | \"preparing\"\n  | \"ready\"\n  | \"recording\"\n  | \"paused\"\n  | \"finishing\"\n  | \"finished\"\n  | \"failed\"\n```\n\n#### State Semantics\n\n| State       | Meaning                                               |\n| ----------- | ----------------------------------------------------- |\n| `idle`      | Initial state, no resources configured                |\n| `preparing` | Camera session and pipelines are being configured     |\n| `ready`     | Recorder is ready to start recording                  |\n| `recording` | Recording is in progress                              |\n| `paused`    | Recording is paused                                   |\n| `finishing` | Recording is stopping and file writing is in progress |\n| `finished`  | Recording completed successfully                      |\n| `failed`    | An error occurred                                     |\n\n***\n\n### VideoCaptureSessionPreset\n\n```ts\ntype VideoCaptureSessionPreset =\n  | \"high\"\n  | \"medium\"\n  | \"low\"\n  | \"cif352x288\"\n  | \"vga640x480\"\n  | \"iFrame960x540\"\n  | \"iFrame1280x720\"\n  | \"hd1280x720\"\n  | \"hd1920x1080\"\n  | \"hd4K3840x2160\"\n```\n\nDefines the capture session resolution preset.\n\n***\n\n### VideoCodec\n\n```ts\ntype VideoCodec =\n  | \"hevc\"\n  | \"h264\"\n  | \"jpeg\"\n  | \"JPEGXL\"\n  | \"proRes4444\"\n  | \"appleProRes4444XQ\"\n  | \"proRes422\"\n  | \"proRes422HQ\"\n  | \"proRes422LT\"\n  | \"proRes422Proxy\"\n  | \"proResRAW\"\n  | \"proResRAWHQ\"\n  | \"hevcWithAlpha\"\n```\n\nSpecifies the video encoding format.\nActual availability depends on system and hardware support.\n\n***\n\n### VideoOrientation\n\n```ts\ntype VideoOrientation =\n  | \"portrait\"\n  | \"landscapeLeft\"\n  | \"landscapeRight\"\n```\n\nSpecifies the output video orientation.\n\n***\n\n## Constructor\n\n```ts\nnew VideoRecorder(settings?)\n```\n\n### settings\n\n```ts\n{\n  camera?: {\n    position: CameraPosition\n    preferredTypes?: CameraType[]\n  }\n  frameRate?: number\n  audioEnabled?: boolean\n  sessionPreset?: VideoCaptureSessionPreset\n  videoCodec?: VideoCodec\n  videoBitRate?: number\n  orientation?: VideoOrientation\n  mirrorFrontCamera?: boolean\n}\n```\n\n#### Parameter Details\n\n- **camera**\n\n  - `position`\n    Camera position. Defaults to `\"back\"`.\n  - `preferredTypes`\n    Preferred camera device types.\n    If omitted, a suitable device is selected automatically based on position.\n\n- **frameRate**\n  Target frame rate. Supported values: 24, 30, 60, 120.\n  Defaults to 30. Actual frame rate depends on device capability.\n\n- **audioEnabled**\n  Indicates whether audio is recorded. Defaults to `true`.\n\n- **sessionPreset**\n  Capture session resolution preset. Defaults to `\"high\"`.\n\n- **videoCodec**\n  Video encoding format. Defaults to `\"hevc\"`.\n\n- **videoBitRate**\n  Average video bit rate in bits per second.\n  If omitted, the system selects an appropriate value.\n\n- **orientation**\n  Output video orientation. Defaults to `\"portrait\"`.\n\n- **mirrorFrontCamera**\n  Indicates whether the front camera output is mirrored.\n  Defaults to `true`. Only applies to the front camera.\n\n***\n\n## Read-Only Properties\n\n### minZoomFactor\n\n```ts\nreadonly minZoomFactor: number\n```\n\nMinimum supported zoom factor for the active device.\n\n***\n\n### maxZoomFactor\n\n```ts\nreadonly maxZoomFactor: number\n```\n\nMaximum supported zoom factor for the active device.\n\n***\n\n### currentZoomFactor\n\n```ts\nreadonly currentZoomFactor: number\n```\n\nCurrent zoom factor.\n\n***\n\n### displayZoomFactor\n\n```ts\nreadonly displayZoomFactor: number\n```\n\nZoom factor displayed to the user.\n\n***\n\n### hasTorch\n\n```ts\nreadonly hasTorch: boolean\n```\n\nIndicates whether the active camera supports a torch.\n\n***\n\n### torchMode\n\n```ts\nreadonly torchMode: \"auto\" | \"on\" | \"off\"\n```\n\nCurrent torch mode.\n\n***\n\n## State and Callbacks\n\n### state\n\n```ts\nstate: VideoRecorderState\n```\n\nRepresents the current state of the recorder.\n\n***\n\n### onStateChanged\n\n```ts\nonStateChanged?: (\n  state: VideoRecorderState,\n  details?: string\n) => void\n```\n\nInvoked whenever the recorder state changes.\n\n- When `state === \"failed\"`\n  `details` contains an error description.\n\n- When `state === \"finished\"`\n  `details` contains the full output file path.\n\n***\n\n## Methods\n\n### prepare()\n\n```ts\nprepare(): Promise<void>\n```\n\nPrepares the recorder by configuring the camera session and audio/video pipelines.\n\n#### Usage Constraints\n\n- Must be called before `startRecording`\n- Transitions state to `ready` on success\n- Transitions to `failed` on error\n\n***\n\n### startRecording(toPath)\n\n```ts\nstartRecording(toPath: string): void\n```\n\nStarts video recording.\n\n#### Parameters\n\n- **toPath**\n  Full file path where the video will be saved.\n\n#### Usage Constraints\n\n- Only valid in the `ready` state\n- Transitions state to `recording`\n\n***\n\n### pauseRecording()\n\n```ts\npauseRecording(): void\n```\n\nPauses the ongoing recording.\n\n#### Usage Constraints\n\n- Only valid in the `recording` state\n- Transitions state to `paused`\n- Timeline is compacted without introducing blank segments\n\n***\n\n### resumeRecording()\n\n```ts\nresumeRecording(): void\n```\n\nResumes a paused recording.\n\n#### Usage Constraints\n\n- Only valid in the `paused` state\n- Transitions state back to `recording`\n\n***\n\n### stopRecording()\n\n```ts\nstopRecording(): Promise<void>\n```\n\nStops recording and finalizes the output file.\n\n#### Behavior\n\n- Transitions state to `finishing`\n- Transitions to `finished` after file writing completes\n- Final file path is delivered via `onStateChanged`\n\n***\n\n### reset()\n\n```ts\nreset(): Promise<void>\n```\n\nResets the recorder state to allow a new recording session.\n\n#### Intended Use\n\n- After a completed recording\n- After a failed recording\n\n#### Behavior\n\n- Transitions state back to `idle`\n- `prepare` may be called again\n\n***\n\n### setTorchMode()\n\n```ts\nsetTorchMode(mode: \"auto\" | \"off\" | \"on\"): void\n```\n\nSets the torch mode for the active camera.\n\n***\n\n### setFocusPoint()\n\n```ts\nsetFocusPoint(point: { x: number; y: number }): void\n```\n\nSets the focus point.\n\n- Coordinates are normalized in the range `0.0 ~ 1.0`\n- `(0,0)` represents the top-left corner\n- `(1,1)` represents the bottom-right corner\n\n***\n\n### setExposurePoint()\n\n```ts\nsetExposurePoint(point: { x: number; y: number }): void\n```\n\nSets the exposure point using the same coordinate system as focus.\n\n***\n\n### resetFocus()\n\n```ts\nresetFocus(): void\n```\n\nRestores automatic focus mode.\n\n***\n\n### resetExposure()\n\n```ts\nresetExposure(): void\n```\n\nRestores automatic exposure mode.\n\n***\n\n### setZoomFactor()\n\n```ts\nsetZoomFactor(factor: number): void\n```\n\nImmediately sets the zoom factor.\n\n- Value must be within `minZoomFactor` and `maxZoomFactor`\n\n***\n\n### rampZoomFactor()\n\n```ts\nrampZoomFactor(toFactor: number, rate: number): void\n```\n\nSmoothly transitions the zoom factor.\n\n- `toFactor` specifies the target zoom factor\n- `rate` specifies the transition speed in powers of two per second\n\n***\n\n### resetZoom()\n\n```ts\nresetZoom(): void\n```\n\nResets the zoom factor to the default value (typically `1.0`).\n\n***\n\n### dispose()\n\n```ts\ndispose(): Promise<void>\n```\n\nReleases all resources and destroys the recorder.\n\n#### Usage Constraints\n\n- The instance cannot be used after disposal\n- Releases camera, audio, and system resources\n- Should be called when the recording lifecycle ends\n\n***\n\n## Typical Usage Flow\n\n```ts\nconst recorder = new VideoRecorder({\n  camera: { position: \"back\" },\n  frameRate: 60,\n  videoCodec: \"hevc\"\n})\n\nrecorder.onStateChanged = (state, details) => {\n  if (state === \"finished\") {\n    console.log(\"Video saved at:\", details)\n  }\n}\n\nawait recorder.prepare()\nrecorder.startRecording(\"/path/to/tmp/demo.mov\")\n```\n\n***\n\n## Usage Guidelines\n\n- Always observe `onStateChanged` to track state transitions\n- Do not start recording before calling `prepare`\n- Call `reset` before reusing the same instance for another recording\n- Call `dispose` when the recorder is no longer needed\n","routePath":"/doc/Changelog/2.4.5/VideoRecorder","lang":"en","toc":[{"id":"capabilities-overview","text":"Capabilities Overview","depth":2,"charIndex":493},{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":1044},{"id":"cameraposition","text":"CameraPosition","depth":3,"charIndex":1065},{"id":"cameratype","text":"CameraType","depth":3,"charIndex":1182},{"id":"videorecorderstate","text":"VideoRecorderState","depth":3,"charIndex":1420},{"id":"state-semantics","text":"State Semantics","depth":4,"charIndex":1593},{"id":"videocapturesessionpreset","text":"VideoCaptureSessionPreset","depth":3,"charIndex":2341},{"id":"videocodec","text":"VideoCodec","depth":3,"charIndex":2633},{"id":"videoorientation","text":"VideoOrientation","depth":3,"charIndex":2995},{"id":"constructor","text":"Constructor","depth":2,"charIndex":3154},{"id":"settings","text":"settings","depth":3,"charIndex":3210},{"id":"parameter-details","text":"Parameter Details","depth":4,"charIndex":3522},{"id":"read-only-properties","text":"Read-Only Properties","depth":2,"charIndex":4453},{"id":"minzoomfactor","text":"minZoomFactor","depth":3,"charIndex":4478},{"id":"maxzoomfactor","text":"maxZoomFactor","depth":3,"charIndex":4598},{"id":"currentzoomfactor","text":"currentZoomFactor","depth":3,"charIndex":4718},{"id":"displayzoomfactor","text":"displayZoomFactor","depth":3,"charIndex":4814},{"id":"hastorch","text":"hasTorch","depth":3,"charIndex":4924},{"id":"torchmode","text":"torchMode","depth":3,"charIndex":5036},{"id":"state-and-callbacks","text":"State and Callbacks","depth":2,"charIndex":5130},{"id":"state","text":"state","depth":3,"charIndex":5154},{"id":"onstatechanged","text":"onStateChanged","depth":3,"charIndex":5254},{"id":"methods","text":"Methods","depth":2,"charIndex":5564},{"id":"prepare","text":"prepare()","depth":3,"charIndex":5576},{"id":"usage-constraints","text":"Usage Constraints","depth":4,"charIndex":5711},{"id":"startrecordingtopath","text":"startRecording(toPath)","depth":3,"charIndex":5859},{"id":"parameters","text":"Parameters","depth":4,"charIndex":5960},{"id":"usage-constraints-1","text":"Usage Constraints","depth":4,"charIndex":6039},{"id":"pauserecording","text":"pauseRecording()","depth":3,"charIndex":6138},{"id":"usage-constraints-2","text":"Usage Constraints","depth":4,"charIndex":6225},{"id":"resumerecording","text":"resumeRecording()","depth":3,"charIndex":6384},{"id":"usage-constraints-3","text":"Usage Constraints","depth":4,"charIndex":6471},{"id":"stoprecording","text":"stopRecording()","depth":3,"charIndex":6576},{"id":"behavior","text":"Behavior","depth":4,"charIndex":6687},{"id":"reset","text":"reset()","depth":3,"charIndex":6852},{"id":"intended-use","text":"Intended Use","depth":4,"charIndex":6960},{"id":"behavior-1","text":"Behavior","depth":4,"charIndex":7037},{"id":"settorchmode","text":"setTorchMode()","depth":3,"charIndex":7125},{"id":"setfocuspoint","text":"setFocusPoint()","depth":3,"charIndex":7253},{"id":"setexposurepoint","text":"setExposurePoint()","depth":3,"charIndex":7507},{"id":"resetfocus","text":"resetFocus()","depth":3,"charIndex":7671},{"id":"resetexposure","text":"resetExposure()","depth":3,"charIndex":7756},{"id":"setzoomfactor","text":"setZoomFactor()","depth":3,"charIndex":7850},{"id":"rampzoomfactor","text":"rampZoomFactor()","depth":3,"charIndex":8018},{"id":"resetzoom","text":"resetZoom()","depth":3,"charIndex":8263},{"id":"dispose","text":"dispose()","depth":3,"charIndex":8378},{"id":"usage-constraints-4","text":"Usage Constraints","depth":4,"charIndex":8480},{"id":"typical-usage-flow","text":"Typical Usage Flow","depth":2,"charIndex":8655},{"id":"usage-guidelines","text":"Usage Guidelines","depth":2,"charIndex":9008}],"frontmatter":{},"version":"","description":"VideoRecorder provides a programmable video recording session in Scripting.\nIt encapsulates camera selection, audio/video capture, encoding, pause/resume handling, zoom, focus, torch control, and final file writing. This API is intended for custom camera interfaces, video capture utilities, and automated recording workflows."},{"title":"WebViewController","content":"The `WebViewController` class allows you to display and interact with embedded web content inside your script. It is designed for use cases like custom in-app browsers, rendering dynamic HTML, or communicating with JavaScript running in a web context.\n\n***\n\n## Class: `WebViewController`\n\n```ts\nconst webView = new WebViewController()\n```\n\n***\n\n## Properties\n\n### `shouldAllowRequest?: (request) => Promise<boolean>`\n\nAn optional callback that determines whether to allow or block a request made by the WebView. This function is invoked before each resource is loaded, such as when navigating to a new page or submitting a form.\n\nThis is useful for intercepting navigation actions, implementing custom security logic, or filtering unwanted requests (e.g., ad domains).\n\n#### Parameters\n\nThe function receives a single `request` object with the following properties:\n\n- `url: string`\n  The full URL of the request.\n\n- `method: string`\n  The HTTP method (e.g., `GET`, `POST`).\n\n- `body?: Data | null`\n  Optional body data sent with the request (e.g., for `POST` requests).\n\n- `headers: Record<string, string>`\n  HTTP request headers.\n\n- `timeoutInterval: number`\n  The timeout interval in seconds for the request.\n\n- `navigationType: \"linkActivated\" | \"reload\" | \"backForward\" | \"formResubmitted\" | \"formSubmitted\" | \"other\"`\n  The context that triggered the navigation.\n\n#### Returns\n\nA `Promise<boolean>` resolving to:\n\n- `true`: allow the request to proceed\n- `false`: block the request\n\n#### Example\n\n```ts\nconst webView = new WebViewController()\n\nwebView.shouldAllowRequest = async (request) => {\n  console.log('Intercepted request to:', request.url)\n\n  // Block all requests to example.com\n  if (request.url.includes('example.com')) {\n    return false\n  }\n\n  return true\n}\n\nawait webView.loadURL('https://www.wikipedia.org')\nawait webView.present({ navigationTitle: 'Filtered WebView' })\n```\n\n***\n\n## Methods\n\n### `loadFile(path: string, allowingReadAccessTo?: string): Promise<boolean>`\n\nLoads a web page from a local file.\n\n- **Parameters**:\n\n  - `path`: The path to the local file.\n  - `allowingReadAccessTo` (optional): A directory to allow read access to.\n- **Returns**: `Promise<boolean>` — Resolves to `true` if the load succeeds.\n\n### `loadURL(url: string): Promise<boolean>`\n\nLoads a webpage by its URL.\n\n- **Parameters**:\n\n  - `url`: The full URL of the webpage to load.\n- **Returns**: `Promise<boolean>` — Resolves to `true` if the load succeeds.\n\n***\n\n### `loadHTML(html: string, baseURL?: string): Promise<boolean>`\n\nLoads a web page using raw HTML content.\n\n- **Parameters**:\n\n  - `html`: The HTML string to render.\n  - `baseURL` (optional): A base URL to resolve relative paths.\n- **Returns**: `Promise<boolean>` — Resolves to `true` on successful load.\n\n***\n\n### `loadData(data: Data, mimeType: string, encoding: string, baseURL: string): Promise<boolean>`\n\nLoads web content from raw data.\n\n- **Parameters**:\n\n  - `data`: The binary content to load.\n  - `mimeType`: MIME type of the content (e.g., `\"text/html\"`).\n  - `encoding`: Character encoding (e.g., `\"utf-8\"`).\n  - `baseURL`: Base URL for resolving relative URLs.\n- **Returns**: `Promise<boolean>`\n\n***\n\n### `waitForLoad(): Promise<boolean>`\n\nWaits until the WebView has finished loading content.\n\n- **Returns**: `Promise<boolean>`\n\n***\n\n### `getHTML(): Promise<string | null>`\n\nReturns the current HTML content of the page.\n\n- **Returns**: `Promise<string | null>`\n\n***\n\n### `evaluateJavaScript<T = any>(javascript: string): Promise<T>`\n\nEvaluates the specified JavaScript string in the context of the WebView.\n\n- **Parameters**:\n\n  - `javascript`: A JavaScript code string to be evaluated.\n    To retrieve a result from JavaScript, the code must explicitly use the `return` keyword.\n- **Returns**: `Promise<T>` — Resolves with the result of the JavaScript evaluation. If the JavaScript code returns a value, it will be returned as the resolved value of the Promise.\n\n#### Example\n\n```ts\nconst webView = new WebViewController()\nawait webView.loadURL(\"https://example.com\")\nconst title = await webView.evaluateJavaScript(\"return document.title\") // Must use `return`\nconsole.log(title) // \"Example Domain\"\nwebView.dispose()\n```\n\nAnother example:\n\n```ts\nconst webView = new WebViewController()\nawait webView.loadHTML(`\n  <html>\n    <body>\n      <script>\n        window.myValue = 42\n      </script>\n    </body>\n  </html>\n`)\n\nawait webView.waitForLoad()\n\nconst result = await webView.evaluateJavaScript('return window.myValue')\nconsole.log(result) // 42\n```\n\n***\n\n### `addScriptMessageHandler<P = any, R = any>(name: string, handler: (params?: P) => R): Promise<void>`\n\nInstalls a message handler callable from JavaScript in the web page, and enables sending a reply back from native code.\n\n- **Parameters**:\n\n  - `name`: The message handler name. Must be unique and non-empty.\n  - `handler`: A callback function that receives parameters from JavaScript and returns a value. The return value will be sent back as the JavaScript promise resolution.\n\n- **Returns**: `Promise<void>` — Resolves when the message handler is added successfully.\n\n#### Example\n\n```ts\nlet webView = new WebViewController()\n\nawait webView.addScriptMessageHandler(\"sayHi\", (greeting: string) => {\n  console.log(\"Receive a message\", greeting)\n  return \"Hello!\"\n})\n\nawait webView.loadHTML(`\n  <html>\n    <body>\n      <script>\n        (async () => {\n          const response = await window.webkit.messageHandlers.sayHi.postMessage(\"Hi!\")\n          alert(response) // Shows: \"Hello!\"\n        })()\n      </script>\n    </body>\n  </html>\n`)\n```\n\n***\n\n### `present(options?: { fullscreen?: boolean, navigationTitle?: string }): Promise<void>`\n\nPresents the WebView in a modal sheet.\n\n- **Options**:\n\n  - `fullscreen`: If `true`, displays the WebView in fullscreen mode.\n  - `navigationTitle`: Optional title for the navigation bar.\n- **Returns**: `Promise<void>`\n\n***\n\n### `canGoBack(): Promise<boolean>`\n\nChecks whether the WebView can go back in history.\n\n***\n\n### `canGoForward(): Promise<boolean>`\n\nChecks whether the WebView can go forward in history.\n\n***\n\n### `goBack(): Promise<boolean>`\n\nNavigates to the previous page in the history stack.\n\n***\n\n### `goForward(): Promise<boolean>`\n\nNavigates to the next page in the history stack.\n\n***\n\n### `reload(): Promise<void>`\n\nReloads the current webpage.\n\n***\n\n### `dismiss(): void`\n\nDismisses the WebView if currently presented.\n\n***\n\n### `dispose(): void`\n\nDisposes the WebView instance and releases resources.\n\n- If the WebView is still presented, it will first be dismissed.\n- **Important**: You must call this to prevent memory leaks when done.\n\n***\n\n## Full Example\n\n```ts\nconst webView = new WebViewController()\n\nawait webView.addScriptMessageHandler('greet', (name) => {\n  return `Hello, ${name}`\n})\n\nawait webView.loadHTML(`\n  <html>\n    <body>\n      <h1>Custom WebView</h1>\n      <button onclick=\"sendMessage()\">Greet</button>\n      <script>\n        async function sendMessage() {\n          const response = await window.webkit.messageHandlers.greet.postMessage(\"Alice\")\n          alert(response)\n        }\n      </script>\n    </body>\n  </html>\n`)\n\nawait webView.present({ navigationTitle: 'WebView Demo' })\nwebView.dispose()\n```\n","routePath":"/doc/Changelog/2.4.5/WebViewController","lang":"en","toc":[{"id":"class-webviewcontroller","text":"Class: `WebViewController`","depth":2,"charIndex":258},{"id":"properties","text":"Properties","depth":2,"charIndex":345},{"id":"shouldallowrequest-request--promiseboolean","text":"`shouldAllowRequest?: (request) => Promise<boolean>`","depth":3,"charIndex":360},{"id":"parameters","text":"Parameters","depth":4,"charIndex":770},{"id":"returns","text":"Returns","depth":4,"charIndex":1370},{"id":"example","text":"Example","depth":4,"charIndex":1489},{"id":"methods","text":"Methods","depth":2,"charIndex":1902},{"id":"loadfilepath-string-allowingreadaccessto-string-promiseboolean","text":"`loadFile(path: string, allowingReadAccessTo?: string): Promise<boolean>`","depth":3,"charIndex":1914},{"id":"loadurlurl-string-promiseboolean","text":"`loadURL(url: string): Promise<boolean>`","depth":3,"charIndex":2243},{"id":"loadhtmlhtml-string-baseurl-string-promiseboolean","text":"`loadHTML(html: string, baseURL?: string): Promise<boolean>`","depth":3,"charIndex":2468},{"id":"loaddatadata-data-mimetype-string-encoding-string-baseurl-string-promiseboolean","text":"`loadData(data: Data, mimeType: string, encoding: string, baseURL: string): Promise<boolean>`","depth":3,"charIndex":2779},{"id":"waitforload-promiseboolean","text":"`waitForLoad(): Promise<boolean>`","depth":3,"charIndex":3182},{"id":"gethtml-promisestring--null","text":"`getHTML(): Promise<string | null>`","depth":3,"charIndex":3316},{"id":"evaluatejavascriptt--anyjavascript-string-promiset","text":"`evaluateJavaScript<T = any>(javascript: string): Promise<T>`","depth":3,"charIndex":3450},{"id":"example-1","text":"Example","depth":4,"charIndex":3947},{"id":"addscriptmessagehandlerp--any-r--anyname-string-handler-params-p--r-promisevoid","text":"`addScriptMessageHandler<P = any, R = any>(name: string, handler: (params?: P) => R): Promise<void>`","depth":3,"charIndex":4539},{"id":"example-2","text":"Example","depth":4,"charIndex":5115},{"id":"presentoptions--fullscreen-boolean-navigationtitle-string--promisevoid","text":"`present(options?: { fullscreen?: boolean, navigationTitle?: string }): Promise<void>`","depth":3,"charIndex":5592},{"id":"cangoback-promiseboolean","text":"`canGoBack(): Promise<boolean>`","depth":3,"charIndex":5909},{"id":"cangoforward-promiseboolean","text":"`canGoForward(): Promise<boolean>`","depth":3,"charIndex":6003},{"id":"goback-promiseboolean","text":"`goBack(): Promise<boolean>`","depth":3,"charIndex":6103},{"id":"goforward-promiseboolean","text":"`goForward(): Promise<boolean>`","depth":3,"charIndex":6196},{"id":"reload-promisevoid","text":"`reload(): Promise<void>`","depth":3,"charIndex":6288},{"id":"dismiss-void","text":"`dismiss(): void`","depth":3,"charIndex":6354},{"id":"dispose-void","text":"`dispose(): void`","depth":3,"charIndex":6429},{"id":"full-example","text":"Full Example","depth":2,"charIndex":6649}],"frontmatter":{},"version":"","description":"The WebViewController class allows you to display and interact with embedded web content inside your script. It is designed for use cases like custom in-app browsers, rendering dynamic HTML, or communicating with JavaScript running in a web context."},{"title":"Device","content":"The `Device` namespace provides access to device information, system environment data, screen and battery status, language and locale settings, and selected device capabilities (such as wake lock and network interface inspection).\n\nThis API is commonly used for:\n\n- Device-specific logic (iPhone / iPad / Mac)\n- UI layout and adaptive design\n- Localization and language selection\n- Network inspection and debugging\n- Preventing the device from sleeping during script execution\n\n***\n\n## Device and System Information\n\n### `Device.model: string`\n\nThe device model name, for example `\"iPhone\"` or `\"iPad\"`.\n\n***\n\n### `Device.systemName: string`\n\nThe name of the operating system, such as `\"iOS\"`, `\"iPadOS\"`, or `\"macOS\"`.\n\n***\n\n### `Device.systemVersion: string`\n\nThe current operating system version, for example `\"17.2\"`.\n\n***\n\n### `Device.isiPhone: boolean`\n\nIndicates whether the current device is an iPhone.\n\n***\n\n### `Device.isiPad: boolean`\n\nIndicates whether the current device is an iPad.\n\n***\n\n### `Device.isiOSAppOnMac: boolean`\n\nA Boolean value that indicates whether the process is an iPhone or iPad app running on a Mac (Mac Catalyst or Apple Silicon).\n\n***\n\n## Screen Information\n\n### `Device.screen`\n\nInformation about the main screen.\n\n```ts\n{\n  width: number\n  height: number\n  scale: number\n}\n```\n\nField descriptions:\n\n- `width`: Logical screen width (points)\n- `height`: Logical screen height (points)\n- `scale`: Screen scale factor (for example, 2 or 3)\n\nThis is commonly used for layout calculations, canvas sizing, screenshots, or rendering logic.\n\n***\n\n## Orientation and Device Posture\n\n### `Device.isPortrait: boolean`\n\nIndicates whether the device is currently in portrait orientation.\n\n***\n\n### `Device.isLandscape: boolean`\n\nIndicates whether the device is currently in landscape orientation.\n\n***\n\n### `Device.isFlat: boolean`\n\nIndicates whether the device is lying flat (for example, placed on a table).\n\nThis value is typically derived from motion sensors and can be used for advanced interaction logic.\n\n***\n\n## Appearance and Theme\n\n### `Device.colorScheme: ColorScheme`\n\nThe current system appearance mode.\n\nTypical values include:\n\n- `light`\n- `dark`\n\nThis is useful for adapting UI themes and styles to match system settings.\n\n***\n\n## Battery Information\n\n### `Device.batteryState`\n\nThe current battery state:\n\n```ts\n\"full\" | \"charging\" | \"unplugged\" | \"unknown\"\n```\n\nDescriptions:\n\n- `full`: Battery is fully charged\n- `charging`: Battery is charging\n- `unplugged`: Device is not connected to power\n- `unknown`: Battery state is unavailable\n\n***\n\n### `Device.batteryLevel: number`\n\nThe current battery level, in the range:\n\n- `0.0` to `1.0`\n- May return `-1` if the battery level is unavailable\n\n***\n\n## Language and Locale Settings\n\n### `Device.systemLocale: string`\n\nThe system’s current locale identifier, for example:\n\n```text\n\"en_US\"\n```\n\n***\n\n### `Device.preferredLanguages: string[]`\n\nThe user’s preferred languages, ordered by priority, for example:\n\n```ts\n[\"en-US\", \"zh-Hans-CN\"]\n```\n\nThis is the recommended API for language selection and localization logic.\n\n***\n\n### `Device.systemLocales: string[]` (Deprecated)\n\nThe user’s preferred locales.\n\n> Deprecated. Use `Device.preferredLanguages` instead.\n\n***\n\n### `Device.systemLanguageTag: string`\n\nThe current language tag in BCP-47 format, for example:\n\n```text\n\"en-US\"\n```\n\n***\n\n### `Device.systemLanguageCode: string`\n\nThe current language code, for example:\n\n```text\n\"en\"\n```\n\n***\n\n### `Device.systemCountryCode: string | undefined`\n\nThe current country or region code, for example:\n\n```text\n\"US\"\n```\n\nThis value may be `undefined` if no country information is available.\n\n***\n\n### `Device.systemScriptCode: string | undefined`\n\nThe script code of the current language, for example:\n\n```text\n\"Hans\"   // zh_CN_Hans\n```\n\nThis is commonly used to distinguish writing systems, such as Simplified vs. Traditional Chinese.\n\n***\n\n## Wake Lock\n\nWake lock prevents the device from automatically sleeping while a script is running.\n\n### `Device.isWakeLockEnabled: Promise<boolean>`\n\nRetrieves whether the wake lock is currently enabled.\n\n```ts\nconst enabled = await Device.isWakeLockEnabled\n```\n\n***\n\n### `Device.setWakeLockEnabled(enabled: boolean): void`\n\nEnables or disables the wake lock.\n\n```ts\nDevice.setWakeLockEnabled(true)\n```\n\nNotes:\n\n- Available only in the **Scripting app**\n- Prevents the screen from dimming or the device from sleeping\n- Should be disabled when no longer needed to conserve battery\n\n***\n\n## Network Interface Information\n\n### `Device.NetworkInterface`\n\nThe structure that represents a network interface entry:\n\n```ts\ntype NetworkInterface = {\n  address: string\n  netmask: string | null\n  family: 'IPv4' | 'IPv6'\n  mac: string | null\n  isInternal: boolean\n  cidr: string | null\n}\n```\n\nField descriptions:\n\n- `address`: IP address\n- `netmask`: Subnet mask\n- `family`: Address family (`IPv4` or `IPv6`)\n- `mac`: MAC address (may be null on some systems)\n- `isInternal`: Indicates whether the interface is internal (for example, loopback)\n- `cidr`: CIDR notation (for example, `192.168.1.10/24`)\n\n***\n\n### `Device.networkInterfaces(): Record<string, NetworkInterface[]>`\n\nReturns the network interfaces of the device.\n\nThe returned object is structured as:\n\n```ts\n{\n  [interfaceName: string]: NetworkInterface[]\n}\n```\n\nExample:\n\n```ts\nconst interfaces = Device.networkInterfaces()\n\nfor (const name in interfaces) {\n  for (const info of interfaces[name]) {\n    console.log(name, info.address, info.family)\n  }\n}\n```\n\nCommon use cases:\n\n- Retrieving local IP addresses\n- Distinguishing Wi-Fi, cellular, and loopback interfaces\n- Network diagnostics and debugging\n- Emulating Node.js `os.networkInterfaces()` behavior\n\n***\n\n## Best Practices\n\n- Prefer `preferredLanguages` for localization logic\n- Always disable the wake lock when it is no longer required\n- Do not assume specific interface names (such as `en0`) will always exist\n- Network interface availability may vary based on permissions and network state\n","routePath":"/doc/Changelog/2.4.6/Device/","lang":"en","toc":[{"id":"device-and-system-information","text":"Device and System Information","depth":2,"charIndex":483},{"id":"devicemodel-string","text":"`Device.model: string`","depth":3,"charIndex":517},{"id":"devicesystemname-string","text":"`Device.systemName: string`","depth":3,"charIndex":610},{"id":"devicesystemversion-string","text":"`Device.systemVersion: string`","depth":3,"charIndex":726},{"id":"deviceisiphone-boolean","text":"`Device.isiPhone: boolean`","depth":3,"charIndex":828},{"id":"deviceisipad-boolean","text":"`Device.isiPad: boolean`","depth":3,"charIndex":917},{"id":"deviceisiosapponmac-boolean","text":"`Device.isiOSAppOnMac: boolean`","depth":3,"charIndex":1002},{"id":"screen-information","text":"Screen Information","depth":2,"charIndex":1171},{"id":"devicescreen","text":"`Device.screen`","depth":3,"charIndex":1194},{"id":"orientation-and-device-posture","text":"Orientation and Device Posture","depth":2,"charIndex":1575},{"id":"deviceisportrait-boolean","text":"`Device.isPortrait: boolean`","depth":3,"charIndex":1610},{"id":"deviceislandscape-boolean","text":"`Device.isLandscape: boolean`","depth":3,"charIndex":1717},{"id":"deviceisflat-boolean","text":"`Device.isFlat: boolean`","depth":3,"charIndex":1826},{"id":"appearance-and-theme","text":"Appearance and Theme","depth":2,"charIndex":2040},{"id":"devicecolorscheme-colorscheme","text":"`Device.colorScheme: ColorScheme`","depth":3,"charIndex":2065},{"id":"battery-information","text":"Battery Information","depth":2,"charIndex":2267},{"id":"devicebatterystate","text":"`Device.batteryState`","depth":3,"charIndex":2291},{"id":"devicebatterylevel-number","text":"`Device.batteryLevel: number`","depth":3,"charIndex":2583},{"id":"language-and-locale-settings","text":"Language and Locale Settings","depth":2,"charIndex":2737},{"id":"devicesystemlocale-string","text":"`Device.systemLocale: string`","depth":3,"charIndex":2770},{"id":"devicepreferredlanguages-string","text":"`Device.preferredLanguages: string[]`","depth":3,"charIndex":2885},{"id":"devicesystemlocales-string-deprecated","text":"`Device.systemLocales: string[]` (Deprecated)","depth":3,"charIndex":3111},{"id":"devicesystemlanguagetag-string","text":"`Device.systemLanguageTag: string`","depth":3,"charIndex":3254},{"id":"devicesystemlanguagecode-string","text":"`Device.systemLanguageCode: string`","depth":3,"charIndex":3377},{"id":"devicesystemcountrycode-string--undefined","text":"`Device.systemCountryCode: string | undefined`","depth":3,"charIndex":3482},{"id":"devicesystemscriptcode-string--undefined","text":"`Device.systemScriptCode: string | undefined`","depth":3,"charIndex":3678},{"id":"wake-lock","text":"Wake Lock","depth":2,"charIndex":3924},{"id":"deviceiswakelockenabled-promiseboolean","text":"`Device.isWakeLockEnabled: Promise<boolean>`","depth":3,"charIndex":4024},{"id":"devicesetwakelockenabledenabled-boolean-void","text":"`Device.setWakeLockEnabled(enabled: boolean): void`","depth":3,"charIndex":4192},{"id":"network-interface-information","text":"Network Interface Information","depth":2,"charIndex":4510},{"id":"devicenetworkinterface","text":"`Device.NetworkInterface`","depth":3,"charIndex":4544},{"id":"devicenetworkinterfaces-recordstring-networkinterface","text":"`Device.networkInterfaces(): Record<string, NetworkInterface[]>`","depth":3,"charIndex":5120},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":5739}],"frontmatter":{},"version":"","description":"The Device namespace provides access to device information, system environment data, screen and battery status, language and locale settings, and selected device capabilities (such as wake lock and network interface inspection). This API is commonly used for: Device-specific logic (iPhone / iPad / Mac)UI layout and adaptive designLocalization and language selectionNetwork inspection and debuggingPreventing the device from sleeping during script execution"},{"title":"Example","content":"```tsx\n\n\n function Example() {\n  const dismiss = Navigation.useDismiss()\n\n  const details: {\n    name: string\n    value: string | boolean | number\n  }[] = [\n      {\n        name: \"Device.isiPhone\",\n        value: Device.isiPhone\n      },\n      {\n        name: \"Device.isiPad\",\n        value: Device.isiPad,\n      },\n      {\n        name: \"Device.systemVersion\",\n        value: Device.systemVersion,\n      },\n      {\n        name: \"Device.systemName\",\n        value: Device.systemName,\n      },\n      {\n        name: \"Device.isPortrait\",\n        value: Device.isPortrait,\n      },\n      {\n        name: \"Device.isLandscape\",\n        value: Device.isLandscape,\n      },\n      {\n        name: \"Device.isFlat\",\n        value: Device.isFlat,\n      },\n      {\n        name: \"Device.batteryLevel\",\n        value: Device.batteryLevel,\n      },\n      {\n        name: \"Device.batteryState\",\n        value: Device.batteryState,\n      }\n    ]\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Device\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      {details.map(item =>\n        <VStack\n          badge={item.value.toString()}\n          alignment={\"leading\"}\n        >\n          <Text font={\"headline\"}>{item.name}</Text>\n          <Text font={\"caption\"}>{typeof item.value}</Text>\n        </VStack>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Changelog/2.4.6/Device/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Intent","content":"Scripting allows you to define custom iOS Intents using an `intent.tsx` file. These scripts can receive input from the iOS share sheet or the Shortcuts app and return structured results. With optional UI presentation, you can create interactive workflows that process data and deliver output dynamically.\n\n***\n\n## 1. Creating and Configuring an Intent\n\n### 1.1 Create an Intent Script\n\n1. Create a new script project in the Scripting app.\n2. Add a file named `intent.tsx` to the project.\n3. Define your logic and optionally a UI component inside the file.\n\n### 1.2 Configure Supported Input Types\n\nTap the project title in the editor’s title bar to open **Intent Settings**, then select supported input types:\n\n- Text\n- Images\n- File URLs\n- URLs\n\nThis configuration enables your script to appear in the share sheet or Shortcuts when matching input is provided.\n\n***\n\n## 2. Accessing Input Data\n\nInside `intent.tsx`, use the `Intent` API to access input values.\n\n| Property                   | Description                                                                         |\n| -------------------------- | ----------------------------------------------------------------------------------- |\n| `Intent.shortcutParameter` | A single parameter passed from the Shortcuts app, with `.type` and `.value` fields. |\n| `Intent.textsParameter`    | Array of text strings.                                                              |\n| `Intent.urlsParameter`     | Array of URL strings.                                                               |\n| `Intent.imagesParameter`   | Array of image file paths (UIImage objects).                                        |\n| `Intent.fileURLsParameter` | Array of local file URL paths.                                                      |\n\nExample:\n\n```ts\nif (Intent.shortcutParameter) {\n  if (Intent.shortcutParameter.type === \"text\") {\n    console.log(Intent.shortcutParameter.value)\n  }\n}\n```\n\n***\n\n## 3. Returning a Result\n\nUse `Script.exit(result)` to return a result to the caller, such as the Shortcuts app or another script. Valid return types include:\n\n- Plain text: `Intent.text(value)`\n- Attributed text: `Intent.attributedText(value)`\n- URL: `Intent.url(value)`\n- JSON: `Intent.json(value)`\n- File path or file URL: `Intent.file(value)` or `Intent.fileURL(value)`\n\nExample:\n\n```ts\n\n\nScript.exit(Intent.text(\"Done\"))\n```\n\n***\n\n## 4. Displaying Interactive UI\n\nUse `Navigation.present()` to show a UI before returning a result. You can render a React-style component and then call `Script.exit()` after the interaction completes.\n\nExample:\n\n```ts\n\n\nfunction MyIntentView() {\n  return (\n    <VStack>\n      <Text>{Intent.textsParameter?.[0]}</Text>\n    </VStack>\n  )\n}\n\nasync function run() {\n  await Navigation.present({ element: <MyIntentView /> })\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## 5. Using Intents in the Share Sheet\n\nIf a script supports a specific input type (e.g., text or image), it will automatically appear as an option in the iOS share sheet:\n\n1. Select content such as text or a file.\n2. Tap the Share button.\n3. Choose **Scripting** in the share sheet.\n4. Scripting will list scripts that support the selected input type.\n\n***\n\n## 6. Using Intents in the Shortcuts App\n\nYou can call scripts from the Shortcuts app with or without UI:\n\n- **Run Script**: Executes the script in the background.\n- **Run Script in App**: Executes the script in the foreground, with UI presentation support.\n\nSteps:\n\n1. Open the Shortcuts app and create a new shortcut.\n2. Add the **Run Script** or **Run Script in App** action from Scripting.\n3. Choose the target script and pass input parameters if needed.\n\n***\n\n## 7. Intent API Reference\n\n### `Intent` Properties\n\n| Property            | Type                | Description                                     |\n| ------------------- | ------------------- | ----------------------------------------------- |\n| `shortcutParameter` | `ShortcutParameter` | Input from Shortcuts with `.type` and `.value`. |\n| `textsParameter`    | `string[]`          | Array of input text values.                     |\n| `urlsParameter`     | `string[]`          | Array of input URLs.                            |\n| `imagesParameter`   | `UIImage[]`         | Array of image file paths or objects.           |\n| `fileURLsParameter` | `string[]`          | Array of input file paths (local file URLs).    |\n\n### `Intent` Methods\n\n| Method                         | Return Type                 | Example                                |\n| ------------------------------ | --------------------------- | -------------------------------------- |\n| `Intent.text(value)`           | `IntentTextValue`           | `Intent.text(\"Hello\")`                 |\n| `Intent.attributedText(value)` | `IntentAttributedTextValue` | `Intent.attributedText(\"Styled Text\")` |\n| `Intent.url(value)`            | `IntentURLValue`            | `Intent.url(\"https://example.com\")`    |\n| `Intent.json(value)`           | `IntentJsonValue`           | `Intent.json({ key: \"value\" })`        |\n| `Intent.file(path)`            | `IntentFileValue`           | `Intent.file(\"/path/to/file.txt\")`     |\n| `Intent.fileURL(path)`         | `IntentFileURLValue`        | `Intent.fileURL(\"/path/to/file.pdf\")`  |\n| `Intent.image(UIImage)`        | `IntentImageValue`          | `Intent.image(uiImage)`                |\n\n***\n\n## 8. Best Practices and Notes\n\n- Always call `Script.exit()` to properly terminate the script and return a result.\n- When displaying a UI, ensure `Navigation.present()` is awaited before calling `Script.exit()`.\n- Use **\"Run Script in App\"** for large files or images to avoid process termination due to memory constraints.\n- You can use `queryParameters` when launching scripts via URL scheme if additional data is needed.\n","routePath":"/doc/Changelog/2.4.6/Intent","lang":"en","toc":[{"id":"1-creating-and-configuring-an-intent","text":"1. Creating and Configuring an Intent","depth":2,"charIndex":311},{"id":"11-create-an-intent-script","text":"1.1 Create an Intent Script","depth":3,"charIndex":353},{"id":"12-configure-supported-input-types","text":"1.2 Configure Supported Input Types","depth":3,"charIndex":557},{"id":"2-accessing-input-data","text":"2. Accessing Input Data","depth":2,"charIndex":867},{"id":"3-returning-a-result","text":"3. Returning a Result","depth":2,"charIndex":1944},{"id":"4-displaying-interactive-ui","text":"4. Displaying Interactive UI","depth":2,"charIndex":2380},{"id":"5-using-intents-in-the-share-sheet","text":"5. Using Intents in the Share Sheet","depth":2,"charIndex":2836},{"id":"6-using-intents-in-the-shortcuts-app","text":"6. Using Intents in the Shortcuts App","depth":2,"charIndex":3195},{"id":"7-intent-api-reference","text":"7. Intent API Reference","depth":2,"charIndex":3660},{"id":"intent-properties","text":"`Intent` Properties","depth":3,"charIndex":3688},{"id":"intent-methods","text":"`Intent` Methods","depth":3,"charIndex":4386},{"id":"8-best-practices-and-notes","text":"8. Best Practices and Notes","depth":2,"charIndex":5368}],"frontmatter":{},"version":"","description":"Scripting allows you to define custom iOS Intents using an intent.tsx file. These scripts can receive input from the iOS share sheet or the Shortcuts app and return structured results. With optional UI presentation, you can create interactive workflows that process data and deliver output dynamically."},{"title":"ItemProvider","content":"`ItemProvider` represents a **deferred data provider** used to access content such as files, images, text, or URLs in a controlled and secure way.\nIt is commonly used in scenarios like drag and drop, file importing, and content selection from Photos or Files.\n\nAn `ItemProvider` does not store the data itself. Instead, it describes **how and under what constraints the data can be accessed**.\n\n***\n\n## Core Concepts\n\n- `ItemProvider` describes capabilities, not concrete data\n- Data loading is always subject to system security restrictions\n- File-based resources can only be accessed within a limited, controlled scope\n- Whether a file can be accessed in place is determined by the underlying system\n\n***\n\n## Properties\n\n### registeredTypes\n\n```ts\nreadonly registeredTypes: UTType[]\n```\n\nRepresents all types that the item provider can supply at a semantic level.\n\n- Includes both concrete types and inferred parent types\n- Useful for high-level content classification or debugging\n- Does not guarantee that a concrete file representation exists\n\n***\n\n### registeredInPlaceTypes\n\n```ts\nreadonly registeredInPlaceTypes: UTType[]\n```\n\nRepresents the set of types that support open-in-place access.\n\n- Typically applies to large resources such as videos, audio files, or documents\n- Actual in-place access is determined at load time\n\n***\n\n## Capability Checks\n\n### hasItemConforming\n\n```ts\nhasItemConforming(type: UTType): boolean\n```\n\nChecks whether the content semantically conforms to the specified type.\n\n- Performs a broad, semantic check\n- Considers UTType inheritance\n- Suitable for branching logic and content classification\n\n***\n\n### hasRepresentationConforming\n\n```ts\nhasRepresentationConforming(type: UTType): boolean\n```\n\nChecks whether a concrete, loadable representation exists for the specified type.\n\n- Performs a strict check\n- Suitable for file processing and format-specific workflows\n\n***\n\n### hasInPlaceRepresentationConforming\n\n```ts\nhasInPlaceRepresentationConforming(type: UTType): boolean\n```\n\nChecks whether a representation supporting open-in-place access exists.\n\n- Commonly used to choose loading strategies for large files\n\n***\n\n## Object Loading Capabilities\n\n### canLoadUIImage\n\n```ts\ncanLoadUIImage(): boolean\n```\n\nIndicates whether the content can be loaded as a `UIImage`.\n\n- Intended for UI display\n- Does not guarantee preservation of original format or metadata\n\n***\n\n### canLoadLivePhoto\n\n```ts\ncanLoadLivePhoto(): boolean\n```\n\nIndicates whether the content can be loaded as a `LivePhoto`.\n\n- Used to distinguish Live Photos from static images\n- When true, `loadLivePhoto` can be called\n\n***\n\n## Loading Methods\n\n### loadUIImage\n\n```ts\nloadUIImage(): Promise<UIImage | null>\n```\n\nLoads a `UIImage` object.\n\n- Suitable for lightweight display\n- Not intended for file-level processing or asset preservation\n\n***\n\n### loadLivePhoto\n\n```ts\nloadLivePhoto(): Promise<LivePhoto | null>\n```\n\nLoads a `LivePhoto` object.\n\n- Includes both the still image and paired video\n- Suitable for display, saving, or further processing\n\n***\n\n### loadURL\n\n```ts\nloadURL(): Promise<string | null>\n```\n\nLoads a URL and returns it as a string.\n\n- May represent a web URL or a file URL\n\n***\n\n### loadText\n\n```ts\nloadText(): Promise<string | null>\n```\n\nLoads plain text content.\n\n- Supports plain text\n- Rich text is automatically converted to plain text\n\n***\n\n### loadData\n\n```ts\nloadData(type: UTType): Promise<Data | null>\n```\n\nLoads raw binary data for the specified type.\n\n- The entire data payload is loaded into memory\n- Suitable for JSON, configuration files, or small resources\n- Not recommended for large files such as video or audio\n\n***\n\n## File Path Loading and Security Scope\n\nAccess to file paths is subject to strict security rules.\nAll file access must occur within a limited callback scope provided by the API.\n\n***\n\n### loadFilePath\n\n```ts\nloadFilePath(type: UTType): Promise<string | null>\n```\n\nLoads a file path for the specified type. If the item provider can load data as the specified type, this file will be copied to the app group's temporary directory and the file path will be returned, otherwise null will be returned. You should delete the file when it is no longer needed.\n\nExample:\n\n```ts\nconst filePath = provider.loadFilePath(\"public.movie\")\n```\n\n***\n\n## Creating an ItemProvider\n\n### fromUIImage\n\n```ts\nItemProvider.fromUIImage(image: UIImage): ItemProvider\n```\n\nCreates an `ItemProvider` from a `UIImage`.\n\n- Provides static image capabilities only\n- Does not include Live Photo or original asset information\n\n***\n\n### fromText\n\n```ts\nItemProvider.fromText(text: string): ItemProvider\n```\n\nCreates an `ItemProvider` from a text string.\n\n***\n\n### fromURL\n\n```ts\nItemProvider.fromURL(url: string): ItemProvider | null\n```\n\nCreates an `ItemProvider` from a URL string.\n\n- Returns `null` if the URL is invalid\n- Supports both web URLs and file URLs\n\n***\n\n### fromFilePath\n\n```ts\nItemProvider.fromFilePath(path: string): ItemProvider\n```\n\nCreates an `ItemProvider` from a file path.\n\n- Preserves the original file\n- Suitable for videos, audio, and documents\n- Supports open-in-place capability checks\n\n***\n\n## Usage Guidelines\n\n- Use `hasItemConforming` to determine content categories\n- Use object loading methods for UI display\n- Use file path loading methods for large resources\n- Always access files only within the provided callback scope\n- Never defer access to security-scoped files outside the callback\n","routePath":"/doc/Changelog/2.4.6/ItemProvider","lang":"en","toc":[{"id":"core-concepts","text":"Core Concepts","depth":2,"charIndex":400},{"id":"properties","text":"Properties","depth":2,"charIndex":708},{"id":"registeredtypes","text":"registeredTypes","depth":3,"charIndex":723},{"id":"registeredinplacetypes","text":"registeredInPlaceTypes","depth":3,"charIndex":1054},{"id":"capability-checks","text":"Capability Checks","depth":2,"charIndex":1338},{"id":"hasitemconforming","text":"hasItemConforming","depth":3,"charIndex":1360},{"id":"hasrepresentationconforming","text":"hasRepresentationConforming","depth":3,"charIndex":1638},{"id":"hasinplacerepresentationconforming","text":"hasInPlaceRepresentationConforming","depth":3,"charIndex":1909},{"id":"object-loading-capabilities","text":"Object Loading Capabilities","depth":2,"charIndex":2158},{"id":"canloaduiimage","text":"canLoadUIImage","depth":3,"charIndex":2190},{"id":"canloadlivephoto","text":"canLoadLivePhoto","depth":3,"charIndex":2405},{"id":"loading-methods","text":"Loading Methods","depth":2,"charIndex":2631},{"id":"loaduiimage","text":"loadUIImage","depth":3,"charIndex":2651},{"id":"loadlivephoto","text":"loadLivePhoto","depth":3,"charIndex":2849},{"id":"loadurl","text":"loadURL","depth":3,"charIndex":3060},{"id":"loadtext","text":"loadText","depth":3,"charIndex":3205},{"id":"loaddata","text":"loadData","depth":3,"charIndex":3373},{"id":"file-path-loading-and-security-scope","text":"File Path Loading and Security Scope","depth":2,"charIndex":3662},{"id":"loadfilepath","text":"loadFilePath","depth":3,"charIndex":3847},{"id":"creating-an-itemprovider","text":"Creating an ItemProvider","depth":2,"charIndex":4298},{"id":"fromuiimage","text":"fromUIImage","depth":3,"charIndex":4327},{"id":"fromtext","text":"fromText","depth":3,"charIndex":4563},{"id":"fromurl","text":"fromURL","depth":3,"charIndex":4690},{"id":"fromfilepath","text":"fromFilePath","depth":3,"charIndex":4899},{"id":"usage-guidelines","text":"Usage Guidelines","depth":2,"charIndex":5150}],"frontmatter":{},"version":"","description":"ItemProvider represents a deferred data provider used to access content such as files, images, text, or URLs in a controlled and secure way.\nIt is commonly used in scenarios like drag and drop, file importing, and content selection from Photos or Files. An ItemProvider does not store the data itself. Instead, it describes how and under what constraints the data can be accessed."},{"title":"MediaComposer Example","content":"This example demonstrates how to use `MediaComposer` to compose a final video from **video, image, and audio sources**, and export it to the script directory.\n\nThe workflow covered in this example includes:\n\n1. Picking an audio file\n2. Picking an image\n3. Picking a video\n4. Building a visual timeline (video + image)\n5. Inserting audio at a specific time\n6. Exporting the composed video\n\n***\n\n## Example Code\n\n```tsx\n\n\nconsole.present().then(() => Script.exit())\n\nasync function run() {\n  try {\n\n    const audioPath = (await DocumentPicker.pickFiles({\n      types: [\"public.audio\"]\n    })).at(0)\n\n    if (audioPath == null) {\n      console.error(\"no audio\")\n      return\n    }\n\n    console.log(\"Audio Picked\")\n\n    const imageResult = (await Photos.pick({\n      filter: PHPickerFilter.images()\n    })).at(0)\n\n    const imagePath = await imageResult?.itemProvider.loadFilePath(\"public.image\")\n\n    if (!imagePath) {\n      console.log(\"No image\")\n      return\n    }\n\n    console.log(\"Image picked\")\n\n    const videoResult = (await Photos.pick({\n      filter: PHPickerFilter.videos()\n    })).at(0)\n\n    const videoPath = await videoResult?.itemProvider.loadFilePath(\"public.movie\")\n\n    if (videoPath == null) {\n      console.log(\"No video\")\n      return\n    }\n\n    console.log(\"Video Picked\")\n\n    console.log(\"Start composing...\")\n\n    const exportPath = Path.join(\n      Script.directory,\n      \"dest.mp4\"\n    )\n\n    const exportResult = await MediaComposer.composeAndExport({\n      exportPath,\n      timeline: {\n        videoItems: [{\n          videoPath: videoPath\n        }, {\n          imagePath: imagePath,\n          duration: MediaTime.make({\n            seconds: 5,\n            preferredTimescale: 600\n          })\n        }],\n        audioClips: [{\n          path: audioPath,\n          at: MediaTime.make({\n            seconds: 5,\n            preferredTimescale: 600\n          })\n        }]\n      }\n    })\n\n    console.log(\n      \"Result:\",\n      exportResult.exportPath,\n      \"\\n\",\n      exportResult.duration.getSeconds()\n    )\n\n  } catch (e) {\n    console.error(e)\n  }\n}\n\nrun()\n```\n\n***\n\n## Timeline Breakdown\n\n### Visual Timeline (videoItems)\n\n```ts\nvideoItems: [\n  { videoPath },\n  {\n    imagePath,\n    duration: MediaTime.make({\n      seconds: 5,\n      preferredTimescale: 600\n    })\n  }\n]\n```\n\n- The first `VideoItem` is a full video clip\n- The second `VideoItem` is an image displayed for 5 seconds\n- All `videoItems` are concatenated **in strict order**\n- Final video duration = video duration + 5 seconds\n\n***\n\n### Audio Timeline (audioClips)\n\n```ts\naudioClips: [{\n  path: audioPath,\n  at: MediaTime.make({\n    seconds: 5,\n    preferredTimescale: 600\n  })\n}]\n```\n\n- The audio starts playing at **5 seconds** on the final timeline\n- When `at` is omitted, audio clips are appended sequentially\n- Audio does **not** affect the final video duration\n\n***\n\n## Export Result\n\n```ts\n{\n  exportPath: string\n  duration: MediaTime\n}\n```\n\n- `exportPath`: the full output file path\n- `duration`: the total video duration (derived from `videoItems`)\n\n***\n\n## Common Errors and Edge Cases\n\n### 1. ImageClip without duration\n\n```ts\n{\n  imagePath: \"...\",\n  // ❌ missing duration\n}\n```\n\n**Issue:**\n\n- Images have no intrinsic duration\n- Omitting `duration` will cause composition to fail\n\n**Solution:**\n\n- Always provide an explicit `MediaTime` duration\n\n***\n\n### 2. Using raw numbers instead of MediaTime\n\n```ts\n// ❌ incorrect\nat: 5\n```\n\n**Correct usage:**\n\n```ts\nat: MediaTime.make({\n  seconds: 5,\n  preferredTimescale: 600\n})\n```\n\nAll time values in MediaComposer **must** be represented by `MediaTime`.\n\n***\n\n### 3. Mixed timescales causing precision issues\n\n**Issue:**\n\n- Different media sources may use different timescales\n- This can lead to rounding errors during trimming, fades, or alignment\n\n**Recommendation:**\n\n- Use a consistent `preferredTimescale` (e.g. 600)\n- Convert external times using `convertScale` when needed\n\n***\n\n### 4. Audio extending beyond the video duration\n\n**Behavior:**\n\n- Audio that exceeds the end of the video does not extend the final duration\n- Any audio beyond the video end is automatically truncated\n\n***\n\n### 5. Unexpected audio balance when mixing original and external audio\n\n**Cause:**\n\n- By default, original video audio and external audio are mixed together\n- Without ducking, dialogue may be masked by background music\n\n***\n\n## Audio Ducking Behavior\n\n### What is Ducking\n\nDucking refers to:\n\n> Automatically lowering the volume of external audio (e.g. background music) when original video audio (e.g. dialogue) is present.\n\n***\n\n### Ducking Configuration\n\n```ts\nexportOptions: {\n  ducking: {\n    enabled: true,\n    duckedVolume: 0.25,\n    attackSeconds: 0.15,\n    releaseSeconds: 0.25\n  }\n}\n```\n\n#### Parameters\n\n- **enabled**\n  Enables or disables ducking (default: `true`)\n\n- **duckedVolume**\n  Target volume for external audio during ducking (0…1)\n\n- **attackSeconds**\n  Ramp-down duration before original audio starts\n\n- **releaseSeconds**\n  Ramp-up duration after original audio ends\n\n***\n\n### Conditions for Ducking to Apply\n\nDucking is applied only when all of the following are true:\n\n1. `VideoClip.keepOriginalAudio === true`\n2. At least one external `AudioClip` exists\n3. `exportOptions.ducking.enabled !== false`\n\n***\n\n## Audio Mixing Rules Summary\n\n1. **Original Video Audio**\n\n   - Included only when `keepOriginalAudio` is set to `true`\n\n2. **External Audio**\n\n   - Can be positioned or appended sequentially\n   - Supports per-clip `volume`, `fade`, and looping\n\n3. **Final Mix**\n\n   - All audio sources are mixed into a single output track\n   - Audio never changes the final video duration\n   - Ducking is applied automatically during mixing\n","routePath":"/doc/Changelog/2.4.6/MediaComposer/MediaComposer Example","lang":"en","toc":[{"id":"example-code","text":"Example Code","depth":2,"charIndex":394},{"id":"timeline-breakdown","text":"Timeline Breakdown","depth":2,"charIndex":2101},{"id":"visual-timeline-videoitems","text":"Visual Timeline (videoItems)","depth":3,"charIndex":2124},{"id":"audio-timeline-audioclips","text":"Audio Timeline (audioClips)","depth":3,"charIndex":2531},{"id":"export-result","text":"Export Result","depth":2,"charIndex":2871},{"id":"common-errors-and-edge-cases","text":"Common Errors and Edge Cases","depth":2,"charIndex":3062},{"id":"1-imageclip-without-duration","text":"1. ImageClip without duration","depth":3,"charIndex":3095},{"id":"2-using-raw-numbers-instead-of-mediatime","text":"2. Using raw numbers instead of MediaTime","depth":3,"charIndex":3362},{"id":"3-mixed-timescales-causing-precision-issues","text":"3. Mixed timescales causing precision issues","depth":3,"charIndex":3615},{"id":"4-audio-extending-beyond-the-video-duration","text":"4. Audio extending beyond the video duration","depth":3,"charIndex":3941},{"id":"5-unexpected-audio-balance-when-mixing-original-and-external-audio","text":"5. Unexpected audio balance when mixing original and external audio","depth":3,"charIndex":4149},{"id":"audio-ducking-behavior","text":"Audio Ducking Behavior","depth":2,"charIndex":4375},{"id":"what-is-ducking","text":"What is Ducking","depth":3,"charIndex":4402},{"id":"ducking-configuration","text":"Ducking Configuration","depth":3,"charIndex":4581},{"id":"parameters","text":"Parameters","depth":4,"charIndex":4748},{"id":"conditions-for-ducking-to-apply","text":"Conditions for Ducking to Apply","depth":3,"charIndex":5047},{"id":"audio-mixing-rules-summary","text":"Audio Mixing Rules Summary","depth":2,"charIndex":5282}],"frontmatter":{},"version":"","description":"This example demonstrates how to use MediaComposer to compose a final video from video, image, and audio sources, and export it to the script directory. The workflow covered in this example includes: Picking an audio filePicking an imagePicking a videoBuilding a visual timeline (video + image)Inserting audio at a specific timeExporting the composed video"},{"title":"MediaTime","content":"`MediaTime` represents **precise media time values** in audio and video processing. It is the fundamental time type used by MediaComposer in Scripting.\n\nConceptually, `MediaTime` corresponds to a time value with an explicit time base (similar to `CMTime` in AVFoundation), but provides a safer and more expressive abstraction for the scripting layer.\n\nA `MediaTime` instance can represent **numeric time**, **invalid time**, **indefinite time**, or **infinite time**, and supports strict arithmetic and comparison operations.\n\n***\n\n## Key Features\n\n- Precise construction using **value + timescale** or **seconds + preferredTimescale**\n- Time scaling with configurable rounding methods\n- Safe arithmetic and comparison operations\n- Explicit modeling of invalid, indefinite, and infinite time values\n- Designed for timeline composition, trimming, alignment, fades, and placement\n\n***\n\n## Time Precision Model\n\n`MediaTime` is based on the following core concepts:\n\n- **value**: an integer time value\n- **timescale**: the number of time units per second\n\nExamples:\n\n- `value = 300`, `timescale = 600` → 0.5 seconds\n- `value = 18000`, `timescale = 600` → 30 seconds\n\nThis model allows frame-accurate or sample-accurate timing without relying on floating-point arithmetic.\n\n***\n\n## Read-only Properties\n\n### secondes\n\n```ts\nreadonly secondes: number\n```\n\nThe time expressed in seconds as a floating-point value.\nThis is a derived value intended mainly for display or debugging. It is **not recommended for timeline calculations**.\n\n***\n\n### isValid\n\n```ts\nreadonly isValid: boolean\n```\n\nIndicates whether the time is valid and usable for calculations.\nReturns `false` for invalid, indefinite, or infinite time values.\n\n***\n\n### isPositiveInfinity / isNegativeInfinity\n\n```ts\nreadonly isPositiveInfinity: boolean\nreadonly isNegativeInfinity: boolean\n```\n\nIndicates whether the time represents positive or negative infinity.\nThese values are typically used as internal boundary markers in timeline logic.\n\n***\n\n### isIndefinite\n\n```ts\nreadonly isIndefinite: boolean\n```\n\nIndicates whether the time is indefinite.\nThis is commonly used when a media asset’s duration has not yet been determined.\n\n***\n\n### isNumeric\n\n```ts\nreadonly isNumeric: boolean\n```\n\nIndicates whether the time can participate in numeric calculations.\nArithmetic and comparison operations should only be performed when this value is `true`.\n\n***\n\n### hasBeenRounded\n\n```ts\nreadonly hasBeenRounded: boolean\n```\n\nIndicates whether the time has undergone rounding during construction or scale conversion.\nThis is useful when validating frame- or sample-accurate timelines.\n\n***\n\n## Time Conversion\n\n### convertScale\n\n```ts\nconvertScale(newTimescale: number, method: MediaTimeRoundingMethod): MediaTime\n```\n\nConverts the time to a new timescale using the specified rounding method.\n\n**Typical use cases:**\n\n- Aligning video frame timing (e.g. 600, 90000)\n- Aligning audio sample timing (e.g. 44100, 48000)\n- Avoiding precision errors caused by mixed timescales\n\n***\n\n## Accessing Time Values\n\n### getSeconds\n\n```ts\ngetSeconds(): number\n```\n\nReturns the time expressed in seconds as a floating-point value.\nSemantically equivalent to reading `secondes`, but clearer in intent.\n\n***\n\n## Time Arithmetic\n\n### plus / minus\n\n```ts\nplus(other: MediaItem): MediaItem\nminus(other: MediaItem): MediaItem\n```\n\nPerforms time addition or subtraction and returns a new `MediaTime`.\n\n- Both operands must be numeric\n- The original instances are not modified\n- The result follows the internal time base rules\n\n***\n\n## Time Comparison\n\n```ts\nlt(other: MediaItem): boolean\ngt(other: MediaItem): boolean\nlte(other: MediaItem): boolean\ngte(other: MediaItem): boolean\neq(other: MediaItem): boolean\nneq(other: MediaItem): boolean\n```\n\nCompares two time values.\n\n- Supports strict ordering and equality checks\n- Produces deterministic results even for non-numeric times\n- Recommended for timeline sorting, trimming, and boundary checks\n\n***\n\n## Static Constructors\n\n### make\n\n```ts\nstatic make(options: {\n  value: number\n  timescale: number\n} | {\n  seconds: number\n  preferredTimescale: number\n}): MediaTime\n```\n\nCreates a `MediaTime` instance.\n\n#### Using value + timescale\n\n```ts\nMediaTime.make({\n  value: 300,\n  timescale: 600\n})\n```\n\nBest suited for low-level or precision-critical scenarios.\n\n***\n\n#### Using seconds + preferredTimescale\n\n```ts\nMediaTime.make({\n  seconds: 5,\n  preferredTimescale: 600\n})\n```\n\nRecommended for most scripting-level use cases where seconds are the primary unit.\n\n***\n\n### zero\n\n```ts\nstatic zero(): MediaTime\n```\n\nReturns a `MediaTime` representing **0 seconds**.\n\n***\n\n### invalid\n\n```ts\nstatic invalid(): MediaTime\n```\n\nReturns an invalid time value.\nUseful for explicitly representing errors or unavailable timing information.\n\n***\n\n### indefinite\n\n```ts\nstatic indefinite(): MediaTime\n```\n\nReturns an indefinite time value.\nTypically used when a media asset’s duration is not yet known.\n\n***\n\n### positiveInfinity / negativeInfinity\n\n```ts\nstatic positiveInfinity(): MediaTime\nstatic negativeInfinity(): MediaTime\n```\n\nReturns positive or negative infinite time values.\nThese are mainly intended for internal timeline boundary handling and are not recommended for general scripting logic.\n\n***\n\n## Usage Guidelines and Best Practices\n\n- Avoid using floating-point seconds directly for timeline calculations; prefer `MediaTime`\n- Explicitly convert timescales when mixing audio and video sources\n- Check `isNumeric` before performing arithmetic or comparisons\n- Use consistent timescales when constructing `TimeRange` or `at` values\n\n***\n\n## Typical Usage in MediaComposer\n\n- Placing audio or video clips on the timeline (`AudioClip.at`)\n- Defining trimming ranges (`TimeRange`)\n- Calculating precise export durations\n- Driving fades, alignment, looping, and synchronization behavior\n","routePath":"/doc/Changelog/2.4.6/MediaComposer/MediaTime","lang":"en","toc":[{"id":"key-features","text":"Key Features","depth":2,"charIndex":532},{"id":"time-precision-model","text":"Time Precision Model","depth":2,"charIndex":884},{"id":"read-only-properties","text":"Read-only Properties","depth":2,"charIndex":1274},{"id":"secondes","text":"secondes","depth":3,"charIndex":1299},{"id":"isvalid","text":"isValid","depth":3,"charIndex":1532},{"id":"ispositiveinfinity--isnegativeinfinity","text":"isPositiveInfinity / isNegativeInfinity","depth":3,"charIndex":1719},{"id":"isindefinite","text":"isIndefinite","depth":3,"charIndex":2004},{"id":"isnumeric","text":"isNumeric","depth":3,"charIndex":2193},{"id":"hasbeenrounded","text":"hasBeenRounded","depth":3,"charIndex":2410},{"id":"time-conversion","text":"Time Conversion","depth":2,"charIndex":2639},{"id":"convertscale","text":"convertScale","depth":3,"charIndex":2659},{"id":"accessing-time-values","text":"Accessing Time Values","depth":2,"charIndex":3026},{"id":"getseconds","text":"getSeconds","depth":3,"charIndex":3052},{"id":"time-arithmetic","text":"Time Arithmetic","depth":2,"charIndex":3241},{"id":"plus--minus","text":"plus / minus","depth":3,"charIndex":3261},{"id":"time-comparison","text":"Time Comparison","depth":2,"charIndex":3559},{"id":"static-constructors","text":"Static Constructors","depth":2,"charIndex":3979},{"id":"make","text":"make","depth":3,"charIndex":4003},{"id":"using-value--timescale","text":"Using value + timescale","depth":4,"charIndex":4183},{"id":"using-seconds--preferredtimescale","text":"Using seconds + preferredTimescale","depth":4,"charIndex":4340},{"id":"zero","text":"zero","depth":3,"charIndex":4541},{"id":"invalid","text":"invalid","depth":3,"charIndex":4643},{"id":"indefinite","text":"indefinite","depth":3,"charIndex":4809},{"id":"positiveinfinity--negativeinfinity","text":"positiveInfinity / negativeInfinity","depth":3,"charIndex":4970},{"id":"usage-guidelines-and-best-practices","text":"Usage Guidelines and Best Practices","depth":2,"charIndex":5272},{"id":"typical-usage-in-mediacomposer","text":"Typical Usage in MediaComposer","depth":2,"charIndex":5615}],"frontmatter":{},"version":"","description":"MediaTime represents precise media time values in audio and video processing. It is the fundamental time type used by MediaComposer in Scripting. Conceptually, MediaTime corresponds to a time value with an explicit time base (similar to CMTime in AVFoundation), but provides a safer and more expressive abstraction for the scripting layer. A MediaTime instance can represent numeric time, invalid time, indefinite time, or infinite time, and supports strict arithmetic and comparison operations."},{"title":"Quick Start","content":"`MediaComposer` is used in Scripting to **compose video, image, and audio timelines and export a final media file**.\nIt provides a stable and precise timeline model that supports video clips, image clips, audio overlays, fades, audio ducking, and flexible export configuration.\n\nThis module is suitable for:\n\n- Mixing videos and images into a single output\n- Adding background music, voice-over, or sound effects\n- Generating videos from image sequences\n- Automated and script-driven media production\n\n***\n\n## Design Overview\n\nMediaComposer consists of three core layers:\n\n1. **Time Model**\n   Based on `MediaTime` and `TimeRange` for precise time representation\n\n2. **Timeline Model**\n\n   - `VideoItem[]`: visual timeline (videos or images, sequential)\n   - `AudioClip[]`: audio timeline (positioned or sequential)\n\n3. **Export System**\n   A unified `composeAndExport` API for rendering and exporting\n\n***\n\n## Timeline Structure\n\n```ts\ntimeline: {\n  videoItems: VideoItem[]\n  audioClips: AudioClip[]\n}\n```\n\n- **videoItems**\n  Defines the visual timeline. Video and image items are concatenated strictly in array order.\n- **audioClips**\n  Defines the audio timeline. Clips may be explicitly positioned or appended sequentially.\n\nThe final exported duration is determined by the **videoItems timeline**.\n\n***\n\n## VideoItem\n\n```ts\ntype VideoItem = XOR<VideoClip, ImageClip>\n```\n\nA `VideoItem` represents a single visual segment in the timeline.\nIt can be either a **video clip** or an **image clip**, but never both.\n\n***\n\n## VideoClip\n\n```ts\ntype VideoClip = {\n  videoPath: string\n  sourceTimeRange?: TimeRange | null\n  keepOriginalAudio?: boolean\n  fade?: FadeConfig | null\n}\n```\n\n### videoPath\n\n- Path to the video file\n- Local video files are supported\n\n***\n\n### sourceTimeRange\n\n```ts\nsourceTimeRange?: TimeRange | null\n```\n\n- Specifies the portion of the source video to use\n- Defaults to the entire video when omitted\n\n**Common use cases:**\n\n- Trimming a video\n- Extracting a specific segment as material\n\n***\n\n### keepOriginalAudio\n\n```ts\nkeepOriginalAudio?: boolean\n```\n\n- Whether to keep the original audio from the video\n- Default: `false`\n\n**Notes:**\n\n- When `true`, the video’s original audio participates in the final mix\n- External `audioClips` may still be used simultaneously\n- Ducking behavior is controlled by `ExportOptions.ducking`\n\n***\n\n### fade\n\n```ts\nfade?: FadeConfig | null\n```\n\n- Per-clip fade-in / fade-out configuration\n- Overrides the global video fade when provided\n\n***\n\n## ImageClip\n\n```ts\ntype ImageClip = {\n  imagePath: string\n  duration: MediaTime\n  contentMode?: \"fit\" | \"crop\"\n  backgroundColor?: Color\n  fade?: FadeConfig | null\n}\n```\n\n`ImageClip` allows a still image to appear as a timed segment within the video timeline.\n\n***\n\n### imagePath\n\n- Path to the image file\n- Common image formats are supported (JPEG, PNG, HEIC, etc.)\n\n***\n\n### duration\n\n```ts\nduration: MediaTime\n```\n\n- The display duration of the image clip in the video\n- This field is required\n\n***\n\n### contentMode\n\n```ts\ncontentMode?: \"fit\" | \"crop\"\n```\n\n- Controls how the image is scaled to the render size\n- Default: `fit`\n\nBehavior:\n\n- `fit`: Entire image is visible; letterboxing may occur\n- `crop`: Image fills the frame; excess is cropped\n\n***\n\n### backgroundColor\n\n```ts\nbackgroundColor?: Color\n```\n\n- Background color for areas not covered by the image\n- Commonly used together with `fit` mode\n\n***\n\n### fade\n\n```ts\nfade?: FadeConfig | null\n```\n\n- Fade-in / fade-out configuration for the image clip\n- Behaves the same as fades for video clips\n\n***\n\n## AudioClip\n\n```ts\ntype AudioClip = {\n  path: string\n  sourceTimeRange?: TimeRange | null\n  at?: MediaTime\n  volume?: number\n  fade?: FadeConfig | null\n  loopToFitVideoDuration?: boolean\n}\n```\n\n`AudioClip` is used to add background music, narration, or sound effects to the final video.\n\n***\n\n### path\n\n- Path to the audio file\n\n***\n\n### sourceTimeRange\n\n- Specifies the portion of the audio to use\n- Defaults to the entire audio file\n\n***\n\n### at\n\n```ts\nat?: MediaTime\n```\n\n- Explicit placement time on the final timeline\n- When omitted, audio clips are appended sequentially\n\n***\n\n### volume\n\n```ts\nvolume?: number\n```\n\n- Per-clip gain (0…1)\n- Default: `1`\n\n***\n\n### fade\n\n- Fade-in / fade-out configuration for the audio clip\n\n***\n\n### loopToFitVideoDuration\n\n```ts\nloopToFitVideoDuration?: boolean\n```\n\n- Whether the audio should loop to match the total video duration\n- Commonly used for background music\n\n***\n\n## FadeConfig\n\n```ts\ntype FadeConfig = {\n  fadeInSeconds?: number\n  fadeOutSeconds?: number\n}\n```\n\n- Duration is expressed in seconds\n- Applicable to video, image, and audio clips\n- Defaults to 0 when omitted\n\n***\n\n## ExportOptions\n\n```ts\ntype ExportOptions = {\n  renderSize?: Size\n  frameRate?: number\n  scaleMode?: VideoScaleMode\n  globalVideoFade?: FadeConfig | null\n  externalAudioBaseVolume?: number\n  ducking?: DuckingConfig\n  presetName?: ExportPreset\n  outputFileType?: ExportFileType\n}\n```\n\n### Common options\n\n- **renderSize**\n  Output resolution, default is 1080×1920\n\n- **frameRate**\n  Rendering frame rate, default is 30\n\n- **globalVideoFade**\n  Global fade applied to all visual clips unless overridden\n\n- **ducking**\n  Automatically lowers external audio volume when original video audio exists\n\n- **presetName / outputFileType**\n  Control encoding quality and output format\n\n***\n\n## composeAndExport\n\n```ts\nfunction composeAndExport(options: {\n  exportPath: string\n  timeline: {\n    videoItems: VideoItem[]\n    audioClips: AudioClip[]\n  }\n  exportOptions?: ExportOptions\n  overwrite?: boolean\n}): Promise<{\n  exportPath: string\n  duration: MediaTime\n}>\n```\n\n### Parameters\n\n- **exportPath**\n  Output file path\n\n- **timeline.videoItems**\n  Visual timeline (videos and images, in sequence)\n\n- **timeline.audioClips**\n  Audio timeline (positioned or sequential)\n\n- **exportOptions**\n  Optional export configuration\n\n- **overwrite**\n  Whether to overwrite an existing file (default: `true`)\n\n***\n\n### Return Value\n\n```ts\n{\n  exportPath: string\n  duration: MediaTime\n}\n```\n\n- **exportPath**: final output path\n- **duration**: total duration of the exported video (derived from `videoItems`)\n\n***\n\n## Usage Guidelines and Best Practices\n\n- Always use `MediaTime` for time values; avoid raw floating-point seconds\n- `ImageClip.duration` must always be explicitly specified\n- Audio and visual timelines are independent but mixed in the final output\n- For complex projects, use a consistent timescale (e.g. 600)\n- Background music typically uses `loopToFitVideoDuration`\n\n***\n\n## Typical Use Cases\n\n- Mixed image and video composition\n- Adding background music or narration to videos\n- Automated video generation\n- Script-driven content creation pipelines\n","routePath":"/doc/Changelog/2.4.6/MediaComposer/Quick Start","lang":"en","toc":[{"id":"design-overview","text":"Design Overview","depth":2,"charIndex":507},{"id":"timeline-structure","text":"Timeline Structure","depth":2,"charIndex":908},{"id":"videoitem","text":"VideoItem","depth":2,"charIndex":1309},{"id":"videoclip","text":"VideoClip","depth":2,"charIndex":1521},{"id":"videopath","text":"videoPath","depth":3,"charIndex":1681},{"id":"sourcetimerange","text":"sourceTimeRange","depth":3,"charIndex":1761},{"id":"keeporiginalaudio","text":"keepOriginalAudio","depth":3,"charIndex":2016},{"id":"fade","text":"fade","depth":3,"charIndex":2357},{"id":"imageclip","text":"ImageClip","depth":2,"charIndex":2501},{"id":"imagepath","text":"imagePath","depth":3,"charIndex":2768},{"id":"duration","text":"duration","depth":3,"charIndex":2875},{"id":"contentmode","text":"contentMode","depth":3,"charIndex":3005},{"id":"backgroundcolor","text":"backgroundColor","depth":3,"charIndex":3259},{"id":"fade-1","text":"fade","depth":3,"charIndex":3416},{"id":"audioclip","text":"AudioClip","depth":2,"charIndex":3566},{"id":"path","text":"path","depth":3,"charIndex":3860},{"id":"sourcetimerange-1","text":"sourceTimeRange","depth":3,"charIndex":3901},{"id":"at","text":"at","depth":3,"charIndex":4008},{"id":"volume","text":"volume","depth":3,"charIndex":4150},{"id":"fade-2","text":"fade","depth":3,"charIndex":4232},{"id":"looptofitvideoduration","text":"loopToFitVideoDuration","depth":3,"charIndex":4302},{"id":"fadeconfig","text":"FadeConfig","depth":2,"charIndex":4483},{"id":"exportoptions","text":"ExportOptions","depth":2,"charIndex":4698},{"id":"common-options","text":"Common options","depth":3,"charIndex":4983},{"id":"composeandexport","text":"composeAndExport","depth":2,"charIndex":5379},{"id":"parameters","text":"Parameters","depth":3,"charIndex":5657},{"id":"return-value","text":"Return Value","depth":3,"charIndex":5992},{"id":"usage-guidelines-and-best-practices","text":"Usage Guidelines and Best Practices","depth":2,"charIndex":6191},{"id":"typical-use-cases","text":"Typical Use Cases","depth":2,"charIndex":6567}],"frontmatter":{},"version":"","description":"MediaComposer is used in Scripting to compose video, image, and audio timelines and export a final media file.\nIt provides a stable and precise timeline model that supports video clips, image clips, audio overlays, fades, audio ducking, and flexible export configuration. This module is suitable for: Mixing videos and images into a single outputAdding background music, voice-over, or sound effectsGenerating videos from image sequencesAutomated and script-driven media production"},{"title":"SharedAudioSession","content":"The `SharedAudioSession` interface provides a convenient way to manage and interact with the shared audio session in your script. The audio session acts as an intermediary between your script, the Scripting app, the operating system, and the underlying audio hardware, enabling you to configure and control audio behavior effectively.\n\n## Features\n\n- Retrieve and set audio session categories, modes, and options.\n- Configure the preferred sample rate for audio input and output.\n- Handle audio interruptions.\n- Query device capabilities for supported categories and modes.\n- Tailor audio behaviors for specific app use cases, such as video recording, voice chat, or background playback.\n\n***\n\n## Methods and Properties\n\n### 1. **Session Category and Options**\n\n#### `category`\n\nGet the current audio session category.\n\n```typescript\nconst category = await SharedAudioSession.category\nconsole.log(category) // Example: 'playback'\n```\n\n#### `categoryOptions`\n\nRetrieve the current audio session category options.\n\n```typescript\nconst options = await SharedAudioSession.categoryOptions\nconsole.log(options) // Example: ['mixWithOthers', 'allowAirPlay']\n```\n\n#### `setCategory(category: AudioSessionCategory, options: AudioSessionCategoryOptions[])`\n\nSet the audio session category with specific options.\n\n```typescript\nawait SharedAudioSession.setCategory('playback', ['mixWithOthers'])\n```\n\n***\n\n### 2. **Session Mode**\n\n#### `mode`\n\nRetrieve the current audio session mode.\n\n```typescript\nconst mode = await SharedAudioSession.mode\nconsole.log(mode) // Example: 'videoChat'\n```\n\n#### `setMode(mode: AudioSessionMode)`\n\nSet the audio session mode.\n\n```typescript\nawait SharedAudioSession.setMode('voiceChat')\n```\n\n***\n\n### 3. **Sample Rate**\n\n#### `preferredSampleRate`\n\nRetrieve the preferred sample rate in hertz.\n\n```typescript\nconst sampleRate = await SharedAudioSession.preferredSampleRate\nconsole.log(sampleRate) // Example: 44100\n```\n\n#### `setPreferredSampleRate(sampleRate: number)`\n\nSet the preferred sample rate for audio input and output.\n\n```typescript\nawait SharedAudioSession.setPreferredSampleRate(48000)\n```\n\n***\n\n### 4. **Interruption Handling**\n\n#### `addInterruptionListener(listener: AudioSessionInterruptionListener)`\n\nListen for audio interruptions.\n\n```typescript\nSharedAudioSession.addInterruptionListener((type) => {\n  if (type === 'began') {\n    console.log('Audio interruption began')\n  } else if (type === 'ended') {\n    console.log('Audio interruption ended')\n  }\n})\n```\n\n#### `removeInterruptionListener(listener: AudioSessionInterruptionListener)`\n\nRemove an interruption listener.\n\n```typescript\nSharedAudioSession.removeInterruptionListener(myListener)\n```\n\n***\n\n### 5. **Device Capabilities**\n\n#### `availableCategories`\n\nGet the list of audio session categories available on the device.\n\n```typescript\nconst categories = await SharedAudioSession.availableCategories\nconsole.log(categories) // Example: ['playback', 'record', 'soloAmbient']\n```\n\n#### `availableModes`\n\nGet the list of audio session modes available on the device.\n\n```typescript\nconst modes = await SharedAudioSession.availableModes\nconsole.log(modes) // Example: ['default', 'videoChat', 'voiceChat']\n```\n\n***\n\n### 6. **Additional Properties**\n\n#### `isOtherAudioPlaying`\n\nCheck if other audio is currently playing on the device.\n\n```typescript\nconst isPlaying = await SharedAudioSession.isOtherAudioPlaying\nconsole.log(isPlaying) // Example: true\n```\n\n#### `secondaryAudioShouldBeSilencedHint`\n\nCheck if secondary audio should be silenced.\n\n```typescript\nconst shouldSilence = await SharedAudioSession.secondaryAudioShouldBeSilencedHint\nconsole.log(shouldSilence) // Example: false\n```\n\n#### `allowHapticsAndSystemSoundsDuringRecording`\n\nCheck if haptics and system sounds are allowed during recording.\n\n```typescript\nconst allowHaptics = await SharedAudioSession.allowHapticsAndSystemSoundsDuringRecording\nconsole.log(allowHaptics) // Example: true\n```\n\n#### `prefersNoInterruptionsFromSystemAlerts`\n\nCheck if the session prefers no interruptions from system alerts.\n\n```typescript\nconst prefersNoInterruptions = await SharedAudioSession.prefersNoInterruptionsFromSystemAlerts\nconsole.log(prefersNoInterruptions) // Example: false\n```\n\n***\n\n### 7. **Session Activation**\n\n#### `setActive(active: boolean, options?: AudioSessionSetActiveOptions[])`\n\nActivate or deactivate the shared audio session with optional options.\n\n- `active`: Set to `true` to activate the session, `false` to deactivate it.\n- `options`: An array of optional activation options, such as 'interruptSpokenAudioAndMixWithOthers'.\n\n```typescript\nawait SharedAudioSession.setActive(\n  true,\n  ['notifyOthersOnDeactivation']\n)\n```\n\n***\n\n### 8. **System Settings**\n\n#### `setAllowHapticsAndSystemSoundsDuringRecording(value: boolean)`\n\nEnable or disable haptics and system sounds during recording.\n\n```typescript\nawait SharedAudioSession.setAllowHapticsAndSystemSoundsDuringRecording(true)\n```\n\n#### `setPrefersNoInterruptionsFromSystemAlerts(value: boolean)`\n\nSet the preference for no interruptions from system alerts.\n\n```typescript\nawait SharedAudioSession.setPrefersNoInterruptionsFromSystemAlerts(true)\n```\n\n***\n\n### 9. **Systemwide Output Volume**\n\n#### `outputVolume: number`\n\nThe systemwide output volume. This property is a number between 0 and 1, representing the volume level as a percentage.\n\n#### outputVolume EventListener\n\nType Definition:\n\n```ts\ntype AudioSessionOutputVolumeListener = (newValue: number, oldValue: number) => void\n```\n\n##### `addOutputVolumeListener(listener: AudioSessionOutputVolumeListener)`\n\nAdd an event listener for changes in the systemwide output volume.\n\n```typescript\nSharedAudioSession.addOutputVolumeListener((newValue, oldValue) => {\n  console.log(`Output volume changed from ${oldValue} to ${newValue}`)\n})\n```\n\n##### `removeOutputVolumeListener(listener: AudioSessionOutputVolumeListener)`\n\nRemove an event listener for changes in the systemwide output volume.\n\n***\n\n## Enumerations\n\n### **AudioSessionSetActiveOptions**\n\nOptional activation options:\n\n- `'notifyOthersOnDeactivation'`: Notify other audio sessions when deactivating the shared audio session.\n\n### **AudioSessionCategory**\n\nDefines the session's audio category:\n\n- `'ambient'`: Ambient audio, such as background music or ambient sounds.\n- `'multiRoute'`: Multi-route audio, such as routing distinct streams of audio data to different output devices at the same time.\n- `'playAndRecord'`: Play and record audio, such as voice chat or video conferencing.\n- `'playback'`: Playback audio, such as music or sound effects.\n- `'record'`: Recording audio, such as voice chat or video conferencing.\n- `'soloAmbient'`: Solo ambient audio, such as background music or ambient sounds.\n\n### **AudioSessionCategoryOptions**\n\nOptional behaviors for audio categories:\n\n- `'mixWithOthers'`: Mix with other audio sessions.\n- `'duckOthers'`: Duck other audio sessions.\n- `'interruptSpokenAudioAndMixWithOthers'`: Interrupt spoken audio and mix with others.\n- `'allowBluetooth'`: Allow Bluetooth audio.\n- `'allowBluetoothA2DP'`: Allow Bluetooth A2DP audio.\n- `'allowAirPlay'`: Allow AirPlay audio.\n- `'defaultToSpeaker'`: Default to speaker, even if headphones are connected.\n- `'overrideMutedMicrophoneInterruption'`: Override muted microphone interruption.\n\n### **AudioSessionMode**\n\nSpecifies the session's mode:\n\n- `'default'`: Default mode.\n- `'gameChat'`: Game chat mode.\n- `'measurement'`: Measurement mode, such as audio input or output.\n- `'moviePlayback'`: Movie playback mode, such as movie content.\n- `'spokenAudio'`: Spoken audio mode, such as voice chat.\n- `'videoChat'`: Video chat mode, such as video conferencing.\n- `'videoRecording'`: Video recording mode, such as video conferencing.\n- `'voicePrompt'`: Voice prompt mode, such as text-to-speech.\n\n### **AudioSessionInterruptionType**\n\nSpecifies the type of interruption:\n\n- `'began'`\n- `'ended'`\n- `'unknown'`\n\n***\n\nThis interface offers extensive control over audio session management in Scripting, making it suitable for building audio-heavy script like music players and video conferencing tools.\n","routePath":"/doc/Changelog/2.4.6/SharedAudioSession","lang":"en","toc":[{"id":"features","text":"Features","depth":2,"charIndex":336},{"id":"methods-and-properties","text":"Methods and Properties","depth":2,"charIndex":694},{"id":"1-session-category-and-options","text":"1. **Session Category and Options**","depth":3,"charIndex":721},{"id":"category","text":"`category`","depth":4,"charIndex":762},{"id":"categoryoptions","text":"`categoryOptions`","depth":4,"charIndex":935},{"id":"setcategorycategory-audiosessioncategory-options-audiosessioncategoryoptions","text":"`setCategory(category: AudioSessionCategory, options: AudioSessionCategoryOptions[])`","depth":4,"charIndex":1156},{"id":"2-session-mode","text":"2. **Session Mode**","depth":3,"charIndex":1395},{"id":"mode","text":"`mode`","depth":4,"charIndex":1420},{"id":"setmodemode-audiosessionmode","text":"`setMode(mode: AudioSessionMode)`","depth":4,"charIndex":1579},{"id":"3-sample-rate","text":"3. **Sample Rate**","depth":3,"charIndex":1718},{"id":"preferredsamplerate","text":"`preferredSampleRate`","depth":4,"charIndex":1742},{"id":"setpreferredsampleratesamplerate-number","text":"`setPreferredSampleRate(sampleRate: number)`","depth":4,"charIndex":1941},{"id":"4-interruption-handling","text":"4. **Interruption Handling**","depth":3,"charIndex":2130},{"id":"addinterruptionlistenerlistener-audiosessioninterruptionlistener","text":"`addInterruptionListener(listener: AudioSessionInterruptionListener)`","depth":4,"charIndex":2164},{"id":"removeinterruptionlistenerlistener-audiosessioninterruptionlistener","text":"`removeInterruptionListener(listener: AudioSessionInterruptionListener)`","depth":4,"charIndex":2501},{"id":"5-device-capabilities","text":"5. **Device Capabilities**","depth":3,"charIndex":2696},{"id":"availablecategories","text":"`availableCategories`","depth":4,"charIndex":2728},{"id":"availablemodes","text":"`availableModes`","depth":4,"charIndex":2980},{"id":"6-additional-properties","text":"6. **Additional Properties**","depth":3,"charIndex":3212},{"id":"isotheraudioplaying","text":"`isOtherAudioPlaying`","depth":4,"charIndex":3246},{"id":"secondaryaudioshouldbesilencedhint","text":"`secondaryAudioShouldBeSilencedHint`","depth":4,"charIndex":3454},{"id":"allowhapticsandsystemsoundsduringrecording","text":"`allowHapticsAndSystemSoundsDuringRecording`","depth":4,"charIndex":3689},{"id":"prefersnointerruptionsfromsystemalerts","text":"`prefersNoInterruptionsFromSystemAlerts`","depth":4,"charIndex":3957},{"id":"7-session-activation","text":"7. **Session Activation**","depth":3,"charIndex":4244},{"id":"setactiveactive-boolean-options-audiosessionsetactiveoptions","text":"`setActive(active: boolean, options?: AudioSessionSetActiveOptions[])`","depth":4,"charIndex":4275},{"id":"8-system-settings","text":"8. **System Settings**","depth":3,"charIndex":4707},{"id":"setallowhapticsandsystemsoundsduringrecordingvalue-boolean","text":"`setAllowHapticsAndSystemSoundsDuringRecording(value: boolean)`","depth":4,"charIndex":4735},{"id":"setprefersnointerruptionsfromsystemalertsvalue-boolean","text":"`setPrefersNoInterruptionsFromSystemAlerts(value: boolean)`","depth":4,"charIndex":4964},{"id":"9-systemwide-output-volume","text":"9. **Systemwide Output Volume**","depth":3,"charIndex":5188},{"id":"outputvolume-number","text":"`outputVolume: number`","depth":4,"charIndex":5225},{"id":"outputvolume-eventlistener","text":"outputVolume EventListener","depth":4,"charIndex":5375},{"id":"enumerations","text":"Enumerations","depth":2,"charIndex":5985},{"id":"audiosessionsetactiveoptions","text":"**AudioSessionSetActiveOptions**","depth":3,"charIndex":6002},{"id":"audiosessioncategory","text":"**AudioSessionCategory**","depth":3,"charIndex":6177},{"id":"audiosessioncategoryoptions","text":"**AudioSessionCategoryOptions**","depth":3,"charIndex":6757},{"id":"audiosessionmode","text":"**AudioSessionMode**","depth":3,"charIndex":7323},{"id":"audiosessioninterruptiontype","text":"**AudioSessionInterruptionType**","depth":3,"charIndex":7829}],"frontmatter":{},"version":"","description":"The SharedAudioSession interface provides a convenient way to manage and interact with the shared audio session in your script. The audio session acts as an intermediary between your script, the Scripting app, the operating system, and the underlying audio hardware, enabling you to configure and control audio behavior effectively."},{"title":"VideoRecorder","content":"`VideoRecorder` provides a programmable video recording session in Scripting.\nIt encapsulates camera selection, audio/video capture, encoding, pause/resume handling, zoom, focus, torch control, and final file writing.\n\nThis API is intended for custom camera interfaces, video capture utilities, and automated recording workflows.\n\n***\n\n## Capabilities Overview\n\n- Front and back camera support\n- Explicit camera type selection (wide, ultra-wide, telephoto, etc.)\n- Multiple frame rates (24 / 30 / 60 / 120)\n- Optional audio recording\n- Multiple system capture session presets\n- Multiple video codecs (HEVC / H.264 / ProRes, etc.)\n- Pause and resume during recording\n- Independent focus and exposure control\n- Zoom and smooth zoom (ramp) control\n- Torch (flashlight) control\n- Deterministic state machine with callbacks\n- Explicit lifecycle management (`prepare / reset / dispose`)\n\n***\n\n## Type Definitions\n\n### CameraPosition\n\n```ts\ntype CameraPosition = \"front\" | \"back\"\n```\n\nRepresents the physical camera position.\n\n***\n\n### CameraType\n\n```ts\ntype CameraType =\n  | \"wide\"\n  | \"ultraWide\"\n  | \"telephoto\"\n  | \"trueDepth\"\n  | \"dual\"\n  | \"dualWide\"\n  | \"triple\"\n```\n\nRepresents the physical camera device type.\nAvailability depends on the device hardware.\n\n***\n\n### VideoRecorderState\n\n```ts\ntype VideoRecorderState =\n  | \"idle\"\n  | \"preparing\"\n  | \"ready\"\n  | \"recording\"\n  | \"paused\"\n  | \"finishing\"\n  | \"finished\"\n  | \"failed\"\n```\n\n#### State Semantics\n\n| State       | Meaning                                               |\n| ----------- | ----------------------------------------------------- |\n| `idle`      | Initial state, no resources configured                |\n| `preparing` | Camera session and pipelines are being configured     |\n| `ready`     | Recorder is ready to start recording                  |\n| `recording` | Recording is in progress                              |\n| `paused`    | Recording is paused                                   |\n| `finishing` | Recording is stopping and file writing is in progress |\n| `finished`  | Recording completed successfully                      |\n| `failed`    | An error occurred                                     |\n\n***\n\n### VideoCaptureSessionPreset\n\n```ts\ntype VideoCaptureSessionPreset =\n  | \"high\"\n  | \"medium\"\n  | \"low\"\n  | \"cif352x288\"\n  | \"vga640x480\"\n  | \"iFrame960x540\"\n  | \"iFrame1280x720\"\n  | \"hd1280x720\"\n  | \"hd1920x1080\"\n  | \"hd4K3840x2160\"\n```\n\nDefines the capture session resolution preset.\n\n***\n\n### VideoCodec\n\n```ts\ntype VideoCodec =\n  | \"hevc\"\n  | \"h264\"\n  | \"jpeg\"\n  | \"JPEGXL\"\n  | \"proRes4444\"\n  | \"appleProRes4444XQ\"\n  | \"proRes422\"\n  | \"proRes422HQ\"\n  | \"proRes422LT\"\n  | \"proRes422Proxy\"\n  | \"proResRAW\"\n  | \"proResRAWHQ\"\n  | \"hevcWithAlpha\"\n```\n\nSpecifies the video encoding format.\nActual availability depends on system and hardware support.\n\n***\n\n### VideoOrientation\n\n```ts\ntype VideoOrientation =\n  | \"portrait\"\n  | \"landscapeLeft\"\n  | \"landscapeRight\"\n```\n\nSpecifies the output video orientation.\n\n***\n\n## Constructor\n\n```ts\nnew VideoRecorder(settings?)\n```\n\n### settings\n\n```ts\n{\n  camera?: {\n    position: CameraPosition\n    preferredTypes?: CameraType[]\n  }\n  frameRate?: number\n  audioEnabled?: boolean\n  sessionPreset?: VideoCaptureSessionPreset\n  videoCodec?: VideoCodec\n  videoBitRate?: number\n  orientation?: VideoOrientation\n  mirrorFrontCamera?: boolean\n}\n```\n\n#### Parameter Details\n\n- **camera**\n\n  - `position`\n    Camera position. Defaults to `\"back\"`.\n  - `preferredTypes`\n    Preferred camera device types.\n    If omitted, a suitable device is selected automatically based on position.\n\n- **frameRate**\n  Target frame rate. Supported values: 24, 30, 60, 120.\n  Defaults to 30. Actual frame rate depends on device capability.\n\n- **audioEnabled**\n  Indicates whether audio is recorded. Defaults to `true`.\n\n- **sessionPreset**\n  Capture session resolution preset. Defaults to `\"high\"`.\n\n- **videoCodec**\n  Video encoding format. Defaults to `\"hevc\"`.\n\n- **videoBitRate**\n  Average video bit rate in bits per second.\n  If omitted, the system selects an appropriate value.\n\n- **orientation**\n  Output video orientation. Defaults to `\"portrait\"`.\n\n- **mirrorFrontCamera**\n  Indicates whether the front camera output is mirrored.\n  Defaults to `true`. Only applies to the front camera.\n\n***\n\n## Read-Only Properties\n\n### minZoomFactor\n\n```ts\nreadonly minZoomFactor: number\n```\n\nMinimum supported zoom factor for the active device.\n\n***\n\n### maxZoomFactor\n\n```ts\nreadonly maxZoomFactor: number\n```\n\nMaximum supported zoom factor for the active device.\n\n***\n\n### currentZoomFactor\n\n```ts\nreadonly currentZoomFactor: number\n```\n\nCurrent zoom factor.\n\n***\n\n### displayZoomFactor\n\n```ts\nreadonly displayZoomFactor: number\n```\n\nZoom factor displayed to the user.\n\n***\n\n### hasTorch\n\n```ts\nreadonly hasTorch: boolean\n```\n\nIndicates whether the active camera supports a torch.\n\n***\n\n### torchMode\n\n```ts\nreadonly torchMode: \"auto\" | \"on\" | \"off\"\n```\n\nCurrent torch mode.\n\n***\n\n## State and Callbacks\n\n### state\n\n```ts\nstate: VideoRecorderState\n```\n\nRepresents the current state of the recorder.\n\n***\n\n### onStateChanged\n\n```ts\nonStateChanged?: (\n  state: VideoRecorderState,\n  details?: string\n) => void\n```\n\nInvoked whenever the recorder state changes.\n\n- When `state === \"failed\"`\n  `details` contains an error description.\n\n- When `state === \"finished\"`\n  `details` contains the full output file path.\n\n***\n\n## Methods\n\n### prepare()\n\n```ts\nprepare(): Promise<void>\n```\n\nPrepares the recorder by configuring the camera session and audio/video pipelines.\n\n#### Usage Constraints\n\n- Must be called before `startRecording`\n- Transitions state to `ready` on success\n- Transitions to `failed` on error\n\n***\n\n### startRecording(toPath)\n\n```ts\nstartRecording(toPath: string): void\n```\n\nStarts video recording.\n\n#### Parameters\n\n- **toPath**\n  Full file path where the video will be saved.\n\n#### Usage Constraints\n\n- Only valid in the `ready` state\n- Transitions state to `recording`\n\n***\n\n### pauseRecording()\n\n```ts\npauseRecording(): void\n```\n\nPauses the ongoing recording.\n\n#### Usage Constraints\n\n- Only valid in the `recording` state\n- Transitions state to `paused`\n- Timeline is compacted without introducing blank segments\n\n***\n\n### resumeRecording()\n\n```ts\nresumeRecording(): void\n```\n\nResumes a paused recording.\n\n#### Usage Constraints\n\n- Only valid in the `paused` state\n- Transitions state back to `recording`\n\n***\n\n### stopRecording()\n\n```ts\nstopRecording(): Promise<void>\n```\n\nStops recording and finalizes the output file.\n\n#### Behavior\n\n- Transitions state to `finishing`\n- Transitions to `finished` after file writing completes\n- Final file path is delivered via `onStateChanged`\n\n***\n\n### reset()\n\n```ts\nreset(): Promise<void>\n```\n\nResets the recorder state to allow a new recording session.\n\n#### Intended Use\n\n- After a completed recording\n- After a failed recording\n\n#### Behavior\n\n- Transitions state back to `idle`\n- `prepare` may be called again\n\n***\n\n### setTorchMode()\n\n```ts\nsetTorchMode(mode: \"auto\" | \"off\" | \"on\"): void\n```\n\nSets the torch mode for the active camera.\n\n***\n\n### setFocusPoint()\n\n```ts\nsetFocusPoint(point: { x: number; y: number }): void\n```\n\nSets the focus point.\n\n- Coordinates are normalized in the range `0.0 ~ 1.0`\n- `(0,0)` represents the top-left corner\n- `(1,1)` represents the bottom-right corner\n\n***\n\n### setExposurePoint()\n\n```ts\nsetExposurePoint(point: { x: number; y: number }): void\n```\n\nSets the exposure point using the same coordinate system as focus.\n\n***\n\n### resetFocus()\n\n```ts\nresetFocus(): void\n```\n\nRestores automatic focus mode.\n\n***\n\n### resetExposure()\n\n```ts\nresetExposure(): void\n```\n\nRestores automatic exposure mode.\n\n***\n\n### setZoomFactor()\n\n```ts\nsetZoomFactor(factor: number): void\n```\n\nImmediately sets the zoom factor.\n\n- Value must be within `minZoomFactor` and `maxZoomFactor`\n\n***\n\n### rampZoomFactor()\n\n```ts\nrampZoomFactor(toFactor: number, rate: number): void\n```\n\nSmoothly transitions the zoom factor.\n\n- `toFactor` specifies the target zoom factor\n- `rate` specifies the transition speed in powers of two per second\n\n***\n\n### resetZoom()\n\n```ts\nresetZoom(): void\n```\n\nResets the zoom factor to the default value (typically `1.0`).\n\n***\n\n### dispose()\n\n```ts\ndispose(): Promise<void>\n```\n\nReleases all resources and destroys the recorder.\n\n#### Usage Constraints\n\n- The instance cannot be used after disposal\n- Releases camera, audio, and system resources\n- Should be called when the recording lifecycle ends\n\n***\n\n## Typical Usage Flow\n\n```ts\nconst recorder = new VideoRecorder({\n  camera: { position: \"back\" },\n  frameRate: 60,\n  videoCodec: \"hevc\"\n})\n\nrecorder.onStateChanged = (state, details) => {\n  if (state === \"finished\") {\n    console.log(\"Video saved at:\", details)\n  }\n}\n\nawait recorder.prepare()\nrecorder.startRecording(\"/path/to/tmp/demo.mov\")\n```\n\n***\n\n## Usage Guidelines\n\n- Always observe `onStateChanged` to track state transitions\n- Do not start recording before calling `prepare`\n- Call `reset` before reusing the same instance for another recording\n- Call `dispose` when the recorder is no longer needed\n","routePath":"/doc/Changelog/2.4.6/VideoRecorder","lang":"en","toc":[{"id":"capabilities-overview","text":"Capabilities Overview","depth":2,"charIndex":336},{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":887},{"id":"cameraposition","text":"CameraPosition","depth":3,"charIndex":908},{"id":"cameratype","text":"CameraType","depth":3,"charIndex":1025},{"id":"videorecorderstate","text":"VideoRecorderState","depth":3,"charIndex":1263},{"id":"state-semantics","text":"State Semantics","depth":4,"charIndex":1436},{"id":"videocapturesessionpreset","text":"VideoCaptureSessionPreset","depth":3,"charIndex":2184},{"id":"videocodec","text":"VideoCodec","depth":3,"charIndex":2476},{"id":"videoorientation","text":"VideoOrientation","depth":3,"charIndex":2838},{"id":"constructor","text":"Constructor","depth":2,"charIndex":2997},{"id":"settings","text":"settings","depth":3,"charIndex":3053},{"id":"parameter-details","text":"Parameter Details","depth":4,"charIndex":3365},{"id":"read-only-properties","text":"Read-Only Properties","depth":2,"charIndex":4296},{"id":"minzoomfactor","text":"minZoomFactor","depth":3,"charIndex":4321},{"id":"maxzoomfactor","text":"maxZoomFactor","depth":3,"charIndex":4441},{"id":"currentzoomfactor","text":"currentZoomFactor","depth":3,"charIndex":4561},{"id":"displayzoomfactor","text":"displayZoomFactor","depth":3,"charIndex":4657},{"id":"hastorch","text":"hasTorch","depth":3,"charIndex":4767},{"id":"torchmode","text":"torchMode","depth":3,"charIndex":4879},{"id":"state-and-callbacks","text":"State and Callbacks","depth":2,"charIndex":4973},{"id":"state","text":"state","depth":3,"charIndex":4997},{"id":"onstatechanged","text":"onStateChanged","depth":3,"charIndex":5097},{"id":"methods","text":"Methods","depth":2,"charIndex":5407},{"id":"prepare","text":"prepare()","depth":3,"charIndex":5419},{"id":"usage-constraints","text":"Usage Constraints","depth":4,"charIndex":5554},{"id":"startrecordingtopath","text":"startRecording(toPath)","depth":3,"charIndex":5702},{"id":"parameters","text":"Parameters","depth":4,"charIndex":5803},{"id":"usage-constraints-1","text":"Usage Constraints","depth":4,"charIndex":5882},{"id":"pauserecording","text":"pauseRecording()","depth":3,"charIndex":5981},{"id":"usage-constraints-2","text":"Usage Constraints","depth":4,"charIndex":6068},{"id":"resumerecording","text":"resumeRecording()","depth":3,"charIndex":6227},{"id":"usage-constraints-3","text":"Usage Constraints","depth":4,"charIndex":6314},{"id":"stoprecording","text":"stopRecording()","depth":3,"charIndex":6419},{"id":"behavior","text":"Behavior","depth":4,"charIndex":6530},{"id":"reset","text":"reset()","depth":3,"charIndex":6695},{"id":"intended-use","text":"Intended Use","depth":4,"charIndex":6803},{"id":"behavior-1","text":"Behavior","depth":4,"charIndex":6880},{"id":"settorchmode","text":"setTorchMode()","depth":3,"charIndex":6968},{"id":"setfocuspoint","text":"setFocusPoint()","depth":3,"charIndex":7096},{"id":"setexposurepoint","text":"setExposurePoint()","depth":3,"charIndex":7350},{"id":"resetfocus","text":"resetFocus()","depth":3,"charIndex":7514},{"id":"resetexposure","text":"resetExposure()","depth":3,"charIndex":7599},{"id":"setzoomfactor","text":"setZoomFactor()","depth":3,"charIndex":7693},{"id":"rampzoomfactor","text":"rampZoomFactor()","depth":3,"charIndex":7861},{"id":"resetzoom","text":"resetZoom()","depth":3,"charIndex":8106},{"id":"dispose","text":"dispose()","depth":3,"charIndex":8221},{"id":"usage-constraints-4","text":"Usage Constraints","depth":4,"charIndex":8323},{"id":"typical-usage-flow","text":"Typical Usage Flow","depth":2,"charIndex":8498},{"id":"usage-guidelines","text":"Usage Guidelines","depth":2,"charIndex":8851}],"frontmatter":{},"version":"","description":"VideoRecorder provides a programmable video recording session in Scripting.\nIt encapsulates camera selection, audio/video capture, encoding, pause/resume handling, zoom, focus, torch control, and final file writing. This API is intended for custom camera interfaces, video capture utilities, and automated recording workflows."},{"title":"onDrag and onDrop View Modifiers","content":"Scripting provides a Drag & Drop API closely aligned with the SwiftUI drag-and-drop interaction model. It enables views to act as drag sources, drop destinations, or both, supporting intra-app and cross-app drag-and-drop scenarios.\n\nThe API is composed of three core parts:\n\n- **onDrag**: Declares a view as a drag source\n- **onDrop**: Declares a view as a drop destination\n- **DropInfo / ItemProvider / UTType**: Context objects describing drag content and state\n\nDrag and drop is a system-controlled interaction. Certain APIs are only valid during specific callbacks. These constraints are explicitly documented below and must be respected.\n\n***\n\n## Core Types\n\n### DropInfo\n\n`DropInfo` represents the real-time state of a drag operation relative to a specific drop target view.\nIt is only valid within `onDrop` callbacks.\n\n### Properties\n\n#### location: Point\n\n- The current drag location\n- Expressed in the **local coordinate space of the drop view**\n- Commonly used for:\n\n  - Insertion indicators\n  - Reordering logic\n  - Position-based highlighting\n\n### Methods\n\n#### hasItemsConforming(types: UTType\\[]): boolean\n\n- Indicates whether at least one dragged item conforms to any of the specified UTTypes\n- Commonly used in:\n\n  - `validateDrop`\n  - `dropEntered`\n  - `dropUpdated`\n- This method performs capability checks only and does not load data\n\n#### itemProviders(types: UTType\\[]): ItemProvider\\[]\n\n- Returns all `ItemProvider` instances conforming to the specified UTTypes\n- **Only valid inside the `performDrop` callback**\n- After `performDrop` returns, access to the dragged data is revoked by the system\n\n> Critical constraint\n> You must **start loading the contents** of the returned `ItemProvider` instances **within the scope of `performDrop`**.\n> Loading may complete later, but it must be initiated synchronously before `performDrop` returns.\n\n***\n\n## DropOperation\n\n`DropOperation` describes the action a drop target intends to perform.\n\nAvailable values:\n\n- `\"copy\"`\n  Copies the dragged data (default and most common)\n\n- `\"move\"`\n  Moves the data instead of copying it (typically internal to the app)\n\n- `\"cancel\"`\n  Cancels the drag operation and transfers no data\n\n- `\"forbidden\"`\n  Explicitly disallows the drop at the current location\n\n`DropOperation` is usually returned from `dropUpdated` to dynamically control the drag behavior.\n\n***\n\n## DragDropProps\n\n`DragDropProps` defines the optional drag-and-drop capabilities that a view may adopt.\n\n***\n\n## onDrag\n\n### Purpose\n\nMarks the view as a **drag source**, allowing the user to initiate a drag operation from it.\n\n### Definition\n\n```ts\nonDrag?: {\n  data: () => ItemProvider\n  preview: VirtualNode\n}\n```\n\n### Parameters\n\n#### data\n\n```ts\ndata: () => ItemProvider\n```\n\n- Returns an `ItemProvider` describing the dragged data\n- Supports text, images, files, URLs, and custom types\n- Invoked each time a drag begins\n\nRecommended practice:\nCreate a new `ItemProvider` instance for each drag operation. Do not reuse instances.\n\n#### preview\n\n```ts\npreview: VirtualNode\n```\n\n- A view used as the drag preview\n- Rendered by the system as a floating representation during dragging\n- Centered over the source view by default\n\n***\n\n## onDrop\n\n### Purpose\n\nMarks the view as a **drop destination** and provides fine-grained control over validation, interaction updates, and data handling.\n\n### Definition\n\n```ts\nonDrop?: {\n  types: UTType[]\n  validateDrop?: (info: DropInfo) => boolean\n  dropEntered?: (info: DropInfo) => void\n  dropUpdated?: (info: DropInfo) => DropOperation | null\n  dropExited?: (info: DropInfo) => void\n  performDrop: (info: DropInfo) => boolean\n}\n```\n\n***\n\n### onDrop.types\n\n```ts\ntypes: UTType[]\n```\n\n- Declares the content types this view can accept\n- If the dragged content does not conform to any listed type:\n\n  - The drop target does not activate\n  - `validateDrop` is not called\n  - Visual feedback is not shown\n\n***\n\n### validateDrop\n\n```ts\nvalidateDrop?: (info: DropInfo) => boolean\n```\n\n- Determines whether the drop operation should be allowed to begin\n- Returning `false` immediately rejects the drag\n- Common use cases:\n\n  - Checking item count\n  - Enforcing application state constraints\n\nDefault behavior: always returns `true`\n\n***\n\n### dropEntered\n\n```ts\ndropEntered?: (info: DropInfo) => void\n```\n\n- Called when the drag enters the drop target area\n- Typically used to:\n\n  - Show highlight states\n  - Display insertion placeholders\n  - Trigger animations\n\n***\n\n### dropUpdated\n\n```ts\ndropUpdated?: (info: DropInfo) => DropOperation | null\n```\n\n- Called repeatedly as the drag moves within the drop target\n- Used to dynamically specify the intended `DropOperation`\n\nReturn value behavior:\n\n- Returning a `DropOperation` updates the active operation\n- Returning `null`:\n\n  - Reuses the last valid operation\n  - Falls back to `\"copy\"` if none was previously returned\n\n***\n\n### dropExited\n\n```ts\ndropExited?: (info: DropInfo) => void\n```\n\n- Called when the drag leaves the drop target area\n- Commonly used to clear highlight or placeholder UI\n\n***\n\n### performDrop\n\n```ts\nperformDrop: (info: DropInfo) => boolean\n```\n\n- **The most critical callback**\n- Indicates that the user has released the drag and data access is permitted\n- Return value:\n\n  - `true` if the drop was successfully handled\n  - `false` if the drop failed\n\n#### Mandatory constraints\n\n- Within this method, you must:\n\n  - Call `info.itemProviders(...)`\n  - Immediately initiate data loading from the returned providers\n- You must not:\n\n  - Store `ItemProvider` references for later use\n  - Defer loading to unrelated callbacks\n\nThese constraints are enforced by the operating system for security reasons.\n\n***\n\n## Typical Interaction Flow\n\n1. The user initiates a drag from an `onDrag` view\n2. The system checks compatibility using `onDrop.types`\n3. `validateDrop` is invoked\n4. The drag enters the drop target → `dropEntered`\n5. The drag moves within the target → repeated `dropUpdated`\n6. The drag leaves the target → `dropExited`\n7. The user releases the drag → `performDrop`\n8. Data is loaded and processed\n\n***\n\n## Design Guidelines and Best Practices\n\n- Declare UTTypes as narrowly as possible\n- Use `\"forbidden\"` in `dropUpdated` to explicitly block invalid drops\n- Perform heavy parsing or processing only after `ItemProvider` loading completes\n- Prefer system-standard UTTypes (text, image, file, URL) for cross-app drag-and-drop\n","routePath":"/doc/Changelog/2.4.6/onDrag and onDrop View Modifiers","lang":"en","toc":[{"id":"core-types","text":"Core Types","depth":2,"charIndex":649},{"id":"dropinfo","text":"DropInfo","depth":3,"charIndex":664},{"id":"properties","text":"Properties","depth":3,"charIndex":826},{"id":"location-point","text":"location: Point","depth":4,"charIndex":842},{"id":"methods","text":"Methods","depth":3,"charIndex":1056},{"id":"hasitemsconformingtypes-uttype-boolean","text":"hasItemsConforming(types: UTType[]): boolean","depth":4,"charIndex":-1},{"id":"itemproviderstypes-uttype-itemprovider","text":"itemProviders(types: UTType[]): ItemProvider[]","depth":4,"charIndex":-1},{"id":"dropoperation","text":"DropOperation","depth":2,"charIndex":1868},{"id":"dragdropprops","text":"DragDropProps","depth":2,"charIndex":2365},{"id":"ondrag","text":"onDrag","depth":2,"charIndex":2476},{"id":"purpose","text":"Purpose","depth":3,"charIndex":2487},{"id":"definition","text":"Definition","depth":3,"charIndex":2594},{"id":"parameters","text":"Parameters","depth":3,"charIndex":2684},{"id":"data","text":"data","depth":4,"charIndex":2700},{"id":"preview","text":"preview","depth":4,"charIndex":3002},{"id":"ondrop","text":"onDrop","depth":2,"charIndex":3201},{"id":"purpose-1","text":"Purpose","depth":3,"charIndex":3212},{"id":"definition-1","text":"Definition","depth":3,"charIndex":3358},{"id":"ondroptypes","text":"onDrop.types","depth":3,"charIndex":3647},{"id":"validatedrop","text":"validateDrop","depth":3,"charIndex":3915},{"id":"dropentered","text":"dropEntered","depth":3,"charIndex":4239},{"id":"dropupdated","text":"dropUpdated","depth":3,"charIndex":4469},{"id":"dropexited","text":"dropExited","depth":3,"charIndex":4878},{"id":"performdrop","text":"performDrop","depth":3,"charIndex":5053},{"id":"mandatory-constraints","text":"Mandatory constraints","depth":4,"charIndex":5329},{"id":"typical-interaction-flow","text":"Typical Interaction Flow","depth":2,"charIndex":5683},{"id":"design-guidelines-and-best-practices","text":"Design Guidelines and Best Practices","depth":2,"charIndex":6089}],"frontmatter":{},"version":"","description":"Scripting provides a Drag & Drop API closely aligned with the SwiftUI drag-and-drop interaction model. It enables views to act as drag sources, drop destinations, or both, supporting intra-app and cross-app drag-and-drop scenarios. The API is composed of three core parts: onDrag: Declares a view as a drag sourceonDrop: Declares a view as a drop destinationDropInfo / ItemProvider / UTType: Context objects describing drag content and state Drag and drop is a system-controlled interaction. Certain APIs are only valid during specific callbacks. These constraints are explicitly documented below and must be respected."},{"title":"onDropContent","content":"`onDropContent` is a view modifier provided by Scripting that allows a view to act as a **drop target**, receiving files, images, or text dragged in from other applications.\n\n***\n\n## Overview\n\nWith `onDropContent`, you can:\n\n- Receive drag-and-drop content from other apps\n- Restrict acceptable content using UTType identifiers\n- Track whether a drag operation is hovering over the view\n- Start loading dropped content through `ItemProvider`\n- Establish persistent access to security-scoped files when needed\n\n***\n\n## Modifier Definition\n\n```ts\nonDropContent?: {\n  types: UTType[]\n  isTarget: {\n    value: boolean\n    onChanged: (value: boolean) => void\n  } | Observable<boolean>\n  perform: (attachments: ItemProvider[]) => boolean\n}\n```\n\n***\n\n## Parameters\n\n### types\n\nSpecifies the list of content types that the view can accept, expressed as UTType strings.\n\nIf the drag operation does not contain any of the specified types:\n\n- The view does not activate as a drop target\n- `isTarget` does not update\n- `perform` is not called\n\nExample:\n\n```ts\ntypes: [\"public.image\", \"public.movie\"]\n```\n\n***\n\n### isTarget\n\nIndicates whether the drag operation is currently hovering over the view.\n\n- The value is `true` when the drag enters the view’s area\n- The value is `false` when the drag exits the area\n\nTwo forms are supported:\n\n- Binding object form\n\n  ```ts\n  {\n    value: boolean\n    onChanged: (value: boolean) => void\n  }\n  ```\n\n- Observable form\n\n  ```ts\n  Observable<boolean>\n  ```\n\nThe observable form works well with `useObservable` and provides a more concise reactive binding.\n\n***\n\n### perform\n\nCalled when content matching the specified `types` is dropped onto the view.\n\n```ts\nperform: (attachments: ItemProvider[]) => boolean\n```\n\n- `attachments` is an array of `ItemProvider`\n- Each `ItemProvider` represents one dropped item\n- The return value indicates whether the drop was successfully handled\n\nReturn value semantics:\n\n- Return `true` to indicate the drop was accepted\n- Return `false` to indicate the drop was not handled\n\n***\n\n## Execution Rules for perform\n\nThe following rules must be followed inside `perform`:\n\n- Loading of `ItemProvider` contents must be **started synchronously within the execution scope of `perform`**\n- Asynchronous completion is allowed using `Promise` or `then`\n- Loading must not be initiated later from a different callback or event\n- If `perform` returns `false`, the system treats the drop as unhandled\n\nReasoning:\n\n- Dropped content is protected by system security rules\n- Access to the dropped payload is only valid while `perform` is executing\n- If loading does not begin within this scope, the content may no longer be accessible\n\n***\n\n## Working with ItemProvider\n\nWithin `perform`, you should inspect each `ItemProvider` and start loading based on its capabilities.\n\nTypical steps include:\n\n- Checking type conformance using `hasItemConforming`\n- Selecting an appropriate loading method\n- Handling files, images, or text accordingly\n\n***\n\n## Example Usage\n\n```tsx\nconst isTarget = useObservable(false)\n\nreturn <VStack\n  onDropContent={{\n    types: [\"public.image\", \"public.movie\"],\n    isTarget: isTarget,\n    perform: (attachments) => {\n      const images: UIImage[] = []\n      const videos: string[] = []\n\n      let found = false\n\n      for (const attachment of attachments) {\n        if (attachment.hasItemConforming(\"public.png\")) {\n          found = true\n          attachment.loadUIImage().then(image => {\n            if (image != null) {\n              images.push(image)\n            }\n          })\n        } else if (attachment.hasItemConforming(\"public.movie\")) {\n          found = true\n          attachment.loadFilePath(\"public.movie\").then(filePath => {\n            if (filePath != null) {\n              // Create a bookmark for the security-scoped file\n              FileManager.addFileBookmark(filePath)\n              videos.push(filePath)\n            }\n          })\n        }\n      }\n\n      return found\n    }\n  }}\n>\n  ...\n</VStack>\n```\n\n***\n\n## Security-Scoped File Access\n\nFile paths obtained via `onDropContent` are typically **security-scoped resources**.\n\nThese paths may become invalid when:\n\n- `perform` returns\n- The app restarts\n- The script lifecycle ends\n\nTo retain long-term access, you should create a file bookmark as soon as the path is obtained.\n\n***\n\n## FileManager.addFileBookmark\n\n```ts\nFileManager.addFileBookmark(path: string, name?: string): string | null\n```\n\nDescription:\n\n- Creates a security-scoped bookmark for a file or folder\n- Intended for paths obtained via APIs such as `Photos` or `onDropContent`\n- Returns the bookmark name, or `null` if creation fails\n\nExample:\n\n```ts\nconst bookmarkName = FileManager.addFileBookmark(filePath)\n```\n\n***\n\n## FileManager.removeFileBookmark\n\n```ts\nFileManager.removeFileBookmark(name: string): boolean\n```\n\nDescription:\n\n- Removes a previously created file bookmark\n- Should be called when access to the file is no longer needed\n- Returns whether the removal was successful\n\nExample:\n\n```ts\nFileManager.removeFileBookmark(bookmarkName)\n```\n\n***\n\n## Usage Recommendations\n\n- Specify `types` as precisely as possible\n- Use `perform` only to start loading, not to wait for results\n- Load images and lightweight data as objects when appropriate\n- Prefer file paths for large resources such as videos or documents\n- Create bookmarks for files that require long-term access\n- Remove bookmarks when the associated files are no longer needed\n","routePath":"/doc/Changelog/2.4.6/onDropContent","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":180},{"id":"modifier-definition","text":"Modifier Definition","depth":2,"charIndex":515},{"id":"parameters","text":"Parameters","depth":2,"charIndex":744},{"id":"types","text":"types","depth":3,"charIndex":759},{"id":"istarget","text":"isTarget","depth":3,"charIndex":1098},{"id":"perform","text":"perform","depth":3,"charIndex":1590},{"id":"execution-rules-for-perform","text":"Execution Rules for perform","depth":2,"charIndex":2045},{"id":"working-with-itemprovider","text":"Working with ItemProvider","depth":2,"charIndex":2689},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2994},{"id":"security-scoped-file-access","text":"Security-Scoped File Access","depth":2,"charIndex":4010},{"id":"filemanageraddfilebookmark","text":"FileManager.addFileBookmark","depth":2,"charIndex":4335},{"id":"filemanagerremovefilebookmark","text":"FileManager.removeFileBookmark","depth":2,"charIndex":4740},{"id":"usage-recommendations","text":"Usage Recommendations","depth":2,"charIndex":5079}],"frontmatter":{},"version":"","description":"onDropContent is a view modifier provided by Scripting that allows a view to act as a drop target, receiving files, images, or text dragged in from other applications."},{"title":"Control Widget <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Control Widget \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `ControlWidget` API enables users to add custom Button or Toggle controls to the iOS Control Center or Lock Screen. Each control is linked to an `AppIntent` to execute custom script logic. The controls support privacy protection, dynamic state labels, and SFSymbols icons.\n\n***\n\n## Control Label Type\n\n### `ControlWidgetLabel`\n\nRepresents a label for a control, including the main label or value label in active/inactive state.\n\n| Property           | Type       | Description                                                       |\n| ------------------ | ---------- | ----------------------------------------------------------------- |\n| `title`            | `string`   | The main title of the label.                                      |\n| `systemImage`      | `string?`  | Optional SFSymbol image name for the label.                       |\n| `privacySensitive` | `boolean?` | If `true`, the label content is hidden when the device is locked. |\n\n***\n\n## 1. `ControlWidgetButton`\n\nRenders a button control that executes a script intent when tapped.\n\n```ts\nfunction ControlWidgetButton(props: ControlWidgetButtonProps): JSX.Element\n```\n\n### `ControlWidgetButtonProps`\n\n| Property             | Type                          | Description                                                                                                              |\n| -------------------- | ----------------------------- | ------------------------------------------------------------------------------------------------------------------------ |\n| `privacySensitive`   | `boolean?`                    | If `true`, the control's state and content are hidden when the device is locked.                                         |\n| `intent`             | `AppIntent<any>`              | The intent to be executed when the button is tapped.                                                                     |\n| `label`              | `ControlWidgetLabel`          | The main label shown on the button.                                                                                      |\n| `activeValueLabel`   | `ControlWidgetLabel \\| null?` | The label shown when the button is active. Must be paired with `inactiveValueLabel`. Overrides `systemImage` in `label`. |\n| `inactiveValueLabel` | `ControlWidgetLabel \\| null?` | The label shown when the button is inactive. Must be paired with `activeValueLabel`. Overrides `systemImage` in `label`. |\n\n> If either `activeValueLabel` or `inactiveValueLabel` is provided, both should be specified to ensure proper state display.\n\n***\n\n## 2. `ControlWidgetToggle`\n\nRenders a toggle control that updates a boolean value using a script intent.\n\n```ts\nfunction ControlWidgetToggle<T extends { value: boolean }>(props: ControlWidgetToggleProps<T>): JSX.Element\n```\n\n### `ControlWidgetToggleProps<T>`\n\n| Property             | Type                          | Description                                                                        |\n| -------------------- | ----------------------------- | ---------------------------------------------------------------------------------- |\n| `privacySensitive`   | `boolean?`                    | If `true`, the control's state and content are hidden when the device is locked.   |\n| `intent`             | `AppIntent<T>`                | The intent to execute when toggled. The type `T` must extend `{ value: boolean }`. |\n| `label`              | `ControlWidgetLabel`          | The main label for the toggle.                                                     |\n| `activeValueLabel`   | `ControlWidgetLabel \\| null?` | Label displayed when toggle is ON. Must be paired with `inactiveValueLabel`.       |\n| `inactiveValueLabel` | `ControlWidgetLabel \\| null?` | Label displayed when toggle is OFF. Must be paired with `activeValueLabel`.        |\n\n***\n\n## 3. `ControlWidget` Namespace\n\n```ts\nnamespace ControlWidget\n```\n\n### `ControlWidget.parameter: string`\n\nA user-defined string parameter set during control configuration. Useful for targeting specific resources (e.g., a device ID or door ID).\n\n***\n\n### `ControlWidget.present(element: VirtualNode): void`\n\nDisplays the control UI. Only `ControlWidgetButton` or `ControlWidgetToggle` elements are supported.\n\n#### Usage Notes:\n\n- `control_widget_button.tsx` must only render a `ControlWidgetButton`.\n- `control_widget_toggle.tsx` must only render a `ControlWidgetToggle`.\n- To hide the entire control content on the Lock Screen, use `privacySensitive` on the root.\n- To redact only specific labels or values, apply `privacySensitive` inside `ControlWidgetLabel`.\n\n#### Example:\n\n```tsx\n/// app_intents.tsx\nexport const ToggleDoorIntent = AppIntentManager.register({\n  name: \"ToggleDoorIntent\",\n  protocol: AppIntentProtocol.AppIntent,\n  perform: async ({ id, value }: { id: string; value: boolean }) => {\n    await setDoorState(id, value)\n    ControlWidget.reloadToggles()\n  }\n})\n\n/// control_widget_toggle.tsx\nasync function run() {\n  const doorId = ControlWidget.parameter || \"default\"\n  const data = await fetchDoorData(doorId)\n\n  ControlWidget.present(\n    <ControlWidgetToggle\n      privacySensitive\n      intent={ToggleDoorIntent({ id: doorId, value: !data.doorOpened })}\n      label={{\n        title: `Door ${doorId}`,\n        systemImage: data.doorOpened ? \"door.garage.opened\" : \"door.garage.closed\"\n      }}\n      activeValueLabel={{ title: \"The door is opened\" }}\n      inactiveValueLabel={{ title: \"The door is closed\" }}\n    />\n  )\n}\n\nrun()\n```\n\n***\n\n### `ControlWidget.reloadButtons(): void`\n\nReloads all control widget buttons. Useful when the intent result changes the UI state.\n\n***\n\n### `ControlWidget.reloadToggles(): void`\n\nReloads all toggle widgets. Call this after a toggle action to update state.\n\n***\n\n## 4. Development Notes\n\n- Every control must be associated with an `AppIntent` to define its behavior.\n- Toggle controls must pass an intent with a parameter shape `{ value: boolean }`.\n- If using value labels (`activeValueLabel` / `inactiveValueLabel`), always provide both.\n- System images (`systemImage`) should follow [SF Symbols]() naming conventions.\n- Use `ControlWidget.reloadButtons()` and `reloadToggles()` to force UI updates after state changes in the background.\n","routePath":"/doc/Control Widget","lang":"en","toc":[{"id":"control-label-type","text":"Control Label Type","depth":2,"charIndex":441},{"id":"controlwidgetlabel","text":"`ControlWidgetLabel`","depth":3,"charIndex":464},{"id":"1-controlwidgetbutton","text":"1. `ControlWidgetButton`","depth":2,"charIndex":1117},{"id":"controlwidgetbuttonprops","text":"`ControlWidgetButtonProps`","depth":3,"charIndex":1301},{"id":"2-controlwidgettoggle","text":"2. `ControlWidgetToggle`","depth":2,"charIndex":2725},{"id":"controlwidgettogglepropst","text":"`ControlWidgetToggleProps<T>`","depth":3,"charIndex":2951},{"id":"3-controlwidget-namespace","text":"3. `ControlWidget` Namespace","depth":2,"charIndex":3986},{"id":"controlwidgetparameter-string","text":"`ControlWidget.parameter: string`","depth":3,"charIndex":4054},{"id":"controlwidgetpresentelement-virtualnode-void","text":"`ControlWidget.present(element: VirtualNode): void`","depth":3,"charIndex":4237},{"id":"usage-notes","text":"Usage Notes:","depth":4,"charIndex":4396},{"id":"example","text":"Example:","depth":4,"charIndex":4751},{"id":"controlwidgetreloadbuttons-void","text":"`ControlWidget.reloadButtons(): void`","depth":3,"charIndex":5651},{"id":"controlwidgetreloadtoggles-void","text":"`ControlWidget.reloadToggles(): void`","depth":3,"charIndex":5788},{"id":"4-development-notes","text":"4. Development Notes","depth":2,"charIndex":5914}],"frontmatter":{},"version":"","description":"The ControlWidget API enables users to add custom Button or Toggle controls to the iOS Control Center or Lock Screen. Each control is linked to an AppIntent to execute custom script logic. The controls support privacy protection, dynamic state labels, and SFSymbols icons."},{"title":"Custom Keyboard <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Custom Keyboard \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `CustomKeyboard` namespace provides a comprehensive API for building fully custom keyboard UIs in the Scripting app. It allows you to create JSX-based keyboards, insert or modify text, query input state, respond to user interaction, and control keyboard layout or navigation.\n\n***\n\n## 1. Environment & Setup\n\n### Requirements\n\n- You must define your keyboard interface in a file named `**keyboard.tsx**` inside your script project.\n- The `CustomKeyboard` API is **only available in the keyboard extension environment**.\n- It is **not available** in App scripts, Intents (`intent.tsx`), or Widgets (`widget.tsx`).\n- You must enable the keyboard in iOS settings:\n\n  ```\n  Settings > General > Keyboard > Keyboards > Add New Keyboard > Scripting\n  ```\n\n  Then tap the **Scripting Keyboard** and enable **Allow Full Access** to unlock clipboard and network features.\n\n***\n\n## 2. Presentation\n\n### `present(node: VirtualNode): void`\n\nRenders your custom keyboard UI using the given JSX node. This function **must be called once** in `keyboard.tsx`.\n\n```tsx\nfunction MyKeyboard() {\n  return <Text>Hello from keyboard</Text>\n}\n\nCustomKeyboard.present(<MyKeyboard />)\n```\n\n***\n\n## 3. Text Input State\n\n| Property           | Type                      | Description                              |\n| ------------------ | ------------------------- | ---------------------------------------- |\n| `textBeforeCursor` | `Promise<string \\| null>` | Text before the cursor                   |\n| `textAfterCursor`  | `Promise<string \\| null>` | Text after the cursor                    |\n| `selectedText`     | `Promise<string \\| null>` | Currently selected text                  |\n| `hasText`          | `Promise<boolean>`        | Whether the text input contains any text |\n\n***\n\n## 4. Input Traits\n\n### `useTraits(): TextInputTraits`\n\nHook to retrieve the current input traits (e.g., keyboard type, return key style). It automatically updates when `textDidChange` or `selectionDidChange` events occur.\n\n### `traits: TextInputTraits`\n\nA snapshot of the traits at the last change. Prefer `useTraits()` in JSX components for reactivity.\n\n#### Example fields:\n\n- `keyboardType`: `'default'`, `'numberPad'`, `'emailAddress'`...\n- `returnKeyType`: `'go'`, `'search'`, `'done'`...\n- `autocapitalizationType`: `'none'`, `'sentences'`, etc.\n- `textContentType`: semantic input hints like `'username'`, `'oneTimeCode'`, etc.\n- `keyboardAppearance`: `'light'`, `'dark'`, etc.\n\n***\n\n## 5. Text Manipulation\n\n### `insertText(text: string): Promise<void>`\n\nInsert text at the current cursor position.\n\n### `deleteBackward(): Promise<void>`\n\nDelete one character before the cursor.\n\n### `moveCursor(offset: number): Promise<void>`\n\nMove the cursor by a number of characters. Negative = left; Positive = right.\n\n### `setMarkedText(text, location, length): Promise<void>`\n\nMark a portion of inserted text (used in composition scenarios like Pinyin input).\n\n### `unmarkText(): Promise<void>`\n\nClear any currently marked text.\n\n***\n\n## 6. Keyboard Behavior Control\n\n### `dismiss(): Promise<void>`\n\nDismiss the keyboard view.\n\n### `nextKeyboard(): Promise<void>`\n\nSwitch to the next system keyboard.\n\n### `requestHeight(height: number): Promise<void>`\n\nRequest a new keyboard height in points. Recommended range is **216–360pt**.\n\n### `setHasDictationKey(value: boolean): Promise<void>`\n\nControl whether the dictation (microphone) key is shown.\n\n### `setToolbarVisible(visible: boolean): Promise<void>`\n\nShow or hide the custom keyboard toolbar. Useful for debugging.\n\n***\n\n## 7. Navigation\n\n### `dismissToHome(): Promise<void>`\n\nDismisses the currently active keyboard script and returns to the **Scripting keyboard home screen** (script list). Useful for letting users choose another script.\n\n```ts\nawait CustomKeyboard.dismissToHome()\n```\n\n***\n\n## 8. User Feedback\n\n### `playInputClick(): void`\n\nPlay the standard system keyboard click sound. Useful when simulating real key taps.\n\n```ts\nCustomKeyboard.playInputClick()\n```\n\n***\n\n## 9. Event Listeners\n\n### `addListener(event, callback): void`\n\nRegister a listener for keyboard or text input changes.\n\n| Event                 | Callback Signature                  | Description                     |\n| --------------------- | ----------------------------------- | ------------------------------- |\n| `textWillChange`      | `() => void`                        | Before text changes             |\n| `textDidChange`       | `(traits: TextInputTraits) => void` | After text changes              |\n| `selectionWillChange` | `() => void`                        | Before cursor/selection changes |\n| `selectionDidChange`  | `(traits: TextInputTraits) => void` | After cursor/selection changes  |\n\n### `removeListener(event, callback): void`\n\nRemove a specific listener.\n\n### `removeAllListeners(event): void`\n\nRemove all listeners for a given event type.\n\n***\n\n## 10. Full Example\n\n```tsx\nfunction MyKeyboard() {\n  const traits = CustomKeyboard.useTraits()\n\n  const insert = async (text: string) => {\n    CustomKeyboard.playInputClick()\n    await CustomKeyboard.insertText(text)\n  }\n\n  return (\n    <VStack spacing={12}>\n      <Text>Input type: {traits.keyboardType}</Text>\n      <HStack spacing={10}>\n        <Button title=\"你\" action={() => insert(\"你\")} />\n        <Button title=\"好\" action={() => insert(\"好\")} />\n        <Button title=\"←\" action={() => CustomKeyboard.deleteBackward()} />\n        <Button title=\"Back\" action={() => CustomKeyboard.dismissToHome()} />\n      </HStack>\n    </VStack>\n  )\n}\n\nCustomKeyboard.present(<MyKeyboard />)\n```\n\n***\n\n## 11. Best Practices\n\n- **Call `present()` only once** in your `keyboard.tsx` file.\n- Use `requestHeight()` to ensure appropriate layout on different screen sizes.\n- Prefer `useTraits()` for reactive input context access in JSX.\n- Use `dismissToHome()` instead of `dismiss()` if you want to return to the script list.\n- Call `playInputClick()` when simulating key taps for user feedback.\n- Always check for `hasText` before calling `deleteBackward()`.\n","routePath":"/doc/Custom Keyboard","lang":"en","toc":[{"id":"1-environment--setup","text":"1. Environment & Setup","depth":2,"charIndex":445},{"id":"requirements","text":"Requirements","depth":3,"charIndex":472},{"id":"2-presentation","text":"2. Presentation","depth":2,"charIndex":1032},{"id":"presentnode-virtualnode-void","text":"`present(node: VirtualNode): void`","depth":3,"charIndex":1052},{"id":"3-text-input-state","text":"3. Text Input State","depth":2,"charIndex":1333},{"id":"4-input-traits","text":"4. Input Traits","depth":2,"charIndex":1927},{"id":"usetraits-textinputtraits","text":"`useTraits(): TextInputTraits`","depth":3,"charIndex":1947},{"id":"traits-textinputtraits","text":"`traits: TextInputTraits`","depth":3,"charIndex":2151},{"id":"example-fields","text":"Example fields:","depth":4,"charIndex":2283},{"id":"5-text-manipulation","text":"5. Text Manipulation","depth":2,"charIndex":2619},{"id":"inserttexttext-string-promisevoid","text":"`insertText(text: string): Promise<void>`","depth":3,"charIndex":2644},{"id":"deletebackward-promisevoid","text":"`deleteBackward(): Promise<void>`","depth":3,"charIndex":2736},{"id":"movecursoroffset-number-promisevoid","text":"`moveCursor(offset: number): Promise<void>`","depth":3,"charIndex":2816},{"id":"setmarkedtexttext-location-length-promisevoid","text":"`setMarkedText(text, location, length): Promise<void>`","depth":3,"charIndex":2944},{"id":"unmarktext-promisevoid","text":"`unmarkText(): Promise<void>`","depth":3,"charIndex":3088},{"id":"6-keyboard-behavior-control","text":"6. Keyboard Behavior Control","depth":2,"charIndex":3162},{"id":"dismiss-promisevoid","text":"`dismiss(): Promise<void>`","depth":3,"charIndex":3195},{"id":"nextkeyboard-promisevoid","text":"`nextKeyboard(): Promise<void>`","depth":3,"charIndex":3255},{"id":"requestheightheight-number-promisevoid","text":"`requestHeight(height: number): Promise<void>`","depth":3,"charIndex":3329},{"id":"sethasdictationkeyvalue-boolean-promisevoid","text":"`setHasDictationKey(value: boolean): Promise<void>`","depth":3,"charIndex":3459},{"id":"settoolbarvisiblevisible-boolean-promisevoid","text":"`setToolbarVisible(visible: boolean): Promise<void>`","depth":3,"charIndex":3574},{"id":"7-navigation","text":"7. Navigation","depth":2,"charIndex":3702},{"id":"dismisstohome-promisevoid","text":"`dismissToHome(): Promise<void>`","depth":3,"charIndex":3720},{"id":"8-user-feedback","text":"8. User Feedback","depth":2,"charIndex":3976},{"id":"playinputclick-void","text":"`playInputClick(): void`","depth":3,"charIndex":3997},{"id":"9-event-listeners","text":"9. Event Listeners","depth":2,"charIndex":4161},{"id":"addlistenerevent-callback-void","text":"`addListener(event, callback): void`","depth":3,"charIndex":4184},{"id":"removelistenerevent-callback-void","text":"`removeListener(event, callback): void`","depth":3,"charIndex":4872},{"id":"removealllistenersevent-void","text":"`removeAllListeners(event): void`","depth":3,"charIndex":4946},{"id":"10-full-example","text":"10. Full Example","depth":2,"charIndex":5036},{"id":"11-best-practices","text":"11. Best Practices","depth":2,"charIndex":5729}],"frontmatter":{},"version":"","description":"The CustomKeyboard namespace provides a comprehensive API for building fully custom keyboard UIs in the Scripting app. It allows you to create JSX-based keyboards, insert or modify text, query input state, respond to user interaction, and control keyboard layout or navigation."},{"title":"AVMetadataItem","content":"The `AVMetadataItem` class represents a single metadata entry within a media file, such as an audio or video resource.\nInstances of this class are typically returned by the methods `AVPlayer.loadMetadata()` and `AVPlayer.loadCommonMetadata()` and provide access to metadata embedded in media resources.\n\nEach metadata item describes one piece of information—such as the title, artist, album name, artwork, or encoding details—and can be accessed in multiple typed forms.\n\n***\n\n## Class Definition\n\n### `class AVMetadataItem`\n\n***\n\n### **Properties**\n\n#### `key: string`\n\nThe metadata item’s key.\nThis value identifies the specific metadata field and is usually tied to the underlying media format (e.g., ID3, QuickTime, iTunes).\n\n**Example**\n\n```ts\nconsole.log(item.key) // e.g. \"id3/TIT2\"\n```\n\n***\n\n#### `commonKey?: string`\n\nThe **common key** corresponding to the metadata item.\nThis key maps the format-specific `key` to a general, standardized key within the “common key space.”\nIt allows accessing metadata fields across different media formats in a unified way.\n\n**Example**\n\n```ts\nconsole.log(item.commonKey) // e.g. \"title\"\n```\n\n***\n\n#### `identifier?: string`\n\nA unique identifier for the metadata item.\nUsed to distinguish multiple entries of the same type.\n\n***\n\n#### `extendedLanguageTag?: string`\n\nThe extended language tag of the metadata item (e.g., `\"en-US\"` or `\"zh-Hans\"`).\nIndicates the language of the metadata content, if applicable.\n\n***\n\n#### `locale?: string`\n\nThe locale associated with this metadata item.\nThis may contain additional region or language localization information.\n\n***\n\n#### `time?: number`\n\nThe timestamp (in seconds) of the metadata item within the media’s timeline.\nUseful for time-based metadata, such as subtitles or synchronized lyrics.\n\n**Example**\n\n```ts\nconsole.log(item.time) // e.g. 12.53\n```\n\n***\n\n#### `duration?: number`\n\nThe duration (in seconds) that this metadata item applies to.\nSome visual metadata (such as timed artwork or lyric frames) may have an active duration.\n\n***\n\n#### `startDate?: Date`\n\nThe start date of the metadata item, if available.\nReturns `null` when no date information is provided.\n\n***\n\n#### `dataType?: string`\n\nThe data type of the metadata item’s value (e.g., `\"com.apple.metadata.datatype.UTF-8\"`, `\"public.jpeg\"`).\nThis can help determine how to interpret the metadata’s underlying data.\n\n***\n\n#### `extraAttributes: Promise<Record<string, any> | null>`\n\nExtra attributes associated with the metadata item.\nThese attributes are format-specific and depend on the metadata container and keyspace.\n\nFor example, an ID3 tag’s `\"APIC\"` frame (attached picture) may include a picture description or type.\n\n**Example**\n\n```ts\nconst extras = await item.extraAttributes\nconsole.log(extras)\n// Example output: { description: \"Cover (front)\", pictureType: 3 }\n```\n\n***\n\n#### `dataValue: Promise<Data | null>`\n\nReturns the metadata value as a `Data` object.\nUseful for binary content such as embedded artwork or other non-text data.\n\n**Example**\n\n```ts\nconst imageData = await item.dataValue\nif (imageData) {\n  const image = UIImage.fromData(imageData)\n  // Use image\n}\n```\n\n***\n\n#### `stringValue: Promise<string | null>`\n\nReturns the metadata value as a `string`.\nThis is the most common form for textual metadata such as titles, artists, and album names.\n\n**Example**\n\n```ts\nconst title = await item.stringValue\nconsole.log(\"Title:\", title)\n```\n\n***\n\n#### `numberValue: Promise<number | null>`\n\nReturns the metadata value as a `number`.\nUseful for numeric fields such as bitrate, sample rate, or track number.\n\n**Example**\n\n```ts\nconst bitrate = await item.numberValue\nconsole.log(\"Bitrate:\", bitrate)\n```\n\n***\n\n#### `dateValue: Promise<Date | null>`\n\nReturns the metadata value as a `Date` object.\nApplicable to time-related metadata such as recording or release dates.\n\n**Example**\n\n```ts\nconst date = await item.dateValue\nconsole.log(\"Release Date:\", date?.toISOString())\n```\n\n***\n\n## Example Usage\n\n```ts\nconst metadata = await player.loadMetadata()\nfor (const item of metadata) {\n  const key = item.commonKey ?? item.key\n  const value =\n    (await item.stringValue) ??\n    (await item.numberValue) ??\n    (await item.dateValue)\n  console.log(`${key}: ${value}`)\n}\n```\n\n**Notes:**\n\n- Prefer using `commonKey` when available for format-agnostic access.\n- Asynchronous properties (`stringValue`, `dataValue`, `extraAttributes`) return Promises and should be awaited.\n- Use `AVPlayer.loadCommonMetadata()` for standardized metadata fields such as title, album, artist, and artwork.\n\n***\n\n## Common Use Cases\n\n| Purpose       | Common Key (`commonKey`) | Description                         |\n| ------------- | ------------------------ | ----------------------------------- |\n| Title         | `\"title\"`                | The media’s title                   |\n| Artist        | `\"artist\"`               | The performer or author             |\n| Album         | `\"albumName\"`            | The album name                      |\n| Artwork       | `\"artwork\"`              | Embedded artwork image (JPEG/PNG)   |\n| Encoder       | `\"encoder\"`              | The software or encoder used        |\n| Creation Date | `\"creationDate\"`         | The recording or creation timestamp |\n","routePath":"/doc/Device Capabilities/AVMetadataItem","lang":"en","toc":[{"id":"class-definition","text":"Class Definition","depth":2,"charIndex":477},{"id":"class-avmetadataitem","text":"`class AVMetadataItem`","depth":3,"charIndex":498},{"id":"properties","text":"**Properties**","depth":3,"charIndex":531},{"id":"key-string","text":"`key: string`","depth":4,"charIndex":551},{"id":"commonkey-string","text":"`commonKey?: string`","depth":4,"charIndex":800},{"id":"identifier-string","text":"`identifier?: string`","depth":4,"charIndex":1143},{"id":"extendedlanguagetag-string","text":"`extendedLanguageTag?: string`","depth":4,"charIndex":1275},{"id":"locale-string","text":"`locale?: string`","depth":4,"charIndex":1462},{"id":"time-number","text":"`time?: number`","depth":4,"charIndex":1612},{"id":"duration-number","text":"`duration?: number`","depth":4,"charIndex":1852},{"id":"startdate-date","text":"`startDate?: Date`","depth":4,"charIndex":2036},{"id":"datatype-string","text":"`dataType?: string`","depth":4,"charIndex":2171},{"id":"extraattributes-promiserecordstring-any--null","text":"`extraAttributes: Promise<Record<string, any> | null>`","depth":4,"charIndex":2383},{"id":"datavalue-promisedata--null","text":"`dataValue: Promise<Data | null>`","depth":4,"charIndex":2848},{"id":"stringvalue-promisestring--null","text":"`stringValue: Promise<string | null>`","depth":4,"charIndex":3157},{"id":"numbervalue-promisenumber--null","text":"`numberValue: Promise<number | null>`","depth":4,"charIndex":3431},{"id":"datevalue-promisedate--null","text":"`dateValue: Promise<Date | null>`","depth":4,"charIndex":3692},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":3965},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":4569}],"frontmatter":{},"version":"","description":"The AVMetadataItem class represents a single metadata entry within a media file, such as an audio or video resource.\nInstances of this class are typically returned by the methods AVPlayer.loadMetadata() and AVPlayer.loadCommonMetadata() and provide access to metadata embedded in media resources. Each metadata item describes one piece of information—such as the title, artist, album name, artwork, or encoding details—and can be accessed in multiple typed forms."},{"title":"AppStore <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# AppStore \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `AppStore` API allows you to display App Store app information **directly inside the Scripting app**, without navigating users away to the system App Store application.\n\nThis API is built on top of Apple’s native App Store presentation components and is suitable for scenarios such as **app recommendations, app collections, related app discovery, and ecosystem entry points**.\n\n***\n\n## Namespace: `AppStore`\n\n```ts\nnamespace AppStore\n```\n\n***\n\n## Overview\n\n- Present an App Store product page inside the Scripting app using a **modal view**\n- Users can view app details, screenshots, ratings, and release notes\n- Users can **download, update, or open** the app directly\n- Automatically returns to the current script UI after dismissal\n- Does not launch or switch to the system App Store app\n\n***\n\n## API Summary\n\n| Method                   | Description                                              |\n| ------------------------ | -------------------------------------------------------- |\n| `presentApp(id: string)` | Presents an App Store product page for the specified app |\n| `dismissApp()`           | Dismisses the currently presented App Store page         |\n\n***\n\n## API Reference\n\n### `presentApp(id: string): Promise<void>`\n\nPresents the App Store product page for a specific app inside the Scripting app.\n\n#### Parameters\n\n| Name | Type     | Description                               |\n| ---- | -------- | ----------------------------------------- |\n| `id` | `string` | The **App Store app identifier (App ID)** |\n\n- The App ID is the numeric identifier used by the App Store\n- It can be extracted from an App Store URL\n  Example:\n  `https://apps.apple.com/app/id123456789`\n  The ID is `\"123456789\"`\n\n#### Return Value\n\n- Returns a `Promise<void>`\n- The promise resolves when the App Store modal is dismissed\n- Throws an error if another App Store modal is already presented\n\n#### Behavior\n\n- Presents the App Store page as a modal view\n- Only **one App Store modal** can be active at a time\n- Calling `presentApp` again while one is already open will result in an error\n\n#### Example\n\n```ts\nawait AppStore.presentApp(\"123456789\")\n```\n\n***\n\n### `dismissApp(): Promise<void>`\n\nDismisses the App Store modal that was opened using `presentApp`.\n\n#### Return Value\n\n- Returns a `Promise<void>`\n- Resolves when the modal has been successfully dismissed\n\n#### Usage Notes\n\n- In most cases, manual dismissal is not required\n- Useful when:\n\n  - Implementing custom UI-driven dismissal logic\n  - Closing the App Store page at a specific point in a script’s workflow\n\n#### Example\n\n```ts\nawait AppStore.dismissApp()\n```\n\n***\n\n## Usage Examples\n\n### Example 1: App Recommendation Entry\n\n```ts\n\n\nfunction AppRecommendation() {\n  return (\n    <Button\n      title=\"View Recommended App\"\n      action={() => {\n        AppStore.presentApp(\"123456789\")\n      }}\n    />\n  )\n}\n```\n\n***\n\n### Example 2: App Collection / Favorites\n\n```ts\nconst favoriteApps = [\n  { name: \"App A\", id: \"123456789\" },\n  { name: \"App B\", id: \"987654321\" }\n]\n\nfunction AppList() {\n  return favoriteApps.map(app => (\n    <Button\n      title={app.name}\n      action={() => {\n        AppStore.presentApp(app.id)\n      }}\n    />\n  ))\n}\n```\n\n***\n\n## Errors and Considerations\n\n### Common Errors\n\n- **An App Store modal is already presented**\n\n  - Calling `presentApp` again will throw an error\n  - Ensure your logic prevents duplicate presentations\n\n### Limitations\n\n- Only App Store app product pages are supported\n- Subscription pages, developer profiles, and other App Store sections are not supported\n- The provided App ID must be valid and publicly available on the App Store\n","routePath":"/doc/Device Capabilities/AppStore","lang":"en","toc":[{"id":"namespace-appstore","text":"Namespace: `AppStore`","depth":2,"charIndex":540},{"id":"overview","text":"Overview","depth":2,"charIndex":601},{"id":"api-summary","text":"API Summary","depth":2,"charIndex":954},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":1328},{"id":"presentappid-string-promisevoid","text":"`presentApp(id: string): Promise<void>`","depth":3,"charIndex":1346},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1473},{"id":"return-value","text":"Return Value","depth":4,"charIndex":1869},{"id":"behavior","text":"Behavior","depth":4,"charIndex":2044},{"id":"example","text":"Example","depth":4,"charIndex":2240},{"id":"dismissapp-promisevoid","text":"`dismissApp(): Promise<void>`","depth":3,"charIndex":2309},{"id":"return-value-1","text":"Return Value","depth":4,"charIndex":2411},{"id":"usage-notes","text":"Usage Notes","depth":4,"charIndex":2517},{"id":"example-1","text":"Example","depth":4,"charIndex":2726},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":2784},{"id":"example-1-app-recommendation-entry","text":"Example 1: App Recommendation Entry","depth":3,"charIndex":2803},{"id":"example-2-app-collection--favorites","text":"Example 2: App Collection / Favorites","depth":3,"charIndex":3036},{"id":"errors-and-considerations","text":"Errors and Considerations","depth":2,"charIndex":3368},{"id":"common-errors","text":"Common Errors","depth":3,"charIndex":3398},{"id":"limitations","text":"Limitations","depth":3,"charIndex":3571}],"frontmatter":{},"version":"","description":"The AppStore API allows you to display App Store app information directly inside the Scripting app, without navigating users away to the system App Store application. This API is built on top of Apple’s native App Store presentation components and is suitable for scenarios such as app recommendations, app collections, related app discovery, and ecosystem entry points."},{"title":"Audio Player","content":"The `AVPlayer` class provides audio and video playback capabilities with support for playback control, looping, event callbacks, and metadata retrieval.\nYou can use `setSource()` to set a media source (either a local file or a remote URL) and call `play()` to start playback.\n\n***\n\n## Getting Started\n\nExample usage of `AVPlayer`:\n\n```typescript\nconst player = new AVPlayer()\n\n// Set the media source (local file or remote URL)\nif (player.setSource(\"https://example.com/audio.mp3\")) {\n    player.onReadyToPlay = () => {\n        player.play()\n    }\n    player.onEnded = () => {\n        console.log(\"Playback finished.\")\n    }\n} else {\n    console.error(\"Failed to set media source.\")\n}\n```\n\n***\n\n## API Reference\n\n### Properties\n\n#### `volume: number`\n\nControls the playback volume, ranging from `0.0` (muted) to `1.0` (maximum).\n\n```typescript\nplayer.volume = 0.5 // Set to 50% volume\n```\n\n***\n\n#### `duration: DurationInSeconds`\n\nThe total duration of the media in seconds.\nThis value will be `0` until the media is fully loaded.\n\n```typescript\nconsole.log(`Media duration: ${player.duration} seconds`)\n```\n\n***\n\n#### `currentTime: DurationInSeconds`\n\nThe current playback time in seconds.\nYou can set this value to seek to a specific time.\n\n```typescript\nplayer.currentTime = 30 // Seek to 30 seconds\n```\n\n***\n\n#### `rate: number`\n\nControls the playback speed.\nA value of `1.0` is normal speed; values below `1.0` slow down playback, and values above `1.0` speed it up.\n\n```typescript\nplayer.rate = 1.5 // Play at 1.5× speed\n```\n\n***\n\n#### `timeControlStatus: TimeControlStatus`\n\nIndicates the current playback state.\nPossible values:\n\n- `paused`: playback is paused\n- `waitingToPlayAtSpecifiedRate`: waiting for conditions to start (e.g., buffering)\n- `playing`: currently playing\n\n***\n\n#### `numberOfLoops: number`\n\nSets how many times the media will loop.\n\n- `0`: no looping\n- positive value: specific number of loops\n- negative value: infinite looping\n\n```typescript\nplayer.numberOfLoops = -1 // Infinite looping\n```\n\n***\n\n### Methods\n\n#### `setSource(filePathOrURL: string): boolean`\n\nSets the media source for playback.\nAccepts a local file path or a remote URL.\n\nReturns:\n\n- `true` if successfully set\n- `false` if setting failed\n\n***\n\n#### `play(): boolean`\n\nStarts playback of the current media.\n\nReturns:\n\n- `true` if playback started successfully\n- `false` if it failed to start\n\n***\n\n#### `pause()`\n\nPauses the current playback.\n\n***\n\n#### `stop()`\n\nStops playback and resets the position to the beginning.\n\n***\n\n#### `dispose()`\n\nReleases all player resources and removes observers.\nCall this method when the player is no longer needed to avoid memory leaks.\n\n***\n\n#### `loadMetadata(): Promise<AVMetadataItem[] | null>`\n\nLoads detailed metadata for the current media file.\n\nReturns:\n\n- An array of `AVMetadataItem` objects\n- `null` if no metadata is available or no source has been set\n\nExample:\n\n```typescript\nconst metadata = await player.loadMetadata()\nif (metadata) {\n  for (const item of metadata) {\n    console.log(item.key, await item.stringValue)\n  }\n}\n```\n\n***\n\n#### `loadCommonMetadata(): Promise<AVMetadataItem[] | null>`\n\nLoads the *common metadata* of the current media, where each `AVMetadataItem` provides a `commonKey` that can be used across media formats.\n\nExample:\n\n```typescript\nconst commonMetadata = await player.loadCommonMetadata()\nif (commonMetadata) {\n  const titleItem = commonMetadata.find(i => i.commonKey === \"title\")\n  console.log(\"Title:\", await titleItem?.stringValue)\n}\n```\n\n***\n\n### Callbacks\n\n#### `onReadyToPlay?: () => void`\n\nCalled when the media is ready for playback.\n\n***\n\n#### `onTimeControlStatusChanged?: (status: TimeControlStatus) => void`\n\nCalled when the playback state changes, such as from “waiting” to “playing.”\n\n***\n\n#### `onEnded?: () => void`\n\nCalled when playback finishes.\n\n***\n\n#### `onError?: (message: string) => void`\n\nCalled when an error occurs during playback.\nReceives an error message as an argument.\n\n***\n\n## Audio Session Handling\n\n`AVPlayer` relies on the system’s shared audio session.\nYou can configure it using `SharedAudioSession` to ensure correct playback behavior.\n\n```typescript\nawait SharedAudioSession.setCategory('playback', ['mixWithOthers'])\nawait SharedAudioSession.setActive(true)\n```\n\nHandling interruptions (such as phone calls):\n\n```typescript\nSharedAudioSession.addInterruptionListener((type) => {\n  if (type === 'began') player.pause()\n  else if (type === 'ended') player.play()\n})\n```\n\n***\n\n## Common Use Cases\n\n### Play Remote Audio\n\n```typescript\nplayer.setSource(\"https://example.com/audio.mp3\")\nplayer.onReadyToPlay = () => player.play()\n```\n\n***\n\n### Play Local File\n\n```typescript\nplayer.setSource(\"/path/to/audio.mp3\")\nplayer.play()\n```\n\n***\n\n### Loop Playback\n\n```typescript\nplayer.numberOfLoops = 3 // Loop 3 times\nplayer.play()\n```\n\n***\n\n### Retrieve Metadata\n\n```typescript\nconst metadata = await player.loadCommonMetadata()\nif (metadata) {\n  const artist = metadata.find(i => i.commonKey === \"artist\")\n  console.log(\"Artist:\", await artist?.stringValue)\n}\n```\n\n***\n\n## Best Practices\n\n1. **Resource Management**\n   Always call `dispose()` after playback to release system resources.\n\n2. **Error Handling**\n   Implement the `onError` callback to handle playback issues gracefully (e.g., network failures).\n\n3. **Interruption Management**\n   Use audio session interruption listeners to pause and resume playback smoothly.\n\n4. **UI State Updates**\n   Use `onTimeControlStatusChanged` to update your UI when the playback state changes.\n\n5. **Metadata Usage**\n   Use `loadCommonMetadata()` to retrieve general information such as title, artist, or album artwork for display in your app’s UI.\n\n***\n\n## Full Example\n\n```typescript\nconst player = new AVPlayer()\n\nawait SharedAudioSession.setCategory('playback', ['mixWithOthers'])\nawait SharedAudioSession.setActive(true)\n\nif (player.setSource(\"https://example.com/audio.mp3\")) {\n  player.onReadyToPlay = () => player.play()\n  player.onEnded = () => {\n    console.log(\"Playback finished\")\n    player.dispose()\n  }\n  player.onError = (message) => {\n    console.error(\"Playback error:\", message)\n    player.dispose()\n  }\n\n  // Load metadata\n  const commonMetadata = await player.loadCommonMetadata()\n  if (commonMetadata) {\n    const titleItem = commonMetadata.find(i => i.commonKey === \"title\")\n    console.log(\"Title:\", await titleItem?.stringValue)\n  }\n} else {\n  console.error(\"Failed to set media source\")\n}\n```\n","routePath":"/doc/Device Capabilities/Audio Player","lang":"en","toc":[{"id":"getting-started","text":"Getting Started","depth":2,"charIndex":282},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":695},{"id":"properties","text":"Properties","depth":3,"charIndex":713},{"id":"volume-number","text":"`volume: number`","depth":4,"charIndex":729},{"id":"duration-durationinseconds","text":"`duration: DurationInSeconds`","depth":4,"charIndex":895},{"id":"currenttime-durationinseconds","text":"`currentTime: DurationInSeconds`","depth":4,"charIndex":1114},{"id":"rate-number","text":"`rate: number`","depth":4,"charIndex":1313},{"id":"timecontrolstatus-timecontrolstatus","text":"`timeControlStatus: TimeControlStatus`","depth":4,"charIndex":1537},{"id":"numberofloops-number","text":"`numberOfLoops: number`","depth":4,"charIndex":1790},{"id":"methods","text":"Methods","depth":3,"charIndex":2029},{"id":"setsourcefilepathorurl-string-boolean","text":"`setSource(filePathOrURL: string): boolean`","depth":4,"charIndex":2042},{"id":"play-boolean","text":"`play(): boolean`","depth":4,"charIndex":2245},{"id":"pause","text":"`pause()`","depth":4,"charIndex":2398},{"id":"stop","text":"`stop()`","depth":4,"charIndex":2449},{"id":"dispose","text":"`dispose()`","depth":4,"charIndex":2527},{"id":"loadmetadata-promiseavmetadataitem--null","text":"`loadMetadata(): Promise<AVMetadataItem[] | null>`","depth":4,"charIndex":2680},{"id":"loadcommonmetadata-promiseavmetadataitem--null","text":"`loadCommonMetadata(): Promise<AVMetadataItem[] | null>`","depth":4,"charIndex":3087},{"id":"callbacks","text":"Callbacks","depth":3,"charIndex":3530},{"id":"onreadytoplay---void","text":"`onReadyToPlay?: () => void`","depth":4,"charIndex":3545},{"id":"ontimecontrolstatuschanged-status-timecontrolstatus--void","text":"`onTimeControlStatusChanged?: (status: TimeControlStatus) => void`","depth":4,"charIndex":3631},{"id":"onended---void","text":"`onEnded?: () => void`","depth":4,"charIndex":3787},{"id":"onerror-message-string--void","text":"`onError?: (message: string) => void`","depth":4,"charIndex":3853},{"id":"audio-session-handling","text":"Audio Session Handling","depth":2,"charIndex":3990},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":4498},{"id":"play-remote-audio","text":"Play Remote Audio","depth":3,"charIndex":4519},{"id":"play-local-file","text":"Play Local File","depth":3,"charIndex":4659},{"id":"loop-playback","text":"Loop Playback","depth":3,"charIndex":4757},{"id":"retrieve-metadata","text":"Retrieve Metadata","depth":3,"charIndex":4855},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":5085},{"id":"full-example","text":"Full Example","depth":2,"charIndex":5712}],"frontmatter":{},"version":"","description":"The AVPlayer class provides audio and video playback capabilities with support for playback control, looping, event callbacks, and metadata retrieval.\nYou can use setSource() to set a media source (either a local file or a remote URL) and call play() to start playback."},{"title":"AudioRecorder","content":"The `AudioRecorder` class allows you to record audio data to a file. It provides functionalities to start, stop, pause, and manage audio recordings, with configurable settings for audio quality, sample rate, format, and more.\n\n## Features\n\n- Record audio from the system’s active input device.\n- Record for a specified duration or until manually stopped.\n- Pause and resume recordings.\n- Delete recorded audio files.\n\n## Usage\n\n### Setup SharedAudioSesion\n\nBefore create an AudioRecorder instance, we need to setup the `SharedAudioSession`, the audio session is hardware-related and should be properly activated.\n\n```ts\nawait SharedAudioSession.setActive(true)\nawait SharedAudioSession.setCategory(\n  \"playAndRecord\",\n  [\"defaultToSpeaker\"]\n)\n```\n\n### Creating an AudioRecorder Instance\n\nTo create an audio recorder, use the `create` method:\n\n```ts\nasync function createRecorder() {\n  try {\n    const filePath = Path.join(\n      FileManager.documentsDirectory,\n      \"recording.m4a\"\n    )\n    const recorder = await AudioRecorder.create(filePath, {\n      format: \"MPEG4AAC\",\n      sampleRate: 44100,\n      numberOfChannels: 2,\n      encoderAudioQuality: AVAudioQuality.high\n    })\n    return recorder\n  } catch (error) {\n    console.error(\"Failed to create recorder: \", error)\n  }\n}\n```\n\n### Recording Audio\n\nYou can start recording using the `record()` method:\n\n```ts\nasync function startRecording() {\n  const recorder = await createRecorder()\n  if (recorder) {\n    const success = recorder.record()\n    console.log(\"Recording started: \", success)\n  }\n}\n```\n\nYou can also provide options to control when to start recording and for how long:\n\n```ts\nfunction startSynchronizedRecording(recorderOne, recorderTwo) {\n  let timeOffset = recorderOne.deviceCurrentTime + 0.01\n  \n  // Synchronize the recording time of both recorders.\n  recorderOne.record({ atTime: timeOffset })\n  recorderTwo.record({ atTime: timeOffset })\n}\n```\n\n### Pausing and Stopping the Recording\n\nTo pause a recording:\n\n```ts\nfunction pauseRecording(recorder) {\n  recorder.pause()\n  console.log(\"Recording paused.\")\n}\n```\n\nTo stop a recording:\n\n```ts\nfunction stopRecording(recorder) {\n  recorder.stop()\n  console.log(\"Recording stopped.\")\n}\n```\n\n### Deleting a Recording\n\nTo delete the recorded file:\n\n```ts\nfunction deleteRecording(recorder) {\n  const success = recorder.deleteRecording()\n  console.log(\"Recording deleted: \", success)\n}\n```\n\n### Disposing of the Recorder\n\nYou should call `dispose()` when the recorder is no longer needed to free up resources:\n\n```ts\nfunction disposeRecorder(recorder) {\n  recorder.dispose()\n  console.log(\"Recorder disposed.\")\n}\n```\n\n### Event Handling\n\nYou can use the `onFinish` and `onError` callbacks to handle recording completion and errors:\n\n```ts\nasync function setupRecorder() {\n  const recorder = await createRecorder()\n  if (recorder) {\n    recorder.onFinish = (success) => {\n      console.log(\"Recording finished successfully: \", success)\n    }\n\n    recorder.onError = (message) => {\n      console.error(\"Recording error: \", message)\n    }\n  }\n}\n```\n\n## API Reference\n\n### `AudioRecorder.create(filePath, settings?)`\n\nCreates an `AudioRecorder` instance with specified settings.\n\n- **filePath** (string): The file system location to record to.\n- **settings** (optional object): The audio settings for the recording:\n  - **format** (AudioFormat): The format of the audio data. Options: \"LinearPCM\", \"MPEG4AAC\", \"AppleLossless\", \"AppleIMA4\", \"iLBC\", \"ULaw\".\n  - **sampleRate** (number): The sample rate in hertz (8000 to 192000).\n  - **numberOfChannels** (number): The number of channels (1 to 64).\n  - **encoderAudioQuality** (AVAudioQuality): The quality of the audio encoding (from `AVAudioQuality.min` to `AVAudioQuality.max`).\n\nReturns: A `Promise` that resolves with an `AudioRecorder` instance.\n\n### `AudioRecorder.isRecording`\n\nA  boolean indicating whether the recorder is recording.\n\n### `AudioRecorder.currentTime`\n\nThe time, in seconds, since the beginning of the recording.\n\n### `AudioRecorder.deviceCurrentTime`\n\nThe current time of the host audio device, in seconds.\n\n### `AudioRecorder.record(options?)`\n\nStarts recording audio.\n\n- **options** (optional object): Recording options:\n  - **atTime** (number): The time at which to start recording, relative to `deviceCurrentTime`.\n  - **duration** (number): The duration of the recording, in seconds.\n\nReturns: A boolean indicating whether recording started successfully.\n\n### `AudioRecorder.pause()`\n\nPauses the current recording.\n\n### `AudioRecorder.stop()`\n\nStops recording and closes the audio file.\n\n### `AudioRecorder.deleteRecording()`\n\nDeletes the recorded audio file.\n\nReturns: A boolean indicating whether the deletion was successful.\n\n### `AudioRecorder.dispose()`\n\nReleases resources used by the recorder.\n\n### `AudioRecorder.onFinish`\n\nCallback function invoked when the recording finishes.\n\n- **success** (boolean): Indicates whether the recording finished successfully.\n\n### `AudioRecorder.onError`\n\nCallback function invoked when an encoding error occurs.\n\n- **message** (string): Describes the error.\n\n## Example Usage\n\n```ts\n\n\nasync function run() {\n\n  await SharedAudioSession.setActive(true)\n  await SharedAudioSession.setCategory(\n    \"playAndRecord\",\n    [\"defaultToSpeaker\"]\n  )\n\n  try {\n    const filePath = Path.join(\n      FileManager.documentsDirectory,\n      \"recording.m4a\"\n    )\n    const recorder = await AudioRecorder.create(filePath, {\n      format: \"MPEG4AAC\",\n      sampleRate: 48000,\n      numberOfChannels: 2,\n      encoderAudioQuality: AVAudioQuality.high\n    })\n\n    recorder.onFinish = (success) => console.log(\"Recording finished successfully: \", success)\n    recorder.onError = (message) => console.error(\"Recording error: \", message)\n\n    recorder.record()\n    setTimeout(() => {\n      recorder.stop()\n    }, 5000) // Stop recording after 5 seconds\n  } catch (error) {\n    console.error(\"Error: \", String(error))\n  }\n}\n\nrun()\n```\n\nUse the `AudioRecorder` class to easily manage audio recording operations in your scripts, providing flexibility and control over the audio recording process.\n","routePath":"/doc/Device Capabilities/AudioRecorder","lang":"en","toc":[{"id":"features","text":"Features","depth":2,"charIndex":227},{"id":"usage","text":"Usage","depth":2,"charIndex":418},{"id":"setup-sharedaudiosesion","text":"Setup SharedAudioSesion","depth":3,"charIndex":428},{"id":"creating-an-audiorecorder-instance","text":"Creating an AudioRecorder Instance","depth":3,"charIndex":748},{"id":"recording-audio","text":"Recording Audio","depth":3,"charIndex":1288},{"id":"pausing-and-stopping-the-recording","text":"Pausing and Stopping the Recording","depth":3,"charIndex":1924},{"id":"deleting-a-recording","text":"Deleting a Recording","depth":3,"charIndex":2214},{"id":"disposing-of-the-recorder","text":"Disposing of the Recorder","depth":3,"charIndex":2411},{"id":"event-handling","text":"Event Handling","depth":3,"charIndex":2638},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":3067},{"id":"audiorecordercreatefilepath-settings","text":"`AudioRecorder.create(filePath, settings?)`","depth":3,"charIndex":3085},{"id":"audiorecorderisrecording","text":"`AudioRecorder.isRecording`","depth":3,"charIndex":3817},{"id":"audiorecordercurrenttime","text":"`AudioRecorder.currentTime`","depth":3,"charIndex":3908},{"id":"audiorecorderdevicecurrenttime","text":"`AudioRecorder.deviceCurrentTime`","depth":3,"charIndex":4002},{"id":"audiorecorderrecordoptions","text":"`AudioRecorder.record(options?)`","depth":3,"charIndex":4097},{"id":"audiorecorderpause","text":"`AudioRecorder.pause()`","depth":3,"charIndex":4450},{"id":"audiorecorderstop","text":"`AudioRecorder.stop()`","depth":3,"charIndex":4510},{"id":"audiorecorderdeleterecording","text":"`AudioRecorder.deleteRecording()`","depth":3,"charIndex":4582},{"id":"audiorecorderdispose","text":"`AudioRecorder.dispose()`","depth":3,"charIndex":4723},{"id":"audiorecorderonfinish","text":"`AudioRecorder.onFinish`","depth":3,"charIndex":4796},{"id":"audiorecorderonerror","text":"`AudioRecorder.onError`","depth":3,"charIndex":4963},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":5096}],"frontmatter":{},"version":"","description":"The AudioRecorder class allows you to record audio data to a file. It provides functionalities to start, stop, pause, and manage audio recordings, with configurable settings for audio quality, sample rate, format, and more."},{"title":"BackgroundKeeper <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# BackgroundKeeper \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `BackgroundKeeper` API provides control over background keep-alive behavior in the **Scripting App**, allowing scripts to extend their runtime after the app transitions to the background. This can be useful for maintaining ongoing operations, such as network connections or active processes, for a limited period while the app is not in the foreground.\n\n> **Availability:**\n> This API is only available when the script is running in the main app (`Script.env === \"index\"`).\n> Use it responsibly, as prolonged background execution may increase power consumption.\n\n***\n\n## Overview\n\nWhen the app moves to the background (due to a background event such as a system-triggered state change), you can call `BackgroundKeeper.keepAlive()` to request that the app continue running for a limited duration.\nWhen the app returns to the foreground, you should call `BackgroundKeeper.stopKeepAlive()` to release background resources.\n\nMultiple scripts can request background keep-alive at the same time. Internally, the system maintains a **keep-alive request queue**:\n\n- Each call to `keepAlive()` adds the calling script to the queue.\n- Each call to `stopKeepAlive()` removes it.\n- The keep-alive process stops only when **all requests** have been removed from the queue.\n\n> **Note:**\n> Even with keep-alive enabled, iOS may still terminate the app under conditions such as high memory usage or strict power constraints.\n\n***\n\n## Namespace: `BackgroundKeeper`\n\n### Properties\n\n#### `isActive: Promise<boolean>`\n\nReturns a promise that resolves to a boolean value indicating whether the keep-alive process is currently active.\n\n**Example:**\n\n```ts\nconst active = await BackgroundKeeper.isActive\nif (active) {\n  console.log(\"Keep-alive is currently active\")\n} else {\n  console.log(\"Keep-alive is not active\")\n}\n```\n\n***\n\n### Methods\n\n#### `keepAlive(): Promise<boolean>`\n\nStarts the background keep-alive process.\n\n- If the process is already active, this method resolves to `true`.\n- If successfully started, it resolves to `true`.\n- If the system denies the request, it may resolve to `false`.\n\n**Returns:**\n`Promise<boolean>` — Indicates whether the keep-alive process was successfully started.\n\n**Example:**\n\n```ts\nconst started = await BackgroundKeeper.keepAlive()\nif (started) {\n  console.log(\"Background keep-alive started successfully\")\n} else {\n  console.log(\"Failed to start background keep-alive\")\n}\n```\n\n***\n\n#### `stopKeepAlive(): Promise<void>`\n\nStops the keep-alive request for the current script.\nThis does **not** guarantee that the entire keep-alive process will stop immediately, as other scripts may still have active requests.\n\n**Returns:**\n`Promise<void>` — Resolves when the stop request is processed.\n\n**Example:**\n\n```ts\nawait BackgroundKeeper.stopKeepAlive()\nconsole.log(\"Keep-alive request for this script has been released\")\n```\n\n***\n\n## Example Usage\n\n```ts\nasync function runBackgroundTask() {\n  const started = await BackgroundKeeper.keepAlive()\n  if (!started) {\n    console.log(\"Unable to keep app alive in background\")\n    return\n  }\n\n  try {\n    console.log(\"Performing background work...\")\n    // Perform background operations (e.g., sync data, monitor sensors)\n    await new Promise(resolve => setTimeout(resolve, 10000))\n  } finally {\n    await BackgroundKeeper.stopKeepAlive()\n    console.log(\"Stopped background keep-alive\")\n  }\n}\n```\n\n***\n\n## Notes and Best Practices\n\n- Use **keep-alive sparingly** — continuous background activity may significantly increase battery drain.\n- Always **stop keep-alive** once your background task is complete or when the app returns to the foreground.\n- Avoid using `BackgroundKeeper` for indefinite background execution. The system may still suspend or terminate the app.\n- The keep-alive mechanism is cooperative — if multiple scripts request it, all must release their requests before it stops.\n","routePath":"/doc/Device Capabilities/BackgroundKeeper","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":732},{"id":"namespace-backgroundkeeper","text":"Namespace: `BackgroundKeeper`","depth":2,"charIndex":1579},{"id":"properties","text":"Properties","depth":3,"charIndex":1613},{"id":"isactive-promiseboolean","text":"`isActive: Promise<boolean>`","depth":4,"charIndex":1629},{"id":"methods","text":"Methods","depth":3,"charIndex":1971},{"id":"keepalive-promiseboolean","text":"`keepAlive(): Promise<boolean>`","depth":4,"charIndex":1984},{"id":"stopkeepalive-promisevoid","text":"`stopKeepAlive(): Promise<void>`","depth":4,"charIndex":2571},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":3013},{"id":"notes-and-best-practices","text":"Notes and Best Practices","depth":2,"charIndex":3531}],"frontmatter":{},"version":"","description":"The BackgroundKeeper API provides control over background keep-alive behavior in the Scripting App, allowing scripts to extend their runtime after the app transitions to the background. This can be useful for maintaining ongoing operations, such as network connections or active processes, for a limited period while the app is not in the foreground. Availability:\nThis API is only available when the script is running in the main app (Script.env === \"index\").\nUse it responsibly, as prolonged background execution may increase power consumption."},{"title":"BluetoothCentralManager <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# BluetoothCentralManager \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `BluetoothCentralManager` namespace provides core functionality for managing Bluetooth Low Energy (BLE) operations as a central device. It supports scanning, connecting, disconnecting, and retrieving known or connected peripherals. This API is ideal for building custom Bluetooth workflows, interacting with smart devices, wearables, and IoT peripherals.\n\n***\n\n## Properties\n\n### `isScanning: Promise<boolean>`\n\n> Returns whether the central manager is currently scanning for peripherals.\n\n- **Type**: `Promise<boolean>`\n- **Example**:\n\n  ```ts\n  const scanning = await BluetoothCentralManager.isScanning\n  console.log(scanning ? \"Scanning...\" : \"Not scanning\")\n  ```\n\n***\n\n## Methods\n\n### `startScan(onDiscoverPeripheral, options?): Promise<void>`\n\n> Starts scanning for BLE peripherals. The scan continues until you call `stopScan()`. The callback will be triggered every time a peripheral is discovered.\n\n#### Parameters\n\n- `onDiscoverPeripheral: (peripheral, advertisementData, rssi) => void`\n\n  - Callback triggered on discovery.\n  - Arguments:\n\n    - `peripheral`: A `BluetoothPeripheral` object\n    - `advertisementData`: A `BluetoothAdvertisementData` object\n    - `rssi`: Signal strength in dBm\n\n- `options?: { services?: string[]; allowDuplicates?: boolean; solicitedServiceUUIDs?: string[] }`\n\n  - `services`: An array of UUID strings to filter devices by services\n  - `allowDuplicates`: If `true`, reports duplicates; if `false` (default), filters out repeated discoveries\n  - `solicitedServiceUUIDs`: An array of UUID strings to filter devices by solicited services\n\n##### BluetoothAdvertisementData\n\nWhen using `BluetoothCentralManager.startScan()` to scan for Bluetooth peripherals, each discovered device includes an `advertisementData` object. This object contains key metadata extracted from the peripheral's BLE advertisement packets. It can help identify, filter, or categorize devices before establishing a connection.\n\n***\n\n###### Type Definition\n\n```ts\ntype BluetoothAdvertisementData = {\n  localName?: string\n  txPowerLevel?: number\n  manufacturerData?: Data\n  serviceData?: Record<string, Data>\n  serviceUUIDs?: string[]\n  overflowServiceUUIDs?: string[]\n  isConnectable?: boolean\n  solicitedServiceUUIDs?: string[]\n}\n```\n\n***\n\n###### Field Descriptions\n\n| Field Name              | Type                              | Description                                                                                |\n| ----------------------- | --------------------------------- | ------------------------------------------------------------------------------------------ |\n| `localName`             | `string` (optional)               | The local name advertised by the peripheral, if available. Useful for display.             |\n| `txPowerLevel`          | `number` (optional)               | Transmit power level in dBm. Combined with RSSI, it can be used for distance estimation.   |\n| `manufacturerData`      | `Data` (optional)                 | Manufacturer-specific binary data. Often used to encode model or serial information.       |\n| `serviceData`           | `Record<string, Data>` (optional) | Service-specific data mapped by UUID. Each value is a `Data` object.                       |\n| `serviceUUIDs`          | `string[]` (optional)             | List of service UUIDs the peripheral is advertising. Indicates supported capabilities.     |\n| `overflowServiceUUIDs`  | `string[]` (optional)             | Additional service UUIDs not included in `serviceUUIDs` due to size limits.                |\n| `isConnectable`         | `boolean` (optional)              | Indicates whether the peripheral accepts connections. Helps filter broadcast-only devices. |\n| `solicitedServiceUUIDs` | `string[]` (optional)             | UUIDs of services that the peripheral is requesting from central devices.                  |\n\n***\n\n###### Common Use Cases\n\n- **Filtering devices** by `localName`, `serviceUUIDs`, or `isConnectable`\n- **Identifying vendor-specific devices** using `manufacturerData`\n- **Estimating distance** using `txPowerLevel` + RSSI\n- **Understanding device intentions** via `solicitedServiceUUIDs`\n\n***\n\n###### Notes\n\n- All fields are optional; some peripherals may omit certain fields.\n- `manufacturerData` and `serviceData` are raw `Data` objects and must be parsed using manufacturer-specific formats.\n- `serviceUUIDs` represent only advertised services. To get the full list of available services, call `peripheral.discoverServices()` after connecting.\n\n#### Returns\n\n- `Promise<void>`\n\n#### Example\n\n```ts\nawait BluetoothCentralManager.startScan((peripheral, adv, rssi) => {\n  console.log(`Discovered ${peripheral.name} with RSSI ${rssi}`)\n}, {\n  services: [\"180D\"], // Filter for Heart Rate Service\n  allowDuplicates: false\n})\n```\n\n***\n\n### `stopScan(): Promise<void>`\n\n> Stops an ongoing scan.\n\n#### Returns\n\n- `Promise<void>`\n\n#### Example\n\n```ts\nawait BluetoothCentralManager.stopScan()\nconsole.log(\"Scan stopped\")\n```\n\n***\n\n### `retrievePeripherals(ids: string[]): Promise<BluetoothPeripheral[]>`\n\n> Retrieves known peripherals by their identifiers.\n\n#### Parameters\n\n- `ids`: An array of peripheral UUID strings\n\n#### Returns\n\n- `Promise<BluetoothPeripheral[]>`\n\n#### Example\n\n```ts\nconst known = await BluetoothCentralManager.retrievePeripherals([\"A1-B2-C3-D4\"])\n```\n\n***\n\n### `retrieveConnectedPeripherals(serviceUUIDs: string[]): Promise<BluetoothPeripheral[]>`\n\n> Retrieves currently connected peripherals that provide at least one of the specified services.\n\n#### Parameters\n\n- `serviceUUIDs`: An array of service UUID strings\n\n#### Returns\n\n- `Promise<BluetoothPeripheral[]>`\n\n#### Example\n\n```ts\nconst connected = await BluetoothCentralManager.retrieveConnectedPeripherals([\"180F\"])\nconsole.log(`Found ${connected.length} connected devices with Battery Service`)\n```\n\n***\n\n### `connect(peripheral, options?): Promise<void>`\n\n> Establishes a connection to the specified peripheral.\n\n#### Parameters\n\n- `peripheral`: A `BluetoothPeripheral` object to connect to\n- `options?`:\n\n  - `startDelay?: number` – Delay in seconds before connecting\n  - `enableTransportBridging?: boolean` – Enables transport bridging (advanced)\n  - `requiresANCS?: boolean` – Whether Apple Notification Center Service is required\n  - `enableAutoReconnect?: boolean` – Whether to auto-reconnect if disconnected\n  - `notifyOnConnection?: boolean` - Whether to notify when the connection is established\n  - `notifyOnDisconnection?: boolean` - Whether to notify when the connection is disconnected\n  - `notifyOnNotification?: boolean` - Whether to notify when a notification is received\n\n#### Returns\n\n- `Promise<void>`\n\n#### Example\n\n```ts\nawait BluetoothCentralManager.connect(peripheral, {\n  startDelay: 100,\n  enableAutoReconnect: true\n})\nconsole.log(\"Connected\")\n```\n\n***\n\n### `disconnect(peripheral): Promise<void>`\n\n> Disconnects from the specified peripheral. This is a non-blocking operation.\n\n#### Parameters\n\n- `peripheral`: A `BluetoothPeripheral` object\n\n#### Returns\n\n- `Promise<void>`\n\n#### Notes\n\n- Physical disconnection is not guaranteed if other apps are connected to the same peripheral.\n- From the app's perspective, the device is considered disconnected and `onDisconnected` will be triggered.\n\n#### Example\n\n```ts\nawait BluetoothCentralManager.disconnect(peripheral)\nconsole.log(\"Disconnected\")\n```\n\n***\n\n## Workflow Example\n\n```ts\nawait BluetoothCentralManager.startScan((peripheral) => {\n  BluetoothCentralManager.stopScan()\n  BluetoothCentralManager.connect(peripheral)\n    .then(() => peripheral.discoverServices())\n    .then(() => console.log(\"Services discovered\"))\n})\n```\n\n***\n\n## Best Practices\n\n- Always call `stopScan()` when scanning is no longer needed to save battery and reduce system load.\n- Make sure Bluetooth permissions are granted before using these APIs.\n- After connecting to a peripheral, call `discoverServices()` followed by `discoverCharacteristics()` before reading or writing data.\n","routePath":"/doc/Device Capabilities/Bluetooth/BluetoothCentralManager","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":532},{"id":"isscanning-promiseboolean","text":"`isScanning: Promise<boolean>`","depth":3,"charIndex":547},{"id":"methods","text":"Methods","depth":2,"charIndex":845},{"id":"startscanondiscoverperipheral-options-promisevoid","text":"`startScan(onDiscoverPeripheral, options?): Promise<void>`","depth":3,"charIndex":857},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1079},{"id":"returns","text":"Returns","depth":4,"charIndex":4674},{"id":"example","text":"Example","depth":4,"charIndex":4707},{"id":"stopscan-promisevoid","text":"`stopScan(): Promise<void>`","depth":3,"charIndex":4959},{"id":"returns-1","text":"Returns","depth":4,"charIndex":5018},{"id":"example-1","text":"Example","depth":4,"charIndex":5051},{"id":"retrieveperipheralsids-string-promisebluetoothperipheral","text":"`retrievePeripherals(ids: string[]): Promise<BluetoothPeripheral[]>`","depth":3,"charIndex":5150},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":5277},{"id":"returns-2","text":"Returns","depth":4,"charIndex":5340},{"id":"example-2","text":"Example","depth":4,"charIndex":5390},{"id":"retrieveconnectedperipheralsserviceuuids-string-promisebluetoothperipheral","text":"`retrieveConnectedPeripherals(serviceUUIDs: string[]): Promise<BluetoothPeripheral[]>`","depth":3,"charIndex":5501},{"id":"parameters-2","text":"Parameters","depth":4,"charIndex":5691},{"id":"returns-3","text":"Returns","depth":4,"charIndex":5760},{"id":"example-3","text":"Example","depth":4,"charIndex":5810},{"id":"connectperipheral-options-promisevoid","text":"`connect(peripheral, options?): Promise<void>`","depth":3,"charIndex":6007},{"id":"parameters-3","text":"Parameters","depth":4,"charIndex":6116},{"id":"returns-4","text":"Returns","depth":4,"charIndex":6791},{"id":"example-4","text":"Example","depth":4,"charIndex":6824},{"id":"disconnectperipheral-promisevoid","text":"`disconnect(peripheral): Promise<void>`","depth":3,"charIndex":6981},{"id":"parameters-4","text":"Parameters","depth":4,"charIndex":7106},{"id":"returns-5","text":"Returns","depth":4,"charIndex":7171},{"id":"notes","text":"Notes","depth":4,"charIndex":4322},{"id":"example-5","text":"Example","depth":4,"charIndex":7420},{"id":"workflow-example","text":"Workflow Example","depth":2,"charIndex":7531},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":7811}],"frontmatter":{},"version":"","description":"The BluetoothCentralManager namespace provides core functionality for managing Bluetooth Low Energy (BLE) operations as a central device. It supports scanning, connecting, disconnecting, and retrieving known or connected peripherals. This API is ideal for building custom Bluetooth workflows, interacting with smart devices, wearables, and IoT peripherals."},{"title":"BluetoothCharacteristic <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# BluetoothCharacteristic \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `BluetoothCharacteristic` interface represents a Bluetooth Low Energy (BLE) characteristic, which is the fundamental data unit in a BLE service. A characteristic exposes a specific piece of data and supports operations such as reading, writing, or subscribing to notifications.\n\n***\n\n## 1. Properties\n\n### `uuid: string`\n\nThe universally unique identifier (UUID) of the characteristic.\n\n- Used to identify standard (e.g., `\"2A37\"` for Heart Rate Measurement) or custom vendor-defined characteristics.\n\n***\n\n### `serviceUUID: string | null`\n\nThe UUID of the service that contains this characteristic. May be `null` if the service is not known or not yet discovered.\n\n***\n\n### `properties: BluetoothCharacteristicProperty[]`\n\nAn array of supported operations for this characteristic. These define how the characteristic can be interacted with (read, write, notify, etc.).\n\n#### Available Values (`BluetoothCharacteristicProperty`):\n\n| Property                       | Description                                       |\n| ------------------------------ | ------------------------------------------------- |\n| `\"broadcast\"`                  | Supports broadcasting                             |\n| `\"read\"`                       | Supports reading                                  |\n| `\"writeWithoutResponse\"`       | Supports writing without requiring acknowledgment |\n| `\"write\"`                      | Supports writing with response                    |\n| `\"notify\"`                     | Supports notification when value changes          |\n| `\"indicate\"`                   | Supports indication with acknowledgment           |\n| `\"authenticatedSignedWrites\"`  | Supports authenticated signed writes              |\n| `\"extendedProperties\"`         | Has extended properties (defined via descriptors) |\n| `\"notifyEncryptionRequired\"`   | Notification requires an encrypted connection     |\n| `\"indicateEncryptionRequired\"` | Indication requires an encrypted connection       |\n\n**Example:**\n\n```ts\nif (characteristic.properties.includes(\"read\")) {\n  const value = await peripheral.readValue(characteristic)\n}\n```\n\n***\n\n### `isNotifying: boolean`\n\nIndicates whether notifications or indications are currently enabled for the characteristic.\n\n- `true`: Notifications or indications are active\n- `false`: Notifications are not active\n\n***\n\n### `value: Data | null`\n\nThe current value of the characteristic, as a `Data` object.\n\n- May be `null` if the value has not yet been read or written.\n- Use `peripheral.readValue(characteristic)` to fetch the latest value.\n\n***\n\n## 2. Attribute Permissions\n\nAlthough not directly present in the characteristic interface, attributes may be configured with permissions when used in a Peripheral (GATT Server) role.\n\n### `BluetoothAttributePermissions` (Enum)\n\n| Permission                  | Description                               |\n| --------------------------- | ----------------------------------------- |\n| `\"readable\"`                | The attribute can be read                 |\n| `\"writeable\"`               | The attribute can be written              |\n| `\"readEncryptionRequired\"`  | Requires an encrypted connection to read  |\n| `\"writeEncryptionRequired\"` | Requires an encrypted connection to write |\n\n***\n\n## 3. Usage Examples\n\n### Read from a characteristic (requires `\"read\"`)\n\n```ts\nif (characteristic.properties.includes(\"read\")) {\n  const value = await peripheral.readValue(characteristic)\n  console.log(\"Value:\", value?.toRawString())\n}\n```\n\n***\n\n### Write to a characteristic\n\n```ts\nconst data = Data.fromRawString(\"COMMAND\")\nif (characteristic.properties.includes(\"writeWithoutResponse\")) {\n  await peripheral.writeValue(characteristic, data, \"withoutResponse\")\n} else if (characteristic.properties.includes(\"write\")) {\n  await peripheral.writeValue(characteristic, data, \"withResponse\")\n}\n```\n\n***\n\n### Subscribe to notifications\n\n```ts\nif (characteristic.properties.includes(\"notify\")) {\n  await peripheral.subscribe(characteristic, (error, value) => {\n    if (!error && value) {\n      console.log(\"Notification received:\", value.toHexString())\n    }\n  })\n}\n```\n\n***\n\n### Unsubscribe from notifications\n\n```ts\nawait peripheral.unsubscribe(characteristic)\n```\n\n***\n\n## 4. Best Practices and Notes\n\n- Always call `discoverCharacteristics(service)` before interacting with any characteristic.\n- Do not assume all characteristics support read/write; check `properties` before performing operations.\n- When subscribing to notifications or indications, you must explicitly call `subscribe()` and later `unsubscribe()` to clean up.\n- For `\"writeWithoutResponse\"` operations, use `canSendWriteWithoutResponse` to control flow rate.\n- Before writing, use `maxWriteValueLength()` to ensure the data size is within limits.\n","routePath":"/doc/Device Capabilities/Bluetooth/BluetoothCharacteristic","lang":"en","toc":[{"id":"1-properties","text":"1. Properties","depth":2,"charIndex":455},{"id":"uuid-string","text":"`uuid: string`","depth":3,"charIndex":473},{"id":"serviceuuid-string--null","text":"`serviceUUID: string | null`","depth":3,"charIndex":678},{"id":"properties-bluetoothcharacteristicproperty","text":"`properties: BluetoothCharacteristicProperty[]`","depth":3,"charIndex":842},{"id":"available-values-bluetoothcharacteristicproperty","text":"Available Values (`BluetoothCharacteristicProperty`):","depth":4,"charIndex":1042},{"id":"isnotifying-boolean","text":"`isNotifying: boolean`","depth":3,"charIndex":2288},{"id":"value-data--null","text":"`value: Data | null`","depth":3,"charIndex":2506},{"id":"2-attribute-permissions","text":"2. Attribute Permissions","depth":2,"charIndex":2735},{"id":"bluetoothattributepermissions-enum","text":"`BluetoothAttributePermissions` (Enum)","depth":3,"charIndex":2920},{"id":"3-usage-examples","text":"3. Usage Examples","depth":2,"charIndex":3426},{"id":"read-from-a-characteristic-requires-read","text":"Read from a characteristic (requires `\"read\"`)","depth":3,"charIndex":3448},{"id":"write-to-a-characteristic","text":"Write to a characteristic","depth":3,"charIndex":3673},{"id":"subscribe-to-notifications","text":"Subscribe to notifications","depth":3,"charIndex":4028},{"id":"unsubscribe-from-notifications","text":"Unsubscribe from notifications","depth":3,"charIndex":4298},{"id":"4-best-practices-and-notes","text":"4. Best Practices and Notes","depth":2,"charIndex":4395}],"frontmatter":{},"version":"","description":"The BluetoothCharacteristic interface represents a Bluetooth Low Energy (BLE) characteristic, which is the fundamental data unit in a BLE service. A characteristic exposes a specific piece of data and supports operations such as reading, writing, or subscribing to notifications."},{"title":"BluetoothPeripheral <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# BluetoothPeripheral \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `BluetoothPeripheral` interface represents a Bluetooth Low Energy (BLE) peripheral device. It provides properties and methods for interacting with the device, including connecting, discovering services and characteristics, reading/writing values, and subscribing to notifications.\n\n***\n\n## Properties (Read-only)\n\n### `id: string`\n\nA unique identifier (UUID string) for the peripheral. It remains constant across app launches and can be used to identify and reconnect to the device.\n\n***\n\n### `name: string | null`\n\nThe name of the peripheral device, or `null` if not available (e.g., if not broadcast).\n\n***\n\n### `isConnected: boolean`\n\nIndicates whether the peripheral is currently connected.\n\n- `true`: Connected and ready for communication\n- `false`: Not connected or disconnected\n\n***\n\n### `canSendWriteWithoutResponse: boolean`\n\nIndicates whether the peripheral is ready to send write requests without waiting for a response.\n\n- `true`: Supports fast, unacknowledged writes (`writeWithoutResponse`)\n- `false`: Requires response before next write\n\nThe `onReadyToSendWriteWithoutResponse` callback is triggered when this changes to `true`.\n\n***\n\n### `ancsAuthorized: boolean`\n\nIndicates whether the peripheral is authorized to use Apple Notification Center Service (ANCS). Relevant only for peripherals that support ANCS.\n\n***\n\n### `services: BluetoothService[] | null`\n\nThe list of services discovered on the peripheral. `null` if `discoverServices()` has not been called yet.\n\n***\n\n## Event Handlers\n\n### `onConnected: (() => void) | null`\n\nCalled when the peripheral is successfully connected.\n\n***\n\n### `onDisconnected: ((error: Error | null, isReconnecting: boolean) => void) | null`\n\nCalled when the peripheral is disconnected.\n\n- `error`: An error object if the disconnection was unexpected, or `null` if intentional\n- `isReconnecting`: `true` if the system is attempting to reconnect automatically\n\n***\n\n### `onConnectFailed: ((error: Error) => void) | null`\n\nCalled when the peripheral fails to connect.\n\n***\n\n### `onNameChanged: ((name: string | null) => void) | null`\n\nCalled when the peripheral's name changes.\n\n***\n\n### `onDiscoverServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null`\n\nCalled after calling `discoverServices()`.\n\n***\n\n### `onDiscoverCharacteristics: ((error: Error | null, characteristics: BluetoothCharacteristic[] | null) => void) | null`\n\nCalled after calling `discoverCharacteristics()`.\n\n***\n\n### `onDiscoverIncludedServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null`\n\nCalled after calling `discoverIncludedServices()`.\n\n***\n\n### `onReadyToSendWriteWithoutResponse: (() => void) | null`\n\nCalled when the peripheral is ready to send more write requests without response.\n\n***\n\n## Methods\n\n### `readValue(characteristic: BluetoothCharacteristic): Promise<Data>`\n\nReads the value of a given characteristic.\n\n- **Parameters**:\n\n  - `characteristic`: The characteristic to read from\n- **Returns**: A `Promise<Data>` containing the value\n\n***\n\n### `maxWriteValueLength(writeType: \"withResponse\" | \"withoutResponse\"): number`\n\nGets the maximum number of bytes that can be written in a single operation.\n\n- **Parameters**:\n\n  - `writeType`: `\"withResponse\"` or `\"withoutResponse\"`\n- **Returns**: A `number` representing the max write size\n\n***\n\n### `writeValue(characteristic, value, writeType): Promise<void>`\n\nWrites data to a characteristic.\n\n- **Parameters**:\n\n  - `characteristic`: Target characteristic\n  - `value`: The data to write (`Data`)\n  - `writeType`: `\"withResponse\"` or `\"withoutResponse\"`\n- **Returns**: `Promise<void>`\n\n***\n\n### `subscribe(characteristic, handler): Promise<void>`\n\nSubscribes to notifications or indications from a characteristic.\n\n- **Requirements**: The characteristic must support `\"notify\"` or `\"indicate\"`\n- **Parameters**:\n\n  - `characteristic`: Target characteristic\n  - `handler(error, value)`: Callback triggered on value change\n\n    - `error`: Error object if any\n    - `value`: New value as `Data`\n- **Returns**: `Promise<void>`\n\n***\n\n### `unsubscribe(characteristic): Promise<void>`\n\nUnsubscribes from notifications for a characteristic.\n\n- **Parameters**:\n\n  - `characteristic`: Target characteristic\n- **Returns**: `Promise<void>`\n\n***\n\n### `discoverServices(serviceUUIDs?: string[]): Promise<void>`\n\nDiscovers the services available on the peripheral.\n\n- **Parameters**:\n\n  - `serviceUUIDs`: Optional list of service UUIDs to filter\n- **Returns**: `Promise<void>`\n\n***\n\n### `discoverIncludedServices(service, includedServiceUUIDs?): Promise<void>`\n\nDiscovers included services within a service.\n\n- **Parameters**:\n\n  - `service`: The parent service\n  - `includedServiceUUIDs`: Optional list of included service UUIDs\n- **Returns**: `Promise<void>`\n\n***\n\n### `discoverCharacteristics(service, characteristicUUIDs?): Promise<void>`\n\nDiscovers characteristics within a service.\n\n- **Parameters**:\n\n  - `service`: The target service\n  - `characteristicUUIDs`: Optional list of characteristic UUIDs\n- **Returns**: `Promise<void>`\n\n***\n\n### `readRSSI(): Promise<number>`\n\nReads the current Received Signal Strength Indicator (RSSI).\n\n- **Returns**: A `Promise<number>` representing signal strength in dBm\n\n***\n\n## Examples\n\n### Connect and Read Characteristics\n\n```ts\nawait BluetoothCentralManager.connect(peripheral)\nawait peripheral.discoverServices()\n\nfor (const service of peripheral.services ?? []) {\n  await peripheral.discoverCharacteristics(service)\n  for (const char of service.characteristics ?? []) {\n    if (char.properties.includes(\"read\")) {\n      const value = await peripheral.readValue(char)\n      console.log(\"Value:\", value?.toRawString())\n    }\n  }\n}\n```\n\n***\n\n### Write Value and Subscribe\n\n```ts\nconst data = Data.fromRawString(\"hello\")\nawait peripheral.writeValue(characteristic, data, \"withResponse\")\n\nawait peripheral.subscribe(characteristic, (error, value) => {\n  if (!error && value) {\n    console.log(\"Notification:\", value.toHexString())\n  }\n})\n```\n\n***\n\n## Notes\n\n- Always call `discoverServices()` and `discoverCharacteristics()` before interacting with a peripheral’s data.\n- Be sure to `unsubscribe()` when notifications are no longer needed.\n- Avoid writing when `canSendWriteWithoutResponse` is `false`.\n","routePath":"/doc/Device Capabilities/Bluetooth/BluetoothPeripheral","lang":"en","toc":[{"id":"properties-read-only","text":"Properties (Read-only)","depth":2,"charIndex":454},{"id":"id-string","text":"`id: string`","depth":3,"charIndex":481},{"id":"name-string--null","text":"`name: string | null`","depth":3,"charIndex":656},{"id":"isconnected-boolean","text":"`isConnected: boolean`","depth":3,"charIndex":777},{"id":"cansendwritewithoutresponse-boolean","text":"`canSendWriteWithoutResponse: boolean`","depth":3,"charIndex":958},{"id":"ancsauthorized-boolean","text":"`ancsAuthorized: boolean`","depth":3,"charIndex":1317},{"id":"services-bluetoothservice--null","text":"`services: BluetoothService[] | null`","depth":3,"charIndex":1499},{"id":"event-handlers","text":"Event Handlers","depth":2,"charIndex":1655},{"id":"onconnected---void--null","text":"`onConnected: (() => void) | null`","depth":3,"charIndex":1674},{"id":"ondisconnected-error-error--null-isreconnecting-boolean--void--null","text":"`onDisconnected: ((error: Error | null, isReconnecting: boolean) => void) | null`","depth":3,"charIndex":1774},{"id":"onconnectfailed-error-error--void--null","text":"`onConnectFailed: ((error: Error) => void) | null`","depth":3,"charIndex":2083},{"id":"onnamechanged-name-string--null--void--null","text":"`onNameChanged: ((name: string | null) => void) | null`","depth":3,"charIndex":2190},{"id":"ondiscoverservices-error-error--null-services-bluetoothservice--null--void--null","text":"`onDiscoverServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null`","depth":3,"charIndex":2300},{"id":"ondiscovercharacteristics-error-error--null-characteristics-bluetoothcharacteristic--null--void--null","text":"`onDiscoverCharacteristics: ((error: Error | null, characteristics: BluetoothCharacteristic[] | null) => void) | null`","depth":3,"charIndex":2452},{"id":"ondiscoverincludedservices-error-error--null-services-bluetoothservice--null--void--null","text":"`onDiscoverIncludedServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null`","depth":3,"charIndex":2632},{"id":"onreadytosendwritewithoutresponse---void--null","text":"`onReadyToSendWriteWithoutResponse: (() => void) | null`","depth":3,"charIndex":2800},{"id":"methods","text":"Methods","depth":2,"charIndex":2950},{"id":"readvaluecharacteristic-bluetoothcharacteristic-promisedata","text":"`readValue(characteristic: BluetoothCharacteristic): Promise<Data>`","depth":3,"charIndex":2962},{"id":"maxwritevaluelengthwritetype-withresponse--withoutresponse-number","text":"`maxWriteValueLength(writeType: \"withResponse\" | \"withoutResponse\"): number`","depth":3,"charIndex":3212},{"id":"writevaluecharacteristic-value-writetype-promisevoid","text":"`writeValue(characteristic, value, writeType): Promise<void>`","depth":3,"charIndex":3511},{"id":"subscribecharacteristic-handler-promisevoid","text":"`subscribe(characteristic, handler): Promise<void>`","depth":3,"charIndex":3809},{"id":"unsubscribecharacteristic-promisevoid","text":"`unsubscribe(characteristic): Promise<void>`","depth":3,"charIndex":4247},{"id":"discoverservicesserviceuuids-string-promisevoid","text":"`discoverServices(serviceUUIDs?: string[]): Promise<void>`","depth":3,"charIndex":4452},{"id":"discoverincludedservicesservice-includedserviceuuids-promisevoid","text":"`discoverIncludedServices(service, includedServiceUUIDs?): Promise<void>`","depth":3,"charIndex":4686},{"id":"discovercharacteristicsservice-characteristicuuids-promisevoid","text":"`discoverCharacteristics(service, characteristicUUIDs?): Promise<void>`","depth":3,"charIndex":4970},{"id":"readrssi-promisenumber","text":"`readRSSI(): Promise<number>`","depth":3,"charIndex":5247},{"id":"examples","text":"Examples","depth":2,"charIndex":5421},{"id":"connect-and-read-characteristics","text":"Connect and Read Characteristics","depth":3,"charIndex":5434},{"id":"write-value-and-subscribe","text":"Write Value and Subscribe","depth":3,"charIndex":5891},{"id":"notes","text":"Notes","depth":2,"charIndex":6195}],"frontmatter":{},"version":"","description":"The BluetoothPeripheral interface represents a Bluetooth Low Energy (BLE) peripheral device. It provides properties and methods for interacting with the device, including connecting, discovering services and characteristics, reading/writing values, and subscribing to notifications."},{"title":"BluetoothPeripheralManager <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# BluetoothPeripheralManager \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `BluetoothPeripheralManager` API enables your device to act as a Bluetooth Low Energy (BLE) peripheral. It allows you to:\n\n- Advertise device name and service UUIDs\n- Add or remove services with characteristics\n- Handle read and write requests from central devices\n- Notify subscribed centrals of characteristic value changes\n- Manage connection parameters such as connection latency\n\nThis API is ideal for building custom sensor devices, BLE peripheral simulators, controllers, and similar use cases.\n\n***\n\n## Core Status Property\n\n### `isAdvertising: Promise<boolean>`\n\nReturns whether the device is currently advertising as a peripheral.\n\n```ts\nconst advertising = await BluetoothPeripheralManager.isAdvertising\nconsole.log(advertising ? \"Advertising\" : \"Not advertising\")\n```\n\n***\n\n## Advertising Control\n\n### `startAdvertising(advertisementData: { localName?: string; serviceUUIDs?: string[] }): Promise<void>`\n\nBegins BLE advertising with optional device name and service UUIDs.\n\n```ts\nawait BluetoothPeripheralManager.startAdvertising({\n  localName: \"MyPeripheral\",\n  serviceUUIDs: [\"1234\", \"ABCD\"]\n})\n```\n\n***\n\n### `stopAdvertising(): Promise<void>`\n\nStops ongoing BLE advertising.\n\n```ts\nawait BluetoothPeripheralManager.stopAdvertising()\n```\n\n***\n\n## Service Management\n\n### `addService(service): Promise<void>`\n\nAdds a service and its characteristics to the peripheral.\n\n**Parameters:**\n\n```ts\n{\n  uuid: string,\n  characteristics: Array<{\n    uuid: string,\n    properties: string[], // e.g., [\"read\", \"notify\"]\n    permissions: string[], // e.g., [\"readable\"]\n    value?: Data\n  }>\n}\n```\n\n**Example:**\n\n```ts\nawait BluetoothPeripheralManager.addService({\n  uuid: \"180F\",\n  characteristics: [\n    {\n      uuid: \"2A19\",\n      properties: [\"read\", \"notify\"],\n      permissions: [\"readable\"],\n      value: Data.fromIntArray([85]) // 85% battery\n    }\n  ]\n})\n```\n\n***\n\n### `removeService(serviceUUID: string): Promise<void>`\n\nRemoves a previously added service by its UUID.\n\n***\n\n### `removeAllServices(): Promise<void>`\n\nRemoves all services added by the current script.\n\n***\n\n## Event Handlers for Central Interaction\n\n### `onRestoreState: ((state) => void) | null`\n\nCalled when the system restores your script due to a background BLE session. Useful for restoring service and advertising state.\n\n```ts\nBluetoothPeripheralManager.onRestoreState = (state) => {\n  console.log(\"Restored state. Services count:\", state.services.length)\n}\n```\n\n```ts\ntype RestoreState = {\n  services: BluetoothServiceInfo[]\n  advertisementData: BluetoothAdvertisementData\n}\n```\n\n***\n\n### `onReadyToUpdateSubscribers: (() => void) | null`\n\nCalled when the system's transmission queue is cleared and ready to send notifications again after a previous failure due to queue congestion.\n\n```ts\nBluetoothPeripheralManager.onReadyToUpdateSubscribers = () => {\n  console.log(\"Ready to resend notifications\")\n}\n```\n\n***\n\n### `onReadCharacteristicValue: (characteristicId, offset, central) => Promise<{result, value}>`\n\nInvoked when a remote central requests to read a characteristic.\n\nIf not implemented, the system returns `readNotPermitted`.\n\n```ts\nBluetoothPeripheralManager.onReadCharacteristicValue = async (id, offset, central) => {\n  if (id === \"2A19\") {\n    return {\n      result: BluetoothATTResponseCode.success,\n      value: Data.fromIntArray([85]) // battery level\n    }\n  }\n  return { result: BluetoothATTResponseCode.attributeNotFound }\n}\n```\n\n**Signature:**\n\n```ts\n(\n  characteristicId: string,\n  offset: number,\n  central: {\n    id: string,\n    maximumUpdateValueLength: number\n  }\n) => Promise<{\n  result: BluetoothATTResponseCode,\n  value?: Data | null\n}>\n```\n\n***\n\n### `onWriteCharacteristicValue: (characteristicId, offset, value, central) => Promise<BluetoothATTResponseCode>`\n\nInvoked when a remote central attempts to write to a characteristic.\n\nIf not implemented, the system returns `writeNotPermitted`.\n\n```ts\nBluetoothPeripheralManager.onWriteCharacteristicValue = async (id, offset, value, central) => {\n  console.log(`Write request to ${id}:`, value.toIntArray())\n  if (id === \"2A19\") {\n    return BluetoothATTResponseCode.success\n  }\n  return BluetoothATTResponseCode.attributeNotFound\n}\n```\n\n**Signature:**\n\n```ts\n(\n  characteristicId: string,\n  offset: number,\n  value: Data,\n  central: {\n    id: string,\n    maximumUpdateValueLength: number\n  }\n) => Promise<BluetoothATTResponseCode>\n```\n\n***\n\n### `onSubscribe: (characteristicId, central) => void`\n\nCalled when a central subscribes to a characteristic that supports notifications or indications.\n\n```ts\nBluetoothPeripheralManager.onSubscribe = (id, central) => {\n  console.log(`Central ${central.id} subscribed to ${id}`)\n}\n```\n\n***\n\n### `onUnsubscribe: (characteristicId, central) => void`\n\nCalled when a central unsubscribes from a characteristic.\n\n```ts\nBluetoothPeripheralManager.onUnsubscribe = (id, central) => {\n  console.log(`Central ${central.id} unsubscribed from ${id}`)\n}\n```\n\n***\n\n## Notifications and Subscriptions\n\n### `getSubscribers(characteristicId: string): Promise<Central[]>`\n\nReturns a list of central devices currently subscribed to a given characteristic.\n\nEach item:\n\n```ts\n{\n  id: string,\n  maximumUpdateValueLength: number\n}\n```\n\n***\n\n### `updateValue(characteristicId: string, value: Data, options?): Promise<boolean>`\n\nSends a notification or indication to all subscribed centrals (or a specified subset) with the updated characteristic value.\n\n**Returns:**\n\n- `true`: Successfully sent\n- `false`: Queue is full — wait for `onReadyToUpdateSubscribers` before retrying\n\n***\n\n## Connection Parameters\n\n### `setDesiredConnectionLatency(centralId: string, latency): Promise<void>`\n\nSets the preferred connection latency for a specific central device.\n\n- `\"low\"` – Faster interaction, higher power usage\n- `\"medium\"` – Balanced\n- `\"high\"` – Lower power usage, less frequent interaction\n\n***\n\n## `BluetoothATTResponseCode` Enumeration\n\nDefines response codes for read/write operations:\n\n| Name                            | Value | Meaning                        |\n| ------------------------------- | ----- | ------------------------------ |\n| `success`                       | 0     | Operation succeeded            |\n| `invalidHandle`                 | 1     | Invalid handle                 |\n| `readNotPermitted`              | 2     | Read not permitted             |\n| `writeNotPermitted`             | 3     | Write not permitted            |\n| `invalidPdu`                    | 4     | Invalid PDU                    |\n| `insufficientAuthentication`    | 5     | Not authenticated              |\n| `requestNotSupported`           | 6     | Request not supported          |\n| `invalidOffset`                 | 7     | Invalid offset                 |\n| `insufficientAuthorization`     | 8     | Not authorized                 |\n| `prepareQueueFull`              | 9     | Prepare queue is full          |\n| `attributeNotFound`             | 10    | Attribute not found            |\n| `attributeNotLong`              | 11    | Attribute not long             |\n| `insufficientEncryptionKeySize` | 12    | Encryption key size too small  |\n| `invalidAttributeValueLength`   | 13    | Invalid attribute value length |\n| `unlikelyError`                 | 14    | Unlikely error occurred        |\n| `insufficientEncryption`        | 15    | Encryption required            |\n| `unsupportedGroupType`          | 16    | Unsupported group type         |\n| `insufficientResources`         | 17    | Insufficient resources         |\n\n***\n\n## Example: Broadcasting a Battery Service\n\n```ts\nawait BluetoothPeripheralManager.addService({\n  uuid: \"180F\",\n  characteristics: [\n    {\n      uuid: \"2A19\",\n      properties: [\"read\", \"notify\"],\n      permissions: [\"readable\"],\n      value: Data.fromIntArray([100]) // Battery level 100%\n    }\n  ]\n})\n\nawait BluetoothPeripheralManager.startAdvertising({\n  localName: \"BatteryPeripheral\",\n  serviceUUIDs: [\"180F\"]\n})\n\nBluetoothPeripheralManager.onReadCharacteristicValue = async (id, offset, central) => {\n  return { result: BluetoothATTResponseCode.success, value: Data.fromIntArray([90]) }\n}\n```\n","routePath":"/doc/Device Capabilities/Bluetooth/BluetoothPeripheralManager","lang":"en","toc":[{"id":"core-status-property","text":"Core Status Property","depth":2,"charIndex":682},{"id":"isadvertising-promiseboolean","text":"`isAdvertising: Promise<boolean>`","depth":3,"charIndex":707},{"id":"advertising-control","text":"Advertising Control","depth":2,"charIndex":960},{"id":"startadvertisingadvertisementdata--localname-string-serviceuuids-string--promisevoid","text":"`startAdvertising(advertisementData: { localName?: string; serviceUUIDs?: string[] }): Promise<void>`","depth":3,"charIndex":984},{"id":"stopadvertising-promisevoid","text":"`stopAdvertising(): Promise<void>`","depth":3,"charIndex":1293},{"id":"service-management","text":"Service Management","depth":2,"charIndex":1432},{"id":"addserviceservice-promisevoid","text":"`addService(service): Promise<void>`","depth":3,"charIndex":1455},{"id":"removeserviceserviceuuid-string-promisevoid","text":"`removeService(serviceUUID: string): Promise<void>`","depth":3,"charIndex":2049},{"id":"removeallservices-promisevoid","text":"`removeAllServices(): Promise<void>`","depth":3,"charIndex":2160},{"id":"event-handlers-for-central-interaction","text":"Event Handlers for Central Interaction","depth":2,"charIndex":2258},{"id":"onrestorestate-state--void--null","text":"`onRestoreState: ((state) => void) | null`","depth":3,"charIndex":2301},{"id":"onreadytoupdatesubscribers---void--null","text":"`onReadyToUpdateSubscribers: (() => void) | null`","depth":3,"charIndex":2744},{"id":"onreadcharacteristicvalue-characteristicid-offset-central--promiseresult-value","text":"`onReadCharacteristicValue: (characteristicId, offset, central) => Promise<{result, value}>`","depth":3,"charIndex":3072},{"id":"onwritecharacteristicvalue-characteristicid-offset-value-central--promisebluetoothattresponsecode","text":"`onWriteCharacteristicValue: (characteristicId, offset, value, central) => Promise<BluetoothATTResponseCode>`","depth":3,"charIndex":3835},{"id":"onsubscribe-characteristicid-central--void","text":"`onSubscribe: (characteristicId, central) => void`","depth":3,"charIndex":4578},{"id":"onunsubscribe-characteristicid-central--void","text":"`onUnsubscribe: (characteristicId, central) => void`","depth":3,"charIndex":4869},{"id":"notifications-and-subscriptions","text":"Notifications and Subscriptions","depth":2,"charIndex":5129},{"id":"getsubscriberscharacteristicid-string-promisecentral","text":"`getSubscribers(characteristicId: string): Promise<Central[]>`","depth":3,"charIndex":5165},{"id":"updatevaluecharacteristicid-string-value-data-options-promiseboolean","text":"`updateValue(characteristicId: string, value: Data, options?): Promise<boolean>`","depth":3,"charIndex":5397},{"id":"connection-parameters","text":"Connection Parameters","depth":2,"charIndex":5738},{"id":"setdesiredconnectionlatencycentralid-string-latency-promisevoid","text":"`setDesiredConnectionLatency(centralId: string, latency): Promise<void>`","depth":3,"charIndex":5764},{"id":"bluetoothattresponsecode-enumeration","text":"`BluetoothATTResponseCode` Enumeration","depth":2,"charIndex":6051},{"id":"example-broadcasting-a-battery-service","text":"Example: Broadcasting a Battery Service","depth":2,"charIndex":7691}],"frontmatter":{},"version":"","description":"The BluetoothPeripheralManager API enables your device to act as a Bluetooth Low Energy (BLE) peripheral. It allows you to: Advertise device name and service UUIDsAdd or remove services with characteristicsHandle read and write requests from central devicesNotify subscribed centrals of characteristic value changesManage connection parameters such as connection latency This API is ideal for building custom sensor devices, BLE peripheral simulators, controllers, and similar use cases."},{"title":"BluetoothService <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# BluetoothService \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `BluetoothService` interface represents a Bluetooth Low Energy (BLE) service. A service is a logical grouping of related characteristics and possibly other included services. Services are used to define the functionality of a peripheral device, such as Heart Rate Monitoring or Battery Level Reporting.\n\n***\n\n## Overview\n\nServices provide structure to BLE communication. Each service is identified by a universally unique identifier (UUID) and may include:\n\n- Characteristics: Data points and operations (e.g., read/write/notify)\n- Included services: References to other services\n\n***\n\n## Properties\n\n### `uuid: string`\n\nThe UUID of the service.\n\n- This UUID identifies the type of service (e.g., standard service like Battery Service `\"180F\"` or custom UUID for vendor-defined functionality).\n- You can use this to filter or recognize services.\n\n***\n\n### `peripheralId: string | null`\n\nThe identifier of the peripheral that contains this service.\n\n- If the peripheral context is not known or no longer available, this value may be `null`.\n\n***\n\n### `isPrimary: boolean`\n\nIndicates whether this is a primary or secondary service.\n\n- `true`: This is a primary service essential to the device's functionality\n- `false`: This is a secondary service typically used as a dependency of another service\n\n***\n\n### `includedServices: BluetoothService[] | null`\n\nAn array of included services referenced by this service.\n\n- Included services may be primary or secondary.\n- If not yet discovered, this value will be `null`.\n- You must call `discoverIncludedServices(service)` on the associated `BluetoothPeripheral` to populate this.\n\n***\n\n### `characteristics: BluetoothCharacteristic[] | null`\n\nThe characteristics contained in this service.\n\n- These define the operations (read, write, notify, etc.) and data exposed by the service.\n- If not yet discovered, this will be `null`.\n- You must call `discoverCharacteristics(service)` on the associated `BluetoothPeripheral` to populate this.\n\n***\n\n## Example\n\n### Discover characteristics in a service\n\n```ts\nawait peripheral.discoverServices()\nfor (const service of peripheral.services ?? []) {\n  console.log(\"Service UUID:\", service.uuid)\n\n  await peripheral.discoverCharacteristics(service)\n  for (const characteristic of service.characteristics ?? []) {\n    console.log(\"Characteristic UUID:\", characteristic.uuid)\n  }\n}\n```\n\n***\n\n### Discover included services\n\n```ts\nawait peripheral.discoverServices()\nfor (const service of peripheral.services ?? []) {\n  await peripheral.discoverIncludedServices(service)\n  for (const included of service.includedServices ?? []) {\n    console.log(\"Included Service UUID:\", included.uuid)\n  }\n}\n```\n\n***\n\n## Notes\n\n- All properties are read-only.\n- Services must be discovered before accessing characteristics or included services.\n- When working with included services, recursive discovery may be necessary if they contain their own dependencies.\n","routePath":"/doc/Device Capabilities/Bluetooth/BluetoothService","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":473},{"id":"properties","text":"Properties","depth":2,"charIndex":750},{"id":"uuid-string","text":"`uuid: string`","depth":3,"charIndex":765},{"id":"peripheralid-string--null","text":"`peripheralId: string | null`","depth":3,"charIndex":1016},{"id":"isprimary-boolean","text":"`isPrimary: boolean`","depth":3,"charIndex":1210},{"id":"includedservices-bluetoothservice--null","text":"`includedServices: BluetoothService[] | null`","depth":3,"charIndex":1466},{"id":"characteristics-bluetoothcharacteristic--null","text":"`characteristics: BluetoothCharacteristic[] | null`","depth":3,"charIndex":1793},{"id":"example","text":"Example","depth":2,"charIndex":2150},{"id":"discover-characteristics-in-a-service","text":"Discover characteristics in a service","depth":3,"charIndex":2162},{"id":"discover-included-services","text":"Discover included services","depth":3,"charIndex":2537},{"id":"notes","text":"Notes","depth":2,"charIndex":2847}],"frontmatter":{},"version":"","description":"The BluetoothService interface represents a Bluetooth Low Energy (BLE) service. A service is a logical grouping of related characteristics and possibly other included services. Services are used to define the functionality of a peripheral device, such as Heart Rate Monitoring or Battery Level Reporting."},{"title":"Calendar","content":"The `Calendar` API in the Scripting app provides access to iOS calendars, calendar accounts, and event/reminder management.\\\nDevelopers can retrieve default calendars, create new ones, list calendars supporting specific entity types, and manage calendar properties.\n\n***\n\n## Type Definitions\n\n### CalendarType\n\nRepresents types of calendars:\n\n| Value            | Description               |\n| :--------------- | :------------------------ |\n| `\"birthday\"`     | Birthday calendar         |\n| `\"calDAV\"`       | CalDAV protocol calendar  |\n| `\"exchange\"`     | Exchange account calendar |\n| `\"local\"`        | Local calendar            |\n| `\"subscription\"` | Subscription calendar     |\n\n### CalendarSourceType\n\nRepresents the type of calendar account source:\n\n| Value          | Description        |\n| :------------- | :----------------- |\n| `\"birthdays\"`  | Birthday account   |\n| `\"calDAV\"`     | CalDAV account     |\n| `\"exchange\"`   | Exchange account   |\n| `\"local\"`      | Local account      |\n| `\"mobileMe\"`   | MobileMe account   |\n| `\"subscribed\"` | Subscribed account |\n\n### CalendarEventAvailability\n\nRepresents event availability settings:\n\n| Value           | Description |\n| :-------------- | :---------- |\n| `\"busy\"`        | Busy        |\n| `\"free\"`        | Free        |\n| `\"tentative\"`   | Tentative   |\n| `\"unavailable\"` | Unavailable |\n\n### CalendarEntityType\n\nRepresents types of entities calendars can manage:\n\n| Value        | Description |\n| :----------- | :---------- |\n| `\"event\"`    | Event       |\n| `\"reminder\"` | Reminder    |\n\n***\n\n## Class: CalendarSource\n\nRepresents a calendar account source (e.g., Local, Exchange).\n\n### Properties\n\n| Property     | Type                 | Description                          |\n| :----------- | :------------------- | :----------------------------------- |\n| `type`       | `CalendarSourceType` | The account source type              |\n| `title`      | `string`             | The account source title             |\n| `identifier` | `string`             | The account source unique identifier |\n\n### Methods\n\n#### `getCalendars(entityType: CalendarEntityType): Promise<Calendar[]>`\n\nGets the list of calendars for this source based on entity type.\n\n- **Parameters**\n  - `entityType: CalendarEntityType` — The entity type to retrieve.\n- **Returns**\n  - `Promise<Calendar[]>` — An array of calendar objects.\n\n***\n\n## Class: Calendar\n\nRepresents a calendar object that manages events and reminders.\n\n### Properties\n\n| Property                       | Type                        | Description                                |\n| :----------------------------- | :-------------------------- | :----------------------------------------- |\n| `identifier`                   | `string`                    | Unique identifier of the calendar          |\n| `title`                        | `string`                    | Calendar title                             |\n| `color`                        | `Color`                     | Calendar color                             |\n| `type`                         | `CalendarType`              | Calendar type                              |\n| `source`                       | `CalendarSource`            | Calendar Source                            |\n| `allowedEntityTypes`           | `CalendarEntityType`        | Allowed entity types (`event`, `reminder`) |\n| `isForEvents`                  | `boolean`                   | Whether the calendar is for events         |\n| `isForReminders`               | `boolean`                   | Whether the calendar is for reminders      |\n| `allowsContentModifications`   | `boolean`                   | Whether modifications are allowed          |\n| `isSubscribed`                 | `boolean`                   | Whether the calendar is subscribed         |\n| `supportedEventAvailabilities` | `CalendarEventAvailability` | Supported event availabilities             |\n\n### Methods\n\n#### `remove(): Promise<void>`\n\nDeletes the calendar.\n\n#### `save(): Promise<void>`\n\nSaves changes to the calendar.\n\n#### `static defaultForEvents(): Promise<Calendar | null>`\n\nGets the default event calendar set by the system.\n\n#### `static defaultForReminders(): Promise<Calendar | null>`\n\nGets the default reminder calendar set by the system.\n\n#### `static forEvents(): Promise<Calendar[]>`\n\nLists all calendars that support events.\n\n#### `static forReminders(): Promise<Calendar[]>`\n\nLists all calendars that support reminders.\n\n#### `static create(options: { title: string, entityType: CalendarEntityType, sourceType: CalendarSourceType, color?: Color }): Promise<Calendar>`\n\nCreates a new calendar.\n\n- **Parameters**\n  - `title: string` — Calendar title\n  - `entityType: CalendarEntityType` — Supported entity type\n  - `sourceType: CalendarSourceType` — Account source type\n  - `color?: Color` — (Optional) Calendar color\n- **Returns**\n  - `Promise<Calendar>` — The newly created calendar.\n\n#### `static presentChooser(allowMultipleSelection?: boolean): Promise<Calendar[]>`\n\nPresents a calendar chooser view.\n\n- **Parameters**\n  - `allowMultipleSelection?: boolean` — Allow multiple selection, default `false`.\n- **Returns**\n  - `Promise<Calendar[]>` — Selected calendars.\n\n#### `static getSources(): CalendarSource[]`\n\nRetrieves all available calendar sources on the device.\n\n***\n\n## Example Code\n\n### Retrieve Default Event Calendar\n\n```tsx\nconst defaultEventCalendar = await Calendar.defaultForEvents()\nif (defaultEventCalendar) {\n  console.log(`Default event calendar: ${defaultEventCalendar.title}`)\n} else {\n  console.log('No default event calendar found')\n}\n```\n\n### Create a New Local Event Calendar\n\n```tsx\nconst newCalendar = await Calendar.create({\n  title: 'Workout Schedule',\n  entityType: 'event',\n  sourceType: 'local',\n  color: '#FF5733'\n})\n\nawait newCalendar.save()\nconsole.log(`Created new calendar: ${newCalendar.title}`)\n```\n\n### List All Event-Supporting Calendars\n\n```tsx\nconst eventCalendars = await Calendar.forEvents()\nfor (const calendar of eventCalendars) {\n  console.log(`Calendar: ${calendar.title}`)\n}\n```\n\n### Delete the First Event Calendar\n\n```tsx\nconst eventCalendars = await Calendar.forEvents()\nif (eventCalendars.length > 0) {\n  const calendarToRemove = eventCalendars[0]\n  await calendarToRemove.remove()\n  console.log(`Removed calendar: ${calendarToRemove.title}`)\n}\n```\n\n### Present Calendar Chooser\n\n```tsx\nconst selectedCalendars = await Calendar.presentChooser(true)\nfor (const calendar of selectedCalendars) {\n  console.log(`Selected calendar: ${calendar.title}`)\n}\n```\n","routePath":"/doc/Device Capabilities/Calendar","lang":"en","toc":[{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":272},{"id":"calendartype","text":"CalendarType","depth":3,"charIndex":293},{"id":"calendarsourcetype","text":"CalendarSourceType","depth":3,"charIndex":687},{"id":"calendareventavailability","text":"CalendarEventAvailability","depth":3,"charIndex":1081},{"id":"calendarentitytype","text":"CalendarEntityType","depth":3,"charIndex":1358},{"id":"class-calendarsource","text":"Class: CalendarSource","depth":2,"charIndex":1564},{"id":"properties","text":"Properties","depth":3,"charIndex":1653},{"id":"methods","text":"Methods","depth":3,"charIndex":2065},{"id":"getcalendarsentitytype-calendarentitytype-promisecalendar","text":"`getCalendars(entityType: CalendarEntityType): Promise<Calendar[]>`","depth":4,"charIndex":2078},{"id":"class-calendar","text":"Class: Calendar","depth":2,"charIndex":1564},{"id":"properties-1","text":"Properties","depth":3,"charIndex":2466},{"id":"methods-1","text":"Methods","depth":3,"charIndex":3913},{"id":"remove-promisevoid","text":"`remove(): Promise<void>`","depth":4,"charIndex":3926},{"id":"save-promisevoid","text":"`save(): Promise<void>`","depth":4,"charIndex":3981},{"id":"static-defaultforevents-promisecalendar--null","text":"`static defaultForEvents(): Promise<Calendar | null>`","depth":4,"charIndex":4043},{"id":"static-defaultforreminders-promisecalendar--null","text":"`static defaultForReminders(): Promise<Calendar | null>`","depth":4,"charIndex":4155},{"id":"static-forevents-promisecalendar","text":"`static forEvents(): Promise<Calendar[]>`","depth":4,"charIndex":4273},{"id":"static-forreminders-promisecalendar","text":"`static forReminders(): Promise<Calendar[]>`","depth":4,"charIndex":4363},{"id":"static-createoptions--title-string-entitytype-calendarentitytype-sourcetype-calendarsourcetype-color-color--promisecalendar","text":"`static create(options: { title: string, entityType: CalendarEntityType, sourceType: CalendarSourceType, color?: Color }): Promise<Calendar>`","depth":4,"charIndex":4459},{"id":"static-presentchooserallowmultipleselection-boolean-promisecalendar","text":"`static presentChooser(allowMultipleSelection?: boolean): Promise<Calendar[]>`","depth":4,"charIndex":4923},{"id":"static-getsources-calendarsource","text":"`static getSources(): CalendarSource[]`","depth":4,"charIndex":5207},{"id":"example-code","text":"Example Code","depth":2,"charIndex":5315},{"id":"retrieve-default-event-calendar","text":"Retrieve Default Event Calendar","depth":3,"charIndex":5332},{"id":"create-a-new-local-event-calendar","text":"Create a New Local Event Calendar","depth":3,"charIndex":5603},{"id":"list-all-event-supporting-calendars","text":"List All Event-Supporting Calendars","depth":3,"charIndex":5879},{"id":"delete-the-first-event-calendar","text":"Delete the First Event Calendar","depth":3,"charIndex":6070},{"id":"present-calendar-chooser","text":"Present Calendar Chooser","depth":3,"charIndex":6344}],"frontmatter":{},"version":"","description":"The Calendar API in the Scripting app provides access to iOS calendars, calendar accounts, and event/reminder management.Developers can retrieve default calendars, create new ones, list calendars supporting specific entity types, and manage calendar properties."},{"title":"CalendarEvent","content":"The `CalendarEvent` API enables creating, reading, editing, and managing events in the iOS calendar.\nDevelopers can configure event details such as title, time, location, participants, recurrence rules, alarms, availability, and structured locations, and can display system-provided interfaces for creating or editing events.\n\n***\n\n# 1. Types\n\n## EventParticipant\n\nRepresents an attendee of the event:\n\n- `isCurrentUser: boolean` – Indicates whether this attendee represents the current user\n- `name?: string` – Display name\n- `role: ParticipantRole` – The attendee’s role\n- `type: ParticipantType` – The type of attendee\n- `status: ParticipantStatus` – The attendee’s participation status\n\n### ParticipantRole\n\n- `chair`\n- `nonParticipant`\n- `optional`\n- `required`\n- `unknown`\n\n### ParticipantType\n\n- `group`\n- `person`\n- `resource`\n- `room`\n- `unknown`\n\n### ParticipantStatus\n\n- `unknown`\n- `pending`\n- `accepted`\n- `declined`\n- `tentative`\n- `delegated`\n- `completed`\n- `inProcess`\n\n***\n\n## EventAvailability\n\nIndicates how the event affects the user’s availability:\n\n- `notSupported`\n- `busy`\n- `free`\n- `tentative`\n- `unavailable`\n\n***\n\n## EventStructuredLocation\n\nDescribes a location that can be used for location-based alarms.\n\n- `title: string | null` – A name for the location\n- `geoLocation: LocationInfo | null` – Latitude and longitude\n- `radius: number` – Radius in meters for the geofence trigger\n\n***\n\n## AlarmProximity\n\nDescribes how a location alarm triggers:\n\n- `none`\n- `enter`\n- `leave`\n\n***\n\n# 2. EventAlarm\n\n`CalendarEvent` supports attaching one or more `EventAlarm` instances.\nAlarms may be:\n\n- absolute date alarms\n- relative alarms (relative to the start of the event)\n- location-based alarms using geofence triggers\n\nSee the EventAlarm documentation for detailed information.\n\n***\n\n# 3. CalendarEvent Class\n\n## Constructor\n\n```ts\nnew(): CalendarEvent\n```\n\nCreates an in-memory event instance.\nCall `save()` to persist it into the calendar.\n\n***\n\n# 4. Properties\n\n## General Information\n\n### identifier: string\n\nA unique identifier for the event.\n\n### title: string\n\nThe title of the event.\n\n### notes: string | null\n\nAdditional notes.\n\n### url: string | null\n\nA URL associated with the event.\n\n### calendar: Calendar | null\n\nThe calendar to which the event belongs.\nThis property cannot be set to `null`. To remove an event, use `remove()`.\n\n***\n\n## Time and Location\n\n### isAllDay: boolean\n\nIndicates whether the event lasts all day.\n\n### startDate: Date\n\nThe start date and time.\n\n### endDate: Date\n\nThe end date and time.\n\n### timeZone: string | null\n\nThe event’s time zone.\n\n### location: string | null\n\nA text description of the location.\n\n### structuredLocation: EventStructuredLocation | null\n\nA structured location that includes geolocation data for alarms.\n\n***\n\n## Event Metadata\n\n### creationDate: Date | null\n\nThe date when the event was created.\n\n### lastModifiedDate: Date | null\n\nThe date of the most recent modification.\n\n### occurrenceDate: Date\n\nFor recurring events, this is the original scheduled date of this specific occurrence.\n\n### isDetached: boolean\n\nIndicates whether this event represents a modified occurrence of a recurring series.\n\n***\n\n## Participants and Availability\n\n### attendees: EventParticipant\\[] | null\n\nAn array of attendees.\n\n### organizer: EventParticipant | null\n\nThe organizer of the event.\n\n### hasAttendees: boolean\n\nIndicates whether the event has attendees.\n\n### availability: EventAvailability\n\nIndicates the event’s impact on availability.\n\n***\n\n## Alarms\n\n### alarms: EventAlarm\\[] | null\n\nThe alarms associated with the event.\n\n### hasAlarm: boolean\n\nIndicates whether the event has any alarms.\n\n***\n\n## Recurrence\n\n### recurrenceRules: RecurrenceRule\\[] | null\n\nThe recurrence rules of the event.\n\n### hasRecurrenceRules: boolean\n\nIndicates whether the event has recurrence rules.\n\n***\n\n## Additional State Flags\n\n### hasNotes: boolean\n\nIndicates whether the event contains notes.\n\n### hasChanges: boolean\n\nIndicates whether the event or any nested objects contain unsaved changes.\n\n***\n\n# 5. Instance Methods\n\n## Alarm Management\n\n### addAlarm(alarm: EventAlarm): void\n\nAdds an alarm to the event.\n\n### removAlarm(alarm: EventAlarm): void\n\nRemoves an alarm from the event.\n(Note: The method name is `removAlarm`.)\n\n***\n\n## Recurrence Management\n\n### addRecurrenceRule(rule: RecurrenceRule): void\n\nAppends a recurrence rule.\n\n### removeRecurrenceRule(rule: RecurrenceRule): void\n\nRemoves a recurrence rule.\n\n***\n\n## Saving and Deleting\n\n### `save(): Promise<void>`\n\nSaves the event to the calendar.\n\n### `remove(): Promise<void>`\n\nRemoves the event from the calendar.\n\n***\n\n## Editing UI\n\n### `presentEditView(): Promise<EventEditViewAction>`\n\nDisplays the system event-editing interface and resolves with:\n\n- `saved`\n- `deleted`\n- `canceled`\n\n***\n\n# 6. Static Methods\n\n### `CalendarEvent.getAll(startDate: Date, endDate: Date, calendars?: Calendar[]): Promise<CalendarEvent[]>`\n\nFetches calendar events within a given date range.\n\n- Provide an array of calendars to restrict the search\n- Use `null` or omit the parameter to search all calendars\n\n***\n\n### `CalendarEvent.presentCreateView(): Promise<CalendarEvent | null>`\n\nDisplays the system interface for creating a new event.\n\n- Returns the created event if saved\n- Returns `null` if canceled\n\n***\n\n# 7. Usage Examples\n\n## Creating and Saving an Event\n\n```ts\nconst defaultCalendar = await Calendar.defaultForEvents()\nconst event = new CalendarEvent()\nevent.title = \"Team Meeting\"\nevent.calendar = defaultCalendar!\nevent.startDate = new Date(\"2024-01-15T09:00:00\")\nevent.endDate = new Date(\"2024-01-15T10:00:00\")\nevent.location = \"Conference Room\"\n\nawait event.save()\n```\n\n***\n\n## Adding a Recurrence Rule\n\n```ts\nconst rule = RecurrenceRule.create({\n  frequency: \"weekly\",\n  interval: 1,\n  daysOfTheWeek: [\"monday\", \"wednesday\", \"friday\"],\n  end: RecurrenceEnd.fromDate(new Date(\"2024-12-31\")),\n})\n\nevent.addRecurrenceRule(rule)\nawait event.save()\n```\n\n***\n\n## Adding an Alarm\n\n```ts\nconst alarm = EventAlarm.fromRelativeOffset(-600)\nevent.addAlarm(alarm)\nawait event.save()\n```\n\n***\n\n## Fetching Events\n\n```ts\nconst events = await CalendarEvent.getAll(\n  new Date(\"2024-01-01\"),\n   new Date(\"2024-01-31\")\n )\n\nfor (const e of events) {\n  console.log(`Event: ${e.title}, Starts: ${e.startDate}`)\n}\n```\n\n***\n\n## Presenting the Create View\n\n```ts\nconst created = await CalendarEvent.presentCreateView()\nif (created) {\n  console.log(\"Created event:\", created.title)\n}\n```\n\n***\n\n## Editing an Existing Event\n\n```ts\nconst result = await event.presentEditView()\nconsole.log(\"Edit action:\", result)\n```\n\n***\n\n## Removing an Event\n\n```ts\nawait event.remove()\nconsole.log(\"Event removed\")\n```\n\n***\n\n# 8. Additional Notes\n\n### Time Zone Considerations\n\nWhen working with events that span time zones, set `timeZone` explicitly to avoid incorrect scheduling or display.\n\n### Recurring Events\n\nEditing individual occurrences of a recurring event may produce a detached instance.\nUse `occurrenceDate` to determine the original date of the modified occurrence.\n\n### Attendees\n\nAttendee data depends on the calendar source (iCloud, Exchange, etc.) and may vary in availability.\n\n### Structured Location\n\nWhen using location-based alarms, the user must grant the necessary location permissions.\n","routePath":"/doc/Device Capabilities/CalendarEvent","lang":"en","toc":[{"id":"eventparticipant","text":"EventParticipant","depth":2,"charIndex":344},{"id":"participantrole","text":"ParticipantRole","depth":3,"charIndex":691},{"id":"participanttype","text":"ParticipantType","depth":3,"charIndex":780},{"id":"participantstatus","text":"ParticipantStatus","depth":3,"charIndex":857},{"id":"eventavailability","text":"EventAvailability","depth":2,"charIndex":992},{"id":"eventstructuredlocation","text":"EventStructuredLocation","depth":2,"charIndex":1143},{"id":"alarmproximity","text":"AlarmProximity","depth":2,"charIndex":1419},{"id":"constructor","text":"Constructor","depth":2,"charIndex":1837},{"id":"general-information","text":"General Information","depth":2,"charIndex":1992},{"id":"identifier-string","text":"identifier: string","depth":3,"charIndex":2016},{"id":"title-string","text":"title: string","depth":3,"charIndex":2076},{"id":"notes-string--null","text":"notes: string | null","depth":3,"charIndex":2120},{"id":"url-string--null","text":"url: string | null","depth":3,"charIndex":2165},{"id":"calendar-calendar--null","text":"calendar: Calendar | null","depth":3,"charIndex":2223},{"id":"time-and-location","text":"Time and Location","depth":2,"charIndex":2376},{"id":"isallday-boolean","text":"isAllDay: boolean","depth":3,"charIndex":2398},{"id":"startdate-date","text":"startDate: Date","depth":3,"charIndex":2465},{"id":"enddate-date","text":"endDate: Date","depth":3,"charIndex":2512},{"id":"timezone-string--null","text":"timeZone: string | null","depth":3,"charIndex":2555},{"id":"location-string--null","text":"location: string | null","depth":3,"charIndex":2608},{"id":"structuredlocation-eventstructuredlocation--null","text":"structuredLocation: EventStructuredLocation | null","depth":3,"charIndex":2674},{"id":"event-metadata","text":"Event Metadata","depth":2,"charIndex":2801},{"id":"creationdate-date--null","text":"creationDate: Date | null","depth":3,"charIndex":2820},{"id":"lastmodifieddate-date--null","text":"lastModifiedDate: Date | null","depth":3,"charIndex":2889},{"id":"occurrencedate-date","text":"occurrenceDate: Date","depth":3,"charIndex":2967},{"id":"isdetached-boolean","text":"isDetached: boolean","depth":3,"charIndex":3081},{"id":"participants-and-availability","text":"Participants and Availability","depth":2,"charIndex":3197},{"id":"attendees-eventparticipant--null","text":"attendees: EventParticipant[] | null","depth":3,"charIndex":-1},{"id":"organizer-eventparticipant--null","text":"organizer: EventParticipant | null","depth":3,"charIndex":3298},{"id":"hasattendees-boolean","text":"hasAttendees: boolean","depth":3,"charIndex":3367},{"id":"availability-eventavailability","text":"availability: EventAvailability","depth":3,"charIndex":3438},{"id":"alarms","text":"Alarms","depth":2,"charIndex":3527},{"id":"alarms-eventalarm--null","text":"alarms: EventAlarm[] | null","depth":3,"charIndex":-1},{"id":"hasalarm-boolean","text":"hasAlarm: boolean","depth":3,"charIndex":3611},{"id":"recurrence","text":"Recurrence","depth":2,"charIndex":3684},{"id":"recurrencerules-recurrencerule--null","text":"recurrenceRules: RecurrenceRule[] | null","depth":3,"charIndex":-1},{"id":"hasrecurrencerules-boolean","text":"hasRecurrenceRules: boolean","depth":3,"charIndex":3782},{"id":"additional-state-flags","text":"Additional State Flags","depth":2,"charIndex":3871},{"id":"hasnotes-boolean","text":"hasNotes: boolean","depth":3,"charIndex":3898},{"id":"haschanges-boolean","text":"hasChanges: boolean","depth":3,"charIndex":3966},{"id":"alarm-management","text":"Alarm Management","depth":2,"charIndex":4095},{"id":"addalarmalarm-eventalarm-void","text":"addAlarm(alarm: EventAlarm): void","depth":3,"charIndex":4116},{"id":"removalarmalarm-eventalarm-void","text":"removAlarm(alarm: EventAlarm): void","depth":3,"charIndex":4184},{"id":"recurrence-management","text":"Recurrence Management","depth":2,"charIndex":4305},{"id":"addrecurrencerulerule-recurrencerule-void","text":"addRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":4331},{"id":"removerecurrencerulerule-recurrencerule-void","text":"removeRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":4410},{"id":"saving-and-deleting","text":"Saving and Deleting","depth":2,"charIndex":4497},{"id":"save-promisevoid","text":"`save(): Promise<void>`","depth":3,"charIndex":4521},{"id":"remove-promisevoid","text":"`remove(): Promise<void>`","depth":3,"charIndex":4584},{"id":"editing-ui","text":"Editing UI","depth":2,"charIndex":4658},{"id":"presenteditview-promiseeventeditviewaction","text":"`presentEditView(): Promise<EventEditViewAction>`","depth":3,"charIndex":4673},{"id":"calendareventgetallstartdate-date-enddate-date-calendars-calendar-promisecalendarevent","text":"`CalendarEvent.getAll(startDate: Date, endDate: Date, calendars?: Calendar[]): Promise<CalendarEvent[]>`","depth":3,"charIndex":4854},{"id":"calendareventpresentcreateview-promisecalendarevent--null","text":"`CalendarEvent.presentCreateView(): Promise<CalendarEvent | null>`","depth":3,"charIndex":5136},{"id":"creating-and-saving-an-event","text":"Creating and Saving an Event","depth":2,"charIndex":5358},{"id":"adding-a-recurrence-rule","text":"Adding a Recurrence Rule","depth":2,"charIndex":5715},{"id":"adding-an-alarm","text":"Adding an Alarm","depth":2,"charIndex":5995},{"id":"fetching-events","text":"Fetching Events","depth":2,"charIndex":6122},{"id":"presenting-the-create-view","text":"Presenting the Create View","depth":2,"charIndex":6344},{"id":"editing-an-existing-event","text":"Editing an Existing Event","depth":2,"charIndex":6511},{"id":"removing-an-event","text":"Removing an Event","depth":2,"charIndex":6638},{"id":"time-zone-considerations","text":"Time Zone Considerations","depth":3,"charIndex":6749},{"id":"recurring-events","text":"Recurring Events","depth":3,"charIndex":6895},{"id":"attendees","text":"Attendees","depth":3,"charIndex":7083},{"id":"structured-location","text":"Structured Location","depth":3,"charIndex":7199}],"frontmatter":{},"version":"","description":"The CalendarEvent API enables creating, reading, editing, and managing events in the iOS calendar.\nDevelopers can configure event details such as title, time, location, participants, recurrence rules, alarms, availability, and structured locations, and can display system-provided interfaces for creating or editing events."},{"title":"Contact","content":"The `Contact` module in the Scripting app allows you to access and manage contacts on the device. You can create, query, update, and delete contacts, as well as manage contact groups and containers.\n\n## Overview of Data Structures\n\n| Type                             | Description                                                                  |\n| -------------------------------- | ---------------------------------------------------------------------------- |\n| **ContactInfo**                  | Represents detailed information of a single contact.                         |\n| **ContactContainer**             | Represents a contact storage container, such as local, Exchange, or CardDAV. |\n| **ContactGroup**                 | Represents a contact group for categorizing contacts.                        |\n| **ContactLabeledValue**          | A labeled value, such as phone number or email address.                      |\n| **ContactPostalAddress**         | Represents a postal address.                                                 |\n| **ContactSocialProfile**         | Represents social profile information.                                       |\n| **ContactInstantMessageAddress** | Represents instant messaging account information.                            |\n\n***\n\n## Creating a Contact\n\n```ts\ntry {\n  const contact = await Contact.createContact({\n    givenName: 'John',\n    familyName: 'Doe',\n    phoneNumbers: [{ label: 'mobile', value: '+1234567890' }],\n    emailAddresses: [{ label: 'work', value: 'john.doe@example.com' }]\n  })\n  console.log('Contact created:', contact)\n} catch (error) {\n  console.error('Failed to create contact:', error)\n}\n```\n\n- Either `givenName` or `familyName` is required.\n- You may specify an optional `containerIdentifier`. If not provided, the contact is added to the default container.\n- Always handle potential errors due to permission issues or invalid input.\n\n***\n\n## Updating a Contact\n\n```ts\ntry {\n  const updated = await Contact.updateContact({\n    identifier: contact.identifier,\n    phoneNumbers: [{ label: 'home', value: '+9876543210' }]\n  })\n  console.log('Contact updated:', updated)\n} catch (error) {\n  console.error('Failed to update contact:', error)\n}\n```\n\n- `identifier` is required.\n- Only the provided fields will be updated; others remain unchanged.\n\n***\n\n## Fetching Contacts\n\n### Fetch a Contact by Identifier\n\n```ts\ntry {\n  const contact = await Contact.fetchContact(contactId, { fetchImageData: true })\n  console.log('Contact fetched:', contact)\n} catch (error) {\n  console.error('Failed to fetch contact:', error)\n}\n```\n\n### Fetch All Contacts\n\n```ts\ntry {\n  const contacts = await Contact.fetchAllContacts({ fetchImageData: false })\n  console.log('All contacts:', contacts)\n} catch (error) {\n  console.error('Failed to fetch contacts:', error)\n}\n```\n\n### Fetch Contacts in a Container or Group\n\n```ts\ntry {\n  const contacts = await Contact.fetchContactsInContainer(containerId)\n  console.log('Contacts in container:', contacts)\n} catch (error) {\n  console.error('Failed to fetch contacts in container:', error)\n}\n\ntry {\n  const groupContacts = await Contact.fetchContactsInGroup(groupId)\n  console.log('Contacts in group:', groupContacts)\n} catch (error) {\n  console.error('Failed to fetch contacts in group:', error)\n}\n```\n\n- Set `fetchImageData` to `true` only if you need the contact's image data.\n\n***\n\n## Deleting a Contact\n\n```ts\ntry {\n  await Contact.deleteContact(contactId)\n  console.log('Contact deleted')\n} catch (error) {\n  console.error('Failed to delete contact:', error)\n}\n```\n\n***\n\n## Contact Container Management\n\n### Fetch All Containers\n\n```ts\ntry {\n  const containers = await Contact.fetchContainers()\n  console.log('Contact containers:', containers)\n} catch (error) {\n  console.error('Failed to fetch containers:', error)\n}\n```\n\n### Get the Default Container Identifier\n\n```ts\ntry {\n  const defaultContainerId = await Contact.defaultContainerIdentifier\n  console.log('Default container ID:', defaultContainerId)\n} catch (error) {\n  console.error('Failed to fetch default container:', error)\n}\n```\n\nContainer types:\n\n- `unassigned`\n- `local`\n- `exchange`\n- `cardDAV`\n\n***\n\n## Contact Group Management\n\n### Create a Contact Group\n\n```ts\ntry {\n  const group = await Contact.createGroup('Friends', defaultContainerId)\n  console.log('Group created:', group)\n} catch (error) {\n  console.error('Failed to create group:', error)\n}\n```\n\n### Fetch Groups\n\n```ts\ntry {\n  const groups = await Contact.fetchGroups()\n  console.log('Groups:', groups)\n} catch (error) {\n  console.error('Failed to fetch groups:', error)\n}\n```\n\n### Delete a Group\n\n```ts\ntry {\n  await Contact.deleteGroup(groupId)\n  console.log('Group deleted')\n} catch (error) {\n  console.error('Failed to delete group:', error)\n}\n```\n\n***\n\n## Managing Contact and Group Relationship\n\n### Add Contact to a Group\n\n```ts\ntry {\n  await Contact.addContactToGroup(contactId, groupId)\n  console.log('Contact added to group')\n} catch (error) {\n  console.error('Failed to add contact to group:', error)\n}\n```\n\n### Remove Contact from a Group\n\n```ts\ntry {\n  await Contact.removeContactFromGroup(contactId, groupId)\n  console.log('Contact removed from group')\n} catch (error) {\n  console.error('Failed to remove contact from group:', error)\n}\n```\n\n***\n\n## Example ContactInfo Structure\n\n```json\n{\n  \"identifier\": \"XXXX-XXXX\",\n  \"givenName\": \"John\",\n  \"familyName\": \"Doe\",\n  \"phoneNumbers\": [{ \"label\": \"mobile\", \"value\": \"+1234567890\" }],\n  \"emailAddresses\": [{ \"label\": \"work\", \"value\": \"john@example.com\" }],\n  \"postalAddresses\": [{\n    \"label\": \"home\",\n    \"street\": \"123 Apple St.\",\n    \"city\": \"Cupertino\",\n    \"state\": \"CA\",\n    \"postalCode\": \"95014\",\n    \"country\": \"USA\",\n    \"isoCountryCode\": \"US\"\n  }]\n}\n```\n\n***\n\n## Important Notes\n\n- All API operations can fail due to reasons such as lack of permission or invalid parameters. Always use `try-catch`.\n- User permission is required to access contacts.\n- `imageData` should only be fetched if necessary to reduce memory usage.\n- Ensure the `identifier` is valid when performing update or delete operations.\n\n***\n\n## Complete Example: Create and Fetch a Contact\n\n```ts\ntry {\n  const contact = await Contact.createContact({\n    givenName: 'Alice',\n    familyName: 'Smith',\n    phoneNumbers: [{ label: 'mobile', value: '+19876543210' }]\n  })\n  console.log('Contact created:', contact)\n\n  const fetched = await Contact.fetchContact(contact.identifier)\n  console.log('Fetched contact:', fetched.givenName)\n} catch (error) {\n  console.error('Operation failed:', error)\n}\n```\n","routePath":"/doc/Device Capabilities/Contact/","lang":"en","toc":[{"id":"overview-of-data-structures","text":"Overview of Data Structures","depth":2,"charIndex":200},{"id":"creating-a-contact","text":"Creating a Contact","depth":2,"charIndex":1282},{"id":"updating-a-contact","text":"Updating a Contact","depth":2,"charIndex":1919},{"id":"fetching-contacts","text":"Fetching Contacts","depth":2,"charIndex":2326},{"id":"fetch-a-contact-by-identifier","text":"Fetch a Contact by Identifier","depth":3,"charIndex":2348},{"id":"fetch-all-contacts","text":"Fetch All Contacts","depth":3,"charIndex":2596},{"id":"fetch-contacts-in-a-container-or-group","text":"Fetch Contacts in a Container or Group","depth":3,"charIndex":2827},{"id":"deleting-a-contact","text":"Deleting a Contact","depth":2,"charIndex":3383},{"id":"contact-container-management","text":"Contact Container Management","depth":2,"charIndex":3574},{"id":"fetch-all-containers","text":"Fetch All Containers","depth":3,"charIndex":3607},{"id":"get-the-default-container-identifier","text":"Get the Default Container Identifier","depth":3,"charIndex":3826},{"id":"contact-group-management","text":"Contact Group Management","depth":2,"charIndex":4169},{"id":"create-a-contact-group","text":"Create a Contact Group","depth":3,"charIndex":4198},{"id":"fetch-groups","text":"Fetch Groups","depth":3,"charIndex":4425},{"id":"delete-a-group","text":"Delete a Group","depth":3,"charIndex":4608},{"id":"managing-contact-and-group-relationship","text":"Managing Contact and Group Relationship","depth":2,"charIndex":4788},{"id":"add-contact-to-a-group","text":"Add Contact to a Group","depth":3,"charIndex":4832},{"id":"remove-contact-from-a-group","text":"Remove Contact from a Group","depth":3,"charIndex":5049},{"id":"example-contactinfo-structure","text":"Example ContactInfo Structure","depth":2,"charIndex":5290},{"id":"important-notes","text":"Important Notes","depth":2,"charIndex":5761},{"id":"complete-example-create-and-fetch-a-contact","text":"Complete Example: Create and Fetch a Contact","depth":2,"charIndex":6110}],"frontmatter":{},"version":"","description":"The Contact module in the Scripting app allows you to access and manage contacts on the device. You can create, query, update, and delete contacts, as well as manage contact groups and containers."},{"title":"Example","content":"```tsx\n\n\nasync function run() {\n  console.present().then(() => {\n    Script.exit()\n  })\n\n  console.log(\"Start to fetch contacts\")\n  try {\n    const contacts = await Contact.fetchAllContacts()\n\n    const first = contacts.at(0)\n\n    if (!first) {\n      console.log(\"No contacts found\")\n    } else {\n      console.log(\"There are \" + contacts.length + \" contacts\")\n\n      const name = [\n        first.givenName,\n        first.familyName\n      ].join(\" \")\n      \n      console.log(\"First contact name: \" + name)\n    }\n  } catch (e) {\n    console.error(e)\n  }\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/Contact/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Device","content":"The `Device` namespace provides access to device information, system environment data, screen and battery status, language and locale settings, and selected device capabilities (such as wake lock and network interface inspection).\n\nThis API is commonly used for:\n\n- Device-specific logic (iPhone / iPad / Mac)\n- UI layout and adaptive design\n- Localization and language selection\n- Network inspection and debugging\n- Preventing the device from sleeping during script execution\n\n***\n\n## Device and System Information\n\n### `Device.model: string`\n\nThe device model name, for example `\"iPhone\"` or `\"iPad\"`.\n\n***\n\n### `Device.systemName: string`\n\nThe name of the operating system, such as `\"iOS\"`, `\"iPadOS\"`, or `\"macOS\"`.\n\n***\n\n### `Device.systemVersion: string`\n\nThe current operating system version, for example `\"17.2\"`.\n\n***\n\n### `Device.isiPhone: boolean`\n\nIndicates whether the current device is an iPhone.\n\n***\n\n### `Device.isiPad: boolean`\n\nIndicates whether the current device is an iPad.\n\n***\n\n### `Device.isiOSAppOnMac: boolean`\n\nA Boolean value that indicates whether the process is an iPhone or iPad app running on a Mac (Mac Catalyst or Apple Silicon).\n\n***\n\n## Screen Information\n\n### `Device.screen`\n\nInformation about the main screen.\n\n```ts\n{\n  width: number\n  height: number\n  scale: number\n}\n```\n\nField descriptions:\n\n- `width`: Logical screen width (points)\n- `height`: Logical screen height (points)\n- `scale`: Screen scale factor (for example, 2 or 3)\n\nThis is commonly used for layout calculations, canvas sizing, screenshots, or rendering logic.\n\n***\n\n## Orientation and Device Posture\n\n### `Device.isPortrait: boolean`\n\nIndicates whether the device is currently in portrait orientation.\n\n***\n\n### `Device.isLandscape: boolean`\n\nIndicates whether the device is currently in landscape orientation.\n\n***\n\n### `Device.isFlat: boolean`\n\nIndicates whether the device is lying flat (for example, placed on a table).\n\nThis value is typically derived from motion sensors and can be used for advanced interaction logic.\n\n***\n\n## Appearance and Theme\n\n### `Device.colorScheme: ColorScheme`\n\nThe current system appearance mode.\n\nTypical values include:\n\n- `light`\n- `dark`\n\nThis is useful for adapting UI themes and styles to match system settings.\n\n***\n\n## Battery Information\n\n### `Device.batteryState`\n\nThe current battery state:\n\n```ts\n\"full\" | \"charging\" | \"unplugged\" | \"unknown\"\n```\n\nDescriptions:\n\n- `full`: Battery is fully charged\n- `charging`: Battery is charging\n- `unplugged`: Device is not connected to power\n- `unknown`: Battery state is unavailable\n\n***\n\n### `Device.batteryLevel: number`\n\nThe current battery level, in the range:\n\n- `0.0` to `1.0`\n- May return `-1` if the battery level is unavailable\n\n***\n\n## Language and Locale Settings\n\n### `Device.systemLocale: string`\n\nThe system’s current locale identifier, for example:\n\n```text\n\"en_US\"\n```\n\n***\n\n### `Device.preferredLanguages: string[]`\n\nThe user’s preferred languages, ordered by priority, for example:\n\n```ts\n[\"en-US\", \"zh-Hans-CN\"]\n```\n\nThis is the recommended API for language selection and localization logic.\n\n***\n\n### `Device.systemLocales: string[]` (Deprecated)\n\nThe user’s preferred locales.\n\n> Deprecated. Use `Device.preferredLanguages` instead.\n\n***\n\n### `Device.systemLanguageTag: string`\n\nThe current language tag in BCP-47 format, for example:\n\n```text\n\"en-US\"\n```\n\n***\n\n### `Device.systemLanguageCode: string`\n\nThe current language code, for example:\n\n```text\n\"en\"\n```\n\n***\n\n### `Device.systemCountryCode: string | undefined`\n\nThe current country or region code, for example:\n\n```text\n\"US\"\n```\n\nThis value may be `undefined` if no country information is available.\n\n***\n\n### `Device.systemScriptCode: string | undefined`\n\nThe script code of the current language, for example:\n\n```text\n\"Hans\"   // zh_CN_Hans\n```\n\nThis is commonly used to distinguish writing systems, such as Simplified vs. Traditional Chinese.\n\n***\n\n## Wake Lock\n\nWake lock prevents the device from automatically sleeping while a script is running.\n\n### `Device.isWakeLockEnabled: Promise<boolean>`\n\nRetrieves whether the wake lock is currently enabled.\n\n```ts\nconst enabled = await Device.isWakeLockEnabled\n```\n\n***\n\n### `Device.setWakeLockEnabled(enabled: boolean): void`\n\nEnables or disables the wake lock.\n\n```ts\nDevice.setWakeLockEnabled(true)\n```\n\nNotes:\n\n- Available only in the **Scripting app**\n- Prevents the screen from dimming or the device from sleeping\n- Should be disabled when no longer needed to conserve battery\n\n***\n\n## Network Interface Information\n\n### `Device.NetworkInterface`\n\nThe structure that represents a network interface entry:\n\n```ts\ntype NetworkInterface = {\n  address: string\n  netmask: string | null\n  family: 'IPv4' | 'IPv6'\n  mac: string | null\n  isInternal: boolean\n  cidr: string | null\n}\n```\n\nField descriptions:\n\n- `address`: IP address\n- `netmask`: Subnet mask\n- `family`: Address family (`IPv4` or `IPv6`)\n- `mac`: MAC address (may be null on some systems)\n- `isInternal`: Indicates whether the interface is internal (for example, loopback)\n- `cidr`: CIDR notation (for example, `192.168.1.10/24`)\n\n***\n\n### `Device.networkInterfaces(): Record<string, NetworkInterface[]>`\n\nReturns the network interfaces of the device.\n\nThe returned object is structured as:\n\n```ts\n{\n  [interfaceName: string]: NetworkInterface[]\n}\n```\n\nExample:\n\n```ts\nconst interfaces = Device.networkInterfaces()\n\nfor (const name in interfaces) {\n  for (const info of interfaces[name]) {\n    console.log(name, info.address, info.family)\n  }\n}\n```\n\nCommon use cases:\n\n- Retrieving local IP addresses\n- Distinguishing Wi-Fi, cellular, and loopback interfaces\n- Network diagnostics and debugging\n- Emulating Node.js `os.networkInterfaces()` behavior\n\n***\n\n## Best Practices\n\n- Prefer `preferredLanguages` for localization logic\n- Always disable the wake lock when it is no longer required\n- Do not assume specific interface names (such as `en0`) will always exist\n- Network interface availability may vary based on permissions and network state\n","routePath":"/doc/Device Capabilities/Device/","lang":"en","toc":[{"id":"device-and-system-information","text":"Device and System Information","depth":2,"charIndex":483},{"id":"devicemodel-string","text":"`Device.model: string`","depth":3,"charIndex":517},{"id":"devicesystemname-string","text":"`Device.systemName: string`","depth":3,"charIndex":610},{"id":"devicesystemversion-string","text":"`Device.systemVersion: string`","depth":3,"charIndex":726},{"id":"deviceisiphone-boolean","text":"`Device.isiPhone: boolean`","depth":3,"charIndex":828},{"id":"deviceisipad-boolean","text":"`Device.isiPad: boolean`","depth":3,"charIndex":917},{"id":"deviceisiosapponmac-boolean","text":"`Device.isiOSAppOnMac: boolean`","depth":3,"charIndex":1002},{"id":"screen-information","text":"Screen Information","depth":2,"charIndex":1171},{"id":"devicescreen","text":"`Device.screen`","depth":3,"charIndex":1194},{"id":"orientation-and-device-posture","text":"Orientation and Device Posture","depth":2,"charIndex":1575},{"id":"deviceisportrait-boolean","text":"`Device.isPortrait: boolean`","depth":3,"charIndex":1610},{"id":"deviceislandscape-boolean","text":"`Device.isLandscape: boolean`","depth":3,"charIndex":1717},{"id":"deviceisflat-boolean","text":"`Device.isFlat: boolean`","depth":3,"charIndex":1826},{"id":"appearance-and-theme","text":"Appearance and Theme","depth":2,"charIndex":2040},{"id":"devicecolorscheme-colorscheme","text":"`Device.colorScheme: ColorScheme`","depth":3,"charIndex":2065},{"id":"battery-information","text":"Battery Information","depth":2,"charIndex":2267},{"id":"devicebatterystate","text":"`Device.batteryState`","depth":3,"charIndex":2291},{"id":"devicebatterylevel-number","text":"`Device.batteryLevel: number`","depth":3,"charIndex":2583},{"id":"language-and-locale-settings","text":"Language and Locale Settings","depth":2,"charIndex":2737},{"id":"devicesystemlocale-string","text":"`Device.systemLocale: string`","depth":3,"charIndex":2770},{"id":"devicepreferredlanguages-string","text":"`Device.preferredLanguages: string[]`","depth":3,"charIndex":2885},{"id":"devicesystemlocales-string-deprecated","text":"`Device.systemLocales: string[]` (Deprecated)","depth":3,"charIndex":3111},{"id":"devicesystemlanguagetag-string","text":"`Device.systemLanguageTag: string`","depth":3,"charIndex":3254},{"id":"devicesystemlanguagecode-string","text":"`Device.systemLanguageCode: string`","depth":3,"charIndex":3377},{"id":"devicesystemcountrycode-string--undefined","text":"`Device.systemCountryCode: string | undefined`","depth":3,"charIndex":3482},{"id":"devicesystemscriptcode-string--undefined","text":"`Device.systemScriptCode: string | undefined`","depth":3,"charIndex":3678},{"id":"wake-lock","text":"Wake Lock","depth":2,"charIndex":3924},{"id":"deviceiswakelockenabled-promiseboolean","text":"`Device.isWakeLockEnabled: Promise<boolean>`","depth":3,"charIndex":4024},{"id":"devicesetwakelockenabledenabled-boolean-void","text":"`Device.setWakeLockEnabled(enabled: boolean): void`","depth":3,"charIndex":4192},{"id":"network-interface-information","text":"Network Interface Information","depth":2,"charIndex":4510},{"id":"devicenetworkinterface","text":"`Device.NetworkInterface`","depth":3,"charIndex":4544},{"id":"devicenetworkinterfaces-recordstring-networkinterface","text":"`Device.networkInterfaces(): Record<string, NetworkInterface[]>`","depth":3,"charIndex":5120},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":5739}],"frontmatter":{},"version":"","description":"The Device namespace provides access to device information, system environment data, screen and battery status, language and locale settings, and selected device capabilities (such as wake lock and network interface inspection). This API is commonly used for: Device-specific logic (iPhone / iPad / Mac)UI layout and adaptive designLocalization and language selectionNetwork inspection and debuggingPreventing the device from sleeping during script execution"},{"title":"Example","content":"```tsx\n\n\n function Example() {\n  const dismiss = Navigation.useDismiss()\n\n  const details: {\n    name: string\n    value: string | boolean | number\n  }[] = [\n      {\n        name: \"Device.isiPhone\",\n        value: Device.isiPhone\n      },\n      {\n        name: \"Device.isiPad\",\n        value: Device.isiPad,\n      },\n      {\n        name: \"Device.systemVersion\",\n        value: Device.systemVersion,\n      },\n      {\n        name: \"Device.systemName\",\n        value: Device.systemName,\n      },\n      {\n        name: \"Device.isPortrait\",\n        value: Device.isPortrait,\n      },\n      {\n        name: \"Device.isLandscape\",\n        value: Device.isLandscape,\n      },\n      {\n        name: \"Device.isFlat\",\n        value: Device.isFlat,\n      },\n      {\n        name: \"Device.batteryLevel\",\n        value: Device.batteryLevel,\n      },\n      {\n        name: \"Device.batteryState\",\n        value: Device.batteryState,\n      }\n    ]\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Device\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      {details.map(item =>\n        <VStack\n          badge={item.value.toString()}\n          alignment={\"leading\"}\n        >\n          <Text font={\"headline\"}>{item.name}</Text>\n          <Text font={\"caption\"}>{typeof item.value}</Text>\n        </VStack>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/Device/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"DocumentPicker","content":"The `DocumentPicker` class provides an interface to the iOS document picker, allowing users to select files or directories and export files from within the Files app. This is useful for scripts that need to access user files, share content, or organize resources in a specified directory.\n\n## Type Definitions\n\n### `PickFilesOption`\n\nOptions for configuring file selection with `pickFiles`.\n\n- **`initialDirectory`** (optional)\n  - *Type*: `string`\n  - *Description*: Specifies the initial directory that the document picker displays.\n\n- **`types`** (optional)\n  - *Type*: `string[]`\n  - *Description*: An array of uniform type identifiers (UTIs) for the document picker to display. For more details, see [Uniform Type Identifiers]().\n\n- **`shouldShowFileExtensions`** (optional)\n  - *Type*: `boolean`\n  - *Description*: Indicates if file extensions should be visible. Defaults to `true`.\n\n- **`allowsMultipleSelection`** (optional)\n  - *Type*: `boolean`\n  - *Description*: Allows selecting multiple files. Defaults to `false`.\n\n### `ExportFilesOptions`\n\nOptions for exporting files using `exportFiles`.\n\n- **`initialDirectory`** (optional)\n  - *Type*: `string`\n  - *Description*: Specifies the initial directory that the document picker displays.\n\n- **`files`**\n  - *Type*: `Array<{ data: Data; name: string }>`\n  - *Description*: An array of files to be exported. Each file object must contain:\n    - **`data`**: The file data.\n    - **`name`**: The file name.\n\n## Class Methods\n\n### `DocumentPicker.pickFiles(options?: PickFilesOption): Promise<string[]>`\n\nAllows users to pick files from the Files app.\n\n#### Parameters\n\n- **`options`** (optional): `PickFilesOption`\n  - Configuration options for file selection.\n\n#### Returns\n\n- A promise that resolves with an array of file paths (`string[]`).\n\n#### Example\n\n```typescript\nasync function run() {\n  const imageFilePath = await DocumentPicker.pickFiles()\n  if (imageFilePath != null) {\n    // Handle the selected file paths\n  }\n}\nrun()\n```\n\n### `DocumentPicker.pickDirectory(initialDirectory?: string): Promise<string | null>`\n\nAllows users to pick a directory from the Files app.\n\n#### Parameters\n\n- **`initialDirectory`** (optional): `string`\n  - The initial directory that the document picker displays.\n\n#### Returns\n\n- A promise that resolves with the selected directory path as a `string`, or `null` if the user canceled the picker.\n\n#### Example\n\n```typescript\nconst selectedDirectory = await DocumentPicker.pickDirectory()\nif (selectedDirectory == null) {\n  // User canceled the picker\n}\n```\n\n### `DocumentPicker.exportFiles(options: ExportFilesOptions): Promise<string[]>`\n\nExports files to the Files app.\n\n#### Parameters\n\n- **`options`**: `ExportFilesOptions`\n  - Configuration options for file export, including file data and names.\n\n#### Returns\n\n- A promise that resolves with an array of exported file paths (`string[]`).\n\n#### Example\n\n```typescript\nasync function run() {\n  const textContent = \"Hello Scripting!\"\n  const result = await DocumentPicker.exportFiles({\n    files: [\n      {\n        data: Data.fromString(textContent)!,\n        name: 'greeting.txt',\n      }\n    ]\n  });\n\n  if (result.length > 0) {\n    console.log('Exported files: ', result)\n  }\n}\nrun()\n```\n\n### `DocumentPicker.stopAcessingSecurityScopedResources(): void`\n\nRelinquishes access to security-scoped resources, like files or directories accessed via the document picker. Use this method when you no longer need access to these resources to ensure your app manages resources efficiently.\n","routePath":"/doc/Device Capabilities/DocumentPicker","lang":"en","toc":[{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":290},{"id":"pickfilesoption","text":"`PickFilesOption`","depth":3,"charIndex":311},{"id":"exportfilesoptions","text":"`ExportFilesOptions`","depth":3,"charIndex":1029},{"id":"class-methods","text":"Class Methods","depth":2,"charIndex":1464},{"id":"documentpickerpickfilesoptions-pickfilesoption-promisestring","text":"`DocumentPicker.pickFiles(options?: PickFilesOption): Promise<string[]>`","depth":3,"charIndex":1482},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1608},{"id":"returns","text":"Returns","depth":4,"charIndex":1718},{"id":"example","text":"Example","depth":4,"charIndex":1801},{"id":"documentpickerpickdirectoryinitialdirectory-string-promisestring--null","text":"`DocumentPicker.pickDirectory(initialDirectory?: string): Promise<string | null>`","depth":3,"charIndex":1995},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":2136},{"id":"returns-1","text":"Returns","depth":4,"charIndex":2261},{"id":"example-1","text":"Example","depth":4,"charIndex":2393},{"id":"documentpickerexportfilesoptions-exportfilesoptions-promisestring","text":"`DocumentPicker.exportFiles(options: ExportFilesOptions): Promise<string[]>`","depth":3,"charIndex":2554},{"id":"parameters-2","text":"Parameters","depth":4,"charIndex":2669},{"id":"returns-2","text":"Returns","depth":4,"charIndex":2799},{"id":"example-2","text":"Example","depth":4,"charIndex":2891},{"id":"documentpickerstopacessingsecurityscopedresources-void","text":"`DocumentPicker.stopAcessingSecurityScopedResources(): void`","depth":3,"charIndex":3240}],"frontmatter":{},"version":"","description":"The DocumentPicker class provides an interface to the iOS document picker, allowing users to select files or directories and export files from within the Files app. This is useful for scripts that need to access user files, share content, or organize resources in a specified directory."},{"title":"EventAlarm","content":"`EventAlarm` represents a reminder rule that can be attached to both **CalendarEvent** and **Reminder** objects.\nIt supports three major alarm types:\n\n- **Absolute-time alarms**\n- **Relative alarms** (relative to an event’s start time)\n- **Location-based alarms** (geofence triggers)\n\nThis class aligns with the behavior of iOS EventKit alarms and provides flexible notification capabilities across calendar and reminder data.\n\n***\n\n## 1. Creating an Alarm\n\n### EventAlarm.fromAbsoluteDate(date: Date): EventAlarm\n\nCreates an alarm that fires at a specific, absolute moment in time.\n\n- Independent from the event’s `startDate`\n- Triggers when the system time reaches the specified date\n\nExample:\n\n```ts\nconst alarm = EventAlarm.fromAbsoluteDate(new Date(\"2025-01-01T09:00:00\"))\n```\n\n***\n\n### EventAlarm.fromRelativeOffset(offset: DurationInSeconds): EventAlarm\n\nCreates an alarm that fires relative to the event’s start time.\n\n`offset` interpretation:\n\n- Negative value: fires *before* the event starts\n- Positive value: fires *after* the event starts\n\nExample (alarm 10 minutes before the event):\n\n```ts\nconst alarm = EventAlarm.fromRelativeOffset(-600)\n```\n\n***\n\n## 2. Properties\n\n### absoluteDate: Date | null\n\nThe absolute date on which the alarm fires.\n\nBehavior:\n\n- Setting this property on a **relative alarm** converts it into an absolute alarm and clears `relativeOffset`.\n- When `null`, the alarm may be relative or location-based.\n\n***\n\n### relativeOffset: number\n\nTime offset in seconds from the event’s start time.\n\nBehavior:\n\n- Setting this property on an **absolute alarm** converts the alarm into a relative alarm and clears `absoluteDate`.\n- Always measured relative to the `startDate` of a CalendarEvent or Reminder.\n\nExample:\n\n```ts\nalarm.relativeOffset = -300  // fire 5 minutes before\n```\n\n***\n\n### structuredLocation: EventStructuredLocation | null\n\nDefines the location used for location-based alarms.\n\n`EventStructuredLocation` contains:\n\n- `title: string | null` – Human-readable name\n- `geoLocation: LocationInfo | null` – Latitude/longitude\n- `radius: number` – Geofence radius in meters\n\nExample:\n\n```ts\nalarm.structuredLocation = {\n  title: \"Office\",\n  geoLocation: { latitude: 37.332, longitude: -122.030 },\n  radius: 100\n}\n```\n\n***\n\n### proximity: AlarmProximity\n\nDefines how the location alarm is triggered.\n\n| Value   | Meaning                                 |\n| ------- | --------------------------------------- |\n| `none`  | Default; no location trigger            |\n| `enter` | Trigger when the user enters the region |\n| `leave` | Trigger when the user exits the region  |\n\nExample:\n\n```ts\nalarm.proximity = AlarmProximity.enter\n```\n\n***\n\n## 3. Usage in CalendarEvent and Reminder APIs\n\n### Using EventAlarm with CalendarEvent\n\n```ts\nconst event = new CalendarEvent()\nevent.title = \"Team Meeting\"\nevent.startDate = ...\nevent.endDate = ...\n\nconst alarm = EventAlarm.fromRelativeOffset(-900) // 15 min before\nevent.addAlarm(alarm)\n\nawait event.save()\n```\n\n***\n\n### Using EventAlarm with Reminder\n\nReminders also support alarms:\n\n```ts\nconst reminder = new Reminder()\nreminder.title = \"Pay Electricity Bill\"\n\nconst alarm = EventAlarm.fromAbsoluteDate(new Date(\"2025-02-01T10:00:00\"))\nreminder.addAlarm(alarm)\n\nawait reminder.save()\n```\n\nLocation-based alarms work for reminders as well.\n\n***\n\n## 4. Best Practices\n\n1. **Use absolute alarms** for fixed calendar moments (e.g., birthdays, bill due dates).\n2. **Use relative alarms** when the trigger depends on the event’s start time (e.g., meeting reminders).\n3. **Use geofence alarms** for contextual triggers (e.g., remind me to pick up a package when I get home).\n4. Location alarms require appropriate location permissions from the user.\n","routePath":"/doc/Device Capabilities/EventAlarm","lang":"en","toc":[{"id":"1-creating-an-alarm","text":"1. Creating an Alarm","depth":2,"charIndex":433},{"id":"eventalarmfromabsolutedatedate-date-eventalarm","text":"EventAlarm.fromAbsoluteDate(date: Date): EventAlarm","depth":3,"charIndex":458},{"id":"eventalarmfromrelativeoffsetoffset-durationinseconds-eventalarm","text":"EventAlarm.fromRelativeOffset(offset: DurationInSeconds): EventAlarm","depth":3,"charIndex":788},{"id":"2-properties","text":"2. Properties","depth":2,"charIndex":1165},{"id":"absolutedate-date--null","text":"absoluteDate: Date | null","depth":3,"charIndex":1183},{"id":"relativeoffset-number","text":"relativeOffset: number","depth":3,"charIndex":1448},{"id":"structuredlocation-eventstructuredlocation--null","text":"structuredLocation: EventStructuredLocation | null","depth":3,"charIndex":1816},{"id":"proximity-alarmproximity","text":"proximity: AlarmProximity","depth":3,"charIndex":2264},{"id":"3-usage-in-calendarevent-and-reminder-apis","text":"3. Usage in CalendarEvent and Reminder APIs","depth":2,"charIndex":2677},{"id":"using-eventalarm-with-calendarevent","text":"Using EventAlarm with CalendarEvent","depth":3,"charIndex":2725},{"id":"using-eventalarm-with-reminder","text":"Using EventAlarm with Reminder","depth":3,"charIndex":2997},{"id":"4-best-practices","text":"4. Best Practices","depth":2,"charIndex":3328}],"frontmatter":{},"version":"","description":"EventAlarm represents a reminder rule that can be attached to both CalendarEvent and Reminder objects.\nIt supports three major alarm types: Absolute-time alarmsRelative alarms (relative to an event’s start time)Location-based alarms (geofence triggers) This class aligns with the behavior of iOS EventKit alarms and provides flexible notification capabilities across calendar and reminder data."},{"title":"FontPicker <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# FontPicker \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `FontPicker` namespace provides methods for selecting fonts from the system’s available font list.\nIt opens the system font picker UI, allowing the user to choose a font, and returns the **PostScript name** of the selected font.\n\n***\n\n## Overview\n\nIn scenarios such as custom text editors, UI design, or typography styling, users may need to select a font dynamically.\n`FontPicker` offers a simple asynchronous interface to display the system’s font picker and obtain the selected font name.\n\n***\n\n## Methods\n\n### `pickFont(): Promise<string | null>`\n\nOpens the system font picker interface and lets the user select a font.\nReturns a Promise that resolves when the user either selects a font or cancels the picker.\n\n**Return Value:**\n\n- `string` — The **PostScript name** of the selected font (e.g., `\"Helvetica-Bold\"`, `\"KaitiSC-Regular\"`).\n- `null` — Returned if the user cancels the picker.\n\n***\n\n## Example\n\n```ts\nconst fontPostscriptName = await FontPicker.pickFont()\nif (fontPostscriptName == null) {\n  // User canceled the font picker\n  console.log(\"Font selection canceled\")\n} else {\n  console.log(\"Selected font:\", fontPostscriptName)\n}\n```\n\nExample output:\n\n```\nSelected font: HelveticaNeue-Bold\n```\n\n***\n\n## Usage Notes\n\n- The returned font name can be used directly in text rendering or UI styling contexts.\n- If the user cancels the selection, the return value is `null`; your code should handle this case gracefully.\n- The fonts displayed in the picker depend on the fonts currently installed on the system, including both built-in and user-installed fonts.\n\n***\n\n## Summary\n\n| Method       | Return Type               | Description                                                                                             |\n| ------------ | ------------------------- | ------------------------------------------------------------------------------------------------------- |\n| `pickFont()` | `Promise<string \\| null>` | Opens the system font picker and returns the PostScript name of the selected font or `null` if canceled |\n","routePath":"/doc/Device Capabilities/FontPicker","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":393},{"id":"methods","text":"Methods","depth":2,"charIndex":656},{"id":"pickfont-promisestring--null","text":"`pickFont(): Promise<string | null>`","depth":3,"charIndex":668},{"id":"example","text":"Example","depth":2,"charIndex":1058},{"id":"usage-notes","text":"Usage Notes","depth":2,"charIndex":1374},{"id":"summary","text":"Summary","depth":2,"charIndex":1736}],"frontmatter":{},"version":"","description":"The FontPicker namespace provides methods for selecting fonts from the system’s available font list.\nIt opens the system font picker UI, allowing the user to choose a font, and returns the PostScript name of the selected font."},{"title":"HapticFeedback","content":"```tsx\n\n\nfunction Example() {\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"HapticFeedback\"}\n    >\n      <Button\n        title={\"HapticFeedback.vibrate\"}\n        action={() => {\n          HapticFeedback.vibrate()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.lightImpact\"}\n        action={() => {\n          HapticFeedback.lightImpact()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.mediumImpact\"}\n        action={() => {\n          HapticFeedback.mediumImpact()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.heavyImpact\"}\n        action={() => {\n          HapticFeedback.heavyImpact()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.softImpact\"}\n        action={() => {\n          HapticFeedback.softImpact()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.rigidImpact\"}\n        action={() => {\n          HapticFeedback.rigidImpact()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.selection\"}\n        action={() => {\n          HapticFeedback.selection()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.notificationSuccess\"}\n        action={() => {\n          HapticFeedback.notificationSuccess()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.notificationError\"}\n        action={() => {\n          HapticFeedback.notificationError()\n        }}\n      />\n\n      <Button\n        title={\"HapticFeedback.notificationWarning\"}\n        action={() => {\n          HapticFeedback.notificationWarning()\n        }}\n      />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/HapticFeedback","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"HealthActivitySummary <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthActivitySummary \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthActivitySummary` class provides an interface for accessing daily summaries of user activity as recorded by the Apple Health system. This includes move, exercise, and stand metrics, and optionally supports both energy-based and time-based activity move goals.\n\nThis class is useful for apps that aim to present a user's daily activity rings or generate daily fitness reports.\n\n***\n\n## Use Cases\n\n- Displaying daily activity ring progress (Move, Exercise, Stand)\n- Comparing user activity against daily goals\n- Building custom health dashboards and fitness visualizations\n- Providing trend analysis or goal reminders\n\n***\n\n## Class: `HealthActivitySummary`\n\n### Properties\n\n| Property           | Type                     | Description                                                                                                           |\n| ------------------ | ------------------------ | --------------------------------------------------------------------------------------------------------------------- |\n| `dateComponents`   | `DateComponents`         | Represents the calendar date associated with this activity summary.                                                   |\n| `activityMoveMode` | `HealthActivityMoveMode` | Indicates the move mode used for this summary — either active energy (`activeEnergy`) or move time (`appleMoveTime`). |\n\n***\n\n### Methods\n\nEach of the following methods returns a numeric value representing either the achieved metric or the goal for that metric on the specified date. All values are returned in the unit specified by the caller.\n\n#### `activeEnergyBurned(unit: HealthUnit): number`\n\nReturns the amount of active energy burned for the day in the given unit (e.g., kilocalories).\n\n#### `activeEnergyBurnedGoal(unit: HealthUnit): number`\n\nReturns the daily goal for active energy burned in the given unit.\n\n> Only valid when `activityMoveMode` is `HealthActivityMoveMode.activeEnergy`.\n\n***\n\n#### `appleMoveTime(unit: HealthUnit): number`\n\nReturns the duration of movement (in minutes or seconds) tracked by the Apple Watch's move time mode.\n\n#### `appleMoveTimeGoal(unit: HealthUnit): number`\n\nReturns the goal for move time on the current day.\n\n> Only valid when `activityMoveMode` is `HealthActivityMoveMode.appleMoveTime`.\n\n***\n\n#### `appleExerciseTime(unit: HealthUnit): number`\n\nReturns the total time spent in exercise (typically in minutes), as measured by the Apple Watch.\n\n#### `appleExerciseTimeGoal(unit: HealthUnit): number`\n\nReturns the exercise time goal for the current day.\n\n***\n\n#### `appleStandHours(unit: HealthUnit): number`\n\nReturns the number of hours in which the user stood and moved for at least one minute.\n\n#### `appleStandHoursGoal(unit: HealthUnit): number`\n\nReturns the user's stand hours goal for the day (typically 12).\n\n***\n\n## Example Usage\n\n```ts\nasync function showTodaySummary() {\n  const startDate = new Date()\n  startDate.setHours(0, 0, 0, 0)\n\n  const start = DateComponents.fromDate(startDate)\n  const end = DateComponents.fromDate(startDate)\n  end.date += 1\n\n  const summaries = await Health.queryActivitySummaries({\n    start, // today\n    end,\n  })\n\n  if (summaries.length === 0) {\n    console.log('No activity summary available for today.')\n    return\n  }\n\n  const summary = summaries[0]\n\n  console.log('Date:', summary.dateComponents)\n  console.log('Move Mode:', summary.activityMoveMode)\n\n  const kcal = summary.activeEnergyBurned(HealthUnit.kilocalorie())\n  const kcalGoal = summary.activeEnergyBurnedGoal(HealthUnit.kilocalorie())\n\n  console.log(`Active Energy Burned: ${kcal} / ${kcalGoal} kcal`)\n  console.log(`Exercise Time: ${summary.appleExerciseTime(HealthUnit.minute())} min`)\n  console.log(`Stand Hours: ${summary.appleStandHours(HealthUnit.count())} hr`)\n}\n```\n\n***\n\n## Notes\n\n- `HealthActivitySummary` does not store historical trend data. Use multiple summaries to build a timeline.\n- Depending on the user's Apple Watch settings, the move goal can be based on energy burned or move time.\n- All returned values are numeric and can be formatted or converted further based on your needs.\n- `HealthUnit` must match the type of data requested. For time-based values, use `HealthUnit.minute()` or `HealthUnit.second()`. For count-based values like stand hours, use `HealthUnit.count()`.\n","routePath":"/doc/Device Capabilities/Health/HealthActivitySummary","lang":"en","toc":[{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":557},{"id":"class-healthactivitysummary","text":"Class: `HealthActivitySummary`","depth":2,"charIndex":797},{"id":"properties","text":"Properties","depth":3,"charIndex":832},{"id":"methods","text":"Methods","depth":3,"charIndex":1534},{"id":"activeenergyburnedunit-healthunit-number","text":"`activeEnergyBurned(unit: HealthUnit): number`","depth":4,"charIndex":1754},{"id":"activeenergyburnedgoalunit-healthunit-number","text":"`activeEnergyBurnedGoal(unit: HealthUnit): number`","depth":4,"charIndex":1903},{"id":"applemovetimeunit-healthunit-number","text":"`appleMoveTime(unit: HealthUnit): number`","depth":4,"charIndex":2113},{"id":"applemovetimegoalunit-healthunit-number","text":"`appleMoveTimeGoal(unit: HealthUnit): number`","depth":4,"charIndex":2264},{"id":"appleexercisetimeunit-healthunit-number","text":"`appleExerciseTime(unit: HealthUnit): number`","depth":4,"charIndex":2454},{"id":"appleexercisetimegoalunit-healthunit-number","text":"`appleExerciseTimeGoal(unit: HealthUnit): number`","depth":4,"charIndex":2604},{"id":"applestandhoursunit-healthunit-number","text":"`appleStandHours(unit: HealthUnit): number`","depth":4,"charIndex":2718},{"id":"applestandhoursgoalunit-healthunit-number","text":"`appleStandHoursGoal(unit: HealthUnit): number`","depth":4,"charIndex":2856},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2980},{"id":"notes","text":"Notes","depth":2,"charIndex":3946}],"frontmatter":{},"version":"","description":"The HealthActivitySummary class provides an interface for accessing daily summaries of user activity as recorded by the Apple Health system. This includes move, exercise, and stand metrics, and optionally supports both energy-based and time-based activity move goals. This class is useful for apps that aim to present a user's daily activity rings or generate daily fitness reports."},{"title":"HealthCategorySample <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthCategorySample \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthCategorySample` class represents an individual category-based health record, such as a sleep session, menstrual flow level, or a test result. These samples are used to store discrete events or conditions over time, usually characterized by a start and end date along with a categorical value.\n\n***\n\n## Overview\n\nThis class is suitable for:\n\n- Tracking and analyzing time-bound health events (e.g., sleep analysis)\n- Recording categorical values with a specific time interval (e.g., \"present\" or \"not present\")\n- Manually creating samples for use with HealthKit-compatible export or analysis\n\n***\n\n## Properties\n\n| Property       | Type                          | Description                                                                       |\n| -------------- | ----------------------------- | --------------------------------------------------------------------------------- |\n| `uuid`         | `string`                      | A unique identifier for the sample.                                               |\n| `categoryType` | `HealthCategoryType`          | The category type of the sample (e.g., `sleepAnalysis`, `sexualActivity`).        |\n| `startDate`    | `Date`                        | The start date and time of the recorded event.                                    |\n| `endDate`      | `Date`                        | The end date and time of the recorded event.                                      |\n| `value`        | `number`                      | The categorical value for the sample, from a specific `HealthCategoryValue` enum. |\n| `metadata`     | `Record<string, any> \\| null` | Optional additional metadata about the sample (e.g., source, notes).              |\n\n***\n\n## Method: `static create(...)`\n\nCreates a new `HealthCategorySample` instance using the specified parameters.\n\n### Signature\n\n```ts\nstatic create(options: {\n  type: HealthCategoryType\n  startDate: Date\n  endDate: Date\n  value: HealthCategoryValueAppetiteChanges | HealthCategoryValueAppleStandHour | HealthCategoryValueAppleWalkingSteadinessEvent | HealthCategoryValueCervicalMucusQuality | HealthCategoryValueContraceptive | HealthCategoryValueEnvironmentalAudioExposureEvent | HealthCategoryValueHeadphoneAudioExposureEvent | HealthCategoryValueLowCardioFitnessEvent | HealthCategoryValueOvulationTestResult | HealthCategoryValuePregnancyTestResult | HealthCategoryValuePresence | HealthCategoryValueProgesteroneTestResult | HealthCategoryValueSeverity | HealthCategoryValueSleepAnalysis | HealthCategoryValueVaginalBleeding\n  metadata?: Record<string, any> | null\n}): HealthCategorySample | null\n```\n\n### Parameters\n\n| Parameter   | Type                                    | Description                                           |\n| ----------- | --------------------------------------- | ----------------------------------------------------- |\n| `type`      | `HealthCategoryType`                    | The category type this sample represents.             |\n| `startDate` | `Date`                                  | When the health event began.                          |\n| `endDate`   | `Date`                                  | When the health event ended.                          |\n| `value`     | One of the `HealthCategoryValue*` enums | The specific categorical value. Must match the type.  |\n| `metadata`  | Optional `Record<string, any>`          | Optional data such as annotations or tracking source. |\n\n### Returns\n\n- A `HealthCategorySample` instance if the inputs are valid.\n- `null` if the parameters are invalid (e.g., value/type mismatch).\n\n***\n\n## Usage Examples\n\n### 1. Creating a Sleep Analysis Sample\n\n```ts\nconst sample = HealthCategorySample.create({\n  type: 'sleepAnalysis',\n  startDate: new Date('2025-07-01T23:00:00'),\n  endDate: new Date('2025-07-02T06:00:00'),\n  value: HealthCategoryValueSleepAnalysis.asleep,\n  metadata: { source: 'manual entry' }\n})\n\nif (sample) {\n  console.log(`Created sleep sample from ${sample.startDate} to ${sample.endDate}`)\n}\n```\n\n### 2. Logging a Sexual Activity Event\n\n```ts\nconst event = HealthCategorySample.create({\n  type: 'sexualActivity',\n  startDate: new Date('2025-07-03T22:30:00'),\n  endDate: new Date('2025-07-03T22:40:00'),\n  value: HealthCategoryValuePresence.present\n})\n```\n\n### 3. Tracking Ovulation Test Result\n\n```ts\nconst result = HealthCategorySample.create({\n  type: 'ovulationTestResult',\n  startDate: new Date('2025-07-05T08:00:00'),\n  endDate: new Date('2025-07-05T08:05:00'),\n  value: HealthCategoryValueOvulationTestResult.positive\n})\n```\n\n***\n\n## Notes on `value`\n\nThe `value` field must be a valid enum value for the given category type. For example:\n\n- `sleepAnalysis` must use `HealthCategoryValueSleepAnalysis`\n- `sexualActivity` must use `HealthCategoryValuePresence`\n- `menstrualFlow` must use `HealthCategoryValueSeverity`\n- `ovulationTestResult` must use `HealthCategoryValueOvulationTestResult`\n\nIf the value and type do not match, the sample creation will fail and return `null`.\n\n***\n\n## Common Use Cases\n\n| Type                              | Value Enum                                           | Use Case Example       |\n| --------------------------------- | ---------------------------------------------------- | ---------------------- |\n| `sleepAnalysis`                   | `HealthCategoryValueSleepAnalysis`                   | Sleep tracking apps    |\n| `sexualActivity`                  | `HealthCategoryValuePresence`                        | Lifestyle logging      |\n| `menstrualFlow`                   | `HealthCategoryValueSeverity`                        | Menstrual health apps  |\n| `pregnancyTestResult`             | `HealthCategoryValuePregnancyTestResult`             | Fertility tracking     |\n| `appleStandHour`                  | `HealthCategoryValueAppleStandHour`                  | Stand reminder history |\n| `environmentalAudioExposureEvent` | `HealthCategoryValueEnvironmentalAudioExposureEvent` | Noise alerts tracking  |\n","routePath":"/doc/Device Capabilities/Health/HealthCategorySample","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":474},{"id":"properties","text":"Properties","depth":2,"charIndex":772},{"id":"method-static-create","text":"Method: `static create(...)`","depth":2,"charIndex":1873},{"id":"signature","text":"Signature","depth":3,"charIndex":1985},{"id":"parameters","text":"Parameters","depth":3,"charIndex":2778},{"id":"returns","text":"Returns","depth":3,"charIndex":3593},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":3741},{"id":"1-creating-a-sleep-analysis-sample","text":"1. Creating a Sleep Analysis Sample","depth":3,"charIndex":3760},{"id":"2-logging-a-sexual-activity-event","text":"2. Logging a Sexual Activity Event","depth":3,"charIndex":4165},{"id":"3-tracking-ovulation-test-result","text":"3. Tracking Ovulation Test Result","depth":3,"charIndex":4424},{"id":"notes-on-value","text":"Notes on `value`","depth":2,"charIndex":4705},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":5157}],"frontmatter":{},"version":"","description":"The HealthCategorySample class represents an individual category-based health record, such as a sleep session, menstrual flow level, or a test result. These samples are used to store discrete events or conditions over time, usually characterized by a start and end date along with a categorical value."},{"title":"HealthCategoryType <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthCategoryType \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthCategoryType` identifies discrete health-related states or events, often recorded as binary values (e.g., present or not present) or discrete outcomes. These are commonly used for tracking symptoms, reproductive health, audio exposure events, and sleep states.\n\n***\n\n## 1. Apple Events and System Health\n\n| Identifier                        | Description                                             |\n| --------------------------------- | ------------------------------------------------------- |\n| `appleStandHour`                  | Indicates whether the user stood up during an hour      |\n| `environmentalAudioExposureEvent` | Notifies of high environmental noise exposure           |\n| `headphoneAudioExposureEvent`     | Indicates potentially harmful headphone volume exposure |\n| `highHeartRateEvent`              | Detects unusually high heart rate during inactivity     |\n| `lowHeartRateEvent`               | Detects unusually low heart rate                        |\n| `irregularHeartRhythmEvent`       | Flags irregular heart rhythms (e.g., AFib)              |\n| `lowCardioFitnessEvent`           | Indicates low cardio fitness level                      |\n| `appleWalkingSteadinessEvent`     | Indicates risk of falling due to walking instability    |\n\n***\n\n## 2. Mindfulness and Hygiene\n\n| Identifier           | Description                                     |\n| -------------------- | ----------------------------------------------- |\n| `mindfulSession`     | Logs a mindfulness session                      |\n| `handwashingEvent`   | Detects handwashing activity (Apple Watch)      |\n| `toothbrushingEvent` | Logs toothbrushing sessions (e.g., via sensors) |\n\n***\n\n## 3. Reproductive and Menstrual Health\n\n| Identifier                         | Description                                 |\n| ---------------------------------- | ------------------------------------------- |\n| `menstrualFlow`                    | Records menstrual bleeding and its severity |\n| `intermenstrualBleeding`           | Bleeding between menstrual periods          |\n| `prolongedMenstrualPeriods`        | Periods longer than usual                   |\n| `infrequentMenstrualCycles`        | Infrequent cycle occurrence                 |\n| `irregularMenstrualCycles`         | Irregular cycle patterns                    |\n| `persistentIntermenstrualBleeding` | Ongoing bleeding between cycles             |\n| `bleedingDuringPregnancy`          | Bleeding while pregnant                     |\n| `bleedingAfterPregnancy`           | Postpartum bleeding                         |\n| `pregnancy`                        | Indicates whether the user is pregnant      |\n| `lactation`                        | Indicates breastfeeding or milk production  |\n| `sexualActivity`                   | Logs sexual activity                        |\n| `ovulationTestResult`              | Ovulation test result (positive, negative)  |\n| `pregnancyTestResult`              | Pregnancy test result                       |\n| `progesteroneTestResult`           | Progesterone test outcome                   |\n| `contraceptive`                    | Contraceptive method being used             |\n| `cervicalMucusQuality`             | Tracks type of cervical mucus               |\n\n***\n\n## 4. Sleep and Breathing\n\n| Identifier        | Description                                              |\n| ----------------- | -------------------------------------------------------- |\n| `sleepAnalysis`   | Sleep duration and categorization (e.g., in bed, asleep) |\n| `sleepApneaEvent` | Detected apnea event during sleep                        |\n\n***\n\n## 5. Symptoms and Conditions\n\n| Identifier                           | Description                                      |\n| ------------------------------------ | ------------------------------------------------ |\n| `abdominalCramps`                    | Stomach or menstrual cramps                      |\n| `acne`                               | Acne severity                                    |\n| `appetiteChanges`                    | Increase or decrease in appetite                 |\n| `bladderIncontinence`                | Urinary control issues                           |\n| `bloating`                           | Feeling of abdominal swelling                    |\n| `breastPain`                         | Pain or tenderness in the breast                 |\n| `chestTightnessOrPain`               | Tightness or discomfort in the chest             |\n| `chills`                             | Sudden feeling of cold without cause             |\n| `constipation`                       | Difficulty passing stool                         |\n| `coughing`                           | Cough symptom                                    |\n| `diarrhea`                           | Loose or watery stools                           |\n| `dizziness`                          | Feeling lightheaded or unsteady                  |\n| `drySkin`                            | Skin dryness                                     |\n| `fainting`                           | Temporary loss of consciousness                  |\n| `fatigue`                            | General tiredness or low energy                  |\n| `fever`                              | Elevated body temperature                        |\n| `generalizedBodyAche`                | Full body soreness or aching                     |\n| `hairLoss`                           | Notable hair thinning or shedding                |\n| `headache`                           | Head pain                                        |\n| `heartburn`                          | Burning sensation in chest or throat             |\n| `hotFlashes`                         | Sudden feeling of warmth (commonly in menopause) |\n| `lossOfSmell`                        | Anosmia (loss of smell)                          |\n| `lossOfTaste`                        | Ageusia (loss of taste)                          |\n| `lowerBackPain`                      | Pain in the lower back                           |\n| `memoryLapse`                        | Difficulty remembering                           |\n| `moodChanges`                        | Mood swings or emotional variation               |\n| `nausea`                             | Sensation of wanting to vomit                    |\n| `nightSweats`                        | Sweating during sleep                            |\n| `pelvicPain`                         | Pain in the lower abdominal area                 |\n| `rapidPoundingOrFlutteringHeartbeat` | Palpitations or abnormal heart rhythms           |\n| `runnyNose`                          | Nasal discharge                                  |\n| `shortnessOfBreath`                  | Difficulty breathing                             |\n| `sinusCongestion`                    | Nasal blockage due to sinus inflammation         |\n| `skippedHeartbeat`                   | Noticeable skipped or irregular heartbeats       |\n| `sleepChanges`                       | Changes in sleep quality or duration             |\n| `soreThroat`                         | Throat irritation or pain                        |\n| `vaginalDryness`                     | Lack of natural vaginal lubrication              |\n| `vomiting`                           | Expelling stomach contents                       |\n| `wheezing`                           | Whistling sound while breathing                  |\n\n***\n\n## Use Cases\n\n- **Reproductive Health Apps**: Use types like `menstrualFlow`, `ovulationTestResult`, `pregnancy`, and `lactation` to help users track fertility and cycles.\n- **Mindfulness and Lifestyle**: Use `mindfulSession`, `handwashingEvent`, and `toothbrushingEvent` for promoting daily habits.\n- **Sleep and Heart Monitoring**: Use `sleepAnalysis`, `sleepApneaEvent`, and heart rhythm-related types to provide nighttime and cardiovascular insights.\n- **Symptom Trackers**: Use symptom-related types (e.g., `fatigue`, `fever`, `nausea`) in journaling, recovery, or diagnostics support apps.\n\n***\n\n## Example: Save a Sleep Stage Sample\n\n```ts\nconst sample = HealthCategorySample.create({\n  type: \"sleepAnalysis\",\n  startDate: new Date(\"2025-07-03T22:30:00\"),\n  endDate: new Date(\"2025-07-04T06:30:00\"),\n  value: HealthCategoryValueSleepAnalysis.asleepDeep\n})\n\nawait Health.saveCategorySample(sample)\n```\n\n***\n\n## Example: Query Mindful Sessions\n\n```ts\nconst results = await Health.queryCategorySamples({\n  type: \"mindfulSession\",\n  startDate: new Date(\"2025-07-01\"),\n  endDate: new Date(\"2025-07-05\")\n})\n\nfor (const session of results) {\n  console.log(\"From\", session.startDate, \"to\", session.endDate)\n}\n```\n\n***\n\n## Notes\n\n- The `value` provided to a category sample must match the expected enum for the given `type`.\n- If the `value` does not match the required category value type, the `create()` method will return `null`.\n- Samples must span at least one second (`endDate > startDate`).\n","routePath":"/doc/Device Capabilities/Health/HealthCategoryType","lang":"en","toc":[{"id":"1-apple-events-and-system-health","text":"1. Apple Events and System Health","depth":2,"charIndex":440},{"id":"2-mindfulness-and-hygiene","text":"2. Mindfulness and Hygiene","depth":2,"charIndex":1444},{"id":"3-reproductive-and-menstrual-health","text":"3. Reproductive and Menstrual Health","depth":2,"charIndex":1856},{"id":"4-sleep-and-breathing","text":"4. Sleep and Breathing","depth":2,"charIndex":3433},{"id":"5-symptoms-and-conditions","text":"5. Symptoms and Conditions","depth":2,"charIndex":3790},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":7599},{"id":"example-save-a-sleep-stage-sample","text":"Example: Save a Sleep Stage Sample","depth":2,"charIndex":8201},{"id":"example-query-mindful-sessions","text":"Example: Query Mindful Sessions","depth":2,"charIndex":8513},{"id":"notes","text":"Notes","depth":2,"charIndex":8817}],"frontmatter":{},"version":"","description":"The HealthCategoryType identifies discrete health-related states or events, often recorded as binary values (e.g., present or not present) or discrete outcomes. These are commonly used for tracking symptoms, reproductive health, audio exposure events, and sleep states."},{"title":"HealthCategoryValue Types <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthCategoryValue Types \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThis document provides a comprehensive reference for all supported `HealthCategoryValue` enums used with `HealthCategorySample.create()` and related APIs. Each enum represents a specific categorical value associated with a `HealthCategoryType`.\n\n***\n\n## 1. `HealthCategoryValuePresence`\n\n**Applicable Types:**\n\n- `mindfulSession`\n- `intermenstrualBleeding`\n- `sexualActivity`\n- `pregnancy`\n- `lactation`\n\n**Description:** Indicates the presence or absence of an event.\n\n| Value        | Meaning                 |\n| ------------ | ----------------------- |\n| `present`    | The event occurred      |\n| `notPresent` | The event did not occur |\n\n***\n\n## 2. `HealthCategoryValueSeverity`\n\n**Applicable Types:**\n\n- `menstrualFlow`\n- `acneSeverity`\n- `hairLossSeverity`\n- `abdominalCramps`\n- `headache`\n- `nausea`\n\n**Description:** Represents the severity level of a symptom.\n\n| Value         | Meaning           |\n| ------------- | ----------------- |\n| `unspecified` | Not specified     |\n| `notPresent`  | Not present       |\n| `mild`        | Mild severity     |\n| `moderate`    | Moderate severity |\n| `severe`      | Severe            |\n\n***\n\n## 3. `HealthCategoryValueSleepAnalysis`\n\n**Applicable Types:**\n\n- `sleepAnalysis`\n\n**Description:** Categorizes sleep states during a given time range.\n\n| Value               | Meaning                         |\n| ------------------- | ------------------------------- |\n| `inBed`             | In bed (not necessarily asleep) |\n| `asleepUnspecified` | Asleep (unspecified phase)      |\n| `awake`             | Awake                           |\n| `asleepCore`        | Core sleep                      |\n| `asleepDeep`        | Deep sleep                      |\n| `asleepREM`         | REM sleep                       |\n\n***\n\n## 4. `HealthCategoryValueOvulationTestResult`\n\n**Applicable Types:**\n\n- `ovulationTestResult`\n\n| Value                     | Meaning                              |\n| ------------------------- | ------------------------------------ |\n| `negative`                | No LH surge detected                 |\n| `luteinizingHormoneSurge` | LH surge detected (ovulation likely) |\n| `indeterminate`           | Result unclear                       |\n| `estrogenSurge`           | Estrogen surge detected              |\n\n***\n\n## 5. `HealthCategoryValuePregnancyTestResult`\n\n**Applicable Types:**\n\n- `pregnancyTestResult`\n\n| Value           | Meaning           |\n| --------------- | ----------------- |\n| `negative`      | Test was negative |\n| `positive`      | Test was positive |\n| `indeterminate` | Result unclear    |\n\n***\n\n## 6. `HealthCategoryValueProgesteroneTestResult`\n\n**Applicable Types:**\n\n- `progesteroneTestResult`\n\n| Value           | Meaning           |\n| --------------- | ----------------- |\n| `negative`      | Test was negative |\n| `positive`      | Test was positive |\n| `indeterminate` | Result unclear    |\n\n***\n\n## 7. `HealthCategoryValueCervicalMucusQuality`\n\n**Applicable Types:**\n\n- `cervicalMucusQuality`\n\n| Value      | Meaning           |\n| ---------- | ----------------- |\n| `dry`      | Dry               |\n| `sticky`   | Sticky            |\n| `creamy`   | Creamy            |\n| `watery`   | Watery            |\n| `eggWhite` | Egg-white texture |\n\n***\n\n## 8. `HealthCategoryValueContraceptive`\n\n**Applicable Types:**\n\n- `contraceptive`\n\n| Value                | Meaning                   |\n| -------------------- | ------------------------- |\n| `unspecified`        | Not specified             |\n| `implant`            | Contraceptive implant     |\n| `injection`          | Hormonal injection        |\n| `intrauterineDevice` | Intrauterine device (IUD) |\n| `intravaginalRing`   | Vaginal ring              |\n| `oral`               | Oral contraceptive        |\n| `patch`              | Transdermal patch         |\n\n***\n\n## 9. `HealthCategoryValueVaginalBleeding` *(iOS 18+)*\n\n**Applicable Types:**\n\n- `vaginalBleeding`\n\n| Value         | Meaning         |\n| ------------- | --------------- |\n| `unspecified` | Not specified   |\n| `light`       | Light bleeding  |\n| `medium`      | Medium bleeding |\n| `heavy`       | Heavy bleeding  |\n| `none`        | No bleeding     |\n\n***\n\n## 10. `HealthCategoryValueAppetiteChanges`\n\n**Applicable Types:**\n\n- `appetiteChanges`\n\n| Value         | Meaning               |\n| ------------- | --------------------- |\n| `unspecified` | Not specified         |\n| `noChange`    | No change in appetite |\n| `decreased`   | Appetite decreased    |\n| `increased`   | Appetite increased    |\n\n***\n\n## 11. `HealthCategoryValueAppleStandHour`\n\n**Applicable Types:**\n\n- `appleStandHour`\n\n| Value   | Meaning            |\n| ------- | ------------------ |\n| `stood` | User stood up      |\n| `idle`  | User remained idle |\n\n***\n\n## 12. `HealthCategoryValueAppleWalkingSteadinessEvent`\n\n**Applicable Types:**\n\n- `appleWalkingSteadinessEvent`\n\n| Value            | Meaning                     |\n| ---------------- | --------------------------- |\n| `initialLow`     | Initial low stability       |\n| `initialVeryLow` | Initial very low stability  |\n| `repeatLow`      | Repeated low stability      |\n| `repeatVeryLow`  | Repeated very low stability |\n\n***\n\n## 13. `HealthCategoryValueEnvironmentalAudioExposureEvent`\n\n**Applicable Types:**\n\n- `environmentalAudioExposureEvent`\n\n| Value            | Meaning                                 |\n| ---------------- | --------------------------------------- |\n| `momentaryLimit` | Momentary noise exposure limit exceeded |\n\n***\n\n## 14. `HealthCategoryValueHeadphoneAudioExposureEvent`\n\n**Applicable Types:**\n\n- `headphoneAudioExposureEvent`\n\n| Value           | Meaning                                |\n| --------------- | -------------------------------------- |\n| `sevenDayLimit` | Exceeded recommended 7-day audio limit |\n\n***\n\n## 15. `HealthCategoryValueLowCardioFitnessEvent`\n\n**Applicable Types:**\n\n- `lowCardioFitnessEvent`\n\n| Value        | Meaning                           |\n| ------------ | --------------------------------- |\n| `lowFitness` | Low cardio fitness level detected |\n\n***\n\n## Usage Example\n\n```ts\nconst sample = HealthCategorySample.create({\n  type: \"menstrualFlow\",\n  startDate: new Date(\"2025-07-03T10:00:00\"),\n  endDate: new Date(\"2025-07-03T12:00:00\"),\n  value: HealthCategoryValueSeverity.moderate\n})\n\nawait Health.saveCategorySample(sample)\n```\n\n***\n\n## Notes\n\n- Each enum value must match the `type` specified in the sample; using an incorrect enum will result in an error.\n- Ensure HealthKit permissions are granted before saving or reading samples.\n- `HealthCategorySample` values are stored using Apple's `HKCategoryTypeIdentifier` mapping under the hood.\n","routePath":"/doc/Device Capabilities/Health/HealthCategoryValue Types","lang":"en","toc":[{"id":"1-healthcategoryvaluepresence","text":"1. `HealthCategoryValuePresence`","depth":2,"charIndex":420},{"id":"2-healthcategoryvalueseverity","text":"2. `HealthCategoryValueSeverity`","depth":2,"charIndex":817},{"id":"3-healthcategoryvaluesleepanalysis","text":"3. `HealthCategoryValueSleepAnalysis`","depth":2,"charIndex":1312},{"id":"4-healthcategoryvalueovulationtestresult","text":"4. `HealthCategoryValueOvulationTestResult`","depth":2,"charIndex":1936},{"id":"5-healthcategoryvaluepregnancytestresult","text":"5. `HealthCategoryValuePregnancyTestResult`","depth":2,"charIndex":2452},{"id":"6-healthcategoryvalueprogesteronetestresult","text":"6. `HealthCategoryValueProgesteroneTestResult`","depth":2,"charIndex":2754},{"id":"7-healthcategoryvaluecervicalmucusquality","text":"7. `HealthCategoryValueCervicalMucusQuality`","depth":2,"charIndex":3062},{"id":"8-healthcategoryvaluecontraceptive","text":"8. `HealthCategoryValueContraceptive`","depth":2,"charIndex":3411},{"id":"9-healthcategoryvaluevaginalbleeding-ios-18","text":"9. `HealthCategoryValueVaginalBleeding` *(iOS 18+)*","depth":2,"charIndex":3978},{"id":"10-healthcategoryvalueappetitechanges","text":"10. `HealthCategoryValueAppetiteChanges`","depth":2,"charIndex":4336},{"id":"11-healthcategoryvalueapplestandhour","text":"11. `HealthCategoryValueAppleStandHour`","depth":2,"charIndex":4683},{"id":"12-healthcategoryvalueapplewalkingsteadinessevent","text":"12. `HealthCategoryValueAppleWalkingSteadinessEvent`","depth":2,"charIndex":4908},{"id":"13-healthcategoryvalueenvironmentalaudioexposureevent","text":"13. `HealthCategoryValueEnvironmentalAudioExposureEvent`","depth":2,"charIndex":5333},{"id":"14-healthcategoryvalueheadphoneaudioexposureevent","text":"14. `HealthCategoryValueHeadphoneAudioExposureEvent`","depth":2,"charIndex":5649},{"id":"15-healthcategoryvaluelowcardiofitnessevent","text":"15. `HealthCategoryValueLowCardioFitnessEvent`","depth":2,"charIndex":5951},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":6217},{"id":"notes","text":"Notes","depth":2,"charIndex":6501}],"frontmatter":{},"version":"","description":"This document provides a comprehensive reference for all supported HealthCategoryValue enums used with HealthCategorySample.create() and related APIs. Each enum represents a specific categorical value associated with a HealthCategoryType."},{"title":"HealthCharacteristicType <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthCharacteristicType \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThis section describes enums related to **user health profile attributes** and **activity configuration**, including biological sex, blood type, skin type, wheelchair use, and activity move mode. These enums are used with the `Health` API to retrieve user profile data from HealthKit.\n\n***\n\n## 1. `HealthBiologicalSex`\n\nRepresents the user’s biological sex.\n\n| Enum Value | Description     |\n| ---------- | --------------- |\n| `notSet`   | Not set         |\n| `female`   | Female          |\n| `male`     | Male            |\n| `other`    | Other/nonbinary |\n\n***\n\n## 2. `HealthBloodType`\n\nRepresents the user’s blood type.\n\n| Enum Value   | Description |\n| ------------ | ----------- |\n| `notSet`     | Not set     |\n| `aPositive`  | A Positive  |\n| `aNegative`  | A Negative  |\n| `bPositive`  | B Positive  |\n| `bNegative`  | B Negative  |\n| `abPositive` | AB Positive |\n| `abNegative` | AB Negative |\n| `oPositive`  | O Positive  |\n| `oNegative`  | O Negative  |\n\n***\n\n## 3. `HealthFitzpatrickSkinType`\n\nRepresents the Fitzpatrick skin type classification, indicating the skin's response to sun exposure.\n\n| Enum Value | Type     | Description                                 |\n| ---------- | -------- | ------------------------------------------- |\n| `notSet`   | –        | Not set                                     |\n| `I`        | Type I   | Very fair, always burns, never tans         |\n| `II`       | Type II  | Fair, usually burns, tans minimally         |\n| `III`      | Type III | Medium, sometimes mild burn, gradually tans |\n| `IV`       | Type IV  | Olive/dark, rarely burns, tans well         |\n| `V`        | Type V   | Brown skin, rarely burns, tans easily       |\n| `VI`       | Type VI  | Deeply pigmented, never burns               |\n\n***\n\n## 4. `HealthWheelchairUse`\n\nIndicates whether the user uses a wheelchair.\n\n| Enum Value | Description     |\n| ---------- | --------------- |\n| `notSet`   | Not set         |\n| `no`       | Does not use    |\n| `yes`      | Uses wheelchair |\n\n***\n\n## 5. `HealthActivityMoveMode`\n\nRepresents how the user prefers to track their movement goals in the Activity summary.\n\n| Enum Value      | Description                                  |\n| --------------- | -------------------------------------------- |\n| `activeEnergy`  | Based on active energy burned                |\n| `appleMoveTime` | Based on movement duration (Apple Move Time) |\n\n***\n\n## Usage Examples\n\n```ts\n// Check if the user uses a wheelchair\nconst wheelchair = await Health.wheelchairUse()\nif (wheelchair === HealthWheelchairUse.yes) {\n  console.log(\"The user uses a wheelchair\")\n}\n\n// Retrieve and log the user's Fitzpatrick skin type\nconst skinType = await Health.fitzpatrickSkinType()\nswitch (skinType) {\n  case HealthFitzpatrickSkinType.III:\n    console.log(\"Medium skin type, gradually tans\")\n    break\n}\n\n// Determine user's activity move mode\nconst moveMode = await Health.activityMoveMode()\nif (moveMode === HealthActivityMoveMode.appleMoveTime) {\n  console.log(\"The user uses Apple Move Time mode\")\n}\n```\n","routePath":"/doc/Device Capabilities/Health/HealthCharacteristicType","lang":"en","toc":[{"id":"1-healthbiologicalsex","text":"1. `HealthBiologicalSex`","depth":2,"charIndex":459},{"id":"2-healthbloodtype","text":"2. `HealthBloodType`","depth":2,"charIndex":731},{"id":"3-healthfitzpatrickskintype","text":"3. `HealthFitzpatrickSkinType`","depth":2,"charIndex":1138},{"id":"4-healthwheelchairuse","text":"4. `HealthWheelchairUse`","depth":2,"charIndex":1929},{"id":"5-healthactivitymovemode","text":"5. `HealthActivityMoveMode`","depth":2,"charIndex":2176},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":2570}],"frontmatter":{},"version":"","description":"This section describes enums related to user health profile attributes and activity configuration, including biological sex, blood type, skin type, wheelchair use, and activity move mode. These enums are used with the Health API to retrieve user profile data from HealthKit."},{"title":"HealthCorrelation <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthCorrelation \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthCorrelation` class represents a group of health samples that are logically related. It provides an interface for accessing and creating correlation records that group multiple health data types together—such as combining dietary intake and blood pressure readings, or linking ovulation tests with menstrual flow records.\n\n***\n\n## Use Cases\n\n- Grouping blood pressure systolic and diastolic values together\n- Associating food intake with nutritional data\n- Creating a composite record for cycle tracking events\n\n***\n\n## Properties\n\n| Property Name               | Type                                                                                                                 | Description                                                                  |\n| --------------------------- | -------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------- |\n| `uuid`                      | `string`                                                                                                             | A unique identifier for the correlation sample.                              |\n| `correlationType`           | `HealthCorrelationType`                                                                                              | The type of the correlation, such as `\"bloodPressure\"` or `\"food\"`.          |\n| `startDate`                 | `Date`                                                                                                               | The start time of the correlation event.                                     |\n| `endDate`                   | `Date`                                                                                                               | The end time of the correlation event.                                       |\n| `metadata`                  | `Record<string, any> \\| null`                                                                                        | Optional metadata associated with the correlation, such as user annotations. |\n| `samples`                   | `(HealthQuantitySample \\| HealthCumulativeQuantitySample \\| HealthDiscreteQuantitySample \\| HealthCategorySample)[]` | All samples included in this correlation.                                    |\n| `quantitySamples`           | `HealthQuantitySample[]`                                                                                             | A convenience array of all quantity-based samples.                           |\n| `cumulativeQuantitySamples` | `HealthCumulativeQuantitySample[]`                                                                                   | A filtered array of only cumulative quantity samples.                        |\n| `discreteQuantitySamples`   | `HealthDiscreteQuantitySample[]`                                                                                     | A filtered array of only discrete quantity samples.                          |\n| `categorySamples`           | `HealthCategorySample[]`                                                                                             | A filtered array of all category-based samples.                              |\n\n***\n\n## Static Method\n\n### `HealthCorrelation.create(options): HealthCorrelation | null`\n\nCreates a new correlation with one or more health samples.\n\n#### Parameters\n\n| Parameter   | Type                                               | Required | Description                                                  |\n| ----------- | -------------------------------------------------- | -------- | ------------------------------------------------------------ |\n| `type`      | `HealthCorrelationType`                            | Yes      | The correlation type, e.g., `\"bloodPressure\"` or `\"food\"`.   |\n| `startDate` | `Date`                                             | Yes      | The start time of the correlation.                           |\n| `endDate`   | `Date`                                             | Yes      | The end time of the correlation.                             |\n| `metadata`  | `Record<string, any> \\| null`                      | No       | Optional metadata to store alongside the correlation.        |\n| `objects`   | `(HealthQuantitySample \\| HealthCategorySample)[]` | Yes      | The array of health samples to associate in the correlation. |\n\n#### Returns\n\n- A new `HealthCorrelation` instance if the parameters are valid.\n- Returns `null` if the type and samples are incompatible or validation fails.\n\n***\n\n## Examples\n\n### Example 1: Create a blood pressure correlation\n\n```ts\nconst systolic = HealthQuantitySample.create({\n  type: \"bloodPressureSystolic\",\n  startDate: new Date(\"2025-07-04T08:00:00\"),\n  endDate: new Date(\"2025-07-04T08:01:00\"),\n  value: 120,\n  unit: HealthUnit.millimeterOfMercury()\n})\n\nconst diastolic = HealthQuantitySample.create({\n  type: \"bloodPressureDiastolic\",\n  startDate: new Date(\"2025-07-04T08:00:00\"),\n  endDate: new Date(\"2025-07-04T08:01:00\"),\n  value: 80,\n  unit: HealthUnit.millimeterOfMercury()\n})\n\nconst correlation = HealthCorrelation.create({\n  type: \"bloodPressure\",\n  startDate: systolic.startDate,\n  endDate: systolic.endDate,\n  objects: [systolic, diastolic]\n})\n\nif (correlation) {\n  // save correlation...\n}\n```\n\n***\n\n### Example 2: Query and inspect a correlation\n\n```ts\nfor (const sample of correlation.quantitySamples) {\n  const value = sample.quantityValue(HealthUnit.millimeterOfMercury())\n  console.log(`${sample.quantityType}: ${value}`)\n}\n```\n\n***\n\n## Notes\n\n- Samples in a correlation must match the expected types for the given `HealthCorrelationType`.\n- Currently supported correlation types include `\"bloodPressure\"` and `\"food\"`.\n- This class allows grouping samples for higher-level reasoning or visualization of composite health events.\n","routePath":"/doc/Device Capabilities/Health/HealthCorrelation","lang":"en","toc":[{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":499},{"id":"properties","text":"Properties","depth":2,"charIndex":688},{"id":"static-method","text":"Static Method","depth":2,"charIndex":3469},{"id":"healthcorrelationcreateoptions-healthcorrelation--null","text":"`HealthCorrelation.create(options): HealthCorrelation | null`","depth":3,"charIndex":3487},{"id":"parameters","text":"Parameters","depth":4,"charIndex":3614},{"id":"returns","text":"Returns","depth":4,"charIndex":4633},{"id":"examples","text":"Examples","depth":2,"charIndex":4798},{"id":"example-1-create-a-blood-pressure-correlation","text":"Example 1: Create a blood pressure correlation","depth":3,"charIndex":4811},{"id":"example-2-query-and-inspect-a-correlation","text":"Example 2: Query and inspect a correlation","depth":3,"charIndex":5555},{"id":"notes","text":"Notes","depth":2,"charIndex":5794}],"frontmatter":{},"version":"","description":"The HealthCorrelation class represents a group of health samples that are logically related. It provides an interface for accessing and creating correlation records that group multiple health data types together—such as combining dietary intake and blood pressure readings, or linking ovulation tests with menstrual flow records."},{"title":"HealthHeartbeatSeriesSample <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthHeartbeatSeriesSample \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthHeartbeatSeriesSample` class provides an interface for accessing **heartbeat series samples**, representing a series of individual heartbeat intervals recorded over time. These samples are typically used for analyzing heart rhythm and detecting irregularities such as atrial fibrillation.\n\nThis class is returned by the public API method `Health.queryHeartbeatSeriesSamples()`.\n\n***\n\n## Use Cases\n\n- **Monitoring heart rhythm** during workouts or recovery\n- **Analyzing irregular heartbeats**\n- **Studying heart behavior** during sleep or rest\n- **Generating datasets** for research or diagnostics\n\n***\n\n## Class: `HealthHeartbeatSeriesSample`\n\n### Properties\n\n| Property     | Type                          | Description                                                           |\n| ------------ | ----------------------------- | --------------------------------------------------------------------- |\n| `uuid`       | `string`                      | A unique identifier for the sample                                    |\n| `sampleType` | `string`                      | The type of the sample. Typically `\"HKHeartbeatSeriesTypeIdentifier\"` |\n| `startDate`  | `Date`                        | When the heartbeat series recording began                             |\n| `endDate`    | `Date`                        | When the recording ended                                              |\n| `count`      | `number`                      | Total number of heartbeat intervals in the series                     |\n| `metadata`   | `Record<string, any> \\| null` | Optional metadata including device info or annotations                |\n\n> **Note**: This class currently does not expose individual RR intervals. It represents only the series summary.\n\n***\n\n## Method: `Health.queryHeartbeatSeriesSamples(options?)`\n\n### Definition\n\n```ts\nfunction queryHeartbeatSeriesSamples(\n  options?: {\n    startDate?: Date\n    endDate?: Date\n    limit?: number\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    sortDescriptors?: Array<{\n      key: \"startDate\" | \"endDate\" | \"count\"\n      order?: \"forward\" | \"reverse\"\n    }>\n    requestPermissions?: HealthQuantityType[]\n  }\n): Promise<HealthHeartbeatSeriesSample[]>\n```\n\n### Parameters\n\n- `startDate` *(optional)*: Only return samples on or after this date.\n- `endDate` *(optional)*: Only return samples on or before this date.\n- `limit` *(optional)*: Maximum number of samples to return.\n- `strictStartDate` *(optional)*: If true, only include samples whose `startDate` equals `startDate`.\n- `strictEndDate` *(optional)*: If true, only include samples whose `endDate` equals `endDate`.\n- `sortDescriptors` *(optional)*: Sort results by `startDate`, `endDate`, or `count`, in forward or reverse order.\n- `requestPermissions` *(optional)*: An array of health quantity types for which to request permissions before querying. You must request permissions for the types you want to query. Default only requests permissions for the `heartbeat`, `heartRateVariabilitySDNN` and `heartRate` types.\n\n### Returns\n\nA Promise resolving to an array of `HealthHeartbeatSeriesSample` instances, sorted according to the provided descriptors.\n\n***\n\n## Example\n\n```ts\nasync function fetchHeartbeatSeries() {\n  const heartbeatSamples = await Health.queryHeartbeatSeriesSamples({\n    startDate: new Date('2024-01-01'),\n    endDate: new Date(),\n    sortDescriptors: [\n      { key: 'startDate', order: 'reverse' }\n    ],\n    limit: 5,\n  })\n\n  for (const sample of heartbeatSamples) {\n    console.log('UUID:', sample.uuid)\n    console.log('Start:', sample.startDate)\n    console.log('End:', sample.endDate)\n    console.log('Beats Count:', sample.count)\n    console.log('Metadata:', sample.metadata)\n  }\n}\n```\n\n***\n\n## Notes\n\n- If no permission is granted to access heartbeat data, the returned array will be empty.\n- Heartbeat series are most commonly recorded by Apple Watch and represent detailed rhythm data over short durations.\n","routePath":"/doc/Device Capabilities/Health/HealthHeartbeatSeriesSample","lang":"en","toc":[{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":566},{"id":"class-healthheartbeatseriessample","text":"Class: `HealthHeartbeatSeriesSample`","depth":2,"charIndex":786},{"id":"properties","text":"Properties","depth":3,"charIndex":827},{"id":"method-healthqueryheartbeatseriessamplesoptions","text":"Method: `Health.queryHeartbeatSeriesSamples(options?)`","depth":2,"charIndex":1931},{"id":"definition","text":"Definition","depth":3,"charIndex":1990},{"id":"parameters","text":"Parameters","depth":3,"charIndex":2396},{"id":"returns","text":"Returns","depth":3,"charIndex":3216},{"id":"example","text":"Example","depth":2,"charIndex":3357},{"id":"notes","text":"Notes","depth":2,"charIndex":3917}],"frontmatter":{},"version":"","description":"The HealthHeartbeatSeriesSample class provides an interface for accessing heartbeat series samples, representing a series of individual heartbeat intervals recorded over time. These samples are typically used for analyzing heart rhythm and detecting irregularities such as atrial fibrillation. This class is returned by the public API method Health.queryHeartbeatSeriesSamples()."},{"title":"HealthKit Permission Behavior <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthKit Permission Behavior \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nWhen using the Health module provided by the Scripting app to access iOS HealthKit data, it's important to understand how HealthKit handles authorization and how Scripting adapts to these behaviors. This document explains the authorization flow, Promise behavior, and best practices for handling missing permissions.\n\n***\n\n## Key Characteristics of iOS HealthKit Authorization\n\n1. **No public API to check authorization status**\n   iOS does not provide any public API to determine whether a specific HealthKit data type has been authorized or denied. Apps cannot check this directly.\n\n2. **Authorization prompt appears only once per type**\n   The system will show a permission dialog only if the data type's status is `notDetermined`. Once the user grants or denies access, the dialog will not reappear.\n\n3. **No system-level error if access is denied**\n   If an app attempts to access unauthorized data, HealthKit will not throw a system error. Instead, some APIs return empty results, while others may reject the Promise.\n\n***\n\n## Scripting App Behavior\n\n### Automatic Authorization Request\n\nWhen you call any Health API that requires access to protected data, the Scripting app will automatically trigger the system permission dialog **if any of the required types are not yet determined**.\n\nFor example:\n\n```ts\nawait Health.dateOfBirth()\nawait Health.bloodType()\nawait Health.queryQuantitySamples('stepCount')\n```\n\n***\n\n## Promise Behavior by API\n\n| Method                             | Behavior if unauthorized | Promise rejects? |\n| ---------------------------------- | ------------------------ | ---------------- |\n| `Health.queryQuantitySamples()`    | Returns empty array `[]` | No               |\n| `Health.queryCategorySamples()`    | Returns empty array `[]` | No               |\n| `Health.dateOfBirth()`             | No result                | Yes              |\n| `Health.bloodType()` (and similar) | No result                | Yes              |\n\n***\n\n## Code Examples\n\n### Example 1: Querying samples (returns empty array when unauthorized)\n\n```ts\nconst steps = await Health.queryQuantitySamples('stepCount')\n\nif (steps.length === 0) {\n  console.log(\"No step data returned. This may be due to lack of permission or no recorded data.\")\n}\n```\n\n### Example 2: Reading profile information (rejects if unauthorized)\n\n```ts\ntry {\n  const dob = await Health.dateOfBirth()\n  console.log(`Date of birth: ${dob.year}-${dob.month}-${dob.day}`)\n} catch (err) {\n  console.warn(\"Failed to read date of birth. The user may not have granted permission.\")\n}\n```\n\n***\n\n## Permission Merging on Multiple Calls\n\nIf you call multiple permission-requiring methods simultaneously using `Promise.all`, Scripting will automatically merge the required permissions into a **single system dialog** request. This improves user experience by avoiding repeated prompts.\n\n```ts\ntry {\n  const [dob, blood] = await Promise.all([\n    Health.dateOfBirth(),\n    Health.bloodType()\n  ])\n  console.log(dob, blood)\n} catch (err) {\n  console.warn(\"User may have denied one or more requested permissions.\")\n}\n```\n\n***\n\n## Best Practices and UI Recommendations\n\n| Situation                         | Recommended Handling                                       |\n| --------------------------------- | ---------------------------------------------------------- |\n| First-time access to Health data  | Inform the user what data will be accessed and why         |\n| Empty data returned               | Check for empty array or null and show a helpful message   |\n| Rejected Promise from profile API | Use `try...catch` and offer a recovery path                |\n| Confused users with missing data  | Provide clear instructions for checking Health permissions |\n\n***\n\n## Manual Authorization\n\nGo to **Health app > Data Access & Devices > Scripting**, and make sure the necessary data types are enabled.\n","routePath":"/doc/Device Capabilities/Health/HealthKit Permission Behavior","lang":"en","toc":[{"id":"key-characteristics-of-ios-healthkit-authorization","text":"Key Characteristics of iOS HealthKit Authorization","depth":2,"charIndex":496},{"id":"scripting-app-behavior","text":"Scripting App Behavior","depth":2,"charIndex":1203},{"id":"automatic-authorization-request","text":"Automatic Authorization Request","depth":3,"charIndex":1230},{"id":"promise-behavior-by-api","text":"Promise Behavior by API","depth":2,"charIndex":1597},{"id":"code-examples","text":"Code Examples","depth":2,"charIndex":2141},{"id":"example-1-querying-samples-returns-empty-array-when-unauthorized","text":"Example 1: Querying samples (returns empty array when unauthorized)","depth":3,"charIndex":2159},{"id":"example-2-reading-profile-information-rejects-if-unauthorized","text":"Example 2: Reading profile information (rejects if unauthorized)","depth":3,"charIndex":2432},{"id":"permission-merging-on-multiple-calls","text":"Permission Merging on Multiple Calls","depth":2,"charIndex":2741},{"id":"best-practices-and-ui-recommendations","text":"Best Practices and UI Recommendations","depth":2,"charIndex":3267},{"id":"manual-authorization","text":"Manual Authorization","depth":2,"charIndex":3909}],"frontmatter":{},"version":"","description":"When using the Health module provided by the Scripting app to access iOS HealthKit data, it's important to understand how HealthKit handles authorization and how Scripting adapts to these behaviors. This document explains the authorization flow, Promise behavior, and best practices for handling missing permissions."},{"title":"HealthQuantitySample <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthQuantitySample \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthQuantitySample` class represents a single health quantity data point, such as a heart rate measurement, a recorded step count, or a logged calorie value. It provides information about the measurement’s type, time interval, unit, value, and optional metadata.\n\nThis class is the base for more specialized subclasses: `HealthCumulativeQuantitySample` and `HealthDiscreteQuantitySample`.\n\n***\n\n## Overview\n\nA `HealthQuantitySample` encapsulates the following:\n\n- A **specific health metric** (e.g., steps, heart rate)\n- A **value with unit**\n- A **time window** representing when the data was recorded\n- Optional **metadata** for context or classification\n\nThis class is primarily used for:\n\n- Reading individual health data samples\n- Writing new health data samples\n- Converting values between units\n\n***\n\n## Properties\n\n| Property       | Type                          | Description                              |\n| -------------- | ----------------------------- | ---------------------------------------- |\n| `uuid`         | `string`                      | Unique identifier for the sample         |\n| `quantityType` | `HealthQuantityType`          | Type of the health metric                |\n| `startDate`    | `Date`                        | Start of the measurement                 |\n| `endDate`      | `Date`                        | End of the measurement                   |\n| `count`        | `number`                      | Number of samples aggregated (usually 1) |\n| `metadata`     | `Record<string, any> \\| null` | Optional metadata dictionary             |\n\n***\n\n## Methods\n\n### `quantityValue(unit: HealthUnit): number`\n\nConverts the sample's stored value to the specified unit.\n\n**Parameters:**\n\n- `unit`: A `HealthUnit` instance (e.g., `HealthUnit.kilocalorie()`)\n\n**Returns:**\n\n- The converted numeric value.\n\n**Example:**\n\n```ts\nconst bpm = sample.quantityValue(HealthUnit.count().divided(HealthUnit.minute()))\nconsole.log(`Heart Rate: ${bpm} bpm`)\n```\n\n***\n\n## Static Methods\n\n### `HealthQuantitySample.create(options): HealthQuantitySample | null`\n\nCreates a new quantity sample with the specified parameters.\n\n**Parameters:**\n\n```ts\n{\n  type: HealthQuantityType\n  startDate: Date\n  endDate: Date\n  value: number\n  unit: HealthUnit\n  metadata?: Record<string, any> | null\n}\n```\n\n**Returns:**\n\n- A new `HealthQuantitySample` if valid, otherwise `null`.\n\n**Example:**\n\n```ts\nconst sample = HealthQuantitySample.create({\n  type: 'stepCount',\n  startDate: new Date('2025-07-01T09:00:00'),\n  endDate: new Date('2025-07-01T09:01:00'),\n  value: 200,\n  unit: HealthUnit.count(),\n  metadata: { source: 'manualEntry' }\n})\n```\n\n***\n\n# Subclass: HealthCumulativeQuantitySample\n\nThe `HealthCumulativeQuantitySample` class represents cumulative data (i.e., totals over time), such as energy burned or distance traveled.\n\n## Additional Properties\n\n| Property                  | Type      | Description                                          |\n| ------------------------- | --------- | ---------------------------------------------------- |\n| `hasUndeterminedDuration` | `boolean` | Indicates whether the sample’s duration is uncertain |\n\n## Additional Methods\n\n### `sumQuantity(unit: HealthUnit): number`\n\nReturns the total accumulated quantity in the specified unit.\n\n**Example:**\n\n```ts\nconst totalKcal = cumulativeSample.sumQuantity(HealthUnit.kilocalorie())\nconsole.log(`Total active energy: ${totalKcal} kcal`)\n```\n\n### `quantityValue(unit: HealthUnit): number`\n\nAlias for `sumQuantity()` — retrieves the total value in the given unit.\n\n***\n\n# Subclass: HealthDiscreteQuantitySample\n\nThe `HealthDiscreteQuantitySample` class represents a series of discrete values sampled at specific times — such as heart rate measurements or step counts across a time window.\n\n## Additional Properties\n\n| Property                         | Type                         | Description                                   |\n| -------------------------------- | ---------------------------- | --------------------------------------------- |\n| `mostRecentQuantityDateInterval` | `HealthDateInterval \\| null` | Time window of the most recent recorded value |\n\n## Additional Methods\n\n| Method                     | Description                                             |\n| -------------------------- | ------------------------------------------------------- |\n| `averageQuantity(unit)`    | Returns the average of all values in the specified unit |\n| `maximumQuantity(unit)`    | Returns the maximum value in the specified unit         |\n| `minimumQuantity(unit)`    | Returns the minimum value in the specified unit         |\n| `mostRecentQuantity(unit)` | Returns the most recent recorded value (if available)   |\n\n### Example:\n\n```ts\nconst avg = discreteSample.averageQuantity(HealthUnit.count())\nconst max = discreteSample.maximumQuantity(HealthUnit.count())\nconst recent = discreteSample.mostRecentQuantity(HealthUnit.count())\nconsole.log(`Average: ${avg}, Max: ${max}, Recent: ${recent}`)\n```\n\n***\n\n## Use Cases\n\n| Scenario                          | Use This Class                   | Example                                     |\n| --------------------------------- | -------------------------------- | ------------------------------------------- |\n| Record or retrieve a single value | `HealthQuantitySample`           | A manually entered weight                   |\n| Work with totals over time        | `HealthCumulativeQuantitySample` | Total distance walked in 1 hour             |\n| Analyze statistics across samples | `HealthDiscreteQuantitySample`   | Min/Max/Average heart rate during a workout |\n\n***\n\n## Related Types\n\n- `HealthUnit`: Represents the unit of measurement.\n- `HealthQuantityType`: Specifies the kind of health metric being measured.\n- `HealthDateInterval`: A time range used for timestamping specific values.\n","routePath":"/doc/Device Capabilities/Health/HealthQuantitySample","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":566},{"id":"properties","text":"Properties","depth":2,"charIndex":979},{"id":"methods","text":"Methods","depth":2,"charIndex":1752},{"id":"quantityvalueunit-healthunit-number","text":"`quantityValue(unit: HealthUnit): number`","depth":3,"charIndex":1764},{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":2153},{"id":"healthquantitysamplecreateoptions-healthquantitysample--null","text":"`HealthQuantitySample.create(options): HealthQuantitySample | null`","depth":3,"charIndex":2172},{"id":"additional-properties","text":"Additional Properties","depth":2,"charIndex":3003},{"id":"additional-methods","text":"Additional Methods","depth":2,"charIndex":3321},{"id":"sumquantityunit-healthunit-number","text":"`sumQuantity(unit: HealthUnit): number`","depth":3,"charIndex":3344},{"id":"quantityvalueunit-healthunit-number-1","text":"`quantityValue(unit: HealthUnit): number`","depth":3,"charIndex":3604},{"id":"additional-properties-1","text":"Additional Properties","depth":2,"charIndex":3950},{"id":"additional-methods-1","text":"Additional Methods","depth":2,"charIndex":4325},{"id":"example","text":"Example:","depth":3,"charIndex":4883},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":5171},{"id":"related-types","text":"Related Types","depth":2,"charIndex":5786}],"frontmatter":{},"version":"","description":"The HealthQuantitySample class represents a single health quantity data point, such as a heart rate measurement, a recorded step count, or a logged calorie value. It provides information about the measurement’s type, time interval, unit, value, and optional metadata. This class is the base for more specialized subclasses: HealthCumulativeQuantitySample and HealthDiscreteQuantitySample."},{"title":"HealthQuantityType <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthQuantityType \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThis document lists all supported `HealthQuantityType` identifiers, categorized by domain. Each type is associated with a measurable health-related metric and can be used to track fitness, vital signs, nutrition, environment, and more.\n\n***\n\n## 1. Body Measurements\n\n| Identifier                      | Description                                             |\n| ------------------------------- | ------------------------------------------------------- |\n| `bodyMass`                      | Weight of the body (in kilograms or pounds)             |\n| `bodyMassIndex`                 | Body Mass Index (BMI), a weight-to-height ratio         |\n| `height`                        | Height of the user                                      |\n| `bodyFatPercentage`             | Percentage of fat in the body                           |\n| `leanBodyMass`                  | Mass excluding fat, bones, and organs                   |\n| `waistCircumference`            | Waist measurement, often used in metabolic health       |\n| `appleSleepingWristTemperature` | Skin temperature during sleep from Apple Watch          |\n| `bodyTemperature`               | Core body temperature                                   |\n| `basalBodyTemperature`          | Minimum daily body temperature, often used in fertility |\n\n***\n\n## 2. Activity & Fitness\n\n| Identifier                    | Description                                    |\n| ----------------------------- | ---------------------------------------------- |\n| `stepCount`                   | Number of steps taken                          |\n| `distanceWalkingRunning`      | Distance walked or run                         |\n| `flightsClimbed`              | Number of floors climbed                       |\n| `activeEnergyBurned`          | Active calories burned through movement        |\n| `basalEnergyBurned`           | Calories burned at rest                        |\n| `appleExerciseTime`           | Time spent in Apple-defined exercise           |\n| `appleMoveTime`               | Move ring time for activity summary            |\n| `appleStandTime`              | Time standing (Apple Watch)                    |\n| `pushCount`                   | Number of wheelchair pushes                    |\n| `distanceWheelchair`          | Distance traveled via wheelchair               |\n| `nikeFuel`                    | Deprecated Nike activity score                 |\n| `estimatedWorkoutEffortScore` | Effort score estimation (Apple Workout)        |\n| `workoutEffortScore`          | Direct effort score from workouts              |\n| `physicalEffort`              | Intensity estimation of effort during workouts |\n\n***\n\n## 3. Exercise-Specific Metrics\n\n| Identifier                        | Description                              |\n| --------------------------------- | ---------------------------------------- |\n| `cyclingSpeed`                    | Speed during cycling                     |\n| `cyclingPower`                    | Power output during cycling              |\n| `cyclingCadence`                  | Pedal revolutions per minute             |\n| `cyclingFunctionalThresholdPower` | Max sustainable power for cycling        |\n| `distanceCycling`                 | Distance cycled                          |\n| `distanceRowing`                  | Distance rowed                           |\n| `rowingSpeed`                     | Speed while rowing                       |\n| `distanceSwimming`                | Distance swum                            |\n| `swimmingStrokeCount`             | Number of swimming strokes               |\n| `distancePaddleSports`            | Distance paddled (e.g., kayaking)        |\n| `paddleSportsSpeed`               | Speed during paddle sports               |\n| `distanceSkatingSports`           | Distance in skating sports               |\n| `distanceDownhillSnowSports`      | Distance in downhill skiing/snowboarding |\n| `distanceCrossCountrySkiing`      | Distance in cross-country skiing         |\n| `crossCountrySkiingSpeed`         | Speed in cross-country skiing            |\n\n***\n\n## 4. Running & Walking Analysis\n\n| Identifier                       | Description                       |\n| -------------------------------- | --------------------------------- |\n| `runningSpeed`                   | Running speed                     |\n| `runningPower`                   | Running power output              |\n| `runningStrideLength`            | Stride length                     |\n| `runningVerticalOscillation`     | Vertical bounce during running    |\n| `runningGroundContactTime`       | Foot-ground contact time          |\n| `walkingStepLength`              | Step length while walking         |\n| `walkingSpeed`                   | Walking speed                     |\n| `walkingAsymmetryPercentage`     | Gait asymmetry                    |\n| `walkingDoubleSupportPercentage` | % of time both feet are on ground |\n| `appleWalkingSteadiness`         | Apple’s fall risk metric          |\n| `walkingHeartRateAverage`        | Avg heart rate during walking     |\n| `sixMinuteWalkTestDistance`      | Distance in 6-minute walk test    |\n| `stairAscentSpeed`               | Speed ascending stairs            |\n| `stairDescentSpeed`              | Speed descending stairs           |\n\n***\n\n## 5. Heart & Vitals\n\n| Identifier                   | Description                             |\n| ---------------------------- | --------------------------------------- |\n| `heartRate`                  | Beats per minute                        |\n| `restingHeartRate`           | Resting heart rate                      |\n| `walkingHeartRateAverage`    | Average heart rate while walking        |\n| `heartRateVariabilitySDNN`   | HRV: Standard deviation of NN intervals |\n| `heartRateRecoveryOneMinute` | HR recovery 1 min post-exercise         |\n| `peripheralPerfusionIndex`   | Blood perfusion index                   |\n| `atrialFibrillationBurden`   | AFib percentage over time               |\n| `vo2Max`                     | Max oxygen uptake, fitness metric       |\n| `bloodPressureSystolic`      | Systolic blood pressure                 |\n| `bloodPressureDiastolic`     | Diastolic blood pressure                |\n| `oxygenSaturation`           | Blood oxygen %                          |\n| `bloodGlucose`               | Blood sugar level                       |\n| `insulinDelivery`            | Insulin delivered                       |\n| `inhalerUsage`               | Number of inhaler puffs                 |\n| `respiratoryRate`            | Breaths per minute                      |\n| `forcedExpiratoryVolume1`    | Volume in first second of exhalation    |\n| `forcedVitalCapacity`        | Max air exhaled after deep breath       |\n| `peakExpiratoryFlowRate`     | Peak flow during exhalation             |\n\n***\n\n## 6. Audio & Environment\n\n| Identifier                    | Description                               |\n| ----------------------------- | ----------------------------------------- |\n| `environmentalAudioExposure`  | Ambient sound levels                      |\n| `environmentalSoundReduction` | Noise reduction via headphones            |\n| `headphoneAudioExposure`      | Audio exposure from headphones            |\n| `uvExposure`                  | Ultraviolet radiation exposure            |\n| `timeInDaylight`              | Time spent in daylight (Apple Watch)      |\n| `underwaterDepth`             | Depth below water during activity         |\n| `waterTemperature`            | Temperature of water when swimming/diving |\n\n***\n\n## 7. Nutrition (Dietary Intake)\n\n| Identifier                  | Description                 |\n| --------------------------- | --------------------------- |\n| `dietaryEnergyConsumed`     | Total dietary energy intake |\n| `dietaryProtein`            | Protein intake              |\n| `dietaryCarbohydrates`      | Carbohydrate intake         |\n| `dietaryFatTotal`           | Total fat intake            |\n| `dietaryFatSaturated`       | Saturated fat               |\n| `dietaryFatMonounsaturated` | Monounsaturated fat         |\n| `dietaryFatPolyunsaturated` | Polyunsaturated fat         |\n| `dietarySugar`              | Total sugar                 |\n| `dietaryFiber`              | Fiber                       |\n| `dietaryWater`              | Water intake (in mL or L)   |\n| `dietaryCaffeine`           | Caffeine intake             |\n| `dietaryCholesterol`        | Cholesterol intake          |\n| `dietarySodium`             | Sodium intake               |\n| `dietaryPotassium`          | Potassium intake            |\n| `dietaryCalcium`            | Calcium intake              |\n| `dietaryIron`               | Iron intake                 |\n| `dietaryMagnesium`          | Magnesium intake            |\n| `dietaryZinc`               | Zinc intake                 |\n| `dietaryIodine`             | Iodine intake               |\n| `dietaryVitaminA`           | Vitamin A intake            |\n| `dietaryVitaminB6`          | Vitamin B6 intake           |\n| `dietaryVitaminB12`         | Vitamin B12 intake          |\n| `dietaryVitaminC`           | Vitamin C intake            |\n| `dietaryVitaminD`           | Vitamin D intake            |\n| `dietaryVitaminE`           | Vitamin E intake            |\n| `dietaryVitaminK`           | Vitamin K intake            |\n| `dietaryThiamin`            | Vitamin B1 intake           |\n| `dietaryRiboflavin`         | Vitamin B2 intake           |\n| `dietaryNiacin`             | Vitamin B3 intake           |\n| `dietaryPantothenicAcid`    | Vitamin B5 intake           |\n| `dietaryFolate`             | Folate intake               |\n| `dietaryCopper`             | Copper intake               |\n| `dietarySelenium`           | Selenium intake             |\n| `dietaryChromium`           | Chromium intake             |\n| `dietaryManganese`          | Manganese intake            |\n| `dietaryMolybdenum`         | Molybdenum intake           |\n| `dietaryPhosphorus`         | Phosphorus intake           |\n| `dietaryBiotin`             | Biotin intake               |\n\n***\n\n## 8. Lifestyle & Others\n\n| Identifier                           | Description                        |\n| ------------------------------------ | ---------------------------------- |\n| `bloodAlcoholContent`                | Blood alcohol %                    |\n| `numberOfAlcoholicBeverages`         | Count of alcoholic drinks          |\n| `numberOfTimesFallen`                | Fall detection count               |\n| `appleSleepingBreathingDisturbances` | Sleep breathing irregularity count |\n\n***\n\n## When to Use `HealthQuantityType`\n\nYou will provide a `HealthQuantityType` string when:\n\n1. **Querying quantity samples**:\n\n```ts\nconst results = await Health.queryQuantitySamples({\n  type: \"stepCount\",\n  startDate: new Date(\"2025-07-01\"),\n  endDate: new Date(\"2025-07-02\")\n})\n```\n\n2. **Writing a quantity sample**:\n\n```ts\nconst sample = HealthQuantitySample.create({\n  type: \"bodyMass\",\n  unit: HealthUnit.gramUnit(HealthUnitPrefix.kilo),\n  value: 70.0,\n  startDate: new Date(\"2025-07-01 00:00:00\"),\n  endDate:  new Date(\"2025-07-02 00:00:00\"),\n})\n\nawait Health.saveQuantitySample(sample)\n```\n\n3. **Reading statistics from a workout**:\n\n```ts\nconst stat = workout.allStatistics[\"heartRate\"]\nconst avg = stat?.averageQuantity(HealthUnit.count().divided(HealthUnit.minute()))\n```\n","routePath":"/doc/Device Capabilities/Health/HealthQuantityType","lang":"en","toc":[{"id":"1-body-measurements","text":"1. Body Measurements","depth":2,"charIndex":404},{"id":"2-activity--fitness","text":"2. Activity & Fitness","depth":2,"charIndex":1469},{"id":"3-exercise-specific-metrics","text":"3. Exercise-Specific Metrics","depth":2,"charIndex":2829},{"id":"4-running--walking-analysis","text":"4. Running & Walking Analysis","depth":2,"charIndex":4245},{"id":"5-heart--vitals","text":"5. Heart & Vitals","depth":2,"charIndex":5453},{"id":"6-audio--environment","text":"6. Audio & Environment","depth":2,"charIndex":6981},{"id":"7-nutrition-dietary-intake","text":"7. Nutrition (Dietary Intake)","depth":2,"charIndex":7716},{"id":"8-lifestyle--others","text":"8. Lifestyle & Others","depth":2,"charIndex":10236},{"id":"when-to-use-healthquantitytype","text":"When to Use `HealthQuantityType`","depth":2,"charIndex":10736}],"frontmatter":{},"version":"","description":"This document lists all supported HealthQuantityType identifiers, categorized by domain. Each type is associated with a measurable health-related metric and can be used to track fitness, vital signs, nutrition, environment, and more."},{"title":"HealthStatistics <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthStatistics \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthStatistics` class provides an interface for analyzing **aggregated health quantity data** over a specified time range. It allows you to compute key statistical values such as:\n\n- Total duration\n- Average, sum, minimum, maximum quantities\n- Most recent value and its date range\n\nThis class is ideal for generating summaries of daily, weekly, or custom health data intervals.\n\n***\n\n## Overview\n\nEach `HealthStatistics` instance represents statistics for a specific `HealthQuantityType` within a defined `startDate` and `endDate` range. You can optionally filter statistics by a `HealthSource` (e.g., only include samples recorded by a specific device or app).\n\n***\n\n## Properties\n\n| Property       | Type                     | Description                                                       |\n| -------------- | ------------------------ | ----------------------------------------------------------------- |\n| `quantityType` | `HealthQuantityType`     | The quantity type the statistics are based on (e.g., `stepCount`) |\n| `startDate`    | `Date`                   | The beginning of the statistics window                            |\n| `endDate`      | `Date`                   | The end of the statistics window                                  |\n| `sources`      | `HealthSource[] \\| null` | The list of sources contributing data to these statistics         |\n\n***\n\n## Methods\n\n### `duration(unit: HealthUnit, source?: HealthSource): number | null`\n\nReturns the total accumulated **duration** of all samples within the range.\n\n- `unit`: The unit of time to return the duration in (e.g., seconds, minutes).\n- `source` *(optional)*: If provided, only samples from that source will be included.\n\nReturns `null` if no matching samples are found.\n\n***\n\n### `averageQuantity(unit: HealthUnit, source?: HealthSource): number | null`\n\nReturns the **average quantity** value of all samples.\n\n- `unit`: The unit to express the average in (e.g., `HealthUnit.bpm()`).\n- `source` *(optional)*: Filter samples by source.\n\n***\n\n### `sumQuantity(unit: HealthUnit, source?: HealthSource): number | null`\n\nReturns the **total sum** of quantity values over the date range.\n\n***\n\n### `minimumQuantity(unit: HealthUnit, source?: HealthSource): number | null`\n\nReturns the **minimum** recorded value in the given unit.\n\n***\n\n### `maximumQuantity(unit: HealthUnit, source?: HealthSource): number | null`\n\nReturns the **maximum** recorded value in the given unit.\n\n***\n\n### `mostRecentQuantity(unit: HealthUnit, source?: HealthSource): number | null`\n\nReturns the **most recent** quantity value recorded within the range. If no values are available, returns `null`.\n\n***\n\n### `mostRecentQuantityDateInterval(source?: HealthSource): HealthDateInterval | null`\n\nReturns a `HealthDateInterval` object indicating the **start and end time** of the most recent recorded value. Useful for knowing **when** the last data point was recorded.\n\n***\n\n## Example Usage\n\n```ts\nconst stats = await Health.queryStatistics({\n  type: \"stepCount\",\n  startDate: new Date(\"2025-07-01\"),\n  endDate: new Date(\"2025-07-02\")\n})\n\nconst totalSteps = stats.sumQuantity(HealthUnit.count())\nconst average = stats.averageQuantity(HealthUnit.count())\nconst mostRecent = stats.mostRecentQuantity(HealthUnit.count())\nconst recentInterval = stats.mostRecentQuantityDateInterval()\n\nconsole.log(\"Steps Summary:\")\nconsole.log(\"Total:\", totalSteps)\nconsole.log(\"Average:\", average)\nconsole.log(\"Most Recent:\", mostRecent)\nconsole.log(\"Interval:\", recentInterval)\n```\n\n***\n\n## `HealthSource` Class\n\nThe `HealthSource` class represents the **origin** of a HealthKit sample. It is typically an app or device that generated or synced the health data.\n\n### Properties\n\n| Property           | Type     | Description                                              |\n| ------------------ | -------- | -------------------------------------------------------- |\n| `bundleIdentifier` | `string` | The app or device bundle ID (e.g., `\"com.apple.Health\"`) |\n| `name`             | `string` | A human-readable name for the source                     |\n\n### Static Methods\n\n#### `HealthSource.forCurrentApp(): HealthSource`\n\nReturns a `HealthSource` object representing the current Scripting app. This can be used to filter statistics only for data recorded or synced by your app.\n\n***\n\n## Example: Filtering by Source\n\n```ts\nconst stats = await Health.queryStatistics(\"heartRate\", {\n  startDate: new Date(\"2025-07-01\"),\n  endDate: new Date(\"2025-07-02\")\n})\n\nconst currentAppSource = HealthSource.forCurrentApp()\nconst averageHR = stats.averageQuantity(HealthUnit.countPerMinute(), currentAppSource)\n\nconsole.log(\"Heart rate from this app:\", averageHR)\n```\n\n***\n\n## Summary\n\n- `HealthStatistics` helps you analyze trends over time by calculating averages, totals, and most recent values.\n- Supports optional filtering by source using `HealthSource`.\n- Useful for building visual health summaries and dashboards based on HealthKit data.\n","routePath":"/doc/Device Capabilities/Health/HealthStatistics","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":551},{"id":"properties","text":"Properties","depth":2,"charIndex":835},{"id":"methods","text":"Methods","depth":2,"charIndex":1540},{"id":"durationunit-healthunit-source-healthsource-number--null","text":"`duration(unit: HealthUnit, source?: HealthSource): number | null`","depth":3,"charIndex":1552},{"id":"averagequantityunit-healthunit-source-healthsource-number--null","text":"`averageQuantity(unit: HealthUnit, source?: HealthSource): number | null`","depth":3,"charIndex":1922},{"id":"sumquantityunit-healthunit-source-healthsource-number--null","text":"`sumQuantity(unit: HealthUnit, source?: HealthSource): number | null`","depth":3,"charIndex":2187},{"id":"minimumquantityunit-healthunit-source-healthsource-number--null","text":"`minimumQuantity(unit: HealthUnit, source?: HealthSource): number | null`","depth":3,"charIndex":2334},{"id":"maximumquantityunit-healthunit-source-healthsource-number--null","text":"`maximumQuantity(unit: HealthUnit, source?: HealthSource): number | null`","depth":3,"charIndex":2477},{"id":"mostrecentquantityunit-healthunit-source-healthsource-number--null","text":"`mostRecentQuantity(unit: HealthUnit, source?: HealthSource): number | null`","depth":3,"charIndex":2620},{"id":"mostrecentquantitydateintervalsource-healthsource-healthdateinterval--null","text":"`mostRecentQuantityDateInterval(source?: HealthSource): HealthDateInterval | null`","depth":3,"charIndex":2822},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":3089},{"id":"healthsource-class","text":"`HealthSource` Class","depth":2,"charIndex":3684},{"id":"properties-1","text":"Properties","depth":3,"charIndex":-1},{"id":"static-methods","text":"Static Methods","depth":3,"charIndex":4248},{"id":"healthsourceforcurrentapp-healthsource","text":"`HealthSource.forCurrentApp(): HealthSource`","depth":4,"charIndex":4268},{"id":"example-filtering-by-source","text":"Example: Filtering by Source","depth":2,"charIndex":4481},{"id":"summary","text":"Summary","depth":2,"charIndex":4857}],"frontmatter":{},"version":"","description":"The HealthStatistics class provides an interface for analyzing aggregated health quantity data over a specified time range. It allows you to compute key statistical values such as: Total durationAverage, sum, minimum, maximum quantitiesMost recent value and its date range This class is ideal for generating summaries of daily, weekly, or custom health data intervals."},{"title":"HealthStatisticsCollection <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthStatisticsCollection \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthStatisticsCollection` class provides a structured representation of **time-based grouped health statistics**, such as daily, weekly, or monthly summaries. Each entry in the collection corresponds to one interval, and encapsulates its own `HealthStatistics` object.\n\nThis class is particularly useful for:\n\n- Plotting **health trends over time**\n- Generating **time-series reports**\n- Separating and accessing statistics by date intervals\n\n***\n\n## Overview\n\nEach `HealthStatisticsCollection` is:\n\n- Created by a time-based health statistics query\n- Aligned using an anchor date and interval component (e.g., daily, weekly)\n- Optionally aggregated by data source (e.g., app, device)\n\n***\n\n## Methods\n\n### `sources(): HealthSource[]`\n\nReturns an array of `HealthSource` objects that contributed data to this collection.\n\nEach `HealthSource` represents a device or app that generated health samples (e.g., Apple Watch, iPhone, a third-party app).\n\n#### Example\n\n```ts\nconst sources = collection.sources()\nsources.forEach(source => {\n  console.log(\"Source:\", source.name, source.bundleIdentifier)\n})\n```\n\n***\n\n### `statistics(): HealthStatistics[]`\n\nReturns all interval-based statistics in the collection as an array of `HealthStatistics` objects.\n\nEach item represents one time interval, aligned by the query's `anchorDate` and `intervalComponents`.\n\n#### Example\n\n```ts\nconst allStats = collection.statistics()\nallStats.forEach(stat => {\n  const value = stat.sumQuantity(HealthUnit.count())\n  console.log(`From ${stat.startDate} to ${stat.endDate}: ${value} steps`)\n})\n```\n\n***\n\n### `statisticsFor(date: Date): HealthStatistics | null`\n\nReturns the `HealthStatistics` object that contains the given date, if it falls within any of the predefined intervals in the collection.\n\nIf no interval includes the given date, it returns `null`.\n\n#### Example\n\n```ts\nconst stat = collection.statisticsFor(new Date(\"2025-07-01\"))\nif (stat) {\n  const value = stat.averageQuantity(HealthUnit.count())\n  console.log(\"Average on July 1st:\", value)\n} else {\n  console.log(\"No data for July 1st.\")\n}\n```\n\n***\n\n## When to Use\n\nUse `HealthStatisticsCollection` when:\n\n- You want to break health data into **intervals** (e.g., by day/week/month)\n- You need to **retrieve and analyze health trends** over time\n- You're building **graphs** or **dashboards** from historical health data\n","routePath":"/doc/Device Capabilities/Health/HealthStatisticsCollection","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":625},{"id":"methods","text":"Methods","depth":2,"charIndex":868},{"id":"sources-healthsource","text":"`sources(): HealthSource[]`","depth":3,"charIndex":880},{"id":"example","text":"Example","depth":4,"charIndex":1125},{"id":"statistics-healthstatistics","text":"`statistics(): HealthStatistics[]`","depth":3,"charIndex":1286},{"id":"example-1","text":"Example","depth":4,"charIndex":1529},{"id":"statisticsfordate-date-healthstatistics--null","text":"`statisticsFor(date: Date): HealthStatistics | null`","depth":3,"charIndex":1758},{"id":"example-2","text":"Example","depth":4,"charIndex":2015},{"id":"when-to-use","text":"When to Use","depth":2,"charIndex":2271}],"frontmatter":{},"version":"","description":"The HealthStatisticsCollection class provides a structured representation of time-based grouped health statistics, such as daily, weekly, or monthly summaries. Each entry in the collection corresponds to one interval, and encapsulates its own HealthStatistics object. This class is particularly useful for: Plotting health trends over timeGenerating time-series reportsSeparating and accessing statistics by date intervals"},{"title":"HealthUnit <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthUnit \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthUnit` class provides an interface to construct and manipulate various units used in HealthKit. You can create basic units (e.g., grams, meters, liters), apply metric prefixes (e.g., milligrams, kilometers), and perform arithmetic operations like multiplication, division, exponentiation, and inversion.\n\n***\n\n## Enum: `HealthMetricPrefix`\n\nRepresents metric prefixes applied to units:\n\n| Enum Value | Symbol | Example    |\n| ---------- | ------ | ---------- |\n| `none`     | —      | `gram()`   |\n| `milli`    | m      | milligram  |\n| `centi`    | c      | centimeter |\n| `kilo`     | k      | kilometer  |\n| `mega`     | M      | megajoule  |\n| `micro`    | µ      | microliter |\n| `nano`     | n      | nanometer  |\n\nRefer to the full enum for more supported prefixes.\n\n***\n\n## 1. Creating Units\n\n### Basic Units\n\n```ts\nconst weight = HealthUnit.gram()\nconst distance = HealthUnit.meter()\nconst energy = HealthUnit.kilocalorie()\n```\n\n### Prefixed Units\n\n```ts\nconst mg = HealthUnit.gramUnit(HealthMetricPrefix.milli)\nconst km = HealthUnit.meterUnit(HealthMetricPrefix.kilo)\nconst mL = HealthUnit.literUnit(HealthMetricPrefix.milli)\n```\n\n### Create from Unit String\n\n```ts\nconst unit = HealthUnit.fromString('kg')\n```\n\n***\n\n## 2. Unit Arithmetic\n\n### Multiplication\n\n```ts\nconst meter = HealthUnit.meter()\nconst second = HealthUnit.second()\nconst speed = meter.divided(second) // meters per second\n```\n\n### Division\n\n```ts\nconst bpm = HealthUnit.count().divided(HealthUnit.minute()) // beats per minute\n```\n\n### Exponentiation\n\n```ts\nconst m2 = HealthUnit.meter().raisedToPower(HealthMetricPrefix.none) // square meters\n```\n\n### Reciprocal\n\n```ts\nconst perLiter = HealthUnit.liter().reciprocal() // 1 per liter\n```\n\n***\n\n## 3. Unit Properties\n\n| Property     | Type    | Description                                    |\n| ------------ | ------- | ---------------------------------------------- |\n| `unitString` | string  | String representation of the unit (e.g., \"kg\") |\n| `isNull`     | boolean | Indicates whether the unit is null/invalid     |\n\n***\n\n## 4. Using with `HealthQuantitySample`\n\nUse `HealthUnit` when creating or reading quantity-based health samples.\n\n### Create a Sample\n\n```ts\nconst unit = HealthUnit.kilocalorie()\n\nconst sample = HealthQuantitySample.create({\n  type: 'activeEnergyBurned',\n  startDate: new Date('2025-07-04T10:00:00'),\n  endDate: new Date('2025-07-04T10:30:00'),\n  value: 150,\n  unit: unit,\n})\n```\n\n### Read Sample in Another Unit\n\n```ts\nconst valueInJoules = sample.quantityValue(HealthUnit.joule())\n```\n\n***\n\n## 5. Common Units Overview\n\n| Category        | Example Methods                           |\n| --------------- | ----------------------------------------- |\n| Weight          | `gram()`, `pound()`, `ounce()`            |\n| Length          | `meter()`, `inch()`, `mile()`             |\n| Volume          | `liter()`, `fluidOunceUS()`               |\n| Time            | `second()`, `minute()`, `hour()`, `day()` |\n| Energy          | `kilocalorie()`, `joule()`                |\n| Temperature     | `degreeCelsius()`, `kelvin()`             |\n| Voltage         | `volt()`, `voltUnit(prefix)`              |\n| Light Intensity | `lux()`, `luxUnit(prefix)`                |\n| Dimensionless   | `count()`, `percent()`                    |\n| Sound Level     | `decibelAWeightedSoundPressureLevel()`    |\n\n***\n\n## 6. Example: Composite Unit Sample\n\n```ts\n// steps per minute\nconst unit = HealthUnit.count().divided(HealthUnit.minute())\n\nconst stepSample = HealthQuantitySample.create({\n  type: 'stepCount',\n  startDate: new Date(),\n  endDate: new Date(),\n  value: 120,\n  unit: unit,\n})\n```\n\n***\n\n## 7. Example: Parse from Unit String\n\n```ts\nconst unit = HealthUnit.fromString('g/mL')\nconsole.log(unit.unitString) // g/mL\nconsole.log(unit.isNull)     // false\n```\n\n***\n\n## 8. `Health.preferredUnits()` Method\n\nRetrieves the **user’s preferred display units** for one or more `HealthQuantityType` entries. This is useful when presenting health data in a way that respects the system’s regional and user-specific settings (e.g., showing weight in kilograms vs pounds).\n\n***\n\n### Method Signature\n\n```ts\nfunction preferredUnits(\n  quantityTypes: HealthQuantityType[]\n): Promise<Record<HealthQuantityType, HealthUnit>>\n```\n\n***\n\n### Parameters\n\n| Name            | Type                   | Description                                                         |\n| --------------- | ---------------------- | ------------------------------------------------------------------- |\n| `quantityTypes` | `HealthQuantityType[]` | An array of health quantity types (e.g., `\"bodyMass\"`, `\"height\"`). |\n\n***\n\n### Returns\n\nA `Promise` that resolves to a mapping object (`Record`) where each key is a `HealthQuantityType`, and each value is a corresponding `HealthUnit` representing the user's preferred unit for that type.\n\n***\n\n### Throws\n\nAn error if the system fails to determine the preferred units for the given quantity types.\n\n***\n\n### Example\n\n```ts\nconst types: HealthQuantityType[] = [\"bodyMass\", \"height\", \"dietaryEnergyConsumed\"]\n\nconst preferred = await Health.preferredUnits(types)\n\nconst bodyMassUnit = preferred[\"bodyMass\"]         // e.g., kilograms or pounds\nconst heightUnit = preferred[\"height\"]             // e.g., meters or inches\nconst energyUnit = preferred[\"dietaryEnergyConsumed\"] // e.g., kilocalories\n\nconsole.log(\"Preferred units:\")\nconsole.log(\"Weight:\", bodyMassUnit)\nconsole.log(\"Height:\", heightUnit)\nconsole.log(\"Energy:\", energyUnit)\n```\n\n***\n\n### Usage Notes\n\n- Preferred units may vary across devices depending on locale and user Health app settings.\n- Always call this method before displaying health data in the UI if you want to respect the user’s expectations.\n- For unsupported or unknown quantity types, the result may omit that key.\n","routePath":"/doc/Device Capabilities/Health/HealthUnit","lang":"en","toc":[{"id":"enum-healthmetricprefix","text":"Enum: `HealthMetricPrefix`","depth":2,"charIndex":474},{"id":"1-creating-units","text":"1. Creating Units","depth":2,"charIndex":943},{"id":"basic-units","text":"Basic Units","depth":3,"charIndex":965},{"id":"prefixed-units","text":"Prefixed Units","depth":3,"charIndex":1102},{"id":"create-from-unit-string","text":"Create from Unit String","depth":3,"charIndex":1305},{"id":"2-unit-arithmetic","text":"2. Unit Arithmetic","depth":2,"charIndex":1391},{"id":"multiplication","text":"Multiplication","depth":3,"charIndex":1414},{"id":"division","text":"Division","depth":3,"charIndex":1570},{"id":"exponentiation","text":"Exponentiation","depth":3,"charIndex":1675},{"id":"reciprocal","text":"Reciprocal","depth":3,"charIndex":1792},{"id":"3-unit-properties","text":"3. Unit Properties","depth":2,"charIndex":1888},{"id":"4-using-with-healthquantitysample","text":"4. Using with `HealthQuantitySample`","depth":2,"charIndex":2221},{"id":"create-a-sample","text":"Create a Sample","depth":3,"charIndex":2336},{"id":"read-sample-in-another-unit","text":"Read Sample in Another Unit","depth":3,"charIndex":2603},{"id":"5-common-units-overview","text":"5. Common Units Overview","depth":2,"charIndex":2715},{"id":"6-example-composite-unit-sample","text":"6. Example: Composite Unit Sample","depth":2,"charIndex":3518},{"id":"7-example-parse-from-unit-string","text":"7. Example: Parse from Unit String","depth":2,"charIndex":3803},{"id":"8-healthpreferredunits-method","text":"8. `Health.preferredUnits()` Method","depth":2,"charIndex":3976},{"id":"method-signature","text":"Method Signature","depth":3,"charIndex":4279},{"id":"parameters","text":"Parameters","depth":3,"charIndex":4431},{"id":"returns","text":"Returns","depth":3,"charIndex":4798},{"id":"throws","text":"Throws","depth":3,"charIndex":5017},{"id":"example","text":"Example","depth":3,"charIndex":5127},{"id":"usage-notes","text":"Usage Notes","depth":3,"charIndex":5668}],"frontmatter":{},"version":"","description":"The HealthUnit class provides an interface to construct and manipulate various units used in HealthKit. You can create basic units (e.g., grams, meters, liters), apply metric prefixes (e.g., milligrams, kilometers), and perform arithmetic operations like multiplication, division, exponentiation, and inversion."},{"title":"HealthWorkout <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthWorkout \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthWorkout` class provides a high-level interface for accessing and analyzing workout data from Apple Health. A workout represents a full session of physical activity, such as running, swimming, or cycling, recorded between a start and end time, and may include additional events and aggregated statistics.\n\n***\n\n## Use Cases\n\n- Retrieve and display workout history\n- Analyze workout types and durations\n- Correlate workout sessions with metrics such as heart rate, calories burned, or distance\n- Visualize workout events like pauses, resumes, laps, and segments\n- Access health statistics collected during the workout session\n\n***\n\n## Properties\n\n| Property              | Type                                                   | Description                                                                                      |\n| --------------------- | ------------------------------------------------------ | ------------------------------------------------------------------------------------------------ |\n| `uuid`                | `string`                                               | A unique identifier for the workout instance.                                                    |\n| `workoutActivityType` | `HealthWorkoutActivityType`                            | The type of activity, such as running, swimming, yoga, etc.                                      |\n| `startDate`           | `Date`                                                 | The start time of the workout session.                                                           |\n| `endDate`             | `Date`                                                 | The end time of the workout session.                                                             |\n| `duration`            | `number`                                               | The duration of the workout in seconds.                                                          |\n| `metadata`            | `Record<string, any> \\| null`                          | Optional metadata, which may include the source app, device, or user-defined tags.               |\n| `workoutEvents`       | `HealthWorkoutEvent[] \\| null`                         | An array of workout events such as pauses, laps, or segments, captured during the session.       |\n| `allStatistics`       | `Record<HealthQuantityType, HealthStatistics \\| null>` | A dictionary mapping quantity types to statistics recorded during the workout (e.g. heart rate). |\n\n***\n\n## Related Types\n\n### `HealthWorkoutActivityType`\n\nRepresents the type of physical activity, such as:\n\n- `running`\n- `walking`\n- `cycling`\n- `swimming`\n- `yoga`\n- ... and many more (see `HealthWorkoutActivityType` documentation)\n\n### `HealthWorkoutEvent`\n\nRepresents a specific event during the workout, such as:\n\n- pause\n- resume\n- motion paused/resumed\n- lap or segment markers\n\n### `HealthStatistics`\n\nProvides calculated metrics such as:\n\n- `averageQuantity()`\n- `sumQuantity()`\n- `maximumQuantity()`\n- `minimumQuantity()`\n- `mostRecentQuantity()`\n\nThese are based on health data samples (e.g., heart rate, energy burned) during the workout's time interval.\n\n***\n\n## Example Usage\n\n```ts\nfunction displayWorkoutSummary(workout: HealthWorkout) {\n  console.log(`Workout ID: ${workout.uuid}`)\n  console.log(`Activity Type: ${workout.workoutActivityType}`)\n  console.log(`Start: ${workout.startDate.toISOString()}`)\n  console.log(`End: ${workout.endDate.toISOString()}`)\n  console.log(`Duration: ${(workout.duration / 60).toFixed(1)} minutes`)\n\n  if (workout.metadata) {\n    console.log(`Metadata: ${JSON.stringify(workout.metadata)}`)\n  }\n\n  if (workout.workoutEvents) {\n    for (const event of workout.workoutEvents) {\n      console.log(`Event: ${HealthWorkoutEventType[event.type]} at ${event.dateInterval.start.toISOString()}`)\n    }\n  }\n\n  const heartRateStats = workout.allStatistics[\"heartRate\"]\n  if (heartRateStats) {\n    console.log(`Average Heart Rate: ${heartRateStats.averageQuantity(\"count/min\")} bpm`)\n  }\n}\n```\n\n***\n\n## Notes\n\n- `HealthWorkout` instances are typically retrieved using query APIs such as `Health.queryWorkouts()` (if available in the framework).\n- The `allStatistics` property provides quick access to summary data without needing to query samples manually.\n- Use the `workoutEvents` property to reconstruct the timeline of activity (e.g., when the user paused or resumed).\n","routePath":"/doc/Device Capabilities/Health/HealthWorkout","lang":"en","toc":[{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":478},{"id":"properties","text":"Properties","depth":2,"charIndex":798},{"id":"related-types","text":"Related Types","depth":2,"charIndex":2639},{"id":"healthworkoutactivitytype","text":"`HealthWorkoutActivityType`","depth":3,"charIndex":2657},{"id":"healthworkoutevent","text":"`HealthWorkoutEvent`","depth":3,"charIndex":2869},{"id":"healthstatistics","text":"`HealthStatistics`","depth":3,"charIndex":3020},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":3307},{"id":"notes","text":"Notes","depth":2,"charIndex":4172}],"frontmatter":{},"version":"","description":"The HealthWorkout class provides a high-level interface for accessing and analyzing workout data from Apple Health. A workout represents a full session of physical activity, such as running, swimming, or cycling, recorded between a start and end time, and may include additional events and aggregated statistics."},{"title":"HealthWorkoutActivityType <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthWorkoutActivityType \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nEach enum value below includes a description of its purpose and typical use case.\n\n| Enum                            | Description & Use Case                                                                             |\n| ------------------------------- | -------------------------------------------------------------------------------------------------- |\n| `americanFootball`              | American-style football, high-intensity team sport. Track during practices or games.               |\n| `archery`                       | Archery training or competition. Good for logging precision-focused, stationary activities.        |\n| `australianFootball`            | A variation of football native to Australia, fast-paced and high-contact sport.                    |\n| `badminton`                     | Lightweight racquet sport for cardio and agility workouts.                                         |\n| `baseball`                      | Baseball sessions including batting practice or matches.                                           |\n| `basketball`                    | Basketball games or shooting drills, useful for tracking cardio and intervals.                     |\n| `bowling`                       | Bowling activity, typically low-intensity and often includes standing periods.                     |\n| `boxing`                        | Boxing training or matches—good for tracking high-intensity interval workouts.                     |\n| `climbing`                      | Rock climbing, indoor or outdoor; involves strength, balance, and endurance.                       |\n| `cricket`                       | Cricket practice or match play, includes running and arm movement.                                 |\n| `crossTraining`                 | Cross-training routines that combine multiple types of exercises. Often used for circuit training. |\n| `curling`                       | Ice-based team sport that involves sliding stones and sweeping; tracks light movement.             |\n| `cycling`                       | Bicycling activities, indoor or outdoor, for tracking distance and speed.                          |\n| `dance`                         | Any general form of dance (e.g., ballet, hip-hop) used for cardio or artistic workouts.            |\n| `danceInspiredTraining`         | Dance-based fitness routines like Zumba, which blend music and cardio movement.                    |\n| `elliptical`                    | Elliptical machine workouts, low-impact cardio often done indoors.                                 |\n| `equestrianSports`              | Horseback riding and related training, suitable for both leisure and competition.                  |\n| `fencing`                       | Sword-fighting sport, involves fast footwork and short bursts of effort.                           |\n| `fishing`                       | Logging fishing sessions, includes walking, standing, and casting motions.                         |\n| `functionalStrengthTraining`    | Practical strength training like kettlebells or resistance band workouts.                          |\n| `golf`                          | Golfing activities including driving range, walking between holes, and swinging.                   |\n| `gymnastics`                    | Gymnastic routines such as balance beam or rings, emphasizing flexibility and control.             |\n| `handball`                      | Indoor or outdoor handball sport, often fast-paced and cardio-intensive.                           |\n| `hiking`                        | Hiking through natural trails or mountains; often includes elevation gain.                         |\n| `hockey`                        | Ice or field hockey, combining speed, coordination, and teamwork.                                  |\n| `hunting`                       | Tracking and logging time during hunting activities, including walking and idle periods.           |\n| `lacrosse`                      | High-intensity team sport involving a ball and stick; includes sprinting and throwing.             |\n| `martialArts`                   | All forms of martial arts such as karate, judo, and Brazilian jiu-jitsu.                           |\n| `mindAndBody`                   | Gentle exercise combining mental and physical health, e.g., stretching, meditation.                |\n| `mixedMetabolicCardioTraining`  | Intense routines like HIIT, combining anaerobic and aerobic segments.                              |\n| `paddleSports`                  | Sports like kayaking and canoeing; use for water-based arm-intensive workouts.                     |\n| `play`                          | Unstructured or informal play, often for children or families.                                     |\n| `preparationAndRecovery`        | Activities like foam rolling, light stretching, and cooldown routines.                             |\n| `racquetball`                   | Fast-paced indoor sport with a racquet and ball, tracked for cardio and agility.                   |\n| `rowing`                        | Rowing on machines or watercraft; works upper body and core.                                       |\n| `rugby`                         | Contact team sport similar to football; intense running and tackling.                              |\n| `running`                       | All types of running (jogging, sprints, races); includes treadmill and outdoor runs.               |\n| `sailing`                       | Sailing activities; may include balance and upper-body coordination.                               |\n| `skatingSports`                 | Ice skating or roller skating; combines speed and balance.                                         |\n| `snowSports`                    | General snow-based sports including sledding and snowshoeing.                                      |\n| `soccer`                        | Soccer practice or games; cardio-intensive and agility-based.                                      |\n| `softball`                      | Similar to baseball, slower pitch and larger ball; use in matches or training.                     |\n| `squash`                        | High-speed indoor racquet sport; excellent for cardio and reflexes.                                |\n| `stairClimbing`                 | Climbing stairs or using a stair machine; great for lower-body strength and cardio.                |\n| `surfingSports`                 | Surfing and other board water sports; tracks core and balance workouts.                            |\n| `swimming`                      | All swimming styles (freestyle, breaststroke); great for full-body cardio.                         |\n| `tableTennis`                   | Ping pong; light activity, good for hand-eye coordination and reaction.                            |\n| `tennis`                        | Tennis practice or matches, singles or doubles.                                                    |\n| `trackAndField`                 | Track events like sprinting or long jump, also field events like discus.                           |\n| `traditionalStrengthTraining`   | Weightlifting, barbell squats, bench press, etc.                                                   |\n| `volleyball`                    | Indoor or beach volleyball; jumping, running, and team coordination.                               |\n| `walking`                       | Casual or brisk walking sessions; track steps, distance, and time.                                 |\n| `waterFitness`                  | Water aerobics or aquatic resistance workouts.                                                     |\n| `waterPolo`                     | Team water sport; combines swimming with ball-handling.                                            |\n| `waterSports`                   | Other water activities not listed separately (e.g., jet skiing, paddle boarding).                  |\n| `wrestling`                     | Grappling sports like freestyle or Greco-Roman wrestling.                                          |\n| `yoga`                          | Yoga practices, including hatha, vinyasa, and power yoga.                                          |\n| `barre`                         | Ballet-inspired fitness that combines dance, yoga, and strength.                                   |\n| `coreTraining`                  | Exercises focused on abdominal and back muscles.                                                   |\n| `crossCountrySkiing`            | Skiing across snow-covered terrain; endurance-focused.                                             |\n| `downhillSkiing`                | Skiing on slopes; includes chairlift time and descent tracking.                                    |\n| `flexibility`                   | Stretching-focused routines to improve joint mobility.                                             |\n| `highIntensityIntervalTraining` | Alternating bursts of intense activity and rest; e.g., sprint-rest-sprint.                         |\n| `jumpRope`                      | Jumping rope workouts, cardio-focused.                                                             |\n| `kickboxing`                    | Fitness or competitive kickboxing routines.                                                        |\n| `pilates`                       | Low-impact training focused on alignment, breathing, and core strength.                            |\n| `snowboarding`                  | Snowboarding activity, including jumps and carving.                                                |\n| `stairs`                        | General stair usage or exercises involving staircases.                                             |\n| `stepTraining`                  | Aerobic routines with a step platform.                                                             |\n| `wheelchairWalkPace`            | Wheelchair rolling at walking speed.                                                               |\n| `wheelchairRunPace`             | Wheelchair rolling at running speed.                                                               |\n| `taiChi`                        | Gentle martial arts practice; used for balance, flow, and mindfulness.                             |\n| `mixedCardio`                   | Blended cardio types (e.g., run + bike).                                                           |\n| `handCycling`                   | Arm-powered cycling activity.                                                                      |\n| `discSports`                    | Sports involving discs like ultimate frisbee.                                                      |\n| `fitnessGaming`                 | Video games that encourage physical activity (e.g., Ring Fit, VR fitness).                         |\n| `cardioDance`                   | Aerobic dancing specifically designed to raise heart rate.                                         |\n| `socialDance`                   | Partner-based or formal dances (e.g., ballroom, tango).                                            |\n| `pickleball`                    | Paddle sport combining elements of badminton, tennis, and ping-pong.                               |\n| `cooldown`                      | Post-workout recovery routines to lower heart rate and stretch muscles.                            |\n| `swimBikeRun`                   | Triathlon-style activity, combining swimming, cycling, and running.                                |\n| `transition`                    | Transition phase between sports in triathlon, such as from swim to bike.                           |\n| `underwaterDiving`              | Recreational or professional diving (e.g., scuba).                                                 |\n| `other`                         | Any activity not covered by the above types. Use when your workout doesn't fit a defined category. |\n\n***\n\n**Usage Example:**\n\n```ts\nconst workoutType = HealthWorkoutActivityType.running\n```\n","routePath":"/doc/Device Capabilities/Health/HealthWorkoutActivityType","lang":"en","toc":[],"frontmatter":{},"version":"","description":"Each enum value below includes a description of its purpose and typical use case. Usage Example:"},{"title":"HealthWorkoutEvent <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HealthWorkoutEvent \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HealthWorkoutEvent` class provides an interface for accessing workout-related events in Apple Health data. Each event represents a specific moment or action within a workout session, such as when the workout is paused, resumed, or marked with a lap or milestone.\n\n***\n\n## Use Cases\n\n- Analyzing workout flow: determine when a user paused or resumed a workout.\n- Measuring active versus idle workout time.\n- Identifying workout laps or marked segments.\n- Supporting custom logic in workout summaries or visualizations.\n\n***\n\n## Enum: `HealthWorkoutEventType`\n\nThis enum defines the various types of workout events.\n\n| Value | Name                   | Description                                                                 |\n| ----- | ---------------------- | --------------------------------------------------------------------------- |\n| `1`   | `pause`                | Indicates that the workout was paused manually.                             |\n| `2`   | `resume`               | Indicates that the workout was resumed after a pause.                       |\n| `3`   | `lap`                  | Marks a lap during the workout, useful for sports like running or swimming. |\n| `4`   | `marker`               | A generic marker placed by the system or user for reference.                |\n| `5`   | `motionPaused`         | Indicates that the workout was automatically paused due to no movement.     |\n| `6`   | `motionResumed`        | Workout automatically resumed after detecting motion.                       |\n| `7`   | `segment`              | Marks the start of a new workout segment, e.g., during interval training.   |\n| `8`   | `pauseOrResumeRequest` | A system-generated request to pause or resume, not a guaranteed action.     |\n\n***\n\n## Class: `HealthWorkoutEvent`\n\n### Properties\n\n| Property       | Type                          | Description                                                          |\n| -------------- | ----------------------------- | -------------------------------------------------------------------- |\n| `type`         | `HealthWorkoutEventType`      | The specific event type (e.g., pause, lap, motionPaused).            |\n| `dateInterval` | `HealthDateInterval`          | The time interval during which this event occurred.                  |\n| `metadata`     | `Record<string, any> \\| null` | Optional metadata describing additional information about the event. |\n\n> Note: `HealthDateInterval` contains `start`, `end`, and `duration` (in seconds).\n\n***\n\n## Example\n\n### Logging Workout Events\n\n```ts\nfunction logWorkoutEvent(event: HealthWorkoutEvent) {\n  const { type, dateInterval, metadata } = event\n  const start = dateInterval.start.toISOString()\n  const end = dateInterval.end.toISOString()\n  const duration = dateInterval.duration\n\n  console.log(`Event Type: ${HealthWorkoutEventType[type]}`)\n  console.log(`Start: ${start}`)\n  console.log(`End: ${end}`)\n  console.log(`Duration (sec): ${duration}`)\n\n  if (metadata) {\n    console.log(`Metadata: ${JSON.stringify(metadata)}`)\n  }\n}\n```\n\n***\n\n## Notes\n\n- Workout events are typically part of a `HealthWorkout` instance, which includes these events as an array.\n- You can use these events to reconstruct the full timeline of a workout session and determine user behavior.\n- Automatic motion detection (pause/resume) is particularly useful for passive workouts such as walking or cycling.\n","routePath":"/doc/Device Capabilities/Health/HealthWorkoutEvent","lang":"en","toc":[{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":436},{"id":"enum-healthworkouteventtype","text":"Enum: `HealthWorkoutEventType`","depth":2,"charIndex":691},{"id":"class-healthworkoutevent","text":"Class: `HealthWorkoutEvent`","depth":2,"charIndex":1918},{"id":"properties","text":"Properties","depth":3,"charIndex":1950},{"id":"example","text":"Example","depth":2,"charIndex":2666},{"id":"logging-workout-events","text":"Logging Workout Events","depth":3,"charIndex":2678},{"id":"notes","text":"Notes","depth":2,"charIndex":3211}],"frontmatter":{},"version":"","description":"The HealthWorkoutEvent class provides an interface for accessing workout-related events in Apple Health data. Each event represents a specific moment or action within a workout session, such as when the workout is paused, resumed, or marked with a lap or milestone."},{"title":"Query Statistics Collection <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Query Statistics Collection \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `Health.queryStatisticsCollection()` method retrieves **time-based aggregated statistics** for a given `HealthQuantityType` over a specified date range. It returns a `HealthStatisticsCollection` object, which contains multiple `HealthStatistics` entries aligned to defined time intervals (such as daily, weekly, or monthly).\n\nThis method is ideal for analyzing trends, building charts, and generating historical summaries of health data.\n\n***\n\n## Method Signature\n\n```ts\nfunction queryStatisticsCollection(\n  quantityType: HealthQuantityType,\n  options: {\n    startDate?: Date\n    endDate?: Date\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    statisticsOptions?: HealthStatisticsOptions | Array<HealthStatisticsOptions>\n    anchorDate: Date\n    intervalComponents: DateComponents\n  }\n): Promise<HealthStatisticsCollection>\n```\n\n***\n\n## Parameters\n\n| Name                         | Type                                         | Required | Description                                                                                                                                                                  |\n| ---------------------------- | -------------------------------------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `quantityType`               | `HealthQuantityType`                         | Yes      | The health quantity type to query (e.g., `\"stepCount\"`, `\"heartRate\"`).                                                                                                      |\n| `options.startDate`          | `Date`                                       | No       | The start date of the time range. Samples outside this range will be excluded.                                                                                               |\n| `options.endDate`            | `Date`                                       | No       | The end date of the time range.                                                                                                                                              |\n| `options.strictStartDate`    | `boolean`                                    | No       | If `true`, includes only statistics whose interval starts exactly at `startDate`.                                                                                            |\n| `options.strictEndDate`      | `boolean`                                    | No       | If `true`, includes only statistics whose interval ends exactly at `endDate`.                                                                                                |\n| `options.statisticsOptions`  | `HealthStatisticsOptions[]` or single option | No       | The list of statistics to compute. Can include: `\"cumulativeSum\"`, `\"discreteAverage\"`, `\"discreteMin\"`, `\"discreteMax\"`, `\"mostRecent\"`, `\"duration\"`, `\"separateBySource\"` |\n| `options.anchorDate`         | `Date`                                       | Yes      | The anchor date used to align intervals. For example, use midnight to align daily intervals to calendar days.                                                                |\n| `options.intervalComponents` | `DateComponents`                             | Yes      | Defines the interval for grouping data (e.g., day, week, month). Create using `new DateComponents({ day: 1 })`, etc.                                                         |\n\n***\n\n## Return Value\n\nReturns a `Promise` that resolves to a `HealthStatisticsCollection` object. This collection includes statistics for each time interval between the start and end dates, aligned by the anchor date and grouped using the provided `intervalComponents`.\n\n***\n\n## Example: Retrieve Daily Step Count Statistics for the Past 7 Days\n\n```ts\nconst now = new Date()\nconst sevenDaysAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000)\n\nconst collection = await Health.queryStatisticsCollection(\"stepCount\", {\n  startDate: sevenDaysAgo,\n  endDate: now,\n  anchorDate: new Date(), // typically midnight today\n  intervalComponents: new DateComponents({ day: 1 }),\n  statisticsOptions: [\"cumulativeSum\"]\n})\n\nconst stats = collection.statistics()\nfor (const stat of stats) {\n  const steps = stat.sumQuantity(HealthUnit.count())\n  console.log(`From ${stat.startDate.toDateString()}: ${steps} steps`)\n}\n```\n\n***\n\n## Notes\n\n- If no data exists for a specific interval, its corresponding `HealthStatistics` entry may return `null` values.\n- Intervals are aligned using the `anchorDate`, and the grouping is defined by `intervalComponents`.\n- If you only need overall statistics for the full range without interval grouping, use `Health.queryStatistics()` instead.\n","routePath":"/doc/Device Capabilities/Health/Query Statistics Collection","lang":"en","toc":[{"id":"method-signature","text":"Method Signature","depth":2,"charIndex":619},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1023},{"id":"return-value","text":"Return Value","depth":2,"charIndex":3704},{"id":"example-retrieve-daily-step-count-statistics-for-the-past-7-days","text":"Example: Retrieve Daily Step Count Statistics for the Past 7 Days","depth":2,"charIndex":3975},{"id":"notes","text":"Notes","depth":2,"charIndex":4615}],"frontmatter":{},"version":"","description":"The Health.queryStatisticsCollection() method retrieves time-based aggregated statistics for a given HealthQuantityType over a specified date range. It returns a HealthStatisticsCollection object, which contains multiple HealthStatistics entries aligned to defined time intervals (such as daily, weekly, or monthly). This method is ideal for analyzing trends, building charts, and generating historical summaries of health data."},{"title":"Query Statistics <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Query Statistics \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `queryStatistics` method retrieves **aggregated statistics** for a specific health quantity type over a defined date range. It can compute metrics such as total sum, average, minimum, maximum, most recent value, and duration, with optional support for breaking down results by source (e.g., device or app).\n\nThis method is ideal for producing **daily, weekly, or historical health summaries**.\n\n***\n\n## Method Signature\n\n```ts\nfunction queryStatistics(\n  quantityType: HealthQuantityType,\n  options?: {\n    startDate?: Date\n    endDate?: Date\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    statisticsOptions?: HealthStatisticsOptions | Array<HealthStatisticsOptions>\n  }\n): Promise<HealthStatistics | null>\n```\n\n***\n\n## Parameters\n\n### `quantityType: HealthQuantityType` (required)\n\nThe health quantity type to query, such as:\n\n- `\"stepCount\"`\n- `\"heartRate\"`\n- `\"bodyMass\"`\n- `\"activeEnergyBurned\"`\n- Any supported `HealthQuantityType`\n\n***\n\n### `options` (optional)\n\nAn object specifying filtering and configuration options for the query.\n\n| Option              | Type                                                     | Description                                                                             |\n| ------------------- | -------------------------------------------------------- | --------------------------------------------------------------------------------------- |\n| `startDate`         | `Date`                                                   | The start date for the query range.                                                     |\n| `endDate`           | `Date`                                                   | The end date for the query range.                                                       |\n| `strictStartDate`   | `boolean`                                                | If `true`, only includes statistics that **begin exactly** at `startDate`. Optional.    |\n| `strictEndDate`     | `boolean`                                                | If `true`, only includes statistics that **end exactly** at `endDate`. Optional.        |\n| `statisticsOptions` | `HealthStatisticsOptions` or `HealthStatisticsOptions[]` | An option or array of options to define what kind of statistics to retrieve. See below. |\n\n***\n\n## Available `HealthStatisticsOptions`\n\n| Option               | Description                                                 |\n| -------------------- | ----------------------------------------------------------- |\n| `\"cumulativeSum\"`    | Includes the total sum of all quantity values.              |\n| `\"discreteAverage\"`  | Includes the average of discrete samples.                   |\n| `\"discreteMin\"`      | Includes the minimum value.                                 |\n| `\"discreteMax\"`      | Includes the maximum value.                                 |\n| `\"mostRecent\"`       | Includes the most recently recorded sample.                 |\n| `\"duration\"`         | Includes the total duration of all samples.                 |\n| `\"separateBySource\"` | Separates results by source (e.g., different apps/devices). |\n\n***\n\n## Return Value\n\nReturns a `Promise` that resolves to a `HealthStatistics` object, or `null` if no data is available for the given type and range.\n\nUse the returned `HealthStatistics` object to access computed values like:\n\n- `sumQuantity(...)`\n- `averageQuantity(...)`\n- `mostRecentQuantity(...)`\n- `duration(...)`\n\n***\n\n## Example: Query Daily Step Count Summary\n\n```ts\nconst stats = await Health.queryStatistics(\"stepCount\", {\n  startDate: new Date(\"2025-07-01\"),\n  endDate: new Date(\"2025-07-02\"),\n  statisticsOptions: [\"cumulativeSum\", \"mostRecent\", \"duration\"]\n})\n\nif (stats) {\n  const steps = stats.sumQuantity(HealthUnit.count())\n  const last = stats.mostRecentQuantity(HealthUnit.count())\n  const time = stats.duration(HealthUnit.second())\n\n  console.log(\"Steps:\", steps)\n  console.log(\"Most recent count:\", last)\n  console.log(\"Duration (s):\", time)\n} else {\n  console.log(\"No step count data found.\")\n}\n```\n\n***\n\n## Example: Query Average Heart Rate from This App Only\n\n```ts\nconst stats = await Health.queryStatistics(\"heartRate\", {\n  startDate: new Date(\"2025-07-01\"),\n  endDate: new Date(\"2025-07-02\"),\n  statisticsOptions: [\"discreteAverage\"]\n})\n\nconst source = HealthSource.forCurrentApp()\nconst averageHR = stats?.averageQuantity(HealthUnit.countPerMinute(), source)\n\nconsole.log(\"App-only Heart Rate:\", averageHR)\n```\n\n***\n\n## Notes\n\n- If `statisticsOptions` is not specified, some fields (like sum, average, or most recent) may return `null`.\n- This method returns **aggregated values**—to access raw samples, use `queryQuantitySamples()` instead.\n- Results depend on the type of quantity. For instance, heart rate supports `discreteAverage`, while step count supports `cumulativeSum`.\n","routePath":"/doc/Device Capabilities/Health/Query Statistics","lang":"en","toc":[{"id":"method-signature","text":"Method Signature","depth":2,"charIndex":564},{"id":"parameters","text":"Parameters","depth":2,"charIndex":896},{"id":"quantitytype-healthquantitytype-required","text":"`quantityType: HealthQuantityType` (required)","depth":3,"charIndex":911},{"id":"options-optional","text":"`options` (optional)","depth":3,"charIndex":1122},{"id":"available-healthstatisticsoptions","text":"Available `HealthStatisticsOptions`","depth":2,"charIndex":2438},{"id":"return-value","text":"Return Value","depth":2,"charIndex":3267},{"id":"example-query-daily-step-count-summary","text":"Example: Query Daily Step Count Summary","depth":2,"charIndex":3589},{"id":"example-query-average-heart-rate-from-this-app-only","text":"Example: Query Average Heart Rate from This App Only","depth":2,"charIndex":4191},{"id":"notes","text":"Notes","depth":2,"charIndex":4609}],"frontmatter":{},"version":"","description":"The queryStatistics method retrieves aggregated statistics for a specific health quantity type over a defined date range. It can compute metrics such as total sum, average, minimum, maximum, most recent value, and duration, with optional support for breaking down results by source (e.g., device or app). This method is ideal for producing daily, weekly, or historical health summaries."},{"title":"Reading Activity Summaries <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Reading Activity Summaries \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app provides access to **daily activity summary data** from Apple Health using the global function `Health.queryActivitySummaries()`. These summaries represent **Move**, **Exercise**, and **Stand** goals tracked by Apple Watch, along with completion metrics and historical trends.\n\nThis API is ideal for displaying daily ring data or analyzing long-term fitness trends.\n\n***\n\n## What Is an Activity Summary?\n\nAn `HealthActivitySummary` provides a high-level overview of a day’s Apple Watch activity:\n\n- **Move (Active Energy Burned)**\n\n  - `activeEnergyBurned(unit: HealthUnit): number`\n  - `activeEnergyBurnedGoal(unit: HealthUnit): number`\n\n- **Exercise (Minutes)**\n\n  - `appleExerciseTime(unit: HealthUnit): number`\n  - `appleExerciseTimeGoal(unit: HealthUnit): number`\n\n- **Stand (Hours)**\n\n  - `appleStandHours(unit: HealthUnit): number`\n  - `appleStandHoursGoal(unit: HealthUnit): number`\n\n- **Date Information**\n\n  - `dateComponents: DateComponents` – a `DateComponents` object containing at least year, month, and day.\n\n***\n\n## API Overview\n\n```ts\nHealth.queryActivitySummaries(\n  options?: {\n    start: DateComponents\n    end: DateComponents\n  }\n): Promise<HealthActivitySummary[]>\n```\n\n***\n\n## Parameters\n\n| Parameter | Type             | Description                                                                      |\n| --------- | ---------------- | -------------------------------------------------------------------------------- |\n| `start`   | `DateComponents` | The start of the query range. Only summaries on or after this date are returned. |\n| `end`     | `DateComponents` | The end of the query range. Only summaries on or before this date are returned.  |\n\n> If you omit the options, the API returns all available summaries (up to system limits).\n> Summaries are returned sorted by date in ascending order.\n\n***\n\n## Example: Read Last 7 Days’ Activity Summaries\n\n```ts\nasync function fetchLastWeek() {\n  // Build DateComponents for the date range\n  const today = new Date()\n  const sevenDaysAgo = new Date(\n    today.getFullYear(),\n    today.getMonth(),\n    today.getDate() - 6\n  )\n\n  const startComponents = DateComponents.fromDate(sevenDaysAgo)\n  const endComponents = DateComponents.fromDate(today)\n\n  // Query activity summaries\n  const summaries = await Health.queryActivitySummaries({\n    start: startComponents,\n    end: endComponents,\n  })\n\n  // Iterate and log each day’s data\n  for (const summary of summaries) {\n    const date = summary.dateComponents.date\n    console.log(`Date: ${date?.toDateString()}`)\n\n    const kcal = summary.activeEnergyBurned(HealthUnit.kilocalorie())\n    const kcalGoal = summary.activeEnergyBurnedGoal(HealthUnit.kilocalorie())\n    const exerciseMin = summary.appleExerciseTime(HealthUnit.minute())\n    const standHrs = summary.appleStandHours(HealthUnit.count())\n\n    console.log(` Move:    ${kcal} / ${kcalGoal} kcal`)\n    console.log(` Exercise: ${exerciseMin} min`)\n    console.log(` Stand:    ${standHrs} hrs`)\n    console.log('---')\n  }\n}\n\nfetchLastWeek()\n```\n\n***\n\n## Notes\n\n- **DateComponents** must include at least year, month, and day—other fields (hour, minute) are ignored for daily summaries.\n- Each metric method returns a raw `number` in the specified unit.\n- Use `HealthUnit` factory methods (e.g., `kilocalorie()`, `minute()`, `count()`) to specify units.\n- Days with no data (e.g., Apple Watch off-wrist) may be omitted from results.\n\n***\n\n## Summary\n\n1. Call `Health.queryActivitySummaries({ start, end })` with `DateComponents` to specify your date range.\n2. Receive an array of `HealthActivitySummary`, sorted ascending by date.\n3. Use the summary’s methods to read actual vs. goal values for Move, Exercise, and Stand.\n4. Convert and display the numbers in your UI or analytics.\n","routePath":"/doc/Device Capabilities/Health/Reading Activity Summaries","lang":"en","toc":[{"id":"what-is-an-activity-summary","text":"What Is an Activity Summary?","depth":2,"charIndex":560},{"id":"api-overview","text":"API Overview","depth":2,"charIndex":1217},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1385},{"id":"example-read-last-7-days-activity-summaries","text":"Example: Read Last 7 Days’ Activity Summaries","depth":2,"charIndex":2021},{"id":"notes","text":"Notes","depth":2,"charIndex":3218},{"id":"summary","text":"Summary","depth":2,"charIndex":3605}],"frontmatter":{},"version":"","description":"The Scripting app provides access to daily activity summary data from Apple Health using the global function Health.queryActivitySummaries(). These summaries represent Move, Exercise, and Stand goals tracked by Apple Watch, along with completion metrics and historical trends. This API is ideal for displaying daily ring data or analyzing long-term fitness trends."},{"title":"Reading Category Samples <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Reading Category Samples \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app provides access to **category-based health data** using the global function `Health.queryCategorySamples()`. Category samples represent health-related events or states with a start date, end date, and a discrete value — such as sleep stages, mindful sessions, menstrual flow, and ovulation test results.\n\nThis guide explains how to query, interpret, and use category samples in your scripts.\n\n***\n\n## What Is a Category Sample?\n\nA **category sample** includes:\n\n- `type`: The category data type (e.g., `\"sleepAnalysis\"`, `\"mindfulSession\"`)\n- `startDate` / `endDate`: The time interval the event occurred\n- `value`: An integer representing a state, mapped from an enum\n- `metadata`: Optional additional info\n\nExamples:\n\n- `\"sleepAnalysis\"` with value `asleepCore`, `awake`, or `inBed`\n- `\"menstrualFlow\"` with value `mild`, `moderate`, or `severe`\n\n***\n\n## API Overview\n\n```ts\nHealth.queryCategorySamples(\n  categoryType: HealthCategoryType,\n  options?: {\n    startDate?: Date\n    endDate?: Date\n    limit?: number\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    sortDescriptors?: Array<{\n      key: \"startDate\" | \"endDate\" | \"value\"\n      order?: \"forward\" | \"reverse\"\n    }>\n  }\n): Promise<HealthCategorySample[]>\n```\n\n***\n\n## Parameters\n\n| Parameter                           | Description                                                    |\n| ----------------------------------- | -------------------------------------------------------------- |\n| `categoryType`                      | The type of category data to query (e.g., `\"sleepAnalysis\"`)   |\n| `startDate` / `endDate`             | Time range to filter results                                   |\n| `limit`                             | Maximum number of samples to return                            |\n| `strictStartDate` / `strictEndDate` | Whether to match the exact start or end times                  |\n| `sortDescriptors`                   | Optional sorting (e.g., by `startDate`, `endDate`, or `value`) |\n\n***\n\n## Example: Reading Sleep Analysis Samples\n\n```ts\nconst results = await Health.queryCategorySamples(\"sleepAnalysis\", {\n  startDate: new Date(\"2025-07-01T00:00:00\"),\n  endDate: new Date(\"2025-07-05T00:00:00\"),\n  sortDescriptors: [{ key: \"startDate\", order: \"forward\" }]\n})\n\nfor (const sample of results) {\n  console.log(\"Start:\", sample.startDate)\n  console.log(\"End:\", sample.endDate)\n  console.log(\"Sleep State:\", sample.value) // Use enum to interpret value\n}\n```\n\nYou can map the `value` to an enum like this:\n\n```ts\nconst value = sample.value\n\nswitch (value) {\n  case HealthCategoryValueSleepAnalysis.awake:\n    console.log(\"Awake\")\n    break\n  case HealthCategoryValueSleepAnalysis.asleepCore:\n    console.log(\"Asleep (Core)\")\n    break\n  case HealthCategoryValueSleepAnalysis.asleepDeep:\n    console.log(\"Asleep (Deep)\")\n    break\n  case HealthCategoryValueSleepAnalysis.inBed:\n    console.log(\"In bed\")\n    break\n  // Handle other states as needed\n}\n```\n\n***\n\n## Example: Reading Mindful Session Events\n\n```ts\nconst sessions = await Health.queryCategorySamples(\"mindfulSession\", {\n  startDate: new Date(Date.now() - 7 * 86400 * 1000), // past 7 days\n})\n\nconsole.log(`Found ${sessions.length} mindful sessions`)\n```\n\n***\n\n## Notes\n\n- All returned items are instances of `HealthCategorySample`\n- The `.value` field is numeric and should be interpreted using the appropriate enum\n- You can access optional `.metadata` for extra context if available\n- Category data is ideal for modeling sleep, mental wellness, reproductive health, and symptoms\n\n***\n\n## Summary\n\nTo read category samples:\n\n1. Use `Health.queryCategorySamples(categoryType, options)`\n2. Filter by date, sort, and limit as needed\n3. Map `.value` to the correct enum for human-readable interpretation\n\nThis API gives you structured access to event-based health records in HealthKit.\n","routePath":"/doc/Device Capabilities/Health/Reading Category Samples","lang":"en","toc":[{"id":"what-is-a-category-sample","text":"What Is a Category Sample?","depth":2,"charIndex":584},{"id":"api-overview","text":"API Overview","depth":2,"charIndex":1040},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1426},{"id":"example-reading-sleep-analysis-samples","text":"Example: Reading Sleep Analysis Samples","depth":2,"charIndex":2182},{"id":"example-reading-mindful-session-events","text":"Example: Reading Mindful Session Events","depth":2,"charIndex":3149},{"id":"notes","text":"Notes","depth":2,"charIndex":3410},{"id":"summary","text":"Summary","depth":2,"charIndex":3737}],"frontmatter":{},"version":"","description":"The Scripting app provides access to category-based health data using the global function Health.queryCategorySamples(). Category samples represent health-related events or states with a start date, end date, and a discrete value — such as sleep stages, mindful sessions, menstrual flow, and ovulation test results. This guide explains how to query, interpret, and use category samples in your scripts."},{"title":"Reading Characteristic Data <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Reading Characteristic Data \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nHealthKit stores **characteristics** as immutable personal attributes, such as biological sex, date of birth, blood type, skin type, wheelchair usage, and activity move mode. These values are typically entered by the user in the Health app and rarely change.\n\nThe Scripting app provides global asynchronous APIs for accessing these values.\n\n***\n\n## Supported Characteristics\n\nYou can read the following characteristics:\n\n| Characteristic        | API                            | Return Type                      |\n| --------------------- | ------------------------------ | -------------------------------- |\n| Date of birth         | `Health.dateOfBirth()`         | `DateComponents`                 |\n| Biological sex        | `Health.biologicalSex()`       | `HealthBiologicalSex` enum       |\n| Blood type            | `Health.bloodType()`           | `HealthBloodType` enum           |\n| Fitzpatrick skin type | `Health.fitzpatrickSkinType()` | `HealthFitzpatrickSkinType` enum |\n| Wheelchair use status | `Health.wheelchairUse()`       | `HealthWheelchairUse` enum       |\n| Activity move mode    | `Health.activityMoveMode()`    | `HealthActivityMoveMode` enum    |\n\n***\n\n## 1. Read Date of Birth\n\n```ts\nconst birthDate = await Health.dateOfBirth()\nconsole.log(`Year: ${birthDate.year}, Month: ${birthDate.month}, Day: ${birthDate.day}`)\n```\n\nReturned object conforms to `DateComponents`:\n\n```ts\n{\n  era?: number\n  year?: number\n  month?: number\n  day?: number\n  hour?: number\n  minute?: number\n  second?: number\n  weekday?: number\n  ...\n}\n```\n\n***\n\n## 2. Read Biological Sex\n\n```ts\nconst sex = await Health.biologicalSex()\n\nswitch (sex) {\n  case HealthBiologicalSex.female:\n    console.log(\"Female\")\n    break\n  case HealthBiologicalSex.male:\n    console.log(\"Male\")\n    break\n  case HealthBiologicalSex.other:\n    console.log(\"Other\")\n    break\n  case HealthBiologicalSex.notSet:\n    console.log(\"Not Set\")\n    break\n}\n```\n\n***\n\n## 3. Read Blood Type\n\n```ts\nconst blood = await Health.bloodType()\n\nswitch (blood) {\n  case HealthBloodType.aPositive:\n    console.log(\"A+\")\n    break\n  case HealthBloodType.oNegative:\n    console.log(\"O-\")\n    break\n  // ... other values\n  default:\n    console.log(\"Not Set\")\n}\n```\n\n***\n\n## 4. Read Fitzpatrick Skin Type\n\n```ts\nconst skinType = await Health.fitzpatrickSkinType()\n\nswitch (skinType) {\n  case HealthFitzpatrickSkinType.I:\n    console.log(\"Type I: Very fair\")\n    break\n  case HealthFitzpatrickSkinType.VI:\n    console.log(\"Type VI: Deeply pigmented dark brown to black\")\n    break\n  default:\n    console.log(\"Not Set\")\n}\n```\n\n***\n\n## 5. Read Wheelchair Use Status\n\n```ts\nconst wheelchair = await Health.wheelchairUse()\n\nif (wheelchair === HealthWheelchairUse.yes) {\n  console.log(\"User uses a wheelchair\")\n} else if (wheelchair === HealthWheelchairUse.no) {\n  console.log(\"User does not use a wheelchair\")\n} else {\n  console.log(\"Not Set\")\n}\n```\n\n***\n\n## 6. Read Activity Move Mode\n\n```ts\nconst mode = await Health.activityMoveMode()\n\nif (mode === HealthActivityMoveMode.activeEnergy) {\n  console.log(\"Tracking by active energy burned\")\n} else if (mode === HealthActivityMoveMode.appleMoveTime) {\n  console.log(\"Tracking by Apple Move Time\")\n}\n```\n\n***\n\n## Error Handling\n\nEach method may throw an error if:\n\n- The characteristic is not set by the user\n- The permission is denied\n- HealthKit is unavailable\n\nExample:\n\n```ts\ntry {\n  const sex = await Health.biologicalSex()\n  console.log(sex)\n} catch (err) {\n  console.error(\"Failed to read biological sex:\", err)\n}\n```\n\n***\n\n## Summary\n\nYou can access personal attributes using the following global APIs:\n\n```ts\nawait Health.dateOfBirth()\nawait Health.biologicalSex()\nawait Health.bloodType()\nawait Health.fitzpatrickSkinType()\nawait Health.wheelchairUse()\nawait Health.activityMoveMode()\n```\n\nThese values are static and reflect the user’s personal configuration in the Health app. Be sure to handle missing or unset values gracefully.\n","routePath":"/doc/Device Capabilities/Health/Reading Characteristic Data","lang":"en","toc":[{"id":"supported-characteristics","text":"Supported Characteristics","depth":2,"charIndex":517},{"id":"1-read-date-of-birth","text":"1. Read Date of Birth","depth":2,"charIndex":1350},{"id":"2-read-biological-sex","text":"2. Read Biological Sex","depth":2,"charIndex":1728},{"id":"3-read-blood-type","text":"3. Read Blood Type","depth":2,"charIndex":2109},{"id":"4-read-fitzpatrick-skin-type","text":"4. Read Fitzpatrick Skin Type","depth":2,"charIndex":2399},{"id":"5-read-wheelchair-use-status","text":"5. Read Wheelchair Use Status","depth":2,"charIndex":2757},{"id":"6-read-activity-move-mode","text":"6. Read Activity Move Mode","depth":2,"charIndex":3078},{"id":"error-handling","text":"Error Handling","depth":2,"charIndex":3380},{"id":"summary","text":"Summary","depth":2,"charIndex":3701}],"frontmatter":{},"version":"","description":"HealthKit stores characteristics as immutable personal attributes, such as biological sex, date of birth, blood type, skin type, wheelchair usage, and activity move mode. These values are typically entered by the user in the Health app and rarely change. The Scripting app provides global asynchronous APIs for accessing these values."},{"title":"Reading Correlation Data <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Reading Correlation Data \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app allows you to query **correlated health data** using the global `Health.queryCorrelations()` API. A correlation groups related health samples into a single logical event — such as a blood pressure reading (systolic and diastolic) or a food intake record (calories, protein, etc.).\n\nThis guide explains how to retrieve and interpret correlation data from HealthKit.\n\n***\n\n## What Is a Correlation?\n\nA **correlation** in HealthKit represents a composite health event made up of multiple samples, including:\n\n- `\"bloodPressure\"` — combines `bloodPressureSystolic` and `bloodPressureDiastolic`\n- `\"food\"` — may include `dietaryEnergyConsumed`, `dietaryProtein`, `dietaryCarbohydrates`, etc.\n\nEach correlation includes:\n\n- Start and end date\n- Type (`\"bloodPressure\"` or `\"food\"`)\n- Metadata (optional)\n- Associated samples (quantity or category samples)\n\n***\n\n## API Overview\n\n```ts\nHealth.queryCorrelations(\n  correlationType: HealthCorrelationType,\n  options?: {\n    startDate?: Date\n    endDate?: Date\n    limit?: number\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    sortDescriptors?: Array<{\n      key: \"startDate\" | \"endDate\"\n      order?: \"forward\" | \"reverse\"\n    }>\n  }\n): Promise<HealthCorrelation[]>\n```\n\n***\n\n## Parameters\n\n| Parameter                         | Description                                 |\n| --------------------------------- | ------------------------------------------- |\n| `correlationType`                 | `\"bloodPressure\"` or `\"food\"`               |\n| `startDate`/`endDate`             | Query time range                            |\n| `limit`                           | Maximum number of correlations to return    |\n| `strictStartDate`/`strictEndDate` | Whether to match exact boundaries           |\n| `sortDescriptors`                 | Sort by `startDate` or `endDate` (optional) |\n\n***\n\n## Example: Query Blood Pressure Correlations\n\n```ts\nconst correlations = await Health.queryCorrelations(\"bloodPressure\", {\n  startDate: new Date(\"2025-07-01T00:00:00\"),\n  endDate: new Date(\"2025-07-02T00:00:00\"),\n  limit: 5,\n  sortDescriptors: [{ key: \"startDate\", order: \"reverse\" }]\n})\n\nfor (const correlation of correlations) {\n  console.log(\"Start:\", correlation.startDate)\n  console.log(\"End:\", correlation.endDate)\n\n  const systolic = correlation.quantitySamples.find(\n    s => s.quantityType === \"bloodPressureSystolic\"\n  )\n\n  const diastolic = correlation.quantitySamples.find(\n    s => s.quantityType === \"bloodPressureDiastolic\"\n  )\n\n  if (systolic && diastolic) {\n    const sys = systolic.quantityValue(HealthUnit.millimeterOfMercury())\n    const dia = diastolic.quantityValue(HealthUnit.millimeterOfMercury())\n    console.log(`Blood Pressure: ${sys}/${dia} mmHg`)\n  }\n}\n```\n\n***\n\n## Example: Query Food Correlations\n\n```ts\nconst correlations = await Health.queryCorrelations(\"food\", {\n  startDate: new Date(Date.now() - 86400 * 1000),\n  limit: 10\n})\n\nfor (const correlation of correlations) {\n  console.log(\"Food intake at:\", correlation.startDate)\n\n  for (const sample of correlation.quantitySamples) {\n    const value = sample.quantityValue(sample.quantityType.includes(\"Energy\")\n      ? HealthUnit.kilocalorie()\n      : HealthUnit.gram())\n    console.log(`${sample.quantityType}: ${value}`)\n  }\n}\n```\n\n***\n\n## Accessing Correlation Samples\n\nEach correlation contains the following sample arrays:\n\n- `quantitySamples`: All quantity samples (including cumulative/discrete)\n- `cumulativeQuantitySamples`: Only cumulative quantity samples\n- `discreteQuantitySamples`: Only discrete quantity samples\n- `categorySamples`: Any associated category samples (for future support)\n\nYou can use `.quantityType` and `.quantityValue(unit)` to interpret each sample.\n\n***\n\n## Error Handling\n\n```ts\ntry {\n  const results = await Health.queryCorrelations(\"bloodPressure\")\n  console.log(\"Found\", results.length, \"records\")\n} catch (err) {\n  console.error(\"Failed to query correlations:\", err)\n}\n```\n\n***\n\n## Summary\n\nTo read correlation data from HealthKit:\n\n1. Call `Health.queryCorrelations(type, options)`\n2. Iterate through each `HealthCorrelation`\n3. Access `quantitySamples` or `categorySamples`\n4. Use `.quantityValue(unit)` to extract values\n\nThis is useful for composite health records like blood pressure or nutrition intake.\n","routePath":"/doc/Device Capabilities/Health/Reading Correlation Data","lang":"en","toc":[{"id":"what-is-a-correlation","text":"What Is a Correlation?","depth":2,"charIndex":557},{"id":"api-overview","text":"API Overview","depth":2,"charIndex":1042},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1418},{"id":"example-query-blood-pressure-correlations","text":"Example: Query Blood Pressure Correlations","depth":2,"charIndex":2027},{"id":"example-query-food-correlations","text":"Example: Query Food Correlations","depth":2,"charIndex":2920},{"id":"accessing-correlation-samples","text":"Accessing Correlation Samples","depth":2,"charIndex":3450},{"id":"error-handling","text":"Error Handling","depth":2,"charIndex":3900},{"id":"summary","text":"Summary","depth":2,"charIndex":4129}],"frontmatter":{},"version":"","description":"The Scripting app allows you to query correlated health data using the global Health.queryCorrelations() API. A correlation groups related health samples into a single logical event — such as a blood pressure reading (systolic and diastolic) or a food intake record (calories, protein, etc.). This guide explains how to retrieve and interpret correlation data from HealthKit."},{"title":"Reading Heartbeat Series Samples <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Reading Heartbeat Series Samples \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app provides access to **heartbeat series samples** stored in Apple Health using the global API `Health.queryHeartbeatSeriesSamples()`. These samples represent beat-to-beat heartbeat intervals collected during workouts or background monitoring sessions (usually via Apple Watch).\n\nEach record contains the **time range**, **number of beats**, and optional **metadata**, but not the raw interval values.\n\n***\n\n## What Is a Heartbeat Series Sample?\n\nA `HealthHeartbeatSeriesSample` object includes:\n\n- `uuid`: A unique identifier for the sample\n- `sampleType`: Always `\"heartbeatSeries\"`\n- `startDate` / `endDate`: The time range over which the heartbeats were recorded\n- `count`: The number of heartbeat intervals collected\n- `metadata`: Optional information attached by the recording source (e.g., watch model, app version)\n\n> **Note:** This API provides high-level information about the series. It does not expose individual heartbeat intervals.\n\n***\n\n## API Reference\n\n```ts\nHealth.queryHeartbeatSeriesSamples(\n  options?: {\n    startDate?: Date\n    endDate?: Date\n    limit?: number\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    sortDescriptors?: Array<{\n      key: \"startDate\" | \"endDate\"\n      order?: \"forward\" | \"reverse\"\n    }>\n    requestPermissions?: HealthQuantityType[]\n  }\n): Promise<HealthHeartbeatSeriesSample[]>\n```\n\n***\n\n## Parameters\n\n| Parameter                           | Description                                    |\n| ----------------------------------- | ---------------------------------------------- |\n| `startDate` / `endDate`             | Optional filter range for sample time interval |\n| `limit`                             | Maximum number of samples to return            |\n| `strictStartDate` / `strictEndDate` | Whether to include only exact matches          |\n| `sortDescriptors`                   | Optional sorting by `startDate` or `endDate`   |\n| `requestPermissions`                | Optional requesting permission for other types |\n\n***\n\n## Example: Query Recent Heartbeat Series\n\n```ts\nconst results = await Health.queryHeartbeatSeriesSamples({\n  startDate: new Date(\"2025-07-01T00:00:00\"),\n  endDate: new Date(\"2025-07-05T00:00:00\"),\n  limit: 10,\n  sortDescriptors: [{ key: \"startDate\", order: \"reverse\" }]\n})\n\nfor (const sample of results) {\n  console.log(\"UUID:\", sample.uuid)\n  console.log(\"Start:\", sample.startDate)\n  console.log(\"End:\", sample.endDate)\n  console.log(\"Heartbeat count:\", sample.count)\n  console.log(\"Metadata:\", sample.metadata)\n  console.log(\"---\")\n}\n```\n\n***\n\n## Limitations\n\n- Individual heartbeat intervals (R–R data) are **not accessible** via this API.\n\n- To analyze HRV or derive BPM, you’ll need **only the `count`** and **duration**:\n\n  ```ts\n  const durationSeconds = (sample.endDate.getTime() - sample.startDate.getTime()) / 1000\n  const avgBPM = (sample.count / durationSeconds) * 60\n  ```\n\n- Gaps or anomalies (e.g. pauses, data loss) are not available in this summary sample.\n\n***\n\n## Summary\n\nTo read heartbeat series:\n\n1. Call `Health.queryHeartbeatSeriesSamples()` with optional date range or limits.\n2. Iterate through the returned `HealthHeartbeatSeriesSample` objects.\n3. Each item provides `startDate`, `endDate`, `count`, and `metadata`.\n4. You can approximate average BPM over the session using `count` and duration.\n\nThis API is useful for **overviewing heart rhythm tracking sessions**, especially for detecting how often heart rate was sampled during a day or workout.\n","routePath":"/doc/Device Capabilities/Health/Reading Heartbeat Series Samples","lang":"en","toc":[{"id":"what-is-a-heartbeat-series-sample","text":"What Is a Heartbeat Series Sample?","depth":2,"charIndex":599},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":1143},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1544},{"id":"example-query-recent-heartbeat-series","text":"Example: Query Recent Heartbeat Series","depth":2,"charIndex":2188},{"id":"limitations","text":"Limitations","depth":2,"charIndex":2736},{"id":"summary","text":"Summary","depth":2,"charIndex":3170}],"frontmatter":{},"version":"","description":"The Scripting app provides access to heartbeat series samples stored in Apple Health using the global API Health.queryHeartbeatSeriesSamples(). These samples represent beat-to-beat heartbeat intervals collected during workouts or background monitoring sessions (usually via Apple Watch). Each record contains the time range, number of beats, and optional metadata, but not the raw interval values."},{"title":"Reading Quantity Samples <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Reading Quantity Samples \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app allows you to query **quantity-based health data**, such as step count, heart rate, body mass, calories burned, distance, and more, using the global `Health.queryQuantitySamples()` API.\n\nThis guide explains how to retrieve quantity samples and work with the results.\n\n***\n\n## What Are Quantity Samples?\n\nA **quantity sample** represents a numeric health measurement taken at a specific time or over a time interval. Common examples include:\n\n- `stepCount`\n- `heartRate`\n- `bodyMass`\n- `activeEnergyBurned`\n- `distanceWalkingRunning`\n\nThese samples can be either **discrete** (a single measurement) or **cumulative** (a value summed over time).\n\n***\n\n## API Overview\n\n```ts\nHealth.queryQuantitySamples(\n  quantityType: HealthQuantityType,\n  options?: {\n    startDate?: Date\n    endDate?: Date\n    limit?: number\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    sortDescriptors?: Array<{\n      key: \"startDate\" | \"endDate\" | \"count\"\n      order?: \"forward\" | \"reverse\"\n    }>\n  }\n): Promise<Array<HealthQuantitySample | HealthCumulativeQuantitySample | HealthDiscreteQuantitySample>>\n```\n\n***\n\n## Parameters\n\n- `quantityType`: The health data type to query (e.g., `\"stepCount\"`, `\"heartRate\"`)\n- `startDate` / `endDate`: Time range for filtering samples\n- `limit`: Maximum number of results\n- `strictStartDate` / `strictEndDate`: If `true`, only samples starting/ending exactly at those dates will be included\n- `sortDescriptors`: Optional array to sort results by `startDate`, `endDate`, or `count`\n\n***\n\n## Sample Code: Reading Step Count\n\n```ts\nconst results = await Health.queryQuantitySamples(\"stepCount\", {\n  startDate: new Date(\"2025-07-01T00:00:00\"),\n  endDate: new Date(\"2025-07-02T00:00:00\"),\n  limit: 10,\n  sortDescriptors: [{ key: \"startDate\", order: \"reverse\" }]\n})\n\nfor (const sample of results) {\n  const value = sample.quantityValue(HealthUnit.count())\n  console.log(`Steps: ${value} from ${sample.startDate} to ${sample.endDate}`)\n}\n```\n\n***\n\n## Sample Code: Reading Heart Rate with Unit\n\n```ts\nconst results = await Health.queryQuantitySamples(\"heartRate\", {\n  startDate: new Date(Date.now() - 3600 * 1000), // past hour\n})\n\nfor (const sample of results) {\n  const bpm = sample.quantityValue(\n    HealthUnit.count().divided(HealthUnit.minute())\n  )\n  console.log(`Heart Rate: ${bpm} bpm at ${sample.startDate}`)\n}\n```\n\n***\n\n## Interpreting Sample Types\n\nEach sample returned may be:\n\n- `HealthQuantitySample`: The base class\n- `HealthCumulativeQuantitySample`: Includes `.sumQuantity(unit)`\n- `HealthDiscreteQuantitySample`: Includes `.averageQuantity(unit)`, `.maximumQuantity(unit)`, etc.\n\nYou can use `instanceof` or feature detection to check for extended properties.\n\nExample:\n\n```ts\nif (\"averageQuantity\" in sample) {\n  const avg = sample.averageQuantity(HealthUnit.count())\n  console.log(\"Average:\", avg)\n}\n```\n\n***\n\n## Notes\n\n- The unit passed to `.quantityValue()` **must match** the type (e.g., use `count()` for steps, `gram(HealthMetricPrefix.kilo)` for body mass).\n- Some types (like heart rate) require compound units like `count().divided(minute())`.\n- The time interval is defined by `startDate` and `endDate` on each sample.\n- Samples may have an optional `.metadata` and `.count`.\n\n***\n\n## Common Units by Type\n\n| Quantity Type              | Recommended Unit                                  |\n| -------------------------- | ------------------------------------------------- |\n| `\"stepCount\"`              | `HealthUnit.count()`                              |\n| `\"heartRate\"`              | `HealthUnit.count().divided(HealthUnit.minute())` |\n| `\"bodyMass\"`               | `HealthUnit.gram(HealthMetricPrefix.kilo)`        |\n| `\"activeEnergyBurned\"`     | `HealthUnit.kilocalorie()`                        |\n| `\"distanceWalkingRunning\"` | `HealthUnit.meter()`                              |\n\n***\n\n## Error Handling\n\n```ts\ntry {\n  const results = await Health.queryQuantitySamples(\"stepCount\")\n  console.log(\"Sample count:\", results.length)\n} catch (err) {\n  console.error(\"Failed to query samples:\", err)\n}\n```\n\n***\n\n## Summary\n\nTo read quantity samples:\n\n1. Call `Health.queryQuantitySamples(type, options)`\n2. Loop through the results\n3. Use `.quantityValue(unit)` or `.sumQuantity(unit)` depending on the type\n\nThis API gives you powerful access to time-series health data stored in HealthKit.\n","routePath":"/doc/Device Capabilities/Health/Reading Quantity Samples","lang":"en","toc":[{"id":"what-are-quantity-samples","text":"What Are Quantity Samples?","depth":2,"charIndex":459},{"id":"api-overview","text":"API Overview","depth":2,"charIndex":836},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1291},{"id":"sample-code-reading-step-count","text":"Sample Code: Reading Step Count","depth":2,"charIndex":1703},{"id":"sample-code-reading-heart-rate-with-unit","text":"Sample Code: Reading Heart Rate with Unit","depth":2,"charIndex":2157},{"id":"interpreting-sample-types","text":"Interpreting Sample Types","depth":2,"charIndex":2539},{"id":"notes","text":"Notes","depth":2,"charIndex":3039},{"id":"common-units-by-type","text":"Common Units by Type","depth":2,"charIndex":3420},{"id":"error-handling","text":"Error Handling","depth":2,"charIndex":4032},{"id":"summary","text":"Summary","depth":2,"charIndex":4252}],"frontmatter":{},"version":"","description":"The Scripting app allows you to query quantity-based health data, such as step count, heart rate, body mass, calories burned, distance, and more, using the global Health.queryQuantitySamples() API. This guide explains how to retrieve quantity samples and work with the results."},{"title":"Reading Workout Samples <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Reading Workout Samples \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app allows you to retrieve **workout sessions** from HealthKit using the global `Health.queryWorkouts()` function. Workouts represent physical activity sessions such as running, walking, swimming, cycling, strength training, and more.\n\nEach workout includes metadata such as duration, activity type, start/end times, and detailed statistics like heart rate, distance, and energy burned.\n\n***\n\n## What Is a Workout?\n\nA **HealthWorkout** record contains:\n\n- `startDate` / `endDate`: The duration of the workout session\n- `duration`: Total duration in seconds\n- `workoutActivityType`: Enum representing the workout type (e.g., running, walking)\n- `metadata`: Optional custom metadata\n- `workoutEvents`: Optional array of workout-related events (e.g., pauses, laps)\n- `allStatistics`: A dictionary of detailed quantity statistics (e.g., heart rate, distance, calories)\n\n***\n\n## API Overview\n\n```ts\nHealth.queryWorkouts(\n  options?: {\n    startDate?: Date\n    endDate?: Date\n    limit?: number\n    strictStartDate?: boolean\n    strictEndDate?: boolean\n    sortDescriptors?: Array<{\n      key: \"startDate\" | \"endDate\" | \"duration\"\n      order?: \"forward\" | \"reverse\"\n    }>\n    requestPermissions?: HealthQuantityType[]\n  }\n): Promise<HealthWorkout[]>\n```\n\n***\n\n## Parameters\n\n| Parameter                           | Description                                                                         |\n| ----------------------------------- | ----------------------------------------------------------------------------------- |\n| `startDate` / `endDate`             | Optional time range to filter workouts                                              |\n| `limit`                             | Maximum number of workouts to return                                                |\n| `strictStartDate` / `strictEndDate` | Whether to match the exact start/end dates                                          |\n| `sortDescriptors`                   | Sort results by `startDate`, `endDate`, or `duration`                               |\n| `requestPermissions`                | An array of health quantity types for which to request permissions before querying. |\n\n***\n\n## Example: Read Recent Workouts\n\n```ts\nconst workouts = await Health.queryWorkouts({\n  startDate: new Date(\"2025-07-01\"),\n  endDate: new Date(\"2025-07-05\"),\n  sortDescriptors: [{ key: \"startDate\", order: \"reverse\" }]\n})\n\nfor (const workout of workouts) {\n  console.log(\"Workout Type:\", workout.workoutActivityType)\n  console.log(\"Start:\", workout.startDate)\n  console.log(\"End:\", workout.endDate)\n  console.log(\"Duration (min):\", workout.duration / 60)\n\n  const heartRate = workout.allStatistics[\"heartRate\"]\n  const energy = workout.allStatistics[\"activeEnergyBurned\"]\n\n  if (heartRate) {\n    const avgHR = heartRate.averageQuantity(HealthUnit.count().divided(HealthUnit.minute()))\n    console.log(\"Avg Heart Rate:\", avgHR)\n  }\n\n  if (energy) {\n    const kcal = energy.sumQuantity(HealthUnit.kilocalorie())\n    console.log(\"Calories Burned:\", kcal)\n  }\n\n  console.log(\"---\")\n}\n```\n\n***\n\n## Accessing Detailed Statistics\n\nThe `allStatistics` dictionary provides detailed quantity data recorded during the workout. You can extract values using:\n\n```ts\nconst stat = workout.allStatistics[\"heartRate\"]\nconst avg = stat?.averageQuantity(HealthUnit.count().divided(HealthUnit.minute()))\nconst max = stat?.maximumQuantity(HealthUnit.count().divided(HealthUnit.minute()))\n```\n\nCommon available statistics include:\n\n- `\"heartRate\"`\n- `\"activeEnergyBurned\"`\n- `\"distanceWalkingRunning\"`\n- `\"stepCount\"`\n\n***\n\n## Workout Events (Optional)\n\nIf recorded, `workout.workoutEvents` contains an array of time-stamped workout events:\n\n```ts\nfor (const event of workout.workoutEvents || []) {\n  console.log(\"Event:\", event.type)\n  console.log(\"From:\", event.dateInterval.start)\n  console.log(\"To:\", event.dateInterval.end)\n}\n```\n\nEvent types include: pause, resume, lap, segment, motion pause/resume, etc.\n\n***\n\n## Notes\n\n- Each workout is an instance of `HealthWorkout`\n- `workoutActivityType` is an enum, which you can map to labels or icons\n- If `allStatistics` is missing some keys, the data may not have been recorded by the device/app\n- You can combine workout data with category and quantity samples for full activity insights\n\n***\n\n## Summary\n\nTo read workouts from HealthKit:\n\n1. Call `Health.queryWorkouts(options)` to get a list of `HealthWorkout` records\n2. Use `startDate`, `endDate`, and sorting options to filter and order results\n3. Access properties like `duration`, `activityType`, and `allStatistics` for insights\n4. Optionally inspect `workoutEvents` and metadata\n\nThis API is ideal for analyzing exercise history, generating workout summaries, or visualizing fitness trends.\n","routePath":"/doc/Device Capabilities/Health/Reading Workout Samples","lang":"en","toc":[{"id":"what-is-a-workout","text":"What Is a Workout?","depth":2,"charIndex":574},{"id":"api-overview","text":"API Overview","depth":2,"charIndex":1052},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1437},{"id":"example-read-recent-workouts","text":"Example: Read Recent Workouts","depth":2,"charIndex":2340},{"id":"accessing-detailed-statistics","text":"Accessing Detailed Statistics","depth":2,"charIndex":3229},{"id":"workout-events-optional","text":"Workout Events (Optional)","depth":2,"charIndex":3741},{"id":"notes","text":"Notes","depth":2,"charIndex":4135},{"id":"summary","text":"Summary","depth":2,"charIndex":4463}],"frontmatter":{},"version":"","description":"The Scripting app allows you to retrieve workout sessions from HealthKit using the global Health.queryWorkouts() function. Workouts represent physical activity sessions such as running, walking, swimming, cycling, strength training, and more. Each workout includes metadata such as duration, activity type, start/end times, and detailed statistics like heart rate, distance, and energy burned."},{"title":"Writing Health Category Samples <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Writing Health Category Samples \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app allows you to write **categorical health data** to Apple HealthKit using the `HealthCategorySample` class and the `Health.saveCategorySample()` method. Category samples represent discrete health-related events or conditions, such as sleep stages, mindful sessions, menstrual flow, ovulation test results, and more.\n\nThis guide describes how to create and save a `HealthCategorySample`.\n\n***\n\n## Prerequisites\n\n- Confirm that HealthKit is available on the device:\n\n  ```ts\n  if (!Health.isHealthDataAvailable) {\n    throw new Error(\"Health data is not available on this device.\")\n  }\n  ```\n\n- Ensure the script has the required permission for the target category type. The Scripting app will automatically request authorization if needed when saving.\n\n***\n\n## 1. Create a `HealthCategorySample`\n\nUse `HealthCategorySample.create()` to construct a new category sample.\n\n### Parameters\n\n- `type`: A `HealthCategoryType` string (e.g., `\"sleepAnalysis\"`, `\"mindfulSession\"`, `\"menstrualFlow\"`, etc.).\n- `startDate`: The beginning of the time interval that the event applies to (JavaScript `Date`).\n- `endDate`: The end of the event’s time interval (JavaScript `Date`).\n- `value`: The integer value representing the state of the category. You must use the corresponding enum value based on the type.\n- `metadata` *(optional)*: An optional metadata object describing additional attributes.\n\n### Value Mapping\n\nThe `value` must be one of the pre-defined category values. For example:\n\n- For `\"sleepAnalysis\"`, use the `HealthCategoryValueSleepAnalysis` enum:\n\n  - `HealthCategoryValueSleepAnalysis.asleepCore`\n  - `HealthCategoryValueSleepAnalysis.awake`\n  - etc.\n\n- For `\"menstrualFlow\"`, use `HealthCategoryValueSeverity`:\n\n  - `HealthCategoryValueSeverity.mild`, `moderate`, `severe`, etc.\n\nRefer to each category type’s enum definition for valid values.\n\n***\n\n### Example\n\n```ts\nconst sample = HealthCategorySample.create({\n  type: \"sleepAnalysis\",\n  startDate: new Date(\"2025-07-03T23:00:00\"),\n  endDate: new Date(\"2025-07-04T07:00:00\"),\n  value: HealthCategoryValueSleepAnalysis.asleepCore,\n  metadata: {\n    source: \"ScriptingApp\"\n  }\n})\n\nif (!sample) {\n  throw new Error(\"Failed to create HealthCategorySample.\")\n}\n```\n\n***\n\n## 2. Save the Category Sample\n\nUse `Health.saveCategorySample()` to save the created sample to HealthKit.\n\n```ts\nawait Health.saveCategorySample(sample)\n```\n\nIf saving fails (e.g., due to permission denial), the promise will reject with an error.\n\n***\n\n## Full Example\n\n```ts\nasync function writeSleepData() {\n  const sample = HealthCategorySample.create({\n    type: \"sleepAnalysis\",\n    startDate: new Date(\"2025-07-03T23:00:00\"),\n    endDate: new Date(\"2025-07-04T07:00:00\"),\n    value: HealthCategoryValueSleepAnalysis.asleepCore,\n  })\n\n  if (!sample) {\n    console.error(\"Failed to create sample.\")\n    return\n  }\n\n  try {\n    await Health.saveCategorySample(sample)\n    console.log(\"Sleep data saved successfully.\")\n  } catch (err) {\n    console.error(\"Error saving sample:\", err)\n  }\n}\n\nwriteSleepData()\n```\n\n***\n\n## Notes\n\n- The `value` must be a valid enum for the selected `type`, or the creation will fail.\n- `startDate` and `endDate` define the time range the event applies to — e.g., a sleep session or a mindful moment.\n- Metadata is optional but can be useful for tagging data source or context.\n","routePath":"/doc/Device Capabilities/Health/Writing Health Category Samples","lang":"en","toc":[{"id":"prerequisites","text":"Prerequisites","depth":2,"charIndex":585},{"id":"1-create-a-healthcategorysample","text":"1. Create a `HealthCategorySample`","depth":2,"charIndex":949},{"id":"parameters","text":"Parameters","depth":3,"charIndex":1061},{"id":"value-mapping","text":"Value Mapping","depth":3,"charIndex":1577},{"id":"example","text":"Example","depth":3,"charIndex":2049},{"id":"2-save-the-category-sample","text":"2. Save the Category Sample","depth":2,"charIndex":2418},{"id":"full-example","text":"Full Example","depth":2,"charIndex":2672},{"id":"notes","text":"Notes","depth":2,"charIndex":3239}],"frontmatter":{},"version":"","description":"The Scripting app allows you to write categorical health data to Apple HealthKit using the HealthCategorySample class and the Health.saveCategorySample() method. Category samples represent discrete health-related events or conditions, such as sleep stages, mindful sessions, menstrual flow, ovulation test results, and more. This guide describes how to create and save a HealthCategorySample."},{"title":"Writing Health Correlation Data <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Writing Health Correlation Data \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nIn the Scripting app, you can write **correlated health data** to Apple HealthKit using the global `HealthCorrelation.create()` method and `Health.saveCorrelation()`. A correlation represents a relationship between multiple health samples, such as a blood pressure reading that includes both systolic and diastolic values, or a meal record that includes nutritional quantities.\n\nThis guide explains how to create and save a correlation sample.\n\n***\n\n## What Is a Correlation?\n\nA correlation groups related health data samples into a single, logical record. HealthKit currently supports the following correlation types:\n\n- `\"bloodPressure\"` — includes two quantity samples: `\"bloodPressureSystolic\"` and `\"bloodPressureDiastolic\"`\n- `\"food\"` — can include multiple nutritional quantity samples such as calories, protein, carbohydrates, etc.\n\n***\n\n## 1. Create Related Quantity Samples\n\nBefore creating a correlation, you must first create the individual `HealthQuantitySample` instances that will be included.\n\n### Example: Blood Pressure Samples\n\n```ts\nconst systolic = HealthQuantitySample.create({\n  type: \"bloodPressureSystolic\",\n  startDate: new Date(),\n  endDate: new Date(),\n  value: 120,\n  unit: HealthUnit.millimeterOfMercury()\n})\n\nconst diastolic = HealthQuantitySample.create({\n  type: \"bloodPressureDiastolic\",\n  startDate: new Date(),\n  endDate: new Date(),\n  value: 80,\n  unit: HealthUnit.millimeterOfMercury()\n})\n```\n\nCheck that both samples are not null before proceeding.\n\n***\n\n## 2. Create the Correlation\n\nUse `HealthCorrelation.create()` to group the samples into a correlation.\n\n### Parameters\n\n- `type`: `\"bloodPressure\"` or `\"food\"`\n- `startDate`: Start of the event\n- `endDate`: End of the event\n- `objects`: An array of `HealthQuantitySample` (or `HealthCategorySample`) instances to include\n- `metadata` *(optional)*: Additional metadata (e.g., source, context)\n\n### Example\n\n```ts\nconst correlation = HealthCorrelation.create({\n  type: \"bloodPressure\",\n  startDate: systolic.startDate,\n  endDate: systolic.endDate,\n  objects: [systolic, diastolic],\n  metadata: {\n    source: \"ScriptingApp\"\n  }\n})\n\nif (!correlation) {\n  throw new Error(\"Failed to create correlation.\")\n}\n```\n\n***\n\n## 3. Save the Correlation to HealthKit\n\nUse `Health.saveCorrelation()` to persist the correlation data to the HealthKit store.\n\n```ts\nawait Health.saveCorrelation(correlation)\n```\n\n***\n\n## Full Example: Writing a Blood Pressure Correlation\n\n```ts\nasync function writeBloodPressure() {\n  const systolic = HealthQuantitySample.create({\n    type: \"bloodPressureSystolic\",\n    startDate: new Date(),\n    endDate: new Date(),\n    value: 120,\n    unit: HealthUnit.millimeterOfMercury()\n  })\n\n  const diastolic = HealthQuantitySample.create({\n    type: \"bloodPressureDiastolic\",\n    startDate: new Date(),\n    endDate: new Date(),\n    value: 80,\n    unit: HealthUnit.millimeterOfMercury()\n  })\n\n  if (!systolic || !diastolic) {\n    console.error(\"Failed to create samples.\")\n    return\n  }\n\n  const correlation = HealthCorrelation.create({\n    type: \"bloodPressure\",\n    startDate: systolic.startDate,\n    endDate: systolic.endDate,\n    objects: [systolic, diastolic],\n    metadata: {\n      note: \"Manually recorded\",\n    }\n  })\n\n  if (!correlation) {\n    console.error(\"Failed to create correlation.\")\n    return\n  }\n\n  try {\n    await Health.saveCorrelation(correlation)\n    console.log(\"Blood pressure data saved.\")\n  } catch (err) {\n    console.error(\"Failed to save:\", err)\n  }\n}\n\nwriteBloodPressure()\n```\n\n***\n\n## Notes\n\n- All quantity samples in the correlation **must have matching or consistent time ranges**.\n- For `\"bloodPressure\"`, the correlation must include **both** `systolic` and `diastolic` samples.\n- For `\"food\"`, you may include multiple samples like:\n\n  - `\"dietaryEnergyConsumed\"` → `HealthUnit.kilocalorie()`\n  - `\"dietaryProtein\"` → `HealthUnit.gram()`\n  - `\"dietaryCarbohydrates\"` → `HealthUnit.gram()`\n- Correlation creation returns `null` if invalid or incomplete.\n","routePath":"/doc/Device Capabilities/Health/Writing Health Correlation Data","lang":"en","toc":[{"id":"what-is-a-correlation","text":"What Is a Correlation?","depth":2,"charIndex":625},{"id":"1-create-related-quantity-samples","text":"1. Create Related Quantity Samples","depth":2,"charIndex":1021},{"id":"example-blood-pressure-samples","text":"Example: Blood Pressure Samples","depth":3,"charIndex":1185},{"id":"2-create-the-correlation","text":"2. Create the Correlation","depth":2,"charIndex":1669},{"id":"parameters","text":"Parameters","depth":3,"charIndex":1774},{"id":"example","text":"Example","depth":3,"charIndex":1185},{"id":"3-save-the-correlation-to-healthkit","text":"3. Save the Correlation to HealthKit","depth":2,"charIndex":2382},{"id":"full-example-writing-a-blood-pressure-correlation","text":"Full Example: Writing a Blood Pressure Correlation","depth":2,"charIndex":2569},{"id":"notes","text":"Notes","depth":2,"charIndex":3693}],"frontmatter":{},"version":"","description":"In the Scripting app, you can write correlated health data to Apple HealthKit using the global HealthCorrelation.create() method and Health.saveCorrelation(). A correlation represents a relationship between multiple health samples, such as a blood pressure reading that includes both systolic and diastolic values, or a meal record that includes nutritional quantities. This guide explains how to create and save a correlation sample."},{"title":"Writing Health Quantity Samples <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Writing Health Quantity Samples \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe Scripting app allows you to write quantity-based health data (such as step count, heart rate, calories, and more) to Apple HealthKit using the `HealthQuantitySample` class and the `Health.saveQuantitySample` method.\n\nThis guide explains how to create and save a new quantity sample.\n\n## Prerequisites\n\n- Ensure HealthKit is available on the device:\n\n  ```ts\n  if (!Health.isHealthDataAvailable) {\n    throw new Error(\"Health data is not available on this device.\")\n  }\n  ```\n\n- Make sure your script has the appropriate write permission for the quantity type you want to save. Permissions are requested automatically when you call save APIs.\n\n## 1. Create a `HealthQuantitySample`\n\nUse `HealthQuantitySample.create()` to instantiate a new sample.\n\n### Parameters\n\n- `type`: A `HealthQuantityType` string, such as `\"stepCount\"`, `\"heartRate\"`, `\"bodyMass\"`, etc.\n- `startDate`: The start of the measurement period (a JavaScript `Date` object).\n- `endDate`: The end of the measurement period (a JavaScript `Date` object).\n- `value`: The numeric value of the sample.\n- `unit`: A `HealthUnit` representing the measurement unit (e.g., `HealthUnit.count()`, `HealthUnit.gram()`, `HealthUnit.meter()`).\n- `metadata` *(optional)*: An object containing additional metadata.\n\n### Example\n\n```ts\nconst sample = HealthQuantitySample.create({\n  type: \"stepCount\",\n  startDate: new Date(\"2025-07-03T08:00:00\"),\n  endDate: new Date(\"2025-07-03T09:00:00\"),\n  value: 1200,\n  unit: HealthUnit.count(),\n  metadata: {\n    source: \"ScriptingApp\"\n  }\n})\n\nif (!sample) {\n  throw new Error(\"Failed to create HealthQuantitySample.\")\n}\n```\n\n## 2. Save the Quantity Sample\n\nAfter creating the sample, use `Health.saveQuantitySample()` to store it in the HealthKit database.\n\n```ts\nawait Health.saveQuantitySample(sample)\n```\n\nIf saving fails (e.g., due to missing permissions), the promise will reject with an error.\n\n## Full Example\n\n```ts\nasync function writeStepCount() {\n  const sample = HealthQuantitySample.create({\n    type: \"stepCount\",\n    startDate: new Date(\"2025-07-03T08:00:00\"),\n    endDate: new Date(\"2025-07-03T09:00:00\"),\n    value: 1200,\n    unit: HealthUnit.count(),\n  })\n\n  if (!sample) {\n    console.error(\"Failed to create sample.\")\n    return\n  }\n\n  try {\n    await Health.saveQuantitySample(sample)\n    console.log(\"Step count saved successfully.\")\n  } catch (err) {\n    console.error(\"Failed to save sample:\", err)\n  }\n}\n\nwriteStepCount()\n```\n\n## Notes\n\n- The unit must match the type. For example:\n\n  - `\"stepCount\"` → `HealthUnit.count()`\n  - `\"bodyMass\"` → `HealthUnit.gram(HealthMetrixPrefix.kilo)`\n  - `\"heartRate\"` → `HealthUnit.count().divided(HealthUnit.minute())`\n- If the sample’s type is cumulative (e.g., steps, distance), the `startDate` and `endDate` should cover the time window over which the value was measured.\n","routePath":"/doc/Device Capabilities/Health/Writing Health Quantity Samples","lang":"en","toc":[{"id":"prerequisites","text":"Prerequisites","depth":2,"charIndex":463},{"id":"1-create-a-healthquantitysample","text":"1. Create a `HealthQuantitySample`","depth":2,"charIndex":822},{"id":"parameters","text":"Parameters","depth":3,"charIndex":927},{"id":"example","text":"Example","depth":3,"charIndex":1445},{"id":"2-save-the-quantity-sample","text":"2. Save the Quantity Sample","depth":2,"charIndex":1794},{"id":"full-example","text":"Full Example","depth":2,"charIndex":2070},{"id":"notes","text":"Notes","depth":2,"charIndex":2621}],"frontmatter":{},"version":"","description":"The Scripting app allows you to write quantity-based health data (such as step count, heart rate, calories, and more) to Apple HealthKit using the HealthQuantitySample class and the Health.saveQuantitySample method. This guide explains how to create and save a new quantity sample."},{"title":"Keychain","content":"`Keychain` provides secure access to the system keychain for storing **sensitive and persistent data** inside the Scripting environment. It is designed for:\n\n- Authentication tokens\n- Login credentials\n- License and subscription states\n- Encryption keys\n- Private user data\n\nAll data is protected using the system-level Keychain security mechanism.\n\n***\n\n## 1. Per-Script Keychain Scope\n\nIn Scripting, `Keychain` uses a **per-script isolation model**.\n\n### 1.1 Scope Rules\n\n- Each script has its **own independent Keychain scope**\n- A script can **only access the Keychain data it has written**\n- Different scripts:\n\n  - Cannot read each other’s Keychain data\n  - Cannot overwrite each other’s keys\n  - Even if the same key name is used\n  - Even if `synchronizable: true` is enabled\n- Each script is treated as an **independent security sandbox**\n\n***\n\n### 1.2 Security Implications\n\nThis design ensures that:\n\n- No script can steal credentials from another script\n- Subscription, login state, and authorization data are fully isolated\n- Malicious scripts cannot access private user data stored by other scripts\n- The security boundary is stricter than the system-level app Keychain alone\n\n***\n\n### 1.3 Script Removal Behavior\n\n- When a script is deleted:\n\n  - All Keychain data under that script’s scope is automatically removed\n- Other scripts’ Keychain data is not affected\n\n***\n\n## 2. Namespace\n\n```ts\nnamespace Keychain\n```\n\n***\n\n## 3. Supported Data Types\n\n`Keychain` supports three data types:\n\n| Type        | Write     | Read      |\n| ----------- | --------- | --------- |\n| String      | `set`     | `get`     |\n| Boolean     | `setBool` | `getBool` |\n| Binary Data | `setData` | `getData` |\n\n***\n\n## 4. KeychainAccessibility\n\n```ts\ntype KeychainAccessibility =\n  | 'passcode'\n  | 'unlocked'\n  | 'unlocked_this_device'\n  | 'first_unlock'\n  | 'first_unlock_this_device'\n```\n\n| Value                      | Description                                                                     |\n| -------------------------- | ------------------------------------------------------------------------------- |\n| `passcode`                 | Accessible only when a device passcode is set; does not migrate to a new device |\n| `unlocked`                 | Accessible only while the device is unlocked                                    |\n| `unlocked_this_device`     | Accessible only on the current device; does not migrate                         |\n| `first_unlock`             | Accessible after the first unlock following a restart                           |\n| `first_unlock_this_device` | Same as `first_unlock`, but does not migrate                                    |\n\nDefault value:\n\n```ts\naccessibility: \"unlocked\"\n```\n\n***\n\n## 5. iCloud Synchronization (synchronizable)\n\n```ts\nsynchronizable?: boolean\n```\n\n| Value   | Description                                         |\n| ------- | --------------------------------------------------- |\n| `true`  | Synchronizes across devices using the same Apple ID |\n| `false` | Stored only on the local device                     |\n\nDefault:\n\n```ts\nsynchronizable: false\n```\n\nEven when enabled, synchronization is still restricted to the **current script scope**.\n\n***\n\n## 6. Writing Data\n\n### 6.1 Store a String\n\n```ts\nKeychain.set(key: string, value: string, options?): boolean\n```\n\n```ts\nKeychain.set(\"token\", \"abcdef\")\n```\n\n```ts\nKeychain.set(\"token\", \"abcdef\", {\n  accessibility: \"first_unlock\",\n  synchronizable: true\n})\n```\n\n***\n\n### 6.2 Store a Boolean\n\n```ts\nKeychain.setBool(key: string, value: boolean, options?): boolean\n```\n\n```ts\nKeychain.setBool(\"is_login\", true)\n```\n\n***\n\n### 6.3 Store Binary Data\n\n```ts\nKeychain.setData(key: string, value: Data, options?): boolean\n```\n\n```ts\nKeychain.setData(\"avatar\", imageData)\n```\n\n***\n\n### 6.4 Overwrite Rules\n\n- Existing values are automatically overwritten\n- `true` is returned on success\n- `false` is returned on failure\n\n***\n\n## 7. Reading Data\n\n### 7.1 Read a String\n\n```ts\nKeychain.get(key: string, options?): string | null\n```\n\n***\n\n### 7.2 Read a Boolean\n\n```ts\nKeychain.getBool(key: string, options?): boolean | null\n```\n\n***\n\n### 7.3 Read Binary Data\n\n```ts\nKeychain.getData(key: string, options?): Data | null\n```\n\n***\n\n## 8. Removing Data\n\n```ts\nKeychain.remove(key: string, options?): boolean\n```\n\n- If the key exists, it is deleted and returns `true`\n- If the key does not exist, it still safely returns `true`\n\n***\n\n## 9. Checking for Key Existence\n\n```ts\nKeychain.contains(key: string, options?): boolean\n```\n\n***\n\n## 10. Listing All Keys\n\n```ts\nKeychain.keys(options?): string[]\n```\n\n***\n\n## 11. Clearing the Keychain\n\n```ts\nKeychain.clear(options?): boolean\n```\n\nBehavior:\n\n- Only clears data within the **current script scope**\n- Does not affect other scripts\n- Does not affect the app’s own Keychain data or other apps\n\n***\n\n## 12. synchronizable Read/Write Consistency Rules\n\nIf a key is written with:\n\n```ts\nsynchronizable: true\n```\n\nThen all subsequent operations **must use the same flag**:\n\n```ts\nKeychain.set(\"token\", \"abc\", { synchronizable: true })\n\nKeychain.get(\"token\") // Cannot read\nKeychain.get(\"token\", { synchronizable: true }) // Can read\n```\n\n***\n\n## 13. Security Recommendations\n\n### Suitable Data\n\n- Authentication tokens\n- Subscription and license states\n- User identifiers\n- Encryption keys\n\n### Not Recommended\n\n- Large binary files\n- High-frequency cache data\n- Public configuration values\n\n***\n\n## 14. Typical Usage Examples\n\n```ts\n// Write\nKeychain.set(\"token\", \"abcdef\")\nKeychain.setBool(\"is_login\", true)\nKeychain.setData(\"avatar\", avatarData)\n\n// Read\nconst token = Keychain.get(\"token\")\nconst isLogin = Keychain.getBool(\"is_login\")\nconst avatar = Keychain.getData(\"avatar\")\n\n// Remove\nKeychain.remove(\"token\")\n\n// Check existence\nKeychain.contains(\"token\")\n\n// List all keys\nKeychain.keys()\n\n// Clear\nKeychain.clear()\n```\n","routePath":"/doc/Device Capabilities/Keychain","lang":"en","toc":[{"id":"1-per-script-keychain-scope","text":"1. Per-Script Keychain Scope","depth":2,"charIndex":355},{"id":"11-scope-rules","text":"1.1 Scope Rules","depth":3,"charIndex":453},{"id":"12-security-implications","text":"1.2 Security Implications","depth":3,"charIndex":853},{"id":"13-script-removal-behavior","text":"1.3 Script Removal Behavior","depth":3,"charIndex":1195},{"id":"2-namespace","text":"2. Namespace","depth":2,"charIndex":1383},{"id":"3-supported-data-types","text":"3. Supported Data Types","depth":2,"charIndex":1435},{"id":"4-keychainaccessibility","text":"4. KeychainAccessibility","depth":2,"charIndex":1708},{"id":"5-icloud-synchronization-synchronizable","text":"5. iCloud Synchronization (synchronizable)","depth":2,"charIndex":2734},{"id":"6-writing-data","text":"6. Writing Data","depth":2,"charIndex":3219},{"id":"61-store-a-string","text":"6.1 Store a String","depth":3,"charIndex":3239},{"id":"62-store-a-boolean","text":"6.2 Store a Boolean","depth":3,"charIndex":3486},{"id":"63-store-binary-data","text":"6.3 Store Binary Data","depth":3,"charIndex":3638},{"id":"64-overwrite-rules","text":"6.4 Overwrite Rules","depth":3,"charIndex":3792},{"id":"7-reading-data","text":"7. Reading Data","depth":2,"charIndex":3936},{"id":"71-read-a-string","text":"7.1 Read a String","depth":3,"charIndex":3956},{"id":"72-read-a-boolean","text":"7.2 Read a Boolean","depth":3,"charIndex":4046},{"id":"73-read-binary-data","text":"7.3 Read Binary Data","depth":3,"charIndex":4142},{"id":"8-removing-data","text":"8. Removing Data","depth":2,"charIndex":4237},{"id":"9-checking-for-key-existence","text":"9. Checking for Key Existence","depth":2,"charIndex":4437},{"id":"10-listing-all-keys","text":"10. Listing All Keys","depth":2,"charIndex":4537},{"id":"11-clearing-the-keychain","text":"11. Clearing the Keychain","depth":2,"charIndex":4612},{"id":"12-synchronizable-readwrite-consistency-rules","text":"12. synchronizable Read/Write Consistency Rules","depth":2,"charIndex":4851},{"id":"13-security-recommendations","text":"13. Security Recommendations","depth":2,"charIndex":5191},{"id":"suitable-data","text":"Suitable Data","depth":3,"charIndex":5224},{"id":"not-recommended","text":"Not Recommended","depth":3,"charIndex":5339},{"id":"14-typical-usage-examples","text":"14. Typical Usage Examples","depth":2,"charIndex":5445}],"frontmatter":{},"version":"","description":"Keychain provides secure access to the system keychain for storing sensitive and persistent data inside the Scripting environment. It is designed for: Authentication tokensLogin credentialsLicense and subscription statesEncryption keysPrivate user data All data is protected using the system-level Keychain security mechanism."},{"title":"LocalAuth","content":"The `LocalAuth` API is a wrapper around the iOS Local Authentication framework, enabling biometric or passcode authentication in your Scripting app scripts. This document explains how to use the `LocalAuth` API effectively.\n\n## Overview\n\nThe `LocalAuth` module provides methods and properties for checking authentication availability and performing user authentication. It supports biometrics like Face ID, Touch ID, and Optic ID, as well as fallback options like passcodes.\n\n***\n\n## Properties\n\n### `LocalAuth.isAvailable`\n\n- **Type:** `boolean`\n- **Description:** Indicates whether authentication can proceed using any available policies.\n- **Example:**\n  ```tsx\n  if (LocalAuth.isAvailable) {\n    console.log(\"Authentication is available.\")\n  } else {\n    console.log(\"Authentication is not available.\")\n  }\n  ```\n\n### `LocalAuth.isBiometricsAvailable`\n\n- **Type:** `boolean`\n- **Description:** Indicates whether biometric authentication can proceed.\n- **Example:**\n  ```tsx\n  if (LocalAuth.isBiometricsAvailable) {\n    console.log(\"Biometric authentication is available.\")\n  } else {\n    console.log(\"Biometric authentication is not available.\")\n  }\n  ```\n\n### `LocalAuth.biometryType`\n\n- **Type:** `LocalAuthBiometryType`\n- **Description:** Specifies the type of biometric authentication supported by the device. Possible values:\n  - `\"faceID\"`\n  - `\"touchID\"`\n  - `\"opticID\"`\n  - `\"none\"`\n  - `\"unknown\"`\n- **Example:**\n  ```tsx\n  const biometry = LocalAuth.biometryType\n  console.log(`Biometry type: ${biometry}`)\n  ```\n\n***\n\n## Methods\n\n### `LocalAuth.authenticate(reason: string, useBiometrics?: boolean): Promise<boolean>`\n\n- **Description:** Authenticates the user with available biometrics or a fallback method (e.g., passcode). Returns a promise that resolves to `true` if authentication succeeds, or `false` if it fails.\n- **Parameters:**\n  - `reason` (string): The message displayed to the user when prompting for authentication. This must not be empty. Example: `'Authenticate to access MyScript.'`\n  - `useBiometrics` (boolean, optional): Defaults to `true`. If `true`, the method uses biometrics for authentication otherwise, it uses biometrics or a fallback method (e.g., passcode).\n- **Example:**\n  ```tsx\n  async function authenticateUser() {\n    const reason = \"Authenticate to access MyScript.\"\n    const result = await LocalAuth.authenticate(reason, true)\n    if (result) {\n      console.log(\"Authentication succeeded.\")\n    } else {\n      console.log(\"Authentication failed.\")\n    }\n  }\n\n  authenticateUser()\n  ```\n\n***\n\n## Usage Examples\n\n### Check Biometric Availability\n\n```tsx\nif (LocalAuth.isBiometricsAvailable) {\n  console.log(\"Device supports biometric authentication.\")\n  console.log(`Biometry type: ${LocalAuth.biometryType}`)\n} else {\n  console.log(\"Biometric authentication is not supported on this device.\")\n}\n```\n\n### Authenticate with Biometrics\n\n```tsx\nasync function accessSecureData() {\n  const authenticated = await LocalAuth.authenticate(\n    \"Authenticate to access secure data.\"\n  )\n  if (authenticated) {\n    console.log(\"Access granted.\")\n  } else {\n    console.log(\"Access denied.\")\n  }\n}\n\naccessSecureData()\n```\n\n### Fallback to Passcode Authentication\n\n```tsx\nasync function authenticateWithFallback() {\n  const authenticated = await LocalAuth.authenticate(\n    \"Authenticate to proceed.\",\n    false // Allow biometrics or passcode\n  )\n  console.log(authenticated ? \"Authenticated\" : \"Authentication failed\")\n}\n\nauthenticateWithFallback()\n```\n\n***\n\n## Notes\n\n- Always provide a meaningful message in the `reason` parameter to help users understand why authentication is being requested.\n- Use `LocalAuth.isAvailable` and `LocalAuth.isBiometricsAvailable` to check the availability of authentication options before invoking `LocalAuth.authenticate`.\n- Handle both success and failure cases gracefully to provide a seamless user experience.\n","routePath":"/doc/Device Capabilities/LocalAuth","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":225},{"id":"properties","text":"Properties","depth":2,"charIndex":481},{"id":"localauthisavailable","text":"`LocalAuth.isAvailable`","depth":3,"charIndex":496},{"id":"localauthisbiometricsavailable","text":"`LocalAuth.isBiometricsAvailable`","depth":3,"charIndex":818},{"id":"localauthbiometrytype","text":"`LocalAuth.biometryType`","depth":3,"charIndex":1161},{"id":"methods","text":"Methods","depth":2,"charIndex":1533},{"id":"localauthauthenticatereason-string-usebiometrics-boolean-promiseboolean","text":"`LocalAuth.authenticate(reason: string, useBiometrics?: boolean): Promise<boolean>`","depth":3,"charIndex":1545},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":2546},{"id":"check-biometric-availability","text":"Check Biometric Availability","depth":3,"charIndex":2565},{"id":"authenticate-with-biometrics","text":"Authenticate with Biometrics","depth":3,"charIndex":2853},{"id":"fallback-to-passcode-authentication","text":"Fallback to Passcode Authentication","depth":3,"charIndex":3164},{"id":"notes","text":"Notes","depth":2,"charIndex":3501}],"frontmatter":{},"version":"","description":"The LocalAuth API is a wrapper around the iOS Local Authentication framework, enabling biometric or passcode authentication in your Scripting app scripts. This document explains how to use the LocalAuth API effectively."},{"title":"Location","content":"The global `Location` API provides access to the device’s geographic location, including one-time location retrieval, reverse geocoding, user-driven location selection via map, accuracy control, and permission checking for widgets.\n\n***\n\n## Overview\n\nThis API allows you to:\n\n- Request the device's current location\n- Select a location manually using a map interface\n- Reverse geocode latitude and longitude to address details\n- Adjust location accuracy settings\n- Check location access status for widgets\n\n**Note**: This is a global API and does not require import.\n\n***\n\n## API Reference\n\n### `Location.isAuthorizedForWidgetUpdates(): Promise<boolean>`\n\nChecks whether widgets have permission to receive location updates.\n\n```ts\nconst isAuthorized = await Location.isAuthorizedForWidgetUpdates()\nif (!isAuthorized) {\n  console.log(\"Widget location access is not authorized.\")\n}\n```\n\n***\n\n### `Location.setAccuracy(accuracy: LocationAccuracy): Promise<void>`\n\nSets the desired accuracy level for location retrieval. Higher accuracy may increase battery usage and wait time.\n\n#### Parameters\n\n| Value               | Description                |\n| ------------------- | -------------------------- |\n| `\"best\"`            | Maximum available accuracy |\n| `\"tenMeters\"`       | Within 10 meters           |\n| `\"hundredMeters\"`   | Within 100 meters          |\n| `\"kilometer\"`       | Within 1 kilometer         |\n| `\"threeKilometers\"` | Within 3 kilometers        |\n\n```ts\nawait Location.setAccuracy(\"hundredMeters\")\n```\n\n***\n\n### `Location.requestCurrent(options?: { forceRequest?: boolean }): Promise<LocationInfo | null>`\n\nRequests the user's current location once. May trigger a permission prompt if not previously granted.\n\nBy default, if a cached location is available, it will be returned immediately. If no cached location exists, a new request will be made. To force a new location retrieval even if a cached value exists, pass `{ forceRequest: true }`.\n\n#### Parameters\n\n| Option         | Type      | Required | Description                                                     |\n| -------------- | --------- | -------- | --------------------------------------------------------------- |\n| `forceRequest` | `boolean` | No       | If `true`, bypasses the cache and always requests new location. |\n\n```ts\nconst location = await Location.requestCurrent({ forceRequest: true })\nif (location) {\n  console.log(\"Latitude:\", location.latitude)\n  console.log(\"Longitude:\", location.longitude)\n  console.log(\"Timestamp:\", location.timestamp)\n}\n```\n\n***\n\n### `Location.pickFromMap(): Promise<LocationInfo | null>`\n\nOpens the built-in map interface to allow the user to manually select a location.\n\n```ts\nconst selected = await Location.pickFromMap()\nif (selected) {\n  console.log(\"User selected:\", selected.latitude, selected.longitude)\n}\n```\n\n***\n\n### `Location.reverseGeocode(options): Promise<LocationPlacemark[] | null>`\n\nConverts latitude and longitude into human-readable place information such as street, city, and country.\n\n#### Parameters\n\n| Field       | Type     | Required | Description                                                     |\n| ----------- | -------- | -------- | --------------------------------------------------------------- |\n| `latitude`  | `number` | Yes      | Latitude in degrees                                             |\n| `longitude` | `number` | Yes      | Longitude in degrees                                            |\n| `locale`    | `string` | No       | Optional locale (e.g., `\"en-US\"`). Defaults to device language. |\n\n```ts\nconst placemarks = await Location.reverseGeocode({\n  latitude: 51.5074,\n  longitude: -0.1278,\n  locale: \"en-GB\"\n})\n\nif (placemarks?.length) {\n  const place = placemarks[0]\n  console.log(\"City:\", place.locality)\n  console.log(\"Country:\", place.country)\n}\n```\n\n***\n\n## Types\n\n### `LocationAccuracy`\n\nSpecifies the desired accuracy of location data:\n\n```ts\ntype LocationAccuracy =\n  | \"best\"\n  | \"tenMeters\"\n  | \"hundredMeters\"\n  | \"kilometer\"\n  | \"threeKilometers\"\n```\n\n***\n\n### `LocationInfo`\n\nRepresents a geographic coordinate with timestamp:\n\n```ts\ntype LocationInfo = {\n  /**\n   * The latitude in degrees.\n   */\n  latitude: number\n  /**\n   * The longitude in degrees.\n   */\n  longitude: number\n  /**\n   * Timestamp of when the location was recorded, in milliseconds since epoch.\n   */\n  timestamp: number\n}\n```\n\n***\n\n### `LocationPlacemark`\n\nRepresents a human-readable description of a geographic coordinate, typically returned by reverse geocoding. Includes structured location details such as city, country, and street.\n\n```ts\ntype LocationPlacemark = {\n  location?: LocationInfo\n  region?: string\n  timeZone?: string\n  name?: string\n  thoroughfare?: string\n  subThoroughfare?: string\n  locality?: string\n  subLocality?: string\n  administrativeArea?: string\n  subAdministrativeArea?: string\n  postalCode?: string\n  isoCountryCode?: string\n  country?: string\n  inlandWater?: string\n  ocean?: string\n  areasOfInterest?: string[]\n}\n```\n\n#### Field Descriptions\n\n| Field                   | Type           | Description                                                                     |\n| ----------------------- | -------------- | ------------------------------------------------------------------------------- |\n| `location`              | `LocationInfo` | The coordinates of the placemark (typically the same as reverse geocode input). |\n| `region`                | `string`       | General region or province/state.                                               |\n| `timeZone`              | `string`       | Time zone identifier (e.g., `\"Asia/Shanghai\"`).                                 |\n| `name`                  | `string`       | Generic name such as building, landmark, or area.                               |\n| `thoroughfare`          | `string`       | Street name (e.g., `\"Main St\"`, `\"Zhongguancun Ave\"`).                          |\n| `subThoroughfare`       | `string`       | Street-level detail like building number or unit.                               |\n| `locality`              | `string`       | City or town.                                                                   |\n| `subLocality`           | `string`       | Subdivision of the locality (e.g., neighborhood or district).                   |\n| `administrativeArea`    | `string`       | Province, state, or equivalent administrative area.                             |\n| `subAdministrativeArea` | `string`       | Further subdivision like county or district.                                    |\n| `postalCode`            | `string`       | ZIP or postal code.                                                             |\n| `isoCountryCode`        | `string`       | ISO 3166-1 alpha-2 country code (e.g., `\"US\"`, `\"CN\"`).                         |\n| `country`               | `string`       | Full name of the country or region.                                             |\n| `inlandWater`           | `string`       | Name of nearby inland water (river/lake), if applicable.                        |\n| `ocean`                 | `string`       | Name of nearby ocean, if applicable.                                            |\n| `areasOfInterest`       | `string[]`     | List of nearby points of interest or landmarks (e.g., `\"Times Square\"`).        |\n\n***\n\n## Example Usage\n\n### Reverse Geocode\n\n```ts\nconst placemarks = await Location.reverseGeocode({\n  latitude: 40.7128,\n  longitude: -74.0060,\n  locale: \"en-US\"\n})\n\nif (placemarks?.length) {\n  const place = placemarks[0]\n  console.log(\"Country:\", place.country)\n  console.log(\"City:\", place.locality)\n  console.log(\"Street:\", place.thoroughfare, place.subThoroughfare)\n  console.log(\"Full Name:\", place.name)\n  console.log(\"Postal Code:\", place.postalCode)\n  console.log(\"Points of Interest:\", place.areasOfInterest?.join(\", \"))\n}\n```\n\n***\n\n### Address Formatter (Helper)\n\n```ts\nfunction formatAddress(p: LocationPlacemark): string {\n  return [\n    p.country,\n    p.administrativeArea,\n    p.locality,\n    p.subLocality,\n    p.thoroughfare,\n    p.subThoroughfare\n  ].filter(Boolean).join(\", \")\n}\n```\n\n***\n\n## Best Practices & Use Cases\n\n- Use `areasOfInterest` and `name` to display user-friendly place names.\n- Use `postalCode`, `locality`, and `administrativeArea` for autofill and geotagging.\n- Use `timestamp` to determine freshness of location data.\n- Use `timeZone` for localizing time-based features.\n- Set location accuracy before calling `requestCurrent` for optimal precision.\n- Always check widget permissions via `isAuthorizedForWidgetUpdates()`.\n\n***\n\n## Notes\n\n- Reverse geocoding may return multiple results. Use the first placemark for best relevance.\n- If location retrieval fails, `null` is returned.\n- When `forceRequest` is false or omitted, cached location may be used for faster results.\n- In widgets, location access may be restricted. Always verify permissions explicitly.\n","routePath":"/doc/Device Capabilities/Location","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":238},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":573},{"id":"locationisauthorizedforwidgetupdates-promiseboolean","text":"`Location.isAuthorizedForWidgetUpdates(): Promise<boolean>`","depth":3,"charIndex":591},{"id":"locationsetaccuracyaccuracy-locationaccuracy-promisevoid","text":"`Location.setAccuracy(accuracy: LocationAccuracy): Promise<void>`","depth":3,"charIndex":890},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1076},{"id":"locationrequestcurrentoptions--forcerequest-boolean--promiselocationinfo--null","text":"`Location.requestCurrent(options?: { forceRequest?: boolean }): Promise<LocationInfo | null>`","depth":3,"charIndex":1525},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":1962},{"id":"locationpickfrommap-promiselocationinfo--null","text":"`Location.pickFromMap(): Promise<LocationInfo | null>`","depth":3,"charIndex":2551},{"id":"locationreversegeocodeoptions-promiselocationplacemark--null","text":"`Location.reverseGeocode(options): Promise<LocationPlacemark[] | null>`","depth":3,"charIndex":2845},{"id":"parameters-2","text":"Parameters","depth":4,"charIndex":3028},{"id":"types","text":"Types","depth":2,"charIndex":3836},{"id":"locationaccuracy","text":"`LocationAccuracy`","depth":3,"charIndex":3846},{"id":"locationinfo","text":"`LocationInfo`","depth":3,"charIndex":4045},{"id":"locationplacemark","text":"`LocationPlacemark`","depth":3,"charIndex":4392},{"id":"field-descriptions","text":"Field Descriptions","depth":4,"charIndex":5012},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":7329},{"id":"reverse-geocode","text":"Reverse Geocode","depth":3,"charIndex":7347},{"id":"address-formatter-helper","text":"Address Formatter (Helper)","depth":3,"charIndex":7867},{"id":"best-practices--use-cases","text":"Best Practices & Use Cases","depth":2,"charIndex":8132},{"id":"notes","text":"Notes","depth":2,"charIndex":8591}],"frontmatter":{},"version":"","description":"The global Location API provides access to the device’s geographic location, including one-time location retrieval, reverse geocoding, user-driven location selection via map, accuracy control, and permission checking for widgets."},{"title":"MediaComposer Example","content":"This example demonstrates how to use `MediaComposer` to compose a final video from **video, image, and audio sources**, and export it to the script directory.\n\nThe workflow covered in this example includes:\n\n1. Picking an audio file\n2. Picking an image\n3. Picking a video\n4. Building a visual timeline (video + image)\n5. Inserting audio at a specific time\n6. Exporting the composed video\n\n***\n\n## Example Code\n\n```tsx\n\n\nconsole.present().then(() => Script.exit())\n\nasync function run() {\n  try {\n\n    const audioPath = (await DocumentPicker.pickFiles({\n      types: [\"public.audio\"]\n    })).at(0)\n\n    if (audioPath == null) {\n      console.error(\"no audio\")\n      return\n    }\n\n    console.log(\"Audio Picked\")\n\n    const imageResult = (await Photos.pick({\n      filter: PHPickerFilter.images()\n    })).at(0)\n\n    const imagePath = await imageResult?.itemProvider.loadFilePath(\"public.image\")\n\n    if (!imagePath) {\n      console.log(\"No image\")\n      return\n    }\n\n    console.log(\"Image picked\")\n\n    const videoResult = (await Photos.pick({\n      filter: PHPickerFilter.videos()\n    })).at(0)\n\n    const videoPath = await videoResult?.itemProvider.loadFilePath(\"public.movie\")\n\n    if (videoPath == null) {\n      console.log(\"No video\")\n      return\n    }\n\n    console.log(\"Video Picked\")\n\n    console.log(\"Start composing...\")\n\n    const exportPath = Path.join(\n      Script.directory,\n      \"dest.mp4\"\n    )\n\n    const exportResult = await MediaComposer.composeAndExport({\n      exportPath,\n      timeline: {\n        videoItems: [{\n          videoPath: videoPath\n        }, {\n          imagePath: imagePath,\n          duration: MediaTime.make({\n            seconds: 5,\n            preferredTimescale: 600\n          })\n        }],\n        audioClips: [{\n          path: audioPath,\n          at: MediaTime.make({\n            seconds: 5,\n            preferredTimescale: 600\n          })\n        }]\n      }\n    })\n\n    console.log(\n      \"Result:\",\n      exportResult.exportPath,\n      \"\\n\",\n      exportResult.duration.getSeconds()\n    )\n\n  } catch (e) {\n    console.error(e)\n  }\n}\n\nrun()\n```\n\n***\n\n## Timeline Breakdown\n\n### Visual Timeline (videoItems)\n\n```ts\nvideoItems: [\n  { videoPath },\n  {\n    imagePath,\n    duration: MediaTime.make({\n      seconds: 5,\n      preferredTimescale: 600\n    })\n  }\n]\n```\n\n- The first `VideoItem` is a full video clip\n- The second `VideoItem` is an image displayed for 5 seconds\n- All `videoItems` are concatenated **in strict order**\n- Final video duration = video duration + 5 seconds\n\n***\n\n### Audio Timeline (audioClips)\n\n```ts\naudioClips: [{\n  path: audioPath,\n  at: MediaTime.make({\n    seconds: 5,\n    preferredTimescale: 600\n  })\n}]\n```\n\n- The audio starts playing at **5 seconds** on the final timeline\n- When `at` is omitted, audio clips are appended sequentially\n- Audio does **not** affect the final video duration\n\n***\n\n## Export Result\n\n```ts\n{\n  exportPath: string\n  duration: MediaTime\n}\n```\n\n- `exportPath`: the full output file path\n- `duration`: the total video duration (derived from `videoItems`)\n\n***\n\n## Common Errors and Edge Cases\n\n### 1. ImageClip without duration\n\n```ts\n{\n  imagePath: \"...\",\n  // ❌ missing duration\n}\n```\n\n**Issue:**\n\n- Images have no intrinsic duration\n- Omitting `duration` will cause composition to fail\n\n**Solution:**\n\n- Always provide an explicit `MediaTime` duration\n\n***\n\n### 2. Using raw numbers instead of MediaTime\n\n```ts\n// ❌ incorrect\nat: 5\n```\n\n**Correct usage:**\n\n```ts\nat: MediaTime.make({\n  seconds: 5,\n  preferredTimescale: 600\n})\n```\n\nAll time values in MediaComposer **must** be represented by `MediaTime`.\n\n***\n\n### 3. Mixed timescales causing precision issues\n\n**Issue:**\n\n- Different media sources may use different timescales\n- This can lead to rounding errors during trimming, fades, or alignment\n\n**Recommendation:**\n\n- Use a consistent `preferredTimescale` (e.g. 600)\n- Convert external times using `convertScale` when needed\n\n***\n\n### 4. Audio extending beyond the video duration\n\n**Behavior:**\n\n- Audio that exceeds the end of the video does not extend the final duration\n- Any audio beyond the video end is automatically truncated\n\n***\n\n### 5. Unexpected audio balance when mixing original and external audio\n\n**Cause:**\n\n- By default, original video audio and external audio are mixed together\n- Without ducking, dialogue may be masked by background music\n\n***\n\n## Audio Ducking Behavior\n\n### What is Ducking\n\nDucking refers to:\n\n> Automatically lowering the volume of external audio (e.g. background music) when original video audio (e.g. dialogue) is present.\n\n***\n\n### Ducking Configuration\n\n```ts\nexportOptions: {\n  ducking: {\n    enabled: true,\n    duckedVolume: 0.25,\n    attackSeconds: 0.15,\n    releaseSeconds: 0.25\n  }\n}\n```\n\n#### Parameters\n\n- **enabled**\n  Enables or disables ducking (default: `true`)\n\n- **duckedVolume**\n  Target volume for external audio during ducking (0…1)\n\n- **attackSeconds**\n  Ramp-down duration before original audio starts\n\n- **releaseSeconds**\n  Ramp-up duration after original audio ends\n\n***\n\n### Conditions for Ducking to Apply\n\nDucking is applied only when all of the following are true:\n\n1. `VideoClip.keepOriginalAudio === true`\n2. At least one external `AudioClip` exists\n3. `exportOptions.ducking.enabled !== false`\n\n***\n\n## Audio Mixing Rules Summary\n\n1. **Original Video Audio**\n\n   - Included only when `keepOriginalAudio` is set to `true`\n\n2. **External Audio**\n\n   - Can be positioned or appended sequentially\n   - Supports per-clip `volume`, `fade`, and looping\n\n3. **Final Mix**\n\n   - All audio sources are mixed into a single output track\n   - Audio never changes the final video duration\n   - Ducking is applied automatically during mixing\n","routePath":"/doc/Device Capabilities/MediaComposer/MediaComposer Example","lang":"en","toc":[{"id":"example-code","text":"Example Code","depth":2,"charIndex":394},{"id":"timeline-breakdown","text":"Timeline Breakdown","depth":2,"charIndex":2101},{"id":"visual-timeline-videoitems","text":"Visual Timeline (videoItems)","depth":3,"charIndex":2124},{"id":"audio-timeline-audioclips","text":"Audio Timeline (audioClips)","depth":3,"charIndex":2531},{"id":"export-result","text":"Export Result","depth":2,"charIndex":2871},{"id":"common-errors-and-edge-cases","text":"Common Errors and Edge Cases","depth":2,"charIndex":3062},{"id":"1-imageclip-without-duration","text":"1. ImageClip without duration","depth":3,"charIndex":3095},{"id":"2-using-raw-numbers-instead-of-mediatime","text":"2. Using raw numbers instead of MediaTime","depth":3,"charIndex":3362},{"id":"3-mixed-timescales-causing-precision-issues","text":"3. Mixed timescales causing precision issues","depth":3,"charIndex":3615},{"id":"4-audio-extending-beyond-the-video-duration","text":"4. Audio extending beyond the video duration","depth":3,"charIndex":3941},{"id":"5-unexpected-audio-balance-when-mixing-original-and-external-audio","text":"5. Unexpected audio balance when mixing original and external audio","depth":3,"charIndex":4149},{"id":"audio-ducking-behavior","text":"Audio Ducking Behavior","depth":2,"charIndex":4375},{"id":"what-is-ducking","text":"What is Ducking","depth":3,"charIndex":4402},{"id":"ducking-configuration","text":"Ducking Configuration","depth":3,"charIndex":4581},{"id":"parameters","text":"Parameters","depth":4,"charIndex":4748},{"id":"conditions-for-ducking-to-apply","text":"Conditions for Ducking to Apply","depth":3,"charIndex":5047},{"id":"audio-mixing-rules-summary","text":"Audio Mixing Rules Summary","depth":2,"charIndex":5282}],"frontmatter":{},"version":"","description":"This example demonstrates how to use MediaComposer to compose a final video from video, image, and audio sources, and export it to the script directory. The workflow covered in this example includes: Picking an audio filePicking an imagePicking a videoBuilding a visual timeline (video + image)Inserting audio at a specific timeExporting the composed video"},{"title":"MediaTime","content":"`MediaTime` represents **precise media time values** in audio and video processing. It is the fundamental time type used by MediaComposer in Scripting.\n\nConceptually, `MediaTime` corresponds to a time value with an explicit time base (similar to `CMTime` in AVFoundation), but provides a safer and more expressive abstraction for the scripting layer.\n\nA `MediaTime` instance can represent **numeric time**, **invalid time**, **indefinite time**, or **infinite time**, and supports strict arithmetic and comparison operations.\n\n***\n\n## Key Features\n\n- Precise construction using **value + timescale** or **seconds + preferredTimescale**\n- Time scaling with configurable rounding methods\n- Safe arithmetic and comparison operations\n- Explicit modeling of invalid, indefinite, and infinite time values\n- Designed for timeline composition, trimming, alignment, fades, and placement\n\n***\n\n## Time Precision Model\n\n`MediaTime` is based on the following core concepts:\n\n- **value**: an integer time value\n- **timescale**: the number of time units per second\n\nExamples:\n\n- `value = 300`, `timescale = 600` → 0.5 seconds\n- `value = 18000`, `timescale = 600` → 30 seconds\n\nThis model allows frame-accurate or sample-accurate timing without relying on floating-point arithmetic.\n\n***\n\n## Read-only Properties\n\n### secondes\n\n```ts\nreadonly secondes: number\n```\n\nThe time expressed in seconds as a floating-point value.\nThis is a derived value intended mainly for display or debugging. It is **not recommended for timeline calculations**.\n\n***\n\n### isValid\n\n```ts\nreadonly isValid: boolean\n```\n\nIndicates whether the time is valid and usable for calculations.\nReturns `false` for invalid, indefinite, or infinite time values.\n\n***\n\n### isPositiveInfinity / isNegativeInfinity\n\n```ts\nreadonly isPositiveInfinity: boolean\nreadonly isNegativeInfinity: boolean\n```\n\nIndicates whether the time represents positive or negative infinity.\nThese values are typically used as internal boundary markers in timeline logic.\n\n***\n\n### isIndefinite\n\n```ts\nreadonly isIndefinite: boolean\n```\n\nIndicates whether the time is indefinite.\nThis is commonly used when a media asset’s duration has not yet been determined.\n\n***\n\n### isNumeric\n\n```ts\nreadonly isNumeric: boolean\n```\n\nIndicates whether the time can participate in numeric calculations.\nArithmetic and comparison operations should only be performed when this value is `true`.\n\n***\n\n### hasBeenRounded\n\n```ts\nreadonly hasBeenRounded: boolean\n```\n\nIndicates whether the time has undergone rounding during construction or scale conversion.\nThis is useful when validating frame- or sample-accurate timelines.\n\n***\n\n## Time Conversion\n\n### convertScale\n\n```ts\nconvertScale(newTimescale: number, method: MediaTimeRoundingMethod): MediaTime\n```\n\nConverts the time to a new timescale using the specified rounding method.\n\n**Typical use cases:**\n\n- Aligning video frame timing (e.g. 600, 90000)\n- Aligning audio sample timing (e.g. 44100, 48000)\n- Avoiding precision errors caused by mixed timescales\n\n***\n\n## Accessing Time Values\n\n### getSeconds\n\n```ts\ngetSeconds(): number\n```\n\nReturns the time expressed in seconds as a floating-point value.\nSemantically equivalent to reading `secondes`, but clearer in intent.\n\n***\n\n## Time Arithmetic\n\n### plus / minus\n\n```ts\nplus(other: MediaItem): MediaItem\nminus(other: MediaItem): MediaItem\n```\n\nPerforms time addition or subtraction and returns a new `MediaTime`.\n\n- Both operands must be numeric\n- The original instances are not modified\n- The result follows the internal time base rules\n\n***\n\n## Time Comparison\n\n```ts\nlt(other: MediaItem): boolean\ngt(other: MediaItem): boolean\nlte(other: MediaItem): boolean\ngte(other: MediaItem): boolean\neq(other: MediaItem): boolean\nneq(other: MediaItem): boolean\n```\n\nCompares two time values.\n\n- Supports strict ordering and equality checks\n- Produces deterministic results even for non-numeric times\n- Recommended for timeline sorting, trimming, and boundary checks\n\n***\n\n## Static Constructors\n\n### make\n\n```ts\nstatic make(options: {\n  value: number\n  timescale: number\n} | {\n  seconds: number\n  preferredTimescale: number\n}): MediaTime\n```\n\nCreates a `MediaTime` instance.\n\n#### Using value + timescale\n\n```ts\nMediaTime.make({\n  value: 300,\n  timescale: 600\n})\n```\n\nBest suited for low-level or precision-critical scenarios.\n\n***\n\n#### Using seconds + preferredTimescale\n\n```ts\nMediaTime.make({\n  seconds: 5,\n  preferredTimescale: 600\n})\n```\n\nRecommended for most scripting-level use cases where seconds are the primary unit.\n\n***\n\n### zero\n\n```ts\nstatic zero(): MediaTime\n```\n\nReturns a `MediaTime` representing **0 seconds**.\n\n***\n\n### invalid\n\n```ts\nstatic invalid(): MediaTime\n```\n\nReturns an invalid time value.\nUseful for explicitly representing errors or unavailable timing information.\n\n***\n\n### indefinite\n\n```ts\nstatic indefinite(): MediaTime\n```\n\nReturns an indefinite time value.\nTypically used when a media asset’s duration is not yet known.\n\n***\n\n### positiveInfinity / negativeInfinity\n\n```ts\nstatic positiveInfinity(): MediaTime\nstatic negativeInfinity(): MediaTime\n```\n\nReturns positive or negative infinite time values.\nThese are mainly intended for internal timeline boundary handling and are not recommended for general scripting logic.\n\n***\n\n## Usage Guidelines and Best Practices\n\n- Avoid using floating-point seconds directly for timeline calculations; prefer `MediaTime`\n- Explicitly convert timescales when mixing audio and video sources\n- Check `isNumeric` before performing arithmetic or comparisons\n- Use consistent timescales when constructing `TimeRange` or `at` values\n\n***\n\n## Typical Usage in MediaComposer\n\n- Placing audio or video clips on the timeline (`AudioClip.at`)\n- Defining trimming ranges (`TimeRange`)\n- Calculating precise export durations\n- Driving fades, alignment, looping, and synchronization behavior\n","routePath":"/doc/Device Capabilities/MediaComposer/MediaTime","lang":"en","toc":[{"id":"key-features","text":"Key Features","depth":2,"charIndex":532},{"id":"time-precision-model","text":"Time Precision Model","depth":2,"charIndex":884},{"id":"read-only-properties","text":"Read-only Properties","depth":2,"charIndex":1274},{"id":"secondes","text":"secondes","depth":3,"charIndex":1299},{"id":"isvalid","text":"isValid","depth":3,"charIndex":1532},{"id":"ispositiveinfinity--isnegativeinfinity","text":"isPositiveInfinity / isNegativeInfinity","depth":3,"charIndex":1719},{"id":"isindefinite","text":"isIndefinite","depth":3,"charIndex":2004},{"id":"isnumeric","text":"isNumeric","depth":3,"charIndex":2193},{"id":"hasbeenrounded","text":"hasBeenRounded","depth":3,"charIndex":2410},{"id":"time-conversion","text":"Time Conversion","depth":2,"charIndex":2639},{"id":"convertscale","text":"convertScale","depth":3,"charIndex":2659},{"id":"accessing-time-values","text":"Accessing Time Values","depth":2,"charIndex":3026},{"id":"getseconds","text":"getSeconds","depth":3,"charIndex":3052},{"id":"time-arithmetic","text":"Time Arithmetic","depth":2,"charIndex":3241},{"id":"plus--minus","text":"plus / minus","depth":3,"charIndex":3261},{"id":"time-comparison","text":"Time Comparison","depth":2,"charIndex":3559},{"id":"static-constructors","text":"Static Constructors","depth":2,"charIndex":3979},{"id":"make","text":"make","depth":3,"charIndex":4003},{"id":"using-value--timescale","text":"Using value + timescale","depth":4,"charIndex":4183},{"id":"using-seconds--preferredtimescale","text":"Using seconds + preferredTimescale","depth":4,"charIndex":4340},{"id":"zero","text":"zero","depth":3,"charIndex":4541},{"id":"invalid","text":"invalid","depth":3,"charIndex":4643},{"id":"indefinite","text":"indefinite","depth":3,"charIndex":4809},{"id":"positiveinfinity--negativeinfinity","text":"positiveInfinity / negativeInfinity","depth":3,"charIndex":4970},{"id":"usage-guidelines-and-best-practices","text":"Usage Guidelines and Best Practices","depth":2,"charIndex":5272},{"id":"typical-usage-in-mediacomposer","text":"Typical Usage in MediaComposer","depth":2,"charIndex":5615}],"frontmatter":{},"version":"","description":"MediaTime represents precise media time values in audio and video processing. It is the fundamental time type used by MediaComposer in Scripting. Conceptually, MediaTime corresponds to a time value with an explicit time base (similar to CMTime in AVFoundation), but provides a safer and more expressive abstraction for the scripting layer. A MediaTime instance can represent numeric time, invalid time, indefinite time, or infinite time, and supports strict arithmetic and comparison operations."},{"title":"Quick Start","content":"`MediaComposer` is used in Scripting to **compose video, image, and audio timelines and export a final media file**.\nIt provides a stable and precise timeline model that supports video clips, image clips, audio overlays, fades, audio ducking, and flexible export configuration.\n\nThis module is suitable for:\n\n- Mixing videos and images into a single output\n- Adding background music, voice-over, or sound effects\n- Generating videos from image sequences\n- Automated and script-driven media production\n\n***\n\n## Design Overview\n\nMediaComposer consists of three core layers:\n\n1. **Time Model**\n   Based on `MediaTime` and `TimeRange` for precise time representation\n\n2. **Timeline Model**\n\n   - `VideoItem[]`: visual timeline (videos or images, sequential)\n   - `AudioClip[]`: audio timeline (positioned or sequential)\n\n3. **Export System**\n   A unified `composeAndExport` API for rendering and exporting\n\n***\n\n## Timeline Structure\n\n```ts\ntimeline: {\n  videoItems: VideoItem[]\n  audioClips: AudioClip[]\n}\n```\n\n- **videoItems**\n  Defines the visual timeline. Video and image items are concatenated strictly in array order.\n- **audioClips**\n  Defines the audio timeline. Clips may be explicitly positioned or appended sequentially.\n\nThe final exported duration is determined by the **videoItems timeline**.\n\n***\n\n## VideoItem\n\n```ts\ntype VideoItem = XOR<VideoClip, ImageClip>\n```\n\nA `VideoItem` represents a single visual segment in the timeline.\nIt can be either a **video clip** or an **image clip**, but never both.\n\n***\n\n## VideoClip\n\n```ts\ntype VideoClip = {\n  videoPath: string\n  sourceTimeRange?: TimeRange | null\n  keepOriginalAudio?: boolean\n  fade?: FadeConfig | null\n}\n```\n\n### videoPath\n\n- Path to the video file\n- Local video files are supported\n\n***\n\n### sourceTimeRange\n\n```ts\nsourceTimeRange?: TimeRange | null\n```\n\n- Specifies the portion of the source video to use\n- Defaults to the entire video when omitted\n\n**Common use cases:**\n\n- Trimming a video\n- Extracting a specific segment as material\n\n***\n\n### keepOriginalAudio\n\n```ts\nkeepOriginalAudio?: boolean\n```\n\n- Whether to keep the original audio from the video\n- Default: `false`\n\n**Notes:**\n\n- When `true`, the video’s original audio participates in the final mix\n- External `audioClips` may still be used simultaneously\n- Ducking behavior is controlled by `ExportOptions.ducking`\n\n***\n\n### fade\n\n```ts\nfade?: FadeConfig | null\n```\n\n- Per-clip fade-in / fade-out configuration\n- Overrides the global video fade when provided\n\n***\n\n## ImageClip\n\n```ts\ntype ImageClip = {\n  imagePath: string\n  duration: MediaTime\n  contentMode?: \"fit\" | \"crop\"\n  backgroundColor?: Color\n  fade?: FadeConfig | null\n}\n```\n\n`ImageClip` allows a still image to appear as a timed segment within the video timeline.\n\n***\n\n### imagePath\n\n- Path to the image file\n- Common image formats are supported (JPEG, PNG, HEIC, etc.)\n\n***\n\n### duration\n\n```ts\nduration: MediaTime\n```\n\n- The display duration of the image clip in the video\n- This field is required\n\n***\n\n### contentMode\n\n```ts\ncontentMode?: \"fit\" | \"crop\"\n```\n\n- Controls how the image is scaled to the render size\n- Default: `fit`\n\nBehavior:\n\n- `fit`: Entire image is visible; letterboxing may occur\n- `crop`: Image fills the frame; excess is cropped\n\n***\n\n### backgroundColor\n\n```ts\nbackgroundColor?: Color\n```\n\n- Background color for areas not covered by the image\n- Commonly used together with `fit` mode\n\n***\n\n### fade\n\n```ts\nfade?: FadeConfig | null\n```\n\n- Fade-in / fade-out configuration for the image clip\n- Behaves the same as fades for video clips\n\n***\n\n## AudioClip\n\n```ts\ntype AudioClip = {\n  path: string\n  sourceTimeRange?: TimeRange | null\n  at?: MediaTime\n  volume?: number\n  fade?: FadeConfig | null\n  loopToFitVideoDuration?: boolean\n}\n```\n\n`AudioClip` is used to add background music, narration, or sound effects to the final video.\n\n***\n\n### path\n\n- Path to the audio file\n\n***\n\n### sourceTimeRange\n\n- Specifies the portion of the audio to use\n- Defaults to the entire audio file\n\n***\n\n### at\n\n```ts\nat?: MediaTime\n```\n\n- Explicit placement time on the final timeline\n- When omitted, audio clips are appended sequentially\n\n***\n\n### volume\n\n```ts\nvolume?: number\n```\n\n- Per-clip gain (0…1)\n- Default: `1`\n\n***\n\n### fade\n\n- Fade-in / fade-out configuration for the audio clip\n\n***\n\n### loopToFitVideoDuration\n\n```ts\nloopToFitVideoDuration?: boolean\n```\n\n- Whether the audio should loop to match the total video duration\n- Commonly used for background music\n\n***\n\n## FadeConfig\n\n```ts\ntype FadeConfig = {\n  fadeInSeconds?: number\n  fadeOutSeconds?: number\n}\n```\n\n- Duration is expressed in seconds\n- Applicable to video, image, and audio clips\n- Defaults to 0 when omitted\n\n***\n\n## ExportOptions\n\n```ts\ntype ExportOptions = {\n  renderSize?: Size\n  frameRate?: number\n  scaleMode?: VideoScaleMode\n  globalVideoFade?: FadeConfig | null\n  externalAudioBaseVolume?: number\n  ducking?: DuckingConfig\n  presetName?: ExportPreset\n  outputFileType?: ExportFileType\n}\n```\n\n### Common options\n\n- **renderSize**\n  Output resolution, default is 1080×1920\n\n- **frameRate**\n  Rendering frame rate, default is 30\n\n- **globalVideoFade**\n  Global fade applied to all visual clips unless overridden\n\n- **ducking**\n  Automatically lowers external audio volume when original video audio exists\n\n- **presetName / outputFileType**\n  Control encoding quality and output format\n\n***\n\n## composeAndExport\n\n```ts\nfunction composeAndExport(options: {\n  exportPath: string\n  timeline: {\n    videoItems: VideoItem[]\n    audioClips: AudioClip[]\n  }\n  exportOptions?: ExportOptions\n  overwrite?: boolean\n}): Promise<{\n  exportPath: string\n  duration: MediaTime\n}>\n```\n\n### Parameters\n\n- **exportPath**\n  Output file path\n\n- **timeline.videoItems**\n  Visual timeline (videos and images, in sequence)\n\n- **timeline.audioClips**\n  Audio timeline (positioned or sequential)\n\n- **exportOptions**\n  Optional export configuration\n\n- **overwrite**\n  Whether to overwrite an existing file (default: `true`)\n\n***\n\n### Return Value\n\n```ts\n{\n  exportPath: string\n  duration: MediaTime\n}\n```\n\n- **exportPath**: final output path\n- **duration**: total duration of the exported video (derived from `videoItems`)\n\n***\n\n## Usage Guidelines and Best Practices\n\n- Always use `MediaTime` for time values; avoid raw floating-point seconds\n- `ImageClip.duration` must always be explicitly specified\n- Audio and visual timelines are independent but mixed in the final output\n- For complex projects, use a consistent timescale (e.g. 600)\n- Background music typically uses `loopToFitVideoDuration`\n\n***\n\n## Typical Use Cases\n\n- Mixed image and video composition\n- Adding background music or narration to videos\n- Automated video generation\n- Script-driven content creation pipelines\n","routePath":"/doc/Device Capabilities/MediaComposer/Quick Start","lang":"en","toc":[{"id":"design-overview","text":"Design Overview","depth":2,"charIndex":507},{"id":"timeline-structure","text":"Timeline Structure","depth":2,"charIndex":908},{"id":"videoitem","text":"VideoItem","depth":2,"charIndex":1309},{"id":"videoclip","text":"VideoClip","depth":2,"charIndex":1521},{"id":"videopath","text":"videoPath","depth":3,"charIndex":1681},{"id":"sourcetimerange","text":"sourceTimeRange","depth":3,"charIndex":1761},{"id":"keeporiginalaudio","text":"keepOriginalAudio","depth":3,"charIndex":2016},{"id":"fade","text":"fade","depth":3,"charIndex":2357},{"id":"imageclip","text":"ImageClip","depth":2,"charIndex":2501},{"id":"imagepath","text":"imagePath","depth":3,"charIndex":2768},{"id":"duration","text":"duration","depth":3,"charIndex":2875},{"id":"contentmode","text":"contentMode","depth":3,"charIndex":3005},{"id":"backgroundcolor","text":"backgroundColor","depth":3,"charIndex":3259},{"id":"fade-1","text":"fade","depth":3,"charIndex":3416},{"id":"audioclip","text":"AudioClip","depth":2,"charIndex":3566},{"id":"path","text":"path","depth":3,"charIndex":3860},{"id":"sourcetimerange-1","text":"sourceTimeRange","depth":3,"charIndex":3901},{"id":"at","text":"at","depth":3,"charIndex":4008},{"id":"volume","text":"volume","depth":3,"charIndex":4150},{"id":"fade-2","text":"fade","depth":3,"charIndex":4232},{"id":"looptofitvideoduration","text":"loopToFitVideoDuration","depth":3,"charIndex":4302},{"id":"fadeconfig","text":"FadeConfig","depth":2,"charIndex":4483},{"id":"exportoptions","text":"ExportOptions","depth":2,"charIndex":4698},{"id":"common-options","text":"Common options","depth":3,"charIndex":4983},{"id":"composeandexport","text":"composeAndExport","depth":2,"charIndex":5379},{"id":"parameters","text":"Parameters","depth":3,"charIndex":5657},{"id":"return-value","text":"Return Value","depth":3,"charIndex":5992},{"id":"usage-guidelines-and-best-practices","text":"Usage Guidelines and Best Practices","depth":2,"charIndex":6191},{"id":"typical-use-cases","text":"Typical Use Cases","depth":2,"charIndex":6567}],"frontmatter":{},"version":"","description":"MediaComposer is used in Scripting to compose video, image, and audio timelines and export a final media file.\nIt provides a stable and precise timeline model that supports video clips, image clips, audio overlays, fades, audio ducking, and flexible export configuration. This module is suitable for: Mixing videos and images into a single outputAdding background music, voice-over, or sound effectsGenerating videos from image sequencesAutomated and script-driven media production"},{"title":"MediaPlayer","content":"The `MediaPlayer` API allows you to interact with the Now Playing Center, manage Now Playing Info, and respond to remote control events. Below is a comprehensive guide on its usage, including best practices and examples.\n\n***\n\n## Getting Started\n\nThe `MediaPlayer` API provides control over media playback information and remote command handling. To get started:\n\n1. Set the `nowPlayingInfo` to display current media information.\n2. Configure available commands using `setAvailableCommands()`.\n3. Register a `commandHandler` to respond to remote events.\n\n```typescript\nMediaPlayer.nowPlayingInfo = {\n  title: \"Song Title\",\n  artist: \"Artist Name\",\n  playbackRate: 1.0,\n  elapsedPlaybackTime: 30,\n  playbackDuration: 240\n}\n\nMediaPlayer.setAvailableCommands([\"play\", \"pause\", \"nextTrack\", \"previousTrack\"])\n\nMediaPlayer.commandHandler = (command, event) => {\n  console.log(`Command received: ${command}`)\n}\n```\n\n***\n\n## API Reference\n\n### NowPlayingInfo\n\nThe `nowPlayingInfo` object displays metadata about the currently playing media. Set it to `null` to clear the Now Playing Info Center.\n\n**Properties:**\n\n- **`title`**: `string` (Required)\n  - The title of the media item.\n- **`artist`**: `string` (Optional)\n  - The artist or performer of the media item.\n- **`albumTitle`**: `string` (Optional)\n  - The album title of the media item.\n- **`artwork`**: `UIImage` (Optional)\n  - An image representing the media item.\n- **`mediaType`**: `MediaType` (Optional)\n  - Defaults to `audio`.\n- **`playbackRate`**: `number` (Optional)\n  - Defaults to `0`. Indicates the current playback rate.\n- **`elapsedPlaybackTime`**: `DurationInSeconds` (Optional)\n  - Defaults to `0`. The current playback time.\n- **`playbackDuration`**: `DurationInSeconds` (Optional)\n  - Defaults to `0`. The total duration of the media.\n\n### Playback State\n\nThe `playbackState` property indicates the app's current playback state:\n\n- **`unknown`**: Default state when playback status is undefined.\n- **`playing`**: Media is actively playing.\n- **`paused`**: Media playback is paused.\n- **`stopped`**: Playback has stopped.\n- **`interrupted`**: Playback is interrupted by an external event.\n\n```typescript\nif (MediaPlayer.playbackState === MediaPlayerPlaybackState.playing) {\n    console.log(\"Media is currently playing\")\n}\n```\n\n### Commands and Event Handlers\n\n#### `setAvailableCommands(commands: MediaPlayerRemoteCommand[])`\n\nSpecifies which remote commands are enabled for user interaction.\n\n**Example:**\n\n```typescript\nMediaPlayer.setAvailableCommands([\"play\", \"pause\", \"stop\", \"nextTrack\"])\n```\n\n#### `commandHandler`\n\nA callback to handle remote commands. Register this function to process commands like `play`, `pause`, or `seekBackward`.\n\n**Example:**\n\n```typescript\nMediaPlayer.commandHandler = (command, event) => {\n  switch (command) {\n    case \"play\":\n      console.log(\"Play command received\")\n      break\n    case \"pause\":\n      console.log(\"Pause command received\")\n      break\n    default:\n      console.log(`Command not handled: ${command}`)\n  }\n}\n```\n\n**Supported Commands:**\n\n- `play`, `pause`, `stop`, `nextTrack`, `previousTrack`\n- `seekBackward`, `seekForward`, `skipBackward`, `skipForward`\n- `rating`, `like`, `dislike`, `bookmark`\n- `changeRepeatMode`, `changeShuffleMode`\n- `enableLanguageOption`, `disableLanguageOption`\n\n***\n\n## Common Use Cases\n\n### Display Now Playing Info\n\n```typescript\nMediaPlayer.nowPlayingInfo = {\n  title: \"Podcast Episode\",\n  artist: \"Podcast Host\",\n  elapsedPlaybackTime: 120,\n  playbackDuration: 1800,\n  playbackRate: 1.0\n}\n```\n\n### Respond to Playback Commands\n\n```typescript\nMediaPlayer.setAvailableCommands([\"play\", \"pause\", \"stop\"])\n\nMediaPlayer.commandHandler = (command, event) => {\n  if (command === \"play\") {\n    console.log(\"Start playback\")\n  } else if (command === \"pause\") {\n    console.log(\"Pause playback\")\n  }\n}\n```\n\n### Handle Custom Events\n\n```typescript\nMediaPlayer.commandHandler = (command, event) => {\n  if (command === \"seekForward\") {\n    const seekEvent = event as MediaPlayerSeekCommandEvent\n    console.log(`Seek Event Type: ${seekEvent.type}`)\n  }\n}\n```\n\n***\n\n## Best Practices\n\n1. **Keep Metadata Up-to-Date:** Update `nowPlayingInfo` as playback changes.\n2. **Handle All Relevant Commands:** Ensure user interactions like skipping or seeking are supported.\n3. **Resource Management:** Clear `nowPlayingInfo` when playback stops to avoid stale information.\n4. **Test with External Devices:** Use remote controls like headphones or car systems to validate command handling.\n5. **Provide Feedback:** Inform users of successful or failed actions in response to commands.\n\n***\n\n## Full Example\n\nBelow is a complete implementation of `MediaPlayer`:\n\n```typescript\n// Set Now Playing Info\nMediaPlayer.nowPlayingInfo = {\n  title: \"Song Title\",\n  artist: \"Artist Name\",\n  albumTitle: \"Album Name\",\n  playbackRate: 1.0,\n  elapsedPlaybackTime: 0,\n  playbackDuration: 300\n}\n\n// Enable Commands\nMediaPlayer.setAvailableCommands([\"play\", \"pause\", \"nextTrack\", \"previousTrack\", \"seekForward\", \"seekBackward\"])\n\n// Handle Commands\nMediaPlayer.commandHandler = (command, event) => {\n  switch (command) {\n    case \"play\":\n      console.log(\"Playing media\")\n      break\n    case \"pause\":\n      console.log(\"Pausing media\")\n      break\n    case \"nextTrack\":\n      console.log(\"Skipping to next track\")\n      break\n    case \"seekForward\":\n      const seekEvent = event as MediaPlayerSeekCommandEvent\n      console.log(`Seek Event: ${seekEvent.type}`)\n      break\n    default:\n      console.log(`Unhandled command: ${command}`)\n  }\n}\n```\n","routePath":"/doc/Device Capabilities/MediaPlayer","lang":"en","toc":[{"id":"getting-started","text":"Getting Started","depth":2,"charIndex":227},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":915},{"id":"nowplayinginfo","text":"NowPlayingInfo","depth":3,"charIndex":933},{"id":"playback-state","text":"Playback State","depth":3,"charIndex":1804},{"id":"commands-and-event-handlers","text":"Commands and Event Handlers","depth":3,"charIndex":2294},{"id":"setavailablecommandscommands-mediaplayerremotecommand","text":"`setAvailableCommands(commands: MediaPlayerRemoteCommand[])`","depth":4,"charIndex":2327},{"id":"commandhandler","text":"`commandHandler`","depth":4,"charIndex":2567},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":3320},{"id":"display-now-playing-info","text":"Display Now Playing Info","depth":3,"charIndex":3341},{"id":"respond-to-playback-commands","text":"Respond to Playback Commands","depth":3,"charIndex":3551},{"id":"handle-custom-events","text":"Handle Custom Events","depth":3,"charIndex":3854},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":4109},{"id":"full-example","text":"Full Example","depth":2,"charIndex":4624}],"frontmatter":{},"version":"","description":"The MediaPlayer API allows you to interact with the Now Playing Center, manage Now Playing Info, and respond to remote control events. Below is a comprehensive guide on its usage, including best practices and examples."},{"title":"Notification","content":"The `Notification` module in the **Scripting** app allows you to schedule, manage, and display local notifications with advanced trigger types, interactive actions, and rich UI capabilities.\n\n***\n\n## Table of Contents\n\n1. [Scheduling Notifications]()\n2. [Notification Triggers]()\n\n   - [TimeIntervalNotificationTrigger]()\n   - [CalendarNotificationTrigger]()\n   - [LocationNotificationTrigger]()\n3. [Notification Actions]()\n4. [Rich Notifications with Custom UI]()\n5. [Managing Notifications]()\n6. [NotificationInfo and Request Structure]()\n7. [Comprehensive Example]()\n\n***\n\n## Scheduling Notifications\n\nUse `Notification.schedule` to schedule a local notification. It supports content, triggers, tap behaviors, action buttons, rich UI, and delivery configurations:\n\n```ts\nawait Notification.schedule({\n  title: \"Reminder\",\n  body: \"Time to stand up!\",\n  trigger: new TimeIntervalNotificationTrigger({\n    timeInterval: 1800,\n    repeats: true\n  }),\n  actions: [\n    {\n      title: \"OK\",\n      url: Script.createRunURLScheme(\"My Script\", { acknowledged: true })\n    }\n  ],\n  tapAction: {\n    type: \"runScript\",\n    scriptName: \"Acknowledge Script\"\n  },\n  customUI: false\n})\n```\n\n### Parameters\n\n| Name                | Type                                                                                                          | Description                                                                      |\n| ------------------- | ------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------- |\n| `title`             | `string`                                                                                                      | Required. Notification title.                                                    |\n| `subtitle`          | `string?`                                                                                                     | Optional. Additional context.                                                    |\n| `body`              | `string?`                                                                                                     | Optional. Main content text.                                                     |\n| `badge`             | `number?`                                                                                                     | Optional. App icon badge count.                                                  |\n| `iconImageData`     | `Data` \\| `SystemImageIcon` \\| `null`                                                                         | Optional. Custom notification icon image data or system icon name.               |\n| `silent`            | `boolean?`                                                                                                    | Optional. Defaults to `false`. If `true`, delivers silently without sound.       |\n| `interruptionLevel` | `\"active\"` \\| `\"passive\"` \\| `\"timeSensitive\"`                                                                | Optional. Defines priority and delivery behavior.                                |\n| `userInfo`          | `Record<string, any>?`                                                                                        | Optional. Custom metadata.                                                       |\n| `threadIdentifier`  | `string?`                                                                                                     | Optional. Identifier for grouping notifications.                                 |\n| `trigger`           | `TimeIntervalNotificationTrigger` \\| `CalendarNotificationTrigger` \\| `LocationNotificationTrigger` \\| `null` | Optional. Defines when the notification is delivered.                            |\n| `actions`           | `NotificationAction[]?`                                                                                       | Optional. Action buttons shown when long-pressing or expanding the notification. |\n| `customUI`          | `boolean?`                                                                                                    | Optional. Enables rich notification UI using `notification.tsx`.                 |\n| `tapAction`         | `\"none\"` \\| `{ type: \"runScript\", scriptName: string }` \\| `{ type: \"openURL\", url: string }`                 | Optional. Controls what happens when the user taps the notification.             |\n\n#### SystemImageIcon\n\n```ts\ntype SystemImageIcon = {\n  systemImage: string\n  color: Color\n}\n```\n\nUsed to define notification icon using system image name and color.\n\n- `systemImage`: SFSymbol name\n- `color`: Icon color\n\n***\n\n### Notification Actions (`actions`)\n\nThe `actions` parameter defines action buttons that are shown when the user long-presses or expands the notification. Each action has a title and an optional URL to open when tapped.\n\n#### Notification Action (`NotificationAction`)\n\n```ts\ntype NotificationAction = {\n  title: string;\n  icon?: string;\n  url: string;\n  destructive?: boolean;\n}\n```\n\n- `title`: Action button title\n- `icon`: Action button icon\n- `url`: URL to open when tapped\n- `destructive`: Whether the action is destructive\n\n***\n\n### Tap Behavior (`tapAction`)\n\nThe `tapAction` parameter gives you precise control over what happens when the user taps the notification:\n\n- `\"none\"` – Do nothing when tapped\n- `{ type: \"runScript\", scriptName: string }` – Run a different script\n- `{ type: \"openURL\", url: string }` – Open a deep link or web page\n\nIf `tapAction` is not provided, the default behavior is to run the **current script**, and the notification details can be accessed using `Notification.current`.\n\n***\n\n## Notification Triggers\n\n### TimeIntervalNotificationTrigger\n\nTriggers a notification after a specified number of seconds.\n\n```ts\nnew TimeIntervalNotificationTrigger({\n  timeInterval: 3600,\n  repeats: true\n})\n```\n\n- `timeInterval`: Delay in seconds\n- `repeats`: Whether it repeats\n- `nextTriggerDate()`: Returns the next expected trigger date\n\n***\n\n### CalendarNotificationTrigger\n\nTriggers when the current date matches specific calendar components.\n\n```ts\nconst components = new DateComponents({ hour: 8, minute: 0 })\nnew CalendarNotificationTrigger({\n  dateMatching: components,\n  repeats: true\n})\n```\n\n- Supports components like `year`, `month`, `day`, `hour`, etc.\n- Useful for daily or weekly reminders\n\n***\n\n### LocationNotificationTrigger\n\nTriggers when entering or exiting a geographic region.\n\n```ts\nnew LocationNotificationTrigger({\n  region: {\n    identifier: \"Work\",\n    center: { latitude: 37.7749, longitude: -122.4194 },\n    radius: 100,\n    notifyOnEntry: true,\n    notifyOnExit: false\n  },\n  repeats: false\n})\n```\n\n- Fires based on entering/exiting the specified circular region\n\n***\n\n## Notification Actions\n\nUse the `actions` array to define buttons shown when the notification is expanded:\n\n```ts\nactions: [\n  {\n    title: \"Open Details\",\n    url: Script.createRunURLScheme(\"Details Script\", { fromNotification: true })\n  },\n  {\n    title: \"Dismiss\",\n    url: Script.createRunURLScheme(\"Dismiss Script\", { dismissed: true }),\n    destructive: true\n  }\n]\n```\n\n- Use `Script.createRunURLScheme(...)` to generate Scripting app URLs\n- Action buttons appear on long-press or pull-down\n\n***\n\n## Rich Notifications with Custom UI\n\nYou can provide an interactive JSX interface:\n\n1. Set `customUI: true` in the `Notification.schedule()` call\n2. Create a `notification.tsx` file\n3. Call `Notification.present(element)` inside that file\n\n### `Notification.present(element: JSX.Element): void`\n\nMust be called from `notification.tsx`. Renders the element as the expanded notification interface.\n\n***\n\n### Example `notification.tsx`\n\n```tsx\n\n\nfunction NotificationView() {\n  return (\n    <VStack>\n      <Text>Need to complete your task?</Text>\n      <Button title=\"Done\" action={() => console.log(\"Task completed\")} />\n      <Button title=\"Later\" action={() => console.log(\"Task postponed\")} />\n    </VStack>\n  )\n}\n\nNotification.present(<NotificationView />)\n```\n\n***\n\n## Managing Notifications\n\n| Method                                 | Description                                           |\n| -------------------------------------- | ----------------------------------------------------- |\n| `getAllDelivereds()`                   | Returns all delivered notifications.                  |\n| `getAllPendings()`                     | Returns all scheduled but undelivered notifications.  |\n| `removeAllDelivereds()`                | Removes all delivered notifications.                  |\n| `removeAllPendings()`                  | Cancels all pending notifications.                    |\n| `removeDelivereds(ids)`                | Removes delivered notifications with matching IDs.    |\n| `removePendings(ids)`                  | Cancels scheduled notifications with matching IDs.    |\n| `getAllDeliveredsOfCurrentScript()`    | Delivered notifications from the current script only. |\n| `getAllPendingsOfCurrentScript()`      | Scheduled notifications from the current script only. |\n| `removeAllDeliveredsOfCurrentScript()` | Clears current script’s delivered notifications.      |\n| `removeAllPendingsOfCurrentScript()`   | Cancels current script’s pending notifications.       |\n| `setBadgeCount(count)`                 | Sets the app icon badge value.                        |\n\n***\n\n## NotificationInfo and Request Structure\n\nUse `Notification.current` to get launch context when the script is opened from a notification tap:\n\n```ts\nif (Notification.current) {\n  const { title, userInfo } = Notification.current.request.content\n  console.log(`Launched from: ${title}`, userInfo)\n}\n```\n\n### `NotificationRequest` Fields\n\n| Field                      | Description                           |\n| -------------------------- | ------------------------------------- |\n| `identifier`               | Unique ID for the request             |\n| `content.title`            | Notification title                    |\n| `content.subtitle`         | Optional subtitle                     |\n| `content.body`             | Notification body                     |\n| `content.userInfo`         | Custom metadata                       |\n| `content.threadIdentifier` | Grouping key                          |\n| `trigger`                  | Trigger object that controls delivery |\n\n***\n\n## Comprehensive Example\n\nThis example demonstrates a full-featured notification with actions, rich UI, and repeated delivery.\n\n### Step 1: Schedule the Notification\n\n```ts\nawait Notification.schedule({\n  title: \"Hydration Reminder\",\n  body: \"Time to drink water!\",\n  interruptionLevel: \"timeSensitive\",\n  iconImageData: UIImage\n    .fromSFSymbol(\"waterbottle\")!\n    .withTintColor(\"systemBlue\")!\n    .toPNGData(),\n  customUI: true,\n  trigger: new TimeIntervalNotificationTrigger({\n    timeInterval: 3600,\n    repeats: true\n  }),\n  tapAction: {\n    type: \"runScript\",\n    scriptName: \"Hydration Tracker\"\n  },\n  actions: [\n    {\n      title: \"I Drank\",\n      url: Script.createRunURLScheme(\"Hydration Tracker\", { drank: true }),\n    },\n    {\n      title: \"Ignore\",\n      url: Script.createRunURLScheme(\"Hydration Tracker\", { drank: false }),\n      destructive: true\n    }\n  ]\n})\n```\n\n### Step 2: Define `notification.tsx`\n\n```tsx\n\n\nfunction HydrationUI() {\n  return (\n    <VStack>\n      <Text>Have you drunk water?</Text>\n      <Button title=\"Yes\" action={() => console.log(\"Hydration confirmed\")} />\n      <Button title=\"No\" action={() => console.log(\"Reminder ignored\")} />\n    </VStack>\n  )\n}\n\nNotification.present(<HydrationUI />)\n```\n\n***\n\n## Summary\n\nThe `Notification` API in the Scripting app supports:\n\n- Time, calendar, and location-based triggers\n- Actionable buttons and script redirection\n- Tap behaviors via `tapAction`\n- Rich notification UI via `notification.tsx`\n- Full lifecycle management (deliver, remove, query)\n","routePath":"/doc/Device Capabilities/Notification/","lang":"en","toc":[{"id":"table-of-contents","text":"Table of Contents","depth":2,"charIndex":197},{"id":"scheduling-notifications","text":"Scheduling Notifications","depth":2,"charIndex":576},{"id":"parameters","text":"Parameters","depth":3,"charIndex":1180},{"id":"systemimageicon","text":"SystemImageIcon","depth":4,"charIndex":4482},{"id":"notification-actions-actions","text":"Notification Actions (`actions`)","depth":3,"charIndex":4707},{"id":"notification-action-notificationaction","text":"Notification Action (`NotificationAction`)","depth":4,"charIndex":4929},{"id":"tap-behavior-tapaction","text":"Tap Behavior (`tapAction`)","depth":3,"charIndex":5243},{"id":"notification-triggers","text":"Notification Triggers","depth":2,"charIndex":5727},{"id":"timeintervalnotificationtrigger","text":"TimeIntervalNotificationTrigger","depth":3,"charIndex":5753},{"id":"calendarnotificationtrigger","text":"CalendarNotificationTrigger","depth":3,"charIndex":6077},{"id":"locationnotificationtrigger","text":"LocationNotificationTrigger","depth":3,"charIndex":6443},{"id":"notification-actions","text":"Notification Actions","depth":2,"charIndex":4708},{"id":"rich-notifications-with-custom-ui","text":"Rich Notifications with Custom UI","depth":2,"charIndex":7335},{"id":"notificationpresentelement-jsxelement-void","text":"`Notification.present(element: JSX.Element): void`","depth":3,"charIndex":7576},{"id":"example-notificationtsx","text":"Example `notification.tsx`","depth":3,"charIndex":7738},{"id":"managing-notifications","text":"Managing Notifications","depth":2,"charIndex":8105},{"id":"notificationinfo-and-request-structure","text":"NotificationInfo and Request Structure","depth":2,"charIndex":9425},{"id":"notificationrequest-fields","text":"`NotificationRequest` Fields","depth":3,"charIndex":9728},{"id":"comprehensive-example","text":"Comprehensive Example","depth":2,"charIndex":10407},{"id":"step-1-schedule-the-notification","text":"Step 1: Schedule the Notification","depth":3,"charIndex":10535},{"id":"step-2-define-notificationtsx","text":"Step 2: Define `notification.tsx`","depth":3,"charIndex":11290},{"id":"summary","text":"Summary","depth":2,"charIndex":11651}],"frontmatter":{},"version":"","description":"The Notification module in the Scripting app allows you to schedule, manage, and display local notifications with advanced trigger types, interactive actions, and rich UI capabilities."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Notification\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n      >\n        <Button\n          title={\"Schedule a Notification with actions\"}\n          action={async () => {\n            Notification.schedule({\n              title: \"Notification Testing\",\n              body: \"Long Press or Pull Down\",\n              actions: [\n                {\n                  title: \"Widget\",\n                  url: Script.createRunURLScheme(Script.name, {\n                    doc: \"Widget\",\n                  })\n                },\n                {\n                  title: \"LiveActivity\",\n                  url: Script.createRunURLScheme(Script.name, {\n                    doc: \"LiveActivity\",\n                  })\n                }\n              ]\n            })\n          }}\n        />\n      </Section>\n\n      <Section\n      >\n        <Button\n          title={\"Schedule a Notification with Rich Content\"}\n          action={async () => {\n            Notification.schedule({\n              title: \"Notification Testing\",\n              body: \"Long Press or Pull Down to show rich content.\",\n              customUI: true,\n              userInfo: {\n                title: \"AudioRecorder\",\n                subtitle: \"The interface allows you to record audio data to a file. It provides functionalities to start, stop, pause, and manage audio recordings, with configurable settings for audio quality, sample rate, format, and more.\",\n              }\n            })\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/Notification/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"PDF","content":"The `PDFDocument` and `PDFPage` classes in the **Scripting** app provide a simplified and powerful interface for working with PDF files, including reading, editing, and exporting content. Both synchronous and asynchronous methods are supported for optimal flexibility.\n\n***\n\n## `PDFPage` Class\n\nRepresents a single page within a PDF document. It offers access to text content, raw data, and related metadata.\n\n### Static Methods\n\n#### `PDFPage.fromImage(image: UIImage): PDFPage | null`\n\nCreates a new PDF page from the given image.\n\n- **Parameters**:\n\n  - `image`: The image to convert into a PDF page.\n- **Returns**: A `PDFPage` instance, or `null` if creation fails.\n\n***\n\n### Properties\n\n#### `document: PDFDocument | null`\n\nThe parent `PDFDocument` instance this page belongs to, or `null` if it hasn’t been added to a document yet.\n\n#### `label: string | null`\n\nA user-visible label for the page, such as a page title.\n\n#### `numberOfCharacters: number`\n\nThe total number of text characters on the page.\n\n***\n\n### Asynchronous Getters\n\n#### `string: Promise<string | null>`\n\nReturns the text content of the page. May return `null` if the page contains only images or non-text content.\n\n#### `data: Promise<Data | null>`\n\nReturns the raw binary representation of the page.\n\n***\n\n## `PDFDocument` Class\n\nRepresents an entire PDF document. This class enables reading, inspecting, editing pages, and saving the document.\n\n***\n\n### Static Methods\n\n#### `PDFDocument.fromData(data: Data): PDFDocument | null`\n\nCreates a new document from raw PDF data.\n\n- **Parameters**:\n\n  - `data`: A valid PDF binary buffer.\n- **Returns**: A `PDFDocument` instance or `null` if the data is invalid.\n\n#### `PDFDocument.fromFilePath(filePath: string): PDFDocument | null`\n\nLoads a PDF document from a file path.\n\n- **Parameters**:\n\n  - `filePath`: Path to a valid PDF file.\n- **Returns**: A `PDFDocument` instance, or `null` if the file cannot be read.\n\n***\n\n### Read-Only Properties\n\n#### `pageCount: number`\n\nThe total number of pages in the document.\n\n#### `filePath: string | null`\n\nThe original file path of the PDF, or `null` if created in memory.\n\n#### `isLocked: boolean`\n\nIndicates whether the document is locked and requires a password.\n\n#### `isEncrypted: boolean`\n\nIndicates whether the document is encrypted.\n\n#### `documentAttributes: object | null`\n\nOptional document metadata:\n\n```ts\n{\n  author?: string | null\n  creationDate?: Date | null\n  creator?: string | null\n  keywords?: any | null\n  modificationDate?: Date | null\n  producer?: string | null\n  subject?: string | null\n  title?: string | null\n}\n```\n\n##### Example\n\n```ts\nconst doc = PDFDocument.fromFilePath(\"path/to/example.pdf\")\nconst attrs = doc.documentAttributes\nconsole.log(attrs?.title) // \"Project Report\"\n```\n\n***\n\n### Asynchronous Getters\n\n#### `data: Promise<Data | null>`\n\nAsynchronously retrieves the document's binary data.\n\n#### `string: Promise<string | null>`\n\nAsynchronously retrieves the full text content of the PDF. May return `null` for image-based documents.\n\n***\n\n### Instance Methods\n\n#### `pageAt(index: number): PDFPage | null`\n\nReturns the page at the given index.\n\n- **Parameters**:\n\n  - `index`: Zero-based index of the page.\n- **Returns**: A `PDFPage` instance or `null` if out of range.\n\n#### `indexOf(page: PDFPage): number`\n\nReturns the index of the specified page within the document.\n\n- **Parameters**:\n\n  - `page`: A `PDFPage` object from this document.\n- **Returns**: The page index, or `-1` if not found.\n\n#### `removePageAt(index: number): void`\n\nRemoves the page at the specified index.\n\n#### `insertPageAt(page: PDFPage, atIndex: number): void`\n\nInserts a page at the specified index.\n\n##### Example\n\n```ts\nconst doc = PDFDocument.fromFilePath(\"path/to/document.pdf\")\nconst imagePage = PDFPage.fromImage(image)\ndoc.insertPageAt(imagePage, 1)\n```\n\n#### `exchangePage(atIndex: number, withPageIndex: number): void`\n\nSwaps two pages in the document.\n\n***\n\n### Save Methods\n\n#### `writeSync(toFilePath: string, options?): boolean`\n\nWrites the document to a file synchronously with optional encryption and configuration.\n\n- **Parameters**:\n\n  - `toFilePath`: Path to save the new PDF.\n  - `options` (optional):\n\n    ```ts\n    {\n      ownerPassword?: string\n      userPassword?: string\n      burnInAnnotations?: boolean\n      saveTextFromOCR?: boolean\n      saveImagesAsJPEG?: boolean\n    }\n    ```\n- **Returns**: `true` if the file was saved successfully, `false` otherwise.\n\n##### Example\n\n```ts\nconst doc = PDFDocument.fromFilePath(\"path/to/input.pdf\")\nconst success = doc.writeSync(\"path/to/output.pdf\", {\n  ownerPassword: \"admin\",\n  userPassword: \"1234\"\n})\n```\n\n#### `write(toFilePath: string, options?): Promise<boolean>`\n\nAsynchronously writes the document to a file.\n\n- Same parameters as `writeSync`.\n- **Returns**: A `Promise<boolean>` indicating success.\n\n***\n\n### Unlock Method\n\n#### `unlock(password: string): boolean`\n\nAttempts to unlock an encrypted PDF document.\n\n- **Parameters**:\n\n  - `password`: The password string.\n- **Returns**: `true` if unlocked successfully, otherwise `false`.\n\n***\n\n## Example Usage\n\n```ts\nconst doc = PDFDocument.fromFilePath(\"path/to/book.pdf\")\nif (doc && !doc.isLocked) {\n  const firstPage = doc.pageAt(0)\n  const text = await firstPage?.string\n  console.log(\"First page text:\", text)\n  \n  const success = await doc.write(\"path/to/book-copy.pdf\")\n  console.log(success ? \"Saved successfully\" : \"Save failed\")\n}\n```\n","routePath":"/doc/Device Capabilities/PDF","lang":"en","toc":[{"id":"pdfpage-class","text":"`PDFPage` Class","depth":2,"charIndex":275},{"id":"static-methods","text":"Static Methods","depth":3,"charIndex":410},{"id":"pdfpagefromimageimage-uiimage-pdfpage--null","text":"`PDFPage.fromImage(image: UIImage): PDFPage | null`","depth":4,"charIndex":430},{"id":"properties","text":"Properties","depth":3,"charIndex":676},{"id":"document-pdfdocument--null","text":"`document: PDFDocument | null`","depth":4,"charIndex":692},{"id":"label-string--null","text":"`label: string | null`","depth":4,"charIndex":839},{"id":"numberofcharacters-number","text":"`numberOfCharacters: number`","depth":4,"charIndex":926},{"id":"asynchronous-getters","text":"Asynchronous Getters","depth":3,"charIndex":1016},{"id":"string-promisestring--null","text":"`string: Promise<string | null>`","depth":4,"charIndex":1042},{"id":"data-promisedata--null","text":"`data: Promise<Data | null>`","depth":4,"charIndex":1192},{"id":"pdfdocument-class","text":"`PDFDocument` Class","depth":2,"charIndex":1284},{"id":"static-methods-1","text":"Static Methods","depth":3,"charIndex":1429},{"id":"pdfdocumentfromdatadata-data-pdfdocument--null","text":"`PDFDocument.fromData(data: Data): PDFDocument | null`","depth":4,"charIndex":1449},{"id":"pdfdocumentfromfilepathfilepath-string-pdfdocument--null","text":"`PDFDocument.fromFilePath(filePath: string): PDFDocument | null`","depth":4,"charIndex":1686},{"id":"read-only-properties","text":"Read-Only Properties","depth":3,"charIndex":1943},{"id":"pagecount-number","text":"`pageCount: number`","depth":4,"charIndex":1969},{"id":"filepath-string--null","text":"`filePath: string | null`","depth":4,"charIndex":2039},{"id":"islocked-boolean","text":"`isLocked: boolean`","depth":4,"charIndex":2139},{"id":"isencrypted-boolean","text":"`isEncrypted: boolean`","depth":4,"charIndex":2232},{"id":"documentattributes-object--null","text":"`documentAttributes: object | null`","depth":4,"charIndex":2307},{"id":"asynchronous-getters-1","text":"Asynchronous Getters","depth":3,"charIndex":2781},{"id":"data-promisedata--null-1","text":"`data: Promise<Data | null>`","depth":4,"charIndex":2807},{"id":"string-promisestring--null-1","text":"`string: Promise<string | null>`","depth":4,"charIndex":2896},{"id":"instance-methods","text":"Instance Methods","depth":3,"charIndex":3045},{"id":"pageatindex-number-pdfpage--null","text":"`pageAt(index: number): PDFPage | null`","depth":4,"charIndex":3067},{"id":"indexofpage-pdfpage-number","text":"`indexOf(page: PDFPage): number`","depth":4,"charIndex":3277},{"id":"removepageatindex-number-void","text":"`removePageAt(index: number): void`","depth":4,"charIndex":3502},{"id":"insertpageatpage-pdfpage-atindex-number-void","text":"`insertPageAt(page: PDFPage, atIndex: number): void`","depth":4,"charIndex":3586},{"id":"exchangepageatindex-number-withpageindex-number-void","text":"`exchangePage(atIndex: number, withPageIndex: number): void`","depth":4,"charIndex":3846},{"id":"save-methods","text":"Save Methods","depth":3,"charIndex":3952},{"id":"writesynctofilepath-string-options-boolean","text":"`writeSync(toFilePath: string, options?): boolean`","depth":4,"charIndex":3970},{"id":"writetofilepath-string-options-promiseboolean","text":"`write(toFilePath: string, options?): Promise<boolean>`","depth":4,"charIndex":4660},{"id":"unlock-method","text":"Unlock Method","depth":3,"charIndex":4865},{"id":"unlockpassword-string-boolean","text":"`unlock(password: string): boolean`","depth":4,"charIndex":4884},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":5102}],"frontmatter":{},"version":"","description":"The PDFDocument and PDFPage classes in the Scripting app provide a simplified and powerful interface for working with PDF files, including reading, editing, and exporting content. Both synchronous and asynchronous methods are supported for optimal flexibility."},{"title":"Pasteboard","content":"The `Pasteboard` namespace provides a complete interface for reading, writing, and observing system pasteboard (clipboard) changes in the **Scripting app**.\nCompared to the deprecated `Clipboard` API, `Pasteboard` offers more robust features, including:\n\n- Support for multiple data types (text, images, URLs, binary data, etc.)\n- Change event callbacks (`onChanged` and `onRemoved`)\n- Privacy controls such as `localOnly` and expiration time\n\n> **Note**\n> To allow pasting from other apps, go to:\n> **Settings > Scripting > Paste from Other Apps > Allow**\n\n***\n\n## Namespace: `Pasteboard`\n\n### Type Definition\n\n#### `Item`\n\nRepresents a pasteboard item.\nEach item is a map (`Record<UTType, string | UIImage | Data>`) where the key is a data type (`UTType`) and the value can be a string, image, or binary data.\n\nCommon types:\n\n- `public.plain-text` → plain text\n- `public.url` → URL string\n- `public.jpeg` / `public.png` → image (`UIImage`)\n- `public.data` → binary data (`Data`)\n\n**Example**\n\n```ts\nconst item: Pasteboard.Item = {\n  \"public.plain-text\": \"Hello, world!\",\n  \"public.url\": \"https://example.com\"\n}\n```\n\n***\n\n## Properties\n\n### `hasStrings: Promise<boolean>`\n\nChecks whether the pasteboard contains text content.\n\n**Example**\n\n```ts\nif (await Pasteboard.hasStrings) {\n  console.log(\"Pasteboard contains text\")\n}\n```\n\n***\n\n### `hasImages: Promise<boolean>`\n\nChecks whether the pasteboard contains images.\n\n**Example**\n\n```ts\nif (await Pasteboard.hasImages) {\n  console.log(\"Pasteboard contains images\")\n}\n```\n\n***\n\n### `hasURLs: Promise<boolean>`\n\nChecks whether the pasteboard contains URLs.\n\n**Example**\n\n```ts\nif (await Pasteboard.hasURLs) {\n  console.log(\"Pasteboard contains URLs\")\n}\n```\n\n***\n\n### `numberOfItems: Promise<number>`\n\nReturns the number of items currently stored in the pasteboard.\n\n**Example**\n\n```ts\nconst count = await Pasteboard.numberOfItems\nconsole.log(`The pasteboard contains ${count} items`)\n```\n\n***\n\n### `changeCount: Promise<number>`\n\nReturns the number of times the pasteboard contents have changed since system startup.\nThis value increases whenever the pasteboard is modified (items added, updated, or removed).\n\n**Example**\n\n```ts\nconst changeCount = await Pasteboard.changeCount\nconsole.log(\"Pasteboard change count:\", changeCount)\n```\n\n***\n\n## Text Operations\n\n### `getString(): Promise<string | null>`\n\nRetrieves the text string of the first pasteboard item.\n\n**Example**\n\n```ts\nconst text = await Pasteboard.getString()\nif (text) console.log(\"Pasteboard text:\", text)\n```\n\n***\n\n### `setString(string: string | null): Promise<void>`\n\nSets the text string of the first pasteboard item.\n\n**Example**\n\n```ts\nawait Pasteboard.setString(\"Scripting is powerful!\")\n```\n\n***\n\n### `getStrings(): Promise<string[] | null>`\n\nRetrieves all text strings from the pasteboard.\n\n**Example**\n\n```ts\nconst texts = await Pasteboard.getStrings()\nconsole.log(texts)\n```\n\n***\n\n### `setStrings(strings: string[] | null): Promise<void>`\n\nSets multiple text strings to the pasteboard (each string becomes a separate item).\n\n**Example**\n\n```ts\nawait Pasteboard.setStrings([\"Apple\", \"Banana\", \"Cherry\"])\n```\n\n***\n\n## URL Operations\n\n### `getURL(): Promise<string | null>`\n\nRetrieves the first URL string from the pasteboard.\n\n**Example**\n\n```ts\nconst url = await Pasteboard.getURL()\nif (url) console.log(\"Pasteboard URL:\", url)\n```\n\n***\n\n### `setURL(url: string | null): Promise<void>`\n\nSets a URL string as the first pasteboard item.\n\n**Example**\n\n```ts\nawait Pasteboard.setURL(\"https://example.com\")\n```\n\n***\n\n### `getURLs(): Promise<string[] | null>`\n\nRetrieves all URL strings from the pasteboard.\n\n**Example**\n\n```ts\nconst urls = await Pasteboard.getURLs()\nconsole.log(urls)\n```\n\n***\n\n### `setURLs(urls: string[] | null): Promise<void>`\n\nSets multiple URLs to the pasteboard.\n\n**Example**\n\n```ts\nawait Pasteboard.setURLs([\n  \"https://apple.com\",\n  \"https://openai.com\"\n])\n```\n\n***\n\n## Image Operations\n\n### `getImage(): Promise<UIImage | null>`\n\nRetrieves the first image (`UIImage`) from the pasteboard.\n\n**Example**\n\n```ts\nconst img = await Pasteboard.getImage()\nif (img) console.log(\"Image retrieved from pasteboard\")\n```\n\n***\n\n### `setImage(image: UIImage | null): Promise<void>`\n\nSets the first pasteboard item to an image.\n\n**Example**\n\n```ts\nawait Pasteboard.setImage(myImage)\n```\n\n***\n\n### `getImages(): Promise<UIImage[] | null>`\n\nRetrieves all image objects from the pasteboard.\n\n**Example**\n\n```ts\nconst images = await Pasteboard.getImages()\nconsole.log(`Retrieved ${images?.length ?? 0} images`)\n```\n\n***\n\n### `setImages(images: UIImage[] | null): Promise<void>`\n\nSets multiple images to the pasteboard.\n\n**Example**\n\n```ts\nawait Pasteboard.setImages([img1, img2, img3])\n```\n\n***\n\n## Item Management\n\n### `addItems(items: Item[]): Promise<void>`\n\nAppends new items to the existing pasteboard content without clearing it.\n\n**Example**\n\n```ts\nawait Pasteboard.addItems([\n  { \"public.plain-text\": \"First item\" },\n  { \"public.url\": \"https://example.com\" }\n])\n```\n\n***\n\n### `setItems(items: Item[], options?: { localOnly?: boolean, expirationDate?: Date }): Promise<void>`\n\nReplaces the pasteboard contents with new items and applies optional privacy settings.\n\n**Parameters**\n\n- `items`: An array of pasteboard items.\n- `options.localOnly`: If `true`, prevents the pasteboard content from being shared to other devices via Handoff.\n- `options.expirationDate`: Sets an expiration time after which the system automatically removes the content.\n\n**Example**\n\n```ts\nawait Pasteboard.setItems(\n  [\n    { \"public.plain-text\": \"Sensitive Info\" }\n  ],\n  {\n    localOnly: true,\n    expirationDate: new Date(Date.now() + 60 * 1000) // Expires in 1 minute\n  }\n)\n```\n\n***\n\n### `getItems(): Promise<Item[] | null>`\n\nRetrieves all pasteboard items as an array of `Pasteboard.Item` objects.\n\n**Example**\n\n```ts\nconst items = await Pasteboard.getItems()\nconsole.log(items)\n```\n\n***\n\n## Event Callbacks\n\n### `onChanged: ((addedKeys: string[]) => void) | null | undefined`\n\nCalled when the pasteboard content changes.\nThe parameter `addedKeys` is an array of the added representation types (`UTType`).\n\n**Example**\n\n```ts\nPasteboard.onChanged = addedKeys => {\n  console.log(\"Added pasteboard types:\", addedKeys)\n}\n```\n\n***\n\n### `onRemoved: ((removedKeys: string[]) => void) | null | undefined`\n\nCalled when content is removed from the pasteboard.\nThe parameter `removedKeys` is an array of the removed representation types (`UTType`).\n\n**Example**\n\n```ts\nPasteboard.onRemoved = removedKeys => {\n  console.log(\"Removed pasteboard types:\", removedKeys)\n}\n```\n\n***\n\n## Deprecated Clipboard API\n\nThe legacy `Clipboard` namespace is **deprecated** and retained only for backward compatibility.\n\n| Deprecated Method                  | Replacement                  |\n| ---------------------------------- | ---------------------------- |\n| `Clipboard.copyText(text: string)` | `Pasteboard.setString(text)` |\n| `Clipboard.getText()`              | `Pasteboard.getString()`     |\n\n***\n\n## Best Practices\n\n- Always use the new `Pasteboard` API instead of `Clipboard`.\n- Use `changeCount` to detect when pasteboard contents have changed.\n- Use `expirationDate` to automatically clear sensitive data after a specific duration.\n- Set `localOnly: true` for data that should not sync across devices.\n- Use `hasStrings`, `hasImages`, and `hasURLs` to check available content types before reading.\n- Use `onChanged` and `onRemoved` callbacks to react in real time to pasteboard updates.\n","routePath":"/doc/Device Capabilities/Pasteboard","lang":"en","toc":[{"id":"namespace-pasteboard","text":"Namespace: `Pasteboard`","depth":2,"charIndex":563},{"id":"type-definition","text":"Type Definition","depth":3,"charIndex":591},{"id":"item","text":"`Item`","depth":4,"charIndex":612},{"id":"properties","text":"Properties","depth":2,"charIndex":1123},{"id":"hasstrings-promiseboolean","text":"`hasStrings: Promise<boolean>`","depth":3,"charIndex":1138},{"id":"hasimages-promiseboolean","text":"`hasImages: Promise<boolean>`","depth":3,"charIndex":1336},{"id":"hasurls-promiseboolean","text":"`hasURLs: Promise<boolean>`","depth":3,"charIndex":1528},{"id":"numberofitems-promisenumber","text":"`numberOfItems: Promise<number>`","depth":3,"charIndex":1712},{"id":"changecount-promisenumber","text":"`changeCount: Promise<number>`","depth":3,"charIndex":1943},{"id":"text-operations","text":"Text Operations","depth":2,"charIndex":2291},{"id":"getstring-promisestring--null","text":"`getString(): Promise<string | null>`","depth":3,"charIndex":2311},{"id":"setstringstring-string--null-promisevoid","text":"`setString(string: string | null): Promise<void>`","depth":3,"charIndex":2530},{"id":"getstrings-promisestring--null","text":"`getStrings(): Promise<string[] | null>`","depth":3,"charIndex":2719},{"id":"setstringsstrings-string--null-promisevoid","text":"`setStrings(strings: string[] | null): Promise<void>`","depth":3,"charIndex":2906},{"id":"url-operations","text":"URL Operations","depth":2,"charIndex":3138},{"id":"geturl-promisestring--null","text":"`getURL(): Promise<string | null>`","depth":3,"charIndex":3157},{"id":"seturlurl-string--null-promisevoid","text":"`setURL(url: string | null): Promise<void>`","depth":3,"charIndex":3362},{"id":"geturls-promisestring--null","text":"`getURLs(): Promise<string[] | null>`","depth":3,"charIndex":3536},{"id":"seturlsurls-string--null-promisevoid","text":"`setURLs(urls: string[] | null): Promise<void>`","depth":3,"charIndex":3714},{"id":"image-operations","text":"Image Operations","depth":2,"charIndex":3911},{"id":"getimage-promiseuiimage--null","text":"`getImage(): Promise<UIImage | null>`","depth":3,"charIndex":3932},{"id":"setimageimage-uiimage--null-promisevoid","text":"`setImage(image: UIImage | null): Promise<void>`","depth":3,"charIndex":4160},{"id":"getimages-promiseuiimage--null","text":"`getImages(): Promise<UIImage[] | null>`","depth":3,"charIndex":4323},{"id":"setimagesimages-uiimage--null-promisevoid","text":"`setImages(images: UIImage[] | null): Promise<void>`","depth":3,"charIndex":4547},{"id":"item-management","text":"Item Management","depth":2,"charIndex":4722},{"id":"additemsitems-item-promisevoid","text":"`addItems(items: Item[]): Promise<void>`","depth":3,"charIndex":4742},{"id":"setitemsitems-item-options--localonly-boolean-expirationdate-date--promisevoid","text":"`setItems(items: Item[], options?: { localOnly?: boolean, expirationDate?: Date }): Promise<void>`","depth":3,"charIndex":5006},{"id":"getitems-promiseitem--null","text":"`getItems(): Promise<Item[] | null>`","depth":3,"charIndex":5698},{"id":"event-callbacks","text":"Event Callbacks","depth":2,"charIndex":5904},{"id":"onchanged-addedkeys-string--void--null--undefined","text":"`onChanged: ((addedKeys: string[]) => void) | null | undefined`","depth":3,"charIndex":5924},{"id":"onremoved-removedkeys-string--void--null--undefined","text":"`onRemoved: ((removedKeys: string[]) => void) | null | undefined`","depth":3,"charIndex":6243},{"id":"deprecated-clipboard-api","text":"Deprecated Clipboard API","depth":2,"charIndex":6582},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":6995}],"frontmatter":{},"version":"","description":"The Pasteboard namespace provides a complete interface for reading, writing, and observing system pasteboard (clipboard) changes in the Scripting app.\nCompared to the deprecated Clipboard API, Pasteboard offers more robust features, including: Support for multiple data types (text, images, URLs, binary data, etc.)Change event callbacks (onChanged and onRemoved)Privacy controls such as localOnly and expiration time Note\nTo allow pasting from other apps, go to:\nSettings > Scripting > Paste from Other Apps > Allow"},{"title":"Photos","content":"The `Photos` module provides unified access to the system photo library and camera. It enables scripts to:\n\n- Capture photos or record videos using the system camera\n- Pick images, videos, or Live Photos from the photo library\n- Retrieve the most recent photos\n- Save images or videos to the Photos app\n\nAll APIs are built on top of native iOS frameworks such as Photos and PHPicker, and follow these principles:\n\n- System-managed permissions\n- Promise-based asynchronous APIs\n- System-controlled UI presentation\n- Secure and constrained access to media data\n\n***\n\n## CaptureInfo\n\n```ts\ntype CaptureInfo = {\n  cropRect: {\n    x: number\n    y: number\n    width: number\n    height: number\n  } | null\n  originalImage: UIImage | null\n  editedImage: UIImage | null\n  imagePath: string | null\n  mediaMetadata: Record<string, any> | null\n  mediaPath: string | null\n  mediaType: string | null\n}\n```\n\n`CaptureInfo` describes the complete result of a capture operation (photo or video).\n\n### Properties\n\n- `cropRect`\n  The cropping rectangle applied during editing.\n  `null` if no cropping was performed.\n\n- `originalImage`\n  The original image captured by the camera.\n\n- `editedImage`\n  The edited image, if editing was enabled and applied.\n\n- `imagePath`\n  File path to the captured image on disk.\n\n- `mediaMetadata`\n  Metadata associated with the captured media, such as EXIF data.\n\n- `mediaPath`\n  File path to the captured video.\n\n- `mediaType`\n  The UTType string describing the media type.\n\n***\n\n## availableMediaTypes()\n\n```ts\nfunction availableMediaTypes(): string[] | null\n```\n\nReturns the list of media UTTypes supported by the current device’s camera.\n\nCommon use cases include checking whether video capture is supported or dynamically adjusting capture options.\n\nReturns `null` if the information is unavailable.\n\n***\n\n## capture(options)\n\n```ts\nfunction capture(options: {\n  mode: \"photo\" | \"video\"\n  mediaTypes: UTType[]\n  allowsEditing?: boolean\n  cameraDevice?: \"rear\" | \"front\"\n  cameraFlashMode?: \"auto\" | \"on\" | \"off\"\n  videoMaximumDuration?: DurationInSeconds\n  videoQuality?: \n    | \"low\"\n    | \"medium\"\n    | \"high\"\n    | \"640x480\"\n    | \"iFrame960x540\"\n    | \"iFrame1280x720\"\n}): Promise<CaptureInfo | null>\n```\n\nPresents the system camera interface to capture a photo or record a video.\n\n### Options\n\n- `mode`\n  Capture mode\n\n  - `\"photo\"`: capture a photo\n  - `\"video\"`: record a video\n\n- `mediaTypes`\n  Allowed media UTTypes.\n\n- `allowsEditing`\n  Whether the user can edit the captured media.\n\n- `cameraDevice`\n  Camera to use. Defaults to `\"rear\"`.\n\n- `cameraFlashMode`\n  Flash behavior. Defaults to `\"auto\"`.\n\n- `videoMaximumDuration`\n  Maximum video duration in seconds.\n\n- `videoQuality`\n  Video resolution and encoding quality.\n\n### Behavior Notes\n\n- The UI is fully system-managed\n- The Promise resolves only after the user finishes or cancels the operation\n- Permission prompts are handled by the system\n\n***\n\n## pick(options)\n\n```ts\nfunction pick(options?: {\n  mode?: \"default\" | \"compact\"\n  filter?: PHPickerFilter\n  limit?: number\n}): Promise<PHPickerResult[]>\n```\n\nPresents the system photo picker to select media items from the photo library.\n\n### Options\n\n- `mode`\n  Picker layout style\n\n  - `default`: grid layout\n  - `compact`: linear layout\n\n- `filter`\n  A `PHPickerFilter` that restricts selectable asset types.\n\n- `limit`\n  Maximum number of selectable items. Defaults to `1`.\n\n### Return Value\n\nReturns an array of `PHPickerResult` objects.\nEach result must be explicitly resolved into a concrete media representation.\n\n***\n\n## PHPickerFilter\n\n`PHPickerFilter` defines which asset types can be selected in `Photos.pick`.\n\nIt is a non-instantiable class and can only be constructed via static methods.\n\n***\n\n### Basic Filters\n\n- `PHPickerFilter.images()`\n  Allows selection of standard images.\n\n- `PHPickerFilter.videos()`\n  Allows selection of videos.\n\n- `PHPickerFilter.livePhotos()`\n  Allows selection of Live Photos.\n\n- `PHPickerFilter.bursts()`\n  Burst photo sequences.\n\n- `PHPickerFilter.panoramas()`\n  Panorama photos.\n\n- `PHPickerFilter.screenshots()`\n  Screenshots.\n\n- `PHPickerFilter.screenRecordings()`\n  Screen recording videos.\n\n- `PHPickerFilter.depthEffectPhotos()`\n  Photos with depth effects (portrait photos).\n\n- `PHPickerFilter.cinematicVideos()`\n  Cinematic mode videos.\n\n- `PHPickerFilter.slomoVideos()`\n  Slow-motion videos.\n\n- `PHPickerFilter.timelapseVideos()`\n  Time-lapse videos.\n\n***\n\n### Composite Filters\n\n- `PHPickerFilter.all(filters)`\n  Matches assets that satisfy all provided filters\n  Logical AND\n\n- `PHPickerFilter.any(filters)`\n  Matches assets that satisfy at least one filter\n  Logical OR\n\n- `PHPickerFilter.not(filter)`\n  Excludes assets matching the specified filter\n  Logical NOT\n\n#### Example\n\n```ts\nconst filter = PHPickerFilter.any([\n  PHPickerFilter.livePhotos(),\n  PHPickerFilter.images()\n])\n\nawait Photos.pick({ filter })\n```\n\n***\n\n## PHPickerResult\n\nRepresents a single item returned from the photo picker.\n\n### itemProvider: ItemProvider\n\nThe item provider for the selected asset, which can be used to load the asset.\n\n### livePhoto()\n\n```ts\nlivePhoto(): Promise<LivePhoto | null>\n```\n\nAttempts to read the result as a Live Photo.\nResolves to `null` if the asset cannot be represented as a Live Photo.\n\n***\n\n### uiImage()\n\n```ts\nuiImage(): Promise<UIImage | null>\n```\n\nAttempts to read the result as a UIImage object.\nResolves to `null` if the asset cannot be represented as an image.\n\n***\n\n### imagePath()\n\n```ts\nimagePath(): Promise<string | null>\n```\n\nIf this result can be read as an image, this file will be copied to the app group's sandbox and returns a promise that resolves to the image path, otherwise returns null, or rejects with an error. You should delete the image file when you no longer need it.\n\n#### Example\n\n```ts\nconst filePath = await result.imagePath()\n```\n\n***\n\n### videoPath()\n\n```ts\nvideoPath(): Promise<string | null>\n```\n\nIf this result can be read as a video, this file will be copied to the app group's sandbox and returns a promise that resolves to the video path, otherwise returns null, or rejects with an error. You should delete the video file when you no longer need it.\n\n***\n\n## getLatestPhotos(count)\n\n```ts\nfunction getLatestPhotos(count: number): Promise<UIImage[] | null>\n```\n\nRetrieves the most recent photos from the photo library.\n\n### Notes\n\n- Images only (no videos)\n- Ordered from newest to oldest\n- Returns `null` if access is unavailable\n\n***\n\n## pickPhotos(count)\n\n```ts\nfunction pickPhotos(count: number): Promise<UIImage[]>\n```\n\nLegacy convenience API for selecting a fixed number of photos.\n\nReturns an array of `UIImage` objects without file paths or metadata.\n\n***\n\n## takePhoto()\n\n```ts\nfunction takePhoto(): Promise<UIImage | null>\n```\n\nQuick photo capture API.\n\n- No advanced configuration\n- Returns `null` if the user cancels\n\n***\n\n## savePhoto(path, options)\n\n```ts\nfunction savePhoto(\n  path: string,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves an image file from disk to the Photos app.\n\n***\n\n## savePhoto(image, options)\n\n```ts\nfunction savePhoto(\n  image: Data,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves raw image data directly to the Photos app, avoiding temporary files.\n\n***\n\n## saveVideo(path, options)\n\n```ts\nfunction saveVideo(\n  path: string,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves a video file from disk to the Photos app.\n\n***\n\n## saveVideo(video, options)\n\n```ts\nfunction saveVideo(\n  video: Data,\n  options?: { fileName?: string }\n): Promise<boolean>\n```\n\nSaves raw video data directly to the Photos app.\n\n***\n\n## Design Notes\n\n- All APIs are asynchronous and permission-aware\n- All UI is system-managed and not customizable\n- Picker results are lazy and must be explicitly resolved\n- Save APIs return only success status, not asset identifiers\n","routePath":"/doc/Device Capabilities/Photos/","lang":"en","toc":[{"id":"captureinfo","text":"CaptureInfo","depth":2,"charIndex":565},{"id":"properties","text":"Properties","depth":3,"charIndex":978},{"id":"availablemediatypes","text":"availableMediaTypes()","depth":2,"charIndex":1493},{"id":"captureoptions","text":"capture(options)","depth":2,"charIndex":1823},{"id":"options","text":"Options","depth":3,"charIndex":2304},{"id":"behavior-notes","text":"Behavior Notes","depth":3,"charIndex":2752},{"id":"pickoptions","text":"pick(options)","depth":2,"charIndex":2935},{"id":"options-1","text":"Options","depth":3,"charIndex":3174},{"id":"return-value","text":"Return Value","depth":3,"charIndex":3414},{"id":"phpickerfilter","text":"PHPickerFilter","depth":2,"charIndex":3562},{"id":"basic-filters","text":"Basic Filters","depth":3,"charIndex":3744},{"id":"composite-filters","text":"Composite Filters","depth":3,"charIndex":4448},{"id":"example","text":"Example","depth":4,"charIndex":4759},{"id":"phpickerresult","text":"PHPickerResult","depth":2,"charIndex":4916},{"id":"itemprovider-itemprovider","text":"itemProvider: ItemProvider","depth":3,"charIndex":4993},{"id":"livephoto","text":"livePhoto()","depth":3,"charIndex":5105},{"id":"uiimage","text":"uiImage()","depth":3,"charIndex":5294},{"id":"imagepath","text":"imagePath()","depth":3,"charIndex":5477},{"id":"example-1","text":"Example","depth":4,"charIndex":5800},{"id":"videopath","text":"videoPath()","depth":3,"charIndex":5872},{"id":"getlatestphotoscount","text":"getLatestPhotos(count)","depth":2,"charIndex":6199},{"id":"notes","text":"Notes","depth":3,"charIndex":6362},{"id":"pickphotoscount","text":"pickPhotos(count)","depth":2,"charIndex":6479},{"id":"takephoto","text":"takePhoto()","depth":2,"charIndex":6707},{"id":"savephotopath-options","text":"savePhoto(path, options)","depth":2,"charIndex":6877},{"id":"savephotoimage-options","text":"savePhoto(image, options)","depth":2,"charIndex":7062},{"id":"savevideopath-options","text":"saveVideo(path, options)","depth":2,"charIndex":7273},{"id":"savevideovideo-options","text":"saveVideo(video, options)","depth":2,"charIndex":7457},{"id":"design-notes","text":"Design Notes","depth":2,"charIndex":7642}],"frontmatter":{},"version":"","description":"The Photos module provides unified access to the system photo library and camera. It enables scripts to: Capture photos or record videos using the system cameraPick images, videos, or Live Photos from the photo libraryRetrieve the most recent photosSave images or videos to the Photos app All APIs are built on top of native iOS frameworks such as Photos and PHPicker, and follow these principles: System-managed permissionsPromise-based asynchronous APIsSystem-controlled UI presentationSecure and constrained access to media data"},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Photos\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n        footer={\n          <Text>Get the latest specified number of photos from the Photos app.</Text>\n        }\n      >\n        <Button\n          title={\"Photos.getLatestPhotos\"}\n          action={async () => {\n            const images = await Photos.getLatestPhotos(1)\n            const image = images?.[0]\n\n            if (image != null) {\n              Dialog.alert({\n                message: `Image size: ${image.width}*${image.height}`\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Present a photo picker dialog and pick limited number of photos.</Text>\n        }\n      >\n\n        <Button\n          title={\"Photos.pickPhotos\"}\n          action={async () => {\n            const images = await Photos.pickPhotos(1)\n            const image = images?.[0]\n\n            if (image != null) {\n              Dialog.alert({\n                message: `Image size: ${image.width}*${image.height}`\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Take a photo and return a UIImage instance.</Text>\n        }\n      >\n        <Button\n          title={\"Photos.takePhoto\"}\n          action={async () => {\n            const image = await Photos.takePhoto()\n\n            if (image != null) {\n              Dialog.alert({\n                message: `Image size: ${image.width}*${image.height}`\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Save an image to the Photos app. Returns a boolean value indicates that whether the operation is successful.</Text>\n        }\n      >\n        <Button\n          title={\"Photos.savePhoto\"}\n          action={async () => {\n            const image = await Photos.takePhoto()\n\n            if (image != null) {\n              const success = await Photos.savePhoto(Data.fromJPEG(image, 0.5)!)\n              Dialog.alert({\n                message: \"The photo has been saved: \" + success\n              })\n            } else {\n              Dialog.alert({\n                message: \"Canceled\"\n              })\n            }\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/Photos/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"AVPlayerView","content":"`AVPlayerView` is a video playback component introduced in Scripting that wraps the system-native `AVPlayerViewController`.\nUnlike `VideoPlayer`, `AVPlayerView` **fully supports system Picture in Picture (PiP)** and exposes PiP lifecycle state to scripts.\n\nThis component is intended for **media-centric scenarios** where native playback behavior, PiP, Now Playing integration, and background playback are required.\n\n***\n\n## 1. When to Use AVPlayerView\n\nUse `AVPlayerView` when you need:\n\n- System Picture in Picture (PiP) for video\n- Native playback controls\n- Integration with Now Playing / Control Center / Lock Screen\n- Automatic PiP when entering background\n- Fine-grained observation of PiP lifecycle\n\nIf you do **not** need PiP, `VideoPlayer` remains a lighter alternative.\n\n***\n\n## 2. Core Properties Explained\n\n### 2.1 `player`\n\n```ts\nplayer: AVPlayer\n```\n\n- The underlying media player\n- Fully managed by the developer\n- Supports local files, remote URLs, HLS streams, etc.\n\n`AVPlayerView` **does not own the player lifecycle**.\nThe player must remain alive while PiP is active.\n\n***\n\n### 2.2 `pipStatus`\n\n```ts\npipStatus: Observable<PIPStatus>\n```\n\nProvides real-time updates for the PiP lifecycle.\n\nPossible values:\n\n| Value              | Meaning               |\n| ------------------ | --------------------- |\n| `willStart`        | PiP is about to start |\n| `didStart`         | PiP has started       |\n| `willStop`         | PiP is about to stop  |\n| `didStop`          | PiP has stopped       |\n| `undefined / null` | No PiP activity yet   |\n\nThis value is **system-controlled**.\nYou should **observe it only**, never assign values manually.\n\n***\n\n## 3. Picture in Picture Configuration\n\n### 3.1 `allowsPictureInPicturePlayback`\n\n- Enables or disables PiP entirely\n- Default: `true`\n\nWhen set to `false`:\n\n- PiP controls are hidden\n- PiP cannot be activated\n\n***\n\n### 3.2 `canStartPictureInPictureAutomaticallyFromInline`\n\n- If enabled, PiP starts automatically when:\n\n  - The app moves to background\n  - Video is playing inline\n- Default: `false`\n\nRecommended for:\n\n- Media apps\n- Continuous playback experiences\n\n***\n\n### 3.3 `updatesNowPlayingInfoCenter`\n\n- Controls automatic updates to:\n\n  - Lock screen\n  - Control Center\n  - External playback controls\n- Default: `true`\n\nShould generally remain enabled for video playback apps.\n\n***\n\n## 4. Full-Screen Playback Behavior\n\n### 4.1 `entersFullScreenWhenPlaybackBegins`\n\n- Automatically enters full screen on play\n- Default: `false`\n\n***\n\n### 4.2 `exitsFullScreenWhenPlaybackEnds`\n\n- Automatically exits full screen on completion\n- Default: `false`\n\n***\n\n## 5. Video Scaling (`videoGravity`)\n\n```ts\nvideoGravity?: AVLayerVideoGravity\n```\n\n| Value              | Behavior                                    |\n| ------------------ | ------------------------------------------- |\n| `resize`           | Stretch to fill (no aspect ratio)           |\n| `resizeAspect`     | Preserve aspect ratio, fit inside (default) |\n| `resizeAspectFill` | Preserve aspect ratio, fill and crop        |\n\n***\n\n## 6. Complete Demo Example\n\nThe following example demonstrates:\n\n- Creating and configuring `AVPlayer`\n- Activating audio playback session\n- Observing PiP lifecycle\n- Controlling playback state\n- Proper cleanup\n\n```tsx\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [status, setStatus] = useState<TimeControlStatus>(\n    TimeControlStatus.paused\n  )\n  const pipstatus = useObservable<PIPStatus>()\n\n  console.log(pipstatus.value)\n\n  const player = useMemo(() => {\n    const player = new AVPlayer()\n\n    player.setSource(\n      \"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\"\n    )\n\n    player.onTimeControlStatusChanged = status => {\n      setStatus(status)\n    }\n\n    SharedAudioSession.setActive(true)\n    SharedAudioSession.setCategory(\n      \"playback\",\n      [\"defaultToSpeaker\"]\n    )\n\n    return player\n  }, [])\n\n  useEffect(() => {\n    return () => {\n      player.dispose()\n    }\n  }, [])\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle=\"VideoPlayer\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        cancellationAction: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <AVPlayerView\n        player={player}\n        pipStatus={pipstatus}\n        canStartPictureInPictureAutomaticallyFromInline\n        updatesNowPlayingInfoCenter\n        entersFullScreenWhenPlaybackBegins\n      />\n\n      <Button\n        title={\n          status === TimeControlStatus.paused\n            ? \"Play\"\n            : \"Pause\"\n        }\n        action={() => {\n          if (status === TimeControlStatus.paused) {\n            player.play()\n          } else {\n            player.pause()\n          }\n        }}\n      />\n    </VStack>\n  </NavigationStack>\n}\n```\n\n***\n\n## 7. PiP Lifecycle Notes\n\nTypical PiP state progression:\n\n1. `willStart`\n2. `didStart`\n3. PiP running\n4. `willStop`\n5. `didStop`\n\nThe system may skip stages in error or interruption scenarios.\nAlways treat `didStart` and `didStop` as authoritative.\n\n***\n\n## 8. Important Notes and Constraints\n\n### 8.1 AVPlayerView PiP is System-Level PiP\n\n- Uses native video PiP\n- Completely separate from Scripting’s custom PiP View Modifiers\n- These two mechanisms must not be mixed\n\n***\n\n### 8.2 Audio Session Is Required\n\nFor PiP to work reliably:\n\n- An active audio session is required\n- Category should be `playback`\n- Background audio capability must be enabled\n\nFailing to configure the audio session may cause PiP to fail silently.\n\n***\n\n### 8.3 Do Not Dispose AVPlayer While PiP Is Active\n\n- Disposing or replacing `AVPlayer` during PiP\n- Will force PiP to stop unexpectedly\n- May result in system errors\n\nAlways wait until `pipStatus` reaches `didStop` before releasing the player.\n\n***\n\n## 9. Recommended Best Practices\n\n- Use `AVPlayerView` exclusively for video PiP\n- Treat `pipStatus` as read-only state\n- Keep `AVPlayer` lifecycle stable during PiP\n- Configure audio session explicitly\n- Avoid frequent player replacement\n- Clean up resources only after PiP has fully stopped\n","routePath":"/doc/Device Capabilities/Play Video/AVPlayerView","lang":"en","toc":[{"id":"1-when-to-use-avplayerview","text":"1. When to Use AVPlayerView","depth":2,"charIndex":422},{"id":"2-core-properties-explained","text":"2. Core Properties Explained","depth":2,"charIndex":787},{"id":"21-player","text":"2.1 `player`","depth":3,"charIndex":820},{"id":"22-pipstatus","text":"2.2 `pipStatus`","depth":3,"charIndex":1095},{"id":"3-picture-in-picture-configuration","text":"3. Picture in Picture Configuration","depth":2,"charIndex":1664},{"id":"31-allowspictureinpictureplayback","text":"3.1 `allowsPictureInPicturePlayback`","depth":3,"charIndex":1704},{"id":"32-canstartpictureinpictureautomaticallyfrominline","text":"3.2 `canStartPictureInPictureAutomaticallyFromInline`","depth":3,"charIndex":1880},{"id":"33-updatesnowplayinginfocenter","text":"3.3 `updatesNowPlayingInfoCenter`","depth":3,"charIndex":2136},{"id":"4-full-screen-playback-behavior","text":"4. Full-Screen Playback Behavior","depth":2,"charIndex":2357},{"id":"41-entersfullscreenwhenplaybackbegins","text":"4.1 `entersFullScreenWhenPlaybackBegins`","depth":3,"charIndex":2394},{"id":"42-exitsfullscreenwhenplaybackends","text":"4.2 `exitsFullScreenWhenPlaybackEnds`","depth":3,"charIndex":2508},{"id":"5-video-scaling-videogravity","text":"5. Video Scaling (`videoGravity`)","depth":2,"charIndex":2624},{"id":"6-complete-demo-example","text":"6. Complete Demo Example","depth":2,"charIndex":3059},{"id":"7-pip-lifecycle-notes","text":"7. PiP Lifecycle Notes","depth":2,"charIndex":4843},{"id":"8-important-notes-and-constraints","text":"8. Important Notes and Constraints","depth":2,"charIndex":5099},{"id":"81-avplayerview-pip-is-system-level-pip","text":"8.1 AVPlayerView PiP is System-Level PiP","depth":3,"charIndex":5138},{"id":"82-audio-session-is-required","text":"8.2 Audio Session Is Required","depth":3,"charIndex":5320},{"id":"83-do-not-dispose-avplayer-while-pip-is-active","text":"8.3 Do Not Dispose AVPlayer While PiP Is Active","depth":3,"charIndex":5576},{"id":"9-recommended-best-practices","text":"9. Recommended Best Practices","depth":2,"charIndex":5828}],"frontmatter":{},"version":"","description":"AVPlayerView is a video playback component introduced in Scripting that wraps the system-native AVPlayerViewController.\nUnlike VideoPlayer, AVPlayerView fully supports system Picture in Picture (PiP) and exposes PiP lifecycle state to scripts. This component is intended for media-centric scenarios where native playback behavior, PiP, Now Playing integration, and background playback are required."},{"title":"VideoPlayer","content":"The `VideoPlayer` view integrates a powerful `AVPlayer` backend with a simple, customizable front-end UI for playing video and audio content. With this setup, you can easily load media, control playback, handle events, and even add custom overlays.\n\n## Overview\n\n`VideoPlayer` requires an `AVPlayer` instance, which you configure to load your media, control its playback (play, pause, stop), and respond to events like when the video is ready or ends. The `overlay` prop allows you to place interactive UI elements over the video content, below any system playback controls.\n\n**Key points:**\n\n- Control playback through the `AVPlayer` instance passed into `VideoPlayer`.\n- Add custom UI elements on top of the video using `overlay`.\n- Listen for events like `onReadyToPlay`, `onEnded`, or `onError` to react to media lifecycle states.\n\n## Basic Usage\n\nFirst, create and configure the `AVPlayer` instance:\n\n```tsx\nconst player = new AVPlayer()\n\n// Set the media source: local file path or remote URL\nplayer.setSource(\"https://example.com/video.mp4\")\n\n// When the media is ready, start playing\nplayer.onReadyToPlay = () => {\n  console.log(\"Media is ready, starting playback.\")\n  player.play()\n}\n\n// Handle playback state changes\nplayer.onTimeControlStatusChanged = (status) => {\n  console.log(\"Playback status changed:\", status)\n}\n\n// Handle the end of playback\nplayer.onEnded = () => {\n  console.log(\"Playback ended.\")\n}\n\n// Handle errors\nplayer.onError = (message) => {\n  console.error(\"Playback error:\", message)\n}\n\n// Configure playback properties\nplayer.volume = 1.0          // Full volume\nplayer.rate = 1.0            // Normal speed\nplayer.numberOfLoops = 0     // No looping\n```\n\nThen, use the `VideoPlayer` view in your UI:\n\n```tsx\n<VideoPlayer\n  player={player}\n  overlay={\n    <HStack padding>\n      <Button title=\"Pause\" action={() => player.pause()} />\n      <Button title=\"Play\" action={() => player.play()} />\n    </HStack>\n  }\n/>\n```\n\nThis displays the video with your custom controls positioned at the bottom-left corner.\n\n## Example Scenario\n\nImagine you want a video with custom controls and automatic replay:\n\n```tsx\nfunction VideoPlayerView() {\n  const player = useMemo(() => new AVPlayer(), [])\n\n  useEffect(() => {\n    player.setSource(\n      Path.join(\n        Script.directory,\n        \"localvideo.mp4\"\n      )\n    )\n    player.onReadyToPlay = () => player.play()\n    player.onEnded = () => player.play() // Restart video automatically when ended\n\n    \n    // Setup shared audio session.\n    SharedAudioSession.setActive(true)\n    SharedAudioSession.setCategory(\n      'playback',\n      ['mixWithOthers']\n    )\n\n    return () => {\n      // Dispose the AVPlayer instance when the view to be destroied.\n      player.dispose()\n    }\n  }, [])\n\n  return <VideoPlayer\n    player={player}\n    overlay={\n      <HStack padding>\n        <Button title=\"Pause\" action={() => player.pause()} />\n        <Button title=\"Resume\" action={() => player.play()} />\n      </HStack>\n    }\n    frame={{\n      height: 300\n    }}\n  />\n}\n```\n\nThis setup:\n\n- Loads and plays a local video file immediately when ready.\n- Automatically replays the video once it ends.\n- Provides custom pause/resume controls overlaid on the bottom-right corner.\n\n## Summary\n\nThe `VideoPlayer` component, powered by an `AVPlayer` instance, gives you fine-grained control over video playback in your app. From adjusting volume and playback speed to handling buffering states and errors, and even layering your own UI controls over the video, the `VideoPlayer` component and `AVPlayer` class allow for a rich and interactive media experience.\n","routePath":"/doc/Device Capabilities/Play Video/VideoPlayer/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":250},{"id":"basic-usage","text":"Basic Usage","depth":2,"charIndex":836},{"id":"example-scenario","text":"Example Scenario","depth":2,"charIndex":2039},{"id":"summary","text":"Summary","depth":2,"charIndex":3241}],"frontmatter":{},"version":"","description":"The VideoPlayer view integrates a powerful AVPlayer backend with a simple, customizable front-end UI for playing video and audio content. With this setup, you can easily load media, control playback, handle events, and even add custom overlays."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [status, setStatus] = useState<TimeControlStatus>(TimeControlStatus.paused)\n\n  const player = useMemo(() => {\n    const player = new AVPlayer()\n    player.setSource(\"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\")\n    player.onTimeControlStatusChanged = (status) => {\n      setStatus(status)\n    }\n    SharedAudioSession.setActive(true)\n    SharedAudioSession.setCategory(\n      'playback',\n      ['mixWithOthers']\n    )\n    return player\n  }, [])\n\n  useEffect(() => {\n    return () => {\n      player.dispose()\n    }\n  }, [])\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"VideoPlayer\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <VideoPlayer\n        player={player}\n        frame={{\n          height: 300\n        }}\n      />\n      <Button\n        title={status === TimeControlStatus.paused\n          ? \"Play\"\n          : \"Pause\"\n        }\n        action={() => {\n          if (status === TimeControlStatus.paused) {\n            player.play()\n          } else {\n            player.pause()\n          }\n        }}\n      />\n    </VStack>\n  </NavigationStack >\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/Play Video/VideoPlayer/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"QRCode","content":"```tsx\n\n\nfunction Example() {\n  return <NavigationStack>\n    <List\n      navigationTitle={\"QRCode\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section\n        footer={\n          <Text>Open the QRCode scan page and scan.</Text>\n        }\n      >\n        <Button\n          title={\"QRCode.scan\"}\n          action={async () => {\n            const result = await QRCode.scan()\n            if (result) {\n              Dialog.alert({\n                message: \"Result: \" + result\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Parse QRCode file to a string.</Text>\n        }\n      >\n        <Button\n          title={\"QRCode.parse\"}\n          action={async () => {\n            const result = await DocumentPicker.pickFiles({\n              allowsMultipleSelection: false\n            })\n            if (result.length) {\n              const code = await QRCode.parse(result[0])\n              Dialog.alert({\n                message: \"Parse reuslt: \" + code\n              })\n            }\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/QRCode","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"QuickLook","content":"The **QuickLook API** in the Scripting app provides a simple way to preview text, images, or files within your scripts. This is a wrapper around iOS QuickLook capabilities, allowing you to quickly display previews for a wide range of content types.\n\nEach method returns a promise that resolves when the QuickLook view is dismissed, enabling you to chain actions or handle post-preview logic easily.\n\n***\n\n## **API Reference**\n\n### `QuickLook.previewText(text: string): Promise<void>`\n\nDisplays a preview of a text string.\n\n#### **Parameters**\n\n- `text` (string): The text content to display in the preview.\n- `fullscreen` (boolean?): Whether preview in a fullscreen mode. Defaults to false.\n\n#### **Returns**\n\n- A `Promise<void>`: Resolves after the preview is dismissed.\n\n#### **Example**\n\n```tsx\nawait QuickLook.previewText(\"Hello, world! This is a QuickLook preview.\")\nconsole.log(\"Text preview dismissed\")\n```\n\n***\n\n### `QuickLook.previewImage(image: UIImage): Promise<void>`\n\nDisplays a preview of an image.\n\n#### **Parameters**\n\n- `image` (UIImage): The image to display in the preview.\n- `fullscreen` (boolean?): Whether preview in a fullscreen mode. Defaults to false.\n\n#### **Returns**\n\n- A `Promise<void>`: Resolves after the preview is dismissed.\n\n#### **Example**\n\n```tsx\n// Assume `myImage` is a UIImage instance\nawait QuickLook.previewImage(myImage)\nconsole.log(\"Image preview dismissed\")\n```\n\n***\n\n### `QuickLook.previewURLs(urls: string[]): Promise<void>`\n\nDisplays a preview of one or more files located at the given file URL strings.\n\n#### **Parameters**\n\n- `urls` (string\\[]): An array of file URL strings. Each string should point to a valid file path or remote file that can be previewed by QuickLook.\n- `fullscreen` (boolean?): Whether preview in a fullscreen mode. Defaults to false.\n\n#### **Returns**\n\n- A `Promise<void>`: Resolves after the preview is dismissed.\n\n#### **Example**\n\n```tsx\nconst fileURLs = [\n  \"/path/to/file1.pdf\",\n  \"/path/to/file2.jpg\",\n]\n\nawait QuickLook.previewURLs(fileURLs)\nconsole.log(\"File previews dismissed\")\n```\n\n***\n\n## **Usage Notes**\n\n- **UI Blocking**: These methods present a modal QuickLook view. Execution of subsequent code (after `await`) will pause until the user dismisses the preview.\n- **Error Handling**: Use `try...catch` to handle errors such as invalid file paths or unsupported content types.\n- **Supported File Types**: The supported file types depend on iOS QuickLook capabilities, which include common file types like PDFs, images, text files, and more.\n\n***\n\n## **Example Use Case**\n\n### Previewing Text, Images, and Files Sequentially\n\n```tsx\n// Preview a text\nawait QuickLook.previewText(\"QuickLook Preview Example\")\n\n// Preview an image\nconst myImage = UIImage.fromFile(\"/path/to/image.png\")\nawait QuickLook.previewImage(myImage)\n\n// Preview files\nconst fileURLs = [\n  \"/path/to/file1.pdf\",\n  \"/path/to/file2.jpg\",\n]\nawait QuickLook.previewURLs(fileURLs)\n\nconsole.log(\"All previews completed\")\n```\n\nWith this API, you can integrate QuickLook previews seamlessly into your scripts, enhancing the user experience with minimal effort.\n","routePath":"/doc/Device Capabilities/QuickLook","lang":"en","toc":[{"id":"api-reference","text":"**API Reference**","depth":2,"charIndex":405},{"id":"quicklookpreviewtexttext-string-promisevoid","text":"`QuickLook.previewText(text: string): Promise<void>`","depth":3,"charIndex":427},{"id":"parameters","text":"**Parameters**","depth":4,"charIndex":523},{"id":"returns","text":"**Returns**","depth":4,"charIndex":692},{"id":"example","text":"**Example**","depth":4,"charIndex":773},{"id":"quicklookpreviewimageimage-uiimage-promisevoid","text":"`QuickLook.previewImage(image: UIImage): Promise<void>`","depth":3,"charIndex":920},{"id":"parameters-1","text":"**Parameters**","depth":4,"charIndex":1014},{"id":"returns-1","text":"**Returns**","depth":4,"charIndex":1178},{"id":"example-1","text":"**Example**","depth":4,"charIndex":1259},{"id":"quicklookpreviewurlsurls-string-promisevoid","text":"`QuickLook.previewURLs(urls: string[]): Promise<void>`","depth":3,"charIndex":1413},{"id":"parameters-2","text":"**Parameters**","depth":4,"charIndex":1553},{"id":"returns-2","text":"**Returns**","depth":4,"charIndex":1808},{"id":"example-2","text":"**Example**","depth":4,"charIndex":1889},{"id":"usage-notes","text":"**Usage Notes**","depth":2,"charIndex":2071},{"id":"example-use-case","text":"**Example Use Case**","depth":2,"charIndex":2534},{"id":"previewing-text-images-and-files-sequentially","text":"Previewing Text, Images, and Files Sequentially","depth":3,"charIndex":2559}],"frontmatter":{},"version":"","description":"The QuickLook API in the Scripting app provides a simple way to preview text, images, or files within your scripts. This is a wrapper around iOS QuickLook capabilities, allowing you to quickly display previews for a wide range of content types. Each method returns a promise that resolves when the QuickLook view is dismissed, enabling you to chain actions or handle post-preview logic easily."},{"title":"Recurrence","content":"The recurrence-related types and classes (`RecurrenceFrequency`, `RecurrenceDayOfWeek`, `RecurrenceWeekday`, `RecurrenceEnd`, and `RecurrenceRule`) allow you to define and manage recurring patterns for events and reminders in the `Scripting` app. These types and classes make it possible to set up recurrence intervals, specify days or months for recurring patterns, and define end conditions.\n\n## Recurrence Types and Classes\n\n### 1. `RecurrenceFrequency`\n\n`RecurrenceFrequency` defines the frequency with which an event or reminder repeats. The frequency can be one of the following values:\n\n- `daily`: Repeats every day.\n- `weekly`: Repeats every week.\n- `monthly`: Repeats every month.\n- `yearly`: Repeats every year.\n\nThis type is used as a property within the `RecurrenceRule` class to specify how often the recurrence should occur.\n\n**Example Usage:**\n\n```ts\nconst frequency: RecurrenceFrequency = \"weekly\"\n```\n\n### 2. `RecurrenceWeekday`\n\n`RecurrenceWeekday` is an enumeration representing the days of the week. It allows you to specify which day or days an event should recur on within a weekly pattern. The values are:\n\n- `\"sunday\"`, `\"monday\"`, `\"tuesday\"`, `\"wednesday\"`, `\"thursday\"`, `\"friday\"`, `\"saturday\"`\n\n**Example Usage:**\n\n```ts\nconst weekday: RecurrenceWeekday = \"monday\"\n```\n\n### 3. `RecurrenceDayOfWeek`\n\n`RecurrenceDayOfWeek` allows for specifying a particular weekday, optionally combined with a `weekNumber`. This type is useful in more complex weekly recurrence patterns where you want to specify both the weekday and its occurrence within a month (like the second Tuesday of each month).\n\n`RecurrenceDayOfWeek` can either be:\n\n- A `RecurrenceWeekday`, or\n- An object containing:\n  - `weekday`: A `RecurrenceWeekday` (e.g., `\"monday\"`)\n  - `weekNumber`: A number indicating which occurrence of the weekday (positive or negative for backward counting). For example, `1` is the first occurrence, `-1` is the last occurrence.\n\n**Example Usage:**\n\n```ts\nconst dayOfWeek: RecurrenceDayOfWeek = { weekday: \"tuesday\", weekNumber: 2 }\n```\n\n### 4. `RecurrenceEnd`\n\n`RecurrenceEnd` defines when a recurrence rule should stop. It provides two options for ending a recurrence:\n\n- `fromCount(count: number)`: Ends the recurrence after a specified number of occurrences.\n- `fromDate(date: Date)`: Ends the recurrence on a specific date.\n\nThis is useful when setting a limit for how many times the event or reminder should recur.\n\n#### RecurrenceEnd Methods\n\n- **fromCount(count)**: Creates a count-based recurrence end.\n  ```ts\n  const endByCount = RecurrenceEnd.fromCount(10)\n  ```\n\n- **fromDate(date)**: Creates a date-based recurrence end.\n  ```ts\n  const endByDate = RecurrenceEnd.fromDate(new Date(\"2024-12-31\"))\n  ```\n\n### 5. `RecurrenceRule`\n\n`RecurrenceRule` defines the complete pattern for a recurring event or reminder, including its frequency, interval, specific days, months, and an optional end condition.\n\n#### RecurrenceRule Properties\n\n- **identifier**: `string` – Unique identifier for the recurrence rule.\n- **frequency**: `RecurrenceFrequency` – Frequency of recurrence (daily, weekly, monthly, yearly).\n- **interval**: `number` – Interval between recurrences (e.g., every 2 weeks). Must be greater than 0.\n- **recurrenceEnd**: `RecurrenceEnd (optional)` – Specifies the end of the recurrence.\n- **firstDayOfTheWeek**: `number` – The day treated as the start of the week.\n- **daysOfTheWeek**: `RecurrenceDayOfWeek[] (optional)` – Specific days of the week for the recurrence.\n- **daysOfTheMonth**: `number[] (optional)` – Specific days of the month (values from 1 to 31, or -1 to -31).\n- **daysOfTheYear**: `number[] (optional)` – Specific days of the year.\n- **weeksOfTheYear**: `number[] (optional)` – Specific weeks of the year.\n- **monthsOfTheYear**: `number[] (optional)` – Specific months of the year.\n- **setPositions**: `number[] (optional)` – Filters recurrences to specific positions within the frequency period.\n\n#### RecurrenceRule Method\n\n- **create(options)**: Creates a `RecurrenceRule` instance using the specified options.\n  - **Options**:\n    - **frequency**: Frequency of the recurrence (e.g., `daily`, `weekly`).\n    - **interval**: Interval for the recurrence (e.g., every 2 days).\n    - **daysOfTheWeek**: Array of `RecurrenceDayOfWeek`.\n    - **daysOfTheMonth**: Array of specific days in the month.\n    - **monthsOfTheYear**: Array of specific months for recurrence.\n    - **weeksOfTheYear**: Array of specific weeks for recurrence.\n    - **daysOfTheYear**: Array of specific days in the year.\n    - **setPositions**: Array of ordinal numbers for filtering recurrences.\n    - **end**: Specifies the end of the recurrence rule.\n\n```ts\nconst rule = RecurrenceRule.create({\n  frequency: \"monthly\",\n  interval: 1,\n  daysOfTheWeek: [{ weekday: \"monday\", weekNumber: 1 }],\n  end: RecurrenceEnd.fromCount(10)\n})\n```\n\n## Using Recurrence Types and Classes Together\n\nTo create a recurring event or reminder with these types, follow these steps:\n\n1. **Define the Frequency**: Set a `RecurrenceFrequency` to specify how often the event or reminder should occur.\n2. **Specify Days or Months**: Use `RecurrenceWeekday`, `RecurrenceDayOfWeek`, `daysOfTheMonth`, etc., to specify exact days.\n3. **Set the Interval**: Use `interval` to control how often the event or reminder should recur based on the frequency.\n4. **Define the End Condition** (optional): Use `RecurrenceEnd` to specify when the recurrence should stop.\n5. **Create the Rule**: Use `RecurrenceRule.create()` with the configured options.\n\n### Example: Recurring Meeting Every Second Tuesday for 6 Months\n\n```ts\nconst recurrenceRule = RecurrenceRule.create({\n  frequency: \"monthly\",\n  interval: 1,\n  daysOfTheWeek: [{ weekday: \"tuesday\", weekNumber: 2 }],\n  end: RecurrenceEnd.fromCount(6)\n})\n\n// Add recurrenceRule to your event or reminder\nevent.addRecurrenceRule(recurrenceRule)\nawait event.save()\n```\n\nThis example creates a `RecurrenceRule` for an event that occurs every second Tuesday each month, ending after six occurrences.\n","routePath":"/doc/Device Capabilities/Recurrence","lang":"en","toc":[{"id":"recurrence-types-and-classes","text":"Recurrence Types and Classes","depth":2,"charIndex":395},{"id":"1-recurrencefrequency","text":"1. `RecurrenceFrequency`","depth":3,"charIndex":428},{"id":"2-recurrenceweekday","text":"2. `RecurrenceWeekday`","depth":3,"charIndex":919},{"id":"3-recurrencedayofweek","text":"3. `RecurrenceDayOfWeek`","depth":3,"charIndex":1299},{"id":"4-recurrenceend","text":"4. `RecurrenceEnd`","depth":3,"charIndex":2060},{"id":"recurrenceend-methods","text":"RecurrenceEnd Methods","depth":4,"charIndex":2444},{"id":"5-recurrencerule","text":"5. `RecurrenceRule`","depth":3,"charIndex":2739},{"id":"recurrencerule-properties","text":"RecurrenceRule Properties","depth":4,"charIndex":2935},{"id":"recurrencerule-method","text":"RecurrenceRule Method","depth":4,"charIndex":3958},{"id":"using-recurrence-types-and-classes-together","text":"Using Recurrence Types and Classes Together","depth":2,"charIndex":4868},{"id":"example-recurring-meeting-every-second-tuesday-for-6-months","text":"Example: Recurring Meeting Every Second Tuesday for 6 Months","depth":3,"charIndex":5547}],"frontmatter":{},"version":"","description":"The recurrence-related types and classes (RecurrenceFrequency, RecurrenceDayOfWeek, RecurrenceWeekday, RecurrenceEnd, and RecurrenceRule) allow you to define and manage recurring patterns for events and reminders in the Scripting app. These types and classes make it possible to set up recurrence intervals, specify days or months for recurring patterns, and define end conditions."},{"title":"Reminder","content":"The `Reminder` API provides the ability to create, edit, and manage reminders in the iOS calendar system.\nIt supports configuring due dates through `DateComponents`, assigning priorities, adding notes, managing recurrence rules, working with alarms, and tracking completion state.\nThis API is suitable for a wide range of task and schedule reminder scenarios.\n\n***\n\n# 1. Class: `Reminder`\n\nThe `Reminder` class represents an individual reminder item and provides properties and methods to read and modify its data.\n\n***\n\n# 2. Properties\n\n### identifier: string\n\nA unique identifier assigned by the system (read-only).\n\n### calendar: Calendar\n\nThe calendar to which the reminder belongs.\nEach reminder must be associated with a calendar.\n\n### title: string\n\nThe title or summary of the reminder.\n\n### notes: string | null\n\nOptional notes providing additional context.\n\n***\n\n## Completion State\n\n### isCompleted: boolean\n\nIndicates whether the reminder is marked as completed.\n\n- Setting this property to `true` automatically sets `completionDate` to the current date.\n- Setting it to `false` sets `completionDate` to `null`.\n\nSpecial consideration:\nIf a reminder is completed on another device or client, `isCompleted` may be `true` while `completionDate` remains `null`.\n\n### completionDate: Date | null\n\nThe date on which the reminder was completed.\n\n- Assigning a date sets `isCompleted = true`.\n- Assigning `null` clears the completed state.\n\n***\n\n## Due Date\n\n### dueDateComponents: DateComponents | null\n\nRepresents the reminder’s due date using date components.\nSupports partially specified date or time fields.\nUseful for date-based or recurring reminders.\n\nYou may use `DateComponents.isValidDate` to check whether the components form a valid date.\n\n### dueDate: Date | null\n\nDeprecated.\nUse `dueDateComponents` instead.\nYou can read the equivalent date using `dueDateComponents?.date`.\n\n### dueDateIncludesTime: boolean\n\nDeprecated.\nUse `dueDateComponents?.hour != null && dueDateComponents?.minute != null` to determine whether the due date includes a time component.\n\n***\n\n## Priority\n\n### priority: number\n\nAn integer representing the reminder’s priority.\nHigher values typically indicate greater importance or urgency.\n\n***\n\n## Recurrence\n\n### recurrenceRules: RecurrenceRule\\[] | null\n\nAn array of recurrence rules associated with the reminder.\n\n### hasRecurrenceRules: boolean\n\nIndicates whether the reminder contains recurrence rules (read-only).\n\n***\n\n## Alarms\n\n### alarms: EventAlarm\\[] | null\n\nA collection of alarms associated with the reminder.\nAlarms may be based on:\n\n- absolute dates\n- relative offsets\n- structured locations (geofence triggers)\n\n### hasAlarm: boolean\n\nIndicates whether the reminder contains any alarms.\n\n***\n\n## Attendees\n\n### attendees: EventParticipant\\[] | null\n\nAn array of attendee objects (read-only).\nNot all reminder sources support attendee data.\n\n### hasAttendees: boolean\n\nIndicates whether the reminder has attendees.\n\n***\n\n## State Indicators\n\n### hasNotes: boolean\n\nIndicates whether the reminder contains notes.\n\n### hasChanges: boolean\n\nIndicates whether the reminder or any of its nested objects contains unsaved changes.\n\n***\n\n# 3. Instance Methods\n\n### addAlarm(alarm: EventAlarm): void\n\nAdds an alarm to the reminder.\n\n### removAlarm(alarm: EventAlarm): void\n\nRemoves the specified alarm.\n(Method name is `removAlarm`.)\n\n***\n\n### addRecurrenceRule(rule: RecurrenceRule): void\n\nAdds a recurrence rule.\n\n### removeRecurrenceRule(rule: RecurrenceRule): void\n\nRemoves a recurrence rule.\n\n***\n\n### `save(): Promise<void>`\n\nSaves changes to the reminder.\nIf the reminder has not been saved before, it is added to its associated calendar.\n\n### `remove(): Promise<void>`\n\nDeletes the reminder from the calendar.\n\n***\n\n# 4. Static Methods\n\n### `Reminder.getAll(calendars?: Calendar[]): Promise<Reminder[]>`\n\nReturns all reminders, optionally filtered by the specified calendars.\n\n***\n\n### `Reminder.getIncompletes(options?): Promise<Reminder[]>`\n\nReturns incomplete reminders filtered by due date range and/or calendar set.\n\nOptions:\n\n- `startDate?: Date`\n  Includes reminders whose due date is after this date.\n\n- `endDate?: Date`\n  Includes reminders whose due date is before this date.\n\n- `calendars?: Calendar[]`\n  Specifies which calendars to search.\n\nThis method does not expand recurrence rules; it only returns reminders with concrete due dates.\n\n***\n\n### `Reminder.getCompleteds(options?): Promise<Reminder[]>`\n\nReturns completed reminders filtered by completion date range and/or calendar set.\n\nOptions:\n\n- `startDate?: Date`\n  Includes reminders completed after this date.\n\n- `endDate?: Date`\n  Includes reminders completed before this date.\n\n- `calendars?: Calendar[]`\n  Specifies which calendars to search.\n\n***\n\n# 5. Usage Examples\n\n## Creating a Reminder with DateComponents\n\n```ts\nconst reminder = new Reminder()\nreminder.title = \"Prepare meeting materials\"\nreminder.notes = \"Finish before Monday’s team meeting\"\n\nreminder.dueDateComponents = new DateComponents({\n  year: 2025,\n  month: 10,\n  day: 6,\n  hour: 9,\n  minute: 30,\n})\n\nreminder.priority = 2\nawait reminder.save()\n```\n\n***\n\n## Creating a Date-Only Reminder\n\n```ts\nreminder.dueDateComponents = new DateComponents({\n  year: 2025,\n  month: 10,\n  day: 6,\n})\n```\n\n***\n\n## Creating DateComponents from a Date\n\n```ts\nconst now = new Date()\nreminder.dueDateComponents = DateComponents.fromDate(now)\n```\n\n***\n\n## Fetching All Reminders\n\n```ts\nconst reminders = await Reminder.getAll()\nfor (const r of reminders) {\n  console.log(`Reminder: ${r.title}`)\n}\n```\n\n***\n\n## Fetching Incomplete Reminders\n\n```ts\nconst incompletes = await Reminder.getIncompletes({\n  startDate: new Date(\"2025-01-01\"),\n  endDate: new Date(\"2025-01-31\"),\n})\n```\n\n***\n\n## Marking a Reminder as Completed\n\n```ts\nreminder.isCompleted = true\nawait reminder.save()\n```\n\n***\n\n## Deleting a Reminder\n\n```ts\nawait reminder.remove()\n```\n\n***\n\n# 6. Additional Notes\n\n### Date Management\n\nUsing `dueDateComponents` is recommended for all due-date handling.\nIt supports:\n\n- date-only values\n- date with time\n- partial components\n- validity checks through `isValidDate`\n\n### Recurrence\n\nReminder queries do not expand recurrence rules.\nThey operate only on the reminder objects that have concrete due dates.\nRecurrence rules can be added or removed through the API.\n\n### Alarms\n\nAlarms may be absolute, relative, or location-based, and are shared with the `CalendarEvent` API.\n\n### Attendees\n\nSome reminder sources do not support attendee data; in such cases, the attendees array may be `null`.\n","routePath":"/doc/Device Capabilities/Reminder","lang":"en","toc":[{"id":"identifier-string","text":"identifier: string","depth":3,"charIndex":538},{"id":"calendar-calendar","text":"calendar: Calendar","depth":3,"charIndex":619},{"id":"title-string","text":"title: string","depth":3,"charIndex":738},{"id":"notes-string--null","text":"notes: string | null","depth":3,"charIndex":796},{"id":"completion-state","text":"Completion State","depth":2,"charIndex":873},{"id":"iscompleted-boolean","text":"isCompleted: boolean","depth":3,"charIndex":894},{"id":"completiondate-date--null","text":"completionDate: Date | null","depth":3,"charIndex":1272},{"id":"due-date","text":"Due Date","depth":2,"charIndex":1451},{"id":"duedatecomponents-datecomponents--null","text":"dueDateComponents: DateComponents | null","depth":3,"charIndex":1464},{"id":"duedate-date--null","text":"dueDate: Date | null","depth":3,"charIndex":1758},{"id":"duedateincludestime-boolean","text":"dueDateIncludesTime: boolean","depth":3,"charIndex":1896},{"id":"priority","text":"Priority","depth":2,"charIndex":2084},{"id":"priority-number","text":"priority: number","depth":3,"charIndex":2097},{"id":"recurrence","text":"Recurrence","depth":2,"charIndex":2238},{"id":"recurrencerules-recurrencerule--null","text":"recurrenceRules: RecurrenceRule[] | null","depth":3,"charIndex":-1},{"id":"hasrecurrencerules-boolean","text":"hasRecurrenceRules: boolean","depth":3,"charIndex":2360},{"id":"alarms","text":"Alarms","depth":2,"charIndex":2469},{"id":"alarms-eventalarm--null","text":"alarms: EventAlarm[] | null","depth":3,"charIndex":-1},{"id":"hasalarm-boolean","text":"hasAlarm: boolean","depth":3,"charIndex":2672},{"id":"attendees","text":"Attendees","depth":2,"charIndex":2753},{"id":"attendees-eventparticipant--null","text":"attendees: EventParticipant[] | null","depth":3,"charIndex":-1},{"id":"hasattendees-boolean","text":"hasAttendees: boolean","depth":3,"charIndex":2901},{"id":"state-indicators","text":"State Indicators","depth":2,"charIndex":2980},{"id":"hasnotes-boolean","text":"hasNotes: boolean","depth":3,"charIndex":3001},{"id":"haschanges-boolean","text":"hasChanges: boolean","depth":3,"charIndex":3072},{"id":"addalarmalarm-eventalarm-void","text":"addAlarm(alarm: EventAlarm): void","depth":3,"charIndex":3212},{"id":"removalarmalarm-eventalarm-void","text":"removAlarm(alarm: EventAlarm): void","depth":3,"charIndex":3283},{"id":"addrecurrencerulerule-recurrencerule-void","text":"addRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":3390},{"id":"removerecurrencerulerule-recurrencerule-void","text":"removeRecurrenceRule(rule: RecurrenceRule): void","depth":3,"charIndex":3466},{"id":"save-promisevoid","text":"`save(): Promise<void>`","depth":3,"charIndex":3553},{"id":"remove-promisevoid","text":"`remove(): Promise<void>`","depth":3,"charIndex":3697},{"id":"remindergetallcalendars-calendar-promisereminder","text":"`Reminder.getAll(calendars?: Calendar[]): Promise<Reminder[]>`","depth":3,"charIndex":3795},{"id":"remindergetincompletesoptions-promisereminder","text":"`Reminder.getIncompletes(options?): Promise<Reminder[]>`","depth":3,"charIndex":3940},{"id":"remindergetcompletedsoptions-promisereminder","text":"`Reminder.getCompleteds(options?): Promise<Reminder[]>`","depth":3,"charIndex":4415},{"id":"creating-a-reminder-with-datecomponents","text":"Creating a Reminder with DateComponents","depth":2,"charIndex":4802},{"id":"creating-a-date-only-reminder","text":"Creating a Date-Only Reminder","depth":2,"charIndex":5155},{"id":"creating-datecomponents-from-a-date","text":"Creating DateComponents from a Date","depth":2,"charIndex":5295},{"id":"fetching-all-reminders","text":"Fetching All Reminders","depth":2,"charIndex":5432},{"id":"fetching-incomplete-reminders","text":"Fetching Incomplete Reminders","depth":2,"charIndex":5586},{"id":"marking-a-reminder-as-completed","text":"Marking a Reminder as Completed","depth":2,"charIndex":5763},{"id":"deleting-a-reminder","text":"Deleting a Reminder","depth":2,"charIndex":5865},{"id":"date-management","text":"Date Management","depth":3,"charIndex":5952},{"id":"recurrence-1","text":"Recurrence","depth":3,"charIndex":-1},{"id":"alarms-1","text":"Alarms","depth":3,"charIndex":-1},{"id":"attendees-1","text":"Attendees","depth":3,"charIndex":-1}],"frontmatter":{},"version":"","description":"The Reminder API provides the ability to create, edit, and manage reminders in the iOS calendar system.\nIt supports configuring due dates through DateComponents, assigning priorities, adding notes, managing recurrence rules, working with alarms, and tracking completion state.\nThis API is suitable for a wide range of task and schedule reminder scenarios. The Reminder class represents an individual reminder item and provides properties and methods to read and modify its data. identifier: string A unique identifier assigned by the system (read-only). calendar: Calendar The calendar to which the reminder belongs.\nEach reminder must be associated with a calendar. title: string The title or summary of the reminder. notes: string | null Optional notes providing additional context."},{"title":"Safari","content":"The `Safari` module provides functions to open and display websites either externally using the system default browser or internally within the Scripting app using an in-app Safari view. It enables seamless web content access in both immersive and external browsing scenarios.\n\n***\n\n## Module: `Safari`\n\nThis module includes two functions:\n\n***\n\n### ▸ `Safari.openURL(url: string): Promise<boolean>`\n\nOpens a URL using the system's default method for handling the specified URL scheme. This may launch Safari, another browser, or a different app altogether—depending on the scheme and installed apps.\n\n#### Parameters\n\n- **`url`** (`string`): The URL to open. Can begin with `http://`, `https://`, or any custom URL scheme (e.g., `mailto:`, `tel:`, `appname://`).\n\n#### Returns\n\n- A `Promise<boolean>` that resolves to `true` if the URL was successfully opened, or `false` if it failed (e.g., due to an invalid scheme or unsupported URL).\n\n#### Example\n\n```ts\nconst success = await Safari.openURL('mailto:hello@example.com')\nif (!success) {\n  console.error('Failed to open the URL')\n}\n```\n\n***\n\n### ▸ `Safari.present(url: string, fullscreen?: boolean): Promise<void>`\n\nPresents a web page using an in-app Safari view. The page is shown modally within the Scripting app. The returned Promise resolves only after the user closes the web view.\n\n#### Parameters\n\n- **`url`** (`string`): The website URL to present.\n- **`fullscreen`** (`boolean`, optional): Whether to show the view in fullscreen mode. Defaults to `true`.\n\n#### Returns\n\n- A `Promise<void>` that resolves when the user closes the web view.\n\n#### Examples\n\nPresent a site in fullscreen (default):\n\n```ts\nawait Safari.present('https://developer.apple.com')\n\n// Code here runs after the web view is dismissed\nconsole.log('The web view has been closed.')\n```\n\nPresent a site in a non-fullscreen view (e.g., as part of an embedded interface):\n\n```ts\nawait Safari.present('https://news.ycombinator.com', false)\n\n// Code here runs after the web view is dismissed\nconsole.log('The web view has been closed.')\n```\n\n***\n\n## Use Cases\n\n- Redirecting users to external links such as help docs, authentication pages, or App Store URLs.\n- Displaying online content (e.g., blog posts, dashboards) directly in-app.\n- Launching another app using its URL scheme.\n\n***\n\n## Notes\n\n- Always provide a valid and fully qualified URL.\n- Use `present()` to keep the user within the app.\n- Use `openURL()` for external redirection or when launching another app via a URL scheme.\n","routePath":"/doc/Device Capabilities/Safari/","lang":"en","toc":[{"id":"module-safari","text":"Module: `Safari`","depth":2,"charIndex":283},{"id":"-safariopenurlurl-string-promiseboolean","text":"▸ `Safari.openURL(url: string): Promise<boolean>`","depth":3,"charIndex":346},{"id":"parameters","text":"Parameters","depth":4,"charIndex":602},{"id":"returns","text":"Returns","depth":4,"charIndex":765},{"id":"example","text":"Example","depth":4,"charIndex":940},{"id":"-safaripresenturl-string-fullscreen-boolean-promisevoid","text":"▸ `Safari.present(url: string, fullscreen?: boolean): Promise<void>`","depth":3,"charIndex":1095},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":1342},{"id":"returns-1","text":"Returns","depth":4,"charIndex":1519},{"id":"examples","text":"Examples","depth":4,"charIndex":1603},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2073},{"id":"notes","text":"Notes","depth":2,"charIndex":2313}],"frontmatter":{},"version":"","description":"The Safari module provides functions to open and display websites either externally using the system default browser or internally within the Scripting app using an in-app Safari view. It enables seamless web content access in both immersive and external browsing scenarios."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Safari\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Button\n        title={\"Open URL in system default browser\"}\n        action={() => {\n          Safari.openURL(\"https://github.com\")\n        }}\n      />\n\n      <Button\n        title={\"Open URL in-app browser\"}\n        action={async () => {\n          await Safari.present(\"https://github.com\", false)\n          console.log(\"Dismissed\")\n        }}\n      />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/Safari/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Send Mail","content":"The `MailUI` module allows your script to present a native mail compose view, enabling users to send emails with recipients, subject, body, and attachments prefilled. It also provides a way to check whether the device is capable of sending emails.\n\nThe original `Mail` module is deprecated and has been replaced by `MailUI`.\n\n***\n\n## `MailUI.isAvailable: boolean`\n\nReturns `true` if the device is configured to send emails using the built-in Mail app.\n\n```ts\nif (!MailUI.isAvailable) {\n  console.log(\"Mail is not available on this device.\")\n}\n```\n\n***\n\n## `MailUI.present(options): Promise<\"cancelled\" | \"sent\" | \"failed\" | \"saved\">`\n\nPresents the system mail composer with the provided options. Users can edit the message, then send, cancel, or save it as a draft.\n\n### Parameters\n\n| Name                           | Type           | Required | Description                                                                                  |\n| ------------------------------ | -------------- | -------- | -------------------------------------------------------------------------------------------- |\n| `toRecipients`                 | `string[]`     | Yes      | List of email addresses to include in the **To** field.                                      |\n| `ccRecipients`                 | `string[]`     | No       | List of email addresses for the **CC** (carbon copy) field.                                  |\n| `bccRecipients`                | `string[]`     | No       | List of email addresses for the **BCC** (blind carbon copy) field.                           |\n| `preferredSendingEmailAddress` | `string`       | No       | If the user has multiple accounts configured, this can specify the preferred sender's email. |\n| `subject`                      | `string`       | No       | Email subject line.                                                                          |\n| `body`                         | `string`       | No       | The content of the email body.                                                               |\n| `attachments`                  | `Attachment[]` | No       | Array of files to attach to the email.                                                       |\n\n### Attachment Object\n\nEach attachment must include the following fields:\n\n| Property   | Type     | Required | Description                                               |\n| ---------- | -------- | -------- | --------------------------------------------------------- |\n| `data`     | `Data`   | Yes      | The binary content to attach.                             |\n| `mimeType` | `string` | Yes      | The MIME type (e.g., `\"image/png\"`, `\"application/pdf\"`). |\n| `fileName` | `string` | Yes      | Name of the file as it will appear in the eMailUI.        |\n\n***\n\n### Return Value\n\nReturns a `Promise` that resolves to one of the following result strings:\n\n- `\"sent\"` – The user sent the email.\n- `\"cancelled\"` – The user cancelled email composition.\n- `\"failed\"` – Sending failed due to an error (e.g., no email account configured).\n- `\"saved\"` – The email was saved as a draft.\n\n***\n\n### Throws\n\nThis method will throw an error if:\n\n- `MailUI.isAvailable` is `false`\n- The options are malformed or missing required fields\n\n***\n\n## Example: Simple Email\n\n```ts\nif (MailUI.isAvailable) {\n  const result = await MailUI.present({\n    toRecipients: [\"user@example.com\"],\n    subject: \"Hello from script\",\n    body: \"This email was sent using the Scripting app!\"\n  })\n\n  console.log(\"Result:\", result) // sent, cancelled, failed, or saved\n}\n```\n\n***\n\n## Example: Email with Attachment\n\n```ts\nconst fileData = Data.fromString(\"Here is the content of the attached file.\")\n\nif (MailUI.isAvailable) {\n  const result = await MailUI.present({\n    toRecipients: [\"user@example.com\"],\n    subject: \"Document attached\",\n    body: \"Please find the document attached.\",\n    attachments: [\n      {\n        data: fileData,\n        mimeType: \"text/plain\",\n        fileName: \"notes.txt\"\n      }\n    ]\n  })\n\n  if (result === \"sent\") {\n    console.log(\"Email successfully sent.\")\n  } else {\n    console.log(\"Email not sent:\", result)\n  }\n}\n```\n\n***\n\n## Notes\n\n- The system mail composer must be presented in an interactive context (not in background-only scripts).\n- The user controls the final sending of the message.\n- This API requires a properly configured mail account.\n","routePath":"/doc/Device Capabilities/Send Mail","lang":"en","toc":[{"id":"mailuiisavailable-boolean","text":"`MailUI.isAvailable: boolean`","depth":2,"charIndex":331},{"id":"mailuipresentoptions-promisecancelled--sent--failed--saved","text":"`MailUI.present(options): Promise<\"cancelled\" | \"sent\" | \"failed\" | \"saved\">`","depth":2,"charIndex":553},{"id":"parameters","text":"Parameters","depth":3,"charIndex":767},{"id":"attachment-object","text":"Attachment Object","depth":3,"charIndex":2206},{"id":"return-value","text":"Return Value","depth":3,"charIndex":2772},{"id":"throws","text":"Throws","depth":3,"charIndex":3094},{"id":"example-simple-email","text":"Example: Simple Email","depth":2,"charIndex":3238},{"id":"example-email-with-attachment","text":"Example: Email with Attachment","depth":2,"charIndex":3555},{"id":"notes","text":"Notes","depth":2,"charIndex":4137}],"frontmatter":{},"version":"","description":"The MailUI module allows your script to present a native mail compose view, enabling users to send emails with recipients, subject, body, and attachments prefilled. It also provides a way to check whether the device is capable of sending emails. The original Mail module is deprecated and has been replaced by MailUI."},{"title":"Send Message","content":"The `MessageUI` namespace provides functions to detect messaging capabilities and present a system message compose view from within a script. You can send SMS or MMS messages with optional subject and attachments, depending on device capabilities.\n\n## Availability Properties\n\n### `MessageUI.isAvailable: boolean`\n\nReturns `true` if the device is capable of sending plain text messages.\n\n```ts\nif (!MessageUI.isAvailable) {\n  console.log(\"This device cannot send messages.\")\n}\n```\n\n### `MessageUI.canSendSubject: boolean`\n\nReturns `true` if the device supports adding a **subject** to messages.\n\n### `MessageUI.canSendAttachments: boolean`\n\nReturns `true` if the device supports including **attachments** in messages.\n\n***\n\n## `MessageUI.present(options): Promise<\"cancelled\" | \"sent\" | \"failed\">`\n\nDisplays the system’s message composer with the specified content and resolves with the result of the user’s action.\n\n### Parameters\n\n| Name          | Type           | Required | Description                                                               |\n| ------------- | -------------- | -------- | ------------------------------------------------------------------------- |\n| `recipients`  | `string[]`     | Yes      | An array of recipient phone numbers.                                      |\n| `body`        | `string`       | Yes      | The text content of the message body.                                     |\n| `subject`     | `string`       | No       | Optional subject line. Ignored if `canSendSubject` is `false`.            |\n| `attachments` | `Attachment[]` | No       | Optional list of attachments. Ignored if `canSendAttachments` is `false`. |\n\n### Attachment Object\n\nEach item in the `attachments` array must include:\n\n| Property   | Type     | Required | Description                                                                        |\n| ---------- | -------- | -------- | ---------------------------------------------------------------------------------- |\n| `data`     | `Data`   | Yes      | The binary data to be attached to the message.                                     |\n| `type`     | `UTType` | Yes      | A [Uniform Type Identifier]() string, such as `\"public.image\"` or `\"public.text\"`. |\n| `fileName` | `string` | Yes      | The name that will appear for the attachment in the message.                       |\n\n***\n\n### Return Value\n\nReturns a `Promise` that resolves to one of the following values:\n\n- `\"sent\"`: The message was successfully sent by the user.\n- `\"cancelled\"`: The user canceled the message.\n- `\"failed\"`: The message failed to send due to an error (e.g., connectivity or system failure).\n\n***\n\n## Example: Basic Text Message\n\n```ts\nif (MessageUI.isAvailable) {\n  const result = await MessageUI.present({\n    recipients: [\"1234567890\"],\n    body: \"Hello from Scripting!\"\n  })\n\n  console.log(\"Message result:\", result) // sent, cancelled, or failed\n}\n```\n\n***\n\n## Example: Message with Subject and Attachment\n\n```ts\nconst fileData = Data.fromString(\"This is the document content.\")\n\nif (MessageUI.isAvailable && MessageUI.canSendAttachments) {\n  const result = await MessageUI.present({\n    recipients: [\"1234567890\"],\n    body: \"Here is the document.\",\n    subject: \"Requested File\",\n    attachments: [\n      {\n        data: fileData,\n        type: \"public.text\",\n        fileName: \"document.txt\"\n      }\n    ]\n  })\n\n  if (result === \"sent\") {\n    console.log(\"Message successfully sent.\")\n  } else {\n    console.log(\"Message was not sent:\", result)\n  }\n}\n```\n\n***\n\n## Notes\n\n- The `subject` and `attachments` options are automatically ignored if not supported on the device.\n- This API only presents the UI; sending is user-controlled.\n- Can only be used in interactive scripts (not background-only scripts).\n","routePath":"/doc/Device Capabilities/Send Message","lang":"en","toc":[{"id":"availability-properties","text":"Availability Properties","depth":2,"charIndex":249},{"id":"messageuiisavailable-boolean","text":"`MessageUI.isAvailable: boolean`","depth":3,"charIndex":277},{"id":"messageuicansendsubject-boolean","text":"`MessageUI.canSendSubject: boolean`","depth":3,"charIndex":482},{"id":"messageuicansendattachments-boolean","text":"`MessageUI.canSendAttachments: boolean`","depth":3,"charIndex":596},{"id":"messageuipresentoptions-promisecancelled--sent--failed","text":"`MessageUI.present(options): Promise<\"cancelled\" | \"sent\" | \"failed\">`","depth":2,"charIndex":724},{"id":"parameters","text":"Parameters","depth":3,"charIndex":917},{"id":"attachment-object","text":"Attachment Object","depth":3,"charIndex":1666},{"id":"return-value","text":"Return Value","depth":3,"charIndex":2357},{"id":"example-basic-text-message","text":"Example: Basic Text Message","depth":2,"charIndex":2652},{"id":"example-message-with-subject-and-attachment","text":"Example: Message with Subject and Attachment","depth":2,"charIndex":2917},{"id":"notes","text":"Notes","depth":2,"charIndex":3523}],"frontmatter":{},"version":"","description":"The MessageUI namespace provides functions to detect messaging capabilities and present a system message compose view from within a script. You can send SMS or MMS messages with optional subject and attachments, depending on device capabilities."},{"title":"ShareSheet","content":"```tsx\n\n\nfunction Example() {\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"ShareSheet\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section\n        footer={\n          <Text>Present a ShareSheet UI.</Text>\n        }\n      >\n        <Button\n          title={\"ShareSheet.present\"}\n          action={async () => {\n            // const image = await Photos.getLatestPhotos(1)\n            // await ShareSheet.present([image])\n            if (await ShareSheet.present([\"Hello Scripting!\"])) {\n              Dialog.alert({\n                message: \"Share successfully.\"\n              })\n            } else {\n              Dialog.alert({\n                message: \"Cancelled\"\n              })\n            }\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/ShareSheet","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"SharedAudioSession","content":"The `SharedAudioSession` interface provides a convenient way to manage and interact with the shared audio session in your script. The audio session acts as an intermediary between your script, the Scripting app, the operating system, and the underlying audio hardware, enabling you to configure and control audio behavior effectively.\n\n## Features\n\n- Retrieve and set audio session categories, modes, and options.\n- Configure the preferred sample rate for audio input and output.\n- Handle audio interruptions.\n- Query device capabilities for supported categories and modes.\n- Tailor audio behaviors for specific app use cases, such as video recording, voice chat, or background playback.\n\n***\n\n## Methods and Properties\n\n### 1. **Session Category and Options**\n\n#### `category`\n\nGet the current audio session category.\n\n```typescript\nconst category = await SharedAudioSession.category\nconsole.log(category) // Example: 'playback'\n```\n\n#### `categoryOptions`\n\nRetrieve the current audio session category options.\n\n```typescript\nconst options = await SharedAudioSession.categoryOptions\nconsole.log(options) // Example: ['mixWithOthers', 'allowAirPlay']\n```\n\n#### `setCategory(category: AudioSessionCategory, options: AudioSessionCategoryOptions[])`\n\nSet the audio session category with specific options.\n\n```typescript\nawait SharedAudioSession.setCategory('playback', ['mixWithOthers'])\n```\n\n***\n\n### 2. **Session Mode**\n\n#### `mode`\n\nRetrieve the current audio session mode.\n\n```typescript\nconst mode = await SharedAudioSession.mode\nconsole.log(mode) // Example: 'videoChat'\n```\n\n#### `setMode(mode: AudioSessionMode)`\n\nSet the audio session mode.\n\n```typescript\nawait SharedAudioSession.setMode('voiceChat')\n```\n\n***\n\n### 3. **Sample Rate**\n\n#### `preferredSampleRate`\n\nRetrieve the preferred sample rate in hertz.\n\n```typescript\nconst sampleRate = await SharedAudioSession.preferredSampleRate\nconsole.log(sampleRate) // Example: 44100\n```\n\n#### `setPreferredSampleRate(sampleRate: number)`\n\nSet the preferred sample rate for audio input and output.\n\n```typescript\nawait SharedAudioSession.setPreferredSampleRate(48000)\n```\n\n***\n\n### 4. **Interruption Handling**\n\n#### `addInterruptionListener(listener: AudioSessionInterruptionListener)`\n\nListen for audio interruptions.\n\n```typescript\nSharedAudioSession.addInterruptionListener((type) => {\n  if (type === 'began') {\n    console.log('Audio interruption began')\n  } else if (type === 'ended') {\n    console.log('Audio interruption ended')\n  }\n})\n```\n\n#### `removeInterruptionListener(listener: AudioSessionInterruptionListener)`\n\nRemove an interruption listener.\n\n```typescript\nSharedAudioSession.removeInterruptionListener(myListener)\n```\n\n***\n\n### 5. **Device Capabilities**\n\n#### `availableCategories`\n\nGet the list of audio session categories available on the device.\n\n```typescript\nconst categories = await SharedAudioSession.availableCategories\nconsole.log(categories) // Example: ['playback', 'record', 'soloAmbient']\n```\n\n#### `availableModes`\n\nGet the list of audio session modes available on the device.\n\n```typescript\nconst modes = await SharedAudioSession.availableModes\nconsole.log(modes) // Example: ['default', 'videoChat', 'voiceChat']\n```\n\n***\n\n### 6. **Additional Properties**\n\n#### `isOtherAudioPlaying`\n\nCheck if other audio is currently playing on the device.\n\n```typescript\nconst isPlaying = await SharedAudioSession.isOtherAudioPlaying\nconsole.log(isPlaying) // Example: true\n```\n\n#### `secondaryAudioShouldBeSilencedHint`\n\nCheck if secondary audio should be silenced.\n\n```typescript\nconst shouldSilence = await SharedAudioSession.secondaryAudioShouldBeSilencedHint\nconsole.log(shouldSilence) // Example: false\n```\n\n#### `allowHapticsAndSystemSoundsDuringRecording`\n\nCheck if haptics and system sounds are allowed during recording.\n\n```typescript\nconst allowHaptics = await SharedAudioSession.allowHapticsAndSystemSoundsDuringRecording\nconsole.log(allowHaptics) // Example: true\n```\n\n#### `prefersNoInterruptionsFromSystemAlerts`\n\nCheck if the session prefers no interruptions from system alerts.\n\n```typescript\nconst prefersNoInterruptions = await SharedAudioSession.prefersNoInterruptionsFromSystemAlerts\nconsole.log(prefersNoInterruptions) // Example: false\n```\n\n***\n\n### 7. **Session Activation**\n\n#### `setActive(active: boolean, options?: AudioSessionSetActiveOptions[])`\n\nActivate or deactivate the shared audio session with optional options.\n\n- `active`: Set to `true` to activate the session, `false` to deactivate it.\n- `options`: An array of optional activation options, such as 'interruptSpokenAudioAndMixWithOthers'.\n\n```typescript\nawait SharedAudioSession.setActive(\n  true,\n  ['notifyOthersOnDeactivation']\n)\n```\n\n***\n\n### 8. **System Settings**\n\n#### `setAllowHapticsAndSystemSoundsDuringRecording(value: boolean)`\n\nEnable or disable haptics and system sounds during recording.\n\n```typescript\nawait SharedAudioSession.setAllowHapticsAndSystemSoundsDuringRecording(true)\n```\n\n#### `setPrefersNoInterruptionsFromSystemAlerts(value: boolean)`\n\nSet the preference for no interruptions from system alerts.\n\n```typescript\nawait SharedAudioSession.setPrefersNoInterruptionsFromSystemAlerts(true)\n```\n\n***\n\n### 9. **Systemwide Output Volume**\n\n#### `outputVolume: number`\n\nThe systemwide output volume. This property is a number between 0 and 1, representing the volume level as a percentage.\n\n#### outputVolume EventListener\n\nType Definition:\n\n```ts\ntype AudioSessionOutputVolumeListener = (newValue: number, oldValue: number) => void\n```\n\n##### `addOutputVolumeListener(listener: AudioSessionOutputVolumeListener)`\n\nAdd an event listener for changes in the systemwide output volume.\n\n```typescript\nSharedAudioSession.addOutputVolumeListener((newValue, oldValue) => {\n  console.log(`Output volume changed from ${oldValue} to ${newValue}`)\n})\n```\n\n##### `removeOutputVolumeListener(listener: AudioSessionOutputVolumeListener)`\n\nRemove an event listener for changes in the systemwide output volume.\n\n***\n\n## Enumerations\n\n### **AudioSessionSetActiveOptions**\n\nOptional activation options:\n\n- `'notifyOthersOnDeactivation'`: Notify other audio sessions when deactivating the shared audio session.\n\n### **AudioSessionCategory**\n\nDefines the session's audio category:\n\n- `'ambient'`: Ambient audio, such as background music or ambient sounds.\n- `'multiRoute'`: Multi-route audio, such as routing distinct streams of audio data to different output devices at the same time.\n- `'playAndRecord'`: Play and record audio, such as voice chat or video conferencing.\n- `'playback'`: Playback audio, such as music or sound effects.\n- `'record'`: Recording audio, such as voice chat or video conferencing.\n- `'soloAmbient'`: Solo ambient audio, such as background music or ambient sounds.\n\n### **AudioSessionCategoryOptions**\n\nOptional behaviors for audio categories:\n\n- `'mixWithOthers'`: Mix with other audio sessions.\n- `'duckOthers'`: Duck other audio sessions.\n- `'interruptSpokenAudioAndMixWithOthers'`: Interrupt spoken audio and mix with others.\n- `'allowBluetooth'`: Allow Bluetooth audio.\n- `'allowBluetoothA2DP'`: Allow Bluetooth A2DP audio.\n- `'allowAirPlay'`: Allow AirPlay audio.\n- `'defaultToSpeaker'`: Default to speaker, even if headphones are connected.\n- `'overrideMutedMicrophoneInterruption'`: Override muted microphone interruption.\n\n### **AudioSessionMode**\n\nSpecifies the session's mode:\n\n- `'default'`: Default mode.\n- `'gameChat'`: Game chat mode.\n- `'measurement'`: Measurement mode, such as audio input or output.\n- `'moviePlayback'`: Movie playback mode, such as movie content.\n- `'spokenAudio'`: Spoken audio mode, such as voice chat.\n- `'videoChat'`: Video chat mode, such as video conferencing.\n- `'videoRecording'`: Video recording mode, such as video conferencing.\n- `'voicePrompt'`: Voice prompt mode, such as text-to-speech.\n\n### **AudioSessionInterruptionType**\n\nSpecifies the type of interruption:\n\n- `'began'`\n- `'ended'`\n- `'unknown'`\n\n***\n\nThis interface offers extensive control over audio session management in Scripting, making it suitable for building audio-heavy script like music players and video conferencing tools.\n","routePath":"/doc/Device Capabilities/SharedAudioSession","lang":"en","toc":[{"id":"features","text":"Features","depth":2,"charIndex":336},{"id":"methods-and-properties","text":"Methods and Properties","depth":2,"charIndex":694},{"id":"1-session-category-and-options","text":"1. **Session Category and Options**","depth":3,"charIndex":721},{"id":"category","text":"`category`","depth":4,"charIndex":762},{"id":"categoryoptions","text":"`categoryOptions`","depth":4,"charIndex":935},{"id":"setcategorycategory-audiosessioncategory-options-audiosessioncategoryoptions","text":"`setCategory(category: AudioSessionCategory, options: AudioSessionCategoryOptions[])`","depth":4,"charIndex":1156},{"id":"2-session-mode","text":"2. **Session Mode**","depth":3,"charIndex":1395},{"id":"mode","text":"`mode`","depth":4,"charIndex":1420},{"id":"setmodemode-audiosessionmode","text":"`setMode(mode: AudioSessionMode)`","depth":4,"charIndex":1579},{"id":"3-sample-rate","text":"3. **Sample Rate**","depth":3,"charIndex":1718},{"id":"preferredsamplerate","text":"`preferredSampleRate`","depth":4,"charIndex":1742},{"id":"setpreferredsampleratesamplerate-number","text":"`setPreferredSampleRate(sampleRate: number)`","depth":4,"charIndex":1941},{"id":"4-interruption-handling","text":"4. **Interruption Handling**","depth":3,"charIndex":2130},{"id":"addinterruptionlistenerlistener-audiosessioninterruptionlistener","text":"`addInterruptionListener(listener: AudioSessionInterruptionListener)`","depth":4,"charIndex":2164},{"id":"removeinterruptionlistenerlistener-audiosessioninterruptionlistener","text":"`removeInterruptionListener(listener: AudioSessionInterruptionListener)`","depth":4,"charIndex":2501},{"id":"5-device-capabilities","text":"5. **Device Capabilities**","depth":3,"charIndex":2696},{"id":"availablecategories","text":"`availableCategories`","depth":4,"charIndex":2728},{"id":"availablemodes","text":"`availableModes`","depth":4,"charIndex":2980},{"id":"6-additional-properties","text":"6. **Additional Properties**","depth":3,"charIndex":3212},{"id":"isotheraudioplaying","text":"`isOtherAudioPlaying`","depth":4,"charIndex":3246},{"id":"secondaryaudioshouldbesilencedhint","text":"`secondaryAudioShouldBeSilencedHint`","depth":4,"charIndex":3454},{"id":"allowhapticsandsystemsoundsduringrecording","text":"`allowHapticsAndSystemSoundsDuringRecording`","depth":4,"charIndex":3689},{"id":"prefersnointerruptionsfromsystemalerts","text":"`prefersNoInterruptionsFromSystemAlerts`","depth":4,"charIndex":3957},{"id":"7-session-activation","text":"7. **Session Activation**","depth":3,"charIndex":4244},{"id":"setactiveactive-boolean-options-audiosessionsetactiveoptions","text":"`setActive(active: boolean, options?: AudioSessionSetActiveOptions[])`","depth":4,"charIndex":4275},{"id":"8-system-settings","text":"8. **System Settings**","depth":3,"charIndex":4707},{"id":"setallowhapticsandsystemsoundsduringrecordingvalue-boolean","text":"`setAllowHapticsAndSystemSoundsDuringRecording(value: boolean)`","depth":4,"charIndex":4735},{"id":"setprefersnointerruptionsfromsystemalertsvalue-boolean","text":"`setPrefersNoInterruptionsFromSystemAlerts(value: boolean)`","depth":4,"charIndex":4964},{"id":"9-systemwide-output-volume","text":"9. **Systemwide Output Volume**","depth":3,"charIndex":5188},{"id":"outputvolume-number","text":"`outputVolume: number`","depth":4,"charIndex":5225},{"id":"outputvolume-eventlistener","text":"outputVolume EventListener","depth":4,"charIndex":5375},{"id":"enumerations","text":"Enumerations","depth":2,"charIndex":5985},{"id":"audiosessionsetactiveoptions","text":"**AudioSessionSetActiveOptions**","depth":3,"charIndex":6002},{"id":"audiosessioncategory","text":"**AudioSessionCategory**","depth":3,"charIndex":6177},{"id":"audiosessioncategoryoptions","text":"**AudioSessionCategoryOptions**","depth":3,"charIndex":6757},{"id":"audiosessionmode","text":"**AudioSessionMode**","depth":3,"charIndex":7323},{"id":"audiosessioninterruptiontype","text":"**AudioSessionInterruptionType**","depth":3,"charIndex":7829}],"frontmatter":{},"version":"","description":"The SharedAudioSession interface provides a convenient way to manage and interact with the shared audio session in your script. The audio session acts as an intermediary between your script, the Scripting app, the operating system, and the underlying audio hardware, enabling you to configure and control audio behavior effectively."},{"title":"Speech","content":"The `Speech` interface provides a high-level API for text-to-speech (TTS) functionality. This interface allows you to synthesize speech, control playback, and manage speech synthesis settings. Below are the details of the `Speech` API, its methods, properties, and usage examples.\n\n***\n\n## Features Overview\n\n- **Text-to-Speech:** Convert text into speech with customizable options like pitch, rate, and volume.\n- **Voice Management:** Choose from available system voices by language or identifier.\n- **Markdown Support:** Render text with basic formatting using Markdown.\n- **Audio Session Management:** Control audio sessions for seamless speech integration with other audio sources.\n- **Event Listeners:** Respond to speech synthesis lifecycle events.\n\n***\n\n## Type Definitions\n\n### `SpeechBoundary`\n\nSpecifies when to pause or stop speech:\n\n- `'immediate'`: Pause/stop immediately.\n- `'word'`: Pause/stop after finishing the current word.\n\n***\n\n### `SpeechSynthesisVoice`\n\nRepresents a voice for speech synthesis:\n\n- `identifier`: Unique voice identifier.\n- `name`: Display name of the voice.\n- `language`: BCP 47 language and locale code.\n- `quality`: Voice quality (`'default'`, `'premium'`, `'enhanced'`).\n- `gender`: Voice gender (`'male'`, `'female'`, `'unspecified'`).\n\n***\n\n### `SpeechProgressDetails`\n\nDetails about progress during speech synthesis:\n\n- `text`: Full text being spoken.\n- `start`: Start index of the current word.\n- `end`: End index of the current word.\n- `word`: The current word being spoken.\n\n***\n\n### `SpeechSynthesisOptions`\n\nOptions for customizing speech synthesis:\n\n- `isMarkdown` (optional): Interpret text as Markdown.\n- `pitch`, `rate`, `volume`: Override global `Speech` values for pitch, rate, and volume.\n- `preUtteranceDelay`, `postUtteranceDelay`: Control pauses before and after utterances.\n- `voiceIdentifier`, `voiceLanguage`: Override global voice settings.\n\n***\n\n## Static Properties\n\n### Global Speech Settings\n\n- `pitch`: Default pitch value (range: `0.5` to `2.0`; default: `1.0`).\n- `rate`: Speech rate (range: `Speech.minSpeechRate` to `Speech.maxSpeechRate`; default: `Speech.defaultSpeechRate`).\n- `volume`: Default volume (range: `0.0` to `1.0`; default: `1.0`).\n- `preUtteranceDelay`, `postUtteranceDelay`: Global delays before and after utterances.\n\n### Voice and Language\n\n- `speechVoices`: Retrieves all available voices.\n- `currentLanguageCode`: The device's current language code.\n\n### Audio Session\n\n- `usesApplicationAudioSession`: Specifies whether the app manages the audio session.\n\n***\n\n## Methods\n\n### Speaking and Synthesis\n\n- `speak(text: string, options?: SpeechSynthesisOptions): Promise<void>`\\\n  Adds text to the speech queue for synthesis.\n\n- `synthesizeToFile(text: string, filePath: string, options?: SpeechSynthesisOptions): Promise<void>`\\\n  Synthesizes text to an audio file in the documents directory.\n\n### Playback Control\n\n- `pause(at?: SpeechBoundary): Promise<boolean>`\\\n  Pauses speech at the specified boundary. Defaults to \"immediate\".\n\n- `resume(): Promise<boolean>`\\\n  Resumes speech from the paused state.\n\n- `stop(at?: SpeechBoundary): Promise<boolean>`\\\n  Stops speech at the specified boundary. Defaults to \"immediate\".\n\n### State Management\n\n- `isSpeaking`: Checks if the synthesizer is speaking or paused.\n- `isPaused`: Checks if the synthesizer is in a paused state.\n\n### Voice Management\n\n- `setVoiceByIdentifier(identifier: string): Promise<boolean>`\\\n  Sets a voice by its identifier.\n\n- `setVoiceByLanguage(language: string): Promise<boolean>`\\\n  Sets a voice by its language code.\n\n***\n\n## Event Listeners\n\n### Supported Events\n\n- `start`: Speech synthesis starts.\n- `pause`: Speech pauses.\n- `continue`: Speech resumes.\n- `finish`: Speech finishes.\n- `cancel`: Speech is canceled.\n- `progress`: Provides progress details (`SpeechProgressDetails`).\n\n### Managing Listeners\n\n- `addListener(event: string, listener: Function): void`\\\n  Adds an event listener.\n\n- `removeListener(event: string, listener: Function): void`\\\n  Removes an event listener.\n\n***\n\n## Examples\n\n### Setup `SharedAudioSession`\n\n```ts\nawait SharedAudioSession.setActive(true)\nawait SharedAudioSession.setCategory(\n  \"playback\",\n  [\"mixWithOthers\"]\n)\n```\n\n### Speak Text\n\n```ts\nawait Speech.speak(\"Hello, world!\")\n```\n\n### Speak with Custom Options\n\n```ts\nawait Speech.speak(\"Welcome to **Scripting**\", {\n  isMarkdown: true,\n  pitch: 1.5,\n  rate: 0.8,\n  voiceLanguage: \"en-US\",\n})\n```\n\n### Synthesize to File\n\n```ts\n\n\nconst filePath = Path.join(FileManager.documentDirectory, \"output.caf\")\nawait Speech.synthesizeToFile(\"Saving to file.\", filePath, { rate: 1.0 })\n```\n\n### Control Playback\n\n```ts\nawait Speech.speak(\"Pausing example...\")\nawait Speech.pause(\"word\")\nawait Speech.resume()\nawait Speech.stop() // Defaults stop \"immediately\".\n```\n\n### Add Progress Listener\n\n```ts\nSpeech.addListener(\"progress\", (details) => {\n  console.log(`Speaking: ${details.word}`)\n});\nawait Speech.speak(\"Event listening example.\")\nSpeech.removeListener(\"progress\", listener)\n```\n","routePath":"/doc/Device Capabilities/Speech/","lang":"en","toc":[{"id":"features-overview","text":"Features Overview","depth":2,"charIndex":287},{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":761},{"id":"speechboundary","text":"`SpeechBoundary`","depth":3,"charIndex":782},{"id":"speechsynthesisvoice","text":"`SpeechSynthesisVoice`","depth":3,"charIndex":949},{"id":"speechprogressdetails","text":"`SpeechProgressDetails`","depth":3,"charIndex":1285},{"id":"speechsynthesisoptions","text":"`SpeechSynthesisOptions`","depth":3,"charIndex":1528},{"id":"static-properties","text":"Static Properties","depth":2,"charIndex":1911},{"id":"global-speech-settings","text":"Global Speech Settings","depth":3,"charIndex":1933},{"id":"voice-and-language","text":"Voice and Language","depth":3,"charIndex":2308},{"id":"audio-session","text":"Audio Session","depth":3,"charIndex":2444},{"id":"methods","text":"Methods","depth":2,"charIndex":2555},{"id":"speaking-and-synthesis","text":"Speaking and Synthesis","depth":3,"charIndex":2567},{"id":"playback-control","text":"Playback Control","depth":3,"charIndex":2885},{"id":"state-management","text":"State Management","depth":3,"charIndex":3216},{"id":"voice-management","text":"Voice Management","depth":3,"charIndex":3366},{"id":"event-listeners","text":"Event Listeners","depth":2,"charIndex":3590},{"id":"supported-events","text":"Supported Events","depth":3,"charIndex":3610},{"id":"managing-listeners","text":"Managing Listeners","depth":3,"charIndex":3853},{"id":"examples","text":"Examples","depth":2,"charIndex":4058},{"id":"setup-sharedaudiosession","text":"Setup `SharedAudioSession`","depth":3,"charIndex":4071},{"id":"speak-text","text":"Speak Text","depth":3,"charIndex":4229},{"id":"speak-with-custom-options","text":"Speak with Custom Options","depth":3,"charIndex":4292},{"id":"synthesize-to-file","text":"Synthesize to File","depth":3,"charIndex":4459},{"id":"control-playback","text":"Control Playback","depth":3,"charIndex":4642},{"id":"add-progress-listener","text":"Add Progress Listener","depth":3,"charIndex":4817}],"frontmatter":{},"version":"","description":"The Speech interface provides a high-level API for text-to-speech (TTS) functionality. This interface allows you to synthesize speech, control playback, and manage speech synthesis settings. Below are the details of the Speech API, its methods, properties, and usage examples."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Speech Example\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n        footer={\n          <Text>Activate the SharedAudioSeesion, and speak a text.</Text>\n        }\n      >\n        <Button\n          title={\"Speak a text\"}\n          action={async () => {\n            console.present()\n            if (await Speech.isSpeaking) {\n              await Speech.stop('immediate')\n              console.log(\"Stopped.\")\n              return\n            }\n\n            await SharedAudioSession.setActive(true)\n            await SharedAudioSession.setCategory('playback', ['mixWithOthers'])\n\n            const listener = () => {\n              console.log(\"Speak completed!\")\n              Speech.removeListener('finish', listener)\n            }\n\n            Speech.addListener('finish', listener)\n\n            await Speech.speak('Hi there, welcome to Scripting! I wish this app is helpful to you.', {\n              voiceLanguage: 'en-US',\n            })\n\n            console.log(\"Started, tap the run button to stop.\")\n          }}\n        />\n      </Section>\n      <Section\n        footer={\n          <Text>Synthesize text to the file stored in local documents directory.</Text>\n        }\n      >\n        <Button\n          title={\"synthesize to File\"}\n          action={async () => {\n            console.present()\n            const filePath = Path.join(FileManager.documentsDirectory, 'greeting.caf')\n            const listener = () => {\n              if (FileManager.existsSync(filePath)) {\n                console.log(\"Audio file is saved to \" + filePath + \". Start to play it.\")\n\n                let player = new AVPlayer()\n                player.setSource(filePath)\n                player.onReadyToPlay = () => {\n                  player.play()\n                }\n                player.onEnded = () => {\n                  player.dispose()\n                }\n              } else {\n                console.log(\"Failed to save audio file.\")\n              }\n              Speech.removeListener('finish', listener)\n            }\n\n            Speech.addListener('finish', listener)\n\n            await Speech.synthesizeToFile(\n              'Hi there, welcome to Scripting! I wish this app is helpful to you.',\n              filePath, {\n              voiceLanguage: 'en-US',\n            })\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/Speech/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"SpeechRecognition","content":"The `SpeechRecognition` interface provides a high-level API for performing speech recognition. It supports real-time speech recognition and recognition of audio files, offering flexibility in a variety of use cases.\n\n***\n\n## Features Overview\n\n- **Real-Time Recognition:** Transcribe live audio from the microphone.\n- **File-Based Recognition:** Analyze and transcribe recorded audio files.\n- **Multi-Language Support:** Specify the recognition locale for different languages.\n- **Intermediate Results:** Access partial and final results for progressive transcription.\n- **Custom Callbacks:** Handle transcription results and sound level changes with event listeners.\n\n***\n\n## Type Definitions\n\n### `RecognitionTaskHint`\n\nHints for the type of task for which speech recognition is used:\n\n- `'confirmation'`: For commands like \"yes,\" \"no,\" or \"maybe.\"\n- `'dictation'`: For tasks similar to keyboard dictation.\n- `'search'`: For identifying search terms.\n- `'unspecified'`: For general-purpose speech recognition.\n\n***\n\n### `SpeechRecognitionResult`\n\nRepresents the result of speech recognition:\n\n- `isFinal`: Indicates if the transcription is complete and final.\n- `text`: The transcription as a user-displayable string, with the highest confidence level.\n\n***\n\n## Static Properties\n\n### Supported Locales\n\n- `supportedLocales`: Returns a list of locales supported by the speech recognizer, such as `\"en-US\"`, `\"fr-FR\"`, or `\"zh-CN\"`.\n\n### Recognition State\n\n- `isRecognizing`: Indicates whether a recognition request is currently active.\n\n***\n\n## Methods\n\n### Start Real-Time Recognition\n\n`start(options: object): Promise<boolean>`\\\nStarts speech recognition from the device microphone.\n\n#### Options\n\n- `locale`: Locale string for the desired language (optional).\n- `partialResults`: Return intermediate results (default: `true`).\n- `addsPunctuation`: Automatically add punctuation to results (default: `false`).\n- `requestOnDeviceRecognition`: Keep audio data on the device (default: `false`).\n- `taskHint`: Specify the recognition task type (`'confirmation'`, `'dictation'`, `'search'`, `'unspecified'`).\n- `useDefaultAudioSessionSettings`: Use default audio session settings (default: `true`).\n- `onResult`: Callback for recognition results (`SpeechRecognitionResult`).\n- `onSoundLevelChanged`: Callback for sound level changes (optional).\n\n#### Example\n\n```ts\nawait SpeechRecognition.start({\n  locale: \"en-US\",\n  partialResults: true,\n  addsPunctuation: true,\n  onResult: (result) => {\n    console.log(\"Transcription:\", result.text)\n  },\n  onSoundLevelChanged: (level) => {\n    console.log(\"Sound Level:\", level)\n  }\n})\n```\n\n***\n\n### Recognize Speech in Audio Files\n\n`recognizeFile(options: object): Promise<boolean>`\\\nStarts recognition for a recorded audio file.\n\n#### Options\n\n- `filePath`: Path to the audio file.\n- `locale`: Locale string for the desired language (optional).\n- `partialResults`: Return intermediate results (default: `false`).\n- `addsPunctuation`: Automatically add punctuation to results (default: `false`).\n- `requestOnDeviceRecognition`: Keep audio data on the device (default: `false`).\n- `taskHint`: Specify the recognition task type (`'confirmation'`, `'dictation'`, `'search'`, `'unspecified'`).\n- `onResult`: Callback for recognition results (`SpeechRecognitionResult`).\n\n#### Example\n\n```ts\nawait SpeechRecognition.recognizeFile({\n  filePath: FileManager.join(FileManager.documentDirectory, \"example.wav\"),\n  locale: \"en-US\",\n  addsPunctuation: true,\n  onResult: (result) => {\n    console.log(\"File Transcription:\", result.text)\n  }\n})\n```\n\n***\n\n### Stop Recognition\n\n`stop(): Promise<void>`\\\nStops an active speech recognition session.\n\n#### Example\n\n```ts\nawait SpeechRecognition.stop()\n```\n\n***\n\n## Examples\n\n### Real-Time Recognition with Progress Updates\n\n```ts\nawait SpeechRecognition.start({\n  locale: \"en-US\",\n  onResult: (result) => {\n    console.log(result.isFinal ? \"Final Result:\" : \"Partial Result:\", result.text)\n  },\n  onSoundLevelChanged: (level) => {\n    console.log(\"Sound Level:\", level)\n  }\n})\n```\n\n### Recognize Audio File\n\n```ts\nawait SpeechRecognition.recognizeFile({\n  filePath: FileManager.join(FileManager.documentDirectory, \"audio.m4a\"),\n  partialResults: false,\n  onResult: (result) => {\n    console.log(\"File recognition completed. Transcription:\", result.text)\n  }\n})\n```\n\n### Stop Active Recognition\n\n```ts\nif (await SpeechRecognition.start({\n  // ...\n})) {\n  // Stop after 10 seconds.\n  setTimeout(() => {\n    await SpeechRecognition.stop()\n  }, 10 * 1000)\n}\n\n```\n\n***\n\n## Notes\n\n- Ensure the necessary microphone or file access permissions are granted before using this API.\n- Use `supportedLocales` to determine available languages for recognition.\n- For optimal performance, use audio files in formats supported by iOS (e.g., `.wav`, `.m4a`).\n","routePath":"/doc/Device Capabilities/SpeechRecognition/","lang":"en","toc":[{"id":"features-overview","text":"Features Overview","depth":2,"charIndex":222},{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":674},{"id":"recognitiontaskhint","text":"`RecognitionTaskHint`","depth":3,"charIndex":695},{"id":"speechrecognitionresult","text":"`SpeechRecognitionResult`","depth":3,"charIndex":1018},{"id":"static-properties","text":"Static Properties","depth":2,"charIndex":1261},{"id":"supported-locales","text":"Supported Locales","depth":3,"charIndex":1283},{"id":"recognition-state","text":"Recognition State","depth":3,"charIndex":1435},{"id":"methods","text":"Methods","depth":2,"charIndex":1544},{"id":"start-real-time-recognition","text":"Start Real-Time Recognition","depth":3,"charIndex":1556},{"id":"options","text":"Options","depth":4,"charIndex":1688},{"id":"example","text":"Example","depth":4,"charIndex":2345},{"id":"recognize-speech-in-audio-files","text":"Recognize Speech in Audio Files","depth":3,"charIndex":2635},{"id":"options-1","text":"Options","depth":4,"charIndex":2771},{"id":"example-1","text":"Example","depth":4,"charIndex":3307},{"id":"stop-recognition","text":"Stop Recognition","depth":3,"charIndex":3582},{"id":"example-2","text":"Example","depth":4,"charIndex":3674},{"id":"examples","text":"Examples","depth":2,"charIndex":3735},{"id":"real-time-recognition-with-progress-updates","text":"Real-Time Recognition with Progress Updates","depth":3,"charIndex":3748},{"id":"recognize-audio-file","text":"Recognize Audio File","depth":3,"charIndex":4055},{"id":"stop-active-recognition","text":"Stop Active Recognition","depth":3,"charIndex":4339},{"id":"notes","text":"Notes","depth":2,"charIndex":4538}],"frontmatter":{},"version":"","description":"The SpeechRecognition interface provides a high-level API for performing speech recognition. It supports real-time speech recognition and recognition of audio files, offering flexibility in a variety of use cases."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"SpeechRecognition\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n        footer={\n          <Text>Returns the list of locales that are supported by the speech recognizer.</Text>\n        }\n      >\n        <Button\n          title={\"SpeechRecognition.supportedLocales\"}\n          action={() => {\n            console.clear()\n            console.present()\n            console.log(JSON.stringify(SpeechRecognition.supportedLocales, null, 2))\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Returns a boolean that indicates whether the recognizer is running.</Text>\n        }\n      >\n        <Button\n          title={\"SpeechRecognition.isRecognizing\"}\n          action={() => {\n            console.clear()\n            console.present()\n            console.log(\n              \"SpeechRecognition.isRecognizing\",\n              SpeechRecognition.isRecognizing\n            )\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Start a speech audio buffer recognition request. Return a boolean value that indicates whether the operation was successfully.</Text>\n        }\n      >\n        <Button\n          title={\"SpeechRecognition.start\"}\n          action={async () => {\n            console.clear()\n            console.present()\n            console.log(\"Speech recognizing is started, it will stop after 5s.\")\n\n            if (await SpeechRecognition.start({\n              locale: \"en-US\",\n              partialResults: false,\n              onResult: result => {\n                console.log(\"Result: \" + result.text)\n              }\n            })) {\n              setTimeout(async () => {\n                await SpeechRecognition.stop()\n                console.log(\"Stoped\")\n              }, 5000)\n            } else {\n              console.error(\"Failed to start recognizing\")\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Start a request to recognize speech in a recorded audio file.</Text>\n        }\n      >\n        <Button\n          title={\"SpeechRecognition.recognizeFile\"}\n          action={async () => {\n            console.clear()\n            console.present()\n            console.log(\"SpeechRecognition is started, it will stop after 5s.\")\n\n            let audioFilePathToRecognize = await DocumentPicker.pickFiles({\n              types: [\"public.audio\"]\n            })\n\n            if (audioFilePathToRecognize.length === 0) {\n              console.log(\"Please pick a audio file.\")\n              return\n            }\n\n            if (await SpeechRecognition.recognizeFile({\n              filePath: audioFilePathToRecognize[0],\n              partialResults: true,\n              onResult: (result) => {\n                console.log(\"Recognized result: \" + result.text)\n              }\n            })) {\n              console.log(\"Started recognizing file...\")\n            } else {\n              console.error(\"Failed to start recognizing\",)\n            }\n          }}\n        />\n      </Section>\n\n      <Section\n        footer={\n          <Text>Stop speech recognition request. Return a boolean value that indicates whether the operation was successfully.</Text>\n        }\n      >\n        <Button\n          title={\"SpeechRecognition.stop\"}\n          action={async () => {\n            if (SpeechRecognition.isRecognizing) {\n              await SpeechRecognition.stop()\n              Dialog.alert({\n                message: \"SpeechRecognition is stopped.\"\n              })\n            } else {\n              Dialog.alert({\n                message: \"No progressing recognition.\"\n              })\n            }\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Device Capabilities/SpeechRecognition/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Translation <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Translation \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `Translation` API enables text translation between different languages. It supports both individual and batch translation use cases and is available on **iOS 18.0 or later**.\n\n## Overview\n\nThe API is exposed as a `Translation` class, which includes:\n\n- A shared singleton instance for global use\n- Methods for translating single or multiple strings\n- Support for automatic language detection based on user preferences\n\n***\n\n## Class: `Translation`\n\n### `Translation.shared: Translation`\n\nProvides a shared singleton instance of the `Translation` class. This is useful in scripts that do not have a UI or need to reuse a common translation host.\n\n#### Example\n\n```ts\nconst translated = await Translation.shared.translate({\n  text: \"Hello, world!\",\n  source: \"en\",\n  target: \"es\"\n})\n\nconsole.log(translated) // Output: \"¡Hola, mundo!\"\n```\n\n***\n\n### Method: `translate(options): Promise<string>`\n\nTranslates a single string from a source language to a target language.\n\n#### Parameters\n\n- `options.text: string`\n  The input string to be translated.\n\n- `options.source?: string`\n  The source language code (e.g., `\"en\"` for English). If omitted or `null`, the translation system will attempt to detect the source language automatically. If detection is ambiguous, the user may be prompted to clarify.\n\n- `options.target?: string`\n  The target language code (e.g., `\"es\"` for Spanish). If omitted or `null`, the system will choose an appropriate target language based on the device’s `Device.preferredLanguages` and the detected source language.\n\n#### Returns\n\n- `Promise<string>` — A promise that resolves to the translated string.\n\n#### Throws\n\n- An error if the translation fails (e.g., network issues, unsupported languages, etc.).\n\n#### Example\n\n```ts\nconst translated = await Translation.shared.translate({\n  text: \"Good morning\",\n  target: \"fr\"\n})\n\nconsole.log(translated) // Output: \"Bonjour\"\n```\n\n***\n\n### Method: `translateBatch(options): Promise<string[]>`\n\nTranslates an array of strings from a source language to a target language.\n\n#### Parameters\n\n- `options.texts: string[]`\n  An array of strings to translate. The order of translations in the result matches the input array.\n\n- `options.source?: string`\n  The source language code. Behaves the same as in the `translate` method.\n\n- `options.target?: string`\n  The target language code. Behaves the same as in the `translate` method.\n\n#### Returns\n\n- `Promise<string[]>` — A promise that resolves to an array of translated strings.\n\n#### Throws\n\n- An error if any part of the batch translation fails.\n\n#### Example\n\n```ts\nconst results = await Translation.shared.translateBatch({\n  texts: [\"Hello\", \"Good night\", \"Thank you\"],\n  source: \"en\",\n  target: \"ja\"\n})\n\nconsole.log(results)\n// Output: [\"こんにちは\", \"おやすみなさい\", \"ありがとう\"]\n```\n\n***\n\n## Notes\n\n- Language codes should follow [ISO 639-1]() format (e.g., `\"en\"`, `\"zh\"`, `\"de\"`, `\"fr\"`).\n\n- This API leverages system-level translation capabilities and may prompt for language disambiguation in certain cases.\n\n- Use the `translationHost` view modifier in the following scenarios:\n\n  - **Interactive Translations in UI Views**\n    When your script presents a user interface (e.g., using `<VStack>`, `<List>`, etc.) and performs translations using a custom `Translation` instance (created via `new Translation()`), you **must** apply `translationHost` to the root view to allow the system to display permission dialogs, language download prompts, or source language selection alerts.\n\n  - **Source Language Is `null`**\n    If you omit the `source` field in your translation request and rely on the system to detect the language, `translationHost` ensures the system can prompt the user if detection fails.\n\n  - **Languages May Need Downloading**\n    If the device does not have the required source or target language installed, `translationHost` enables system prompts to download those languages interactively.\n\n- You do **not** need to set `translationHost` when using the pre-bound `Translation.shared` instance in a headless or background script that does not render a user interface.\n","routePath":"/doc/Device Capabilities/Translation","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":335},{"id":"class-translation","text":"Class: `Translation`","depth":2,"charIndex":583},{"id":"translationshared-translation","text":"`Translation.shared: Translation`","depth":3,"charIndex":608},{"id":"example","text":"Example","depth":4,"charIndex":805},{"id":"method-translateoptions-promisestring","text":"Method: `translate(options): Promise<string>`","depth":3,"charIndex":1002},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1126},{"id":"returns","text":"Returns","depth":4,"charIndex":1701},{"id":"throws","text":"Throws","depth":4,"charIndex":1788},{"id":"example-1","text":"Example","depth":4,"charIndex":1891},{"id":"method-translatebatchoptions-promisestring","text":"Method: `translateBatch(options): Promise<string[]>`","depth":3,"charIndex":2065},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":2200},{"id":"returns-1","text":"Returns","depth":4,"charIndex":2555},{"id":"throws-1","text":"Throws","depth":4,"charIndex":2653},{"id":"example-2","text":"Example","depth":4,"charIndex":2722},{"id":"notes","text":"Notes","depth":2,"charIndex":2954}],"frontmatter":{},"version":"","description":"The Translation API enables text translation between different languages. It supports both individual and batch translation use cases and is available on iOS 18.0 or later."},{"title":"VideoRecorder <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# VideoRecorder \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`VideoRecorder` provides a programmable video recording session in Scripting.\nIt encapsulates camera selection, audio/video capture, encoding, pause/resume handling, zoom, focus, torch control, and final file writing.\n\nThis API is intended for custom camera interfaces, video capture utilities, and automated recording workflows.\n\n***\n\n## Capabilities Overview\n\n- Front and back camera support\n- Explicit camera type selection (wide, ultra-wide, telephoto, etc.)\n- Multiple frame rates (24 / 30 / 60 / 120)\n- Optional audio recording\n- Multiple system capture session presets\n- Multiple video codecs (HEVC / H.264 / ProRes, etc.)\n- Pause and resume during recording\n- Independent focus and exposure control\n- Zoom and smooth zoom (ramp) control\n- Torch (flashlight) control\n- Deterministic state machine with callbacks\n- Explicit lifecycle management (`prepare / reset / dispose`)\n\n***\n\n## Type Definitions\n\n### CameraPosition\n\n```ts\ntype CameraPosition = \"front\" | \"back\"\n```\n\nRepresents the physical camera position.\n\n***\n\n### CameraType\n\n```ts\ntype CameraType =\n  | \"wide\"\n  | \"ultraWide\"\n  | \"telephoto\"\n  | \"trueDepth\"\n  | \"dual\"\n  | \"dualWide\"\n  | \"triple\"\n```\n\nRepresents the physical camera device type.\nAvailability depends on the device hardware.\n\n***\n\n### VideoRecorderState\n\n```ts\ntype VideoRecorderState =\n  | \"idle\"\n  | \"preparing\"\n  | \"ready\"\n  | \"recording\"\n  | \"paused\"\n  | \"finishing\"\n  | \"finished\"\n  | \"failed\"\n```\n\n#### State Semantics\n\n| State       | Meaning                                               |\n| ----------- | ----------------------------------------------------- |\n| `idle`      | Initial state, no resources configured                |\n| `preparing` | Camera session and pipelines are being configured     |\n| `ready`     | Recorder is ready to start recording                  |\n| `recording` | Recording is in progress                              |\n| `paused`    | Recording is paused                                   |\n| `finishing` | Recording is stopping and file writing is in progress |\n| `finished`  | Recording completed successfully                      |\n| `failed`    | An error occurred                                     |\n\n***\n\n### VideoCaptureSessionPreset\n\n```ts\ntype VideoCaptureSessionPreset =\n  | \"high\"\n  | \"medium\"\n  | \"low\"\n  | \"cif352x288\"\n  | \"vga640x480\"\n  | \"iFrame960x540\"\n  | \"iFrame1280x720\"\n  | \"hd1280x720\"\n  | \"hd1920x1080\"\n  | \"hd4K3840x2160\"\n```\n\nDefines the capture session resolution preset.\n\n***\n\n### VideoCodec\n\n```ts\ntype VideoCodec =\n  | \"hevc\"\n  | \"h264\"\n  | \"jpeg\"\n  | \"JPEGXL\"\n  | \"proRes4444\"\n  | \"appleProRes4444XQ\"\n  | \"proRes422\"\n  | \"proRes422HQ\"\n  | \"proRes422LT\"\n  | \"proRes422Proxy\"\n  | \"proResRAW\"\n  | \"proResRAWHQ\"\n  | \"hevcWithAlpha\"\n```\n\nSpecifies the video encoding format.\nActual availability depends on system and hardware support.\n\n***\n\n### VideoOrientation\n\n```ts\ntype VideoOrientation =\n  | \"portrait\"\n  | \"landscapeLeft\"\n  | \"landscapeRight\"\n```\n\nSpecifies the output video orientation.\n\n***\n\n## Constructor\n\n```ts\nnew VideoRecorder(settings?)\n```\n\n### settings\n\n```ts\n{\n  camera?: {\n    position: CameraPosition\n    preferredTypes?: CameraType[]\n  }\n  frameRate?: number\n  audioEnabled?: boolean\n  sessionPreset?: VideoCaptureSessionPreset\n  videoCodec?: VideoCodec\n  videoBitRate?: number\n  orientation?: VideoOrientation\n  mirrorFrontCamera?: boolean\n}\n```\n\n#### Parameter Details\n\n- **camera**\n\n  - `position`\n    Camera position. Defaults to `\"back\"`.\n  - `preferredTypes`\n    Preferred camera device types.\n    If omitted, a suitable device is selected automatically based on position.\n\n- **frameRate**\n  Target frame rate. Supported values: 24, 30, 60, 120.\n  Defaults to 30. Actual frame rate depends on device capability.\n\n- **audioEnabled**\n  Indicates whether audio is recorded. Defaults to `true`.\n\n- **sessionPreset**\n  Capture session resolution preset. Defaults to `\"high\"`.\n\n- **videoCodec**\n  Video encoding format. Defaults to `\"hevc\"`.\n\n- **videoBitRate**\n  Average video bit rate in bits per second.\n  If omitted, the system selects an appropriate value.\n\n- **orientation**\n  Output video orientation. Defaults to `\"portrait\"`.\n\n- **mirrorFrontCamera**\n  Indicates whether the front camera output is mirrored.\n  Defaults to `true`. Only applies to the front camera.\n\n***\n\n## Read-Only Properties\n\n### minZoomFactor\n\n```ts\nreadonly minZoomFactor: number\n```\n\nMinimum supported zoom factor for the active device.\n\n***\n\n### maxZoomFactor\n\n```ts\nreadonly maxZoomFactor: number\n```\n\nMaximum supported zoom factor for the active device.\n\n***\n\n### currentZoomFactor\n\n```ts\nreadonly currentZoomFactor: number\n```\n\nCurrent zoom factor.\n\n***\n\n### displayZoomFactor\n\n```ts\nreadonly displayZoomFactor: number\n```\n\nZoom factor displayed to the user.\n\n***\n\n### hasTorch\n\n```ts\nreadonly hasTorch: boolean\n```\n\nIndicates whether the active camera supports a torch.\n\n***\n\n### torchMode\n\n```ts\nreadonly torchMode: \"auto\" | \"on\" | \"off\"\n```\n\nCurrent torch mode.\n\n***\n\n## State and Callbacks\n\n### state\n\n```ts\nstate: VideoRecorderState\n```\n\nRepresents the current state of the recorder.\n\n***\n\n### onStateChanged\n\n```ts\nonStateChanged?: (\n  state: VideoRecorderState,\n  details?: string\n) => void\n```\n\nInvoked whenever the recorder state changes.\n\n- When `state === \"failed\"`\n  `details` contains an error description.\n\n- When `state === \"finished\"`\n  `details` contains the full output file path.\n\n***\n\n## Methods\n\n### prepare()\n\n```ts\nprepare(): Promise<void>\n```\n\nPrepares the recorder by configuring the camera session and audio/video pipelines.\n\n#### Usage Constraints\n\n- Must be called before `startRecording`\n- Transitions state to `ready` on success\n- Transitions to `failed` on error\n\n***\n\n### startRecording(toPath)\n\n```ts\nstartRecording(toPath: string): void\n```\n\nStarts video recording.\n\n#### Parameters\n\n- **toPath**\n  Full file path where the video will be saved.\n\n#### Usage Constraints\n\n- Only valid in the `ready` state\n- Transitions state to `recording`\n\n***\n\n### pauseRecording()\n\n```ts\npauseRecording(): void\n```\n\nPauses the ongoing recording.\n\n#### Usage Constraints\n\n- Only valid in the `recording` state\n- Transitions state to `paused`\n- Timeline is compacted without introducing blank segments\n\n***\n\n### resumeRecording()\n\n```ts\nresumeRecording(): void\n```\n\nResumes a paused recording.\n\n#### Usage Constraints\n\n- Only valid in the `paused` state\n- Transitions state back to `recording`\n\n***\n\n### stopRecording()\n\n```ts\nstopRecording(): Promise<void>\n```\n\nStops recording and finalizes the output file.\n\n#### Behavior\n\n- Transitions state to `finishing`\n- Transitions to `finished` after file writing completes\n- Final file path is delivered via `onStateChanged`\n\n***\n\n### reset()\n\n```ts\nreset(): Promise<void>\n```\n\nResets the recorder state to allow a new recording session.\n\n#### Intended Use\n\n- After a completed recording\n- After a failed recording\n\n#### Behavior\n\n- Transitions state back to `idle`\n- `prepare` may be called again\n\n***\n\n### setTorchMode()\n\n```ts\nsetTorchMode(mode: \"auto\" | \"off\" | \"on\"): void\n```\n\nSets the torch mode for the active camera.\n\n***\n\n### setFocusPoint()\n\n```ts\nsetFocusPoint(point: { x: number; y: number }): void\n```\n\nSets the focus point.\n\n- Coordinates are normalized in the range `0.0 ~ 1.0`\n- `(0,0)` represents the top-left corner\n- `(1,1)` represents the bottom-right corner\n\n***\n\n### setExposurePoint()\n\n```ts\nsetExposurePoint(point: { x: number; y: number }): void\n```\n\nSets the exposure point using the same coordinate system as focus.\n\n***\n\n### resetFocus()\n\n```ts\nresetFocus(): void\n```\n\nRestores automatic focus mode.\n\n***\n\n### resetExposure()\n\n```ts\nresetExposure(): void\n```\n\nRestores automatic exposure mode.\n\n***\n\n### setZoomFactor()\n\n```ts\nsetZoomFactor(factor: number): void\n```\n\nImmediately sets the zoom factor.\n\n- Value must be within `minZoomFactor` and `maxZoomFactor`\n\n***\n\n### rampZoomFactor()\n\n```ts\nrampZoomFactor(toFactor: number, rate: number): void\n```\n\nSmoothly transitions the zoom factor.\n\n- `toFactor` specifies the target zoom factor\n- `rate` specifies the transition speed in powers of two per second\n\n***\n\n### resetZoom()\n\n```ts\nresetZoom(): void\n```\n\nResets the zoom factor to the default value (typically `1.0`).\n\n***\n\n### dispose()\n\n```ts\ndispose(): Promise<void>\n```\n\nReleases all resources and destroys the recorder.\n\n#### Usage Constraints\n\n- The instance cannot be used after disposal\n- Releases camera, audio, and system resources\n- Should be called when the recording lifecycle ends\n\n***\n\n## Typical Usage Flow\n\n```ts\nconst recorder = new VideoRecorder({\n  camera: { position: \"back\" },\n  frameRate: 60,\n  videoCodec: \"hevc\"\n})\n\nrecorder.onStateChanged = (state, details) => {\n  if (state === \"finished\") {\n    console.log(\"Video saved at:\", details)\n  }\n}\n\nawait recorder.prepare()\nrecorder.startRecording(\"/path/to/tmp/demo.mov\")\n```\n\n***\n\n## Usage Guidelines\n\n- Always observe `onStateChanged` to track state transitions\n- Do not start recording before calling `prepare`\n- Call `reset` before reusing the same instance for another recording\n- Call `dispose` when the recorder is no longer needed\n","routePath":"/doc/Device Capabilities/VideoRecorder","lang":"en","toc":[{"id":"capabilities-overview","text":"Capabilities Overview","depth":2,"charIndex":493},{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":1044},{"id":"cameraposition","text":"CameraPosition","depth":3,"charIndex":1065},{"id":"cameratype","text":"CameraType","depth":3,"charIndex":1182},{"id":"videorecorderstate","text":"VideoRecorderState","depth":3,"charIndex":1420},{"id":"state-semantics","text":"State Semantics","depth":4,"charIndex":1593},{"id":"videocapturesessionpreset","text":"VideoCaptureSessionPreset","depth":3,"charIndex":2341},{"id":"videocodec","text":"VideoCodec","depth":3,"charIndex":2633},{"id":"videoorientation","text":"VideoOrientation","depth":3,"charIndex":2995},{"id":"constructor","text":"Constructor","depth":2,"charIndex":3154},{"id":"settings","text":"settings","depth":3,"charIndex":3210},{"id":"parameter-details","text":"Parameter Details","depth":4,"charIndex":3522},{"id":"read-only-properties","text":"Read-Only Properties","depth":2,"charIndex":4453},{"id":"minzoomfactor","text":"minZoomFactor","depth":3,"charIndex":4478},{"id":"maxzoomfactor","text":"maxZoomFactor","depth":3,"charIndex":4598},{"id":"currentzoomfactor","text":"currentZoomFactor","depth":3,"charIndex":4718},{"id":"displayzoomfactor","text":"displayZoomFactor","depth":3,"charIndex":4814},{"id":"hastorch","text":"hasTorch","depth":3,"charIndex":4924},{"id":"torchmode","text":"torchMode","depth":3,"charIndex":5036},{"id":"state-and-callbacks","text":"State and Callbacks","depth":2,"charIndex":5130},{"id":"state","text":"state","depth":3,"charIndex":5154},{"id":"onstatechanged","text":"onStateChanged","depth":3,"charIndex":5254},{"id":"methods","text":"Methods","depth":2,"charIndex":5564},{"id":"prepare","text":"prepare()","depth":3,"charIndex":5576},{"id":"usage-constraints","text":"Usage Constraints","depth":4,"charIndex":5711},{"id":"startrecordingtopath","text":"startRecording(toPath)","depth":3,"charIndex":5859},{"id":"parameters","text":"Parameters","depth":4,"charIndex":5960},{"id":"usage-constraints-1","text":"Usage Constraints","depth":4,"charIndex":6039},{"id":"pauserecording","text":"pauseRecording()","depth":3,"charIndex":6138},{"id":"usage-constraints-2","text":"Usage Constraints","depth":4,"charIndex":6225},{"id":"resumerecording","text":"resumeRecording()","depth":3,"charIndex":6384},{"id":"usage-constraints-3","text":"Usage Constraints","depth":4,"charIndex":6471},{"id":"stoprecording","text":"stopRecording()","depth":3,"charIndex":6576},{"id":"behavior","text":"Behavior","depth":4,"charIndex":6687},{"id":"reset","text":"reset()","depth":3,"charIndex":6852},{"id":"intended-use","text":"Intended Use","depth":4,"charIndex":6960},{"id":"behavior-1","text":"Behavior","depth":4,"charIndex":7037},{"id":"settorchmode","text":"setTorchMode()","depth":3,"charIndex":7125},{"id":"setfocuspoint","text":"setFocusPoint()","depth":3,"charIndex":7253},{"id":"setexposurepoint","text":"setExposurePoint()","depth":3,"charIndex":7507},{"id":"resetfocus","text":"resetFocus()","depth":3,"charIndex":7671},{"id":"resetexposure","text":"resetExposure()","depth":3,"charIndex":7756},{"id":"setzoomfactor","text":"setZoomFactor()","depth":3,"charIndex":7850},{"id":"rampzoomfactor","text":"rampZoomFactor()","depth":3,"charIndex":8018},{"id":"resetzoom","text":"resetZoom()","depth":3,"charIndex":8263},{"id":"dispose","text":"dispose()","depth":3,"charIndex":8378},{"id":"usage-constraints-4","text":"Usage Constraints","depth":4,"charIndex":8480},{"id":"typical-usage-flow","text":"Typical Usage Flow","depth":2,"charIndex":8655},{"id":"usage-guidelines","text":"Usage Guidelines","depth":2,"charIndex":9008}],"frontmatter":{},"version":"","description":"VideoRecorder provides a programmable video recording session in Scripting.\nIt encapsulates camera selection, audio/video capture, encoding, pause/resume handling, zoom, focus, torch control, and final file writing. This API is intended for custom camera interfaces, video capture utilities, and automated recording workflows."},{"title":"Vision","content":"The `Vision` module provides APIs for **text recognition** tasks.\\\nIt supports recognizing text from static images or by scanning documents using the camera.\n\n***\n\n## Types\n\n### `RecognizedText`\n\nRepresents a block of recognized text.\n\n- `content: string`\\\n  The recognized text content.\n\n- `confidence: number`\\\n  Confidence level (between `0.0` and `1.0`) where `1.0` indicates the highest confidence.\n\n- `boundingBox: { x: number, y: number, width: number, height: number }`\\\n  The bounding box of the recognized text in normalized coordinates.\n\n***\n\n### `RecognizeTextOptions`\n\nConfiguration options for text recognition.\n\n- `recognitionLevel?: \"accurate\" | \"fast\"`\\\n  Recognition mode:\n  - `\"accurate\"` (default): Prioritizes accuracy.\n  - `\"fast\"`: Prioritizes speed.\n\n- `recognitionLanguages?: string[]`\\\n  Preferred recognition languages in ISO language codes, in priority order.\n\n- `usesLanguageCorrection?: boolean`\\\n  Whether to apply automatic language correction during recognition.\n\n- `minimumTextHeight?: number`\\\n  Minimum text height to recognize, relative to image height (default `0.03125`).\n\n- `customWords?: string[]`\\\n  Custom vocabulary to prioritize during word recognition. Only effective when `usesLanguageCorrection` is `true`.\n\n***\n\n## Functions\n\n### `recognizeText(image: UIImage, options?: RecognizeTextOptions): Promise<{ text: string, candidates: RecognizedText[] }>`\n\nRecognizes text from the provided image.\n\n- **Parameters**:\n  - `image`: A `UIImage` object.\n  - `options` *(optional)*: Recognition options.\n\n- **Returns**:\\\n  A Promise resolving with:\n  - `text`: All recognized text combined into a single string.\n  - `candidates`: Array of recognized text blocks with details.\n\n***\n\n### `scanDocument(options?: RecognizeTextOptions): Promise<string[]>`\n\nScans a document using the device's camera and recognizes text.\n\n- **Parameters**:\n  - `options` *(optional)*: Recognition options.\n\n- **Returns**:\\\n  A Promise resolving with an array of recognized text documents.\\\n  If the user cancels, the Promise rejects with an error.\n\n***\n\n## Usage Examples\n\n### Recognize text from an image file\n\n```tsx\nconst image = UIImage.fromFile('/path/to/image.png')\nif (image) {\n  const result = await Vision.recognizeText(image, {\n    recognitionLevel: 'accurate',\n    recognitionLanguages: ['en', 'zh-Hans'],\n    usesLanguageCorrection: true\n  })\n  console.log('Recognized Text:', result.text)\n\n  for (const block of result.candidates) {\n    console.log(`Text: ${block.content}, Confidence: ${block.confidence}`)\n  }\n}\n```\n\n***\n\n### Scan a document with camera\n\n```tsx\ntry {\n  const documents = await Vision.scanDocument({\n    recognitionLevel: 'fast',\n    recognitionLanguages: ['en']\n  })\n  console.log('Scanned Documents:', documents)\n} catch (error) {\n  console.error('Scan cancelled or failed:', error)\n}\n```\n","routePath":"/doc/Device Capabilities/Vision","lang":"en","toc":[{"id":"types","text":"Types","depth":2,"charIndex":164},{"id":"recognizedtext","text":"`RecognizedText`","depth":3,"charIndex":174},{"id":"recognizetextoptions","text":"`RecognizeTextOptions`","depth":3,"charIndex":554},{"id":"functions","text":"Functions","depth":2,"charIndex":1261},{"id":"recognizetextimage-uiimage-options-recognizetextoptions-promise-text-string-candidates-recognizedtext-","text":"`recognizeText(image: UIImage, options?: RecognizeTextOptions): Promise<{ text: string, candidates: RecognizedText[] }>`","depth":3,"charIndex":1275},{"id":"scandocumentoptions-recognizetextoptions-promisestring","text":"`scanDocument(options?: RecognizeTextOptions): Promise<string[]>`","depth":3,"charIndex":1721},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":2072},{"id":"recognize-text-from-an-image-file","text":"Recognize text from an image file","depth":3,"charIndex":2091},{"id":"scan-a-document-with-camera","text":"Scan a document with camera","depth":3,"charIndex":2555}],"frontmatter":{},"version":"","description":"The Vision module provides APIs for text recognition tasks.It supports recognizing text from static images or by scanning documents using the camera."},{"title":"Weather","content":"The Weather API in Scripting provides access to real-time and forecast weather data, including current conditions, hourly forecasts, and daily forecasts. This API allows users to fetch weather details such as temperature, wind speed, humidity, and precipitation for a specified location.\n\n## Types\n\n### `UnitType`\n\nRepresents a unit of measurement with its value, symbol, and formatted string.\n\n```ts\ntype UnitType = {\n  value: number\n  symbol: string\n  formatted: string\n}\n```\n\n### `UnitTemperature`, `UnitSpeed`, `UnitLength`, `UnitAngle`, `UnitPressure`\n\nThese types extend `UnitType` to represent temperature, speed, length, angle, and pressure.\n\n## `WeatherCondition`\n\nA string enum describing various weather conditions, including:\n\n- `clear`\n- `rain`\n- `snow`\n- `thunderstorms`\n- `cloudy`\n- `windy`\n- ...\n\n## Functions\n\n### `Weather.requestCurrent(location: LocationInfo): Promise<CurrentWeather>`\n\nRetrieves the current weather conditions for a given location.\n\n#### Parameters\n\n- `location: LocationInfo` – The location for which weather data is requested.\n\n#### Returns\n\nA `Promise` resolving to a `CurrentWeather` object.\n\n#### Example\n\n```ts\nconst location = { latitude: 37.7749, longitude: -122.4194 }\nconst weather = await Weather.requestCurrent(location)\nconsole.log(`Current temperature: ${weather.temperature.formatted}`)\n```\n\n### `Weather.requestDailyForecast(location: LocationInfo, options?: { startDate: Date, endDate: Date }): Promise<WeatherDailyForecast>`\n\nRetrieves the daily weather forecast for the specified location. You can optionally provide a start and end date to specify the forecast range.\n\n#### Parameters\n\n- `location: LocationInfo` – The location to query.\n- `options.startDate` – The start date for the forecast.\n- `options.endDate` – The end date for the forecast.\n\n#### Returns\n\nA `Promise` resolving to a `WeatherDailyForecast` object.\n\n#### Example\n\n```ts\nconst forecast = await Weather.requestDailyForecast(location, {\n  startDate: new Date(),\n  endDate: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000)\n})\nconsole.log(`Tomorrow's weather: ${forecast.forecast[1].condition}`)\n```\n\n### `Weather.requestHourlyForecast(location: LocationInfo, options?: { startDate: Date, endDate: Date }): Promise<WeatherHourlyForecast>`\n\nRetrieves the hourly weather forecast for the specified location. You can optionally provide a start and end date to specify the forecast range.\n\n#### Parameters\n\n- `location: LocationInfo` – The location to query.\n- `options.startDate` – The start date for the forecast.\n- `options.endDate` – The end date for the forecast.\n\n#### Returns\n\nA `Promise` resolving to a `WeatherHourlyForecast` object.\n\n#### Example\n\n```ts\nconst hourlyForecast = await Weather.requestHourlyForecast(location, {\n  startDate: new Date(),\n  endDate: new Date(Date.now() + 3 * 60 * 60 * 1000)\n})\nconsole.log(`Next hour's temperature: ${hourlyForecast.forecast[0].temperature.formatted}`)\n```\n\n## `CurrentWeather`\n\nRepresents the current weather conditions.\n\n```ts\ntype CurrentWeather = {\n  temperature: UnitTemperature\n  apparentTemperature: UnitTemperature\n  humidity: number\n  wind: WeatherWind\n  condition: WeatherCondition\n  date: number\n  symbolName: string\n}\n```\n\n## `WeatherDailyForecast`\n\nRepresents the daily forecast.\n\n```ts\ntype WeatherDailyForecast = {\n  metadata: WeatherMetadata\n  forecast: DayWeather[]\n}\n```\n\n## `WeatherHourlyForecast`\n\nRepresents the hourly forecast.\n\n```ts\ntype WeatherHourlyForecast = {\n  metadata: WeatherMetadata\n  forecast: HourWeather[]\n}\n```\n\n## `DayWeather`\n\nRepresents daily weather details.\n\n```ts\ntype DayWeather = {\n  highTemperature: UnitTemperature\n  lowTemperature: UnitTemperature\n  wind: WeatherWind\n  condition: WeatherCondition\n  date: number\n  symbolName: string\n}\n```\n\n## `HourWeather`\n\nRepresents hourly weather details.\n\n```ts\ntype HourWeather = {\n  temperature: UnitTemperature\n  humidity: number\n  wind: WeatherWind\n  condition: WeatherCondition\n  date: number\n  symbolName: string\n}\n```\n\n## Example Usage\n\n### Fetch and Display Current Weather\n\n```ts\nasync function displayCurrentWeather() {\n  const location = { latitude: 37.7749, longitude: -122.4194 }\n  const weather = await Weather.requestCurrent(location)\n  console.log(`The temperature is ${weather.temperature.formatted} with ${weather.condition}`)\n}\n\ndisplayCurrentWeather()\n```\n\n### Fetch and Display Daily Forecast\n\n```ts\nasync function displayDailyForecast() {\n  const location = { latitude: 37.7749, longitude: -122.4194 }\n  const forecast = await Weather.requestDailyForecast(location, {\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000)\n  })\n  forecast.forecast.forEach(day => {\n    console.log(`Date: ${new Date(day.date).toDateString()}, Condition: ${day.condition}`)\n  })\n}\n\ndisplayDailyForecast()\n```\n\n### Fetch and Display Hourly Forecast\n\n```ts\nasync function displayHourlyForecast() {\n  const location = { latitude: 37.7749, longitude: -122.4194 }\n  const hourlyForecast = await Weather.requestHourlyForecast(location, {\n    startDate: new Date(),\n    endDate: new Date(Date.now() + 5 * 60 * 60 * 1000)\n  })\n  hourlyForecast.forecast.forEach(hour => {\n    console.log(`Time: ${new Date(hour.date).toLocaleTimeString()}, Temp: ${hour.temperature.formatted}`)\n  })\n}\n\ndisplayHourlyForecast()\n```\n","routePath":"/doc/Device Capabilities/Weather/","lang":"en","toc":[{"id":"types","text":"Types","depth":2,"charIndex":289},{"id":"unittype","text":"`UnitType`","depth":3,"charIndex":299},{"id":"unittemperature-unitspeed-unitlength-unitangle-unitpressure","text":"`UnitTemperature`, `UnitSpeed`, `UnitLength`, `UnitAngle`, `UnitPressure`","depth":3,"charIndex":479},{"id":"weathercondition","text":"`WeatherCondition`","depth":2,"charIndex":651},{"id":"functions","text":"Functions","depth":2,"charIndex":813},{"id":"weatherrequestcurrentlocation-locationinfo-promisecurrentweather","text":"`Weather.requestCurrent(location: LocationInfo): Promise<CurrentWeather>`","depth":3,"charIndex":827},{"id":"parameters","text":"Parameters","depth":4,"charIndex":970},{"id":"returns","text":"Returns","depth":4,"charIndex":1067},{"id":"example","text":"Example","depth":4,"charIndex":1134},{"id":"weatherrequestdailyforecastlocation-locationinfo-options--startdate-date-enddate-date--promiseweatherdailyforecast","text":"`Weather.requestDailyForecast(location: LocationInfo, options?: { startDate: Date, endDate: Date }): Promise<WeatherDailyForecast>`","depth":3,"charIndex":1344},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":1626},{"id":"returns-1","text":"Returns","depth":4,"charIndex":1806},{"id":"example-1","text":"Example","depth":4,"charIndex":1879},{"id":"weatherrequesthourlyforecastlocation-locationinfo-options--startdate-date-enddate-date--promiseweatherhourlyforecast","text":"`Weather.requestHourlyForecast(location: LocationInfo, options?: { startDate: Date, endDate: Date }): Promise<WeatherHourlyForecast>`","depth":3,"charIndex":2123},{"id":"parameters-2","text":"Parameters","depth":4,"charIndex":2408},{"id":"returns-2","text":"Returns","depth":4,"charIndex":2588},{"id":"example-2","text":"Example","depth":4,"charIndex":2662},{"id":"currentweather","text":"`CurrentWeather`","depth":2,"charIndex":2931},{"id":"weatherdailyforecast","text":"`WeatherDailyForecast`","depth":2,"charIndex":3208},{"id":"weatherhourlyforecast","text":"`WeatherHourlyForecast`","depth":2,"charIndex":3363},{"id":"dayweather","text":"`DayWeather`","depth":2,"charIndex":3522},{"id":"hourweather","text":"`HourWeather`","depth":2,"charIndex":3762},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":3986},{"id":"fetch-and-display-current-weather","text":"Fetch and Display Current Weather","depth":3,"charIndex":4004},{"id":"fetch-and-display-daily-forecast","text":"Fetch and Display Daily Forecast","depth":3,"charIndex":4337},{"id":"fetch-and-display-hourly-forecast","text":"Fetch and Display Hourly Forecast","depth":3,"charIndex":4806}],"frontmatter":{},"version":"","description":"The Weather API in Scripting provides access to real-time and forecast weather data, including current conditions, hourly forecasts, and daily forecasts. This API allows users to fetch weather details such as temperature, wind speed, humidity, and precipitation for a specified location."},{"title":"Example","content":"```tsx\n\n\nconsole.present().then(() => {\n  Script.exit()\n})\n\nconsole.log(\"Requesting Current Weather...\")\n\nasync function displayCurrentWeather() {\n  let location: LocationInfo | null = null\n  try {\n    console.log(\"Requesting location... Please move your device to trigger a location update.\")\n    location = await Location.requestCurrent()\n\n    if (location) {\n      const placemarks = await Location.reverseGeocode(location)\n      if (placemarks && placemarks.length) {\n        console.log(`Your current location: ${JSON.stringify(placemarks[0], null, 2)}`)\n      }\n    }\n  } catch (e) {\n    console.log(\"Failed to request location\", e)\n  }\n\n  if (!location) {\n    console.error(\"Please approval the location permission request\")\n    return\n  }\n\n  // Use the WeatherKit\n  const weather = await Weather.requestCurrent(\n    location\n  )\n\n  console.log(\n    `The temperature is ${weather.temperature.formatted\n    } with ${weather.condition}`\n  )\n}\n\ndisplayCurrentWeather()\n```\n","routePath":"/doc/Device Capabilities/Weather/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"WebViewController","content":"The `WebViewController` class allows you to display and interact with embedded web content inside your script. It is designed for use cases like custom in-app browsers, rendering dynamic HTML, or communicating with JavaScript running in a web context.\n\n***\n\n## Class: `WebViewController`\n\n```ts\nconst webView = new WebViewController()\n```\n\n***\n\n## Properties\n\n### `shouldAllowRequest?: (request) => Promise<boolean>`\n\nAn optional callback that determines whether to allow or block a request made by the WebView. This function is invoked before each resource is loaded, such as when navigating to a new page or submitting a form.\n\nThis is useful for intercepting navigation actions, implementing custom security logic, or filtering unwanted requests (e.g., ad domains).\n\n#### Parameters\n\nThe function receives a single `request` object with the following properties:\n\n- `url: string`\n  The full URL of the request.\n\n- `method: string`\n  The HTTP method (e.g., `GET`, `POST`).\n\n- `body?: Data | null`\n  Optional body data sent with the request (e.g., for `POST` requests).\n\n- `headers: Record<string, string>`\n  HTTP request headers.\n\n- `timeoutInterval: number`\n  The timeout interval in seconds for the request.\n\n- `navigationType: \"linkActivated\" | \"reload\" | \"backForward\" | \"formResubmitted\" | \"formSubmitted\" | \"other\"`\n  The context that triggered the navigation.\n\n#### Returns\n\nA `Promise<boolean>` resolving to:\n\n- `true`: allow the request to proceed\n- `false`: block the request\n\n#### Example\n\n```ts\nconst webView = new WebViewController()\n\nwebView.shouldAllowRequest = async (request) => {\n  console.log('Intercepted request to:', request.url)\n\n  // Block all requests to example.com\n  if (request.url.includes('example.com')) {\n    return false\n  }\n\n  return true\n}\n\nawait webView.loadURL('https://www.wikipedia.org')\nawait webView.present({ navigationTitle: 'Filtered WebView' })\n```\n\n***\n\n## Methods\n\n### `loadFile(path: string, allowingReadAccessTo?: string): Promise<boolean>`\n\nLoads a web page from a local file.\n\n- **Parameters**:\n\n  - `path`: The path to the local file.\n  - `allowingReadAccessTo` (optional): A directory to allow read access to.\n- **Returns**: `Promise<boolean>` — Resolves to `true` if the load succeeds.\n\n### `loadURL(url: string): Promise<boolean>`\n\nLoads a webpage by its URL.\n\n- **Parameters**:\n\n  - `url`: The full URL of the webpage to load.\n- **Returns**: `Promise<boolean>` — Resolves to `true` if the load succeeds.\n\n***\n\n### `loadHTML(html: string, baseURL?: string): Promise<boolean>`\n\nLoads a web page using raw HTML content.\n\n- **Parameters**:\n\n  - `html`: The HTML string to render.\n  - `baseURL` (optional): A base URL to resolve relative paths.\n- **Returns**: `Promise<boolean>` — Resolves to `true` on successful load.\n\n***\n\n### `loadData(data: Data, mimeType: string, encoding: string, baseURL: string): Promise<boolean>`\n\nLoads web content from raw data.\n\n- **Parameters**:\n\n  - `data`: The binary content to load.\n  - `mimeType`: MIME type of the content (e.g., `\"text/html\"`).\n  - `encoding`: Character encoding (e.g., `\"utf-8\"`).\n  - `baseURL`: Base URL for resolving relative URLs.\n- **Returns**: `Promise<boolean>`\n\n***\n\n### `waitForLoad(): Promise<boolean>`\n\nWaits until the WebView has finished loading content.\n\n- **Returns**: `Promise<boolean>`\n\n***\n\n### `getHTML(): Promise<string | null>`\n\nReturns the current HTML content of the page.\n\n- **Returns**: `Promise<string | null>`\n\n***\n\n### `evaluateJavaScript<T = any>(javascript: string): Promise<T>`\n\nEvaluates the specified JavaScript string in the context of the WebView.\n\n- **Parameters**:\n\n  - `javascript`: A JavaScript code string to be evaluated.\n    To retrieve a result from JavaScript, the code must explicitly use the `return` keyword.\n- **Returns**: `Promise<T>` — Resolves with the result of the JavaScript evaluation. If the JavaScript code returns a value, it will be returned as the resolved value of the Promise.\n\n#### Example\n\n```ts\nconst webView = new WebViewController()\nawait webView.loadURL(\"https://example.com\")\nconst title = await webView.evaluateJavaScript(\"return document.title\") // Must use `return`\nconsole.log(title) // \"Example Domain\"\nwebView.dispose()\n```\n\nAnother example:\n\n```ts\nconst webView = new WebViewController()\nawait webView.loadHTML(`\n  <html>\n    <body>\n      <script>\n        window.myValue = 42\n      </script>\n    </body>\n  </html>\n`)\n\nawait webView.waitForLoad()\n\nconst result = await webView.evaluateJavaScript('return window.myValue')\nconsole.log(result) // 42\n```\n\n***\n\n### `addScriptMessageHandler<P = any, R = any>(name: string, handler: (params?: P) => R): Promise<void>`\n\nInstalls a message handler callable from JavaScript in the web page, and enables sending a reply back from native code.\n\n- **Parameters**:\n\n  - `name`: The message handler name. Must be unique and non-empty.\n  - `handler`: A callback function that receives parameters from JavaScript and returns a value. The return value will be sent back as the JavaScript promise resolution.\n\n- **Returns**: `Promise<void>` — Resolves when the message handler is added successfully.\n\n#### Example\n\n```ts\nlet webView = new WebViewController()\n\nawait webView.addScriptMessageHandler(\"sayHi\", (greeting: string) => {\n  console.log(\"Receive a message\", greeting)\n  return \"Hello!\"\n})\n\nawait webView.loadHTML(`\n  <html>\n    <body>\n      <script>\n        (async () => {\n          const response = await window.webkit.messageHandlers.sayHi.postMessage(\"Hi!\")\n          alert(response) // Shows: \"Hello!\"\n        })()\n      </script>\n    </body>\n  </html>\n`)\n```\n\n***\n\n### `present(options?: { fullscreen?: boolean, navigationTitle?: string }): Promise<void>`\n\nPresents the WebView in a modal sheet.\n\n- **Options**:\n\n  - `fullscreen`: If `true`, displays the WebView in fullscreen mode.\n  - `navigationTitle`: Optional title for the navigation bar.\n- **Returns**: `Promise<void>`\n\n***\n\n### `canGoBack(): Promise<boolean>`\n\nChecks whether the WebView can go back in history.\n\n***\n\n### `canGoForward(): Promise<boolean>`\n\nChecks whether the WebView can go forward in history.\n\n***\n\n### `goBack(): Promise<boolean>`\n\nNavigates to the previous page in the history stack.\n\n***\n\n### `goForward(): Promise<boolean>`\n\nNavigates to the next page in the history stack.\n\n***\n\n### `reload(): Promise<void>`\n\nReloads the current webpage.\n\n***\n\n### `dismiss(): void`\n\nDismisses the WebView if currently presented.\n\n***\n\n### `dispose(): void`\n\nDisposes the WebView instance and releases resources.\n\n- If the WebView is still presented, it will first be dismissed.\n- **Important**: You must call this to prevent memory leaks when done.\n\n***\n\n## Full Example\n\n```ts\nconst webView = new WebViewController()\n\nawait webView.addScriptMessageHandler('greet', (name) => {\n  return `Hello, ${name}`\n})\n\nawait webView.loadHTML(`\n  <html>\n    <body>\n      <h1>Custom WebView</h1>\n      <button onclick=\"sendMessage()\">Greet</button>\n      <script>\n        async function sendMessage() {\n          const response = await window.webkit.messageHandlers.greet.postMessage(\"Alice\")\n          alert(response)\n        }\n      </script>\n    </body>\n  </html>\n`)\n\nawait webView.present({ navigationTitle: 'WebView Demo' })\nwebView.dispose()\n```\n","routePath":"/doc/Device Capabilities/WebViewController","lang":"en","toc":[{"id":"class-webviewcontroller","text":"Class: `WebViewController`","depth":2,"charIndex":258},{"id":"properties","text":"Properties","depth":2,"charIndex":345},{"id":"shouldallowrequest-request--promiseboolean","text":"`shouldAllowRequest?: (request) => Promise<boolean>`","depth":3,"charIndex":360},{"id":"parameters","text":"Parameters","depth":4,"charIndex":770},{"id":"returns","text":"Returns","depth":4,"charIndex":1370},{"id":"example","text":"Example","depth":4,"charIndex":1489},{"id":"methods","text":"Methods","depth":2,"charIndex":1902},{"id":"loadfilepath-string-allowingreadaccessto-string-promiseboolean","text":"`loadFile(path: string, allowingReadAccessTo?: string): Promise<boolean>`","depth":3,"charIndex":1914},{"id":"loadurlurl-string-promiseboolean","text":"`loadURL(url: string): Promise<boolean>`","depth":3,"charIndex":2243},{"id":"loadhtmlhtml-string-baseurl-string-promiseboolean","text":"`loadHTML(html: string, baseURL?: string): Promise<boolean>`","depth":3,"charIndex":2468},{"id":"loaddatadata-data-mimetype-string-encoding-string-baseurl-string-promiseboolean","text":"`loadData(data: Data, mimeType: string, encoding: string, baseURL: string): Promise<boolean>`","depth":3,"charIndex":2779},{"id":"waitforload-promiseboolean","text":"`waitForLoad(): Promise<boolean>`","depth":3,"charIndex":3182},{"id":"gethtml-promisestring--null","text":"`getHTML(): Promise<string | null>`","depth":3,"charIndex":3316},{"id":"evaluatejavascriptt--anyjavascript-string-promiset","text":"`evaluateJavaScript<T = any>(javascript: string): Promise<T>`","depth":3,"charIndex":3450},{"id":"example-1","text":"Example","depth":4,"charIndex":3947},{"id":"addscriptmessagehandlerp--any-r--anyname-string-handler-params-p--r-promisevoid","text":"`addScriptMessageHandler<P = any, R = any>(name: string, handler: (params?: P) => R): Promise<void>`","depth":3,"charIndex":4539},{"id":"example-2","text":"Example","depth":4,"charIndex":5115},{"id":"presentoptions--fullscreen-boolean-navigationtitle-string--promisevoid","text":"`present(options?: { fullscreen?: boolean, navigationTitle?: string }): Promise<void>`","depth":3,"charIndex":5592},{"id":"cangoback-promiseboolean","text":"`canGoBack(): Promise<boolean>`","depth":3,"charIndex":5909},{"id":"cangoforward-promiseboolean","text":"`canGoForward(): Promise<boolean>`","depth":3,"charIndex":6003},{"id":"goback-promiseboolean","text":"`goBack(): Promise<boolean>`","depth":3,"charIndex":6103},{"id":"goforward-promiseboolean","text":"`goForward(): Promise<boolean>`","depth":3,"charIndex":6196},{"id":"reload-promisevoid","text":"`reload(): Promise<void>`","depth":3,"charIndex":6288},{"id":"dismiss-void","text":"`dismiss(): void`","depth":3,"charIndex":6354},{"id":"dispose-void","text":"`dispose(): void`","depth":3,"charIndex":6429},{"id":"full-example","text":"Full Example","depth":2,"charIndex":6649}],"frontmatter":{},"version":"","description":"The WebViewController class allows you to display and interact with embedded web content inside your script. It is designed for use cases like custom in-app browsers, rendering dynamic HTML, or communicating with JavaScript running in a web context."},{"title":"Intent.continueInForeground <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Intent.continueInForeground \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`Intent.continueInForeground` is an API that leverages the **iOS 26+ AppIntents framework** to request the system to bring the **Scripting app** to the foreground while a Shortcut is running.\n\nThis method is used when a script—invoked from Shortcuts—requires full UI interaction within the Scripting app (for example: presenting a form, editing content, picking files, showing a full screen navigation flow, etc.).\n\nWhen invoked:\n\n- The system displays a dialog asking the user to continue the workflow in the app.\n- If the user **confirms**, the system opens Scripting in the foreground and the script continues.\n- If the user **cancels**, the script terminates immediately.\n\nBecause this is a system-level capability of AppIntents:\n\n**This API requires iOS 26 or later.**\n\n***\n\n# API Definition\n\n```ts\nfunction continueInForeground(\n  dialog?: Dialog | null,\n  options?: {\n    alwaysConfirm?: boolean;\n  }\n): Promise<void>;\n```\n\n## Parameters\n\n### `dialog?: Dialog | null`\n\nAn optional message explaining why the workflow needs to continue in the foreground.\n\n`Dialog` supports four formats:\n\n```ts\ntype Dialog =\n  | string\n  | { full: string; supporting: string }\n  | { full: string; supporting: string; systemImageName: string }\n  | { full: string; systemImageName: string }\n```\n\nExamples:\n\n```ts\n\"Do you want to continue in the app?\"\n```\n\n```ts\n{\n  full: \"Continue in the Scripting app?\",\n  supporting: \"The next step requires full UI interaction.\",\n  systemImageName: \"app\"\n}\n```\n\nPassing `null` will suppress the dialog entirely (not recommended unless you fully understand the UX implications).\n\n***\n\n### `options?: { alwaysConfirm?: boolean }`\n\nControls whether the system should always ask for confirmation:\n\n- `alwaysConfirm: false` *(default)*\n  The system may decide whether confirmation is needed based on context.\n\n- `alwaysConfirm: true`\n  The system always presents the confirmation dialog.\n\n***\n\n# Execution Behavior\n\nWhen called inside `intent.tsx`:\n\n1. The Shortcut pauses execution.\n2. The system presents a confirmation dialog.\n3. If the user accepts:\n\n   - The Scripting app opens in the foreground.\n   - The script continues executing after the `await`.\n4. If the user cancels:\n\n   - The entire script is terminated immediately.\n\nThis mirrors the behavior of Apple’s AppIntents `continueInApp()` functionality for system apps.\n\n***\n\n# Common Use Cases\n\nUse `continueInForeground` when the next step **cannot** run in the background, including:\n\n- Presenting a full-screen UI (`Navigation.present`)\n- Editing content in a custom form or navigation stack\n- Selecting files or interacting with UI components\n- Scenarios requiring user input or multi-step flows\n- Showing UI unavailable to background extensions\n\nIt should **not** be used for simple data processing or non-interactive tasks.\n\n***\n\n# Full Code Example\n\nBelow is the full working example demonstrating how `continueInForeground` enables a Shortcut to transfer execution into the Scripting app and then return UI input back to Shortcuts.\n\n```tsx\n// intent.tsx\nimport {\n  Button,\n  Intent,\n  List,\n  Navigation,\n  NavigationStack,\n  Script,\n  Section,\n  TextField,\n  useState\n} from \"scripting\"\n\nfunction View() {\n  const dismiss = Navigation.useDismiss()\n  const [text, setText] = useState(\"\")\n\n  return <NavigationStack>\n\n    <List navigationTitle=\"Intent Demo\">\n\n      <TextField\n        title=\"Enter a text\"\n        value={text}\n        onChanged={setText}\n      />\n\n      <Section>\n        <Button\n          title=\"Return Text\"\n          action={() => {\n            dismiss(text)\n          }}\n          disabled={!/\\S+/.test(text)}\n        />\n      </Section>\n\n    </List>\n\n  </NavigationStack>\n}\n\nasync function runIntent() {\n\n  // Step 1: Ask the user to continue in the foreground app\n  await Intent.continueInForeground(\n    \"Do you want to open the app and continue?\"\n  )\n\n  // Step 2: Present UI inside the Scripting app\n  const text = await Navigation.present<string | null>(\n    <View />\n  )\n\n  // Step 3: Optionally go back to Shortcuts\n  Safari.openURL(\"shortcuts://\")\n\n  // Step 4: Return the result to Shortcuts\n  Script.exit(\n    Intent.text(\n      text ?? \"No text return\"\n    )\n  )\n}\n\nrunIntent()\n```\n\n***\n\n# Notes and Recommendations\n\n1. **Requires iOS 26+**\n   Do not call this API on older systems.\n\n2. **Use dialogs to explain why foreground interaction is required**\n   This improves user trust and Shortcuts clarity.\n\n3. **Always handle the cancellation case**\n   If the user cancels, your script stops. Avoid assuming foreground UI will always appear.\n\n4. **Foreground UI must be meaningful**\n   Only use this API when the upcoming step truly requires UI.\n\n5. **Can be combined with SnippetIntent (iOS 26+)**\n   For workflows that mix in-Shortcut Snippet UI with in-app full UI.\n\n***\n\n# Summary\n\n`Intent.continueInForeground` enables scripts invoked from Shortcuts to request foreground execution when UI interaction is required. It is:\n\n- Based on iOS 26 AppIntents capabilities\n- A system-confirmed context switch\n- Essential for workflows involving full UI interactions\n- Safely integrated via a structured `Dialog` system\n\nThis method allows Scripting to support advanced automation flows that seamlessly transition between Shortcuts and the full Scripting app UI.\n","routePath":"/doc/Intent/Intent.continueInForeground","lang":"en","toc":[{"id":"parameters","text":"Parameters","depth":2,"charIndex":1102},{"id":"dialog-dialog--null","text":"`dialog?: Dialog | null`","depth":3,"charIndex":1117},{"id":"options--alwaysconfirm-boolean-","text":"`options?: { alwaysConfirm?: boolean }`","depth":3,"charIndex":1780}],"frontmatter":{},"version":"","description":"Intent.continueInForeground is an API that leverages the iOS 26+ AppIntents framework to request the system to bring the Scripting app to the foreground while a Shortcut is running. This method is used when a script—invoked from Shortcuts—requires full UI interaction within the Scripting app (for example: presenting a form, editing content, picking files, showing a full screen navigation flow, etc.). When invoked: The system displays a dialog asking the user to continue the workflow in the app.If the user confirms, the system opens Scripting in the foreground and the script continues.If the user cancels, the script terminates immediately. Because this is a system-level capability of AppIntents: This API requires iOS 26 or later."},{"title":"Intent.requestConfirmation <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Intent.requestConfirmation \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`Intent.requestConfirmation` pauses script execution and asks the user to confirm an action through a **system-managed confirmation UI**.\nThe confirmation interface consists of:\n\n- A **SnippetIntent UI** (provided by you)\n- Optional dialog text (system-generated or developer-defined)\n\nBehavior:\n\n- If the user **confirms**, the script continues (Promise resolves).\n- If the user **cancels**, the script terminates immediately.\n- The UI is fully managed by the system.\n- The presented UI is defined by the provided SnippetIntent’s `perform()` return.\n\n**This API is only available on iOS 26 or later.**\n\n***\n\n# API Definition\n\n```ts\nIntent.requestConfirmation(\n  actionName: ConfirmationActionName,\n  snippetIntent: AppIntent<any, VirtualNode, AppIntentProtocol.SnippetIntent>,\n  options?: {\n    dialog?: Dialog;\n    showDialogAsPrompt?: boolean;\n  }\n): Promise<void>\n```\n\n***\n\n# Parameter Details\n\n## actionName: ConfirmationActionName\n\nA semantic keyword describing the type of action being confirmed.\nApple uses this value to generate natural language around the confirmation UI.\n\nAccepted values include:\n\n```\n\"add\" | \"addData\" | \"book\" | \"buy\" | \"call\" | \"checkIn\" |\n\"continue\" | \"create\" | \"do\" | \"download\" | \"filter\" |\n\"find\" | \"get\" | \"go\" | \"log\" | \"open\" | \"order\" |\n\"pay\" | \"play\" | \"playSound\" | \"post\" | \"request\" |\n\"run\" | \"search\" | \"send\" | \"set\" | \"share\" |\n\"start\" | \"startNavigation\" | \"toggle\" | \"turnOff\" |\n\"turnOn\" | \"view\"\n```\n\nExamples:\n\n- `\"set\"` → “Do you want to set…?”\n- `\"buy\"` → “Do you want to buy…?”\n- `\"toggle\"` → “Do you want to toggle…?”\n\nChoosing the correct semantic verb improves the clarity of the user-facing dialog.\n\n***\n\n## snippetIntent: SnippetIntent\n\nThis must be an AppIntent registered with:\n\n```ts\nprotocol: AppIntentProtocol.SnippetIntent;\n```\n\nThe UI displayed in the confirmation step **comes from this SnippetIntent’s `perform()` return**, which must be a TSX-based `VirtualNode`.\n\nThis is what the user sees and interacts with during confirmation.\n\n***\n\n## `options?: { dialog?: Dialog; showDialogAsPrompt?: boolean }`\n\n### dialog?: Dialog\n\nOptional text describing the confirmation request.\nSupports four formats:\n\n```ts\ntype Dialog =\n  | string\n  | { full: string; supporting: string }\n  | { full: string; supporting: string; systemImageName: string }\n  | { full: string; systemImageName: string };\n```\n\nExamples:\n\n```ts\n\"Are you sure you want to continue?\";\n```\n\nMore structured version:\n\n```ts\n{\n  full: \"Set this color?\",\n  supporting: \"This will update the theme color used across the app.\",\n  systemImageName: \"paintpalette\"\n}\n```\n\nUse this to clearly explain what the user is confirming.\n\n***\n\n### showDialogAsPrompt?: boolean\n\n- Default: `true`\n  The system shows the dialog as a modal prompt.\n\n- `false`\n  The dialog may be integrated directly inside the Snippet card instead of a separate prompt.\n\n***\n\n# Execution Flow\n\nWhen the script executes:\n\n```ts\nawait Intent.requestConfirmation(...)\n```\n\nThe following occurs:\n\n1. Script execution is paused.\n\n2. The system displays:\n\n   - The SnippetIntent UI\n   - Optional dialog text\n\n3. The user chooses:\n\n   - **Confirm** → Promise resolves → script continues\n   - **Cancel** → script stops immediately\n\n4. The system handles UI presentation and dismissal automatically.\n\nThere is no need to manually manage the UI lifecycle.\n\n***\n\n# Usage Scenarios\n\nRecommended for:\n\n- Confirming important changes (colors, appearance, configurations)\n- Confirming destructive or irreversible actions\n- Steps requiring explicit user approval\n- Initiating subflows requiring UI preview or choice (e.g., color picker, item selector)\n- Sensitive operations (e.g., updating settings, performing actions with side effects)\n\nNot recommended for:\n\n- Actions that do not require user approval\n- Simple background data processing\n\n***\n\n# Complete Example\n\nBelow is a full working example demonstrating how to request user confirmation using a SnippetIntent.\n\nIt assumes you have two SnippetIntent AppIntents:\n\n- `PickColorIntent` — allows user to select a color\n- `ShowResultIntent` — displays the final result\n\n## intent.tsx\n\n```tsx\n\n\n\nasync function runIntent() {\n  // Step 1: Ask the user to confirm the action via a Snippet UI\n  await Intent.requestConfirmation(\"set\", PickColorIntent(), {\n    dialog: {\n      full: \"Are you sure you want to set this color?\",\n      supporting: \"This will update the theme color used by your app.\",\n      systemImageName: \"paintpalette\",\n    },\n  });\n\n  // Step 2: Read input from Shortcuts\n  const text =\n    Intent.shortcutParameter?.type === \"text\"\n      ? Intent.shortcutParameter.value\n      : \"No text parameter from Shortcuts\";\n\n  // Step 3: Return another SnippetIntent result\n  const snippet = Intent.snippetIntent({\n    snippetIntent: ShowResultIntent({ content: text }),\n  });\n\n  Script.exit(snippet);\n}\n\nrunIntent();\n```\n\n***\n\n# Notes & Best Practices\n\n- **Requires iOS 26+** — do not call this API on earlier versions.\n- Always include a clear **dialog** message to improve user understanding.\n- Use for actions that require explicit approval or confirmation.\n- When possible, combine with SnippetIntent to provide a richer preview UI.\n- Scripts terminate automatically when the user cancels; do not rely on cleanup code afterward.\n- Avoid calling it unnecessarily; only use when confirmation is truly meaningful.\n","routePath":"/doc/Intent/Intent.requestConfirmation","lang":"en","toc":[{"id":"actionname-confirmationactionname","text":"actionName: ConfirmationActionName","depth":2,"charIndex":1069},{"id":"snippetintent-snippetintent","text":"snippetIntent: SnippetIntent","depth":2,"charIndex":1834},{"id":"options--dialog-dialog-showdialogasprompt-boolean-","text":"`options?: { dialog?: Dialog; showDialogAsPrompt?: boolean }`","depth":2,"charIndex":2178},{"id":"dialog-dialog","text":"dialog?: Dialog","depth":3,"charIndex":2244},{"id":"showdialogasprompt-boolean","text":"showDialogAsPrompt?: boolean","depth":3,"charIndex":2826},{"id":"intenttsx","text":"intent.tsx","depth":2,"charIndex":4270}],"frontmatter":{},"version":"","description":"Intent.requestConfirmation pauses script execution and asks the user to confirm an action through a system-managed confirmation UI.\nThe confirmation interface consists of: A SnippetIntent UI (provided by you)Optional dialog text (system-generated or developer-defined) Behavior: If the user confirms, the script continues (Promise resolves).If the user cancels, the script terminates immediately.The UI is fully managed by the system.The presented UI is defined by the provided SnippetIntent’s perform() return. This API is only available on iOS 26 or later."},{"title":"Quick Start","content":"Scripting allows you to define custom iOS Intents using an `intent.tsx` file. These scripts can receive input from the iOS share sheet or the Shortcuts app and return structured results. With optional UI presentation, you can create interactive workflows that process data and deliver output dynamically.\n\n***\n\n## 1. Creating and Configuring an Intent\n\n### 1.1 Create an Intent Script\n\n1. Create a new script project in the Scripting app.\n2. Add a file named `intent.tsx` to the project.\n3. Define your logic and optionally a UI component inside the file.\n\n### 1.2 Configure Supported Input Types\n\nTap the project title in the editor’s title bar to open **Intent Settings**, then select supported input types:\n\n- Text\n- Images\n- File URLs\n- URLs\n\nThis configuration enables your script to appear in the share sheet or Shortcuts when matching input is provided.\n\n***\n\n## 2. Accessing Input Data\n\nInside `intent.tsx`, use the `Intent` API to access input values.\n\n| Property                   | Description                                                                         |\n| -------------------------- | ----------------------------------------------------------------------------------- |\n| `Intent.shortcutParameter` | A single parameter passed from the Shortcuts app, with `.type` and `.value` fields. |\n| `Intent.textsParameter`    | Array of text strings.                                                              |\n| `Intent.urlsParameter`     | Array of URL strings.                                                               |\n| `Intent.imagesParameter`   | Array of image file paths (UIImage objects).                                        |\n| `Intent.fileURLsParameter` | Array of local file URL paths.                                                      |\n\nExample:\n\n```ts\nif (Intent.shortcutParameter) {\n  if (Intent.shortcutParameter.type === \"text\") {\n    console.log(Intent.shortcutParameter.value)\n  }\n}\n```\n\n***\n\n## 3. Returning a Result\n\nUse `Script.exit(result)` to return a result to the caller, such as the Shortcuts app or another script. Valid return types include:\n\n- Plain text: `Intent.text(value)`\n- Attributed text: `Intent.attributedText(value)`\n- URL: `Intent.url(value)`\n- JSON: `Intent.json(value)`\n- File path or file URL: `Intent.file(value)` or `Intent.fileURL(value)`\n\nExample:\n\n```ts\n\n\nScript.exit(Intent.text(\"Done\"))\n```\n\n***\n\n## 4. Displaying Interactive UI\n\nUse `Navigation.present()` to show a UI before returning a result. You can render a React-style component and then call `Script.exit()` after the interaction completes.\n\nExample:\n\n```ts\n\n\nfunction MyIntentView() {\n  return (\n    <VStack>\n      <Text>{Intent.textsParameter?.[0]}</Text>\n    </VStack>\n  )\n}\n\nasync function run() {\n  await Navigation.present({ element: <MyIntentView /> })\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## 5. Using Intents in the Share Sheet\n\nIf a script supports a specific input type (e.g., text or image), it will automatically appear as an option in the iOS share sheet:\n\n1. Select content such as text or a file.\n2. Tap the Share button.\n3. Choose **Scripting** in the share sheet.\n4. Scripting will list scripts that support the selected input type.\n\n***\n\n## 6. Using Intents in the Shortcuts App\n\nYou can call scripts from the Shortcuts app with or without UI:\n\n- **Run Script**: Executes the script in the background.\n- **Run Script in App**: Executes the script in the foreground, with UI presentation support.\n\nSteps:\n\n1. Open the Shortcuts app and create a new shortcut.\n2. Add the **Run Script** or **Run Script in App** action from Scripting.\n3. Choose the target script and pass input parameters if needed.\n\n***\n\n## 7. Intent API Reference\n\n### `Intent` Properties\n\n| Property            | Type                | Description                                     |\n| ------------------- | ------------------- | ----------------------------------------------- |\n| `shortcutParameter` | `ShortcutParameter` | Input from Shortcuts with `.type` and `.value`. |\n| `textsParameter`    | `string[]`          | Array of input text values.                     |\n| `urlsParameter`     | `string[]`          | Array of input URLs.                            |\n| `imagesParameter`   | `UIImage[]`         | Array of image file paths or objects.           |\n| `fileURLsParameter` | `string[]`          | Array of input file paths (local file URLs).    |\n\n### `Intent` Methods\n\n| Method                         | Return Type                 | Example                                |\n| ------------------------------ | --------------------------- | -------------------------------------- |\n| `Intent.text(value)`           | `IntentTextValue`           | `Intent.text(\"Hello\")`                 |\n| `Intent.attributedText(value)` | `IntentAttributedTextValue` | `Intent.attributedText(\"Styled Text\")` |\n| `Intent.url(value)`            | `IntentURLValue`            | `Intent.url(\"https://example.com\")`    |\n| `Intent.json(value)`           | `IntentJsonValue`           | `Intent.json({ key: \"value\" })`        |\n| `Intent.file(path)`            | `IntentFileValue`           | `Intent.file(\"/path/to/file.txt\")`     |\n| `Intent.fileURL(path)`         | `IntentFileURLValue`        | `Intent.fileURL(\"/path/to/file.pdf\")`  |\n| `Intent.image(UIImage)`        | `IntentImageValue`          | `Intent.image(uiImage)`                |\n\n***\n\n## 8. Best Practices and Notes\n\n- Always call `Script.exit()` to properly terminate the script and return a result.\n- When displaying a UI, ensure `Navigation.present()` is awaited before calling `Script.exit()`.\n- Use **\"Run Script in App\"** for large files or images to avoid process termination due to memory constraints.\n- You can use `queryParameters` when launching scripts via URL scheme if additional data is needed.\n","routePath":"/doc/Intent/Quick Start","lang":"en","toc":[{"id":"1-creating-and-configuring-an-intent","text":"1. Creating and Configuring an Intent","depth":2,"charIndex":311},{"id":"11-create-an-intent-script","text":"1.1 Create an Intent Script","depth":3,"charIndex":353},{"id":"12-configure-supported-input-types","text":"1.2 Configure Supported Input Types","depth":3,"charIndex":557},{"id":"2-accessing-input-data","text":"2. Accessing Input Data","depth":2,"charIndex":867},{"id":"3-returning-a-result","text":"3. Returning a Result","depth":2,"charIndex":1944},{"id":"4-displaying-interactive-ui","text":"4. Displaying Interactive UI","depth":2,"charIndex":2380},{"id":"5-using-intents-in-the-share-sheet","text":"5. Using Intents in the Share Sheet","depth":2,"charIndex":2836},{"id":"6-using-intents-in-the-shortcuts-app","text":"6. Using Intents in the Shortcuts App","depth":2,"charIndex":3195},{"id":"7-intent-api-reference","text":"7. Intent API Reference","depth":2,"charIndex":3660},{"id":"intent-properties","text":"`Intent` Properties","depth":3,"charIndex":3688},{"id":"intent-methods","text":"`Intent` Methods","depth":3,"charIndex":4386},{"id":"8-best-practices-and-notes","text":"8. Best Practices and Notes","depth":2,"charIndex":5368}],"frontmatter":{},"version":"","description":"Scripting allows you to define custom iOS Intents using an intent.tsx file. These scripts can receive input from the iOS share sheet or the Shortcuts app and return structured results. With optional UI presentation, you can create interactive workflows that process data and deliver output dynamically."},{"title":"SnippetIntent <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SnippetIntent \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nSnippetIntent is a special kind of AppIntent whose purpose is to render **interactive Snippet UI cards** inside the Shortcuts app (iOS 26+).\n\nKey characteristics:\n\n1. Must be registered in `app_intents.tsx`\n2. Must specify `protocol: AppIntentProtocol.SnippetIntent`\n3. `perform()` **must return a VirtualNode (TSX UI)**\n4. Must be returned via `Intent.snippetIntent()`\n5. Must be invoked from the Shortcuts action **“Show Snippet Intent”**\n6. SnippetIntent is ideal for building interactive, step-based UI inside a Shortcut\n\nIt is not a data-returning Intent; it is exclusively for UI rendering in Shortcuts.\n\n***\n\n# 2. System Requirements\n\n**SnippetIntent requires iOS 26 or later.**\n\nOn iOS versions earlier than 26:\n\n- `Intent.snippetIntent()` is not available\n- `Intent.requestConfirmation()` cannot be used\n- The Shortcuts action “Show Snippet Intent” does not exist\n- SnippetIntent-type AppIntents cannot be invoked by Shortcuts\n\n***\n\n# 3. Registering a SnippetIntent (app\\_intents.tsx)\n\nExample:\n\n```tsx\nexport const PickColorIntent = AppIntentManager.register<void>({\n  name: \"PickColorIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async () => {\n    return <PickColorView />\n  }\n})\n```\n\nAnother SnippetIntent:\n\n```tsx\nexport const ShowResultIntent = AppIntentManager.register({\n  name: \"ShowResultIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async ({ content }: { content: string }) => {\n    return <ResultView content={content} />\n  }\n})\n```\n\nRequirements:\n\n- `protocol` **must** be `AppIntentProtocol.SnippetIntent`\n- `perform()` **must** return a TSX UI (VirtualNode)\n- SnippetIntent cannot return non-UI types such as text, numbers, JSON, or file paths\n\n***\n\n# 4. Wrapping SnippetIntent Return Values — `Intent.snippetIntent`\n\nA SnippetIntent cannot be passed directly to `Script.exit()`.\nIt must be wrapped in a `IntentSnippetIntentValue`.\n\n```tsx\nconst snippetValue = Intent.snippetIntent(\n  ShowResultIntent({ content: \"Example Text\" })\n)\n\nScript.exit(snippetValue)\n```\n\n### Type Definition\n\n```ts\ntype SnippetIntentValue = {\n  value?: IntentAttributedTextValue | IntentFileURLValue | IntentJsonValue | IntentTextValue | IntentURLValue | IntentFileValue | null\n  snippetIntent: AppIntent<any, VirtualNode, AppIntentProtocol.SnippetIntent>\n}\n\ndeclare class IntentSnippetIntentValue extends IntentValue<\n  'SnippetIntent',\n  SnippetIntentValue\n> {\n  value: SnippetIntentValue\n  type: 'SnippetIntent'\n}\n```\n\nThis wrapper makes the return value compatible with the Shortcuts “Show Snippet Intent” action.\n\n***\n\n# 5. Snippet Confirmation UI — `Intent.requestConfirmation`\n\niOS 26 Snippet Framework provides built-in confirmation UI driven by SnippetIntent.\n\n### API\n\n```ts\nIntent.requestConfirmation(\n  actionName: ConfirmationActionName,\n  intent: AppIntent<any, VirtualNode, AppIntentProtocol.SnippetIntent>,\n  options?: {\n    dialog?: Dialog;\n    showDialogAsPrompt?: boolean;\n  }\n): Promise<void>\n```\n\n### ConfirmationActionName\n\nA predefined list of semantic action names used by system UI:\n\n```\n\"add\" | \"addData\" | \"book\" | \"buy\" | \"call\" | \"checkIn\" |\n\"continue\" | \"create\" | \"do\" | \"download\" | \"filter\" |\n\"find\" | \"get\" | \"go\" | \"log\" | \"open\" | \"order\" |\n\"pay\" | \"play\" | \"playSound\" | \"post\" | \"request\" |\n\"run\" | \"search\" | \"send\" | \"set\" | \"share\" |\n\"start\" | \"startNavigation\" | \"toggle\" | \"turnOff\" |\n\"turnOn\" | \"view\"\n```\n\n### Example\n\n```tsx\nawait Intent.requestConfirmation(\n  \"set\",\n  PickColorIntent()\n)\n```\n\nExecution behavior:\n\n- Displays a Snippet UI for confirmation\n- If the user confirms → Promise resolves and script continues\n- If the user cancels → execution stops (system-driven behavior)\n\n***\n\n# 6. The “Show Snippet Intent” Action in Shortcuts (iOS 26+)\n\niOS 26 adds a new Shortcuts action:\n\n**Show Snippet Intent**\n\nThis action is the only correct way to display SnippetIntent UI.\n\n### Comparison with Other Scripting Actions\n\n| Shortcuts Action              | UI Shown                       | Supports SnippetIntent | Usage               |\n| ----------------------------- | ------------------------------ | ---------------------- | ------------------- |\n| Run Script                    | None                           | No                     | Background logic    |\n| Run Script in App             | Fullscreen UI inside Scripting | No                     | Rich app-level UI   |\n| Show Snippet Intent (iOS 26+) | Snippet card UI                | Yes                    | SnippetIntent flows |\n\n### Usage\n\n1. Add “Show Snippet Intent” in Shortcuts\n2. Select a Scripting script project\n3. The script must return `Intent.snippetIntent(...)`\n4. Shortcuts renders the UI in a Snippet card\n\n***\n\n# 7. IntentMemoryStorage — Cross-Intent State Store\n\n## Why It Exists\n\nEvery AppIntent execution runs in an isolated environment:\n\n- After an AppIntent `perform()` completes → its execution context is destroyed\n- After a script calls `Script.exit()` → the JS context is destroyed\n\nThis means local variables **cannot persist between AppIntent calls**.\n\nSnippet flows commonly involve:\nPickColor → SetColor → ShowResult\n\nTherefore a cross-Intent state mechanism is required.\n\n***\n\n## IntentMemoryStorage API\n\n```ts\nnamespace IntentMemoryStorage {\n  function get<T>(key: string): T | null\n  function set(key: string, value: any): void\n  function remove(key: string): void\n  function contains(key: string): boolean\n  function clear(): void\n  function keys(): string[]\n}\n```\n\n### Purpose\n\n- Store small pieces of shared data across multiple AppIntents\n- Works during the entire Shortcut flow\n- Ideal for selections, temporary configuration, or intent-to-intent handoff\n\n### Example\n\n```ts\nIntentMemoryStorage.set(\"color\", \"systemBlue\")\n\nconst color = IntentMemoryStorage.get<Color>(\"color\")\n```\n\n### Guidelines\n\nNot recommended for large data.\nFor large data:\n\n- Use `Storage` (persistent key-value store)\n- Or save files via `FileManager` in `appGroupDocumentsDirectory`\n\nIntentMemoryStorage should be treated as **temporary, lightweight state**.\n\n***\n\n# 8. Full Example Combining All Features (iOS 26+)\n\n## app\\_intents.tsx\n\n```tsx\nexport const SetColorIntent = AppIntentManager.register({\n  name: \"SetColorIntent\",\n  protocol: AppIntentProtocol.AppIntent,\n  perform: async (color: Color) => {\n    IntentMemoryStorage.set(\"color\", color)\n  }\n})\n\nexport const PickColorIntent = AppIntentManager.register<void>({\n  name: \"PickColorIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async () => {\n    return <PickColorView />\n  }\n})\n\nexport const ShowResultIntent = AppIntentManager.register({\n  name: \"ShowResultIntent\",\n  protocol: AppIntentProtocol.SnippetIntent,\n  perform: async ({ content }: { content: string }) => {\n    const color = IntentMemoryStorage.get<Color>(\"color\") ?? \"systemBlue\"\n    return <ResultView content={content} color={color} />\n  }\n})\n```\n\n## intent.tsx\n\n```tsx\nasync function runIntent() {\n\n  // 1. Ask the user to confirm setting the color via Snippet\n  await Intent.requestConfirmation(\n    \"set\",\n    PickColorIntent()\n  )\n\n  // 2. Read Shortcuts input\n  const textContent =\n    Intent.shortcutParameter?.type === \"text\"\n      ? Intent.shortcutParameter.value\n      : \"No text parameter from Shortcuts\"\n\n  // 3. Create final SnippetIntent UI\n  const snippetIntentValue = Intent.snippetIntent({\n    snippetIntent: ShowResultIntent({ content: textContent })\n  })\n\n  Script.exit(snippetIntentValue)\n}\n\nrunIntent()\n```\n\n## Shortcuts Flow\n\n1. User provides text\n2. “Show Snippet Intent” runs the script\n3. Script displays PickColorIntent confirmation UI via requestConfirmation\n4. After confirmation, displays ShowResultIntent Snippet UI\n5. Uses IntentMemoryStorage to persist the selected color\n\n***\n\n# 9. Summary\n\nThis document introduces all **new** Scripting features added for iOS 26+:\n\n1. **SnippetIntent**\n\n   - Registered using `AppIntentManager`\n   - Returns TSX UI\n   - Requires iOS 26+\n\n2. **Intent.snippetIntent**\n\n   - Wraps a SnippetIntent for Script.exit\n\n3. **Intent.requestConfirmation**\n\n   - Presents a confirmation Snippet UI\n   - Requires SnippetIntent\n\n4. **“Show Snippet Intent” action in Shortcuts**\n\n   - Required to display SnippetIntent UI\n\n5. **IntentMemoryStorage**\n\n   - Lightweight cross-AppIntent storage\n   - Not suitable for large binary/content data\n   - Complements multi-step Snippet flows\n","routePath":"/doc/Intent/SnippetIntent","lang":"en","toc":[{"id":"type-definition","text":"Type Definition","depth":3,"charIndex":2183},{"id":"api","text":"API","depth":3,"charIndex":2865},{"id":"confirmationactionname","text":"ConfirmationActionName","depth":3,"charIndex":3113},{"id":"example","text":"Example","depth":3,"charIndex":3546},{"id":"comparison-with-other-scripting-actions","text":"Comparison with Other Scripting Actions","depth":3,"charIndex":4022},{"id":"usage","text":"Usage","depth":3,"charIndex":4638},{"id":"why-it-exists","text":"Why It Exists","depth":2,"charIndex":4887},{"id":"intentmemorystorage-api","text":"IntentMemoryStorage API","depth":2,"charIndex":5314},{"id":"purpose","text":"Purpose","depth":3,"charIndex":5606},{"id":"example-1","text":"Example","depth":3,"charIndex":5800},{"id":"guidelines","text":"Guidelines","depth":3,"charIndex":5926},{"id":"app_intentstsx","text":"app_intents.tsx","depth":2,"charIndex":-1},{"id":"intenttsx","text":"intent.tsx","depth":2,"charIndex":7011},{"id":"shortcuts-flow","text":"Shortcuts Flow","depth":2,"charIndex":7591}],"frontmatter":{},"version":"","description":"SnippetIntent is a special kind of AppIntent whose purpose is to render interactive Snippet UI cards inside the Shortcuts app (iOS 26+). Key characteristics: Must be registered in app_intents.tsxMust specify protocol: AppIntentProtocol.SnippetIntentperform() must return a VirtualNode (TSX UI)Must be returned via Intent.snippetIntent()Must be invoked from the Shortcuts action “Show Snippet Intent”SnippetIntent is ideal for building interactive, step-based UI inside a Shortcut It is not a data-returning Intent; it is exclusively for UI rendering in Shortcuts. SnippetIntent requires iOS 26 or later. On iOS versions earlier than 26: Intent.snippetIntent() is not availableIntent.requestConfirmation() cannot be usedThe Shortcuts action “Show Snippet Intent” does not existSnippetIntent-type AppIntents cannot be invoked by Shortcuts Example: Another SnippetIntent: Requirements: protocol must be AppIntentProtocol.SnippetIntentperform() must return a TSX UI (VirtualNode)SnippetIntent cannot return non-UI types such as text, numbers, JSON, or file paths A SnippetIntent cannot be passed directly to Script.exit().\nIt must be wrapped in a IntentSnippetIntentValue. Type Definition This wrapper makes the return value compatible with the Shortcuts “Show Snippet Intent” action. iOS 26 Snippet Framework provides built-in confirmation UI driven by SnippetIntent. API ConfirmationActionName A predefined list of semantic action names used by system UI: Example Execution behavior: Displays a Snippet UI for confirmationIf the user confirms → Promise resolves and script continuesIf the user cancels → execution stops (system-driven behavior) iOS 26 adds a new Shortcuts action: Show Snippet Intent This action is the only correct way to display SnippetIntent UI. Comparison with Other Scripting Actions Usage Add “Show Snippet Intent” in ShortcutsSelect a Scripting script projectThe script must return Intent.snippetIntent(...)Shortcuts renders the UI in a Snippet card"},{"title":"Interactive Widget and LiveActivity","content":"The **Scripting** app supports adding interactivity to **widgets** and **LiveActivity**, allowing you to create dynamic and interactive UIs using `Button` and `Toggle` components. These controls can execute **AppIntents** to trigger actions, making your widgets and live activities more powerful.\n\n***\n\n## 1. Introduction to AppIntents\n\n### What are AppIntents?\n\nAn **AppIntent** defines a specific action that can be triggered by a control (e.g., a `Button` or `Toggle`) in a widget or LiveActivity UI. AppIntents enable seamless interaction and functionality by linking UI components with executable logic.\n\n### Supported Protocols\n\nAppIntents can implement the following protocols:\n\n- **`AppIntent`**: General-purpose intents for triggering custom actions.\n- **`AudioPlaybackIntent`**: Handles audio playback (e.g., play, pause, or toggle audio states).\n- **`AudioRecordingIntent`**: Manages audio recording states (requires iOS 18+ and a LiveActivity to stay active during recording).\n- **`LiveActivityIntent`**: Modifies or manages LiveActivity states.\n\n***\n\n## 2. Registering an AppIntent\n\nTo use an **AppIntent**, it must first be registered in the `app_intents.tsx` file using the `AppIntentManager.register` method.\n\n### Example: Registering AppIntents\n\n```typescript\n// app_intents.tsx\n\n\n\n// Register an AppIntent\nconst IntentWithoutParams = AppIntentManager.register({\n  name: \"IntentWithoutParams\",\n  protocol: AppIntentProtocol.AppIntent,\n  perform: async (params: undefined) => {\n    // Perform a custom action\n    console.log(\"Intent triggered\")\n    // Optionally reload widgets\n    Widget.reloadAll()\n  }\n})\n\n// Register an AppIntent with parameters\nconst ToggleIntentWithParams = AppIntentManager.register({\n  name: \"ToggleIntentWithParams\",\n  protocol: AppIntentProtocol.AudioPlaybackIntent,\n  perform: async (audioName: string) => {\n    // Perform action based on the parameter\n    console.log(`Toggling audio playback for: ${audioName}`)\n    Widget.reloadAll()\n  }\n})\n```\n\n***\n\n## 3. Using AppIntents in Widgets or LiveActivity UIs\n\nAfter registering an AppIntent, it can be linked to interactive components like `Button` and `Toggle` in your `widget.tsx` or LiveActivity UI file.\n\n### Example: Using AppIntents in a Widget\n\n```typescript\n// widget.tsx\n\n\n\n\n\nfunction WidgetView() {\n  return (\n    <VStack>\n      <Button\n        title=\"Tap me\"\n        intent={IntentWithoutParams(undefined)} // Trigger the intent without parameters\n      />\n      <Toggle\n        title=\"Play or Pause\"\n        value={model.checked}\n        intent={ToggleIntentWithParams(\"audio_name\")} // Trigger the intent with a parameter\n      />\n    </VStack>\n  )\n}\n\n// Present the widget\nWidget.present(<WidgetView />)\n```\n\n***\n\n## 4. API Reference\n\n### `AppIntentManager.register`\n\nRegisters an AppIntent for use in widgets or LiveActivity UIs.\n\n#### Parameters:\n\n- `name` (string): A unique name for the intent.\n- `protocol` (`AppIntentProtocol`): Specifies the type of intent (e.g., `AppIntent`, `AudioPlaybackIntent`).\n- `perform` (function): The function to execute when the intent is triggered.\n\n#### Returns:\n\n- An `AppIntentFactory` function that can be used to create instances of the registered intent.\n\n***\n\n### `Button` Component\n\nA tappable button that triggers an AppIntent.\n\n#### Props:\n\n- `title` (string): The button’s label.\n- `intent` (`AppIntent<any>`): The AppIntent to execute when the button is tapped.\n- `systemImage` (optional): An SF Symbol to display on the button.\n\n***\n\n### `Toggle` Component\n\nA toggle switch that triggers an AppIntent when its value changes.\n\n#### Props:\n\n- `value` (boolean): Indicates the toggle's state (on/off).\n- `intent` (`AppIntent<any>`): The AppIntent to execute when the toggle is toggled.\n- `title` (string): The toggle’s label.\n- `systemImage` (optional): An SF Symbol to display with the toggle.\n\n***\n\n## 5. Notes and Best Practices\n\n- Use `Widget.reloadAll()` within `perform` functions to update widgets dynamically after executing an intent.\n- Define your AppIntents in `app_intents.tsx` for organization and reusability.\n- Use appropriate protocols (e.g., `AudioPlaybackIntent`) to match the intent's functionality.\n","routePath":"/doc/Interactive Widget and LiveActivity","lang":"en","toc":[{"id":"1-introduction-to-appintents","text":"1. Introduction to AppIntents","depth":2,"charIndex":303},{"id":"what-are-appintents","text":"What are AppIntents?","depth":3,"charIndex":337},{"id":"supported-protocols","text":"Supported Protocols","depth":3,"charIndex":610},{"id":"2-registering-an-appintent","text":"2. Registering an AppIntent","depth":2,"charIndex":1064},{"id":"example-registering-appintents","text":"Example: Registering AppIntents","depth":3,"charIndex":1226},{"id":"3-using-appintents-in-widgets-or-liveactivity-uis","text":"3. Using AppIntents in Widgets or LiveActivity UIs","depth":2,"charIndex":1998},{"id":"example-using-appintents-in-a-widget","text":"Example: Using AppIntents in a Widget","depth":3,"charIndex":2202},{"id":"4-api-reference","text":"4. API Reference","depth":2,"charIndex":2721},{"id":"appintentmanagerregister","text":"`AppIntentManager.register`","depth":3,"charIndex":2742},{"id":"parameters","text":"Parameters:","depth":4,"charIndex":2839},{"id":"returns","text":"Returns:","depth":4,"charIndex":3094},{"id":"button-component","text":"`Button` Component","depth":3,"charIndex":3211},{"id":"props","text":"Props:","depth":4,"charIndex":3282},{"id":"toggle-component","text":"`Toggle` Component","depth":3,"charIndex":3491},{"id":"props-1","text":"Props:","depth":4,"charIndex":3583},{"id":"5-notes-and-best-practices","text":"5. Notes and Best Practices","depth":2,"charIndex":3855}],"frontmatter":{},"version":"","description":"The Scripting app supports adding interactivity to widgets and LiveActivity, allowing you to create dynamic and interactive UIs using Button and Toggle components. These controls can execute AppIntents to trigger actions, making your widgets and live activities more powerful."},{"title":"LiveActivity","content":"The `LiveActivity` API enables you to display real-time, dynamic information from your script on the Lock Screen and, where supported, in the Dynamic Island on iOS devices. It provides a structured interface to start, update, and end Live Activities, and observe their state throughout their lifecycle.\n\nThis document provides a complete guide to using the **LiveActivity API** in the Scripting app, including:\n\n- Core concepts and lifecycle\n- How to register a Live Activity UI\n- How to start, update, and end Live Activities\n- UI layout for Dynamic Island and Lock Screen\n- Full TypeScript/TSX examples\n- Detailed descriptions of every type and option\n\nThe API wraps Apple’s ActivityKit and brings it into the Scripting environment with a React-style UI building approach.\n\n***\n\n# 1. Understanding Live Activities\n\nA Live Activity can appear in the following regions:\n\n- Lock Screen\n- Dynamic Island (iPhone 14 Pro and later)\n- Banner-style presentation on devices without Dynamic Island\n\nLive Activities are used for time-based and progress-based information, such as:\n\n- Timers\n- Fitness progress\n- Delivery tracking\n- Countdowns and reminders\n- Real-time status updates\n\nIn Scripting, each Live Activity consists of:\n\n1. **contentState** (a JSON-serializable object that updates over time)\n2. **UI Builder** (a function that produces TSX UI for each state)\n\n***\n\n# 2. Live Activity State Types\n\n```ts\ntype LiveActivityState = \"active\" | \"dismissed\" | \"ended\" | \"stale\";\n```\n\n| State     | Description                                                                                 |\n| --------- | ------------------------------------------------------------------------------------------- |\n| active    | The Live Activity is visible and can receive content updates.                               |\n| stale     | The Live Activity is out of date. The system expects an update.                             |\n| ended     | The Live Activity ended but may remain visible for up to four hours or a user-defined time. |\n| dismissed | The Live Activity is no longer visible.                                                     |\n\n***\n\n# 3. LiveActivityDetail Type\n\n```ts\ntype LiveActivityDetail = {\n  id: string;\n  state: LiveActivityState;\n};\n```\n\nRepresents a summary of each active Live Activity.\n\n***\n\n# 4. Live Activity UI Types\n\n## 4.1 LiveActivityUIProps\n\n```ts\ntype LiveActivityUIProps = {\n  content: VirtualNode;\n  compactLeading: VirtualNode;\n  compactTrailing: VirtualNode;\n  minimal: VirtualNode;\n  children: VirtualNode | VirtualNode[];\n};\n```\n\nThese regions correspond to ActivityKit’s UI areas:\n\n| Property        | Region                                                |\n| --------------- | ----------------------------------------------------- |\n| content         | Lock Screen and non–Dynamic Island devices            |\n| compactLeading  | Leading area of compact Dynamic Island                |\n| compactTrailing | Trailing area of compact Dynamic Island               |\n| minimal         | The smallest pill-style display                       |\n| children        | The expanded Dynamic Island layout (multiple regions) |\n\n***\n\n# 5. Registering a Live Activity UI\n\nLive Activities **must** be registered inside a standalone file such as `live_activity.tsx`.\n\n```tsx\n\n\nexport type State = {\n  mins: number;\n};\n\nfunction ContentView(state: State) {\n  return (\n    <HStack activityBackgroundTint={{ light: \"clear\", dark: \"clear\" }}>\n      <Image systemName=\"waterbottle\" foregroundStyle=\"systemBlue\" />\n      <Text>{state.mins} minutes left until the next drink</Text>\n    </HStack>\n  );\n}\n\nconst builder: LiveActivityUIBuilder<State> = (state) => {\n  return (\n    <LiveActivityUI\n      content={<ContentView {...state} />}\n      compactLeading={\n        <HStack>\n          <Image systemName=\"clock\" />\n          <Text>{state.mins}m</Text>\n        </HStack>\n      }\n      compactTrailing={<Image systemName=\"waterbottle\" foregroundStyle=\"systemBlue\" />}\n      minimal={<Image systemName=\"clock\" />}>\n      <LiveActivityUIExpandedCenter>\n        <ContentView {...state} />\n      </LiveActivityUIExpandedCenter>\n    </LiveActivityUI>\n  );\n};\n\nexport const MyLiveActivity = LiveActivity.register(\"MyLiveActivity\", builder);\n```\n\n***\n\n# 6. Using a Live Activity in Your Script\n\n```tsx\nimport {\n  Button,\n  Text,\n  VStack,\n  Navigation,\n  NavigationStack,\n  useMemo,\n  useState,\n  LiveActivityState,\n  BackgroundKeeper,\n} from \"scripting\";\n\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss();\n  const [state, setState] = useState<LiveActivityState>();\n\n  const activity = useMemo(() => {\n    const instance = MyLiveActivity();\n\n    instance.addUpdateListener((s) => {\n      setState(s);\n      if (s === \"dismissed\") {\n        BackgroundKeeper.stop();\n      }\n    });\n\n    return instance;\n  }, []);\n\n  return (\n    <NavigationStack>\n      <VStack\n        navigationTitle=\"Live Activity Example\"\n        navigationBarTitleDisplayMode=\"inline\"\n        toolbar={{\n          cancellationAction: <Button title=\"Done\" action={dismiss} />,\n        }}>\n        <Text>Activity State: {state ?? \"-\"}</Text>\n\n        <Button\n          title=\"Start Live Activity\"\n          disabled={state != null}\n          action={() => {\n            let count = 5;\n            BackgroundKeeper.keepAlive();\n\n            activity.start({ mins: count });\n\n            function tick() {\n              setTimeout(() => {\n                count -= 1;\n                if (count === 0) {\n                  activity.end({ mins: 0 });\n                  BackgroundKeeper.stop();\n                } else {\n                  activity.update({ mins: count });\n                  tick();\n                }\n              }, 60000);\n            }\n\n            tick();\n          }}\n        />\n      </VStack>\n    </NavigationStack>\n  );\n}\n\nasync function run() {\n  await Navigation.present(<Example />);\n  Script.exit();\n}\n\nrun();\n```\n\n***\n\n# 7. LiveActivity Class API Reference\n\n## 7.1 start(contentState, options?)\n\n```ts\nstart(contentState: T, options?: LiveActivityOptions): Promise<boolean>\n```\n\nStarts a Live Activity.\n\n### LiveActivityOptions\n\n```ts\ntype LiveActivityOptions = {\n  staleDate?: number | Date;\n  relevanceScore?: number;\n};\n```\n\n- **staleDate**: Timestamp(ms) or Date object at which the activity becomes stale\n- **relevanceScore**: Determines which Live Activity is prioritized in the Dynamic Island\n\n***\n\n## 7.2 update(contentState, options?)\n\n```ts\nupdate(contentState: T, options?: LiveActivityUpdateOptions)\n```\n\n### LiveActivityUpdateOptions\n\n```ts\ntype LiveActivityUpdateOptions = {\n  staleDate?: number | Date;\n  relevanceScore?: number;\n  alert?: {\n    title: string;\n    body: string;\n  };\n};\n```\n\nAlerts appear on Apple Watch when sending an update.\n\n***\n\n## 7.3 end(contentState, options?)\n\n```ts\nend(contentState: T, options?: LiveActivityEndOptions)\n```\n\n### LiveActivityEndOptions\n\n```ts\ntype LiveActivityEndOptions = {\n  staleDate?: number ｜ Date\n  relevanceScore?: number\n  dismissTimeInterval?: number\n}\n```\n\nRules for dismissal (seconds):\n\n- Not provided: default system retention (up to 4 hours)\n- <= 0: remove immediately\n- \\> 0: remove after the specified interval\n\n***\n\n## 7.4 Reading Activity State\n\n```ts\ngetActivityState(): Promise<LiveActivityState | null>\n```\n\n***\n\n## 7.5 Listening for State Changes\n\n```ts\naddUpdateListener(listener);\nremoveUpdateListener(listener);\n```\n\nTriggered when the Live Activity transitions between:\n\n- active → stale\n- active → ended\n- ended → dismissed\n\n***\n\n## 7.6 Static Methods\n\n```ts\nstatic areActivitiesEnabled(): Promise<boolean>\nstatic getAllActivities(): Promise<LiveActivityDetail[]>\nstatic getAllActivitiesIds(): Promise<string[]>\nstatic getActivityState(activityId: string)\nstatic from(activityId, name)\nstatic endAllActivities(options?)\n```\n\n***\n\n# 8. UI Components for Expanded Layout\n\n| Component                      | Description                       |\n| ------------------------------ | --------------------------------- |\n| LiveActivityUI                 | Root layout container             |\n| LiveActivityUIExpandedLeading  | Leading region of expanded layout |\n| LiveActivityUIExpandedTrailing | Trailing region                   |\n| LiveActivityUIExpandedCenter   | Center region                     |\n| LiveActivityUIExpandedBottom   | Bottom region                     |\n\nThese components help structure the expanded Dynamic Island.\n\n***\n\n# 9. Best Practices\n\n## 9.1 contentState must be JSON-serializable\n\nThe following are not allowed:\n\n- Functions\n- Date objects (must use timestamps)\n- Class instances\n- Non-serializable structures\n\n## 9.2 Live Activity registration must be in a standalone file\n\nThis is required due to UI compilation and ActivityKit rules.\n\n## 9.3 Live Activities survive script termination\n\nIf your script needs to keep running (e.g., timers), use:\n\n```ts\nBackgroundKeeper.keepAlive();\n```\n\n***\n\n# 10. Minimal Example\n\n```ts\nconst activity = MyLiveActivity();\n\nawait activity.start({ mins: 10 });\n\nawait activity.update({ mins: 5 });\n\nawait activity.end({ mins: 0 }, { dismissTimeInterval: 0 });\n```\n\n# 11. Notes\n\n- Live Activity starts asynchronously. You need to wait for `start` to return `true` before calling `update` and `end`.\n- Live Activity cannot access documents and iCloud directories. If you want to access files or render images, you must save them to `FileManager.appGroupDocumentsDirectory`. For example, to render an image, you save it to `FileManager.appGroupDocumentsDirectory`, then use `<Image filePath={Path.join(FileManager.appGroupDocumentsDirectory, 'example.png')} />` to render it.\n- Live Activity can access the Storage data shared with the app.\n","routePath":"/doc/LiveActivity","lang":"en","toc":[{"id":"41-liveactivityuiprops","text":"4.1 LiveActivityUIProps","depth":2,"charIndex":2334},{"id":"71-startcontentstate-options","text":"7.1 start(contentState, options?)","depth":2,"charIndex":5961},{"id":"liveactivityoptions","text":"LiveActivityOptions","depth":3,"charIndex":6107},{"id":"72-updatecontentstate-options","text":"7.2 update(contentState, options?)","depth":2,"charIndex":6409},{"id":"liveactivityupdateoptions","text":"LiveActivityUpdateOptions","depth":3,"charIndex":6520},{"id":"73-endcontentstate-options","text":"7.3 end(contentState, options?)","depth":2,"charIndex":6769},{"id":"liveactivityendoptions","text":"LiveActivityEndOptions","depth":3,"charIndex":6871},{"id":"74-reading-activity-state","text":"7.4 Reading Activity State","depth":2,"charIndex":7195},{"id":"75-listening-for-state-changes","text":"7.5 Listening for State Changes","depth":2,"charIndex":7296},{"id":"76-static-methods","text":"7.6 Static Methods","depth":2,"charIndex":7519},{"id":"91-contentstate-must-be-json-serializable","text":"9.1 contentState must be JSON-serializable","depth":2,"charIndex":8445},{"id":"92-live-activity-registration-must-be-in-a-standalone-file","text":"9.2 Live Activity registration must be in a standalone file","depth":2,"charIndex":8622},{"id":"93-live-activities-survive-script-termination","text":"9.3 Live Activities survive script termination","depth":2,"charIndex":8749}],"frontmatter":{},"version":"","description":"The LiveActivity API enables you to display real-time, dynamic information from your script on the Lock Screen and, where supported, in the Dynamic Island on iOS devices. It provides a structured interface to start, update, and end Live Activities, and observe their state throughout their lifecycle. This document provides a complete guide to using the LiveActivity API in the Scripting app, including: Core concepts and lifecycleHow to register a Live Activity UIHow to start, update, and end Live ActivitiesUI layout for Dynamic Island and Lock ScreenFull TypeScript/TSX examplesDetailed descriptions of every type and option The API wraps Apple’s ActivityKit and brings it into the Scripting environment with a React-style UI building approach. A Live Activity can appear in the following regions: Lock ScreenDynamic Island (iPhone 14 Pro and later)Banner-style presentation on devices without Dynamic Island Live Activities are used for time-based and progress-based information, such as: TimersFitness progressDelivery trackingCountdowns and remindersReal-time status updates In Scripting, each Live Activity consists of: contentState (a JSON-serializable object that updates over time)UI Builder (a function that produces TSX UI for each state) Represents a summary of each active Live Activity."},{"title":"Quick Start","content":"Welcome to **Scripting**, an iOS app that lets you code UI components in **TypeScript** using **React-like TSX syntax**. With Scripting, you can create and present iOS utility UI pages through a familiar coding structure, using wrapped SwiftUI views for a smooth, native experience on iOS. This guide walks you through setting up your project, creating components, and working with hooks to build dynamic interfaces.\n\n### Table of Contents\n\n1. **Getting Started**\n2. **Creating a Script Project**\n3. **Importing Components**\n4. **Creating Custom Components**\n5. **Presenting UI Views**\n6. **Using Hooks**\n7. **Building Complex UIs**\n\n***\n\n### 1. Getting Started\n\nIn Scripting, you’ll create simple UI elements by defining them with function components. Every component and API you’ll need can be imported from the `scripting` package.\n\n### 2. Creating a Script Project\n\nBefore you begin coding, you need to **create a script project**. Once the project is set up, write your code in the `index.tsx` file. This is your main entry point for defining UI components and logic.\n\nExample setup in `index.tsx`:\n\n```tsx\n\n\n// Define a custom view component\nfunction View() {\n  return (\n    <VStack>\n      <Text>Hello, Scripting!</Text>\n    </VStack>\n  )\n}\n```\n\n***\n\n### 3. Importing Views\n\nAll views and some APIs from SwiftUI are wrapped and accessible through the `scripting` package. Here’s a list of some available views:\n\n- **Layout Views**: `VStack`, `HStack`, `ZStack`, `Grid`\n- **Controls**: `Button`, `Picker`, `Toggle`, `Slider`, `ColorPicker`\n- **Collections**: `List`, `Section`\n- **Date and Time**: `DatePicker`\n- **Text and Labels**: `Text`, `Label`, `TextField`\n\nTo use these in your project, import them as shown:\n\n```tsx\n```\n\n***\n\n### 4. Creating Custom Components\n\nFunction components in Scripting work just like in React, with JSX-like syntax for building reusable components.\n\nExample:\n\n```tsx\n\n\nfunction Greeting({\n   name\n}: {\n   name: string \n}) {\n  return (\n    <HStack>\n      <Text>Hello, {name}!</Text>\n    </HStack>\n  )\n}\n\nfunction MainView() {\n  return (\n    <VStack>\n      <Greeting name=\"Scripting User\" />\n      <Button \n        title=\"Click Me\" \n        action={() => console.log(\"Button Clicked!\")}\n      />\n    </VStack>\n  )\n}\n```\n\n***\n\n### 5. Presenting UI Views\n\nTo present a UI view, use the `Navigation.present` method. This allows you to display a custom component as a modal view and handle its dismissal. The `Navigation.present` method returns a promise that fulfills when the view is dismissed. To avoid memory leaks, always call `Script.exit()` after the view is dismissed.\n\nExample:\n\n```tsx\n\n\nfunction View() {\n  return (\n    <VStack>\n      <Text>Hello, Scripting!</Text>\n    </VStack>\n  )\n}\n\n// Present the view\nNavigation.present({ \n  element: <View />\n}).then(() => {\n  // Clean up to avoid memory leaks\n  Script.exit()\n})\n```\n\nIn this example, `Navigation.present({ element: <View /> })` displays the `View` component, and when the user dismisses it, `Script.exit()` ensures resources are freed.\n\n***\n\n### 6. Using Hooks\n\nScripting supports a range of React-like hooks for managing state, effects, memoization, and context. Here’s a guide on how to use each hook with examples:\n\n***\n\n#### `useState`\n\nThe `useState` hook lets you add local state to a function component.\n\n```tsx\n\n\nfunction Counter() {\n  const [count, setCount] = useState(0)\n\n  return (\n    <VStack>\n      <Text>Count: {count}</Text>\n      <Button\n        title=\"Increment\"\n        action={() => setCount(count + 1)}\n      />\n    </VStack>\n  )\n}\n```\n\nIn this example, clicking the button updates the `count` variable, which automatically re-renders the component.\n\n***\n\n#### `useEffect`\n\nThe `useEffect` hook lets you perform side effects in your components, such as fetching data or setting up subscriptions.\n\n```tsx\n\n\nfunction TimeDisplay() {\n  const [time, setTime] = useState(\n    new Date().toLocaleTimeString()\n  )\n\n  useEffect(() => {\n    let timerId: number\n\n    const startTimer = () => {\n      timerId = setTimeout(() => {\n        setTime(new Date().toLocaleTimeString())\n      }, 1000)\n    }\n\n    startTimer()\n    \n    return () => clearTimeout(timerId) // Clean up on unmount\n  }, [])\n\n  return <Text>Current Time: {time}</Text>\n}\n```\n\nIn this example, the `useEffect` hook sets up an interval to update the `time` variable every second, and clears the interval on component unmount.\n\n***\n\n#### `useReducer`\n\nThe `useReducer` hook is useful for managing complex state logic in components.\n\n```tsx\n\n\ntype Action = { \n  type: \"increment\"\n} | {\n  type: \"decrement\"\n}\nconst reducer = (state: number, action: Action) => {\n  switch (action.type) {\n    case \"increment\":\n      return state + 1\n    case \"decrement\":\n      return state - 1\n    default:\n      return state\n  }\n}\n\nfunction Counter() {\n  const [count, dispatch] = useReducer(reducer, 0)\n\n  return (\n    <VStack>\n      <Text>Count: {count}</Text>\n      <Button \n        title=\"Increment\"\n        action={() => dispatch({ type: \"increment\" })}\n      />\n      <Button\n        title=\"Decrement\"\n        action={() => dispatch({ type: \"decrement\" })}\n      />\n    </VStack>\n  )\n}\n```\n\nThe `useReducer` hook helps you handle complex state transitions by using a reducer function.\n\n***\n\n#### `useCallback`\n\nThe `useCallback` hook lets you memoize functions, optimizing performance by preventing unnecessary re-creations of the function on every render.\n\n```tsx\n\n\nfunction Counter() {\n  const [count, setCount] = useState(0)\n\n  const increment = useCallback(() => {\n    setCount((prev) => prev + 1)\n  }, [])\n\n  return (\n    <VStack>\n      <Text>Count: {count}</Text>\n      <Button \n        title=\"Increment\"\n        action={increment}\n      />\n    </VStack>\n  )\n}\n```\n\nWith `useCallback`, the `increment` function is only re-created when necessary, improving performance in large or frequently updated components.\n\n***\n\n#### `useMemo`\n\nThe `useMemo` hook lets you memoize values, caching expensive computations for better performance.\n\n```tsx\n\n\nfunction FactorialCounter() {\n  const [count, setCount] = useState(1)\n\n  const factorial = useMemo(() => {\n    let result = 1\n    for (let i = 1; i <= count; i++) result *= i\n    return result\n  }, [count])\n\n  return (\n    <VStack>\n      <Text>Factorial of {count} is {factorial}</Text>\n      <Button \n        title=\"Increase\"\n        action={() => setCount(count + 1)}\n      />\n    </VStack>\n  )\n}\n```\n\nThe `useMemo` hook optimizes performance by only re-calculating the factorial when `count` changes.\n\n***\n\n#### `useContext`\n\nThe `useContext` hook allows components to access shared state across the app without prop drilling, using a Context API.\n\n```tsx\n\n\nconst CountContext = createContext<number>()\n\nfunction Display() {\n  const count = useContext(CountContext)\n  return <Text>Shared Count: {count}</Text>\n}\n\nfunction App() {\n  return (\n    <CountContext.Provider value={42}>\n      <VStack>\n        <Display />\n      </VStack>\n    </CountContext.Provider>\n  )\n}\n```\n\nIn this example, `useContext` accesses `CountContext` to get a shared count value across the app.\n\n***\n\n### 7. Building Complex UIs\n\nCombine available views, hooks, and custom components to create complex, fully functional UIs.\n\nExample:\n\n```tsx\n\n\nfunction ToDoApp() {\n  const [tasks, setTasks] = useState([\"Task 1\", \"Task 2\", \"Task 3\"])\n  const [content, setContent] = useState(\"\")\n\n  return (\n    <NavigationStack>\n        <List\n          navigationTitle=\"My Tasks\"\n        >\n          <Section>\n            {tasks.map((task, index) => (\n              <Text key={index}>{task}</Text>\n            ))}\n          </Section>\n          \n          <TextField\n            title=\"New Task\"\n            value={content}\n            onSubmit={() => {\n              if (content.length === 0) {\n                return\n              }\n              setTasks([...tasks, content])\n              setContent(\"\")\n            }}\n          />\n        </List>\n    </NavigationStack>\n  )\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <ToDoApp />\n  })\n\n  Script.exit()\n}\n```\n\n***\n\nFor further details, check the full API documentation, which includes more examples and use cases for `scripting` package components and APIs.\n","routePath":"/doc/Quick Start","lang":"en","toc":[{"id":"table-of-contents","text":"Table of Contents","depth":3,"charIndex":418},{"id":"1-getting-started","text":"1. Getting Started","depth":3,"charIndex":639},{"id":"2-creating-a-script-project","text":"2. Creating a Script Project","depth":3,"charIndex":836},{"id":"3-importing-views","text":"3. Importing Views","depth":3,"charIndex":1257},{"id":"4-creating-custom-components","text":"4. Creating Custom Components","depth":3,"charIndex":1739},{"id":"5-presenting-ui-views","text":"5. Presenting UI Views","depth":3,"charIndex":2262},{"id":"6-using-hooks","text":"6. Using Hooks","depth":3,"charIndex":3042},{"id":"usestate","text":"`useState`","depth":4,"charIndex":3224},{"id":"useeffect","text":"`useEffect`","depth":4,"charIndex":3677},{"id":"usereducer","text":"`useReducer`","depth":4,"charIndex":4409},{"id":"usecallback","text":"`useCallback`","depth":4,"charIndex":5255},{"id":"usememo","text":"`useMemo`","depth":4,"charIndex":5887},{"id":"usecontext","text":"`useContext`","depth":4,"charIndex":6522},{"id":"7-building-complex-uis","text":"7. Building Complex UIs","depth":3,"charIndex":7090}],"frontmatter":{},"version":"","description":"Welcome to Scripting, an iOS app that lets you code UI components in TypeScript using React-like TSX syntax. With Scripting, you can create and present iOS utility UI pages through a familiar coding structure, using wrapped SwiftUI views for a smooth, native experience on iOS. This guide walks you through setting up your project, creating components, and working with hooks to build dynamic interfaces. Table of Contents Getting StartedCreating a Script ProjectImporting ComponentsCreating Custom ComponentsPresenting UI ViewsUsing HooksBuilding Complex UIs 1. Getting Started In Scripting, you’ll create simple UI elements by defining them with function components. Every component and API you’ll need can be imported from the scripting package. 2. Creating a Script Project Before you begin coding, you need to create a script project. Once the project is set up, write your code in the index.tsx file. This is your main entry point for defining UI components and logic. Example setup in index.tsx: 3. Importing Views All views and some APIs from SwiftUI are wrapped and accessible through the scripting package. Here’s a list of some available views: Layout Views: VStack, HStack, ZStack, GridControls: Button, Picker, Toggle, Slider, ColorPickerCollections: List, SectionDate and Time: DatePickerText and Labels: Text, Label, TextField To use these in your project, import them as shown: 4. Creating Custom Components Function components in Scripting work just like in React, with JSX-like syntax for building reusable components. Example: 5. Presenting UI Views To present a UI view, use the Navigation.present method. This allows you to display a custom component as a modal view and handle its dismissal. The Navigation.present method returns a promise that fulfills when the view is dismissed. To avoid memory leaks, always call Script.exit() after the view is dismissed. Example: In this example, Navigation.present({ element: <View /> }) displays the View component, and when the user dismisses it, Script.exit() ensures resources are freed. 6. Using Hooks Scripting supports a range of React-like hooks for managing state, effects, memoization, and context. Here’s a guide on how to use each hook with examples: useState The useState hook lets you add local state to a function component. In this example, clicking the button updates the count variable, which automatically re-renders the component. useEffect The useEffect hook lets you perform side effects in your components, such as fetching data or setting up subscriptions. In this example, the useEffect hook sets up an interval to update the time variable every second, and clears the interval on component unmount. useReducer The useReducer hook is useful for managing complex state logic in components. The useReducer hook helps you handle complex state transitions by using a reducer function. useCallback The useCallback hook lets you memoize functions, optimizing performance by preventing unnecessary re-creations of the function on every render. With useCallback, the increment function is only re-created when necessary, improving performance in large or frequently updated components. useMemo The useMemo hook lets you memoize values, caching expensive computations for better performance. The useMemo hook optimizes performance by only re-calculating the factorial when count changes. useContext The useContext hook allows components to access shared state across the app without prop drilling, using a Context API. In this example, useContext accesses CountContext to get a shared count value across the app. 7. Building Complex UIs Combine available views, hooks, and custom components to create complex, fully functional UIs. Example: For further details, check the full API documentation, which includes more examples and use cases for scripting package components and APIs."},{"title":"Script","content":"The `Script` module provides context and utility functions for managing script execution in the Scripting app. It enables you to access runtime metadata, terminate scripts with results, run other scripts programmatically, and construct URL schemes to launch or open scripts.\n\n***\n\n## Properties\n\n### `name: string`\n\nThe name of the currently running script.\n\n```ts\nconsole.log(Script.name) // e.g., \"MyScript\"\n```\n\n***\n\n### `directory: string`\n\nThe directory path where the script is located.\n\n```ts\nconsole.log(Script.directory) // e.g., \"/private/var/mobile/Containers/...\"\n```\n\n***\n\n### `env: string`\n\nIndicates the environment in which the current script is running. This allows the script to adapt its behavior based on the runtime context—whether it’s running in the main app, a widget, a notification, or an extension.\n\n### Possible Values:\n\n| Value              | Description                                                                                                                             |\n| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------- |\n| `\"index\"`          | Running in the main app. Entry point is `index.tsx`. Used for normal UI logic.                                                          |\n| `\"widget\"`         | Running in a widget. Entry point is `widget.tsx`. Used for home screen widgets.                                                         |\n| `\"control_widget\"` | Running in a control widget. Entry point is `contrl_widget_button.tsx` or `control_widget_toggle.tsx`. Used for control center widgets. |\n| `\"notification\"`   | Running in the rich notification extension. Entry point is `notification.tsx`.                                                          |\n| `\"intent\"`         | Running as a share sheet or shortcut intent handler. Entry point is `intent.tsx`.                                                       |\n| `\"app_intents\"`    | Running in the App Intents extension. Entry point is `app_intents.tsx`.                                                                 |\n| `\"assistant_tool\"` | Running in the Assistant Tool context. Entry point is `assistant_tool.tsx`.                                                             |\n| `\"keyboard\"`       | Running in the custom keyboard extension. Entry point is `keyboard.tsx`.                                                                |\n| `\"live_activity\"`  | Running in the Live Activity extension. Entry point is `live_activity.tsx`.                                                             |\n\n### Example:\n\n```ts\nif (Script.env === \"widget\") {\n  Widget.present(<MyWidget />)\n} else if (Script.env === \"index\") {\n  Navigation.present({ element: <MainPage /> })\n}\n```\n\n***\n\n### `widgetParameter: string`\n\nThe parameter passed when the script is launched from a widget.\n\n```ts\nif (Script.widgetParameter) {\n  console.log(\"Widget input:\", Script.widgetParameter)\n}\n```\n\n***\n\n### `queryParameters: Record<string, string>`\n\nKey-value pairs parsed from a `run` URL scheme.\n\n```ts\n// URL: scripting://run/MyScript?user=John&id=123\nconsole.log(Script.queryParameters.user) // \"John\"\nconsole.log(Script.queryParameters.id)   // \"123\"\n```\n\n***\n\n### `metadata: { ... }`\n\nMetadata of the current script.\n\n- `icon`: The icon of the script. Can be a SFSymbol name.\n- `color`: The color of the script. Can be a hex color string like `#FF0000` or a CSS color name like `\"red\"`.\n- `localizedName`: The localized name of the script in the current system language.\n- `localizedNames`: A record of localized names for different languages. Keys are language codes (e.g., `\"en\"`, `\"zh\"`), and values are the localized names.\n- `description`: The description of the script in English.\n- `localizedDescription`: The localized description in the current system language.\n- `localizedDescriptions`: A record of localized descriptions for different languages.\n- `version`: The version string of the script.\n- `author`: The script author's metadata:\n\n  - `name`: The author's name\n  - `email`: The author's email address\n  - `homepage`: (optional) The author’s homepage\n- `contributors`: An array of contributor objects with the same structure as `author`\n- `remoteResource`: Information about a remote resource for this script:\n\n  - `url`: The URL of the remote resource (e.g., a `.zip` or Git repository)\n  - `autoUpdateInterval`: (optional) The auto-update interval in seconds. If not provided, auto-update is disabled.\n\n```ts\nconsole.log(Script.metadata.localizedName) // e.g., \"天气助手\"\nconsole.log(Script.metadata.version)       // e.g., \"1.2.0\"\n```\n\n***\n\n## Methods\n\n### `Script.exit(result?): void`\n\nEnds the script and optionally returns a result. This is required to release resources properly.\n\n- `result?: any | IntentValue`: Any value or `IntentValue` object to return to the caller (e.g., Shortcuts or another script).\n\n```ts\nScript.exit(\"Done\")\n\n// or return structured value\nScript.exit(Intent.json({ status: \"ok\" }))\n```\n\n***\n\n### `Script.run<T>(options:): Promise<T | null>`\n\nRuns another script programmatically and waits for its result.\n\n- `options.name`: The name of the script to run.\n- `options.queryParameters`: Optional data to pass.\n- `options.singleMode`: If `true`, ensures only one instance of the script runs.\n\nReturns: the value passed from `Script.exit(result)` in the target script.\n\n```ts\nconst result = await Script.run({\n  name: \"ProcessData\",\n  queryParameters: { input: \"abc\" }\n})\n\nconsole.log(result)\n```\n\n***\n\n### `Script.createRunURLScheme(scriptName, queryParameters?): string`\n\nCreates a `scripting://run` URL to launch and execute a script.\n\n```ts\nconst url = Script.createRunURLScheme(\"MyScript\", { user: \"Alice\" })\n// \"scripting://run/MyScript?user=Alice\"\n```\n\n***\n\n### `Script.createRunSingleURLScheme(scriptName, queryParameters?): string`\n\nCreates a `scripting://run_single` URL that ensures only one instance of the script runs.\n\n```ts\nconst url = Script.createRunSingleURLScheme(\"MyScript\", { id: \"1\" })\n// \"scripting://run_single/MyScript?id=1\"\n```\n\n***\n\n### `Script.createOpenURLScheme(scriptName): string`\n\nCreates a `scripting://open` URL to open a script in the editor.\n\n```ts\nconst url = Script.createOpenURLScheme(\"MyScript\")\n// \"scripting://open/MyScript\"\n```\n\n***\n\n### `Script.createDocumentationURLScheme(title?): string`\n\nGenerates a URL to open the documentation page in the Scripting app.\n\n- `title`: Optional. If provided, opens a specific documentation topic.\n\n```ts\nconst url = Script.createDocumentationURLScheme(\"Widgets\")\n// \"scripting://doc?title=Widgets\"\n```\n\n***\n\n### `createImportScriptsURLScheme(urls): string`\n\nGenerates a URL scheme for importing scripts from the specified URLs.\n\n- `urls: string[]`: An array of URLs to import scripts from.\n\n```ts\nconst urlScheme = Script.createImportScriptsURLScheme([\n  \"https://github.com/schl3ck/scripting-app-lib\",\n  \"https://example.com/my-script.zip\",\n])\n// \"scripting://import_scripts?urls=...\"\n```\n\n***\n\n### `hasFullAccess(): boolean`\n\nDetermine whether user has full access to the Scripting PRO features.\n\nReturns: `true` if the user has full access to the Scripting PRO features, otherwise `false`.\n\n```ts\nif (Script.hasFullAccess()) {\n  // use Scripting PRO features\n  Assistant.requestStructedData(...)\n}\n```\n\n***\n\n## Notes\n\n- Always call `Script.exit()` to properly terminate a script and free memory.\n- Use `Script.run()` to chain or modularize scripts and retrieve structured results.\n- URL schemes can be used in external apps (like Shortcuts) to trigger scripts with parameters.\n- `singleMode` is recommended for scripts that must not run in parallel.\n","routePath":"/doc/Script","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":281},{"id":"name-string","text":"`name: string`","depth":3,"charIndex":296},{"id":"directory-string","text":"`directory: string`","depth":3,"charIndex":420},{"id":"env-string","text":"`env: string`","depth":3,"charIndex":586},{"id":"possible-values","text":"Possible Values:","depth":3,"charIndex":827},{"id":"example","text":"Example:","depth":3,"charIndex":2621},{"id":"widgetparameter-string","text":"`widgetParameter: string`","depth":3,"charIndex":2800},{"id":"queryparameters-recordstring-string","text":"`queryParameters: Record<string, string>`","depth":3,"charIndex":2999},{"id":"metadata---","text":"`metadata: { ... }`","depth":3,"charIndex":3262},{"id":"methods","text":"Methods","depth":2,"charIndex":4658},{"id":"scriptexitresult-void","text":"`Script.exit(result?): void`","depth":3,"charIndex":4670},{"id":"scriptruntoptions-promiset--null","text":"`Script.run<T>(options:): Promise<T | null>`","depth":3,"charIndex":5040},{"id":"scriptcreaterunurlschemescriptname-queryparameters-string","text":"`Script.createRunURLScheme(scriptName, queryParameters?): string`","depth":3,"charIndex":5546},{"id":"scriptcreaterunsingleurlschemescriptname-queryparameters-string","text":"`Script.createRunSingleURLScheme(scriptName, queryParameters?): string`","depth":3,"charIndex":5808},{"id":"scriptcreateopenurlschemescriptname-string","text":"`Script.createOpenURLScheme(scriptName): string`","depth":3,"charIndex":6103},{"id":"scriptcreatedocumentationurlschemetitle-string","text":"`Script.createDocumentationURLScheme(title?): string`","depth":3,"charIndex":6321},{"id":"createimportscriptsurlschemeurls-string","text":"`createImportScriptsURLScheme(urls): string`","depth":3,"charIndex":6633},{"id":"hasfullaccess-boolean","text":"`hasFullAccess(): boolean`","depth":3,"charIndex":7021},{"id":"notes","text":"Notes","depth":2,"charIndex":7336}],"frontmatter":{},"version":"","description":"The Script module provides context and utility functions for managing script execution in the Scripting app. It enables you to access runtime metadata, terminate scripts with results, run other scripts programmatically, and construct URL schemes to launch or open scripts."},{"title":"Alignment","content":"The `Alignment` type defines how to position content within a view’s frame, mirroring the behavior of SwiftUI’s built-in alignments. By applying an `Alignment` value, you can control where elements will be placed if they have extra space or need to align in a specific way.\n\n## Overview\n\n`Alignment` is useful when you have containers like `VStack`, `HStack`, `ZStack`, or any layout that involves stacking, layering, or positioning multiple views. By choosing an alignment, you tell the layout system how to position these views relative to each other or their container.\n\nFor example, a `ZStack` with a `topLeading` alignment will place its content toward the top-left corner of the container, while a `bottomTrailing` alignment puts it toward the bottom-right corner.\n\n## Available Alignments\n\n- **Basic Alignments:**\n  - **`top`**: Aligns content along the top edge.\n  - **`center`**: Centers content both horizontally and vertically.\n  - **`bottom`**: Aligns content along the bottom edge.\n  - **`leading`**: Aligns content along the leading edge (left side in left-to-right languages).\n  - **`trailing`**: Aligns content along the trailing edge (right side in left-to-right languages).\n\n- **Compound Alignments:**\n  - **`topLeading`**: Aligns content at the top and leading edges.\n  - **`topTrailing`**: Aligns content at the top and trailing edges.\n  - **`bottomLeading`**: Aligns content at the bottom and leading edges.\n  - **`bottomTrailing`**: Aligns content at the bottom and trailing edges.\n\n- **Text Baseline Alignments:**\n  Baseline alignments are useful when arranging text-containing views so their text aligns at a common baseline.\n  - **`centerFirstTextBaseline`**\n  - **`centerLastTextBaseline`**\n  - **`leadingFirstTextBaseline`**\n  - **`leadingLastTextBaseline`**\n  - **`trailingFirstTextBaseline`**\n  - **`trailingLastTextBaseline`**\n\n## Example Usage\n\n**Center Alignment**\n\n```tsx\n<ZStack alignment=\"center\">\n  <Rectangle fill=\"gray\" frame={{width: 100, height: 100}} />\n  <Text font=\"title\">Centered Text</Text>\n</ZStack>\n```\n\nIn this example, the `Text` will be centered within the `Rectangle`.\n\n**Top Leading Alignment**\n\n```tsx\n<ZStack alignment=\"topLeading\">\n  <Rectangle fill=\"gray\" frame={{width: 200, height: 200}} />\n  <Text>I'm at the top-left!</Text>\n</ZStack>\n```\n\nHere, the `Text` appears in the top-left corner of the gray rectangle.\n\n**Baseline Alignment with HStack**\n\n```tsx\n<HStack alignment=\"leadingFirstTextBaseline\">\n  <Text font=\"largeTitle\">Big Title</Text>\n  <Text font=\"title\">Smaller Subtitle</Text>\n</HStack>\n```\n\nThis aligns the two texts so that their first lines of text share a baseline, keeping them visually aligned even though they’re different sizes.\n\n## Summary\n\n`Alignment` gives you fine-grained control over how content is positioned within a container. By selecting the appropriate alignment—whether it’s a basic edge-based alignment or a more advanced text-baseline alignment—you ensure your UI elements look visually coherent and intuitive.\n","routePath":"/doc/Types/Alignment","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":275},{"id":"available-alignments","text":"Available Alignments","depth":2,"charIndex":772},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":1858},{"id":"summary","text":"Summary","depth":2,"charIndex":2711}],"frontmatter":{},"version":"","description":"The Alignment type defines how to position content within a view’s frame, mirroring the behavior of SwiftUI’s built-in alignments. By applying an Alignment value, you can control where elements will be placed if they have extra space or need to align in a specific way."},{"title":"Color","content":"The `Color` API supports various color formats, including HEX strings, RGBA strings, and predefined color keywords. It integrates seamlessly with SwiftUI's color system to provide vibrant, adaptive colors for your UI designs.\n\n## `Color` Type\n\nThe `Color` type can represent colors in one of three formats:\n\n1. **HEX String**: Standard hexadecimal color codes.\n2. **RGBA String**: CSS-like color strings with red, green, blue, and alpha components.\n3. **Keyword Colors**: A set of predefined system and semantic colors.\n\n### Supported Formats\n\n#### 1. HEX String (`ColorStringHex`)\n\n- **Format**: `#RRGGBB` or `#RGB`\n- **Example**:\n  ```tsx\n  const primaryColor: Color = \"#FF5733\"\n  const secondaryColor: Color = \"#333\"\n  ```\n\n#### 2. RGBA String (`ColorStringRGBA`)\n\n- **Format**: `rgba(R, G, B, A)`\n  - `R`: Red, 0–255\n  - `G`: Green, 0–255\n  - `B`: Blue, 0–255\n  - `A`: Alpha, 0–1 (transparency)\n- **Example**:\n  ```tsx\n  const transparentBlack: Color = \"rgba(0, 0, 0, 0.5)\"\n  const semiTransparentRed: Color = \"rgba(255, 0, 0, 0.8)\"\n  ```\n\n#### 3. Keyword Colors (`KeywordsColor`)\n\nPredefined system colors that adapt to the current system appearance (light or dark mode) and accessibility settings. These colors provide consistency with native iOS apps.\n\n- **Examples**:\n  ```tsx\n  const systemAccent: Color = \"accentColor\"\n  const systemBackground: Color = \"systemBackground\"\n  const linkColor: Color = \"link\"\n  const customGray: Color = \"systemGray4\"\n  ```\n\n### List of Keyword Colors\n\n#### System Colors\n\n- `accentColor`\n- `systemRed`, `systemGreen`, `systemBlue`, `systemOrange`, `systemYellow`, `systemPink`, `systemPurple`, `systemTeal`, `systemIndigo`, `systemBrown`, `systemMint`, `systemCyan`\n\n#### Semantic Colors\n\n- **Labels**: `label`, `secondaryLabel`, `tertiaryLabel`, `quaternaryLabel`\n- **Fill Colors**: `systemFill`, `secondarySystemFill`, `tertiarySystemFill`, `quaternarySystemFill`\n- **Backgrounds**:\n  - `systemBackground`, `secondarySystemBackground`, `tertiarySystemBackground`\n  - `systemGroupedBackground`, `secondarySystemGroupedBackground`, `tertiarySystemGroupedBackground`\n- **Separators**: `separator`, `opaqueSeparator`\n\n#### Legacy Colors\n\n- `black`, `darkGray`, `lightGray`, `white`, `gray`, `red`, `green`, `blue`, `cyan`, `yellow`, `magenta`, `orange`, `purple`, `brown`, `clear`\n\n### Usage in TSX Components\n\n```tsx\n\n\nfunction MyView() {\n  return (\n    <VStack background=\"systemBackground\">\n      <Text foregroundStyle=\"accentColor\">\n        Welcome to the Scripting App!\n      </Text>\n    </VStack>\n  )\n}\n```\n\nThis component uses system adaptive colors to maintain consistency with the iOS appearance.\n\n### Notes\n\n- **Performance**: When using keyword colors, the app ensures the color adapts dynamically to system settings such as Dark Mode.\n- **Validation**: Invalid color strings may throw errors during runtime. Ensure your color strings conform to the expected format.\n","routePath":"/doc/Types/Color","lang":"en","toc":[{"id":"color-type","text":"`Color` Type","depth":2,"charIndex":227},{"id":"supported-formats","text":"Supported Formats","depth":3,"charIndex":521},{"id":"1-hex-string-colorstringhex","text":"1. HEX String (`ColorStringHex`)","depth":4,"charIndex":544},{"id":"2-rgba-string-colorstringrgba","text":"2. RGBA String (`ColorStringRGBA`)","depth":4,"charIndex":727},{"id":"3-keyword-colors-keywordscolor","text":"3. Keyword Colors (`KeywordsColor`)","depth":4,"charIndex":1044},{"id":"list-of-keyword-colors","text":"List of Keyword Colors","depth":3,"charIndex":1465},{"id":"system-colors","text":"System Colors","depth":4,"charIndex":1493},{"id":"semantic-colors","text":"Semantic Colors","depth":4,"charIndex":1708},{"id":"legacy-colors","text":"Legacy Colors","depth":4,"charIndex":2157},{"id":"usage-in-tsx-components","text":"Usage in TSX Components","depth":3,"charIndex":2321},{"id":"notes","text":"Notes","depth":3,"charIndex":2646}],"frontmatter":{},"version":"","description":"The Color API supports various color formats, including HEX strings, RGBA strings, and predefined color keywords. It integrates seamlessly with SwiftUI's color system to provide vibrant, adaptive colors for your UI designs."},{"title":"DynamicShapeStyle","content":"The `DynamicShapeStyle` type allows you to define two distinct styles for a shape—one for light mode and another for dark mode. The system automatically applies the appropriate style based on the current color scheme (light or dark) of the user’s device.\n\n## Overview\n\nDynamic styling is a critical aspect of creating adaptive and visually appealing user interfaces. With `DynamicShapeStyle`, you can ensure that your shapes blend seamlessly with the user's preferred color scheme by defining separate styles for light and dark modes.\n\n**Key points:**\n\n- Define a style for **light mode** using the `light` property.\n- Define a style for **dark mode** using the `dark` property.\n- The system will automatically apply the appropriate style based on the user's current settings.\n\n## Declaration\n\n```tsx\ntype DynamicShapeStyle = {\n    light: ShapeStyle;\n    dark: ShapeStyle;\n};\n```\n\n- **`light: ShapeStyle`**\\\n  The style to apply when the system is in light mode.\n\n- **`dark: ShapeStyle`**\\\n  The style to apply when the system is in dark mode.\n\n### Supported `ShapeStyle`\n\nThe `ShapeStyle` can be a color, gradient, or material. For example:\n\n- **Colors**: Solid colors like `\"red\"`, hex values like `\"#FF0000\"`, or CSS-like RGBA strings like `\"rgba(255, 0, 0, 1)\"`.\n- **Gradients**: Linear or radial gradients.\n- **Materials**: System materials like `\"regularMaterial\"`, `\"thickMaterial\"`.\n\n## Example Usage\n\n### Using Dynamic Colors\n\n```tsx\nconst dynamicStyle: DynamicShapeStyle = {\n  light: \"blue\",\n  dark: \"gray\"\n}\n\n<Text\n  foregroundStyle={dynamicStyle}\n/>\n```\n\nIn this example, the shape appears **blue** in light mode and **gray** in dark mode.\n\n### Using Dynamic Gradients\n\n```tsx\nconst dynamicStyle: DynamicShapeStyle = {\n  light: {\n    gradient: [\n      { color: \"lightblue\", location: 0 },\n      { color: \"white\", location: 1 }\n    ],\n    startPoint: { x: 0, y: 0 },\n    endPoint: { x: 1, y: 1 }\n  },\n  dark: {\n    gradient: [\n      { color: \"darkblue\", location: 0 },\n      { color: \"black\", location: 1 }\n    ],\n    startPoint: { x: 0, y: 0 },\n    endPoint: { x: 1, y: 1 }\n  }\n}\n\n<Circle\n  fill={dynamicStyle}\n/>\n```\n\nHere, the shape uses a **light blue to white gradient** in light mode and a **dark blue to black gradient** in dark mode.\n\n### Using Materials\n\n```tsx\nconst dynamicStyle: DynamicShapeStyle = {\n  light: \"regularMaterial\",\n  dark: \"ultraThickMaterial\"\n}\n\n<HStack\n  background={dynamicStyle}\n></HStack>\n```\n\nThis configuration applies a **regular material** in light mode and an **ultra-thick material** in dark mode.\n\n## Why Use `DynamicShapeStyle`?\n\nDynamic styling helps create a better user experience by ensuring:\n\n1. **Visual Harmony**: Your shapes adapt to the user's color scheme, maintaining aesthetic coherence.\n2. **Accessibility**: Adjusting styles for dark mode improves readability and usability in low-light environments.\n3. **Consistency**: Aligns your app's appearance with system-wide preferences, making it feel more integrated.\n\n## Summary\n\nWith `DynamicShapeStyle`, you can create flexible and adaptive styles for shapes that seamlessly respond to the user's color scheme. By defining separate styles for light and dark modes, your app will look great in any environment, ensuring a consistent and user-friendly experience.\n","routePath":"/doc/Types/DynamicShapeStyle","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":256},{"id":"declaration","text":"Declaration","depth":2,"charIndex":778},{"id":"supported-shapestyle","text":"Supported `ShapeStyle`","depth":3,"charIndex":1045},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":1392},{"id":"using-dynamic-colors","text":"Using Dynamic Colors","depth":3,"charIndex":1410},{"id":"using-dynamic-gradients","text":"Using Dynamic Gradients","depth":3,"charIndex":1653},{"id":"using-materials","text":"Using Materials","depth":3,"charIndex":2254},{"id":"why-use-dynamicshapestyle","text":"Why Use `DynamicShapeStyle`?","depth":2,"charIndex":2547},{"id":"summary","text":"Summary","depth":2,"charIndex":2977}],"frontmatter":{},"version":"","description":"The DynamicShapeStyle type allows you to define two distinct styles for a shape—one for light mode and another for dark mode. The system automatically applies the appropriate style based on the current color scheme (light or dark) of the user’s device."},{"title":"Shape","content":"The `Shape` type defines a visual clipping or background shape used in view modifiers such as `clipShape`, `background`, or `border`. It mirrors SwiftUI's `Shape` protocol and supports standard system shapes and custom rounded rectangle configurations.\n\n***\n\n## Overview\n\nA `Shape` can be:\n\n- A **named shape keyword** (`'circle'`, `'rect'`, etc.)\n- A **custom shape object** that defines corner radius or per-corner rounding.\n\nThese shapes are aligned within the frame of the containing view and are commonly used for clipping, masking, or background styling.\n\n***\n\n## Built-in Shapes\n\n### `'rect'`\n\nA standard rectangle. Can be customized with corner radius via the object form.\n\n```tsx\nclipShape=\"rect\"\n```\n\n***\n\n### `'circle'`\n\nA perfect circle centered within the view’s frame. Its radius is half the length of the frame's shortest side.\n\n```tsx\nclipShape=\"circle\"\n```\n\n***\n\n### `'capsule'`\n\nAn elongated oval shape that spans the full width or height of the frame. Equivalent to a rounded rectangle with a corner radius equal to half of the shorter side.\n\n```tsx\nclipShape=\"capsule\"\n```\n\n***\n\n### `'ellipse'`\n\nAn ellipse that fills the frame.\n\n```tsx\nclipShape=\"ellipse\"\n```\n\n***\n\n### `'buttonBorder'`\n\nA system-resolved shape for button borders. It automatically adapts based on platform and system context.\n\n```tsx\nclipShape=\"buttonBorder\"\n```\n\n***\n\n### `'containerRelative'`\n\nA container-adaptive shape. If a container shape is defined in the view hierarchy, this resolves to a version of that shape. Otherwise, it defaults to a rectangle.\n\n```tsx\nclipShape=\"containerRelative\"\n```\n\n***\n\n## Custom Rectangle Shapes\n\nTo customize corner appearance on a rectangle, use one of the following object forms:\n\n***\n\n### Rounded Rectangle with Uniform Corner Radius\n\n```ts\n{\n  type: 'rect',\n  cornerRadius: number,\n  style?: RoundedCornerStyle\n}\n```\n\n- `cornerRadius`: Radius applied uniformly to all corners.\n- `style` (optional): Corner style, such as `'circular'` or `'continuous'`.\n\n#### Example\n\n```tsx\nclipShape={{\n  type: 'rect',\n  cornerRadius: 12,\n  style: 'continuous'\n}}\n```\n\n***\n\n### Rounded Rectangle with Corner Size\n\n```ts\n{\n  type: 'rect',\n  cornerSize: {\n    width: number\n    height: number\n  },\n  style?: RoundedCornerStyle\n}\n```\n\n- Allows specifying an elliptical radius with different width and height.\n\n#### Example\n\n```tsx\nclipShape={{\n  type: 'rect',\n  cornerSize: { width: 10, height: 20 }\n}}\n```\n\n***\n\n### Rounded Rectangle with Per-Corner Radii\n\n```ts\n{\n  type: 'rect',\n  cornerRadii: {\n    topLeading: number,\n    topTrailing: number,\n    bottomLeading: number,\n    bottomTrailing: number\n  },\n  style?: RoundedCornerStyle\n}\n```\n\n- Gives precise control over the rounding of each corner individually.\n\n#### Example\n\n```tsx\nclipShape={{\n  type: 'rect',\n  cornerRadii: {\n    topLeading: 10,\n    topTrailing: 20,\n    bottomLeading: 0,\n    bottomTrailing: 30\n  }\n}}\n```\n\n***\n\n## `RoundedCornerStyle`\n\nOptional style that affects the curvature:\n\n- `\"circular\"`: Traditional iOS-style round corners.\n- `\"continuous\"` (default): Smooth and adaptive curves, typically used in modern UI designs.\n\n***\n\n## Summary Table\n\n| Shape Type            | Description                                                         |\n| --------------------- | ------------------------------------------------------------------- |\n| `'rect'`              | Plain rectangle                                                     |\n| `'circle'`            | Circle inside the smallest side of the frame                        |\n| `'capsule'`           | Rounded shape spanning width or height                              |\n| `'ellipse'`           | Ellipse stretched to frame                                          |\n| `'buttonBorder'`      | Adaptive button outline shape                                       |\n| `'containerRelative'` | Depends on parent container shape; falls back to rectangle          |\n| `custom rect`         | Rectangles with specific corner radius or per-corner configurations |\n","routePath":"/doc/Types/Shape","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":259},{"id":"built-in-shapes","text":"Built-in Shapes","depth":2,"charIndex":567},{"id":"rect","text":"`'rect'`","depth":3,"charIndex":587},{"id":"circle","text":"`'circle'`","depth":3,"charIndex":716},{"id":"capsule","text":"`'capsule'`","depth":3,"charIndex":880},{"id":"ellipse","text":"`'ellipse'`","depth":3,"charIndex":1099},{"id":"buttonborder","text":"`'buttonBorder'`","depth":3,"charIndex":1187},{"id":"containerrelative","text":"`'containerRelative'`","depth":3,"charIndex":1358},{"id":"custom-rectangle-shapes","text":"Custom Rectangle Shapes","depth":2,"charIndex":1597},{"id":"rounded-rectangle-with-uniform-corner-radius","text":"Rounded Rectangle with Uniform Corner Radius","depth":3,"charIndex":1717},{"id":"example","text":"Example","depth":4,"charIndex":1987},{"id":"rounded-rectangle-with-corner-size","text":"Rounded Rectangle with Corner Size","depth":3,"charIndex":2092},{"id":"example-1","text":"Example","depth":4,"charIndex":2325},{"id":"rounded-rectangle-with-per-corner-radii","text":"Rounded Rectangle with Per-Corner Radii","depth":3,"charIndex":2428},{"id":"example-2","text":"Example","depth":4,"charIndex":2730},{"id":"roundedcornerstyle","text":"`RoundedCornerStyle`","depth":2,"charIndex":2900},{"id":"summary-table","text":"Summary Table","depth":2,"charIndex":3121}],"frontmatter":{},"version":"","description":"The Shape type defines a visual clipping or background shape used in view modifiers such as clipShape, background, or border. It mirrors SwiftUI's Shape protocol and supports standard system shapes and custom rounded rectangle configurations."},{"title":"ShapeStyle","content":"The `ShapeStyle` type defines how colors, gradients, and materials can be applied to a view’s foreground or background, mirroring the styling capabilities found in SwiftUI. It encompasses a wide range of styling options, including simple colors, system materials, and complex gradients.\n\n## Overview\n\nWhen using modifiers like `foregroundStyle` or `background`, you can supply a `ShapeStyle` to determine the visual appearance. For example, a solid red background, a system material blur, or a linear gradient can all be represented using `ShapeStyle`.\n\n**In SwiftUI (for reference):**\n\n```swift\nText(\"Hello\")\n    .foregroundStyle(.red)\n    .background(\n        LinearGradient(\n            colors: [.green, .blue],\n            startPoint: .top,\n            endPoint: .bottom\n        )\n    )\n```\n\n**In Scripting (TypeScript/TSX):**\n\n```tsx\n<Text\n  foregroundStyle=\"red\"\n  background={{\n    gradient: [\n      { color: 'green', location: 0 },\n      { color: 'blue', location: 1 }\n    ],\n    startPoint: { x: 0.5, y: 0 },\n    endPoint: { x: 0.5, y: 1 }\n  }}\n>\n  Hello\n</Text>\n```\n\n## ShapeStyle Variants\n\nThe `ShapeStyle` type can be one of the following:\n\n1. **Material**: System-defined materials that create layered effects, often adding blur or translucency.\n2. **Color**: A solid color, which can be defined using keywords, hex strings, or RGBA strings.\n3. **Gradient**: A collection of colors or gradient stops that produce a smooth color transition.\n4. **LinearGradient**: A gradient that progresses linearly from a start point to an end point.\n5. **RadialGradient**: A gradient that radiates outward from a center point.\n6. **AngularGradient**: An angular gradient is also known as a “conic” gradient. This gradient applies the color function as the angle changes, relative to a center point and defined start and end angles.\n7. **MeshGradient**: A two-dimensional gradient defined by a 2D grid of positioned colors.\n8. **ColorWithGradientOrOpacity**: A combination of a base color that can produce a standard gradient automatically or have an adjusted opacity.\n\n### Materials\n\n**Material** refers to system blur effects like `regularMaterial`, `thinMaterial`, and so forth. They give your UI the distinctive “frosted” look often seen in native iOS apps.\n\n**Example:**\n\n```tsx\n<HStack background=\"regularMaterial\">\n  {/* Content here */}\n</HStack>\n```\n\n### Colors\n\n**Colors** can be defined in three ways:\n\n- **Keyword Colors**: System and named colors (e.g. `\"systemBlue\"`, `\"red\"`, `\"label\"`).\n- **Hex Strings**: Like CSS hex (`\"#FF0000\"` or `\"#F00\"` for red).\n- **RGBA Strings**: CSS rgba notation (`\"rgba(255,0,0,1)\"` for opaque red).\n\n**Example:**\n\n```tsx\n<Text foregroundStyle=\"blue\">Blue Text</Text>\n<HStack background=\"#00FF00\">Green Background</HStack>\n<HStack background=\"rgba(255,255,255,0.5)\">Semi-transparent White Background</HStack>\n```\n\n### Gradients\n\n**Gradient** is defined as either an array of `Color` values or an array of `GradientStop` objects, where each `GradientStop` includes a `color` and a `location` (0 to 1) to define the transition.\n\n**Example:**\n\n```tsx\n<HStack\n  background={\n    gradient([\n      { color: 'red', location: 0 },\n      { color: 'orange', location: 0.5 },\n      { color: 'yellow', location: 1 }\n    ])\n  }\n>\n  {/* Content */}\n</HStack>\n```\n\n### LinearGradient\n\n**LinearGradient** lets you define a gradient that moves along a straight line between two points. You specify colors or stops, and the start/end points either as keywords (`'top'`, `'bottom'`, `'leading'`, `'trailing'`) or as `Point` objects (`{x: number, y: number}`).\n\n**Example:**\n\n```tsx\n<HStack\n  background={\n    gradient(\"linear\", {\n      colors: ['green', 'blue'],\n      startPoint: 'top',\n      endPoint: 'bottom'\n    })\n  }\n>\n  {/* Content */}\n</HStack>\n```\n\nOr, using gradient stops with custom coordinates:\n\n```tsx\n<HStack\n  background={\n    gradient(\"linear\", {\n      stops: [\n        { color: 'green', location: 0 },\n        { color: 'blue', location: 1 }\n      ],\n      startPoint: { x: 0.5, y: 0 },\n      endPoint: { x: 0.5, y: 1 }\n    })\n  }\n>\n  {/* Content */}\n</HStack>\n```\n\n### RadialGradient\n\n**RadialGradient** spreads out colors from a central point, defined by a `center` coordinate, and transitions from a `startRadius` to an `endRadius`.\n\n**Example:**\n\n```tsx\n<HStack\n  background={\n    gradient(\"radial\", {\n      colors: ['red', 'yellow'],\n      center: { x: 0.5, y: 0.5 },\n      startRadius: 0,\n      endRadius: 100\n    })\n  }\n>\n  {/* Content */}\n</HStack>\n```\n\n### AngularGradient\n\nAn `AngularGradient` defines a color gradient that sweeps around a center point in an angular (circular) fashion. It is useful for creating effects such as progress rings or circular transitions.\n\n#### Definition\n\nAn `AngularGradient` can be defined in one of several ways:\n\n```ts\ntype AngularGradient =\n  | { stops: GradientStop[], center: KeywordPoint | Point, startAngle: Angle, endAngle: Angle }\n  | { colors: Color[], center: KeywordPoint | Point, startAngle: Angle, endAngle: Angle }\n  | { gradient: Gradient, center: KeywordPoint | Point, startAngle: Angle, endAngle: Angle }\n  | { stops: GradientStop[], center: KeywordPoint | Point, angle: Angle }\n  | { colors: Color[], center: KeywordPoint | Point, angle: Angle }\n  | { gradient: Gradient, center: KeywordPoint | Point, angle: Angle }\n```\n\n#### Parameters\n\n- **`colors`** or **`stops`**: Specifies the colors or color stops used in the gradient.\n- **`center`**: The point around which the angular sweep is performed. Can be a named keyword (e.g., `\"center\"`, `\"top\"`) or a custom `Point`.\n- **`startAngle`** and **`endAngle`**: Defines the angular sweep range.\n- **`angle`** (optional alternative): A single angle that defines the full sweep extent.\n\n#### Example\n\n```tsx\n<Circle\n  fill={gradient(\"angular\", {\n    colors: [\"blue\", \"purple\", \"pink\"],\n    center: \"center\",\n    startAngle: 0,\n    endAngle: 360\n  })}\n/>\n```\n\nIn this example, a circular gradient fills a shape, sweeping clockwise from blue to pink around the center.\n\n### MeshGradient (iOS 18.0+)\n\nA `MeshGradient` is a two-dimensional gradient composed of a grid of colored control points. It offers fine-grained control over both color and shape, allowing for complex, dynamic gradient effects.\n\n#### Definition\n\n```ts\ntype MeshGradient = {\n  width: number\n  height: number\n  points: Point[]\n  colors: Color[]\n  background?: Color\n  smoothsColors?: boolean\n}\n```\n\n#### Parameters\n\n- **`width`**: Number of vertices per row.\n- **`height`**: Number of vertices per column.\n- **`points`**: The control points of the mesh (must match `width × height`).\n- **`colors`**: The color assigned to each point (must also match `width × height`).\n- **`background`** (optional): Color for the area outside the mesh. Defaults to `\"clear\"`.\n- **`smoothsColors`** (optional): Whether color interpolation should be smooth (defaults to `true`).\n\n> Note: Mesh gradients are supported on **iOS 18.0 and above**.\n\n#### Example\n\n```tsx\n<Rectangle\n  fill={gradient(\"mesh\", {\n    width: 2,\n    height: 2,\n    points: [\n      { x: 0, y: 0 },\n      { x: 1, y: 0 },\n      { x: 0, y: 1 },\n      { x: 1, y: 1 }\n    ],\n    colors: [\"red\", \"yellow\", \"blue\", \"green\"]\n  })}\n/>\n```\n\nThis example defines a 2x2 mesh grid with color transitions across four control points in a rectangle.\n\n### `gradient()` Utility Function\n\nThe `gradient()` helper function makes the code more readable and expressive. It supports all gradient types.\n\n#### Signature\n\n```ts\nfunction gradient(gradient: Gradient): Gradient\nfunction gradient(type: \"linear\", gradient: LinearGradient): LinearGradient\nfunction gradient(type: \"radial\", gradient: RadialGradient): RadialGradient\nfunction gradient(type: \"angular\", gradient: AngularGradient): AngularGradient\nfunction gradient(type: \"mesh\", gradient: MeshGradient): MeshGradient\n```\n\n#### Description\n\n- When used with one argument: `gradient(Gradient)` returns the input gradient as-is.\n- When used with two arguments: the first argument specifies the type, and the second provides the gradient configuration.\n\n#### Example\n\n```tsx\n<Text\n  foregroundStyle={\n    gradient(\"linear\", {\n      colors: [\"red\", \"orange\"],\n      startPoint: \"leading\",\n      endPoint: \"trailing\"\n    })\n  }\n>\n  Hello World!\n</Text>\n```\n\n### ColorWithGradientOrOpacity\n\nWith `ColorWithGradientOrOpacity`, you start with a `color` and then can specify a `gradient: true` property to use its standard gradient variation, or apply an `opacity` factor to make it translucent.\n\n**Example:**\n\n```tsx\n<HStack\n  background={{\n    color: 'blue',\n    gradient: true,\n    opacity: 0.8\n  }}\n>\n  {/* Content */}\n</HStack>\n```\n\nThis would create a gradient variation of the base color and apply an 80% opacity.\n\n## Summary\n\n- Use **Materials** for system blur effects.\n- Use **Colors** for solid fills.\n- Use **Gradients**, **LinearGradient**, **RadialGradient**, **AngularGradient** or **MeshGradient** for smooth transitions between multiple colors.\n- Use **ColorWithGradientOrOpacity** to adjust color opacity or use a standard color-derived gradient.\n\nBy choosing the appropriate variant of `ShapeStyle`, you can easily style elements with the desired appearance in your UI—whether you need a simple color fill, a dynamic gradient, or a polished material effect.\n","routePath":"/doc/Types/ShapeStyle","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":288},{"id":"shapestyle-variants","text":"ShapeStyle Variants","depth":2,"charIndex":1077},{"id":"materials","text":"Materials","depth":3,"charIndex":2067},{"id":"colors","text":"Colors","depth":3,"charIndex":2357},{"id":"gradients","text":"Gradients","depth":3,"charIndex":2857},{"id":"lineargradient","text":"LinearGradient","depth":3,"charIndex":3293},{"id":"radialgradient","text":"RadialGradient","depth":3,"charIndex":4108},{"id":"angulargradient","text":"AngularGradient","depth":3,"charIndex":4504},{"id":"definition","text":"Definition","depth":4,"charIndex":4722},{"id":"parameters","text":"Parameters","depth":4,"charIndex":5326},{"id":"example","text":"Example","depth":4,"charIndex":5737},{"id":"meshgradient-ios-180","text":"MeshGradient (iOS 18.0+)","depth":3,"charIndex":6018},{"id":"definition-1","text":"Definition","depth":4,"charIndex":6248},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":6416},{"id":"example-1","text":"Example","depth":4,"charIndex":6944},{"id":"gradient-utility-function","text":"`gradient()` Utility Function","depth":3,"charIndex":7305},{"id":"signature","text":"Signature","depth":4,"charIndex":7451},{"id":"description","text":"Description","depth":4,"charIndex":7827},{"id":"example-2","text":"Example","depth":4,"charIndex":8055},{"id":"colorwithgradientoropacity","text":"ColorWithGradientOrOpacity","depth":3,"charIndex":8257},{"id":"summary","text":"Summary","depth":2,"charIndex":8717}],"frontmatter":{},"version":"","description":"The ShapeStyle type defines how colors, gradients, and materials can be applied to a view’s foreground or background, mirroring the styling capabilities found in SwiftUI. It encompasses a wide range of styling options, including simple colors, system materials, and complex gradients."},{"title":"App Events","content":"The `AppEvents` module in the Scripting app provides an interface to observe global application state changes, such as scene lifecycle transitions and changes in system-wide appearance (light/dark mode). These capabilities are essential for writing responsive scripts that react appropriately to runtime context.\n\n***\n\n## Scene Lifecycle\n\n### `ScenePhase`\n\n```ts\ntype ScenePhase = 'active' | 'inactive' | 'background'\n```\n\nRepresents the state of the app’s scene:\n\n- **`active`** – The app is in the foreground and interactive.\n- **`inactive`** – The app is in transition or temporarily inactive.\n- **`background`** – The app is running in the background and not visible.\n\n***\n\n## Color Scheme\n\n### `ColorScheme`\n\n```ts\ntype ColorScheme = 'light' | 'dark'\n```\n\nReflects the current appearance mode of the device:\n\n- **`light`** – Light mode UI\n- **`dark`** – Dark mode UI\n\n***\n\n## `AppEventListenerManager<T>`\n\n```ts\nclass AppEventListenerManager<T> {\n  addListener(listener: (data: T) => void): void\n  removeListener(listener: (data: T) => void): void\n}\n```\n\nA generic event manager that allows you to register and unregister listeners dynamically. Used for both `scenePhase` and `colorScheme`.\n\n***\n\n## `AppEvents` Class\n\n```ts\nclass AppEvents {\n  static scenePhase: AppEventListenerManager<ScenePhase>\n  static colorScheme: AppEventListenerManager<ColorScheme>\n}\n```\n\n### `AppEvents.scenePhase`\n\nListen for scene phase transitions. Ideal for responding to foreground/background state changes.\n\n#### Example\n\n```ts\nAppEvents.scenePhase.addListener((phase) => {\n  if (phase === 'active') {\n    console.log(\"App is active\")\n  } else if (phase === 'background') {\n    console.log(\"App is in background\")\n  }\n})\n```\n\n***\n\n### `AppEvents.colorScheme`\n\nObserve system-wide light/dark appearance changes in real time.\n\n#### Example\n\n```ts\nAppEvents.colorScheme.addListener((scheme) => {\n  console.log(`Current color scheme: ${scheme}`)\n})\n```\n\n***\n\n## `useColorScheme()` Hook\n\n```ts\ndeclare function useColorScheme(): ColorScheme\n```\n\n### Description\n\nThis hook provides a reactive way to access the current `ColorScheme` (`'light'` or `'dark'`) within a component. It automatically updates the value when the system theme changes.\n\n### Example\n\n```tsx\nfunction ThemedView() {\n  const colorScheme = useColorScheme()\n\n  return <Text>\n    {colorScheme === 'dark' ? 'Dark Mode Active' : 'Light Mode Active'}\n  </Text>\n}\n```\n\n***\n\n## Notes\n\n- Listeners registered with `AppEvents` should be manually removed when no longer needed to prevent memory leaks.\n- `useColorScheme()` is the recommended way to reactively reflect the current theme in your components.\n- These APIs allow you to respond to system and app-level state changes in a clean, declarative way—without relying on imperative lifecycle logic.\n","routePath":"/doc/Utilities/App Events","lang":"en","toc":[{"id":"scene-lifecycle","text":"Scene Lifecycle","depth":2,"charIndex":319},{"id":"scenephase","text":"`ScenePhase`","depth":3,"charIndex":339},{"id":"color-scheme","text":"Color Scheme","depth":2,"charIndex":678},{"id":"colorscheme","text":"`ColorScheme`","depth":3,"charIndex":695},{"id":"appeventlistenermanagert","text":"`AppEventListenerManager<T>`","depth":2,"charIndex":878},{"id":"appevents-class","text":"`AppEvents` Class","depth":2,"charIndex":1202},{"id":"appeventsscenephase","text":"`AppEvents.scenePhase`","depth":3,"charIndex":1371},{"id":"example","text":"Example","depth":4,"charIndex":1497},{"id":"appeventscolorscheme","text":"`AppEvents.colorScheme`","depth":3,"charIndex":1720},{"id":"example-1","text":"Example","depth":4,"charIndex":1814},{"id":"usecolorscheme-hook","text":"`useColorScheme()` Hook","depth":2,"charIndex":1944},{"id":"description","text":"Description","depth":3,"charIndex":2030},{"id":"example-2","text":"Example","depth":3,"charIndex":2228},{"id":"notes","text":"Notes","depth":2,"charIndex":2422}],"frontmatter":{},"version":"","description":"The AppEvents module in the Scripting app provides an interface to observe global application state changes, such as scene lifecycle transitions and changes in system-wide appearance (light/dark mode). These capabilities are essential for writing responsive scripts that react appropriately to runtime context."},{"title":"Archive <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Archive \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `Archive` class provides a comprehensive interface for working with archive files (such as ZIP).\nIt supports reading, creating, updating, and extracting entries from archives, with both **asynchronous** and **synchronous** methods.\n\n***\n\n## Overview\n\n`Archive` enables flexible management of compressed archive contents, including:\n\n- Opening existing archives or creating new ones\n- Adding files, directories, or in-memory data\n- Extracting entries to memory or disk\n- Deleting specific entries\n- Listing archive contents\n- Supporting multiple compression methods (e.g. `deflate`, `none`)\n- Working in either synchronous or asynchronous modes\n\n***\n\n## Static Methods\n\n### `static openForMode(path: string, accessMode: \"update\" | \"read\", options?: { pathEncoding?: Encoding }): Archive`\n\nOpens an archive file.\n\n**Parameters:**\n\n| Name                   | Type       | Description                                                                 |                                                                                          |\n| ---------------------- | ---------- | --------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |\n| `path`                 | `string`   | The file path of the archive.                                               |                                                                                          |\n| `accessMode`           | `\"update\"` | `\"read\"`                                                                    | The access mode: - `\"read\"`: open for reading only. - `\"update\"`: open for modification. |\n| `options.pathEncoding` | `Encoding` | Optional. The path encoding used inside the archive (default is `\"utf-8\"`). |                                                                                          |\n\n**Returns:**\nAn `Archive` object.\n\n**Example:**\n\n```ts\nconst archive = Archive.openForMode(\"/tmp/example.zip\", \"update\")\n```\n\n***\n\n## Properties\n\n### `path: string`\n\nThe path of the archive file.\n\n**Example:**\n\n```ts\nconsole.log(archive.path)\n```\n\n***\n\n### `data: Data | null`\n\nThe raw data of the archive (if opened from memory).\n\n***\n\n## Instance Methods\n\n### `entries(pathEncoding?: Encoding): ArchiveEntry[]`\n\nRetrieves the entries in the archive.\n\n**Parameters:**\n\n`pathEncoding`: Optional. The encoding to use for decoding entry paths (default is `\"utf-8\"`).\n\n**Returns:**\nAn array of `ArchiveEntry` objects.\n\n***\n\n### `getEntryPaths(encoding?: Encoding): string[]`\n\nRetrieves the paths of all entries in the archive.\n\n**Parameters:**\n\n`encoding`: Optional. The encoding to use for decoding entry paths (default is `\"utf-8\"`).\n\n**Returns:**\nAn array of entry paths.\n\n***\n\n### `getEntry(path: string): ArchiveEntry | null`\n\nRetrieves an entry by its path.\n\n**Parameters:**\n\n`path`: The path of the entry to retrieve.\n\n**Returns:**\nThe `ArchiveEntry` object if found; otherwise, `null`.\n\n***\n\n### `contains(path: string): boolean`\n\nChecks whether the archive contains a specific entry.\n\n**Parameters:**\n\n`path`: The path of the entry to check.\n\n**Returns:**\n`true` if the path exists; otherwise, `false`.\n\n**Example:**\n\n```ts\nif (archive.contains(\"README.md\")) {\n  console.log(\"Archive contains README.md\")\n}\n```\n\n***\n\n### `addEntry(path: string, toPath: string, options?: { compressionMethod?: \"deflate\" | \"none\"; bufferSize?: number }): Promise<void>`\n\nAdds an existing file to the archive (asynchronously).\n\n**Parameters:**\n\n| Name                        | Type        | Description                                  |                                         |\n| --------------------------- | ----------- | -------------------------------------------- | --------------------------------------- |\n| `path`                      | `string`    | The source file path.                        |                                         |\n| `toPath`                    | `string`    | The destination path inside the archive.     |                                         |\n| `options.compressionMethod` | `\"deflate\"` | `\"none\"`                                     | Compression method (default: `\"none\"`). |\n| `options.bufferSize`        | `number`    | Buffer size in bytes (default: `16 * 1024`). |                                         |\n\n**Example:**\n\n```ts\nawait archive.addEntry(\"/tmp/input.txt\", \"docs/input.txt\", {\n  compressionMethod: \"deflate\"\n})\n```\n\n***\n\n### `addEntrySync(path: string, toPath: string, options?)`\n\nSynchronous version of `addEntry()`.\nThrows an error if the entry cannot be added.\n\n***\n\n### `addFileEntry(path: string, uncompressedSize: number, provider: (offset: number, length: number) => Data, options?): Promise<void>`\n\nAdds a file entry to the archive using a data provider function (asynchronous).\n\n**Parameters:**\n\n| Name                        | Type                                       | Description                                   |                                         |\n| --------------------------- | ------------------------------------------ | --------------------------------------------- | --------------------------------------- |\n| `path`                      | `string`                                   | The target file path inside the archive.      |                                         |\n| `uncompressedSize`          | `number`                                   | The uncompressed file size.                   |                                         |\n| `provider`                  | `(offset: number, length: number) => Data` | A function that provides file data by chunks. |                                         |\n| `options.modificationDate`  | `Date`                                     | Optional modification date.                   |                                         |\n| `options.compressionMethod` | `\"deflate\"`                                | `\"none\"`                                      | Compression method (default: `\"none\"`). |\n| `options.bufferSize`        | `number`                                   | Buffer size in bytes (default: `16 * 1024`).  |                                         |\n\n**Example:**\n\n```ts\nconst data = Data.fromRawString(\"abcdefg\".repeat(100))\nawait archive.addFileEntry(\"fromMemory.txt\", data.count, (offset, length) => {\n  return data.slice(offset, offset + length)\n})\n```\n\n***\n\n### `addFileEntrySync(...)`\n\nSynchronous version of `addFileEntry()`.\n\n***\n\n### `addDirectoryEntry(path: string, options?): Promise<void>`\n\nAdds a directory entry to the archive.\n\n**Parameters:**\n\n| Name                        | Type        | Description                         |                                         |\n| --------------------------- | ----------- | ----------------------------------- | --------------------------------------- |\n| `path`                      | `string`    | Directory path to add.              |                                         |\n| `options.modificationDate`  | `Date`      | Optional modification date.         |                                         |\n| `options.compressionMethod` | `\"deflate\"` | `\"none\"`                            | Compression method (default: `\"none\"`). |\n| `options.bufferSize`        | `number`    | Buffer size (default: `16 * 1024`). |                                         |\n\n**Example:**\n\n```ts\nawait archive.addDirectoryEntry(\"images/\")\n```\n\n***\n\n### `addDirectoryEntrySync(...)`\n\nSynchronous version of `addDirectoryEntry()`.\n\n***\n\n### `removeEntry(path: string, options?): Promise<void>`\n\nRemoves a specific entry from the archive (asynchronously).\n\n**Parameters:**\n\n| Name                 | Type     | Description                         |\n| -------------------- | -------- | ----------------------------------- |\n| `path`               | `string` | The path of the entry to remove.    |\n| `options.bufferSize` | `number` | Buffer size (default: `16 * 1024`). |\n\n**Example:**\n\n```ts\nawait archive.removeEntry(\"old/file.txt\")\n```\n\n***\n\n### `removeEntrySync(...)`\n\nSynchronous version of `removeEntry()`.\n\n***\n\n### `extract(path: string, consumer: (data: Data) => void, options?): Promise<void>`\n\nExtracts a specific entry from the archive and provides its data in chunks via a consumer callback (asynchronous).\n\n**Parameters:**\n\n| Name                 | Type                   | Description                            |\n| -------------------- | ---------------------- | -------------------------------------- |\n| `path`               | `string`               | The path of the entry to extract.      |\n| `consumer`           | `(data: Data) => void` | A callback to process each data chunk. |\n| `options.bufferSize` | `number`               | Buffer size (default: `16 * 1024`).    |\n\n**Example:**\n\n```ts\nawait archive.extract(\"docs/manual.txt\", (chunk) => {\n  console.log(\"Received chunk:\", chunk.count)\n})\n```\n\n***\n\n### `extractSync(...)`\n\nSynchronous version of `extract()`.\n\n***\n\n### `extractTo(path: string, to: string, options?): Promise<void>`\n\nExtracts an entry or directory from the archive to a specific file system location (asynchronously).\n\n**Parameters:**\n\n| Name                               | Type      | Description                                               |\n| ---------------------------------- | --------- | --------------------------------------------------------- |\n| `path`                             | `string`  | Path of the entry inside the archive.                     |\n| `to`                               | `string`  | Target path to extract to.                                |\n| `options.bufferSize`               | `number`  | Buffer size (default: `16 * 1024`).                       |\n| `options.allowUncontainedSymlinks` | `boolean` | Whether to allow uncontained symlinks (default: `false`). |\n\n**Example:**\n\n```ts\nawait archive.extractTo(\"docs/\", \"/tmp/extracted/\")\n```\n\n***\n\n### `extractToSync(...)`\n\nSynchronous version of `extractTo()`.\n\n***\n\n## ArchiveEntry Interface\n\n`ArchiveEntry` represents a single entry (file, directory, or symbolic link) inside an archive.\n\n| Property           | Type                                                     | Description                      |             |                 |\n| ------------------ | -------------------------------------------------------- | -------------------------------- | ----------- | --------------- |\n| `path`             | `string`                                                 | The path of the entry.           |             |                 |\n| `type`             | `\"file\"`                                                 | `\"directory\"`                    | `\"symlink\"` | The entry type. |\n| `isCompressed`     | `boolean`                                                | Whether the entry is compressed. |             |                 |\n| `compressedSize`   | `number`                                                 | Compressed size in bytes.        |             |                 |\n| `uncompressedSize` | `number`                                                 | Uncompressed size in bytes.      |             |                 |\n| `fileAttributes`   | `{ posixPermissions?: number; modificationDate?: Date }` | File attributes.                 |             |                 |\n\n**Example:**\n\n```ts\nfor (const entry of archive.entries()) {\n  console.log(`[${entry.type}] ${entry.path} (${entry.uncompressedSize} bytes)`)\n}\n```\n\n***\n\n## Examples\n\n### Create a new archive and add files\n\n```ts\nconst archive = Archive.openForMode(\"/tmp/example.zip\", \"update\")\n\nawait archive.addEntry(\n  \"/tmp/hello.txt\",\n  \"docs/hello.txt\",\n  { compressionMethod: \"deflate\" }\n)\n\nawait archive.addDirectoryEntry(\"images/\")\nawait archive.addEntry(\"/tmp/logo.png\", \"images/logo.png\")\n\nconsole.log(\"Archive entries:\", archive.entries().length)\n```\n\n***\n\n### Extract a file to disk\n\n```ts\nconst archive = Archive.openForMode(\"/tmp/example.zip\", \"read\")\nawait archive.extractTo(\"docs/hello.txt\", \"/tmp/unpacked/hello.txt\")\n```\n","routePath":"/doc/Utilities/Archive","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":393},{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":805},{"id":"static-openformodepath-string-accessmode-update--read-options--pathencoding-encoding--archive","text":"`static openForMode(path: string, accessMode: \"update\" | \"read\", options?: { pathEncoding?: Encoding }): Archive`","depth":3,"charIndex":824},{"id":"properties","text":"Properties","depth":2,"charIndex":2161},{"id":"path-string","text":"`path: string`","depth":3,"charIndex":2176},{"id":"data-data--null","text":"`data: Data | null`","depth":3,"charIndex":2283},{"id":"instance-methods","text":"Instance Methods","depth":2,"charIndex":2367},{"id":"entriespathencoding-encoding-archiveentry","text":"`entries(pathEncoding?: Encoding): ArchiveEntry[]`","depth":3,"charIndex":2388},{"id":"getentrypathsencoding-encoding-string","text":"`getEntryPaths(encoding?: Encoding): string[]`","depth":3,"charIndex":2651},{"id":"getentrypath-string-archiveentry--null","text":"`getEntry(path: string): ArchiveEntry | null`","depth":3,"charIndex":2908},{"id":"containspath-string-boolean","text":"`contains(path: string): boolean`","depth":3,"charIndex":3127},{"id":"addentrypath-string-topath-string-options--compressionmethod-deflate--none-buffersize-number--promisevoid","text":"`addEntry(path: string, toPath: string, options?: { compressionMethod?: \"deflate\" | \"none\"; bufferSize?: number }): Promise<void>`","depth":3,"charIndex":3453},{"id":"addentrysyncpath-string-topath-string-options","text":"`addEntrySync(path: string, toPath: string, options?)`","depth":3,"charIndex":4598},{"id":"addfileentrypath-string-uncompressedsize-number-provider-offset-number-length-number--data-options-promisevoid","text":"`addFileEntry(path: string, uncompressedSize: number, provider: (offset: number, length: number) => Data, options?): Promise<void>`","depth":3,"charIndex":4747},{"id":"addfileentrysync","text":"`addFileEntrySync(...)`","depth":3,"charIndex":6531},{"id":"adddirectoryentrypath-string-options-promisevoid","text":"`addDirectoryEntry(path: string, options?): Promise<void>`","depth":3,"charIndex":6607},{"id":"adddirectoryentrysync","text":"`addDirectoryEntrySync(...)`","depth":3,"charIndex":7558},{"id":"removeentrypath-string-options-promisevoid","text":"`removeEntry(path: string, options?): Promise<void>`","depth":3,"charIndex":7644},{"id":"removeentrysync","text":"`removeEntrySync(...)`","depth":3,"charIndex":8149},{"id":"extractpath-string-consumer-data-data--void-options-promisevoid","text":"`extract(path: string, consumer: (data: Data) => void, options?): Promise<void>`","depth":3,"charIndex":8223},{"id":"extractsync","text":"`extractSync(...)`","depth":3,"charIndex":9031},{"id":"extracttopath-string-to-string-options-promisevoid","text":"`extractTo(path: string, to: string, options?): Promise<void>`","depth":3,"charIndex":9097},{"id":"extracttosync","text":"`extractToSync(...)`","depth":3,"charIndex":10033},{"id":"archiveentry-interface","text":"ArchiveEntry Interface","depth":2,"charIndex":10103},{"id":"examples","text":"Examples","depth":2,"charIndex":11574},{"id":"create-a-new-archive-and-add-files","text":"Create a new archive and add files","depth":3,"charIndex":11587},{"id":"extract-a-file-to-disk","text":"Extract a file to disk","depth":3,"charIndex":11973}],"frontmatter":{},"version":"","description":"The Archive class provides a comprehensive interface for working with archive files (such as ZIP).\nIt supports reading, creating, updating, and extracting entries from archives, with both asynchronous and synchronous methods."},{"title":"Crypto","content":"The `Crypto` module provides a set of cryptographic utilities for hashing, HMAC authentication, symmetric key generation, and AES-GCM encryption/decryption. It is designed to securely process `Data` instances using industry-standard algorithms.\n\n***\n\n## Overview\n\nThe `Crypto` module enables:\n\n- Hashing data with MD5, SHA-1, SHA-2 family (SHA-224, SHA-256, SHA-384, SHA-512)\n- Creating HMAC digests using a secret key\n- Generating random symmetric encryption keys\n- Encrypting and decrypting data with AES-GCM (authenticated encryption)\n\nAll operations are performed on the `Data` type, which encapsulates binary input/output.\n\n***\n\n## Functions\n\n### `Crypto.generateSymmetricKey(size?: number): Data`\n\nGenerates a new random symmetric key.\n\n- **Parameters:**\n\n  - `size` (optional): Key size in bits. Defaults to `256`.\n\n- **Returns:** A `Data` object representing the key.\n\n- **Example:**\n\n  ```ts\n  const key = Crypto.generateSymmetricKey() // 256-bit key\n  ```\n\n***\n\n### Hashing Functions\n\nThese functions return a cryptographic hash (digest) of the input data.\n\n#### `Crypto.md5(data: Data): Data`\n\nHashes the input data using the MD5 algorithm (128-bit output).\n\n- **Returns:** A `Data` object containing the MD5 digest.\n\n- **Example:**\n\n  ```ts\n  const data = Data.fromString(\"Hello\")\n  const hash = Crypto.md5(data).toHexString()\n  ```\n\n***\n\n#### `Crypto.sha1(data: Data): Data`\n\nUses the SHA-1 algorithm (160-bit output).\n\n- **Returns:** A `Data` object.\n\n***\n\n#### `Crypto.sha256(data: Data): Data`\n\nUses the SHA-256 algorithm (256-bit output).\n\n- **Returns:** A `Data` object.\n\n- **Example:**\n\n  ```ts\n  const hash = Crypto.sha256(Data.fromString(\"test\")).toHexString()\n  ```\n\n***\n\n#### `Crypto.sha384(data: Data): Data`\n\nUses the SHA-384 algorithm (384-bit output).\n\n- **Returns:** A `Data` object.\n\n***\n\n#### `Crypto.sha512(data: Data): Data`\n\nUses the SHA-512 algorithm (512-bit output).\n\n- **Returns:** A `Data` object.\n\n***\n\n### HMAC Functions\n\nThese functions generate a hash-based message authentication code (HMAC) using a shared secret key.\n\nAll return a `Data` object representing the HMAC digest.\n\n- **Parameters:**\n\n  - `data`: The message to authenticate (`Data`)\n  - `key`: The symmetric key (`Data`)\n\n***\n\n#### `Crypto.hmacMD5(data: Data, key: Data): Data`\n\nComputes HMAC using MD5.\n\n```ts\nconst key = Crypto.generateSymmetricKey()\nconst hmac = Crypto.hmacMD5(Data.fromString(\"msg\"), key).toHexString()\n```\n\n***\n\n#### `Crypto.hmacSHA1(data: Data, key: Data): Data`\n\nComputes HMAC using SHA-1.\n\n***\n\n#### `Crypto.hmacSHA224(data: Data, key: Data): Data`\n\nComputes HMAC using SHA-224.\n\n***\n\n#### `Crypto.hmacSHA256(data: Data, key: Data): Data`\n\nComputes HMAC using SHA-256.\n\n***\n\n#### `Crypto.hmacSHA384(data: Data, key: Data): Data`\n\nComputes HMAC using SHA-384.\n\n***\n\n#### `Crypto.hmacSHA512(data: Data, key: Data): Data`\n\nComputes HMAC using SHA-512.\n\n***\n\n## AES-GCM Encryption\n\n### `Crypto.encryptAESGCM(data: Data, key: Data, options?: { iv?: Data, aad?: Data }): Data | null`\n\nEncrypts the given data using AES-GCM with the provided key.\n\n- **Parameters:**\n\n  - `data`: The plaintext `Data` to encrypt\n  - `key`: A `Data` object representing the symmetric key\n  - `options` (optional):\n\n    - `iv`: Initialization vector (optional). If omitted, a random IV is used internally.\n    - `aad`: Additional authenticated data (optional). Used for authentication but not encrypted.\n\n- **Returns:** A `Data` object containing the encrypted ciphertext, or `null` on failure.\n\n- **Example:**\n\n  ```ts\n  const key = Crypto.generateSymmetricKey()\n  const plaintext = Data.fromString(\"secret message\")\n  const encrypted = Crypto.encryptAESGCM(plaintext, key)\n  ```\n\n***\n\n### `Crypto.decryptAESGCM(data: Data, key: Data, aad?: Data): Data | null`\n\nDecrypts AES-GCM-encrypted `Data` using the provided key and optional AAD.\n\n- **Parameters:**\n\n  - `data`: The encrypted data (`Data`)\n  - `key`: The symmetric key used to encrypt the data\n  - `aad` (optional): The additional authenticated data used during encryption (must match exactly)\n\n- **Returns:** The decrypted plaintext as `Data`, or `null` if decryption fails (e.g., tag mismatch or incorrect key).\n\n- **Example:**\n\n  ```ts\n  const decrypted = Crypto.decryptAESGCM(encrypted, key)\n  console.log(decrypted?.toRawString())\n  ```\n\n***\n\n## Summary of Algorithms\n\n| Function  | Output Size  | Use Case                   |\n| --------- | ------------ | -------------------------- |\n| `md5`     | 128 bits     | Legacy checksums           |\n| `sha1`    | 160 bits     | Compatibility              |\n| `sha256`  | 256 bits     | General-purpose security   |\n| `sha384`  | 384 bits     | Stronger hashing           |\n| `sha512`  | 512 bits     | High-security requirements |\n| `hmacXXX` | Same as hash | Authentication             |\n| `AES-GCM` | variable     | Authenticated encryption   |\n\n***\n\n## Full Example\n\n```ts\nconst key = Crypto.generateSymmetricKey()\nconst message = Data.fromString(\"Encrypt me\")\nconst encrypted = Crypto.encryptAESGCM(message, key)\nconst decrypted = encrypted ? Crypto.decryptAESGCM(encrypted, key) : null\n\nif (decrypted) {\n  console.log(\"Decrypted:\", decrypted.toRawString())\n}\n```\n\n***\n\n## Notes\n\n- All functions require valid `Data` objects.\n- For AES-GCM, if `iv` is omitted, a secure random IV is automatically applied.\n- Encrypted `Data` may include the IV and authentication tag.\n","routePath":"/doc/Utilities/Crypto","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":251},{"id":"functions","text":"Functions","depth":2,"charIndex":634},{"id":"cryptogeneratesymmetrickeysize-number-data","text":"`Crypto.generateSymmetricKey(size?: number): Data`","depth":3,"charIndex":648},{"id":"hashing-functions","text":"Hashing Functions","depth":3,"charIndex":972},{"id":"cryptomd5data-data-data","text":"`Crypto.md5(data: Data): Data`","depth":4,"charIndex":1068},{"id":"cryptosha1data-data-data","text":"`Crypto.sha1(data: Data): Data`","depth":4,"charIndex":1351},{"id":"cryptosha256data-data-data","text":"`Crypto.sha256(data: Data): Data`","depth":4,"charIndex":1471},{"id":"cryptosha384data-data-data","text":"`Crypto.sha384(data: Data): Data`","depth":4,"charIndex":1694},{"id":"cryptosha512data-data-data","text":"`Crypto.sha512(data: Data): Data`","depth":4,"charIndex":1818},{"id":"hmac-functions","text":"HMAC Functions","depth":3,"charIndex":1942},{"id":"cryptohmacmd5data-data-key-data-data","text":"`Crypto.hmacMD5(data: Data, key: Data): Data`","depth":4,"charIndex":2233},{"id":"cryptohmacsha1data-data-key-data-data","text":"`Crypto.hmacSHA1(data: Data, key: Data): Data`","depth":4,"charIndex":2440},{"id":"cryptohmacsha224data-data-key-data-data","text":"`Crypto.hmacSHA224(data: Data, key: Data): Data`","depth":4,"charIndex":2526},{"id":"cryptohmacsha256data-data-key-data-data","text":"`Crypto.hmacSHA256(data: Data, key: Data): Data`","depth":4,"charIndex":2616},{"id":"cryptohmacsha384data-data-key-data-data","text":"`Crypto.hmacSHA384(data: Data, key: Data): Data`","depth":4,"charIndex":2706},{"id":"cryptohmacsha512data-data-key-data-data","text":"`Crypto.hmacSHA512(data: Data, key: Data): Data`","depth":4,"charIndex":2796},{"id":"aes-gcm-encryption","text":"AES-GCM Encryption","depth":2,"charIndex":2886},{"id":"cryptoencryptaesgcmdata-data-key-data-options--iv-data-aad-data--data--null","text":"`Crypto.encryptAESGCM(data: Data, key: Data, options?: { iv?: Data, aad?: Data }): Data | null`","depth":3,"charIndex":2909},{"id":"cryptodecryptaesgcmdata-data-key-data-aad-data-data--null","text":"`Crypto.decryptAESGCM(data: Data, key: Data, aad?: Data): Data | null`","depth":3,"charIndex":3691},{"id":"summary-of-algorithms","text":"Summary of Algorithms","depth":2,"charIndex":4310},{"id":"full-example","text":"Full Example","depth":2,"charIndex":4864},{"id":"notes","text":"Notes","depth":2,"charIndex":5185}],"frontmatter":{},"version":"","description":"The Crypto module provides a set of cryptographic utilities for hashing, HMAC authentication, symmetric key generation, and AES-GCM encryption/decryption. It is designed to securely process Data instances using industry-standard algorithms."},{"title":"Data","content":"The `Data` class represents binary data in memory and provides a wide range of methods for manipulating, converting, compressing, decompressing, and transforming that data. It is useful for working with raw byte buffers, encoded files, images, and more.\n\n***\n\n## CompressionAlgorithm (Enum)\n\nSpecifies which compression algorithm to use when compressing or decompressing a `Data` instance:\n\n| Value   | Description                                               |\n| ------- | --------------------------------------------------------- |\n| `lzfse` | Fast and efficient compression using the LZFSE algorithm. |\n| `lz4`   | Very fast compression with moderate compression ratio.    |\n| `lzma`  | High compression ratio, slower performance.               |\n| `zlib`  | Standard and widely-used compression format.              |\n\n***\n\n## Instance Properties and Methods\n\n### `size: number`\n\nThe length of the data in bytes (read-only).\n\n***\n\n### `resetBytes(startIndex: number, endIndex: number): void`\n\nResets a range of bytes to zero.\n\n- `startIndex`: Starting index (inclusive)\n- `endIndex`: Ending index (exclusive)\n\nThrows an error if the indices are out of bounds.\n\n***\n\n### `advanced(amount: number): Data`\n\nReturns a new `Data` instance by removing the first `amount` bytes from the buffer.\n\n***\n\n### `replaceSubrange(startIndex, endIndex, data): void`\n\nReplaces a specified byte range with the content of another `Data` instance.\n\n***\n\n### `compressed(algorithm: CompressionAlgorithm): Data`\n\nCompresses the current data using the specified algorithm and returns a new `Data` instance.\n\nThrows an error if the data is empty or cannot be compressed.\n\n***\n\n### `decompressed(algorithm: CompressionAlgorithm): Data`\n\nDecompresses the current data using the specified algorithm and returns a new `Data` instance.\n\nMust use the same algorithm that was used to compress the data.\n\n***\n\n### `slice(start?: number, end?: number): Data`\n\nReturns a new `Data` instance representing a slice of the original.\n\n- `start`: Starting index (default is `0`)\n- `end`: Ending index (default is the end of the data)\n\n***\n\n### `append(other: Data): void`\n\nAppends another `Data` instance to the end of the current one.\n\n***\n\n### `getBytes(): Uint8Array | null` (Deprecated)\n\nUse `toUint8Array()` instead.\n\n***\n\n### `toUint8Array(): Uint8Array | null`\n\nConverts the data into a `Uint8Array`.\n\n***\n\n### `toArrayBuffer(): ArrayBuffer`\n\nConverts the data into an `ArrayBuffer`.\n\n***\n\n### `toBase64String(): string`\n\nReturns a Base64-encoded string representation of the data.\n\n***\n\n### `toHexString(): string`\n\nReturns a hexadecimal string representation of the data.\n\n***\n\n### `toRawString(encoding?: string): string | null`\n\nConverts the data into a string using the specified encoding (default: `\"utf-8\"`), strictly following the specified encoding, and returning `null` if the data is empty or cannot be converted to a string.\n\n***\n\n### `toDecodedString(encoding?: \"utf8\" | \"ascii\"): string`\n\nConverts the data into a decoded string using the specified encoding (default: `\"utf-8\"`), loosing any bad characters.\n\n***\n\n### `toIntArray(): number[]`\n\nReturns an array of integers representing the bytes of the data.\n\n***\n\n## Static Methods\n\n### `Data.fromIntArray(array: number[]): Data`\n\nCreates a `Data` instance from an array of integers.\n\n***\n\n### `Data.fromString(str: string, encoding?: string): Data | null` (Deprecated)\n\nUse `Data.fromRawString()` instead.\n\n***\n\n### `Data.fromRawString(str: string, encoding?: string): Data | null`\n\nCreates a `Data` instance from a raw string, using the specified encoding (default: `\"utf-8\"`).\n\n***\n\n### `Data.fromFile(filePath: string): Data | null`\n\nReads binary data from a file path and returns a `Data` instance.\n\n***\n\n### `Data.fromArrayBuffer(buffer: ArrayBuffer): Data | null`\n\nCreates a `Data` instance from an `ArrayBuffer`.\n\n***\n\n### `Data.fromUint8Array(bytes: Uint8Array): Data | null`\n\nCreates a `Data` instance from a `Uint8Array`.\n\n***\n\n### `Data.fromBase64String(base64: string): Data | null`\n\nCreates a `Data` instance from a Base64-encoded string.\n\n***\n\n### `Data.fromHexString(hex: string): Data | null`\n\nCreates a `Data` instance from a hexadecimal string.\n\n***\n\n### `Data.fromJPEG(image: UIImage, compressionQuality?: number): Data | null`\n\nConverts a `UIImage` to JPEG format data.\n\n- `compressionQuality`: Compression quality between `0.0` and `1.0` (default: `1.0`)\n\n***\n\n### `Data.fromPNG(image: UIImage): Data | null`\n\nConverts a `UIImage` to PNG format data.\n\n***\n\n### `Data.combine(dataList: Data[]): Data`\n\nCombines multiple `Data` instances into one.\n\nReturns `null` if the list is empty or all items are empty.\n","routePath":"/doc/Utilities/Data","lang":"en","toc":[{"id":"compressionalgorithm-enum","text":"CompressionAlgorithm (Enum)","depth":2,"charIndex":260},{"id":"instance-properties-and-methods","text":"Instance Properties and Methods","depth":2,"charIndex":829},{"id":"size-number","text":"`size: number`","depth":3,"charIndex":865},{"id":"resetbytesstartindex-number-endindex-number-void","text":"`resetBytes(startIndex: number, endIndex: number): void`","depth":3,"charIndex":936},{"id":"advancedamount-number-data","text":"`advanced(amount: number): Data`","depth":3,"charIndex":1171},{"id":"replacesubrangestartindex-endindex-data-void","text":"`replaceSubrange(startIndex, endIndex, data): void`","depth":3,"charIndex":1299},{"id":"compressedalgorithm-compressionalgorithm-data","text":"`compressed(algorithm: CompressionAlgorithm): Data`","depth":3,"charIndex":1439},{"id":"decompressedalgorithm-compressionalgorithm-data","text":"`decompressed(algorithm: CompressionAlgorithm): Data`","depth":3,"charIndex":1658},{"id":"slicestart-number-end-number-data","text":"`slice(start?: number, end?: number): Data`","depth":3,"charIndex":1883},{"id":"appendother-data-void","text":"`append(other: Data): void`","depth":3,"charIndex":2105},{"id":"getbytes-uint8array--null-deprecated","text":"`getBytes(): Uint8Array | null` (Deprecated)","depth":3,"charIndex":2207},{"id":"touint8array-uint8array--null","text":"`toUint8Array(): Uint8Array | null`","depth":3,"charIndex":2293},{"id":"toarraybuffer-arraybuffer","text":"`toArrayBuffer(): ArrayBuffer`","depth":3,"charIndex":2379},{"id":"tobase64string-string","text":"`toBase64String(): string`","depth":3,"charIndex":2462},{"id":"tohexstring-string","text":"`toHexString(): string`","depth":3,"charIndex":2560},{"id":"torawstringencoding-string-string--null","text":"`toRawString(encoding?: string): string | null`","depth":3,"charIndex":2652},{"id":"todecodedstringencoding-utf8--ascii-string","text":"`toDecodedString(encoding?: \"utf8\" | \"ascii\"): string`","depth":3,"charIndex":2915},{"id":"tointarray-number","text":"`toIntArray(): number[]`","depth":3,"charIndex":3100},{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":3201},{"id":"datafromintarrayarray-number-data","text":"`Data.fromIntArray(array: number[]): Data`","depth":3,"charIndex":3220},{"id":"datafromstringstr-string-encoding-string-data--null-deprecated","text":"`Data.fromString(str: string, encoding?: string): Data | null` (Deprecated)","depth":3,"charIndex":3327},{"id":"datafromrawstringstr-string-encoding-string-data--null","text":"`Data.fromRawString(str: string, encoding?: string): Data | null`","depth":3,"charIndex":3450},{"id":"datafromfilefilepath-string-data--null","text":"`Data.fromFile(filePath: string): Data | null`","depth":3,"charIndex":3623},{"id":"datafromarraybufferbuffer-arraybuffer-data--null","text":"`Data.fromArrayBuffer(buffer: ArrayBuffer): Data | null`","depth":3,"charIndex":3747},{"id":"datafromuint8arraybytes-uint8array-data--null","text":"`Data.fromUint8Array(bytes: Uint8Array): Data | null`","depth":3,"charIndex":3864},{"id":"datafrombase64stringbase64-string-data--null","text":"`Data.fromBase64String(base64: string): Data | null`","depth":3,"charIndex":3976},{"id":"datafromhexstringhex-string-data--null","text":"`Data.fromHexString(hex: string): Data | null`","depth":3,"charIndex":4096},{"id":"datafromjpegimage-uiimage-compressionquality-number-data--null","text":"`Data.fromJPEG(image: UIImage, compressionQuality?: number): Data | null`","depth":3,"charIndex":4207},{"id":"datafrompngimage-uiimage-data--null","text":"`Data.fromPNG(image: UIImage): Data | null`","depth":3,"charIndex":4420},{"id":"datacombinedatalist-data-data","text":"`Data.combine(dataList: Data[]): Data`","depth":3,"charIndex":4516}],"frontmatter":{},"version":"","description":"The Data class represents binary data in memory and provides a wide range of methods for manipulating, converting, compressing, decompressing, and transforming that data. It is useful for working with raw byte buffers, encoded files, images, and more."},{"title":"DateComponents","content":"The `DateComponents` class provides a flexible way to represent and manipulate individual components of a date and time value, such as year, month, day, hour, minute, second, and more. This class is modeled after Swift’s `DateComponents` and integrates with the current system calendar.\n\n***\n\n## Constructor\n\n```ts\nnew DateComponents(options?)\n```\n\n### Parameters\n\nThe constructor accepts an optional `options` object to initialize date/time fields:\n\n```ts\nconst components = new DateComponents({\n  year: 2025,\n  month: 6,\n  day: 24,\n  hour: 9,\n  minute: 30\n})\n```\n\n***\n\n## Static Methods\n\n### `DateComponents.fromDate(date: Date): DateComponents`\n\nCreates a `DateComponents` instance by extracting all possible components from a given `Date` object.\n\n#### Parameters\n\n- `date` (`Date`): The source date.\n\n#### Returns\n\n- A `DateComponents` instance with year, month, day, hour, minute, second, and nanosecond set.\n\n#### Example\n\n```ts\nconst now = new Date()\nconst components = DateComponents.fromDate(now)\nconsole.log(components.year, components.month)\n```\n\n***\n\n### `DateComponents.forHourly(date: Date): DateComponents`\n\nCreates a `DateComponents` instance representing the hourly trigger for scheduling purposes.\n\n- Sets: `minute`\n\n#### Example\n\n```ts\nconst components = DateComponents.forHourly(new Date())\n// Triggers every hour at the same minute as the provided date\n```\n\n***\n\n### `DateComponents.forDaily(date: Date): DateComponents`\n\nCreates a `DateComponents` instance representing the daily trigger.\n\n- Sets: `hour`, `minute`\n\n#### Example\n\n```ts\nconst components = DateComponents.forDaily(new Date())\n// Triggers daily at the same hour and minute as the provided date\n```\n\n***\n\n### `DateComponents.forWeekly(date: Date): DateComponents`\n\nCreates a `DateComponents` instance for weekly triggers, useful for weekly recurring events.\n\n- Sets: `weekday`, `hour`, `minute`\n\n#### Example\n\n```ts\nconst components = DateComponents.forWeekly(new Date())\n// Triggers weekly on the same weekday at the same time\n```\n\n***\n\n### `DateComponents.forMonthly(date: Date): DateComponents`\n\nCreates a `DateComponents` instance representing a monthly trigger.\n\n- Sets: `day`, `hour`, `minute`\n\n#### Example\n\n```ts\nconst components = DateComponents.forMonthly(new Date())\n// Triggers monthly on the same day and time\n```\n\n***\n\n## Properties\n\n### Read-only Properties\n\n- **`date?: Date | null`**\n  The computed `Date` object based on the current components using the current system calendar. Returns `null` if the components do not form a valid date.\n\n- **`isValidDate: boolean`**\n  Indicates whether the current combination of components forms a valid date.\n\n***\n\n### Date and Time Fields\n\nEach of these fields can be initialized via the constructor or set manually afterward. All are `number | null` unless otherwise stated.\n\n- `era`: The era of the date.\n\n- `year`: The year component.\n\n- `yearForWeekOfYear`: The year that corresponds to the week-based calendar.\n\n- `quarter`: The quarter of the year (1 to 4).\n\n- `month`: The month of the year (1 to 12).\n\n- `isLeapMonth`: Optional boolean indicating whether the month is a leap month.\n\n- `weekOfMonth`: The week number within the current month.\n\n- `weekOfYear`: The week number within the current year.\n\n- `weekday`: The day of the week (1 = Sunday, 2 = Monday, ..., 7 = Saturday).\n\n- `weekdayOrdinal`: The ordinal occurrence of the weekday in the month.\n\n  #### Example\n\n  ```ts\n  const components = new DateComponents()\n  components.weekday = 2             // Monday\n  components.weekdayOrdinal = 1      // First Monday of the month\n  ```\n\n- `day`: The day of the month.\n\n- `hour`: The hour of the day (0–23).\n\n- `minute`: The minute (0–59).\n\n- `second`: The second (0–59).\n\n- `nanosecond`: The nanosecond part of the time.\n\n- `dayOfYear`: The day of the year (1–366).\n\n***\n\n## Usage Example\n\n```ts\nconst components = new DateComponents({\n  year: 2025,\n  month: 12,\n  day: 25,\n  hour: 10,\n  minute: 0\n})\n\nif (components.isValidDate) {\n  console.log(\"Valid date:\", components.date)\n}\n```\n\nOr create from a `Date`:\n\n```ts\nconst now = new Date()\nconst components = DateComponents.fromDate(now)\nconsole.log(components.hour, components.minute)\n\nconst dailyTrigger = DateComponents.forDaily(new Date())\nconst weeklyTrigger = DateComponents.forWeekly(new Date())\n```\n\n***\n\n## Notes\n\n- `date` and `isValidDate` rely on the system’s calendar.\n- Use specialized static methods (`forDaily`, `forWeekly`, etc.) for easier creation of recurring triggers.\n- `DateComponents` is ideal for scheduling notifications, alarms, calendar events, and more.\n","routePath":"/doc/Utilities/DateComponents","lang":"en","toc":[{"id":"constructor","text":"Constructor","depth":2,"charIndex":293},{"id":"parameters","text":"Parameters","depth":3,"charIndex":349},{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":571},{"id":"datecomponentsfromdatedate-date-datecomponents","text":"`DateComponents.fromDate(date: Date): DateComponents`","depth":3,"charIndex":590},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":-1},{"id":"returns","text":"Returns","depth":4,"charIndex":806},{"id":"example","text":"Example","depth":4,"charIndex":916},{"id":"datecomponentsforhourlydate-date-datecomponents","text":"`DateComponents.forHourly(date: Date): DateComponents`","depth":3,"charIndex":1064},{"id":"example-1","text":"Example","depth":4,"charIndex":1236},{"id":"datecomponentsfordailydate-date-datecomponents","text":"`DateComponents.forDaily(date: Date): DateComponents`","depth":3,"charIndex":1385},{"id":"example-2","text":"Example","depth":4,"charIndex":1539},{"id":"datecomponentsforweeklydate-date-datecomponents","text":"`DateComponents.forWeekly(date: Date): DateComponents`","depth":3,"charIndex":1691},{"id":"example-3","text":"Example","depth":4,"charIndex":1882},{"id":"datecomponentsformonthlydate-date-datecomponents","text":"`DateComponents.forMonthly(date: Date): DateComponents`","depth":3,"charIndex":2024},{"id":"example-4","text":"Example","depth":4,"charIndex":2187},{"id":"properties","text":"Properties","depth":2,"charIndex":2319},{"id":"read-only-properties","text":"Read-only Properties","depth":3,"charIndex":2334},{"id":"date-and-time-fields","text":"Date and Time Fields","depth":3,"charIndex":2656},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":3824},{"id":"notes","text":"Notes","depth":2,"charIndex":4315}],"frontmatter":{},"version":"","description":"The DateComponents class provides a flexible way to represent and manipulate individual components of a date and time value, such as year, month, day, hour, minute, second, and more. This class is modeled after Swift’s DateComponents and integrates with the current system calendar."},{"title":"DateFormatter","content":"The `DateFormatter` class provides comprehensive date and time formatting capabilities. It allows converting `Date` objects into localized strings and parsing strings back into `Date` values.\nThis API wraps iOS-native date formatting behavior and supports multiple calendars, time zones, localized formats, and custom formatting templates.\n\n***\n\n# Enums and Type Definitions\n\n## DateFormatterStyle\n\nDefines the level of detail used for date or time formatting.\n\n| Value    | Description                                   |\n| -------- | --------------------------------------------- |\n| `none`   | No date or time displayed                     |\n| `short`  | Short format, e.g., `12/1/25`, `3:20 PM`      |\n| `medium` | Medium format, e.g., `Dec 1, 2025`            |\n| `long`   | Long format, e.g., `December 1, 2025`         |\n| `full`   | Full format, e.g., `Monday, December 1, 2025` |\n\n***\n\n## DateFormatterBehavior\n\nControls the formatter behavior mode.\n\n| Value          | Description                                  |\n| -------------- | -------------------------------------------- |\n| `default`      | System default behavior                      |\n| `behavior10_4` | Compatibility mode for older system behavior |\n\n***\n\n## CalendarIdentifier\n\nSpecifies the calendar used for formatting. This enables formatting using:\n\n- Gregorian calendar\n- Chinese lunar calendar\n- Japanese calendar\n- Islamic calendars\n- Buddhist calendar\n- ISO 8601 calendar\n  and more.\n\nExample values:\n\n```\n\"current\" | \"gregorian\" | \"chinese\" | \"japanese\" | \"islamic\" | \"iso8601\" | ...\n```\n\nNotes:\n\n- `\"current\"` uses the system’s current calendar\n- `\"autoupdatingCurrent\"` automatically updates when system settings change\n\n***\n\n## TimeZoneIdentifier\n\nSpecifies the time zone.\n\nAvailable values:\n\n```\n\"current\" | \"autoupdatingCurrent\" | \"gmt\" | string\n```\n\nIf a string is used, it must be a valid time-zone identifier such as:\n\n- `\"Asia/Shanghai\"`\n- `\"America/Los_Angeles\"`\n- `\"UTC\"`\n\n***\n\n# Class: DateFormatter\n\n## Initialization\n\n### `new(): DateFormatter`\n\nCreates a new date formatter instance.\n\n***\n\n# Static Methods\n\n## `DateFormatter.localizedString(date, options)`\n\nReturns a localized date string based on the specified date and time styles.\n\n```ts\nDateFormatter.localizedString(date: Date, options: {\n  dateStyle: DateFormatterStyle\n  timeStyle: DateFormatterStyle\n}): string\n```\n\nUseful for quick formatting without manually configuring a formatter instance.\n\n***\n\n## `DateFormatter.dateFormat(template, locale?)`\n\nGenerates a localized date format string based on a template.\n\n```\nstatic dateFormat(template: string, locale?: string): string | null\n```\n\nExamples of templates:\n\n- `\"yyyyMMdd\"`\n- `\"MMM d\"`\n- `\"HH:mm\"`\n\nIf `locale` is omitted, the system locale is used.\n\n***\n\n# Instance Methods\n\n## `string(date: Date): string`\n\nFormats a `Date` into a string.\n\nBehavior:\n\n- If `dateFormat` is set, it takes priority.\n- Otherwise, formatting is based on `dateStyle` and `timeStyle`.\n\n***\n\n## `date(string: string): Date | null`\n\nParses a string into a `Date` object.\nParsing behavior depends on properties such as `dateFormat`, `locale`, and `calendar`.\n\n***\n\n## `setLocalizedDateFormatFromTemplate(template: string): void`\n\nGenerates a localized format string from the template and assigns it to `dateFormat`.\n\n***\n\n# Properties\n\n## Core Formatting Properties\n\n### `calendar: CalendarIdentifier`\n\nDetermines the calendar system used for formatting.\nExamples: `\"gregorian\"`, `\"chinese\"`, `\"buddhist\"`.\n\n***\n\n### `timeZone: TimeZoneIdentifier`\n\nDefines the time zone, such as `\"Asia/Shanghai\"`.\n\n***\n\n### `locale: string`\n\nSpecifies the formatting locale, such as:\n\n- `\"zh_CN\"`\n- `\"en_US\"`\n- `\"ja_JP\"`\n\n***\n\n### `dateFormat: string`\n\nManually sets a custom date format template. Examples:\n\n```\n\"yyyy-MM-dd HH:mm\"\n\"MMM d, yyyy\"\n\"EEEE\"\n```\n\nWhen set, it overrides `dateStyle` and `timeStyle`.\n\n***\n\n### `dateStyle: DateFormatterStyle`\n\n### `timeStyle: DateFormatterStyle`\n\nControl the granularity of date and time output.\n\n***\n\n## Behavior Control\n\n### `generatesCalendarDates: boolean`\n\nControls whether the formatter generates calendar-based dates. Typically left as default.\n\n***\n\n### `formatterBehavior: DateFormatterBehavior`\n\nControls the formatter behavior mode.\n\n***\n\n### `isLenient: boolean`\n\nEnables lenient parsing of input strings, allowing more flexible interpretation.\nDefaults to `false` to avoid accidental incorrect parsing.\n\n***\n\n### `twoDigitStartDate: Date | null`\n\nDetermines the interpretation range for two-digit years.\n\n***\n\n### `defaultDate: Date | null`\n\nUsed when parsing strings that do not specify a full date.\n\n***\n\n## Localization Symbol Properties\n\nThese properties customize how months, weekdays, quarters, and eras are displayed:\n\n- `eraSymbols`\n- `monthSymbols`\n- `shortMonthSymbols`\n- `weekdaySymbols`\n- `shortWeekdaySymbols`\n- `standaloneMonthSymbols`\n- `quarterSymbols`\n- `veryShortWeekdaySymbols`\n- `amSymbol`\n- `pmSymbol`\n- `gregorianStartDate`\n\nThese are typically used only when overriding the system-provided localized symbols.\n\n***\n\n## Relative Date Formatting\n\n### `doesRelativeDateFormatting: boolean`\n\nEnables output like:\n\n- Today\n- Yesterday\n- Tomorrow\n\nin the corresponding locale.\n\nExample in Chinese:\n\n- 今天\n- 昨天\n\nOnly works with certain date styles (e.g., medium and long).\n\n***\n\n# Code Examples\n\n***\n\n## Example 1: Localized formatting using dateStyle and timeStyle\n\n```tsx\n\n\nconst df = new DateFormatter()\ndf.locale = \"zh_CN\"\ndf.dateStyle = DateFormatterStyle.full\ndf.timeStyle = DateFormatterStyle.short\n\nconst result = df.string(new Date())\n// Example output: \"Friday, December 12, 2025 at 3:20 PM\"\n```\n\n***\n\n## Example 2: Custom date format\n\n```tsx\nconst df = new DateFormatter()\ndf.locale = \"en_US\"\ndf.dateFormat = \"yyyy-MM-dd HH:mm\"\ndf.timeZone = \"Asia/Shanghai\"\n\nconst str = df.string(new Date())\n// Example output: \"2025-12-12 15:20\"\n```\n\n***\n\n## Example 3: Formatting using the Chinese lunar calendar\n\n```tsx\nconst df = new DateFormatter()\ndf.calendar = \"chinese\"\ndf.locale = \"zh_CN\"\ndf.dateFormat = \"yyyy年MM月dd日 EEEE\"\n\nconst lunar = df.string(new Date())\n// Example output: \"四十三年十月二十二日 星期五\"\n```\n\n***\n\n## Example 4: Parsing a date string\n\n```tsx\nconst df = new DateFormatter()\ndf.dateFormat = \"yyyy/MM/dd HH:mm\"\n\nconst date = df.date(\"2025/12/12 08:00\")\n```\n\n***\n\n## Example 5: Using a localized template\n\n```tsx\nconst df = new DateFormatter()\ndf.locale = \"zh_CN\"\n\n// Automatically becomes a localized format, e.g., \"12月12日\"\ndf.setLocalizedDateFormatFromTemplate(\"MMdd\")\n\nconst result = df.string(new Date())\n```\n\n***\n\n## Example 6: Quick formatting using localizedString\n\n```tsx\nconst str = DateFormatter.localizedString(new Date(), {\n  dateStyle: DateFormatterStyle.medium,\n  timeStyle: DateFormatterStyle.short\n})\n```\n","routePath":"/doc/Utilities/DateFormatter","lang":"en","toc":[{"id":"dateformatterstyle","text":"DateFormatterStyle","depth":2,"charIndex":376},{"id":"dateformatterbehavior","text":"DateFormatterBehavior","depth":2,"charIndex":895},{"id":"calendaridentifier","text":"CalendarIdentifier","depth":2,"charIndex":1230},{"id":"timezoneidentifier","text":"TimeZoneIdentifier","depth":2,"charIndex":1712},{"id":"initialization","text":"Initialization","depth":2,"charIndex":1997},{"id":"new-dateformatter","text":"`new(): DateFormatter`","depth":3,"charIndex":2016},{"id":"dateformatterlocalizedstringdate-options","text":"`DateFormatter.localizedString(date, options)`","depth":2,"charIndex":2107},{"id":"dateformatterdateformattemplate-locale","text":"`DateFormatter.dateFormat(template, locale?)`","depth":2,"charIndex":2460},{"id":"stringdate-date-string","text":"`string(date: Date): string`","depth":2,"charIndex":2791},{"id":"datestring-string-date--null","text":"`date(string: string): Date | null`","depth":2,"charIndex":2984},{"id":"setlocalizeddateformatfromtemplatetemplate-string-void","text":"`setLocalizedDateFormatFromTemplate(template: string): void`","depth":2,"charIndex":3155},{"id":"core-formatting-properties","text":"Core Formatting Properties","depth":2,"charIndex":3326},{"id":"calendar-calendaridentifier","text":"`calendar: CalendarIdentifier`","depth":3,"charIndex":3357},{"id":"timezone-timezoneidentifier","text":"`timeZone: TimeZoneIdentifier`","depth":3,"charIndex":3503},{"id":"locale-string","text":"`locale: string`","depth":3,"charIndex":3595},{"id":"dateformat-string","text":"`dateFormat: string`","depth":3,"charIndex":3702},{"id":"datestyle-dateformatterstyle","text":"`dateStyle: DateFormatterStyle`","depth":3,"charIndex":3891},{"id":"timestyle-dateformatterstyle","text":"`timeStyle: DateFormatterStyle`","depth":3,"charIndex":3928},{"id":"behavior-control","text":"Behavior Control","depth":2,"charIndex":4020},{"id":"generatescalendardates-boolean","text":"`generatesCalendarDates: boolean`","depth":3,"charIndex":4041},{"id":"formatterbehavior-dateformatterbehavior","text":"`formatterBehavior: DateFormatterBehavior`","depth":3,"charIndex":4176},{"id":"islenient-boolean","text":"`isLenient: boolean`","depth":3,"charIndex":4268},{"id":"twodigitstartdate-date--null","text":"`twoDigitStartDate: Date | null`","depth":3,"charIndex":4440},{"id":"defaultdate-date--null","text":"`defaultDate: Date | null`","depth":3,"charIndex":4541},{"id":"localization-symbol-properties","text":"Localization Symbol Properties","depth":2,"charIndex":4638},{"id":"relative-date-formatting","text":"Relative Date Formatting","depth":2,"charIndex":5069},{"id":"doesrelativedateformatting-boolean","text":"`doesRelativeDateFormatting: boolean`","depth":3,"charIndex":5098},{"id":"example-1-localized-formatting-using-datestyle-and-timestyle","text":"Example 1: Localized formatting using dateStyle and timeStyle","depth":2,"charIndex":5346},{"id":"example-2-custom-date-format","text":"Example 2: Custom date format","depth":2,"charIndex":5657},{"id":"example-3-formatting-using-the-chinese-lunar-calendar","text":"Example 3: Formatting using the Chinese lunar calendar","depth":2,"charIndex":5897},{"id":"example-4-parsing-a-date-string","text":"Example 4: Parsing a date string","depth":2,"charIndex":6156},{"id":"example-5-using-a-localized-template","text":"Example 5: Using a localized template","depth":2,"charIndex":6318},{"id":"example-6-quick-formatting-using-localizedstring","text":"Example 6: Quick formatting using localizedString","depth":2,"charIndex":6573}],"frontmatter":{},"version":"","description":"The DateFormatter class provides comprehensive date and time formatting capabilities. It allows converting Date objects into localized strings and parsing strings back into Date values.\nThis API wraps iOS-native date formatting behavior and supports multiple calendars, time zones, localized formats, and custom formatting templates."},{"title":"Encoding","content":"The `Encoding` type defines a set of supported character encodings used by methods like:\n\n- `Data.fromRawString(str, encoding)` — converts a text string into binary data using the specified encoding.\n- `Data.toRawString(encoding)` — converts binary data back into a string using the specified encoding.\n\nThese encodings allow interoperability with various text formats and systems, ensuring compatibility across languages and platforms.\n\n***\n\n## Available Encodings\n\n| Encoding                | Description                                                                                                                                                                                                                  |\n| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **\"utf-8\" / \"utf8\"**    | UTF-8 (8-bit Unicode Transformation Format). The most common encoding for web and modern text processing. Efficient for ASCII-compatible text and supports all Unicode characters.                                           |\n| **\"utf-16\" / \"utf16\"**  | UTF-16 (16-bit Unicode Transformation Format). Common in Windows and Apple platforms. Each character typically uses 2 bytes.                                                                                                 |\n| **\"utf-32\" / \"utf32\"**  | UTF-32 (32-bit Unicode Transformation Format). Fixed 4-byte representation per character, used for direct Unicode code point manipulation.                                                                                   |\n| **\"ascii\"**             | American Standard Code for Information Interchange. Represents English letters, digits, and basic symbols using one byte (0–127).                                                                                            |\n| **\"iso2022JP\"**         | ISO-2022-JP. A Japanese character encoding used for emails and legacy systems. Supports JIS X 0201/0208 character sets.                                                                                                      |\n| **\"isoLatin1\"**         | ISO-8859-1 (Latin-1). Covers Western European languages such as English, French, German, and Spanish.                                                                                                                        |\n| **\"japaneseEUC\"**       | EUC-JP (Extended Unix Code for Japanese). Another Japanese encoding, used mainly in Unix systems.                                                                                                                            |\n| **\"macOSRoman\"**        | Apple’s MacRoman encoding, historically used on classic Mac OS before Unicode adoption.                                                                                                                                      |\n| **\"nextstep\"**          | NextStep encoding (NS encoding). A legacy encoding from NeXTSTEP systems. Rarely used today.                                                                                                                                 |\n| **\"nonLossyASCII\"**     | Non-lossy ASCII encoding. Ensures that any Unicode string can be safely represented as ASCII escape sequences and later restored without data loss.                                                                          |\n| **\"shiftJIS\"**          | Shift-JIS encoding for Japanese text, commonly used on Windows in Japan.                                                                                                                                                     |\n| **\"symbol\"**            | Symbol encoding, used for specialized symbol fonts such as the Symbol typeface.                                                                                                                                              |\n| **\"unicode\"**           | A general alias for Unicode encodings (usually UTF-16). Behaves similarly to `\"utf16\"`.                                                                                                                                      |\n| **\"utf16BigEndian\"**    | UTF-16 with big-endian byte order. The most significant byte (MSB) comes first.                                                                                                                                              |\n| **\"utf16LittleEndian\"** | UTF-16 with little-endian byte order. The least significant byte (LSB) comes first.                                                                                                                                          |\n| **\"utf32BigEndian\"**    | UTF-32 with big-endian byte order.                                                                                                                                                                                           |\n| **\"utf32LittleEndian\"** | UTF-32 with little-endian byte order.                                                                                                                                                                                        |\n| **\"windowsCP1250\"**     | Windows code page 1250 for Central and Eastern European languages (e.g., Polish, Czech, Hungarian).                                                                                                                          |\n| **\"windowsCP1251\"**     | Windows code page 1251 for Cyrillic scripts (e.g., Russian, Bulgarian, Serbian).                                                                                                                                             |\n| **\"windowsCP1252\"**     | Windows code page 1252 for Western European languages (similar to Latin-1 but includes additional symbols).                                                                                                                  |\n| **\"windowsCP1253\"**     | Windows code page 1253 for Greek language support.                                                                                                                                                                           |\n| **\"windowsCP1254\"**     | Windows code page 1254 for Turkish language support.                                                                                                                                                                         |\n| **\"gbk\"**               | GBK (Guojia Biaozhun Kuozhan). A widely used simplified Chinese character encoding, extending GB2312 to include traditional Chinese and Japanese kana. It is backward compatible with GB2312.                                |\n| **\"gb18030\"**           | GB18030 (National Standard of the People's Republic of China). A superset of GBK and GB2312, and the official mandatory standard in China. Fully compatible with Unicode and capable of representing all Unicode characters. |\n\n***\n\n## Example Usage\n\n### Converting a String to Data and Back\n\n```ts\n\n\n// Convert a UTF-8 string to binary data\nconst text = \"こんにちは世界\"  // \"Hello World\" in Japanese\nconst utf8Data = Data.fromRawString(text, \"utf-8\")\n\n// Convert the binary data back to a string\nconst decoded = utf8Data.toRawString(\"utf-8\")\n\nconsole.log(decoded) // Output: こんにちは世界\n```\n\n***\n\n### Using a Different Encoding\n\n```ts\n// Encode using Shift-JIS (Japanese)\nconst sjisData = Data.fromRawString(\"テスト\", \"shiftJIS\")\n\n// Decode back from Shift-JIS\nconst decodedSJIS = sjisData.toRawString(\"shiftJIS\")\nconsole.log(decodedSJIS) // Output: テスト\n```\n\n***\n\n### Example for Windows Encodings\n\n```ts\n// Encode text with Central European characters\nconst text = \"Příliš žluťoučký kůň úpěl ďábelské ódy\"\nconst data = Data.fromRawString(text, \"windowsCP1250\")\nconst result = data.toRawString(\"windowsCP1250\")\nconsole.log(result)\n```\n\n***\n\n## Notes\n\n- When encoding or decoding fails (e.g., using the wrong encoding for the data), the returned string may contain invalid characters (�).\n- For most use cases, `\"utf-8\"` is recommended due to its compatibility and efficiency.\n- Legacy encodings such as `\"shiftJIS\"`, `\"iso2022JP\"`, and `\"windowsCP125x\"` are provided for interoperability with older file formats and systems.\n","routePath":"/doc/Utilities/Encoding","lang":"en","toc":[{"id":"available-encodings","text":"Available Encodings","depth":2,"charIndex":443},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":6999},{"id":"converting-a-string-to-data-and-back","text":"Converting a String to Data and Back","depth":3,"charIndex":7017},{"id":"using-a-different-encoding","text":"Using a Different Encoding","depth":3,"charIndex":7354},{"id":"example-for-windows-encodings","text":"Example for Windows Encodings","depth":3,"charIndex":7618},{"id":"notes","text":"Notes","depth":2,"charIndex":7895}],"frontmatter":{},"version":"","description":"The Encoding type defines a set of supported character encodings used by methods like: Data.fromRawString(str, encoding) — converts a text string into binary data using the specified encoding.Data.toRawString(encoding) — converts binary data back into a string using the specified encoding. These encodings allow interoperability with various text formats and systems, ensuring compatibility across languages and platforms."},{"title":"FileEntity","content":"The `FileEntity` class provides low-level file read and write operations.\nIt allows scripts and HTTP servers to open, read, write, seek, and close files efficiently.\n`FileEntity` can also be used as a response body for `HttpResponse.raw()` to serve static or downloadable files.\n\n***\n\n## Overview\n\n`FileEntity` enables direct file operations, including:\n\n- Opening files in different modes (read, write, read/write, append, etc.)\n- Reading and writing binary data (`Data` objects)\n- Seeking to a specific offset in the file\n- Closing files to release resources\n- Returning file streams as HTTP responses\n\n***\n\n## Instance Properties\n\n### `path: string`\n\nThe full path of the file represented by this `FileEntity` instance.\n\n**Example:**\n\n```ts\nconst file = FileEntity.openForReading(\"/path/to/file.txt\")\nconsole.log(file.path)\n// Output: \"/path/to/file.txt\"\n```\n\n***\n\n## Instance Methods\n\n### `seek(offset: number): boolean`\n\nMoves the file pointer to the specified byte offset.\nReturns `true` if successful, or `false` if seeking fails.\n\n**Parameters:**\n\n| Name     | Type     | Description                 |\n| -------- | -------- | --------------------------- |\n| `offset` | `number` | The byte offset to move to. |\n\n**Example:**\n\n```ts\nconst file = FileEntity.openForReading(\"/path/to/data.bin\")\nfile.seek(128)\n```\n\n***\n\n### `read(size: number): Data`\n\nReads a specified number of bytes from the current file position and returns them as a `Data` object.\n\n**Parameters:**\n\n| Name   | Type     | Description              |\n| ------ | -------- | ------------------------ |\n| `size` | `number` | Number of bytes to read. |\n\n**Returns:**\nA `Data` object containing the read bytes.\n\n**Example:**\n\n```ts\nconst file = FileEntity.openForReading(\"/path/to/text.txt\")\nconst data = file.read(100)\nconsole.log(data.toRawString(\"utf-8\"))\nfile.close()\n```\n\n***\n\n### `write(data: Data): void`\n\nWrites the provided `Data` to the current file position.\nThrows an error if the file was not opened in a writable mode.\n\n**Parameters:**\n\n| Name   | Type   | Description                           |\n| ------ | ------ | ------------------------------------- |\n| `data` | `Data` | The binary data to write to the file. |\n\n**Example:**\n\n```ts\nconst data = Data.fromRawString(\"Hello, Scripting!\", \"utf-8\")\nconst file = FileEntity.openNewForWriting(\"/tmp/test.txt\")\nfile.write(data)\nfile.close()\n```\n\n***\n\n### `close(): void`\n\nCloses the file and releases the associated resources.\nAfter closing, you should not call `read()` or `write()` again.\n\n**Example:**\n\n```ts\nconst file = FileEntity.openForReading(\"/path/to/file.txt\")\n// ... perform operations ...\nfile.close()\n```\n\n***\n\n## Static Methods\n\n### `static openForReading(path: string): FileEntity`\n\nOpens a file in **read-only** mode.\nThrows an error if the file does not exist or cannot be read.\n\n**Parameters:**\n\n| Name   | Type     | Description            |\n| ------ | -------- | ---------------------- |\n| `path` | `string` | The file path to open. |\n\n**Example:**\n\n```ts\nconst file = FileEntity.openForReading(\"/path/to/image.png\")\n```\n\n***\n\n### `static openNewForWriting(path: string): FileEntity`\n\nOpens a file in **write-only** mode.\nIf the file already exists, it will be **overwritten**.\n\n**Example:**\n\n```ts\nconst file = FileEntity.openNewForWriting(\"/tmp/output.txt\")\nfile.write(Data.fromRawString(\"New file created\"))\nfile.close()\n```\n\n***\n\n### `static openForWritingAndReading(path: string): FileEntity`\n\nOpens a file in **read/write** mode.\nIf the file does not exist, it will be created automatically.\n\n**Example:**\n\n```ts\nconst file = FileEntity.openForWritingAndReading(\"/tmp/data.txt\")\nfile.write(Data.fromRawString(\"abc\"))\nfile.seek(0)\nconsole.log(file.read(3).toRawString(\"utf-8\"))\nfile.close()\n```\n\n***\n\n### `static openForMode(path: string, mode: string): FileEntity`\n\nOpens a file using the specified access mode.\nThe supported modes follow standard POSIX file semantics, but **it is strongly recommended to use binary-safe modes** such as `\"rb\"` or `\"r+b\"` for better cross-platform compatibility, since `FileEntity` performs all read/write operations in binary mode internally.\n\n**Parameters:**\n\n| Mode             | Description                                                                                           |\n| ---------------- | ----------------------------------------------------------------------------------------------------- |\n| `\"r\"` / `\"rb\"`   | Read-only mode (file must exist). `\"rb\"` is recommended for better compatibility.                     |\n| `\"w\"` / `\"wb\"`   | Write-only mode (creates a new file or overwrites the existing one). `\"wb\"` is recommended.           |\n| `\"a\"` / `\"ab\"`   | Append mode (writes data to the end of the file; creates the file if missing). `\"ab\"` is recommended. |\n| `\"r+\"` / `\"r+b\"` | Read/write mode (file must exist). `\"r+b\"` is recommended for binary read/write.                      |\n| `\"w+\"` / `\"w+b\"` | Read/write mode (creates or overwrites the file). `\"w+b\"` is recommended.                             |\n| `\"a+\"` / `\"a+b\"` | Read/append mode (creates the file if missing). `\"a+b\"` is recommended.                               |\n\n> 💡 **Note:**\n> Always prefer binary-safe modes (those ending with `b`), such as `\"rb\"`, `\"wb\"`, or `\"r+b\"`.\n> This ensures consistent behavior across platforms and avoids newline or encoding conversion issues, since `FileEntity` handles all file I/O as binary streams.\n\n**Example:**\n\n```ts\n// Open file in binary read/write mode (recommended)\nconst file = FileEntity.openForMode(\"/tmp/log.bin\", \"r+b\")\n\n// Write binary data\nfile.write(Data.fromRawString(\"append log\\n\"))\n\n// Move to the beginning and read data\nfile.seek(0)\nconst content = file.read(20).toRawString(\"utf-8\")\nconsole.log(content)\n\nfile.close()\n```\n\n***\n\n## Using FileEntity in HttpResponse\n\n`FileEntity` can be used directly as the body of an HTTP response via `HttpResponse.raw()`.\nThis allows serving files or implementing file download endpoints.\n\n**Example:**\n\n```ts\nserver.registerHandler(\"/download\", (req) => {\n  const file = FileEntity.openForReading(Path.join(Script.directory, \"manual.pdf\"))\n  return HttpResponse.raw(200, \"OK\", {\n    headers: { \"Content-Type\": \"application/pdf\" },\n    body: file\n  })\n})\n```\n\nClients accessing `/download` will directly receive the file as a download.\n\n***\n\n## Summary\n\n| Method                       | Description                          | Typical Use Case                |\n| ---------------------------- | ------------------------------------ | ------------------------------- |\n| `seek()`                     | Moves the read/write position        | Random access or partial reads  |\n| `read()`                     | Reads data from file                 | Reading text or binary content  |\n| `write()`                    | Writes data to file                  | Saving logs, exporting data     |\n| `close()`                    | Closes the file                      | Always call after use           |\n| `openForReading()`           | Opens a file for reading             | Serving static content          |\n| `openNewForWriting()`        | Opens a file for writing (overwrite) | Creating new files              |\n| `openForWritingAndReading()` | Opens for both reading and writing   | Editing or streaming            |\n| `openForMode()`              | Opens file in custom mode            | POSIX-compatible access control |\n","routePath":"/doc/Utilities/FileEntity","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":285},{"id":"instance-properties","text":"Instance Properties","depth":2,"charIndex":610},{"id":"path-string","text":"`path: string`","depth":3,"charIndex":634},{"id":"instance-methods","text":"Instance Methods","depth":2,"charIndex":868},{"id":"seekoffset-number-boolean","text":"`seek(offset: number): boolean`","depth":3,"charIndex":889},{"id":"readsize-number-data","text":"`read(size: number): Data`","depth":3,"charIndex":1324},{"id":"writedata-data-void","text":"`write(data: Data): void`","depth":3,"charIndex":1851},{"id":"close-void","text":"`close(): void`","depth":3,"charIndex":2382},{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":2656},{"id":"static-openforreadingpath-string-fileentity","text":"`static openForReading(path: string): FileEntity`","depth":3,"charIndex":2675},{"id":"static-opennewforwritingpath-string-fileentity","text":"`static openNewForWriting(path: string): FileEntity`","depth":3,"charIndex":3079},{"id":"static-openforwritingandreadingpath-string-fileentity","text":"`static openForWritingAndReading(path: string): FileEntity`","depth":3,"charIndex":3386},{"id":"static-openformodepath-string-mode-string-fileentity","text":"`static openForMode(path: string, mode: string): FileEntity`","depth":3,"charIndex":3758},{"id":"using-fileentity-in-httpresponse","text":"Using FileEntity in HttpResponse","depth":2,"charIndex":5777},{"id":"summary","text":"Summary","depth":2,"charIndex":6326}],"frontmatter":{},"version":"","description":"The FileEntity class provides low-level file read and write operations.\nIt allows scripts and HTTP servers to open, read, write, seek, and close files efficiently.\nFileEntity can also be used as a response body for HttpResponse.raw() to serve static or downloadable files."},{"title":"FileManager","content":"The **FileManager** module provides a unified interface for interacting with the file system in Scripting. It serves as the primary API for accessing local files, iCloud files, App Group shared storage, and performing common file operations such as reading, writing, copying, moving, deleting, zipping, and unzipping.\n\n***\n\n## Core Properties\n\n### `FileManager.scriptsDirectory: string`\n\nReturns the directory path where script files are stored within the Scripting app.\n\n### `FileManager.isiCloudEnabled: boolean`\n\nIndicates whether iCloud is enabled for the user. Returns `false` if:\n\n- The user is not logged into iCloud, or\n- iCloud permissions have not been granted to the Scripting app.\n\n### `FileManager.iCloudDocumentsDirectory: string`\n\nReturns the path to the iCloud `Documents` directory.\nThrows an error if iCloud is disabled. Always check `isiCloudEnabled` before calling.\n\n### `FileManager.appGroupDocumentsDirectory: string`\n\nReturns the path to the shared App Group `Documents` directory.\nFiles stored here are not accessible in the Files app, but scripts running inside Widgets can access them.\n\n### `FileManager.documentsDirectory: string`\n\nReturns the path to the local `Documents` directory.\nFiles stored here are visible in the Files app. Widgets cannot access files in this directory.\n\n### `FileManager.temporaryDirectory: string`\n\nReturns the path to the system temporary directory.\nFiles stored here may be removed automatically by the system.\n\n***\n\n## iCloud File Management\n\n### `FileManager.isFileStoredIniCloud(filePath: string): boolean`\n\nChecks whether the specified file is stored in iCloud.\n\n| Parameter | Type   | Description            |\n| --------- | ------ | ---------------------- |\n| filePath  | string | The file path to check |\n\n### `FileManager.isiCloudFileDownloaded(filePath: string): boolean`\n\nChecks whether an iCloud-stored file has been downloaded to the device.\n\n### `FileManager.downloadFileFromiCloud(filePath: string): Promise<boolean>`\n\nDownloads an iCloud file to the device.\n\n| Returns           | Description                 |\n| ----------------- | --------------------------- |\n| Promise\\<boolean> | `true` if download succeeds |\n\n**Example:**\n\n```ts\nif (FileManager.isiCloudEnabled) {\n  const file = FileManager.iCloudDocumentsDirectory + \"/data.json\";\n  const success = await FileManager.downloadFileFromiCloud(file);\n}\n```\n\n### `FileManager.getShareUrlOfiCloudFile(path: string, expiration?: number): string`\n\nGenerates a shareable download URL for an iCloud file.\n\n| Parameter  | Type              | Description                                                                                                          |\n| ---------- | ----------------- | -------------------------------------------------------------------------------------------------------------------- |\n| path       | string            | The iCloud file path. Must begin with `FileManager.iCloudDocumentsDirectory`. File must be fully uploaded to iCloud. |\n| expiration | number (optional) | Expiration timestamp of the share link                                                                               |\n\nThis call may throw an error. Use `try-catch` for error handling.\n\n***\n\n## Directory and File Operations\n\nAll operations are available in both asynchronous and synchronous forms.\nSynchronous methods block execution; asynchronous versions are recommended for most use cases.\n\n### Create Directory\n\n#### `createDirectory(path: string, recursive?: boolean): Promise<void>`\n\n#### `createDirectorySync(path: string, recursive?: boolean): void`\n\n| Parameter | Type               | Description                                             |\n| --------- | ------------------ | ------------------------------------------------------- |\n| path      | string             | Directory path to create                                |\n| recursive | boolean (optional) | If true, creates intermediate directories automatically |\n\n### Create Symbolic Link\n\n#### `createLink(path: string, target: string): Promise<void>`\n\n#### `createLinkSync(path: string, target: string): void`\n\nCreates a symbolic link at `path` pointing to `target`.\n\n### Copy File\n\n#### `copyFile(path: string, newPath: string): Promise<void>`\n\n#### `copyFileSync(path: string, newPath: string): void`\n\n### Read Directory\n\n#### `readDirectory(path: string, recursive?: boolean): Promise<string[]>`\n\n#### `readDirectorySync(path: string, recursive?: boolean): string[]`\n\nEnumerates the contents of a directory and optionally recurses into subdirectories.\n\n### Check Existence\n\n#### `exists(path: string): Promise<boolean>`\n\n#### `existsSync(path: string): boolean`\n\nChecks whether a file or directory exists.\n\n### File Bookmarks\n\nBookmarks allow persistent access to user-authorized external files or folders.\n\n| Method                  | Description                                                     |\n| ----------------------- | --------------------------------------------------------------- |\n| `bookmarkExists(name)`  | Checks whether a bookmark exists                                |\n| `getAllFileBookmarks()` | Returns all bookmark names and their paths                      |\n| `bookmarkedPath(name)`  | Returns file path for the bookmark name, or `null` if not found |\n\n***\n\n### Determine File Type\n\n| Method                            | Returns | Description                          |\n| --------------------------------- | ------- | ------------------------------------ |\n| `isFile / isFileSync`             | boolean | Whether the path refers to a file    |\n| `isDirectory / isDirectorySync`   | boolean | Whether it refers to a directory     |\n| `isLink / isLinkSync`             | boolean | Whether it refers to a symbolic link |\n| `isBinaryFile / isBinaryFileSync` | boolean | Whether the file is binary           |\n\n***\n\n## File Reading and Writing\n\nSupports three data formats: string, `Uint8Array`, and `Data`.\n\n### Read File\n\n| Method              | Return Type | Description                              |\n| ------------------- | ----------- | ---------------------------------------- |\n| readAsString / Sync | string      | Reads text using specified encoding      |\n| readAsBytes / Sync  | Uint8Array  | Reads raw bytes                          |\n| readAsData / Sync   | Data        | Reads the entire file as a `Data` object |\n\n### Write File\n\n| Method               | Data Format |\n| -------------------- | ----------- |\n| writeAsString / Sync | string      |\n| writeAsBytes / Sync  | Uint8Array  |\n| writeAsData / Sync   | Data        |\n\nExisting files will be overwritten.\n\n### Append to File\n\n| Method            | Data Format |\n| ----------------- | ----------- |\n| appendText / Sync | string      |\n| appendData / Sync | Data        |\n\nIf the file or its parent directory does not exist, it will be created automatically.\n\n***\n\n## File Information and Management\n\n### `stat(path: string): Promise<FileStat>`\n\n### `statSync(path: string): FileStat`\n\nReturns a `FileStat` object for the file or directory. If the path is a symbolic link, the resolved target is reported.\n\n### `rename / renameSync`\n\nMoves or renames a file or directory.\n\n### `remove / removeSync`\n\nRemoves a file or directory. Directories are removed recursively.\n\n***\n\n## Compression and Extraction\n\n### `zip(srcPath: string, destPath: string, shouldKeepParent?: boolean): Promise<void>`\n\n### `zipSync(srcPath: string, destPath: string, shouldKeepParent?: boolean): void`\n\nCreates a zip archive from a file or directory.\n\n### `unzip(srcPath: string, destPath: string): Promise<void>`\n\n### `unzipSync(srcPath: string, destPath: string): void`\n\nExtracts a zip archive to the specified destination.\n\n**Example:**\n\n```ts\nconst docs = FileManager.documentsDirectory;\n\nawait FileManager.zip(docs + \"/MyScript\", docs + \"/MyScript.zip\");\nawait FileManager.unzip(docs + \"/MyScript.zip\", docs + \"/Output\");\n```\n\n***\n\n## Utility Methods\n\n### `mimeType(path: string): string`\n\nReturns the MIME type of the file based on its extension.\n\n### `destinationOfSymbolicLink(path: string): string`\n\nReturns the destination of a symbolic link.\n\n***\n\n## Types\n\n### `FileStat`\n\n```ts\ntype FileStat = {\n  creationDate: number;\n  modificationDate: number;\n  type: string; // \"file\" | \"directory\" | \"link\" | \"unixDomainSock\" | \"pipe\" | \"notFound\"\n  size: number;\n};\n```\n","routePath":"/doc/Utilities/FileManager","lang":"en","toc":[{"id":"core-properties","text":"Core Properties","depth":2,"charIndex":324},{"id":"filemanagerscriptsdirectory-string","text":"`FileManager.scriptsDirectory: string`","depth":3,"charIndex":344},{"id":"filemanagerisicloudenabled-boolean","text":"`FileManager.isiCloudEnabled: boolean`","depth":3,"charIndex":472},{"id":"filemanagericlouddocumentsdirectory-string","text":"`FileManager.iCloudDocumentsDirectory: string`","depth":3,"charIndex":694},{"id":"filemanagerappgroupdocumentsdirectory-string","text":"`FileManager.appGroupDocumentsDirectory: string`","depth":3,"charIndex":887},{"id":"filemanagerdocumentsdirectory-string","text":"`FileManager.documentsDirectory: string`","depth":3,"charIndex":1113},{"id":"filemanagertemporarydirectory-string","text":"`FileManager.temporaryDirectory: string`","depth":3,"charIndex":1308},{"id":"icloud-file-management","text":"iCloud File Management","depth":2,"charIndex":1474},{"id":"filemanagerisfilestoredinicloudfilepath-string-boolean","text":"`FileManager.isFileStoredIniCloud(filePath: string): boolean`","depth":3,"charIndex":1501},{"id":"filemanagerisicloudfiledownloadedfilepath-string-boolean","text":"`FileManager.isiCloudFileDownloaded(filePath: string): boolean`","depth":3,"charIndex":1769},{"id":"filemanagerdownloadfilefromicloudfilepath-string-promiseboolean","text":"`FileManager.downloadFileFromiCloud(filePath: string): Promise<boolean>`","depth":3,"charIndex":1911},{"id":"filemanagergetshareurloficloudfilepath-string-expiration-number-string","text":"`FileManager.getShareUrlOfiCloudFile(path: string, expiration?: number): string`","depth":3,"charIndex":2383},{"id":"directory-and-file-operations","text":"Directory and File Operations","depth":2,"charIndex":3214},{"id":"create-directory","text":"Create Directory","depth":3,"charIndex":3417},{"id":"createdirectorypath-string-recursive-boolean-promisevoid","text":"`createDirectory(path: string, recursive?: boolean): Promise<void>`","depth":4,"charIndex":3439},{"id":"createdirectorysyncpath-string-recursive-boolean-void","text":"`createDirectorySync(path: string, recursive?: boolean): void`","depth":4,"charIndex":3513},{"id":"create-symbolic-link","text":"Create Symbolic Link","depth":3,"charIndex":3955},{"id":"createlinkpath-string-target-string-promisevoid","text":"`createLink(path: string, target: string): Promise<void>`","depth":4,"charIndex":3981},{"id":"createlinksyncpath-string-target-string-void","text":"`createLinkSync(path: string, target: string): void`","depth":4,"charIndex":4045},{"id":"copy-file","text":"Copy File","depth":3,"charIndex":4161},{"id":"copyfilepath-string-newpath-string-promisevoid","text":"`copyFile(path: string, newPath: string): Promise<void>`","depth":4,"charIndex":4176},{"id":"copyfilesyncpath-string-newpath-string-void","text":"`copyFileSync(path: string, newPath: string): void`","depth":4,"charIndex":4239},{"id":"read-directory","text":"Read Directory","depth":3,"charIndex":4297},{"id":"readdirectorypath-string-recursive-boolean-promisestring","text":"`readDirectory(path: string, recursive?: boolean): Promise<string[]>`","depth":4,"charIndex":4317},{"id":"readdirectorysyncpath-string-recursive-boolean-string","text":"`readDirectorySync(path: string, recursive?: boolean): string[]`","depth":4,"charIndex":4393},{"id":"check-existence","text":"Check Existence","depth":3,"charIndex":4549},{"id":"existspath-string-promiseboolean","text":"`exists(path: string): Promise<boolean>`","depth":4,"charIndex":4570},{"id":"existssyncpath-string-boolean","text":"`existsSync(path: string): boolean`","depth":4,"charIndex":4617},{"id":"file-bookmarks","text":"File Bookmarks","depth":3,"charIndex":4703},{"id":"determine-file-type","text":"Determine File Type","depth":3,"charIndex":5280},{"id":"file-reading-and-writing","text":"File Reading and Writing","depth":2,"charIndex":5833},{"id":"read-file","text":"Read File","depth":3,"charIndex":5926},{"id":"write-file","text":"Write File","depth":3,"charIndex":6347},{"id":"append-to-file","text":"Append to File","depth":3,"charIndex":6596},{"id":"file-information-and-management","text":"File Information and Management","depth":2,"charIndex":6853},{"id":"statpath-string-promisefilestat","text":"`stat(path: string): Promise<FileStat>`","depth":3,"charIndex":6889},{"id":"statsyncpath-string-filestat","text":"`statSync(path: string): FileStat`","depth":3,"charIndex":6934},{"id":"rename--renamesync","text":"`rename / renameSync`","depth":3,"charIndex":7095},{"id":"remove--removesync","text":"`remove / removeSync`","depth":3,"charIndex":7161},{"id":"compression-and-extraction","text":"Compression and Extraction","depth":2,"charIndex":7260},{"id":"zipsrcpath-string-destpath-string-shouldkeepparent-boolean-promisevoid","text":"`zip(srcPath: string, destPath: string, shouldKeepParent?: boolean): Promise<void>`","depth":3,"charIndex":7291},{"id":"zipsyncsrcpath-string-destpath-string-shouldkeepparent-boolean-void","text":"`zipSync(srcPath: string, destPath: string, shouldKeepParent?: boolean): void`","depth":3,"charIndex":7380},{"id":"unzipsrcpath-string-destpath-string-promisevoid","text":"`unzip(srcPath: string, destPath: string): Promise<void>`","depth":3,"charIndex":7513},{"id":"unzipsyncsrcpath-string-destpath-string-void","text":"`unzipSync(srcPath: string, destPath: string): void`","depth":3,"charIndex":7576},{"id":"utility-methods","text":"Utility Methods","depth":2,"charIndex":7898},{"id":"mimetypepath-string-string","text":"`mimeType(path: string): string`","depth":3,"charIndex":7918},{"id":"destinationofsymboliclinkpath-string-string","text":"`destinationOfSymbolicLink(path: string): string`","depth":3,"charIndex":8015},{"id":"types","text":"Types","depth":2,"charIndex":8120},{"id":"filestat","text":"`FileStat`","depth":3,"charIndex":8130}],"frontmatter":{},"version":"","description":"The FileManager module provides a unified interface for interacting with the file system in Scripting. It serves as the primary API for accessing local files, iCloud files, App Group shared storage, and performing common file operations such as reading, writing, copying, moving, deleting, zipping, and unzipping."},{"title":"HttpRequest <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HttpRequest \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HttpRequest` class represents an HTTP request received by the server.\nIt encapsulates all request information, including path, method, headers, body, client address, and parsed parameters.\nAn instance of this class is provided as an argument to handler functions registered through `HttpServer.registerHandler()`.\n\n***\n\n## Overview\n\n`HttpRequest` is typically used inside HTTP route handlers to:\n\n- Access request path, method, headers, and body\n- Read URL parameters and query parameters\n- Parse form data (`application/x-www-form-urlencoded` or `multipart/form-data`)\n- Verify authentication tokens or custom headers\n\n***\n\n## Properties\n\n### `path: string`\n\nThe request path (excluding query parameters).\n\n**Example:**\n\n```ts\nconsole.log(request.path)\n// Output: \"/api/user\"\n```\n\n***\n\n### `method: string`\n\nThe HTTP method of the request (e.g., `\"GET\"`, `\"POST\"`, `\"PUT\"`, `\"DELETE\"`).\n\n**Example:**\n\n```ts\nconsole.log(request.method)\n// Output: \"POST\"\n```\n\n***\n\n### `headers: Record<string, string>`\n\nAn object containing all HTTP request headers as key–value pairs.\n\n**Example:**\n\n```ts\nconsole.log(request.headers[\"content-type\"])\n// Output: \"application/json\"\n```\n\n***\n\n### `body: Data`\n\nThe request body as a `Data` object.\nYou can convert it to a string using methods such as `toRawString(\"utf-8\")`.\n\n**Example:**\n\n```ts\nconst text = request.body.toRawString(\"utf-8\")\nconsole.log(\"Body content:\", text)\n```\n\n***\n\n### `address: string | null`\n\nThe IP address of the client that made the request.\nIf the address cannot be determined, this value is `null`.\n\n**Example:**\n\n```ts\nconsole.log(\"Client address:\", request.address)\n```\n\n***\n\n### `params: Record<string, string>`\n\nAn object containing route parameters defined in the registered path.\n\n**Example:**\n\n```ts\n// Route registration\nserver.registerHandler(\"/user/:id\", (req) => {\n  const userId = req.params[\"id\"]\n  return HttpResponse.ok(HttpResponseBody.text(`User ID: ${userId}`))\n})\n```\n\nIf the request path is `/user/123`, the response will be:\n\n```\nUser ID: 123\n```\n\n***\n\n### `queryParams: Array<{ key: string; value: string }>`\n\nAn array of query parameter key–value pairs extracted from the request URL.\n\n**Example:**\n\n```ts\n// Request URL: /search?keyword=apple&page=2\nfor (const param of request.queryParams) {\n  console.log(param.key, \"=\", param.value)\n}\n// Output:\n// keyword = apple\n// page = 2\n```\n\n***\n\n## Methods\n\n### `hasTokenForHeader(headerName: string, token: string): boolean`\n\nChecks whether the specified header contains the given token value.\nCommonly used for authentication headers such as `Authorization`.\n\n**Parameters:**\n\n| Name         | Type     | Description                                         |\n| ------------ | -------- | --------------------------------------------------- |\n| `headerName` | `string` | The name of the header to check (case-insensitive). |\n| `token`      | `string` | The token string to match.                          |\n\n**Returns:**\n\n- `true` if the header contains the token\n- `false` otherwise\n\n**Example:**\n\n```ts\nif (!request.hasTokenForHeader(\"Authorization\", \"Bearer my-secret-token\")) {\n  return HttpResponse.unauthorized()\n}\n```\n\n***\n\n### `parseUrlencodedForm(): Array<{ key: string; value: string }>`\n\nParses the request body as `application/x-www-form-urlencoded` form data.\nTypically used for HTML form submissions via POST.\n\n**Returns:**\nAn array of key–value pairs representing form fields.\n\n**Example:**\n\n```ts\nconst form = request.parseUrlencodedForm()\nfor (const field of form) {\n  console.log(field.key, \"=\", field.value)\n}\n```\n\nIf the body is:\n\n```\nusername=thom&password=1234\n```\n\nthen the output is:\n\n```\nusername = thom\npassword = 1234\n```\n\n***\n\n### `parseMultiPartFormData(): Array<{ name: string | null; filename: string | null; headers: Record<string, string>; data: Data }>`\n\nParses `multipart/form-data` requests, typically used for file uploads.\n\n**Returns:**\nAn array of form parts, where each element contains:\n\n| Property   | Type                     | Description                                                    |\n| ---------- | ------------------------ | -------------------------------------------------------------- |\n| `name`     | `string \\| null`         | The field name.                                                |\n| `filename` | `string \\| null`         | The uploaded filename if the part is a file, otherwise `null`. |\n| `headers`  | `Record<string, string>` | The part’s headers.                                            |\n| `data`     | `Data`                   | The raw content of the field or file.                          |\n\n**Example:**\n\n```ts\nconst parts = request.parseMultiPartFormData()\nfor (const part of parts) {\n  if (part.filename) {\n    console.log(\"Uploaded file:\", part.filename)\n    FileManager.writeAsDataSync(Path.join(Script.directory, part.filename), part.data)\n  } else {\n    console.log(\"Field:\", part.name, \"=\", part.data.toRawString(\"utf-8\"))\n  }\n}\n```\n\n***\n\n## Full Example\n\nThe example below shows how to read request data and respond accordingly:\n\n```ts\nserver.registerHandler(\"/upload\", (req) => {\n  if (req.method === \"POST\") {\n    const parts = req.parseMultiPartFormData()\n    for (const part of parts) {\n      if (part.filename) {\n        console.log(\"Received file:\", part.filename)\n      } else {\n        console.log(\"Field:\", part.name)\n      }\n    }\n    return HttpResponse.ok(HttpResponseBody.text(\"Upload successful\"))\n  } else {\n    return HttpResponse.badRequest(HttpResponseBody.text(\"POST required\"))\n  }\n})\n```\n","routePath":"/doc/Utilities/HttpServer/HttpRequest","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":480},{"id":"properties","text":"Properties","depth":2,"charIndex":785},{"id":"path-string","text":"`path: string`","depth":3,"charIndex":800},{"id":"method-string","text":"`method: string`","depth":3,"charIndex":947},{"id":"headers-recordstring-string","text":"`headers: Record<string, string>`","depth":3,"charIndex":1125},{"id":"body-data","text":"`body: Data`","depth":3,"charIndex":1336},{"id":"address-string--null","text":"`address: string | null`","depth":3,"charIndex":1581},{"id":"params-recordstring-string","text":"`params: Record<string, string>`","depth":3,"charIndex":1801},{"id":"queryparams-array-key-string-value-string-","text":"`queryParams: Array<{ key: string; value: string }>`","depth":3,"charIndex":2197},{"id":"methods","text":"Methods","depth":2,"charIndex":2537},{"id":"hastokenforheaderheadername-string-token-string-boolean","text":"`hasTokenForHeader(headerName: string, token: string): boolean`","depth":3,"charIndex":2549},{"id":"parseurlencodedform-array-key-string-value-string-","text":"`parseUrlencodedForm(): Array<{ key: string; value: string }>`","depth":3,"charIndex":3322},{"id":"parsemultipartformdata-array-name-string--null-filename-string--null-headers-recordstring-string-data-data-","text":"`parseMultiPartFormData(): Array<{ name: string | null; filename: string | null; headers: Record<string, string>; data: Data }>`","depth":3,"charIndex":3846},{"id":"full-example","text":"Full Example","depth":2,"charIndex":5118}],"frontmatter":{},"version":"","description":"The HttpRequest class represents an HTTP request received by the server.\nIt encapsulates all request information, including path, method, headers, body, client address, and parsed parameters.\nAn instance of this class is provided as an argument to handler functions registered through HttpServer.registerHandler()."},{"title":"HttpResponse <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HttpResponse \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HttpResponse` class represents an HTTP response object returned by the server to the client.\nIt defines the response’s status code, headers, and body, and provides convenient factory methods for creating common HTTP responses (e.g., `ok`, `notFound`, `internalServerError`).\n\n`HttpResponse` is typically used together with `HttpResponseBody` to send text, HTML, binary data, or files back to the client.\n\n***\n\n## Overview\n\n`HttpResponse` provides:\n\n- Easy creation of standard HTTP responses (200, 404, 500, etc.)\n- Support for custom status codes and reason phrases\n- Ability to return text, binary, HTML, or file data\n- Custom response headers\n- Integration with `FileEntity` and `Data` for flexible body content\n\n***\n\n## Properties\n\n### `statusCode: number`\n\nThe numeric HTTP status code.\n\n**Example:**\n\n```ts\nconst res = HttpResponse.ok(HttpResponseBody.text(\"OK\"))\nconsole.log(res.statusCode)\n// Output: 200\n```\n\n***\n\n### `reasonPhrase: string`\n\nThe reason phrase associated with the status code (e.g., `\"OK\"`, `\"Not Found\"`, `\"Internal Server Error\"`).\n\n**Example:**\n\n```ts\nconsole.log(res.reasonPhrase)\n// Output: \"OK\"\n```\n\n***\n\n## Methods\n\n### `headers(): Record<string, string>`\n\nReturns the headers of the response as a key–value object.\n\n**Example:**\n\n```ts\nconst res = HttpResponse.ok(HttpResponseBody.text(\"Hello\"))\nconsole.log(res.headers())\n```\n\n***\n\n### `static ok(body: HttpResponseBody): HttpResponse`\n\nCreates a `200 OK` response.\n\n**Parameters:**\n\n| Name   | Type               | Description                                                               |\n| ------ | ------------------ | ------------------------------------------------------------------------- |\n| `body` | `HttpResponseBody` | The response body (use `HttpResponseBody.text()`, `data()`, or `html()`). |\n\n**Example:**\n\n```ts\nreturn HttpResponse.ok(HttpResponseBody.text(\"Hello, world!\"))\n```\n\n***\n\n### `static created(): HttpResponse`\n\nReturns a `201 Created` response, indicating that a new resource was successfully created.\n\n**Example:**\n\n```ts\nreturn HttpResponse.created()\n```\n\n***\n\n### `static accepted(): HttpResponse`\n\nReturns a `202 Accepted` response, indicating the request was accepted but not yet processed.\n\n**Example:**\n\n```ts\nreturn HttpResponse.accepted()\n```\n\n***\n\n### `static movedPermanently(url: string): HttpResponse`\n\nReturns a `301 Moved Permanently` redirect response.\n\n**Parameters:**\n\n| Name  | Type     | Description                    |\n| ----- | -------- | ------------------------------ |\n| `url` | `string` | The target URL to redirect to. |\n\n**Example:**\n\n```ts\nreturn HttpResponse.movedPermanently(\"https://example.com/new-page\")\n```\n\n***\n\n### `static movedTemporarily(url: string): HttpResponse`\n\nReturns a `302 Moved Temporarily` redirect response.\n\n**Parameters:**\n\n| Name  | Type     | Description                        |\n| ----- | -------- | ---------------------------------- |\n| `url` | `string` | The temporary redirect target URL. |\n\n**Example:**\n\n```ts\nreturn HttpResponse.movedTemporarily(\"https://example.com/login\")\n```\n\n***\n\n### `static badRequest(body?: HttpResponseBody | null): HttpResponse`\n\nReturns a `400 Bad Request` response, indicating invalid parameters or malformed input.\n\n**Parameters:**\n\n| Name   | Type                | Description                               |\n| ------ | ------------------- | ----------------------------------------- |\n| `body` | `HttpResponseBody?` | Optional error body describing the issue. |\n\n**Example:**\n\n```ts\nreturn HttpResponse.badRequest(HttpResponseBody.text(\"Invalid parameters\"))\n```\n\n***\n\n### `static unauthorized(): HttpResponse`\n\nReturns a `401 Unauthorized` response, indicating authentication is required.\n\n**Example:**\n\n```ts\nreturn HttpResponse.unauthorized()\n```\n\n***\n\n### `static forbidden(): HttpResponse`\n\nReturns a `403 Forbidden` response, indicating the request is understood but not allowed.\n\n**Example:**\n\n```ts\nreturn HttpResponse.forbidden()\n```\n\n***\n\n### `static notFound(): HttpResponse`\n\nReturns a `404 Not Found` response when the requested resource does not exist.\n\n**Example:**\n\n```ts\nreturn HttpResponse.notFound()\n```\n\n***\n\n### `static notAcceptable(): HttpResponse`\n\nReturns a `406 Not Acceptable` response, indicating the request’s content type is unsupported.\n\n**Example:**\n\n```ts\nreturn HttpResponse.notAcceptable()\n```\n\n***\n\n### `static tooManyRequests(): HttpResponse`\n\nReturns a `429 Too Many Requests` response, indicating the client is sending requests too quickly.\n\n**Example:**\n\n```ts\nreturn HttpResponse.tooManyRequests()\n```\n\n***\n\n### `static internalServerError(): HttpResponse`\n\nReturns a `500 Internal Server Error` response, indicating an unexpected server error occurred.\n\n**Example:**\n\n```ts\nreturn HttpResponse.internalServerError()\n```\n\n***\n\n### `static raw(statusCode: number, phrase: string, options?: { headers?: Record<string, string>; body?: Data | FileEntity } | null): HttpResponse`\n\nCreates a fully custom response with a specific status code, reason phrase, headers, and body.\n\n**Parameters:**\n\n| Name              | Type                     | Description                                   |\n| ----------------- | ------------------------ | --------------------------------------------- |\n| `statusCode`      | `number`                 | The HTTP status code.                         |\n| `phrase`          | `string`                 | The reason phrase.                            |\n| `options.headers` | `Record<string, string>` | Optional custom headers.                      |\n| `options.body`    | `Data \\| FileEntity`     | Optional response body (binary data or file). |\n\n**Example:**\n\n```ts\nconst file = FileEntity.openForReading(Path.join(Script.directory, \"image.png\"))\nreturn HttpResponse.raw(200, \"OK\", {\n  headers: { \"Content-Type\": \"image/png\" },\n  body: file\n})\n```\n\n***\n\n## Usage with HttpResponseBody\n\n### `HttpResponseBody.text(text: string)`\n\nReturns a plain-text response body.\n\n```ts\nHttpResponse.ok(HttpResponseBody.text(\"Hello, world\"))\n```\n\n### `HttpResponseBody.html(html: string)`\n\nReturns an HTML response body.\n\n```ts\nHttpResponse.ok(HttpResponseBody.html(\"<h1>Welcome</h1>\"))\n```\n\n### `HttpResponseBody.data(data: Data)`\n\nReturns a binary data response body.\n\n```ts\nconst data = Data.fromRawString(\"Binary content\", \"utf-8\")\nHttpResponse.ok(HttpResponseBody.data(data))\n```\n\n***\n\n## Full Examples\n\n### 1. Returning a JSON response\n\n```ts\nserver.registerHandler(\"/user\", (req) => {\n  const json = JSON.stringify({ name: \"Alice\", age: 25 })\n  const data = Data.fromRawString(json, \"utf-8\")\n  return HttpResponse.ok(HttpResponseBody.data(data))\n})\n```\n\n### 2. File download response\n\n```ts\nserver.registerHandler(\"/download\", (req) => {\n  const file = FileEntity.openForReading(Path.join(Script.directory, \"example.zip\"))\n  return HttpResponse.raw(200, \"OK\", {\n    headers: { \"Content-Type\": \"application/zip\" },\n    body: file\n  })\n})\n```\n\n### 3. Error handling response\n\n```ts\nserver.registerHandler(\"/api\", (req) => {\n  if (req.method !== \"POST\") {\n    return HttpResponse.badRequest(HttpResponseBody.text(\"POST method required\"))\n  }\n  return HttpResponse.ok(HttpResponseBody.text(\"Success\"))\n})\n```\n","routePath":"/doc/Utilities/HttpServer/HttpResponse","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":571},{"id":"properties","text":"Properties","depth":2,"charIndex":882},{"id":"statuscode-number","text":"`statusCode: number`","depth":3,"charIndex":897},{"id":"reasonphrase-string","text":"`reasonPhrase: string`","depth":3,"charIndex":1084},{"id":"methods","text":"Methods","depth":2,"charIndex":1297},{"id":"headers-recordstring-string","text":"`headers(): Record<string, string>`","depth":3,"charIndex":1309},{"id":"static-okbody-httpresponsebody-httpresponse","text":"`static ok(body: HttpResponseBody): HttpResponse`","depth":3,"charIndex":1527},{"id":"static-created-httpresponse","text":"`static created(): HttpResponse`","depth":3,"charIndex":2047},{"id":"static-accepted-httpresponse","text":"`static accepted(): HttpResponse`","depth":3,"charIndex":2237},{"id":"static-movedpermanentlyurl-string-httpresponse","text":"`static movedPermanently(url: string): HttpResponse`","depth":3,"charIndex":2432},{"id":"static-movedtemporarilyurl-string-httpresponse","text":"`static movedTemporarily(url: string): HttpResponse`","depth":3,"charIndex":2823},{"id":"static-badrequestbody-httpresponsebody--null-httpresponse","text":"`static badRequest(body?: HttpResponseBody | null): HttpResponse`","depth":3,"charIndex":3223},{"id":"static-unauthorized-httpresponse","text":"`static unauthorized(): HttpResponse`","depth":3,"charIndex":3738},{"id":"static-forbidden-httpresponse","text":"`static forbidden(): HttpResponse`","depth":3,"charIndex":3925},{"id":"static-notfound-httpresponse","text":"`static notFound(): HttpResponse`","depth":3,"charIndex":4118},{"id":"static-notacceptable-httpresponse","text":"`static notAcceptable(): HttpResponse`","depth":3,"charIndex":4298},{"id":"static-toomanyrequests-httpresponse","text":"`static tooManyRequests(): HttpResponse`","depth":3,"charIndex":4504},{"id":"static-internalservererror-httpresponse","text":"`static internalServerError(): HttpResponse`","depth":3,"charIndex":4718},{"id":"static-rawstatuscode-number-phrase-string-options--headers-recordstring-string-body-data--fileentity---null-httpresponse","text":"`static raw(statusCode: number, phrase: string, options?: { headers?: Record<string, string>; body?: Data | FileEntity } | null): HttpResponse`","depth":3,"charIndex":4937},{"id":"usage-with-httpresponsebody","text":"Usage with HttpResponseBody","depth":2,"charIndex":5990},{"id":"httpresponsebodytexttext-string","text":"`HttpResponseBody.text(text: string)`","depth":3,"charIndex":6022},{"id":"httpresponsebodyhtmlhtml-string","text":"`HttpResponseBody.html(html: string)`","depth":3,"charIndex":6168},{"id":"httpresponsebodydatadata-data","text":"`HttpResponseBody.data(data: Data)`","depth":3,"charIndex":6313},{"id":"full-examples","text":"Full Examples","depth":2,"charIndex":6512},{"id":"1-returning-a-json-response","text":"1. Returning a JSON response","depth":3,"charIndex":6530},{"id":"2-file-download-response","text":"2. File download response","depth":3,"charIndex":6782},{"id":"3-error-handling-response","text":"3. Error handling response","depth":3,"charIndex":7070}],"frontmatter":{},"version":"","description":"The HttpResponse class represents an HTTP response object returned by the server to the client.\nIt defines the response’s status code, headers, and body, and provides convenient factory methods for creating common HTTP responses (e.g., ok, notFound, internalServerError). HttpResponse is typically used together with HttpResponseBody to send text, HTML, binary data, or files back to the client."},{"title":"HttpResponseBody <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HttpResponseBody \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HttpResponseBody` class represents the body content of an HTTP response.\nIt can contain text, HTML, binary data, or other forms of content.\n`HttpResponseBody` is typically used with the `HttpResponse` class to return formatted data to the client.\n\n***\n\n## Overview\n\nWhen building custom HTTP endpoints with `HttpServer`, the **response body** defines what content the client actually receives.\n`HttpResponseBody` provides convenient static factory methods to construct various types of response content:\n\n- Plain text (`text`)\n- HTML content (`html`, `htmlBody`)\n- Binary data (`data`)\n\n***\n\n## Common Use Cases\n\n- Returning plain text (e.g., simple API messages)\n- Returning HTML pages for browser display\n- Returning binary data such as images, JSON files, or downloadable archives\n\n***\n\n## Static Methods\n\n### `static text(text: string): HttpResponseBody`\n\nCreates a plain-text response body.\n\n**Parameters:**\n\n| Name   | Type     | Description                                       |\n| ------ | -------- | ------------------------------------------------- |\n| `text` | `string` | The text content to include in the response body. |\n\n**Example:**\n\n```ts\nconst body = HttpResponseBody.text(\"Hello, world\")\nreturn HttpResponse.ok(body)\n```\n\nResponse example:\n\n```\nHTTP/1.1 200 OK\nContent-Type: text/plain\n\nHello, world\n```\n\n***\n\n### `static data(data: Data): HttpResponseBody`\n\nCreates a response body containing binary data.\n\n**Parameters:**\n\n| Name   | Type   | Description                                          |\n| ------ | ------ | ---------------------------------------------------- |\n| `data` | `Data` | The binary data object to send in the response body. |\n\n**Example:**\n\n```ts\nconst content = Data.fromRawString(\"Binary content\", \"utf-8\")\nreturn HttpResponse.ok(HttpResponseBody.data(content))\n```\n\nThis is useful for sending files, images, or JSON payloads as binary data.\n\n***\n\n### `static html(html: string): HttpResponseBody`\n\nCreates an HTML response body (standard HTML document).\n\n**Parameters:**\n\n| Name   | Type     | Description                                      |\n| ------ | -------- | ------------------------------------------------ |\n| `html` | `string` | The HTML markup to include in the response body. |\n\n**Example:**\n\n```ts\nconst html = `\n<html>\n  <head><title>Hello</title></head>\n  <body><h1>Welcome to Scripting Server</h1></body>\n</html>\n`\nreturn HttpResponse.ok(HttpResponseBody.html(html))\n```\n\nWhen accessed in a browser, the response is rendered as a web page.\n\n***\n\n### `static htmlBody(html: string): HttpResponseBody`\n\nCreates an HTML **body-only** response.\nSimilar to `html()`, but may exclude full document structure (`<html>`, `<body>`, etc.).\nThis method is often used for partial HTML rendering or embedded HTML fragments.\n\n**Parameters:**\n\n| Name   | Type     | Description                       |\n| ------ | -------- | --------------------------------- |\n| `html` | `string` | The HTML snippet or body content. |\n\n**Example:**\n\n```ts\nreturn HttpResponse.ok(HttpResponseBody.htmlBody(\"<h1>Inline HTML Body</h1>\"))\n```\n\n***\n\n## Example Use Cases\n\n### 1. Return a plain-text response\n\n```ts\nserver.registerHandler(\"/hello\", (req) => {\n  return HttpResponse.ok(HttpResponseBody.text(\"Hello from server\"))\n})\n```\n\n***\n\n### 2. Return an HTML page\n\n```ts\nserver.registerHandler(\"/\", (req) => {\n  const html = `\n  <html>\n    <head><title>Home</title></head>\n    <body>\n      <h1>Welcome</h1>\n      <p>This is a simple Scripting HTTP server.</p>\n    </body>\n  </html>`\n  return HttpResponse.ok(HttpResponseBody.html(html))\n})\n```\n\n***\n\n### 3. Return a binary file (e.g., an image)\n\n```ts\nserver.registerHandler(\"/image\", (req) => {\n  const fileData = FileManager.readAsData(Path.join(Script.directory, \"logo.png\"))\n  return HttpResponse.ok(HttpResponseBody.data(fileData))\n})\n```\n\n***\n\n### 4. Return a partial HTML fragment\n\n```ts\nserver.registerHandler(\"/partial\", (req) => {\n  return HttpResponse.ok(HttpResponseBody.htmlBody(\"<div>Partial Content</div>\"))\n})\n```\n\n***\n\n## Summary\n\n| Method       | Description                  | Typical Use Case                      |\n| ------------ | ---------------------------- | ------------------------------------- |\n| `text()`     | Returns plain text content   | API responses, logs                   |\n| `data()`     | Returns binary data          | Files, JSON, images                   |\n| `html()`     | Returns a full HTML document | Web pages                             |\n| `htmlBody()` | Returns an HTML fragment     | Template rendering or partial updates |\n","routePath":"/doc/Utilities/HttpServer/HttpResponseBody","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":418},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":757},{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":955},{"id":"static-texttext-string-httpresponsebody","text":"`static text(text: string): HttpResponseBody`","depth":3,"charIndex":974},{"id":"static-datadata-data-httpresponsebody","text":"`static data(data: Data): HttpResponseBody`","depth":3,"charIndex":1495},{"id":"static-htmlhtml-string-httpresponsebody","text":"`static html(html: string): HttpResponseBody`","depth":3,"charIndex":2059},{"id":"static-htmlbodyhtml-string-httpresponsebody","text":"`static htmlBody(html: string): HttpResponseBody`","depth":3,"charIndex":2675},{"id":"example-use-cases","text":"Example Use Cases","depth":2,"charIndex":3242},{"id":"1-return-a-plain-text-response","text":"1. Return a plain-text response","depth":3,"charIndex":3264},{"id":"2-return-an-html-page","text":"2. Return an HTML page","depth":3,"charIndex":3433},{"id":"3-return-a-binary-file-eg-an-image","text":"3. Return a binary file (e.g., an image)","depth":3,"charIndex":3746},{"id":"4-return-a-partial-html-fragment","text":"4. Return a partial HTML fragment","depth":3,"charIndex":3996},{"id":"summary","text":"Summary","depth":2,"charIndex":4182}],"frontmatter":{},"version":"","description":"The HttpResponseBody class represents the body content of an HTTP response.\nIt can contain text, HTML, binary data, or other forms of content.\nHttpResponseBody is typically used with the HttpResponse class to return formatted data to the client."},{"title":"HttpServer <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# HttpServer \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `HttpServer` class provides a lightweight local HTTP server that can handle HTTP requests, serve static files, and manage WebSocket connections. It is commonly used for local debugging, communication between devices, and serving simple web APIs inside scripts.\n\n***\n\n## Overview\n\n`HttpServer` supports:\n\n- Handling custom HTTP routes with programmable handlers\n- Serving static files or directories\n- Managing WebSocket connections for real-time communication\n- Listening on both IPv4 and IPv6\n- Configurable ports (including automatic random ports)\n- Server state tracking\n\n***\n\n## Properties\n\n### `state: HttpServerState`\n\nThe current state of the server.\n\n| State        | Description             |\n| ------------ | ----------------------- |\n| `\"starting\"` | The server is starting. |\n| `\"running\"`  | The server is running.  |\n| `\"stopping\"` | The server is stopping. |\n| `\"stopped\"`  | The server is stopped.  |\n\n***\n\n### `port: number | null`\n\nThe port number the server is listening on.\nIf the server is not running, this value is `null`.\n\n***\n\n### `isIPv4: boolean`\n\nIndicates whether the server is listening on an IPv4 address.\nIf `false`, the server may be using IPv6.\n\n***\n\n### `listenAddressIPv4: string | null`\n\nThe IPv4 address to listen on.\nOnly used when `forceIPv4` is set to `true`.\n\n***\n\n### `listenAddressIPv6: string | null`\n\nThe IPv6 address to listen on.\nOnly used when `forceIPv6` is set to `true`.\n\n***\n\n## Methods\n\n### `registerHandler(path: string, handler: (request: HttpRequest) => HttpResponse): void`\n\nRegisters a handler for a specific request path.\n\n**Parameters:**\n\n| Name      | Type                                     | Description                                                             |\n| --------- | ---------------------------------------- | ----------------------------------------------------------------------- |\n| `path`    | `string`                                 | The route path (supports parameters, e.g., `/user/:id`).                |\n| `handler` | `(request: HttpRequest) => HttpResponse` | The handler function that processes the request and returns a response. |\n\n**Example:**\n\n```ts\nconst server = new HttpServer()\n\nserver.registerHandler(\"/hello\", (req) => {\n  return HttpResponse.ok(HttpResponseBody.text(\"Hello, world!\"))\n})\n```\n\n***\n\n### `registerFile(path: string, filePath: string): void`\n\nRegisters a single static file for a specific path.\n\n**Parameters:**\n\n| Name       | Type     | Description                   |\n| ---------- | -------- | ----------------------------- |\n| `path`     | `string` | The HTTP request path.        |\n| `filePath` | `string` | The local file path to serve. |\n\n**Example:**\n\n```ts\nserver.registerFile(\"/readme\", Path.join(Script.directory, \"README.md\"))\n```\n\nAccessing `/readme` in the browser returns the file content.\n\n***\n\n### `registerFilesFromDirectory(path: string, directory: string, options?: { defaults?: string[] }): void`\n\nRegisters a directory of static files to serve.\n\n**Parameters:**\n\n| Name               | Type       | Description                                                                                    |\n| ------------------ | ---------- | ---------------------------------------------------------------------------------------------- |\n| `path`             | `string`   | The URL path template, e.g., `/static/:file`.                                                  |\n| `directory`        | `string`   | The directory path to serve from.                                                              |\n| `options.defaults` | `string[]` | Default files to serve if no filename is provided (default: `[\"index.html\", \"default.html\"]`). |\n\n**Example:**\n\n```ts\nserver.registerFilesFromDirectory(\"/static/:file\", Path.join(Script.directory, \"html\"), {\n  defaults: [\"index.html\", \"index.htm\"]\n})\n```\n\nWhen accessing `/static/`, the server automatically serves the default index file.\n\n***\n\n### `registerWebsocket(path: string, handlers: WebSocketHandlers): void`\n\nRegisters a WebSocket handler for the specified path.\n\n**Parameters:**\n\n| Name       | Type                | Description                            |\n| ---------- | ------------------- | -------------------------------------- |\n| `path`     | `string`            | The WebSocket endpoint path.           |\n| `handlers` | `WebSocketHandlers` | The WebSocket event handler functions. |\n\n**WebSocketHandlers type definition:**\n\n```ts\ninterface WebSocketHandlers {\n  onPong?: (session: WebSocketSession) => void\n  onConnected?: (session: WebSocketSession) => void\n  onDisconnected?: (session: WebSocketSession) => void\n  handleText?: (session: WebSocketSession, text: string) => void\n  handleBinary?: (session: WebSocketSession, data: Data) => void\n}\n```\n\n**Example:**\n\n```ts\nconst connectedSessions: WebSocketSession[] = []\n\nserver.registerWebsocket(\"/ws\", {\n  onConnected: (session) => {\n    connectedSessions.push(session)\n  },\n  onDisconnected: (session) => {\n    connectedSessions.splice(connectedSessions.indexOf(session), 1)\n  },\n  handleText: (session, text) => {\n    session.writeText(\"Echo: \" + text)\n  }\n})\n```\n\n***\n\n### `start(options?: { port?: number; forceIPv4?: boolean }): string | null`\n\nStarts the HTTP server.\n\n**Parameters:**\n\n| Name                | Type      | Description                                                                                      |\n| ------------------- | --------- | ------------------------------------------------------------------------------------------------ |\n| `options.port`      | `number`  | The port to listen on (default: `8080`). If `0` is specified, a random available port is chosen. |\n| `options.forceIPv4` | `boolean` | Whether to force IPv4 listening (default: `false`).                                              |\n\n**Returns:**\n\n- Returns `null` if the server starts successfully.\n- Returns an error message string if the server fails to start.\n\n**Example:**\n\n```ts\nconst error = server.start({ port: 8080 })\nif (error) {\n  console.error(\"Failed to start:\", error)\n} else {\n  console.log(\"Server running on port:\", server.port)\n}\n```\n\n***\n\n### `stop(): void`\n\nStops the HTTP server and releases its resources.\n\n**Example:**\n\n```ts\nserver.stop()\nconsole.log(\"Server stopped\")\n```\n\n***\n\n## Type Definitions\n\n### `HttpServerState`\n\n```ts\ntype HttpServerState = \"starting\" | \"running\" | \"stopping\" | \"stopped\"\n```\n\n***\n\n### `WebSocketSession`\n\nRepresents a live WebSocket connection.\n\n**Methods:**\n\n| Method                    | Description                           |\n| ------------------------- | ------------------------------------- |\n| `writeText(text: string)` | Sends a text message to the client.   |\n| `writeData(data: Data)`   | Sends a binary message to the client. |\n| `close()`                 | Closes the connection.                |\n\n***\n\n## Full Example\n\nBelow is a complete example of a working HTTP + WebSocket server:\n\n```ts\nconst server = new HttpServer()\n\n// Register a simple HTTP route\nserver.registerHandler(\"/api/hello\", (req) => {\n  return HttpResponse.ok(HttpResponseBody.text(\"Hello from Scripting Server\"))\n})\n\n// Serve static files from a directory\nserver.registerFilesFromDirectory(\"/public/:file\", Path.join(Script.directory, \"html\"))\n\n// WebSocket chat example\nserver.registerWebsocket(\"/chat\", {\n  onConnected: (session) => {\n    console.log(\"Client connected\")\n    session.writeText(\"Welcome to the chat\")\n  },\n  handleText: (session, text) => {\n    console.log(\"Received:\", text)\n    session.writeText(\"You said: \" + text)\n  }\n})\n\n// Start the server\nconst error = server.start({ port: 8080 })\nif (error) {\n  console.error(\"Server failed to start:\", error)\n} else {\n  console.log(\"HTTP Server started on port:\", server.port)\n}\n```\n","routePath":"/doc/Utilities/HttpServer/HttpServer","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":425},{"id":"properties","text":"Properties","depth":2,"charIndex":738},{"id":"state-httpserverstate","text":"`state: HttpServerState`","depth":3,"charIndex":753},{"id":"port-number--null","text":"`port: number | null`","depth":3,"charIndex":1081},{"id":"isipv4-boolean","text":"`isIPv4: boolean`","depth":3,"charIndex":1210},{"id":"listenaddressipv4-string--null","text":"`listenAddressIPv4: string | null`","depth":3,"charIndex":1343},{"id":"listenaddressipv6-string--null","text":"`listenAddressIPv6: string | null`","depth":3,"charIndex":1465},{"id":"methods","text":"Methods","depth":2,"charIndex":1587},{"id":"registerhandlerpath-string-handler-request-httprequest--httpresponse-void","text":"`registerHandler(path: string, handler: (request: HttpRequest) => HttpResponse): void`","depth":3,"charIndex":1599},{"id":"registerfilepath-string-filepath-string-void","text":"`registerFile(path: string, filePath: string): void`","depth":3,"charIndex":2458},{"id":"registerfilesfromdirectorypath-string-directory-string-options--defaults-string--void","text":"`registerFilesFromDirectory(path: string, directory: string, options?: { defaults?: string[] }): void`","depth":3,"charIndex":2984},{"id":"registerwebsocketpath-string-handlers-websockethandlers-void","text":"`registerWebsocket(path: string, handlers: WebSocketHandlers): void`","depth":3,"charIndex":4071},{"id":"startoptions--port-number-forceipv4-boolean--string--null","text":"`start(options?: { port?: number; forceIPv4?: boolean }): string | null`","depth":3,"charIndex":5269},{"id":"stop-void","text":"`stop(): void`","depth":3,"charIndex":6255},{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":6400},{"id":"httpserverstate","text":"`HttpServerState`","depth":3,"charIndex":6421},{"id":"websocketsession","text":"`WebSocketSession`","depth":3,"charIndex":6531},{"id":"full-example","text":"Full Example","depth":2,"charIndex":6966}],"frontmatter":{},"version":"","description":"The HttpServer class provides a lightweight local HTTP server that can handle HTTP requests, serve static files, and manage WebSocket connections. It is commonly used for local debugging, communication between devices, and serving simple web APIs inside scripts."},{"title":"WebSocketSession <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# WebSocketSession \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `WebSocketSession` class represents an active WebSocket connection session.\nIt is created automatically when a client connects to a WebSocket endpoint registered via `HttpServer.registerWebsocket()` and enables **bi-directional real-time communication** between the server and the client.\n\n***\n\n## Overview\n\nThrough a `WebSocketSession`, you can:\n\n- Receive text or binary data from clients\n- Send messages (text or binary) back to clients\n- Handle connection and disconnection events\n- Close the WebSocket connection gracefully\n\nEach `WebSocketSession` instance corresponds to one client connection and can be managed individually or stored for broadcasting messages.\n\n***\n\n## Use Cases\n\n- Real-time chat or collaboration systems\n- Live notifications or dashboard updates\n- Device control or IoT message channels\n- Local WebSocket servers communicating with other devices or web clients\n\n***\n\n## Methods\n\n### `writeText(text: string): void`\n\nSends a text message to the connected client.\n\n**Parameters:**\n\n| Name   | Type     | Description               |\n| ------ | -------- | ------------------------- |\n| `text` | `string` | The text content to send. |\n\n**Example:**\n\n```ts\nserver.registerWebsocket(\"/chat\", {\n  onConnected: (session) => {\n    session.writeText(\"Welcome to the chat room!\")\n  },\n  handleText: (session, text) => {\n    console.log(\"Client says:\", text)\n    session.writeText(\"You said: \" + text)\n  }\n})\n```\n\n***\n\n### `writeData(data: Data): void`\n\nSends a binary message to the connected client.\n\n**Parameters:**\n\n| Name   | Type   | Description              |\n| ------ | ------ | ------------------------ |\n| `data` | `Data` | The binary data to send. |\n\n**Example:**\n\n```ts\nserver.registerWebsocket(\"/binary\", {\n  onConnected: (session) => {\n    const msg = Data.fromRawString(\"Binary hello\", \"utf-8\")\n    session.writeData(msg)\n  }\n})\n```\n\n***\n\n### `close(): void`\n\nCloses the WebSocket session.\nAfter calling this method, the connection is terminated and no further messages will be received or sent.\n\n**Example:**\n\n```ts\nserver.registerWebsocket(\"/ws\", {\n  handleText: (session, text) => {\n    if (text === \"bye\") {\n      session.writeText(\"Goodbye!\")\n      session.close()\n    }\n  }\n})\n```\n\n***\n\n## Integration with `HttpServer.registerWebsocket()`\n\n`WebSocketSession` instances are passed into the event handlers defined in `registerWebsocket()`.\n\n### Example\n\n```ts\nconst connectedSessions: WebSocketSession[] = []\n\nserver.registerWebsocket(\"/ws\", {\n  onConnected: (session) => {\n    connectedSessions.push(session)\n    console.log(\"Client connected\")\n    session.writeText(\"Connection established!\")\n  },\n  handleText: (session, text) => {\n    console.log(\"Received:\", text)\n    // Broadcast message to all clients\n    for (const s of connectedSessions) {\n      s.writeText(\"Broadcast: \" + text)\n    }\n  },\n  handleBinary: (session, data) => {\n    console.log(\"Received binary data:\", data.length)\n  },\n  onDisconnected: (session) => {\n    const index = connectedSessions.indexOf(session)\n    if (index !== -1) connectedSessions.splice(index, 1)\n    console.log(\"Client disconnected\")\n  }\n})\n```\n\n***\n\n## Common WebSocket Event Handlers\n\nThese handlers are defined in `HttpServer.registerWebsocket()` and receive `WebSocketSession` objects.\n\n| Handler          | Trigger                              | Parameters                                  | Description                                     |\n| ---------------- | ------------------------------------ | ------------------------------------------- | ----------------------------------------------- |\n| `onConnected`    | When a new connection is established | `(session: WebSocketSession)`               | Called once when a client connects.             |\n| `onDisconnected` | When the client disconnects          | `(session: WebSocketSession)`               | Called when the connection is closed.           |\n| `onPong`         | When a ping/pong frame is received   | `(session: WebSocketSession)`               | Used for heartbeat or connection health checks. |\n| `handleText`     | When a text message is received      | `(session: WebSocketSession, text: string)` | Handles text-based messages.                    |\n| `handleBinary`   | When a binary message is received    | `(session: WebSocketSession, data: Data)`   | Handles binary data messages.                   |\n\n***\n\n## Example: Simple Real-Time Chat Server\n\n```ts\nconst sessions: WebSocketSession[] = []\n\nserver.registerWebsocket(\"/chat\", {\n  onConnected: (session) => {\n    sessions.push(session)\n    session.writeText(\"Welcome! There are \" + sessions.length + \" users online.\")\n  },\n  handleText: (session, text) => {\n    for (const s of sessions) {\n      s.writeText(text) // Broadcast message to all connected clients\n    }\n  },\n  onDisconnected: (session) => {\n    const index = sessions.indexOf(session)\n    if (index !== -1) sessions.splice(index, 1)\n  }\n})\n```\n\n**Client example (JavaScript):**\n\n```js\nconst ws = new WebSocket(\"ws://localhost:8080/chat\")\nws.onmessage = e => console.log(\"Server:\", e.data)\nws.send(\"Hello everyone!\")\n```\n\n***\n\n## Type Definition\n\n```ts\nclass WebSocketSession {\n  writeText(text: string): void\n  writeData(data: Data): void\n  close(): void\n}\n```\n\n***\n\n## Summary\n\n| Method        | Description                        | Typical Use Case                   |\n| ------------- | ---------------------------------- | ---------------------------------- |\n| `writeText()` | Sends a text message to the client | Chat, notifications, logs          |\n| `writeData()` | Sends binary data to the client    | File transfer, streaming, IoT data |\n| `close()`     | Closes the WebSocket connection    | Graceful shutdown or cleanup       |\n","routePath":"/doc/Utilities/HttpServer/WebSocketSession","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":459},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":839},{"id":"methods","text":"Methods","depth":2,"charIndex":1058},{"id":"writetexttext-string-void","text":"`writeText(text: string): void`","depth":3,"charIndex":1070},{"id":"writedatadata-data-void","text":"`writeData(data: Data): void`","depth":3,"charIndex":1597},{"id":"close-void","text":"`close(): void`","depth":3,"charIndex":2032},{"id":"integration-with-httpserverregisterwebsocket","text":"Integration with `HttpServer.registerWebsocket()`","depth":2,"charIndex":2386},{"id":"example","text":"Example","depth":3,"charIndex":2539},{"id":"common-websocket-event-handlers","text":"Common WebSocket Event Handlers","depth":2,"charIndex":3295},{"id":"example-simple-real-time-chat-server","text":"Example: Simple Real-Time Chat Server","depth":2,"charIndex":4533},{"id":"type-definition","text":"Type Definition","depth":2,"charIndex":5268},{"id":"summary","text":"Summary","depth":2,"charIndex":5409}],"frontmatter":{},"version":"","description":"The WebSocketSession class represents an active WebSocket connection session.\nIt is created automatically when a client connects to a WebSocket endpoint registered via HttpServer.registerWebsocket() and enables bi-directional real-time communication between the server and the client."},{"title":"ItemProvider","content":"`ItemProvider` represents a **deferred data provider** used to access content such as files, images, text, or URLs in a controlled and secure way.\nIt is commonly used in scenarios like drag and drop, file importing, and content selection from Photos or Files.\n\nAn `ItemProvider` does not store the data itself. Instead, it describes **how and under what constraints the data can be accessed**.\n\n***\n\n## Core Concepts\n\n- `ItemProvider` describes capabilities, not concrete data\n- Data loading is always subject to system security restrictions\n- File-based resources can only be accessed within a limited, controlled scope\n- Whether a file can be accessed in place is determined by the underlying system\n\n***\n\n## Properties\n\n### registeredTypes\n\n```ts\nreadonly registeredTypes: UTType[]\n```\n\nRepresents all types that the item provider can supply at a semantic level.\n\n- Includes both concrete types and inferred parent types\n- Useful for high-level content classification or debugging\n- Does not guarantee that a concrete file representation exists\n\n***\n\n### registeredInPlaceTypes\n\n```ts\nreadonly registeredInPlaceTypes: UTType[]\n```\n\nRepresents the set of types that support open-in-place access.\n\n- Typically applies to large resources such as videos, audio files, or documents\n- Actual in-place access is determined at load time\n\n***\n\n## Capability Checks\n\n### hasItemConforming\n\n```ts\nhasItemConforming(type: UTType): boolean\n```\n\nChecks whether the content semantically conforms to the specified type.\n\n- Performs a broad, semantic check\n- Considers UTType inheritance\n- Suitable for branching logic and content classification\n\n***\n\n### hasRepresentationConforming\n\n```ts\nhasRepresentationConforming(type: UTType): boolean\n```\n\nChecks whether a concrete, loadable representation exists for the specified type.\n\n- Performs a strict check\n- Suitable for file processing and format-specific workflows\n\n***\n\n### hasInPlaceRepresentationConforming\n\n```ts\nhasInPlaceRepresentationConforming(type: UTType): boolean\n```\n\nChecks whether a representation supporting open-in-place access exists.\n\n- Commonly used to choose loading strategies for large files\n\n***\n\n## Object Loading Capabilities\n\n### canLoadUIImage\n\n```ts\ncanLoadUIImage(): boolean\n```\n\nIndicates whether the content can be loaded as a `UIImage`.\n\n- Intended for UI display\n- Does not guarantee preservation of original format or metadata\n\n***\n\n### canLoadLivePhoto\n\n```ts\ncanLoadLivePhoto(): boolean\n```\n\nIndicates whether the content can be loaded as a `LivePhoto`.\n\n- Used to distinguish Live Photos from static images\n- When true, `loadLivePhoto` can be called\n\n***\n\n## Loading Methods\n\n### loadUIImage\n\n```ts\nloadUIImage(): Promise<UIImage | null>\n```\n\nLoads a `UIImage` object.\n\n- Suitable for lightweight display\n- Not intended for file-level processing or asset preservation\n\n***\n\n### loadLivePhoto\n\n```ts\nloadLivePhoto(): Promise<LivePhoto | null>\n```\n\nLoads a `LivePhoto` object.\n\n- Includes both the still image and paired video\n- Suitable for display, saving, or further processing\n\n***\n\n### loadURL\n\n```ts\nloadURL(): Promise<string | null>\n```\n\nLoads a URL and returns it as a string.\n\n- May represent a web URL or a file URL\n\n***\n\n### loadText\n\n```ts\nloadText(): Promise<string | null>\n```\n\nLoads plain text content.\n\n- Supports plain text\n- Rich text is automatically converted to plain text\n\n***\n\n### loadData\n\n```ts\nloadData(type: UTType): Promise<Data | null>\n```\n\nLoads raw binary data for the specified type.\n\n- The entire data payload is loaded into memory\n- Suitable for JSON, configuration files, or small resources\n- Not recommended for large files such as video or audio\n\n***\n\n## File Path Loading and Security Scope\n\nAccess to file paths is subject to strict security rules.\nAll file access must occur within a limited callback scope provided by the API.\n\n***\n\n### loadFilePath\n\n```ts\nloadFilePath(type: UTType): Promise<string | null>\n```\n\nLoads a file path for the specified type. If the item provider can load data as the specified type, this file will be copied to the app group's temporary directory and the file path will be returned, otherwise null will be returned. You should delete the file when it is no longer needed.\n\nExample:\n\n```ts\nconst filePath = provider.loadFilePath(\"public.movie\")\n```\n\n***\n\n## Creating an ItemProvider\n\n### fromUIImage\n\n```ts\nItemProvider.fromUIImage(image: UIImage): ItemProvider\n```\n\nCreates an `ItemProvider` from a `UIImage`.\n\n- Provides static image capabilities only\n- Does not include Live Photo or original asset information\n\n***\n\n### fromText\n\n```ts\nItemProvider.fromText(text: string): ItemProvider\n```\n\nCreates an `ItemProvider` from a text string.\n\n***\n\n### fromURL\n\n```ts\nItemProvider.fromURL(url: string): ItemProvider | null\n```\n\nCreates an `ItemProvider` from a URL string.\n\n- Returns `null` if the URL is invalid\n- Supports both web URLs and file URLs\n\n***\n\n### fromFilePath\n\n```ts\nItemProvider.fromFilePath(path: string): ItemProvider\n```\n\nCreates an `ItemProvider` from a file path.\n\n- Preserves the original file\n- Suitable for videos, audio, and documents\n- Supports open-in-place capability checks\n\n***\n\n## Usage Guidelines\n\n- Use `hasItemConforming` to determine content categories\n- Use object loading methods for UI display\n- Use file path loading methods for large resources\n- Always access files only within the provided callback scope\n- Never defer access to security-scoped files outside the callback\n","routePath":"/doc/Utilities/ItemProvider","lang":"en","toc":[{"id":"core-concepts","text":"Core Concepts","depth":2,"charIndex":400},{"id":"properties","text":"Properties","depth":2,"charIndex":708},{"id":"registeredtypes","text":"registeredTypes","depth":3,"charIndex":723},{"id":"registeredinplacetypes","text":"registeredInPlaceTypes","depth":3,"charIndex":1054},{"id":"capability-checks","text":"Capability Checks","depth":2,"charIndex":1338},{"id":"hasitemconforming","text":"hasItemConforming","depth":3,"charIndex":1360},{"id":"hasrepresentationconforming","text":"hasRepresentationConforming","depth":3,"charIndex":1638},{"id":"hasinplacerepresentationconforming","text":"hasInPlaceRepresentationConforming","depth":3,"charIndex":1909},{"id":"object-loading-capabilities","text":"Object Loading Capabilities","depth":2,"charIndex":2158},{"id":"canloaduiimage","text":"canLoadUIImage","depth":3,"charIndex":2190},{"id":"canloadlivephoto","text":"canLoadLivePhoto","depth":3,"charIndex":2405},{"id":"loading-methods","text":"Loading Methods","depth":2,"charIndex":2631},{"id":"loaduiimage","text":"loadUIImage","depth":3,"charIndex":2651},{"id":"loadlivephoto","text":"loadLivePhoto","depth":3,"charIndex":2849},{"id":"loadurl","text":"loadURL","depth":3,"charIndex":3060},{"id":"loadtext","text":"loadText","depth":3,"charIndex":3205},{"id":"loaddata","text":"loadData","depth":3,"charIndex":3373},{"id":"file-path-loading-and-security-scope","text":"File Path Loading and Security Scope","depth":2,"charIndex":3662},{"id":"loadfilepath","text":"loadFilePath","depth":3,"charIndex":3847},{"id":"creating-an-itemprovider","text":"Creating an ItemProvider","depth":2,"charIndex":4298},{"id":"fromuiimage","text":"fromUIImage","depth":3,"charIndex":4327},{"id":"fromtext","text":"fromText","depth":3,"charIndex":4563},{"id":"fromurl","text":"fromURL","depth":3,"charIndex":4690},{"id":"fromfilepath","text":"fromFilePath","depth":3,"charIndex":4899},{"id":"usage-guidelines","text":"Usage Guidelines","depth":2,"charIndex":5150}],"frontmatter":{},"version":"","description":"ItemProvider represents a deferred data provider used to access content such as files, images, text, or URLs in a controlled and secure way.\nIt is commonly used in scenarios like drag and drop, file importing, and content selection from Photos or Files. An ItemProvider does not store the data itself. Instead, it describes how and under what constraints the data can be accessed."},{"title":"OAuth2","content":"The `OAuth2` class provides a robust interface for managing OAuth 2.0 authorization flows in Scripting. It supports standard authorization code flows, PKCE (Proof Key for Code Exchange), access token renewal, and customizable token handling.\n\n***\n\n## Constructor\n\n```ts\nnew OAuth2(options: {\n  consumerKey: string\n  consumerSecret: string\n  authorizeUrl: string\n  accessTokenUrl?: string\n  responseType: string\n  contentType?: string\n})\n```\n\n### Parameters\n\n| Name           | Type   | Required | Description                                                                         |\n| -------------- | ------ | -------- | ----------------------------------------------------------------------------------- |\n| consumerKey    | string | Yes      | The application's client ID or consumer key.                                        |\n| consumerSecret | string | Yes      | The application's client secret.                                                    |\n| authorizeUrl   | string | Yes      | The URL where the user will be redirected for authorization.                        |\n| accessTokenUrl | string | No       | The endpoint to request the access token. If omitted, `authorizeUrl` is used.       |\n| responseType   | string | Yes      | Typically `\"code\"` for the Authorization Code Grant flow.                           |\n| contentType    | string | No       | Content type for token requests. Defaults to `\"application/x-www-form-urlencoded\"`. |\n\n### Throws\n\n- Error if the configuration is invalid or instantiation fails.\n\n***\n\n## Properties\n\n### `accessTokenBasicAuthentification: boolean`\n\nEnable this to use HTTP Basic authentication when exchanging the authorization code for an access token. Default is `false`.\n\n***\n\n### `allowMissingStateCheck: boolean`\n\nDisables CSRF protection based on state parameter validation. **Use with caution.** Default is `false`.\n\n***\n\n### `encodeCallbackURL: boolean`\n\nEncodes the callback URL when generating the authorization URL. Required by some providers. Default is `true`.\n\n***\n\n### `encodeCallbackURLQuery: boolean`\n\nControls whether the entire query string is encoded. Some services (e.g., Imgur) require this to be `false`. Default is `true`.\n\n***\n\n## Methods\n\n### `authorize(options): Promise<OAuthCredential>`\n\nInitiates the OAuth2 authorization flow, opening a browser window for the user to log in and grant permissions.\n\n```ts\nauthorize(options: {\n  callbackURL?: string\n  scope: string\n  state: string\n  parameters?: Record<string, any>\n  headers?: Record<string, string>\n} & ({\n  codeVerifier: string\n  codeChallenge: string\n  codeChallengeMethod: string\n} | {\n  codeVerifier?: never\n  codeChallenge?: never\n  codeChallengeMethod?: never\n})): Promise<OAuthCredential>\n```\n\n#### Parameters\n\n| Name                | Type                    | Required    | Description                                                                                 |\n| ------------------- | ----------------------- | ----------- | ------------------------------------------------------------------------------------------- |\n| callbackURL         | string                  | No          | Custom redirect URI. Default is `scripting://oauth_callback/{current_script_encoded_name}`. |\n| scope               | string                  | Yes         | Space-separated list of requested scopes.                                                   |\n| state               | string                  | Yes         | A unique string used to prevent CSRF attacks.                                               |\n| parameters          | Record\\<string, any>    | No          | Extra query parameters to send in the authorization request.                                |\n| headers             | Record\\<string, string> | No          | Extra headers to send in the request.                                                       |\n| codeVerifier        | string                  | Conditional | Raw random string used in PKCE flow.                                                        |\n| codeChallenge       | string                  | Conditional | Hashed version of the code verifier.                                                        |\n| codeChallengeMethod | \"plain\" \\| \"S256\"       | Conditional | Hashing method for code challenge. Default is `\"S256\"`.                                     |\n\n#### Returns\n\n- A Promise that resolves to an `OAuthCredential` object containing tokens and metadata.\n\n#### Throws\n\n- Error if the user denies authorization or a network/response error occurs.\n\n#### Example\n\n```ts\nconst oauth = new OAuth2({\n  consumerKey: 'your-client-id',\n  consumerSecret: 'your-client-secret',\n  authorizeUrl: 'https://provider.com/oauth/authorize',\n  accessTokenUrl: 'https://provider.com/oauth/token',\n  responseType: 'code'\n})\n\nconst credential = await oauth.authorize({\n  scope: 'profile email',\n  state: 'secure_random_state',\n  callbackURL: Script.createOAuthCallbackURLScheme('my_oauth_script')\n})\n\nconsole.log(credential.oauthToken)\n```\n\n***\n\n### `renewAccessToken(options): Promise<OAuthCredential>`\n\nExchanges a refresh token for a new access token from the provider.\n\n```ts\nrenewAccessToken(options: {\n  refreshToken: string\n  parameters?: Record<string, any>\n  headers?: Record<string, string>\n}): Promise<OAuthCredential>\n```\n\n#### Parameters\n\n| Name         | Type                    | Required | Description                            |\n| ------------ | ----------------------- | -------- | -------------------------------------- |\n| refreshToken | string                  | Yes      | The refresh token previously obtained. |\n| parameters   | Record\\<string, any>    | No       | Additional POST body parameters.       |\n| headers      | Record\\<string, string> | No       | Additional headers for the request.    |\n\n#### Returns\n\n- A Promise that resolves to an updated `OAuthCredential` object.\n\n#### Throws\n\n- Error if the refresh fails due to expired or revoked tokens.\n\n#### Example\n\n```ts\nconst newCredential = await oauth.renewAccessToken({\n  refreshToken: previous.oauthRefreshToken\n})\n\nconsole.log(newCredential.oauthToken)\n```\n\n***\n\n## OAuthCredential Type\n\nThe `OAuthCredential` object contains all relevant information from a successful OAuth2 transaction.\n\n```ts\ntype OAuthCredential = {\n  oauthToken: string\n  oauthTokenSecret: string\n  oauthRefreshToken: string\n  oauthTokenExpiresAt: number | null\n  oauthVerifier: string\n  version: string\n  signatureMethod: string\n}\n```\n\n### Field Descriptions\n\n| Field               | Type           | Description                                                      |\n| ------------------- | -------------- | ---------------------------------------------------------------- |\n| oauthToken          | string         | Access token to authorize requests to the API.                   |\n| oauthTokenSecret    | string         | Token secret for request signing (used in OAuth1.0-like flows).  |\n| oauthRefreshToken   | string         | Token used to refresh the access token.                          |\n| oauthTokenExpiresAt | number \\| null | Expiration time in Unix timestamp (ms). `null` if no expiration. |\n| oauthVerifier       | string         | Verifier used for PKCE validation.                               |\n| version             | string         | OAuth version (e.g., \"2.0\").                                     |\n| signatureMethod     | string         | Method used to sign requests (e.g., \"HMAC-SHA1\", \"PLAINTEXT\").   |\n\n***\n\n## Best Practices\n\n- Always verify `state` to protect against CSRF attacks unless explicitly disabled.\n- Use `Script.createOAuthCallbackURLScheme(name)` to generate script-specific callback URLs.\n- Securely store the `oauthRefreshToken` if long-term access is needed.\n- Consider using PKCE for enhanced security, especially in public clients.\n","routePath":"/doc/Utilities/OAuth2","lang":"en","toc":[{"id":"constructor","text":"Constructor","depth":2,"charIndex":248},{"id":"parameters","text":"Parameters","depth":3,"charIndex":442},{"id":"throws","text":"Throws","depth":3,"charIndex":1459},{"id":"properties","text":"Properties","depth":2,"charIndex":1541},{"id":"accesstokenbasicauthentification-boolean","text":"`accessTokenBasicAuthentification: boolean`","depth":3,"charIndex":1556},{"id":"allowmissingstatecheck-boolean","text":"`allowMissingStateCheck: boolean`","depth":3,"charIndex":1736},{"id":"encodecallbackurl-boolean","text":"`encodeCallbackURL: boolean`","depth":3,"charIndex":1885},{"id":"encodecallbackurlquery-boolean","text":"`encodeCallbackURLQuery: boolean`","depth":3,"charIndex":2036},{"id":"methods","text":"Methods","depth":2,"charIndex":2209},{"id":"authorizeoptions-promiseoauthcredential","text":"`authorize(options): Promise<OAuthCredential>`","depth":3,"charIndex":2221},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":5299},{"id":"returns","text":"Returns","depth":4,"charIndex":4338},{"id":"throws-1","text":"Throws","depth":4,"charIndex":5873},{"id":"example","text":"Example","depth":4,"charIndex":4533},{"id":"renewaccesstokenoptions-promiseoauthcredential","text":"`renewAccessToken(options): Promise<OAuthCredential>`","depth":3,"charIndex":5010},{"id":"parameters-2","text":"Parameters","depth":4,"charIndex":-1},{"id":"returns-1","text":"Returns","depth":4,"charIndex":5792},{"id":"throws-2","text":"Throws","depth":4,"charIndex":-1},{"id":"example-1","text":"Example","depth":4,"charIndex":5950},{"id":"oauthcredential-type","text":"OAuthCredential Type","depth":2,"charIndex":6118},{"id":"field-descriptions","text":"Field Descriptions","depth":3,"charIndex":6464},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":7466}],"frontmatter":{},"version":"","description":"The OAuth2 class provides a robust interface for managing OAuth 2.0 authorization flows in Scripting. It supports standard authorization code flows, PKCE (Proof Key for Code Exchange), access token renewal, and customizable token handling."},{"title":"Path","content":"The `Path` API provides utility functions for handling and transforming file and directory paths. It is inspired by the Node.js `path` module, offering familiar methods for developers to work with paths effectively.\n\n***\n\n## Overview\n\nThe `Path` API provides methods for:\n\n- Normalizing paths.\n- Determining if a path is absolute.\n- Joining path segments.\n- Extracting path components like directory name, base name, and extension.\n- Parsing paths into structured objects.\n\nIt simplifies cross-platform path handling by using the appropriate path delimiters and separators for the current operating system.\n\n***\n\n### Static Methods\n\n#### `Path.normalize(path: string): string`\n\nNormalizes the given path by resolving `..` and `.` segments.\n\n- **Parameters:**\n  - `path`: The input path to normalize.\n- **Returns:**\n  - A normalized path string.\n\n#### Example:\n\n```typescript\nconst normalizedPath = Path.normalize('/foo/bar//baz/asdf/quux/..')\nconsole.log(normalizedPath) // '/foo/bar/baz/asdf'\n```\n\n***\n\n#### `Path.isAbsolute(path: string): boolean`\n\nDetermines whether a given path is absolute.\n\n- **Parameters:**\n  - `path`: The input path.\n- **Returns:**\n  - `true` if the path is absolute, otherwise `false`.\n\n#### Example:\n\n```typescript\nconsole.log(Path.isAbsolute('/foo/bar')) // true\nconsole.log(Path.isAbsolute('foo/bar'))  // false\n```\n\n***\n\n#### `Path.join(...args: string[]): string`\n\nJoins multiple path segments into a single path and normalizes it.\n\n- **Parameters:**\n  - `...args`: The path segments to join.\n- **Returns:**\n  - A single normalized path string.\n\n#### Example:\n\n```typescript\nconst joinedPath = Path.join('/foo', 'bar', 'baz/asdf', 'quux', '..')\nconsole.log(joinedPath) // '/foo/bar/baz/asdf'\n```\n\n***\n\n#### `Path.dirname(path: string): string`\n\nReturns the directory name of a path.\n\n- **Parameters:**\n  - `path`: The input path.\n- **Returns:**\n  - The directory name.\n\n#### Example:\n\n```typescript\nconsole.log(Path.dirname('/foo/bar/baz/asdf/quux')) // '/foo/bar/baz/asdf'\n```\n\n***\n\n#### `Path.basename(path: string, ext?: string): string`\n\nReturns the last portion of a path, similar to the Unix `basename` command. Optionally, removes a file extension.\n\n- **Parameters:**\n  - `path`: The input path.\n  - `ext` (optional): The file extension to remove.\n- **Returns:**\n  - The base name of the path.\n\n#### Example:\n\n```typescript\nconsole.log(Path.basename('/foo/bar/baz/asdf/quux.html')) // 'quux.html'\nconsole.log(Path.basename('/foo/bar/baz/asdf/quux.html', '.html')) // 'quux'\n```\n\n***\n\n#### `Path.extname(path: string): string`\n\nReturns the extension of the path.\n\n- **Parameters:**\n  - `path`: The input path.\n- **Returns:**\n  - The file extension, or an empty string if none exists.\n\n#### Example:\n\n```typescript\nconsole.log(Path.extname('/foo/bar/baz/asdf/quux.html')) // '.html'\nconsole.log(Path.extname('/foo/bar/baz/asdf/quux'))     // ''\n```\n\n***\n\n#### `Path.parse(path: string): { root: string; dir: string; base: string; ext: string; name: string; }`\n\nParses a path into an object with the following properties:\n\n- `root`: The root of the path.\n\n- `dir`: The directory name.\n\n- `base`: The file name including the extension.\n\n- `ext`: The file extension.\n\n- `name`: The file name without the extension.\n\n- **Parameters:**\n  - `path`: The input path.\n\n- **Returns:**\n  - An object with the parsed path properties.\n\n#### Example:\n\n```typescript\nconst parsed = Path.parse('/foo/bar/baz/asdf/quux.html')\nconsole.log(parsed)\n// {\n//   root: '/',\n//   dir: '/foo/bar/baz/asdf',\n//   base: 'quux.html',\n//   ext: '.html',\n//   name: 'quux'\n// }\n```\n\n***\n\n## Common Use Cases\n\n### Normalize a Path\n\n```typescript\nconst normalizedPath = Path.normalize('./foo/bar/../baz')\nconsole.log(normalizedPath) // './foo/baz'\n```\n\n### Check If a Path is Absolute\n\n```typescript\nconsole.log(Path.isAbsolute('/absolute/path')) // true\nconsole.log(Path.isAbsolute('relative/path'))  // false\n```\n\n### Join Multiple Path Segments\n\n```typescript\nconst fullPath = Path.join('/home', 'user', 'documents', 'file.txt')\nconsole.log(fullPath) // '/home/user/documents/file.txt'\n```\n\n### Extract File Name and Extension\n\n```typescript\nconst fileName = Path.basename('/path/to/file.txt')\nconst fileExt = Path.extname('/path/to/file.txt')\nconsole.log(fileName) // 'file.txt'\nconsole.log(fileExt)  // '.txt'\n```\n\n### Parse a Path\n\n```typescript\nconst pathDetails = Path.parse('/path/to/file.txt')\nconsole.log(pathDetails)\n// {\n//   root: '/',\n//   dir: '/path/to',\n//   base: 'file.txt',\n//   ext: '.txt',\n//   name: 'file'\n// }\n```\n\n***\n\n## Best Practices\n\n1. **Use Normalization:** Always normalize paths to ensure consistent formatting across platforms.\n2. **Avoid Hardcoding Delimiters:** Use methods like `join` instead of concatenating strings with `/` or `\\\\`.\n\n***\n\n## Full Example\n\n```typescript\n\n\nfunction main() {\n  const filePath = '/foo/bar/baz/asdf/quux.html'\n\n  console.log(\"Normalized Path:\", Path.normalize(filePath))\n  console.log(\"Is Absolute:\", Path.isAbsolute(filePath))\n  console.log(\"Directory Name:\", Path.dirname(filePath))\n  console.log(\"Base Name:\", Path.basename(filePath))\n  console.log(\"Extension:\", Path.extname(filePath))\n\n  const parsedPath = Path.parse(filePath)\n  console.log(\"Parsed Path:\", parsedPath)\n\n  const joinedPath = Path.join('/foo', 'bar', 'baz')\n  console.log(\"Joined Path:\", joinedPath)\n}\n\nmain()\n```\n","routePath":"/doc/Utilities/Path","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":222},{"id":"static-methods","text":"Static Methods","depth":3,"charIndex":613},{"id":"pathnormalizepath-string-string","text":"`Path.normalize(path: string): string`","depth":4,"charIndex":633},{"id":"example","text":"Example:","depth":4,"charIndex":846},{"id":"pathisabsolutepath-string-boolean","text":"`Path.isAbsolute(path: string): boolean`","depth":4,"charIndex":1004},{"id":"example-1","text":"Example:","depth":4,"charIndex":1214},{"id":"pathjoinargs-string-string","text":"`Path.join(...args: string[]): string`","depth":4,"charIndex":1352},{"id":"example-2","text":"Example:","depth":4,"charIndex":1578},{"id":"pathdirnamepath-string-string","text":"`Path.dirname(path: string): string`","depth":4,"charIndex":1734},{"id":"example-3","text":"Example:","depth":4,"charIndex":1902},{"id":"pathbasenamepath-string-ext-string-string","text":"`Path.basename(path: string, ext?: string): string`","depth":4,"charIndex":2016},{"id":"example-4","text":"Example:","depth":4,"charIndex":2334},{"id":"pathextnamepath-string-string","text":"`Path.extname(path: string): string`","depth":4,"charIndex":2523},{"id":"example-5","text":"Example:","depth":4,"charIndex":2723},{"id":"pathparsepath-string--root-string-dir-string-base-string-ext-string-name-string-","text":"`Path.parse(path: string): { root: string; dir: string; base: string; ext: string; name: string; }`","depth":4,"charIndex":2892},{"id":"example-6","text":"Example:","depth":4,"charIndex":3360},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":3594},{"id":"normalize-a-path","text":"Normalize a Path","depth":3,"charIndex":3615},{"id":"check-if-a-path-is-absolute","text":"Check If a Path is Absolute","depth":3,"charIndex":3757},{"id":"join-multiple-path-segments","text":"Join Multiple Path Segments","depth":3,"charIndex":3920},{"id":"extract-file-name-and-extension","text":"Extract File Name and Extension","depth":3,"charIndex":4098},{"id":"parse-a-path","text":"Parse a Path","depth":3,"charIndex":4324},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":4550},{"id":"full-example","text":"Full Example","depth":2,"charIndex":4785}],"frontmatter":{},"version":"","description":"The Path API provides utility functions for handling and transforming file and directory paths. It is inspired by the Node.js path module, offering familiar methods for developers to work with paths effectively."},{"title":"FormData","content":"The `FormData` class provides a way to construct key/value pairs representing form fields and their values.\nIt is mainly used for building `multipart/form-data` requests that can include both text and binary data (such as files or images).\n\nIn the **Scripting app**, `FormData` is fully compatible with the standard **Fetch API**, allowing you to send data through `fetch()` with mixed text and file fields.\n\n***\n\n## Definition\n\n```ts\nclass FormData {\n  private formData\n  append(name: string, value: string): void\n  append(name: string, value: Data, mimeType: string, filename?: string): void\n  get(name: string): string | Data | null\n  getAll(name: string): any[]\n  has(name: string): boolean\n  delete(name: string): void\n  set(name: string, value: string): void\n  set(name: string, value: Data, filename?: string): void\n  forEach(callback: (value: any, name: string, parent: FormData) => void): void\n  entries(): [string, any][]\n  toJson(): Record<string, any>\n}\n```\n\n***\n\n## Purpose\n\n`FormData` is used to:\n\n- Build `multipart/form-data` requests with text and file fields.\n- Upload files (images, documents, audio, etc.) with metadata.\n- Replace JSON-based bodies when binary data is included.\n\n***\n\n## Methods\n\n### `append(name: string, value: string): void`\n\n### `append(name: string, value: Data, mimeType: string, filename?: string): void`\n\nAppends a new field to the form.\nCan be used to add both text and file fields.\n\n#### Parameters\n\n| Parameter    | Type                  | Description                                                                                     |                                               |\n| ------------ | --------------------- | ----------------------------------------------------------------------------------------------- | --------------------------------------------- |\n| **name**     | `string`              | The name of the form field.                                                                     |                                               |\n| **value**    | `string`              | `Data`                                                                                          | The value of the field (text or binary data). |\n| **mimeType** | `string`              | The MIME type of the file (e.g., `\"image/png\"`). Required only when `value` is a `Data` object. |                                               |\n| **filename** | `string` *(optional)* | The filename to include for file uploads.                                                       |                                               |\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"username\", \"Tom\")\nform.append(\"file\", Data.fromFile(\"/path/to/image.png\"), \"image/png\", \"avatar.png\")\n```\n\n***\n\n### `set(name: string, value: string): void`\n\n### `set(name: string, value: Data, filename?: string): void`\n\nSets a form field, replacing any existing field with the same name.\nUnlike `append()`, this overwrites previous values.\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.set(\"message\", \"Hello world\")\nform.set(\"file\", Data.fromFile(\"/path/to/file.txt\"), \"text/plain\", \"note.txt\")\n```\n\n***\n\n### `get(name: string): string | Data | null`\n\nRetrieves the value of a form field.\nReturns `null` if the field does not exist.\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"title\", \"My Post\")\nconsole.log(form.get(\"title\")) // \"My Post\"\n```\n\n***\n\n### `getAll(name: string): any[]`\n\nReturns all values associated with a given field name (useful when using multiple `append()` calls with the same name).\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"tag\", \"swift\")\nform.append(\"tag\", \"ios\")\nform.append(\"tag\", \"scripting\")\n\nconsole.log(form.getAll(\"tag\")) // [\"swift\", \"ios\", \"scripting\"]\n```\n\n***\n\n### `has(name: string): boolean`\n\nChecks whether a form field exists.\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"username\", \"Tom\")\n\nconsole.log(form.has(\"username\")) // true\nconsole.log(form.has(\"password\")) // false\n```\n\n***\n\n### `delete(name: string): void`\n\nDeletes the specified field and all of its values.\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"title\", \"Hello\")\nform.append(\"file\", Data.fromFile(\"/path/to/file.txt\"), \"text/plain\")\n\nform.delete(\"file\")\n```\n\n***\n\n### `forEach(callback: (value: any, name: string, parent: FormData) => void): void`\n\nIterates over all form fields and invokes the callback function for each one.\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"user\", \"Tom\")\nform.append(\"age\", \"25\")\n\nform.forEach((value, name) => {\n  console.log(`${name}: ${value}`)\n})\n```\n\n***\n\n### `entries(): [string, any][]`\n\nReturns an array of `[name, value]` pairs for all form fields.\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"username\", \"Tom\")\nform.append(\"age\", \"25\")\nconsole.log(form.entries())\n// [[\"username\", \"Tom\"], [\"age\", \"25\"]]\n```\n\n***\n\n### `toJson(): Record<string, any>`\n\nConverts the form data into a plain JSON object for debugging or logging.\nIf the form contains binary data (`Data` objects), those fields will be represented as descriptive placeholders instead of raw binary data.\n\n#### Example\n\n```tsx\nconst form = new FormData()\nform.append(\"name\", \"Tom\")\nform.append(\"photo\", Data.fromFile(\"/path/to/avatar.png\"), \"image/png\", \"avatar.png\")\n\nconsole.log(form.toJson())\n// { name: \"Tom\", photo: \"[Data: image/png]\" }\n```\n\n***\n\n## Usage Examples\n\n### Example 1 — Upload a File\n\n```tsx\nconst form = new FormData()\nform.append(\"file\", Data.fromFile(\"/path/to/image.png\"), \"image/png\", \"avatar.png\")\nform.append(\"userId\", \"1234\")\n\nconst response = await fetch(\"https://api.example.com/upload\", {\n  method: \"POST\",\n  body: form,\n})\n\nconsole.log(await response.json())\n```\n\n***\n\n### Example 2 — Upload Multiple Files\n\n```tsx\nconst form = new FormData()\nform.append(\"files\", Data.fromFile(\"/path/to/photo1.jpg\"), \"image/jpeg\", \"photo1.jpg\")\nform.append(\"files\", Data.fromFile(\"/path/to/photo2.jpg\"), \"image/jpeg\", \"photo2.jpg\")\n\nawait fetch(\"https://api.example.com/multi-upload\", {\n  method: \"POST\",\n  body: form,\n})\n```\n\n***\n\n### Example 3 — Mixed Text and File Fields\n\n```tsx\nconst form = new FormData()\nform.append(\"title\", \"Travel Memories\")\nform.append(\"description\", \"A collection of travel photos.\")\nform.append(\"cover\", Data.fromFile(\"/path/to/cover.png\"), \"image/png\", \"cover.png\")\n\nconst response = await fetch(\"https://example.com/uploadPost\", {\n  method: \"POST\",\n  body: form,\n})\n\nconsole.log(await response.text())\n```\n\n***\n\n### Example 4 — Iterating and Debugging\n\n```tsx\nconst form = new FormData()\nform.append(\"name\", \"Alice\")\nform.append(\"file\", Data.fromFile(\"/path/to/file.txt\"), \"text/plain\", \"file.txt\")\n\nform.forEach((value, name) => {\n  console.log(`${name}:`, value instanceof Data ? \"Binary Data\" : value)\n})\n```\n\n***\n\n## Relationships with Other Classes\n\n| Class          | Description                                                                                       |\n| -------------- | ------------------------------------------------------------------------------------------------- |\n| **`fetch()`**  | Accepts `FormData` as a request body; automatically sets `Content-Type` to `multipart/form-data`. |\n| **`Data`**     | Used to represent binary content (e.g., files, images) added to form fields.                      |\n| **`Request`**  | A `FormData` instance can be passed to `RequestInit.body`.                                        |\n| **`Response`** | You can use `response.formData()` to parse a multipart response into a `FormData` object.         |\n\n***\n\n## Notes\n\n- **Automatic Content-Type:** When you pass a `FormData` instance to `fetch()`, the app automatically sets the correct `Content-Type` header (with a boundary). Do not manually set it.\n- **Multiple Fields:** Use `append()` to add multiple values with the same name.\n- **Binary Uploads:** Always provide a MIME type for binary uploads. Otherwise, the data defaults to `application/octet-stream`.\n- **JSON Conversion:** The `toJson()` method is intended for debugging and should not be used for actual data transmission.\n\n***\n\n## Summary\n\n`FormData` is the **core class for building multipart/form-data requests** in the Scripting app.\nIt provides a flexible and developer-friendly API for combining text and binary fields, integrating seamlessly with `fetch()` and `Data`.\n\n### Key Features\n\n- Fully compatible with the Fetch API\n- Supports text and file uploads\n- Automatically handles multipart boundaries\n- Useful debugging utilities (`entries()`, `toJson()`)\n- Integrates natively with `Data`, `Request`, and `Response`\n","routePath":"/doc/Utilities/Request/FormData","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":414},{"id":"purpose","text":"Purpose","depth":2,"charIndex":976},{"id":"methods","text":"Methods","depth":2,"charIndex":1205},{"id":"appendname-string-value-string-void","text":"`append(name: string, value: string): void`","depth":3,"charIndex":1217},{"id":"appendname-string-value-data-mimetype-string-filename-string-void","text":"`append(name: string, value: Data, mimeType: string, filename?: string): void`","depth":3,"charIndex":1266},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1430},{"id":"example","text":"Example","depth":4,"charIndex":2570},{"id":"setname-string-value-string-void","text":"`set(name: string, value: string): void`","depth":3,"charIndex":2744},{"id":"setname-string-value-data-filename-string-void","text":"`set(name: string, value: Data, filename?: string): void`","depth":3,"charIndex":2790},{"id":"example-1","text":"Example","depth":4,"charIndex":2974},{"id":"getname-string-string--data--null","text":"`get(name: string): string | Data | null`","depth":3,"charIndex":3147},{"id":"example-2","text":"Example","depth":4,"charIndex":3276},{"id":"getallname-string-any","text":"`getAll(name: string): any[]`","depth":3,"charIndex":3411},{"id":"example-3","text":"Example","depth":4,"charIndex":3567},{"id":"hasname-string-boolean","text":"`has(name: string): boolean`","depth":3,"charIndex":3778},{"id":"example-4","text":"Example","depth":4,"charIndex":3849},{"id":"deletename-string-void","text":"`delete(name: string): void`","depth":3,"charIndex":4025},{"id":"example-5","text":"Example","depth":4,"charIndex":4111},{"id":"foreachcallback-value-any-name-string-parent-formdata--void-void","text":"`forEach(callback: (value: any, name: string, parent: FormData) => void): void`","depth":3,"charIndex":4291},{"id":"example-6","text":"Example","depth":4,"charIndex":4455},{"id":"entries-string-any","text":"`entries(): [string, any][]`","depth":3,"charIndex":4637},{"id":"example-7","text":"Example","depth":4,"charIndex":4735},{"id":"tojson-recordstring-any","text":"`toJson(): Record<string, any>`","depth":3,"charIndex":4918},{"id":"example-8","text":"Example","depth":4,"charIndex":5170},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":5417},{"id":"example-1--upload-a-file","text":"Example 1 — Upload a File","depth":3,"charIndex":5436},{"id":"example-2--upload-multiple-files","text":"Example 2 — Upload Multiple Files","depth":3,"charIndex":5763},{"id":"example-3--mixed-text-and-file-fields","text":"Example 3 — Mixed Text and File Fields","depth":3,"charIndex":6111},{"id":"example-4--iterating-and-debugging","text":"Example 4 — Iterating and Debugging","depth":3,"charIndex":6522},{"id":"relationships-with-other-classes","text":"Relationships with Other Classes","depth":2,"charIndex":6828},{"id":"notes","text":"Notes","depth":2,"charIndex":7585},{"id":"summary","text":"Summary","depth":2,"charIndex":8119},{"id":"key-features","text":"Key Features","depth":3,"charIndex":8367}],"frontmatter":{},"version":"","description":"The FormData class provides a way to construct key/value pairs representing form fields and their values.\nIt is mainly used for building multipart/form-data requests that can include both text and binary data (such as files or images). In the Scripting app, FormData is fully compatible with the standard Fetch API, allowing you to send data through fetch() with mixed text and file fields."},{"title":"Headers","content":"The `Headers` class represents a collection of HTTP request or response header fields.\nIt is fully compatible with the **Fetch API** standard but includes additional convenience methods for scripting environments, such as JSON conversion for debugging and serialization.\n\nA `Headers` object can be used in the following contexts:\n\n- When creating a request via `RequestInit.headers`\n- When reading headers from a `Response` object\n- When programmatically modifying header data in a script\n\n***\n\n## Definition\n\n```ts\nclass Headers {\n  constructor(init?: HeadersInit)\n  append(name: string, value: string): void\n  get(name: string): string | null\n  has(name: string): boolean\n  set(name: string, value: string): void\n  delete(name: string): void\n  forEach(callback: (value: string, name: string) => void): void\n  keys(): string[]\n  values(): string[]\n  entries(): [string, string][]\n  toJson(): Record<string, string>\n}\n```\n\n***\n\n## HeadersInit Type\n\n`Headers` can be initialized using multiple formats:\n\n```ts\ntype HeadersInit = [string, string][] | Record<string, string> | Headers\n```\n\nYou can create a `Headers` object using any of these forms:\n\n```tsx\nnew Headers([[\"Content-Type\", \"application/json\"]])\nnew Headers({ \"Authorization\": \"Bearer token\" })\nnew Headers(existingHeaders)\n```\n\n***\n\n## Constructor\n\n### `new Headers(init?: HeadersInit)`\n\nCreates a new `Headers` instance.\nYou can optionally pass initial header data.\n\n#### Parameters\n\n| Parameter | Type          | Description                                                                  |\n| --------- | ------------- | ---------------------------------------------------------------------------- |\n| **init**  | `HeadersInit` | Initial header data. Can be an object, array, or another `Headers` instance. |\n\n***\n\n## Methods\n\n### `append(name: string, value: string): void`\n\nAdds a new value to an existing header field.\nIf the field already exists, the new value is **appended** instead of replacing the old one.\n\n#### Example\n\n```tsx\nconst headers = new Headers()\nheaders.append(\"Accept\", \"application/json\")\nheaders.append(\"Accept\", \"text/plain\") // Now \"Accept\" has two values\n```\n\n***\n\n### `set(name: string, value: string): void`\n\nSets a header field to a specific value.\nIf the field already exists, it will be **overwritten**.\n\n#### Example\n\n```tsx\nconst headers = new Headers()\nheaders.set(\"Content-Type\", \"application/json\")\nheaders.set(\"Authorization\", \"Bearer token-123\")\n```\n\n***\n\n### `get(name: string): string | null`\n\nRetrieves the value of a specific header field.\nReturns `null` if the field does not exist.\n\n#### Example\n\n```tsx\nconst headers = new Headers({ \"Content-Type\": \"application/json\" })\nconsole.log(headers.get(\"Content-Type\")) // \"application/json\"\n```\n\n***\n\n### `has(name: string): boolean`\n\nChecks whether a specific header field exists.\n\n#### Example\n\n```tsx\nconst headers = new Headers({ \"Accept\": \"application/json\" })\nconsole.log(headers.has(\"Accept\")) // true\nconsole.log(headers.has(\"Authorization\")) // false\n```\n\n***\n\n### `delete(name: string): void`\n\nRemoves a specific header field.\n\n#### Example\n\n```tsx\nconst headers = new Headers({\n  \"Accept\": \"application/json\",\n  \"Cache-Control\": \"no-cache\"\n})\nheaders.delete(\"Cache-Control\")\n```\n\n***\n\n### `forEach(callback: (value: string, name: string) => void): void`\n\nIterates over all header fields and executes the callback for each pair.\n\n#### Example\n\n```tsx\nconst headers = new Headers({\n  \"Accept\": \"application/json\",\n  \"User-Agent\": \"ScriptingApp/1.0\"\n})\n\nheaders.forEach((value, name) => {\n  console.log(`${name}: ${value}`)\n})\n```\n\n***\n\n### `keys(): string[]`\n\nReturns an array containing all header names.\n\n```tsx\nconst headers = new Headers({\n  \"Accept\": \"application/json\",\n  \"User-Agent\": \"Scripting\"\n})\nconsole.log(headers.keys()) // [\"accept\", \"user-agent\"]\n```\n\n> Note: Header names are **case-insensitive** and normalized to lowercase.\n\n***\n\n### `values(): string[]`\n\nReturns an array containing all header values.\n\n```tsx\nconst headers = new Headers({\n  \"Accept\": \"application/json\",\n  \"User-Agent\": \"Scripting\"\n})\nconsole.log(headers.values()) // [\"application/json\", \"Scripting\"]\n```\n\n***\n\n### `entries(): [string, string][]`\n\nReturns an array of `[name, value]` pairs representing all headers.\n\n#### Example\n\n```tsx\nconst headers = new Headers({\n  \"Accept\": \"application/json\",\n  \"Cache-Control\": \"no-cache\"\n})\nconsole.log(headers.entries())\n// [[\"accept\", \"application/json\"], [\"cache-control\", \"no-cache\"]]\n```\n\n***\n\n### `toJson(): Record<string, string>`\n\nConverts the header collection into a plain JSON object for easy serialization and debugging.\n\n#### Example\n\n```tsx\nconst headers = new Headers({\n  \"Content-Type\": \"application/json\",\n  \"Authorization\": \"Bearer token\"\n})\n\nconsole.log(headers.toJson())\n// { \"content-type\": \"application/json\", \"authorization\": \"Bearer token\" }\n```\n\n***\n\n## Usage Examples\n\n### Example 1 — Setting Custom Headers in a Request\n\n```tsx\nconst headers = new Headers()\nheaders.set(\"Content-Type\", \"application/json\")\nheaders.set(\"Authorization\", \"Bearer token-xyz\")\n\nconst response = await fetch(\"https://api.example.com/user\", {\n  method: \"POST\",\n  headers,\n  body: JSON.stringify({ name: \"Tom\" }),\n})\n```\n\n***\n\n### Example 2 — Reading Response Headers\n\n```tsx\nconst response = await fetch(\"https://example.com/data\")\nconsole.log(\"Content-Type:\", response.headers.get(\"Content-Type\"))\nconsole.log(\"Server:\", response.headers.get(\"Server\"))\n```\n\n***\n\n### Example 3 — Converting to JSON for Logging\n\n```tsx\nconst response = await fetch(\"https://example.com/api\")\nconsole.log(\"Response Headers:\", response.headers.toJson())\n```\n\n***\n\n### Example 4 — Checking for Specific Headers\n\n```tsx\nconst response = await fetch(\"https://example.com/info\")\nif (response.headers.has(\"Set-Cookie\")) {\n  console.log(\"The response contains a Set-Cookie header\")\n}\n```\n\n***\n\n## Relationships with Other Classes\n\n| Class          | Description                                                                              |\n| -------------- | ---------------------------------------------------------------------------------------- |\n| **`Request`**  | Headers can be defined in `RequestInit.headers` when creating requests.                  |\n| **`Response`** | Access response headers via `response.headers`.                                          |\n| **`fetch()`**  | Both requests and responses use `Headers` to manage header data.                         |\n| **`Cookie`**   | Cookies returned in headers can be parsed into structured objects in `response.cookies`. |\n\n***\n\n## Notes\n\n- **Case-insensitivity:** Header names are case-insensitive and stored in lowercase form.\n- **Multi-value headers:** Use `append()` to add multiple values for the same header (e.g., for `Accept` or `Cookie`).\n- **System headers:** Certain system-managed headers (e.g., `Host`, `Connection`) may be ignored or overwritten by the iOS networking stack.\n- **Serialization:** The `toJson()` method is useful for logging, debugging, or serializing header data.\n\n***\n\n## Summary\n\nThe `Headers` class is a foundational component of the **Scripting networking system**, providing a consistent and convenient interface for managing HTTP headers.\n\nIt enables developers to:\n\n- Add, modify, and remove headers dynamically\n- Read and iterate through response headers\n- Work with both request and response headers in a unified way\n- Output structured header data for logging and debugging\n","routePath":"/doc/Utilities/Request/Headers","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":495},{"id":"headersinit-type","text":"HeadersInit Type","depth":2,"charIndex":928},{"id":"constructor","text":"Constructor","depth":2,"charIndex":1295},{"id":"new-headersinit-headersinit","text":"`new Headers(init?: HeadersInit)`","depth":3,"charIndex":1311},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1430},{"id":"methods","text":"Methods","depth":2,"charIndex":1780},{"id":"appendname-string-value-string-void","text":"`append(name: string, value: string): void`","depth":3,"charIndex":1792},{"id":"example","text":"Example","depth":4,"charIndex":1981},{"id":"setname-string-value-string-void","text":"`set(name: string, value: string): void`","depth":3,"charIndex":2157},{"id":"example-1","text":"Example","depth":4,"charIndex":2302},{"id":"getname-string-string--null","text":"`get(name: string): string | null`","depth":3,"charIndex":2460},{"id":"example-2","text":"Example","depth":4,"charIndex":2593},{"id":"hasname-string-boolean","text":"`has(name: string): boolean`","depth":3,"charIndex":2755},{"id":"example-3","text":"Example","depth":4,"charIndex":2837},{"id":"deletename-string-void","text":"`delete(name: string): void`","depth":3,"charIndex":3024},{"id":"example-4","text":"Example","depth":4,"charIndex":3092},{"id":"foreachcallback-value-string-name-string--void-void","text":"`forEach(callback: (value: string, name: string) => void): void`","depth":3,"charIndex":3250},{"id":"example-5","text":"Example","depth":4,"charIndex":3394},{"id":"keys-string","text":"`keys(): string[]`","depth":3,"charIndex":3599},{"id":"values-string","text":"`values(): string[]`","depth":3,"charIndex":3912},{"id":"entries-string-string","text":"`entries(): [string, string][]`","depth":3,"charIndex":4163},{"id":"example-6","text":"Example","depth":4,"charIndex":4269},{"id":"tojson-recordstring-string","text":"`toJson(): Record<string, string>`","depth":3,"charIndex":4493},{"id":"example-7","text":"Example","depth":4,"charIndex":4628},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":4870},{"id":"example-1--setting-custom-headers-in-a-request","text":"Example 1 — Setting Custom Headers in a Request","depth":3,"charIndex":4889},{"id":"example-2--reading-response-headers","text":"Example 2 — Reading Response Headers","depth":3,"charIndex":5223},{"id":"example-3--converting-to-json-for-logging","text":"Example 3 — Converting to JSON for Logging","depth":3,"charIndex":5461},{"id":"example-4--checking-for-specific-headers","text":"Example 4 — Checking for Specific Headers","depth":3,"charIndex":5642},{"id":"relationships-with-other-classes","text":"Relationships with Other Classes","depth":2,"charIndex":5866},{"id":"notes","text":"Notes","depth":2,"charIndex":6569},{"id":"summary","text":"Summary","depth":2,"charIndex":7040}],"frontmatter":{},"version":"","description":"The Headers class represents a collection of HTTP request or response header fields.\nIt is fully compatible with the Fetch API standard but includes additional convenience methods for scripting environments, such as JSON conversion for debugging and serialization. A Headers object can be used in the following contexts: When creating a request via RequestInit.headersWhen reading headers from a Response objectWhen programmatically modifying header data in a script"},{"title":"ReadableStream","content":"`ReadableStream` represents a **stream of data** that can be read incrementally rather than all at once.\nIn **Scripting**, `ReadableStream<Data>` is used in various scenarios, including:\n\n- Handling **streaming HTTP responses** (e.g., `Response.body`)\n- **Chunked file downloads** or large data transfers\n- **Real-time data streams** such as logs, AI model output, or event streams\n\nIt follows the same behavior as the standard **Web Streams API**, allowing asynchronous iteration (`for await...of`) and manual reading via a `ReadableStreamDefaultReader`.\n\n***\n\n## Definition\n\n```ts\nclass ReadableStream<T = any> {\n  constructor(underlyingSource?: UnderlyingSource<T>)\n\n  get locked(): boolean\n  cancel(reason?: any): Promise<void>\n  getReader(): ReadableStreamDefaultReader<T>\n  tee(): [ReadableStream<T>, ReadableStream<T>]\n}\n```\n\n***\n\n## Overview\n\n- A `ReadableStream` represents a **data source that can be consumed asynchronously**.\n- Instead of loading the entire payload into memory, data is read **in chunks** as it becomes available.\n- Only one active reader can consume a stream at a time. When locked (`locked = true`), no other consumer can access it until released or canceled.\n\n***\n\n## Properties\n\n### `locked: boolean`\n\nIndicates whether the stream is currently locked to a reader.\nIf `true`, you must release the lock or cancel the stream before another reader can be created.\n\n#### Example\n\n```tsx\nconst reader = response.body.getReader()\nconsole.log(response.body.locked) // true\n```\n\n***\n\n## Methods\n\n### `getReader(): ReadableStreamDefaultReader<T>`\n\nReturns a `ReadableStreamDefaultReader` that allows manual, incremental reading of stream data.\nEach call to `reader.read()` returns a Promise resolving to an object `{ value, done }`.\n\n#### Example\n\n```tsx\nconst reader = response.body.getReader()\n\nwhile (true) {\n  const { done, value } = await reader.read()\n  if (done) break\n  console.log(\"Received chunk:\", value)\n}\n```\n\n***\n\n### `cancel(reason?: any): Promise<void>`\n\nCancels reading from the stream.\nOptionally provide a `reason` describing why the operation was aborted.\n\n#### Example\n\n```tsx\nconst reader = response.body.getReader()\nawait response.body.cancel(\"User canceled reading\")\n```\n\n***\n\n### `tee(): [ReadableStream<T>, ReadableStream<T>]`\n\nSplits a stream into two identical branches that can be consumed independently.\n\n#### Example\n\n```tsx\nconst [stream1, stream2] = response.body.tee()\n\nconst reader1 = stream1.getReader()\nconst reader2 = stream2.getReader()\n```\n\n***\n\n## ReadableStreamDefaultReader\n\nWhen you obtain a reader using `getReader()`, you can manually control the reading process.\n\n### Definition\n\n```ts\ninterface ReadableStreamDefaultReader<T> {\n  read(): Promise<{ value: T; done: boolean }>\n  releaseLock(): void\n  cancel(reason?: any): Promise<void>\n}\n```\n\n#### Method Descriptions\n\n| Method              | Description                                                                                           |\n| ------------------- | ----------------------------------------------------------------------------------------------------- |\n| **read()**          | Reads the next data chunk. Resolves with `{ value, done }`. When `done = true`, the stream has ended. |\n| **releaseLock()**   | Releases the lock so the stream can be read again by another consumer.                                |\n| **cancel(reason?)** | Cancels reading from the stream.                                                                      |\n\n#### Example — Reading Stream Data\n\n```tsx\nconst reader = response.body.getReader()\n\nwhile (true) {\n  const { done, value } = await reader.read()\n  if (done) break\n\n  // Each chunk is a Data instance\n  const text = value.toRawString()\n  console.log(\"Chunk:\", text)\n}\n\nreader.releaseLock()\n```\n\n***\n\n## Integration with Response\n\nThe `Response.body` property is a `ReadableStream<Data>` that allows streaming response content.\n\n#### Example — Handling Streaming Network Response\n\n```tsx\nconst response = await fetch(\"https://example.com/stream\")\n\nconst reader = response.body.getReader()\nwhile (true) {\n  const { done, value } = await reader.read()\n  if (done) break\n  console.log(\"Received:\", value.toRawString())\n}\n```\n\nThis method enables real-time data processing **before the full response is received**, ideal for:\n\n- Real-time log streaming\n- Progressive file downloads\n- AI or LLM text generation (token streaming)\n\n***\n\n## Integration with Data\n\nIn Scripting, each stream chunk (`value`) is a `Data` object.\nYou can use the `Data` APIs such as `.toRawString()` or `.toUint8Array()` to inspect or transform the content.\n\n#### Example — Save Stream Data to a File\n\n```tsx\nconst reader = response.body.getReader()\nconst chunks: Data[] = []\n\nwhile (true) {\n  const { done, value } = await reader.read()\n  if (done) break\n  chunks.push(value)\n}\n\nconst fileData = Data.combine(chunks)\nFileManager.write(fileData, \"/local/download.bin\")\n```\n\n***\n\n## Using Async Iteration\n\n`ReadableStream` supports async iteration (`for await...of`), simplifying data consumption syntax:\n\n```tsx\nfor await (const chunk of response.body) {\n  console.log(\"Chunk size:\", chunk.size)\n}\n```\n\nThis approach automatically handles the `done` condition for you, resulting in cleaner code.\n\n***\n\n## Common Use Cases\n\n| Use Case                         | Example                                                                         |\n| -------------------------------- | ------------------------------------------------------------------------------- |\n| **Large File Download**          | Stream file chunks from the network and save locally without high memory usage. |\n| **AI Output Streaming**          | Display real-time model output as it’s generated.                               |\n| **Incremental Local Processing** | Process local files or streams incrementally.                                   |\n\n***\n\n## Notes\n\n- **Single-reader rule:** Only one reader can consume a `ReadableStream` at a time.\n- **Memory efficiency:** Streaming avoids loading large payloads entirely into memory.\n- **Error handling:** Reading may reject on errors (e.g., network failure). Use `try...catch` to handle exceptions safely.\n- **Chunk type:** For `Response.body`, each chunk is a `Data` object — not plain text or byte arrays.\n\n***\n\n## Summary\n\n`ReadableStream` is a **core component of Scripting’s streaming data architecture**, providing efficient and flexible data handling capabilities.\n\n### Key Features\n\n- Asynchronous, incremental data reading\n- Seamless integration with `fetch()`, `Response`, and `Data`\n- Supports real-time processing and large data transfers\n- Fully compatible with the standard **Web Streams API**\n","routePath":"/doc/Utilities/Request/ReadableStream","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":562},{"id":"overview","text":"Overview","depth":2,"charIndex":838},{"id":"properties","text":"Properties","depth":2,"charIndex":1197},{"id":"locked-boolean","text":"`locked: boolean`","depth":3,"charIndex":1212},{"id":"example","text":"Example","depth":4,"charIndex":1394},{"id":"methods","text":"Methods","depth":2,"charIndex":1508},{"id":"getreader-readablestreamdefaultreadert","text":"`getReader(): ReadableStreamDefaultReader<T>`","depth":3,"charIndex":1520},{"id":"example-1","text":"Example","depth":4,"charIndex":1757},{"id":"cancelreason-any-promisevoid","text":"`cancel(reason?: any): Promise<void>`","depth":3,"charIndex":1951},{"id":"example-2","text":"Example","depth":4,"charIndex":2100},{"id":"tee-readablestreamt-readablestreamt","text":"`tee(): [ReadableStream<T>, ReadableStream<T>]`","depth":3,"charIndex":2224},{"id":"example-3","text":"Example","depth":4,"charIndex":2358},{"id":"readablestreamdefaultreader","text":"ReadableStreamDefaultReader","depth":2,"charIndex":2509},{"id":"definition-1","text":"Definition","depth":3,"charIndex":-1},{"id":"method-descriptions","text":"Method Descriptions","depth":4,"charIndex":2813},{"id":"example--reading-stream-data","text":"Example — Reading Stream Data","depth":4,"charIndex":3480},{"id":"integration-with-response","text":"Integration with Response","depth":2,"charIndex":3779},{"id":"example--handling-streaming-network-response","text":"Example — Handling Streaming Network Response","depth":4,"charIndex":3907},{"id":"integration-with-data","text":"Integration with Data","depth":2,"charIndex":4408},{"id":"example--save-stream-data-to-a-file","text":"Example — Save Stream Data to a File","depth":4,"charIndex":4608},{"id":"using-async-iteration","text":"Using Async Iteration","depth":2,"charIndex":4928},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":5251},{"id":"notes","text":"Notes","depth":2,"charIndex":5873},{"id":"summary","text":"Summary","depth":2,"charIndex":6285},{"id":"key-features","text":"Key Features","depth":3,"charIndex":6444}],"frontmatter":{},"version":"","description":"ReadableStream represents a stream of data that can be read incrementally rather than all at once.\nIn Scripting, ReadableStream<Data> is used in various scenarios, including: Handling streaming HTTP responses (e.g., Response.body)Chunked file downloads or large data transfersReal-time data streams such as logs, AI model output, or event streams It follows the same behavior as the standard Web Streams API, allowing asynchronous iteration (for await...of) and manual reading via a ReadableStreamDefaultReader."},{"title":"Request & RequestInit","content":"The `Request` class represents a complete configuration of an HTTP request.\nIt can be passed directly to the `fetch()` method or used to clone, modify, or retry an existing request.\n\nIn Scripting, the `Request` API behaves similarly to the browser’s Fetch API but adds native extensions, including:\n\n- Binary `Data` type support for request bodies\n- Custom redirect handling\n- Request timeout and cancellation\n- Optional allowance for insecure (HTTP) requests\n- Debug labels for internal logging\n\n***\n\n## Definition\n\n```ts\nclass Request {\n  url: string\n  method: string\n  headers: Headers\n  body?: Data | FormData | string | ArrayBuffer\n  allowInsecureRequest?: boolean\n  handleRedirect?: (newRequest: RedirectRequest) => Promise<RedirectRequest | null>\n  shouldAllowRedirect?: (newRequest: Request) => Promise<boolean> // deprecated\n  timeout?: DurationInSeconds\n  signal?: AbortSignal\n  cancelToken?: CancelToken // deprecated\n  debugLabel?: string\n\n  constructor(input: string | Request, init?: RequestInit)\n  clone(): Request\n}\n```\n\n***\n\n## Constructor\n\n### `new Request(input: string | Request, init?: RequestInit)`\n\nCreates a new `Request` instance from either a URL string or an existing `Request` object.\n\n#### Parameters\n\n| Parameter | Type          | Description                                                          |                                                  |\n| --------- | ------------- | -------------------------------------------------------------------- | ------------------------------------------------ |\n| **input** | `string`      | `Request`                                                            | The target URL, or an existing request to clone. |\n| **init**  | `RequestInit` | Optional configuration object defining request settings (see below). |                                                  |\n\n***\n\n## Properties\n\n| Property                 | Type                                                                | Description                                                                   |\n| ------------------------ | ------------------------------------------------------------------- | ----------------------------------------------------------------------------- |\n| **url**                  | `string`                                                            | The full URL of the request.                                                  |\n| **method**               | `string`                                                            | The HTTP method (default is `\"GET\"`).                                         |\n| **headers**              | `Headers`                                                           | A headers object representing the request headers.                            |\n| **body**                 | `Data` \\| `FormData` \\| `string` \\| `ArrayBuffer` \\| `undefined`    | The request body, used only for non-`GET` and non-`HEAD` requests.            |\n| **allowInsecureRequest** | `boolean`                                                           | Whether to allow plain HTTP requests (default `false`).                       |\n| **handleRedirect**       | `(newRequest: RedirectRequest) => Promise<RedirectRequest \\| null>` | Custom redirect handler. Return `null` to cancel the redirect.                |\n| **shouldAllowRedirect**  | `(newRequest: Request) => Promise<boolean>`                         | Deprecated legacy redirect handler.                                           |\n| **timeout**              | `number`                                                            | Timeout in seconds. The request will automatically abort after this duration. |\n| **signal**               | `AbortSignal`                                                       | Abort signal from an `AbortController`, allowing manual cancellation.         |\n| **cancelToken**          | `CancelToken`                                                       | Deprecated. Older cancellation mechanism; prefer `signal`.                    |\n| **debugLabel**           | `string`                                                            | Optional label displayed in logs for debugging and tracking requests.         |\n\n***\n\n## Methods\n\n### `clone(): Request`\n\nCreates and returns a copy of the current request.\nThe cloned object can be safely modified (e.g., updating headers or timeout) without affecting the original request.\n\n#### Example\n\n```tsx\nconst req1 = new Request(\"https://api.example.com/user\", {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/json\" },\n  body: JSON.stringify({ name: \"Alice\" }),\n})\n\nconst req2 = req1.clone()\nconsole.log(req2.method) // \"POST\"\n```\n\n***\n\n## Examples\n\n### Example 1 — Creating a Simple Request\n\n```tsx\nconst request = new Request(\"https://api.example.com/data\", {\n  method: \"GET\",\n  headers: {\n    \"Accept\": \"application/json\",\n  },\n  debugLabel: \"Fetch User Data\",\n})\n\nconst response = await fetch(request)\nconst result = await response.json()\nconsole.log(result)\n```\n\n***\n\n### Example 2 — POST Request with a Body\n\n```tsx\nconst request = new Request(\"https://api.example.com/upload\", {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/json\" },\n  body: JSON.stringify({ fileId: \"abc123\" }),\n  timeout: 15,\n})\n\nconst response = await fetch(request)\nconsole.log(await response.text())\n```\n\n***\n\n### Example 3 — Cloning and Modifying a Request\n\n```tsx\nconst base = new Request(\"https://api.example.com/posts\", {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/json\" },\n})\n\nconst cloned = base.clone()\ncloned.headers.set(\"Authorization\", \"Bearer token-123\")\ncloned.debugLabel = \"Authorized Upload\"\n\nawait fetch(cloned)\n```\n\n***\n\n# RequestInit Interface\n\nThe `RequestInit` interface defines configuration options for HTTP requests.\nIt is used as the second argument to `fetch()` or the optional configuration object when creating a new `Request`.\nScripting extends this interface with additional native fields.\n\n***\n\n## Definition\n\n```ts\ntype RequestInit = {\n  method?: string\n  headers?: HeadersInit\n  body?: Data | FormData | string | ArrayBuffer\n  allowInsecureRequest?: boolean\n  handleRedirect?: (newRequest: RedirectRequest) => Promise<RedirectRequest | null>\n  shouldAllowRedirect?: (newRequest: Request) => Promise<boolean> // deprecated\n  timeout?: DurationInSeconds\n  signal?: AbortSignal\n  cancelToken?: CancelToken // deprecated\n  debugLabel?: string\n}\n```\n\n***\n\n## Field Descriptions\n\n| Field                    | Type                                                                | Description                                                                                                            |   |\n| ------------------------ | ------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------- | - |\n| **method**               | `string`                                                            | The HTTP method such as `\"GET\"`, `\"POST\"`, `\"PUT\"`, `\"DELETE\"`. Default: `\"GET\"`.                                      |   |\n| **headers**              | `HeadersInit`                                                       | Request headers, which can be a `Headers` object, key-value object `{ key: value }`, or array of `[key, value]` pairs. |   |\n| **body**                 | `Data` \\| `FormData` \\| `string` \\| `ArrayBuffer`                   | The request body. Ignored for `GET` and `HEAD` requests.                                                               |   |\n| **allowInsecureRequest** | `boolean`                                                           | Allows HTTP requests (insecure). Default: `false`.                                                                     |   |\n| **handleRedirect**       | `(newRequest: RedirectRequest) => Promise<RedirectRequest \\| null>` | Custom redirect handler. Return `null` to block redirection.                                                           |   |\n| **shouldAllowRedirect**  | `(newRequest: Request) => Promise<boolean>`                         | Deprecated. Older redirect callback.                                                                                   |   |\n| **timeout**              | `number`                                                            | Request timeout in seconds. Triggers `AbortError` if exceeded.                                                         |   |\n| **signal**               | `AbortSignal`                                                       | Used to abort requests manually through an `AbortController`.                                                          |   |\n| **cancelToken**          | `CancelToken`                                                       | Deprecated cancellation mechanism. Use `signal` instead.                                                               |   |\n| **debugLabel**           | `string`                                                            | A label displayed in the debug log for identifying requests.                                                           |   |\n\n***\n\n## Relationship with `fetch()`\n\n`RequestInit` is typically passed as the second parameter to `fetch()` to configure a network request.\n\n```tsx\nconst response = await fetch(\"https://example.com/data\", {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/json\" },\n  body: JSON.stringify({ id: 123 }),\n  timeout: 10,\n  debugLabel: \"Upload JSON\",\n})\n```\n\n***\n\n## Relationships with Other Classes\n\n| Class                                 | Description                                                                            |\n| ------------------------------------- | -------------------------------------------------------------------------------------- |\n| **`Headers`**                         | Manages request headers, used with the `headers` field.                                |\n| **`Data`**                            | Represents binary data. Can be used as the request body for file uploads or raw bytes. |\n| **`FormData`**                        | Builds `multipart/form-data` bodies for form or file submissions.                      |\n| **`AbortController` / `AbortSignal`** | Enables manual request cancellation.                                                   |\n| **`CancelToken`**                     | Deprecated cancellation mechanism retained for backward compatibility.                 |\n| **`RedirectRequest`**                 | Represents the redirected request passed to `handleRedirect`.                          |\n\n***\n\n## Examples\n\n### Example 1 — Custom Redirect Handling\n\n```tsx\nconst response = await fetch(\"https://example.com/start\", {\n  handleRedirect: async (newRequest) => {\n    console.log(\"Redirect detected:\", newRequest.url)\n    if (newRequest.url.includes(\"blocked\")) return null\n    return newRequest\n  },\n})\n```\n\n***\n\n### Example 2 — Allowing Insecure Requests\n\n```tsx\nconst response = await fetch(\"http://insecure.example.com/data\", {\n  allowInsecureRequest: true,\n})\nconsole.log(await response.text())\n```\n\n***\n\n### Example 3 — Using a Debug Label\n\n```tsx\nawait fetch(\"https://example.com/api/ping\", {\n  debugLabel: \"Ping Request\",\n})\n// The log panel will display the label \"Ping Request\"\n```\n\n***\n\n## RedirectRequest Interface\n\nWhen a request encounters an **HTTP redirect**, and a `handleRedirect` callback is defined in the `Request` or `RequestInit` object, the system will invoke that callback before following the redirect.\nThe callback receives a `RedirectRequest` object, which describes the full details of the redirect request.\nYou can inspect or modify this object to control whether and how the redirect should proceed.\n\n***\n\n### Interface Definition\n\n```ts\ninterface RedirectRequest {\n  method: string\n  url: string\n  headers: Record<string, string>\n  cookies: Cookie[]\n  body?: Data\n  timeout?: number\n}\n```\n\n***\n\n### Field Descriptions\n\n| Field       | Type                     | Description                                                                                    |\n| ----------- | ------------------------ | ---------------------------------------------------------------------------------------------- |\n| **method**  | `string`                 | The HTTP method for the redirected request (e.g., `\"GET\"`, `\"POST\"`).                          |\n| **url**     | `string`                 | The full target URL of the redirect.                                                           |\n| **headers** | `Record<string, string>` | The HTTP headers to be sent with the redirect request. You can modify these before proceeding. |\n| **cookies** | `Cookie[]`               | The list of cookies available for the redirected request (same format as `Response.cookies`).  |\n| **body**    | `Data` *(optional)*      | The body of the redirect request, if applicable (e.g., for non-GET methods).                   |\n| **timeout** | `number` *(optional)*    | The request timeout in seconds.                                                                |\n\n***\n\n### Use Cases\n\nThe `handleRedirect` callback allows you to:\n\n- Inspect and validate redirect destinations for security or logic reasons.\n- Modify redirect requests (add headers, update method, or include authorization tokens).\n- Block unwanted or unsafe redirects.\n\nWhen the callback returns:\n\n- A modified `RedirectRequest` → The redirect proceeds using your modified configuration.\n- `null` → The redirect is **canceled**, and the `fetch()` call resolves with the current response.\n\n***\n\n### Example: Intercepting and Controlling Redirects\n\n```tsx\nconst response = await fetch(\"https://example.com/start\", {\n  handleRedirect: async (redirect) => {\n    console.log(\"Redirecting to:\", redirect.url)\n\n    // Block redirects to external domains\n    if (!redirect.url.startsWith(\"https://example.com\")) {\n      console.warn(\"Blocked external redirect:\", redirect.url)\n      return null\n    }\n\n    // Add authorization header to redirected request\n    redirect.headers[\"Authorization\"] = \"Bearer my-token\"\n    return redirect\n  },\n})\n```\n\n***\n\n### Example: Modifying Redirect Method and Body\n\n```tsx\nconst response = await fetch(\"https://api.example.com/login\", {\n  handleRedirect: async (redirect) => {\n    // Keep the request body when redirecting to a confirmation endpoint\n    if (redirect.url.includes(\"/finalize\")) {\n      redirect.method = \"POST\"\n      redirect.body = Data.fromRawString(\"action=confirm\", \"utf-8\")\n    }\n    return redirect\n  },\n})\n```\n\n***\n\n### Notes\n\n- If `handleRedirect` is **not defined**, all redirects are automatically followed by default.\n- Returning `null` from the callback prevents further redirection.\n- Cookies are **not automatically forwarded**; you can manually inspect and decide whether to reuse cookies from `redirect.cookies`.\n- Any modifications made to the `RedirectRequest` (such as headers or method) will be applied before the next request is executed.\n\n***\n\n## Summary\n\n`Request` and `RequestInit` form the **foundation of Scripting’s networking system**:\n\n- `Request` encapsulates a complete HTTP request and can be reused or cloned.\n- `RequestInit` defines configuration options for flexible initialization.\n- Together, they integrate tightly with `fetch()`, `Response`, `Headers`, `Data`, and `FormData`.\n","routePath":"/doc/Utilities/Request/Request & RequestInit","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":502},{"id":"constructor","text":"Constructor","depth":2,"charIndex":1042},{"id":"new-requestinput-string--request-init-requestinit","text":"`new Request(input: string | Request, init?: RequestInit)`","depth":3,"charIndex":1058},{"id":"parameters","text":"Parameters","depth":4,"charIndex":1214},{"id":"properties","text":"Properties","depth":2,"charIndex":1845},{"id":"methods","text":"Methods","depth":2,"charIndex":4193},{"id":"clone-request","text":"`clone(): Request`","depth":3,"charIndex":4205},{"id":"example","text":"Example","depth":4,"charIndex":4398},{"id":"examples","text":"Examples","depth":2,"charIndex":4665},{"id":"example-1--creating-a-simple-request","text":"Example 1 — Creating a Simple Request","depth":3,"charIndex":4678},{"id":"example-2--post-request-with-a-body","text":"Example 2 — POST Request with a Body","depth":3,"charIndex":5001},{"id":"example-3--cloning-and-modifying-a-request","text":"Example 3 — Cloning and Modifying a Request","depth":3,"charIndex":5331},{"id":"definition-1","text":"Definition","depth":2,"charIndex":5962},{"id":"field-descriptions","text":"Field Descriptions","depth":2,"charIndex":6420},{"id":"relationship-with-fetch","text":"Relationship with `fetch()`","depth":2,"charIndex":9137},{"id":"relationships-with-other-classes","text":"Relationships with Other Classes","depth":2,"charIndex":9502},{"id":"examples-1","text":"Examples","depth":2,"charIndex":10593},{"id":"example-1--custom-redirect-handling","text":"Example 1 — Custom Redirect Handling","depth":3,"charIndex":10606},{"id":"example-2--allowing-insecure-requests","text":"Example 2 — Allowing Insecure Requests","depth":3,"charIndex":10907},{"id":"example-3--using-a-debug-label","text":"Example 3 — Using a Debug Label","depth":3,"charIndex":11103},{"id":"redirectrequest-interface","text":"RedirectRequest Interface","depth":2,"charIndex":11291},{"id":"interface-definition","text":"Interface Definition","depth":3,"charIndex":11730},{"id":"field-descriptions-1","text":"Field Descriptions","depth":3,"charIndex":-1},{"id":"use-cases","text":"Use Cases","depth":3,"charIndex":13070},{"id":"example-intercepting-and-controlling-redirects","text":"Example: Intercepting and Controlling Redirects","depth":3,"charIndex":13560},{"id":"example-modifying-redirect-method-and-body","text":"Example: Modifying Redirect Method and Body","depth":3,"charIndex":14110},{"id":"notes","text":"Notes","depth":3,"charIndex":14532},{"id":"summary","text":"Summary","depth":2,"charIndex":14975}],"frontmatter":{},"version":"","description":"The Request class represents a complete configuration of an HTTP request.\nIt can be passed directly to the fetch() method or used to clone, modify, or retry an existing request. In Scripting, the Request API behaves similarly to the browser’s Fetch API but adds native extensions, including: Binary Data type support for request bodiesCustom redirect handlingRequest timeout and cancellationOptional allowance for insecure (HTTP) requestsDebug labels for internal logging"},{"title":"Response","content":"The `Response` class represents the result of an HTTP request made using the `fetch()` API.\nIt provides access to the response body, headers, cookies, and metadata such as the status code and MIME type.\n\nIn the **Scripting app**, the `Response` API extends the standard Fetch API behavior to provide **native-level enhancements**, including:\n\n- Access to structured cookie data\n- Binary data handling via the `Data` type\n- Support for response streaming (`ReadableStream<Data>`)\n- Access to expected content length, MIME type, and text encoding\n\n***\n\n## Definition\n\n```ts\nclass Response {\n  readonly body: ReadableStream<Data>\n\n  get bodyUsed(): boolean\n  get cookies(): Cookie[]\n  json(): Promise<any>\n  text(): Promise<string>\n  data(): Promise<Data>\n  bytes(): Promise<Uint8Array>\n  arrayBuffer(): Promise<ArrayBuffer>\n  formData(): Promise<FormData>\n  get status(): number\n  get statusText(): string\n  get headers(): Headers\n  get ok(): boolean\n  get url(): string\n  get mimeType(): string | undefined\n  get expectedContentLength(): number | undefined\n  get textEncodingName(): string | undefined\n}\n```\n\n***\n\n## Properties\n\n| Property                  | Type                   | Description                                                             |                                                                             |\n| ------------------------- | ---------------------- | ----------------------------------------------------------------------- | --------------------------------------------------------------------------- |\n| **body**                  | `ReadableStream<Data>` | The response body as a readable stream of `Data` chunks.                |                                                                             |\n| **bodyUsed**              | `boolean`              | Indicates whether the response body has been read.                      |                                                                             |\n| **cookies**               | `Cookie[]`             | A list of cookies sent by the server via the `Set-Cookie` header.       |                                                                             |\n| **status**                | `number`               | The HTTP status code of the response (e.g. `200`, `404`, `500`).        |                                                                             |\n| **statusText**            | `string`               | The status message returned by the server (e.g. `\"OK\"`, `\"Not Found\"`). |                                                                             |\n| **headers**               | `Headers`              | A `Headers` object representing response headers.                       |                                                                             |\n| **ok**                    | `boolean`              | `true` if the status code is between 200 and 299, otherwise `false`.    |                                                                             |\n| **url**                   | `string`               | The final URL of the response after any redirects.                      |                                                                             |\n| **mimeType**              | `string`               | `undefined`                                                             | The MIME type inferred from headers (e.g. `\"application/json\"`).            |\n| **expectedContentLength** | `number`               | `undefined`                                                             | The expected size of the response body in bytes, if provided by the server. |\n| **textEncodingName**      | `string`               | `undefined`                                                             | The encoding used for text responses (e.g. `\"utf-8\"`).                      |\n\n***\n\n## Methods\n\n### `json(): Promise<any>`\n\nParses the response body as JSON.\n\n#### Example\n\n```tsx\nconst response = await fetch(\"https://api.example.com/user\")\nconst data = await response.json()\nconsole.log(data.name)\n```\n\n***\n\n### `text(): Promise<string>`\n\nReads the response body as a UTF-8 string (or using `textEncodingName` if available).\n\n#### Example\n\n```tsx\nconst response = await fetch(\"https://example.com/message.txt\")\nconst text = await response.text()\nconsole.log(text)\n```\n\n***\n\n### `data(): Promise<Data>`\n\nReads the response body as a binary `Data` object, which can be used for file saving, image decoding, or Base64 conversion.\n\n#### Example\n\n```tsx\nconst response = await fetch(\"https://example.com/image.png\")\nconst imageData = await response.data()\nFileManager.write(imageData, \"/local/image.png\")\n```\n\n***\n\n### `bytes(): Promise<Uint8Array>`\n\nReads the response as a byte array (`Uint8Array`).\n\n#### Example\n\n```tsx\nconst response = await fetch(\"https://example.com/file.bin\")\nconst bytes = await response.bytes()\nconsole.log(\"Received\", bytes.length, \"bytes\")\n```\n\n***\n\n### `arrayBuffer(): Promise<ArrayBuffer>`\n\nReads the response as an `ArrayBuffer`, useful for low-level binary operations.\n\n#### Example\n\n```tsx\nconst response = await fetch(\"https://example.com/file\")\nconst buffer = await response.arrayBuffer()\nconsole.log(buffer.byteLength)\n```\n\n***\n\n### `formData(): Promise<FormData>`\n\nParses the response body as form data (for responses with `multipart/form-data` content).\n\n#### Example\n\n```tsx\nconst response = await fetch(\"https://example.com/form\")\nconst form = await response.formData()\nconsole.log(form.get(\"username\"))\n```\n\n***\n\n### `cookies: Cookie[]`\n\nThe `cookies` property provides direct access to the cookies set by the server via `Set-Cookie` headers.\nEach cookie is represented by a `Cookie` object with structured metadata.\n\n#### Cookie Type Definition\n\n```ts\ninterface Cookie {\n  name: string\n  value: string\n  domain: string\n  path: string\n  isSecure: boolean\n  isHTTPOnly: boolean\n  isSessionOnly: boolean\n  expiresDate?: Date | null\n}\n```\n\n| Field             | Type           | Description                                                   |\n| ----------------- | -------------- | ------------------------------------------------------------- |\n| **name**          | `string`       | Cookie name.                                                  |\n| **value**         | `string`       | Cookie value.                                                 |\n| **domain**        | `string`       | Domain to which the cookie belongs.                           |\n| **path**          | `string`       | Path scope of the cookie.                                     |\n| **isSecure**      | `boolean`      | `true` if the cookie is sent only over HTTPS.                 |\n| **isHTTPOnly**    | `boolean`      | `true` if inaccessible to JavaScript.                         |\n| **isSessionOnly** | `boolean`      | `true` if the cookie is temporary and expires at session end. |\n| **expiresDate**   | `Date \\| null` | Expiration date of the cookie, if specified.                  |\n\n#### Example — Reading Cookies\n\n```tsx\nconst response = await fetch(\"https://example.com/login\")\nfor (const cookie of response.cookies) {\n  console.log(`${cookie.name} = ${cookie.value}`)\n}\n```\n\n#### Example — Manual Cookie Management\n\nBy default, **Scripting’s `fetch()` does not automatically store or send cookies**.\nTo reuse cookies across multiple requests, you can manually include them:\n\n```tsx\nconst response = await fetch(\"https://example.com/login\")\nconst cookies = response.cookies\nconst cookieHeader = cookies.map(c => `${c.name}=${c.value}`).join(\"; \")\n\nconst next = await fetch(\"https://example.com/dashboard\", {\n  headers: { \"Cookie\": cookieHeader },\n})\n```\n\nThis gives you **explicit cookie control** similar to browser developer tools.\n\n***\n\n## Relationship with Other Classes\n\n| Class          | Description                                              |\n| -------------- | -------------------------------------------------------- |\n| **`Request`**  | Represents the HTTP request that produced this response. |\n| **`Headers`**  | Manages response headers.                                |\n| **`Data`**     | Represents binary data returned from the response body.  |\n| **`FormData`** | Used when the response contains `multipart/form-data`.   |\n| **`Cookie`**   | Represents a parsed HTTP cookie object.                  |\n\n***\n\n## Examples\n\n### Example 1 — Handling JSON API Responses\n\n```tsx\nconst response = await fetch(\"https://api.example.com/profile\")\nif (response.ok) {\n  const user = await response.json()\n  console.log(user.email)\n} else {\n  console.log(\"Error:\", response.status, response.statusText)\n}\n```\n\n***\n\n### Example 2 — Downloading Binary Data\n\n```tsx\nconst response = await fetch(\"https://example.com/photo.jpg\")\nconst fileData = await response.data()\nFileManager.write(fileData, \"/local/photo.jpg\")\n```\n\n***\n\n### Example 3 — Reading Cookies from a Response\n\n```tsx\nconst response = await fetch(\"https://example.com/login\")\nfor (const cookie of response.cookies) {\n  console.log(`Cookie: ${cookie.name} = ${cookie.value}`)\n}\n```\n\n***\n\n### Example 4 — Manual Cookie Persistence Between Requests\n\n```tsx\nconst loginResponse = await fetch(\"https://example.com/login\", {\n  method: \"POST\",\n  body: JSON.stringify({ username: \"Tom\", password: \"1234\" }),\n  headers: { \"Content-Type\": \"application/json\" },\n})\n\n// Build a cookie header manually\nconst cookieHeader = loginResponse.cookies.map(c => `${c.name}=${c.value}`).join(\"; \")\n\n// Use cookies in a new request\nconst dashboard = await fetch(\"https://example.com/dashboard\", {\n  headers: { \"Cookie\": cookieHeader },\n})\nconsole.log(await dashboard.text())\n```\n\n***\n\n### Example 5 — Inspecting Metadata\n\n```tsx\nconst response = await fetch(\"https://example.com/video.mp4\")\nconsole.log(\"MIME Type:\", response.mimeType)\nconsole.log(\"Expected Length:\", response.expectedContentLength)\n```\n\n***\n\n## Summary\n\nThe `Response` class in **Scripting** offers a rich and extensible interface for handling HTTP responses:\n\n- Compatible with the standard Fetch API\n- Adds native **cookie parsing** and management\n- Supports **binary data streams** via the `Data` type\n- Provides full access to headers, MIME type, and encoding\n- Allows seamless use with `FormData` and `ReadableStream`\n","routePath":"/doc/Utilities/Request/Response","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":551},{"id":"properties","text":"Properties","depth":2,"charIndex":1113},{"id":"methods","text":"Methods","depth":2,"charIndex":3825},{"id":"json-promiseany","text":"`json(): Promise<any>`","depth":3,"charIndex":3837},{"id":"example","text":"Example","depth":4,"charIndex":3900},{"id":"text-promisestring","text":"`text(): Promise<string>`","depth":3,"charIndex":4050},{"id":"example-1","text":"Example","depth":4,"charIndex":4168},{"id":"data-promisedata","text":"`data(): Promise<Data>`","depth":3,"charIndex":4316},{"id":"example-2","text":"Example","depth":4,"charIndex":4470},{"id":"bytes-promiseuint8array","text":"`bytes(): Promise<Uint8Array>`","depth":3,"charIndex":4652},{"id":"example-3","text":"Example","depth":4,"charIndex":4740},{"id":"arraybuffer-promisearraybuffer","text":"`arrayBuffer(): Promise<ArrayBuffer>`","depth":3,"charIndex":4916},{"id":"example-4","text":"Example","depth":4,"charIndex":5040},{"id":"formdata-promiseformdata","text":"`formData(): Promise<FormData>`","depth":3,"charIndex":5203},{"id":"example-5","text":"Example","depth":4,"charIndex":5331},{"id":"cookies-cookie","text":"`cookies: Cookie[]`","depth":3,"charIndex":5492},{"id":"cookie-type-definition","text":"Cookie Type Definition","depth":4,"charIndex":5697},{"id":"example--reading-cookies","text":"Example — Reading Cookies","depth":4,"charIndex":6947},{"id":"example--manual-cookie-management","text":"Example — Manual Cookie Management","depth":4,"charIndex":7142},{"id":"relationship-with-other-classes","text":"Relationship with Other Classes","depth":2,"charIndex":7706},{"id":"examples","text":"Examples","depth":2,"charIndex":8294},{"id":"example-1--handling-json-api-responses","text":"Example 1 — Handling JSON API Responses","depth":3,"charIndex":8307},{"id":"example-2--downloading-binary-data","text":"Example 2 — Downloading Binary Data","depth":3,"charIndex":8588},{"id":"example-3--reading-cookies-from-a-response","text":"Example 3 — Reading Cookies from a Response","depth":3,"charIndex":8795},{"id":"example-4--manual-cookie-persistence-between-requests","text":"Example 4 — Manual Cookie Persistence Between Requests","depth":3,"charIndex":9020},{"id":"example-5--inspecting-metadata","text":"Example 5 — Inspecting Metadata","depth":3,"charIndex":9595},{"id":"summary","text":"Summary","depth":2,"charIndex":9820}],"frontmatter":{},"version":"","description":"The Response class represents the result of an HTTP request made using the fetch() API.\nIt provides access to the response body, headers, cookies, and metadata such as the status code and MIME type. In the Scripting app, the Response API extends the standard Fetch API behavior to provide native-level enhancements, including: Access to structured cookie dataBinary data handling via the Data typeSupport for response streaming (ReadableStream<Data>)Access to expected content length, MIME type, and text encoding"},{"title":"fetch","content":"The `fetch()` method initiates an HTTP/HTTPS network request and returns a `Promise` that resolves to a `Response` object.\nIt behaves similarly to the standard **Fetch API** available in browsers but includes **native extensions** optimized for Scripting’s iOS runtime environment — such as local file access, `Data` integration, custom redirect handling, abort control, and debugging labels.\n\n***\n\n## Definition\n\n```ts\nfunction fetch(url: string, init?: RequestInit): Promise<Response>\nfunction fetch(request: Request): Promise<Response>\n```\n\n***\n\n## Parameters\n\n### 1. `url: string`\n\nThe URL to request.\nIt can be:\n\n- A **network resource**, e.g. `\"https://api.example.com/data\"`\n- A **local file URL**, e.g. `\"file:///var/mobile/Containers/Data/Application/...\"`\n\n***\n\n### 2. `init?: RequestInit`\n\nAn optional configuration object used to customize the request’s method, headers, body, timeout, abort signal, and other options.\n\n```ts\ntype RequestInit = {\n  method?: string;\n  headers?: HeadersInit;\n  body?: Data | FormData | string | ArrayBuffer;\n  allowInsecureRequest?: boolean;\n  handleRedirect?: (newRequest: RedirectRequest) => Promise<RedirectRequest | null>;\n  shouldAllowRedirect?: (newRequest: Request) => Promise<boolean>; // deprecated\n  timeout?: number; // seconds\n  signal?: AbortSignal;\n  cancelToken?: CancelToken; // deprecated\n  debugLabel?: string;\n}\n```\n\n#### Parameter Details\n\n| Property                 | Type                                                                | Description                                                                                              |   |\n| ------------------------ | ------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- | - |\n| **method**               | `string`                                                            | The HTTP method, such as `\"GET\"`, `\"POST\"`, `\"PUT\"`, `\"DELETE\"`. Defaults to `\"GET\"`.                    |   |\n| **headers**              | `HeadersInit`                                                       | The request headers. Can be a `Headers` object, a key-value object, or an array of `[key, value]` pairs. |   |\n| **body**                 | `Data` \\| `FormData` \\| `string` \\| `ArrayBuffer`                   | The request body. Only used for methods other than `GET` or `HEAD`.                                      |   |\n| **allowInsecureRequest** | `boolean`                                                           | Whether to allow HTTP requests when running in an HTTPS context. Defaults to `false`.                    |   |\n| **handleRedirect**       | `(newRequest: RedirectRequest) => Promise<RedirectRequest \\| null>` | Custom redirect handler. Return `null` to cancel the redirect.                                           |   |\n| **shouldAllowRedirect**  | `(newRequest: Request) => Promise<boolean>`                         | Deprecated. Use `handleRedirect` instead.                                                                |   |\n| **timeout**              | `number`                                                            | Timeout duration in seconds. Throws an `AbortError` when exceeded.                                       |   |\n| **signal**               | `AbortSignal`                                                       | A signal object from `AbortController` that can abort the request.                                       |   |\n| **cancelToken**          | `CancelToken`                                                       | Deprecated. Use `signal` instead.                                                                        |   |\n| **debugLabel**           | `string`                                                            | A label shown in the log panel for debugging and tracing requests.                                       |   |\n\n***\n\n## Return Value\n\nReturns a `Promise<Response>`.\n\nThe `Response` object represents the result of the request.\nEven when the HTTP status code indicates failure (e.g., 404 or 500), `fetch` **resolves** successfully with a `Response`.\nThe Promise is **rejected** only when:\n\n- The request cannot be completed (e.g., network error)\n- The URL is malformed\n- The request is aborted or times out\n\n***\n\n## Error Handling\n\n| Error Type       | Trigger Condition                                                |\n| ---------------- | ---------------------------------------------------------------- |\n| **`TypeError`**  | Invalid URL, unsupported protocol, or incompatible request body. |\n| **`AbortError`** | The request was aborted via `AbortController` or timed out.      |\n\n***\n\n## Examples\n\n### Example 1 — Basic GET Request\n\n```tsx\nconst response = await fetch(\"https://api.example.com/data\")\nif (response.ok) {\n  const json = await response.json()\n  console.log(json)\n} else {\n  console.log(\"Request failed:\", response.status)\n}\n```\n\n***\n\n### Example 2 — POST Request with JSON Body\n\n```tsx\nconst response = await fetch(\"https://api.example.com/posts\", {\n  method: \"POST\",\n  headers: { \"Content-Type\": \"application/json\" },\n  body: JSON.stringify({ title: \"Hello\", content: \"World\" }),\n})\nconst result = await response.json()\nconsole.log(result)\n```\n\n***\n\n### Example 3 — Uploading Files via `FormData`\n\n```tsx\nconst form = new FormData()\nform.append(\"file\", Data.fromFile(\"/path/to/image.png\"), \"image/png\", \"image.png\")\nform.append(\"user\", \"Tom\")\n\nconst response = await fetch(\"https://api.example.com/upload\", {\n  method: \"POST\",\n  body: form,\n})\nconsole.log(await response.json())\n```\n\n***\n\n### Example 4 — Timeout Handling\n\n```tsx\ntry {\n  const response = await fetch(\"https://example.com/slow\", { timeout: 10 })\n  const text = await response.text()\n  console.log(text)\n} catch (err) {\n  if (err.name === \"AbortError\") {\n    console.log(\"Request aborted due to timeout\")\n  }\n}\n```\n\n***\n\n### Example 5 — Aborting Requests with `AbortController`\n\n```tsx\nconst controller = new AbortController()\n\nsetTimeout(() => {\n  controller.abort(\"User cancelled the request\")\n}, 3000)\n\ntry {\n  const response = await fetch(\"https://example.com/large\", { signal: controller.signal })\n  const data = await response.text()\n  console.log(data)\n} catch (err) {\n  if (err.name === \"AbortError\") {\n    console.log(\"Request was manually aborted\")\n  }\n}\n```\n\n***\n\n### Example 6 — Custom Redirect Handling\n\n```tsx\nconst response = await fetch(\"https://example.com/redirect\", {\n  handleRedirect: async (newRequest) => {\n    console.log(\"Redirect detected:\", newRequest.url)\n    if (newRequest.url.includes(\"forbidden\")) {\n      return null // Cancel redirect\n    }\n    return newRequest // Allow redirect\n  },\n})\n```\n\n***\n\n### Example 7 — Debug Label for Logging\n\n```tsx\nawait fetch(\"https://api.example.com/status\", {\n  debugLabel: \"Health Check\",\n})\n// The request will be labeled \"Health Check\" in the log panel\n```\n\n***\n\n## Relationship with Other Classes\n\n| Class                                 | Description                                                                                                |\n| ------------------------------------- | ---------------------------------------------------------------------------------------------------------- |\n| **`Request`**                         | Represents a network request. You can pass a `Request` object to `fetch(request)` to reuse configuration.  |\n| **`Response`**                        | Represents the result of a network operation, with helper methods such as `.json()`, `.text()`, `.data()`. |\n| **`AbortController` / `AbortSignal`** | Provides a way to abort requests programmatically.                                                         |\n| **`FormData`**                        | Builds multipart/form-data bodies for file uploads and form submissions.                                   |\n| **`Headers`**                         | Manages HTTP request and response headers.                                                                 |\n| **`Data`**                            | Represents binary data and supports conversion to multiple formats (e.g., Base64, hex).                    |\n\n***\n\n## Additional Details\n\n- **Cookie Management**:\n  `fetch` does **not automatically store or send cookies**.\n  Cookies from responses can be accessed via `response.cookies`.\n\n- **Redirects**:\n  Redirects are automatically followed unless overridden by `handleRedirect`.\n\n- **Concurrency**:\n  Each request runs independently and safely in parallel.\n\n- **File Support**:\n  You can upload local files using `Data.fromFile()` as the request body.\n\n***\n\n## Summary\n\nThe `fetch()` API in Scripting extends the standard web Fetch interface with native capabilities:\n\n- Full iOS-native networking integration\n- Support for `Data` binary objects\n- File upload and download handling\n- Timeout and abort control\n- Custom redirect interception\n- Local logging with `debugLabel`\n","routePath":"/doc/Utilities/Request/fetch","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":399},{"id":"parameters","text":"Parameters","depth":2,"charIndex":549},{"id":"1-url-string","text":"1. `url: string`","depth":3,"charIndex":564},{"id":"2-init-requestinit","text":"2. `init?: RequestInit`","depth":3,"charIndex":772},{"id":"parameter-details","text":"Parameter Details","depth":4,"charIndex":1380},{"id":"return-value","text":"Return Value","depth":2,"charIndex":3930},{"id":"error-handling","text":"Error Handling","depth":2,"charIndex":4324},{"id":"examples","text":"Examples","depth":2,"charIndex":4701},{"id":"example-1--basic-get-request","text":"Example 1 — Basic GET Request","depth":3,"charIndex":4714},{"id":"example-2--post-request-with-json-body","text":"Example 2 — POST Request with JSON Body","depth":3,"charIndex":4964},{"id":"example-3--uploading-files-via-formdata","text":"Example 3 — Uploading Files via `FormData`","depth":3,"charIndex":5281},{"id":"example-4--timeout-handling","text":"Example 4 — Timeout Handling","depth":3,"charIndex":5620},{"id":"example-5--aborting-requests-with-abortcontroller","text":"Example 5 — Aborting Requests with `AbortController`","depth":3,"charIndex":5917},{"id":"example-6--custom-redirect-handling","text":"Example 6 — Custom Redirect Handling","depth":3,"charIndex":6371},{"id":"example-7--debug-label-for-logging","text":"Example 7 — Debug Label for Logging","depth":3,"charIndex":6728},{"id":"relationship-with-other-classes","text":"Relationship with Other Classes","depth":2,"charIndex":6930},{"id":"additional-details","text":"Additional Details","depth":2,"charIndex":8180},{"id":"summary","text":"Summary","depth":2,"charIndex":8628}],"frontmatter":{},"version":"","description":"The fetch() method initiates an HTTP/HTTPS network request and returns a Promise that resolves to a Response object.\nIt behaves similarly to the standard Fetch API available in browsers but includes native extensions optimized for Scripting’s iOS runtime environment — such as local file access, Data integration, custom redirect handling, abort control, and debugging labels."},{"title":"SFTP Client <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SFTP Client \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`SFTPClient` provides access to a remote file system over an SSH connection using the SFTP protocol.\nIt supports directory operations, file management, attribute retrieval, and path resolution.\nFiles can be opened using `openFile()`, which returns an `SFTPFile` instance for reading and writing.\n\nInstances of this class are typically created through:\n\n```ts\nconst sftp = await ssh.openSFTP()\n```\n\n***\n\n## Properties\n\n### `readonly isActive: boolean`\n\nIndicates whether the SFTP connection is still active.\n\n- `true`: The connection is active\n- `false`: The connection is closed or invalid\n\n***\n\n## Methods\n\n***\n\n## `close(): Promise<void>`\n\nCloses the SFTP connection.\n\n#### Returns:\n\n- A promise that resolves when the connection is successfully closed.\n\n#### Example:\n\n```ts\nawait sftp.close()\n```\n\n***\n\n## `readDirectory(atPath: string): Promise<DirectoryEntry[]>`\n\nReads the contents of a directory.\n\n### Parameters:\n\n- **`atPath`**: The path of the directory to read.\n\n### Returns:\n\nAn array of directory entries:\n\n```ts\n{\n  filename: string\n  longname: string\n  attributes: {\n    size?: number\n    userId?: number\n    groupId?: number\n    accessTime?: Date\n    modificationTime?: Date\n    permissions?: number\n  }\n}[]\n```\n\n### Example:\n\n```ts\nconst items = await sftp.readDirectory(\"/var/log\")\n```\n\n***\n\n## `createDirectory(atPath: string): Promise<void>`\n\nCreates a directory at the specified path.\n\n### Parameters:\n\n- `atPath`: The path where the directory should be created.\n\n### Returns:\n\nA promise that resolves when the directory is created.\n\n### Example:\n\n```ts\nawait sftp.createDirectory(\"/home/user/new-folder\")\n```\n\n***\n\n## `removeDirectory(atPath: string): Promise<void>`\n\nRemoves a directory. The directory must be empty.\n\n### Parameters:\n\n- `atPath`: The directory path to remove.\n\n### Example:\n\n```ts\nawait sftp.removeDirectory(\"/home/user/empty-dir\")\n```\n\n***\n\n## `rename(oldPath: string, newPath: string): Promise<void>`\n\nRenames or moves a file or directory.\n\n### Parameters:\n\n- `oldPath`: The current path.\n- `newPath`: The new path.\n\n### Example:\n\n```ts\nawait sftp.rename(\"/home/user/a.txt\", \"/home/user/b.txt\")\n```\n\n***\n\n## `getAttributes(atPath: string): Promise<FileAttributes>`\n\nRetrieves file or directory metadata.\n\n### Returns:\n\n```ts\n{\n  size?: number\n  userId?: number\n  groupId?: number\n  accessTime?: Date\n  modificationTime?: Date\n  permissions?: number\n}\n```\n\n### Example:\n\n```ts\nconst attrs = await sftp.getAttributes(\"/etc/hosts\")\n```\n\n***\n\n## `openFile(filePath: string, flags: SFTPOpenFileFlags | SFTPOpenFileFlags[]): Promise<SFTPFile>`\n\nOpens a file with the specified flags and returns an `SFTPFile` instance.\n\n### Parameters:\n\n- `filePath`: The path of the file to open.\n- `flags`: One or more of the following:\n\n```\n\"read\" | \"write\" | \"append\" | \"create\" | \"truncate\" | \"forceCreate\"\n```\n\n### Returns:\n\n- A promise that resolves to an `SFTPFile` object.\n\n### Example:\n\n```ts\nconst file = await sftp.openFile(\"/home/user/log.txt\", [\"read\"])\nconst data = await file.readAll()\nawait file.close()\n```\n\n***\n\n## `remove(atPath: string): Promise<void>`\n\nRemoves a file.\n\n### Parameters:\n\n- `atPath`: The file path to remove.\n\n### Example:\n\n```ts\nawait sftp.remove(\"/home/user/old.txt\")\n```\n\n***\n\n## `getRealPath(atPath: string): Promise<string>`\n\nResolves symbolic links, `~`, and relative paths to an absolute path.\n\n### Example:\n\n```ts\nconst real = await sftp.getRealPath(\"~/documents\")\n```\n\n***\n\n# Usage Example\n\n```ts\nconst ssh = await SSHClient.connect({\n  host: \"192.168.1.10\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"user\", \"pass\")\n})\n\nconst sftp = await ssh.openSFTP()\n\n// Read a directory\nconst list = await sftp.readDirectory(\"/home/user\")\n\n// Open a file and read contents\nconst file = await sftp.openFile(\"/home/user/info.txt\", \"read\")\nconst data = await file.readAll()\nawait file.close()\n\n// Create a directory\nawait sftp.createDirectory(\"/home/user/new-folder\")\n\n// Delete a file\nawait sftp.remove(\"/home/user/temp.txt\")\n\nawait sftp.close()\n```\n","routePath":"/doc/Utilities/SSH/SFTP Client","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":558},{"id":"readonly-isactive-boolean","text":"`readonly isActive: boolean`","depth":3,"charIndex":573},{"id":"methods","text":"Methods","depth":2,"charIndex":751},{"id":"close-promisevoid","text":"`close(): Promise<void>`","depth":2,"charIndex":768},{"id":"returns","text":"Returns:","depth":4,"charIndex":826},{"id":"example","text":"Example:","depth":4,"charIndex":912},{"id":"readdirectoryatpath-string-promisedirectoryentry","text":"`readDirectory(atPath: string): Promise<DirectoryEntry[]>`","depth":2,"charIndex":962},{"id":"parameters","text":"Parameters:","depth":3,"charIndex":1061},{"id":"returns-1","text":"Returns:","depth":3,"charIndex":1130},{"id":"example-1","text":"Example:","depth":3,"charIndex":1385},{"id":"createdirectoryatpath-string-promisevoid","text":"`createDirectory(atPath: string): Promise<void>`","depth":2,"charIndex":1466},{"id":"parameters-1","text":"Parameters:","depth":3,"charIndex":1563},{"id":"returns-2","text":"Returns:","depth":3,"charIndex":1641},{"id":"example-2","text":"Example:","depth":3,"charIndex":1711},{"id":"removedirectoryatpath-string-promisevoid","text":"`removeDirectory(atPath: string): Promise<void>`","depth":2,"charIndex":1793},{"id":"parameters-2","text":"Parameters:","depth":3,"charIndex":1897},{"id":"example-3","text":"Example:","depth":3,"charIndex":1957},{"id":"renameoldpath-string-newpath-string-promisevoid","text":"`rename(oldPath: string, newPath: string): Promise<void>`","depth":2,"charIndex":2038},{"id":"parameters-3","text":"Parameters:","depth":3,"charIndex":2139},{"id":"example-4","text":"Example:","depth":3,"charIndex":2215},{"id":"getattributesatpath-string-promisefileattributes","text":"`getAttributes(atPath: string): Promise<FileAttributes>`","depth":2,"charIndex":2303},{"id":"returns-3","text":"Returns:","depth":3,"charIndex":2403},{"id":"example-5","text":"Example:","depth":3,"charIndex":2554},{"id":"openfilefilepath-string-flags-sftpopenfileflags--sftpopenfileflags-promisesftpfile","text":"`openFile(filePath: string, flags: SFTPOpenFileFlags | SFTPOpenFileFlags[]): Promise<SFTPFile>`","depth":2,"charIndex":2637},{"id":"parameters-4","text":"Parameters:","depth":3,"charIndex":2812},{"id":"returns-4","text":"Returns:","depth":3,"charIndex":2992},{"id":"example-6","text":"Example:","depth":3,"charIndex":3058},{"id":"removeatpath-string-promisevoid","text":"`remove(atPath: string): Promise<void>`","depth":2,"charIndex":3206},{"id":"parameters-5","text":"Parameters:","depth":3,"charIndex":3267},{"id":"example-7","text":"Example:","depth":3,"charIndex":3322},{"id":"getrealpathatpath-string-promisestring","text":"`getRealPath(atPath: string): Promise<string>`","depth":2,"charIndex":3392},{"id":"example-8","text":"Example:","depth":3,"charIndex":3514}],"frontmatter":{},"version":"","description":"SFTPClient provides access to a remote file system over an SSH connection using the SFTP protocol.\nIt supports directory operations, file management, attribute retrieval, and path resolution.\nFiles can be opened using openFile(), which returns an SFTPFile instance for reading and writing. Instances of this class are typically created through:"},{"title":"SFTP File <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SFTP File \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\n`SFTPFile` represents an opened remote file accessed through an SFTP session.\nIt provides low-level operations such as reading, writing, retrieving attributes, and closing the file.\n\nInstances of this class are typically obtained through:\n\n```ts\nconst file = await sftp.openFile(path, flags)\n```\n\n***\n\n## Properties\n\n***\n\n### `readonly isActive: boolean`\n\nIndicates whether the file handle is still open.\n\n- `true`: The file is open and can be used\n- `false`: The file has been closed or is no longer valid\n\n***\n\n## Methods\n\n***\n\n## `readAttributes(): Promise<FileAttributes>`\n\nReads metadata attributes of the file.\n\n### Returns:\n\nAn object containing file attributes:\n\n```ts\n{\n  size?: number\n  userId?: number\n  groupId?: number\n  accessTime?: Date\n  modificationTime?: Date\n  permissions?: number\n}\n```\n\n### Example:\n\n```ts\nconst attrs = await file.readAttributes()\nconsole.log(attrs.size)\n```\n\n***\n\n## `read(options?: { from?: number, length?: number }): Promise<Data>`\n\nReads data from the file with optional offset and length.\n\n### Parameters:\n\n- `from?`: The byte offset to start reading from. Defaults to `0`.\n- `length?`: The number of bytes to read. Defaults to reading until the end of the file.\n\n### Returns:\n\n- A `Promise<Data>` containing the read bytes.\n\n### Example:\n\n```ts\nconst data = await file.read({ from: 100, length: 50 })\n```\n\n***\n\n## `readAll(): Promise<Data>`\n\nReads the entire contents of the file.\n\n### Returns:\n\n- A `Promise<Data>` containing all file data.\n\n### Example:\n\n```ts\nconst data = await file.readAll()\n```\n\n***\n\n## `write(data: Data, at?: number): Promise<void>`\n\nWrites data to the file.\n\n### Parameters:\n\n- `data`: The binary data to write.\n- `at?`: The byte offset at which to start writing.\n\n  - If omitted, behavior depends on the flags used to open the file:\n\n    - `\"append\"` will write at the end of the file.\n    - `\"write\"` will write from offset 0 unless the implementation maintains a current offset.\n\n### Returns:\n\n- A promise that resolves when the write completes.\n\n### Example:\n\n```ts\nawait file.write(Data.fromRawString(\"Hello world\"))\n```\n\n***\n\n## `close(): Promise<void>`\n\nCloses the file handle.\nAfter closing, `isActive` becomes `false`, and no further reads or writes are allowed.\n\n### Example:\n\n```ts\nawait file.close()\n```\n\n***\n\n## Usage Example\n\n```ts\n// Open file in read mode\nconst file = await sftp.openFile(\"/home/user/info.txt\", [\"read\"])\n\n// Get file attributes\nconst attrs = await file.readAttributes()\n\n// Read the entire file\nconst allData = await file.readAll()\n\n// Read part of the file\nconst partialData = await file.read({ from: 50, length: 100 })\n\n// Close the file\nawait file.close()\n```\n","routePath":"/doc/Utilities/SSH/SFTP File","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":455},{"id":"readonly-isactive-boolean","text":"`readonly isActive: boolean`","depth":3,"charIndex":475},{"id":"methods","text":"Methods","depth":2,"charIndex":666},{"id":"readattributes-promisefileattributes","text":"`readAttributes(): Promise<FileAttributes>`","depth":2,"charIndex":683},{"id":"returns","text":"Returns:","depth":3,"charIndex":771},{"id":"example","text":"Example:","depth":3,"charIndex":961},{"id":"readoptions--from-number-length-number--promisedata","text":"`read(options?: { from?: number, length?: number }): Promise<Data>`","depth":2,"charIndex":1057},{"id":"parameters","text":"Parameters:","depth":3,"charIndex":1188},{"id":"returns-1","text":"Returns:","depth":3,"charIndex":1362},{"id":"example-1","text":"Example:","depth":3,"charIndex":1424},{"id":"readall-promisedata","text":"`readAll(): Promise<Data>`","depth":2,"charIndex":1510},{"id":"returns-2","text":"Returns:","depth":3,"charIndex":1581},{"id":"example-2","text":"Example:","depth":3,"charIndex":1642},{"id":"writedata-data-at-number-promisevoid","text":"`write(data: Data, at?: number): Promise<void>`","depth":2,"charIndex":1706},{"id":"parameters-1","text":"Parameters:","depth":3,"charIndex":1784},{"id":"returns-3","text":"Returns:","depth":3,"charIndex":2108},{"id":"example-3","text":"Example:","depth":3,"charIndex":2175},{"id":"close-promisevoid","text":"`close(): Promise<void>`","depth":2,"charIndex":2257},{"id":"example-4","text":"Example:","depth":3,"charIndex":2398},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":2447}],"frontmatter":{},"version":"","description":"SFTPFile represents an opened remote file accessed through an SFTP session.\nIt provides low-level operations such as reading, writing, retrieving attributes, and closing the file. Instances of this class are typically obtained through:"},{"title":"SSH Authentication Method <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SSH Authentication Method \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nRepresents a method for authenticating with an SSH server. This class provides static methods for creating different types of SSH authentication strategies, including password-based, RSA key, ED25519, and ECDSA (P-256, P-384, P-521) private key authentication.\n\nThis class is essential when connecting to an SSH server using the `SSHClient.connect()` method.\n\n## Static Methods\n\n### `static passwordBased(username: string, password: string): SSHAuthenticationMethod`\n\nCreates a password-based authentication method.\n\n#### Parameters:\n\n- `username` (string):\n  The username to use when logging into the SSH server.\n\n- `password` (string):\n  The password corresponding to the provided username.\n\n#### Returns:\n\n- An instance of `SSHAuthenticationMethod` configured for password-based login.\n\n#### Example:\n\n```ts\nconst auth = SSHAuthenticationMethod.passwordBased(\"user1\", \"mypassword\")\n```\n\n***\n\n### `static ras(username: string, sshRsa: Data, decryptionKey?: Data): SSHAuthenticationMethod | null`\n\nCreates an RSA private key–based authentication method.\n\n#### Parameters:\n\n- `username` (string):\n  The username for SSH login.\n\n- `sshRsa` (`Data`):\n  The RSA private key in OpenSSH format. You can load the key using the `Data.fromString()` or similar method.\n\n- `decryptionKey` (`Data`, optional):\n  If the private key is encrypted, provide the decryption password as a `Data` object.\n\n#### Returns:\n\n- An instance of `SSHAuthenticationMethod` configured with RSA authentication, or `null` if the key is invalid.\n\n#### Example:\n\n```ts\nconst rsaKey = Data.fromString(privateKeyContent)!\nconst auth = SSHAuthenticationMethod.ras(\"user1\", rsaKey)\n```\n\n***\n\n### `static ed25519(username: string, sshEd25519: Data, decryptionKey?: Data): SSHAuthenticationMethod | null`\n\nCreates an ED25519 private key–based authentication method.\n\n#### Parameters:\n\n- `username` (string):\n  The SSH username.\n\n- `sshEd25519` (`Data`):\n  The ED25519 private key content.\n\n- `decryptionKey` (`Data`, optional):\n  Optional decryption key if the private key is encrypted.\n\n#### Returns:\n\n- An instance of `SSHAuthenticationMethod`, or `null` if the key is not valid.\n\n#### Example:\n\n```ts\nconst edKey = Data.fromString(ed25519KeyContent)!\nconst auth = SSHAuthenticationMethod.ed25519(\"user1\", edKey)\n```\n\n***\n\n### `static p256(username: string, pemRepresentation: string): SSHAuthenticationMethod | null`\n\nCreates a P-256 (ECDSA) authentication method from a PEM-formatted private key.\n\n#### Parameters:\n\n- `username` (string):\n  The username for SSH login.\n\n- `pemRepresentation` (string):\n  The PEM-formatted private key string for ECDSA P-256.\n\n#### Returns:\n\n- An instance of `SSHAuthenticationMethod`, or `null` if the PEM is not valid.\n\n#### Example:\n\n```ts\nconst auth = SSHAuthenticationMethod.p256(\"user1\", pemKeyContent)\n```\n\n***\n\n### `static p384(username: string, pemRepresentation: string): SSHAuthenticationMethod | null`\n\nCreates a P-384 (ECDSA) authentication method using a PEM-formatted private key.\n\n#### Parameters:\n\n- `username` (string):\n  The SSH username.\n\n- `pemRepresentation` (string):\n  The PEM-formatted private key string.\n\n#### Returns:\n\n- An instance of `SSHAuthenticationMethod`, or `null` if the PEM format is invalid.\n\n***\n\n### `static p521(username: string, pemRepresentation: string): SSHAuthenticationMethod | null`\n\nCreates a P-521 (ECDSA) authentication method using a PEM-formatted private key.\n\n#### Parameters:\n\n- `username` (string):\n  The SSH username.\n\n- `pemRepresentation` (string):\n  The PEM-formatted private key string.\n\n#### Returns:\n\n- An instance of `SSHAuthenticationMethod`, or `null` if the PEM format is invalid.\n\n***\n\n## Usage Example\n\n```ts\n// Example with password\nconst passwordAuth = SSHAuthenticationMethod.passwordBased(\"root\", \"secret123\")\n\n// Example with RSA private key\nconst privateKey = await FileManager.readAsData(\"/path/to/id_rsa\")\nconst rsaAuth = SSHAuthenticationMethod.ras(\"root\", privateKey)\n\n// Connect to server\nconst ssh = await SSHClient.connect({\n  host: \"192.168.0.1\",\n  authenticationMethod: rsaAuth\n})\n```\n","routePath":"/doc/Utilities/SSH/SSH Authentication Method","lang":"en","toc":[{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":529},{"id":"static-passwordbasedusername-string-password-string-sshauthenticationmethod","text":"`static passwordBased(username: string, password: string): SSHAuthenticationMethod`","depth":3,"charIndex":548},{"id":"parameters","text":"Parameters:","depth":4,"charIndex":686},{"id":"returns","text":"Returns:","depth":4,"charIndex":863},{"id":"example","text":"Example:","depth":4,"charIndex":959},{"id":"static-rasusername-string-sshrsa-data-decryptionkey-data-sshauthenticationmethod--null","text":"`static ras(username: string, sshRsa: Data, decryptionKey?: Data): SSHAuthenticationMethod | null`","depth":3,"charIndex":1064},{"id":"parameters-1","text":"Parameters:","depth":4,"charIndex":1225},{"id":"returns-1","text":"Returns:","depth":4,"charIndex":1556},{"id":"example-1","text":"Example:","depth":4,"charIndex":1684},{"id":"static-ed25519username-string-sshed25519-data-decryptionkey-data-sshauthenticationmethod--null","text":"`static ed25519(username: string, sshEd25519: Data, decryptionKey?: Data): SSHAuthenticationMethod | null`","depth":3,"charIndex":1824},{"id":"parameters-2","text":"Parameters:","depth":4,"charIndex":1997},{"id":"returns-2","text":"Returns:","depth":4,"charIndex":2218},{"id":"example-2","text":"Example:","depth":4,"charIndex":2313},{"id":"static-p256username-string-pemrepresentation-string-sshauthenticationmethod--null","text":"`static p256(username: string, pemRepresentation: string): SSHAuthenticationMethod | null`","depth":3,"charIndex":2455},{"id":"parameters-3","text":"Parameters:","depth":4,"charIndex":2632},{"id":"returns-3","text":"Returns:","depth":4,"charIndex":2793},{"id":"example-3","text":"Example:","depth":4,"charIndex":2888},{"id":"static-p384username-string-pemrepresentation-string-sshauthenticationmethod--null","text":"`static p384(username: string, pemRepresentation: string): SSHAuthenticationMethod | null`","depth":3,"charIndex":2985},{"id":"parameters-4","text":"Parameters:","depth":4,"charIndex":3163},{"id":"returns-4","text":"Returns:","depth":4,"charIndex":3298},{"id":"static-p521username-string-pemrepresentation-string-sshauthenticationmethod--null","text":"`static p521(username: string, pemRepresentation: string): SSHAuthenticationMethod | null`","depth":3,"charIndex":3403},{"id":"parameters-5","text":"Parameters:","depth":4,"charIndex":3581},{"id":"returns-5","text":"Returns:","depth":4,"charIndex":3716},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":3821}],"frontmatter":{},"version":"","description":"Represents a method for authenticating with an SSH server. This class provides static methods for creating different types of SSH authentication strategies, including password-based, RSA key, ED25519, and ECDSA (P-256, P-384, P-521) private key authentication. This class is essential when connecting to an SSH server using the SSHClient.connect() method."},{"title":"SSH Client <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# SSH Client \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nThe `SSHClient` class provides an interface for connecting to a remote SSH server, executing commands, opening TTY or PTY sessions, transferring files via SFTP, and performing multi-hop SSH jumps. It supports both command-based and interactive terminal-based workflows.\n\nThis class is central to establishing and managing SSH sessions in your script.\n\n***\n\n## Static Methods\n\n### `SSHClient.connect(options): Promise<SSHClient>`\n\nEstablishes a connection to a remote SSH server.\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `host` (`string`):\n    The hostname or IP address of the SSH server.\n\n  - `port?` (`number`):\n    The port number to connect to. Defaults to `22`.\n\n  - `authenticationMethod` (`SSHAuthenticationMethod`):\n    The authentication method to use (e.g., password, RSA key).\n\n  - `trustedHostKeys?` (`string[]`):\n    Optional list of trusted server public keys. If provided, the client will validate the server against this list.\n\n  - `reconnect?` (`\"never\" | \"once\" | \"always\"`):\n    Optional strategy for reconnecting if the connection drops. Default is `\"never\"`.\n\n#### Returns:\n\n- A `Promise` that resolves to an `SSHClient` instance upon successful connection.\n\n#### Example:\n\n```ts\nconst ssh = await SSHClient.connect({\n  host: \"192.168.0.10\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"root\", \"password\")\n})\n```\n\n***\n\n## Properties\n\n### `onDisconnect: (() => void) | null`\n\nCallback function to be invoked when the SSH connection is lost or closed.\n\n#### Example:\n\n```ts\nssh.onDisconnect = () => {\n  console.log(\"Disconnected from SSH server.\")\n}\n```\n\n***\n\n## Instance Methods\n\n### `executeCommand(command: string, options?): Promise<string>`\n\nExecutes a shell command on the remote server and returns its output.\n\n#### Parameters:\n\n- `command` (`string`):\n  The command to execute.\n\n- `options?` (`object`):\n\n  - `maxResponseSize?` (`number`):\n    Maximum number of bytes to return.\n\n  - `includeStderr?` (`boolean`):\n    If `true`, includes standard error output in the result.\n\n  - `inShell?` (`boolean`):\n    If `true`, executes the command inside a shell (e.g., `sh -c`). Default is `false`.\n\n#### Returns:\n\n- A `Promise` that resolves to the command output as a string.\n\n#### Example:\n\n```ts\nconst result = await ssh.executeCommand(\"uname -a\")\n```\n\n***\n\n### `executeCommandStream(command, onOutput, options?): Promise<void>`\n\nExecutes a command and streams its output line-by-line.\n\n#### Parameters:\n\n- `command` (`string`):\n  The command to run.\n\n- `onOutput` (`function`):\n  Callback `(data: Data, isStderr: boolean) => boolean`\n  Called for each line of output. Return `false` to stop receiving output.\n\n- `options?`:\n\n  - `inShell?` (`boolean`):\n    Whether to run the command in a shell.\n\n#### Returns:\n\n- A `Promise` that resolves when the command completes.\n\n#### Example:\n\n```ts\nconst output = Data.fromIntArray([])\nawait ssh.executeCommandStream(\"ping -c 4 google.com\", (data, isStderr) => {\n  output.append(data)\n  return true\n})\nconsole.log(output.toDecodedString()())\n```\n\n***\n\n### `withPTY(options): Promise<TTYStdinWriter>`\n\nOpens a PTY (pseudo-terminal) session.\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `wantReply?` (`boolean`):\n    Whether to wait for a reply from the server. Defaults to `true`.\n\n  - `term?` (`string`):\n    Terminal type (default is `\"xterm\"`).\n\n  - `terminalCharacterWidth?` (`number`):\n    Terminal character width. Default is `80`.\n\n  - `terminalRowHeight?` (`number`):\n    Terminal row height. Default is `24`.\n\n  - `terminalPixelWidth?` (`number`):\n    Terminal pixel width. Default is `0`.\n\n  - `terminalPixelHeight?` (`number`):\n    Terminal pixel height. Default is `0`.\n\n  - `onOutput` (`function`):\n    Callback `(data: Data, isStderr: boolean) => boolean` for receiving terminal output.\n\n  - `onError?` (`function`):\n    Optional error callback `(error: string) => void`.\n\n#### Returns:\n\n- A `Promise` that resolves to a `TTYStdinWriter` instance.\n\n#### Example:\n\n```ts\nlet output: Data | undefined\nlet timerId: number | undefined\nconst writer = await ssh.withPTY({\n  onOutput: (data, isStderr) => {\n    if (output == null) {\n      output = data\n    } else {\n      output.append(data)\n    }\n    clearTimeout(timerId)\n    timerId = setTimeout(() => {\n      console.log(output.toDecodedString()())\n      output = undefined\n    }, 500)\n    return true\n  }\n})\nawait writer.write(\"top\\n\")\n```\n\n***\n\n### `withTTY(options): Promise<TTYStdinWriter>`\n\nOpens a TTY session with simplified options (without explicit dimensions).\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `onOutput` (`function`):\n    Callback `(data: Data, isStderr: boolean) => boolean` for receiving terminal output.\n\n  - `onError?` (`function`):\n    Optional error callback `(error: string) => void`.\n\n#### Returns:\n\n- A `Promise` that resolves to a `TTYStdinWriter`.\n\n***\n\n### `openSFTP(): Promise<SFTPClient>`\n\nOpens an SFTP session for file transfer operations.\n\n#### Returns:\n\n- A `Promise` that resolves to an `SFTPClient` instance.\n\n#### Example:\n\n```ts\nconst sftp = await ssh.openSFTP()\nawait sftp.writeFile(\"/tmp/test.txt\", \"Hello world\")\n```\n\n***\n\n### `jump(options): Promise<SSHClient>`\n\nPerforms an SSH jump (proxy) to another remote host from the current SSH session.\n\n#### Parameters:\n\n- `options` (`object`):\n\n  - `host` (`string`):\n    The destination host to jump to.\n\n  - `port?` (`number`):\n    Port to connect to (default is `22`).\n\n  - `authenticationMethod` (`SSHAuthenticationMethod`):\n    Authentication method for the next host.\n\n  - `trustedHostKeys?` (`string[]`):\n    Optional list of trusted host keys.\n\n#### Returns:\n\n- A `Promise` that resolves to a new `SSHClient` representing the jump connection.\n\n#### Example:\n\n```ts\nconst nextHop = await ssh.jump({\n  host: \"10.0.0.2\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"user2\", \"pass2\")\n})\n```\n\n***\n\n### `close(): Promise<void>`\n\nCloses the SSH connection and releases associated resources.\n\n> **Important:** You should call this method when the SSH client is no longer needed to avoid potential memory or socket leaks.\n\n#### Returns:\n\n- A `Promise` that resolves when the SSH connection is successfully closed.\n\n#### Example:\n\n```ts\nawait ssh.close()\n```\n\n***\n\n## Usage Example\n\n```ts\nconst ssh = await SSHClient.connect({\n  host: \"192.168.1.10\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"user\", \"password\")\n})\n\nconst output = await ssh.executeCommand(\"uptime\")\nconsole.log(\"Uptime:\", output)\n\nconst sftp = await ssh.openSFTP()\nawait sftp.writeFile(\"/tmp/hello.txt\", \"Hello SSH\")\n\nawait ssh.close()\n```\n","routePath":"/doc/Utilities/SSH/SSH Client","lang":"en","toc":[{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":511},{"id":"sshclientconnectoptions-promisesshclient","text":"`SSHClient.connect(options): Promise<SSHClient>`","depth":3,"charIndex":530},{"id":"parameters","text":"Parameters:","depth":4,"charIndex":634},{"id":"returns","text":"Returns:","depth":4,"charIndex":1242},{"id":"example","text":"Example:","depth":4,"charIndex":1341},{"id":"properties","text":"Properties","depth":2,"charIndex":1519},{"id":"ondisconnect---void--null","text":"`onDisconnect: (() => void) | null`","depth":3,"charIndex":1534},{"id":"example-1","text":"Example:","depth":4,"charIndex":1651},{"id":"instance-methods","text":"Instance Methods","depth":2,"charIndex":1758},{"id":"executecommandcommand-string-options-promisestring","text":"`executeCommand(command: string, options?): Promise<string>`","depth":3,"charIndex":1779},{"id":"parameters-1","text":"Parameters:","depth":4,"charIndex":1916},{"id":"returns-1","text":"Returns:","depth":4,"charIndex":2299},{"id":"example-2","text":"Example:","depth":4,"charIndex":2378},{"id":"executecommandstreamcommand-onoutput-options-promisevoid","text":"`executeCommandStream(command, onOutput, options?): Promise<void>`","depth":3,"charIndex":2461},{"id":"parameters-2","text":"Parameters:","depth":4,"charIndex":2590},{"id":"returns-2","text":"Returns:","depth":4,"charIndex":2901},{"id":"example-3","text":"Example:","depth":4,"charIndex":2973},{"id":"withptyoptions-promisettystdinwriter","text":"`withPTY(options): Promise<TTYStdinWriter>`","depth":3,"charIndex":3197},{"id":"parameters-3","text":"Parameters:","depth":4,"charIndex":3286},{"id":"returns-3","text":"Returns:","depth":4,"charIndex":4034},{"id":"example-4","text":"Example:","depth":4,"charIndex":4110},{"id":"withttyoptions-promisettystdinwriter","text":"`withTTY(options): Promise<TTYStdinWriter>`","depth":3,"charIndex":4555},{"id":"parameters-4","text":"Parameters:","depth":4,"charIndex":4680},{"id":"returns-4","text":"Returns:","depth":4,"charIndex":4927},{"id":"opensftp-promisesftpclient","text":"`openSFTP(): Promise<SFTPClient>`","depth":3,"charIndex":4999},{"id":"returns-5","text":"Returns:","depth":4,"charIndex":5091},{"id":"example-5","text":"Example:","depth":4,"charIndex":5164},{"id":"jumpoptions-promisesshclient","text":"`jump(options): Promise<SSHClient>`","depth":3,"charIndex":5282},{"id":"parameters-5","text":"Parameters:","depth":4,"charIndex":5406},{"id":"returns-6","text":"Returns:","depth":4,"charIndex":5757},{"id":"example-6","text":"Example:","depth":4,"charIndex":5856},{"id":"close-promisevoid","text":"`close(): Promise<void>`","depth":3,"charIndex":6023},{"id":"returns-7","text":"Returns:","depth":4,"charIndex":6244},{"id":"example-7","text":"Example:","depth":4,"charIndex":6336},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":6385}],"frontmatter":{},"version":"","description":"The SSHClient class provides an interface for connecting to a remote SSH server, executing commands, opening TTY or PTY sessions, transferring files via SFTP, and performing multi-hop SSH jumps. It supports both command-based and interactive terminal-based workflows. This class is central to establishing and managing SSH sessions in your script."},{"title":"TTY Stdin Writer <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# TTY Stdin Writer \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nRepresents a writable input stream for a TTY (teletypewriter) session opened over SSH. This class allows writing text to the remote terminal’s standard input and resizing the terminal window dynamically.\n\nThis class is typically returned from methods such as `SSHClient.withPTY()` and `SSHClient.withTTY()`.\n\n***\n\n## Methods\n\n### `write(data: string): Promise<void>`\n\nWrites the given string to the standard input of the TTY session.\n\n#### Parameters:\n\n- `data` (`string`):\n  The string data to send to the remote terminal’s `stdin`. This can include control characters (e.g., `\"\\r\"` for Enter, `\"\\x03\"` for Ctrl+C).\n\n#### Returns:\n\n- A `Promise` that resolves when the data has been successfully written to the TTY stream.\n\n#### Example:\n\n```ts\nconst writer = await ssh.withTTY({\n  onOutput: (text) => {\n    console.log(\"Output:\", text)\n    return true\n  }\n})\nawait writer.write(\"ls -la\\n\")\n```\n\n***\n\n### `changeSize(options: { cols: number; rows: number; pixelWidth: number; pixelHeight: number }): Promise<void>`\n\nResizes the remote terminal window. This is useful for applications that rely on terminal dimensions, such as text editors or full-screen tools (e.g., `vim`, `htop`).\n\n#### Parameters:\n\n- `options` (`object`):\n  An object describing the new terminal dimensions:\n\n  - `cols` (`number`):\n    The number of character columns in the terminal (e.g., 80).\n\n  - `rows` (`number`):\n    The number of character rows in the terminal (e.g., 24).\n\n  - `pixelWidth` (`number`):\n    The pixel width of the terminal window. Use `0` if not applicable.\n\n  - `pixelHeight` (`number`):\n    The pixel height of the terminal window. Use `0` if not applicable.\n\n#### Returns:\n\n- A `Promise` that resolves once the terminal size has been successfully updated.\n\n#### Example:\n\n```ts\nawait writer.changeSize({\n  cols: 100,\n  rows: 30,\n  pixelWidth: 0,\n  pixelHeight: 0\n})\n```\n\n***\n\n## Usage Example\n\n```ts\nconst ssh = await SSHClient.connect({\n  host: \"192.168.1.10\",\n  authenticationMethod: SSHAuthenticationMethod.passwordBased(\"user\", \"password\")\n})\n\nconst writer = await ssh.withPTY({\n  term: \"xterm\",\n  onOutput: (text, isStderr) => {\n    console.log(text)\n    return true\n  }\n})\n\nawait writer.write(\"top\\n\")\n\n// Resize the terminal after 2 seconds\nawait new Promise(resolve => setTimeout(resolve, 2000))\nawait writer.changeSize({\n  cols: 120,\n  rows: 40,\n  pixelWidth: 0,\n  pixelHeight: 0\n})\n```\n","routePath":"/doc/Utilities/SSH/TTY Stdin Writer","lang":"en","toc":[{"id":"methods","text":"Methods","depth":2,"charIndex":474},{"id":"writedata-string-promisevoid","text":"`write(data: string): Promise<void>`","depth":3,"charIndex":486},{"id":"parameters","text":"Parameters:","depth":4,"charIndex":595},{"id":"returns","text":"Returns:","depth":4,"charIndex":778},{"id":"example","text":"Example:","depth":4,"charIndex":885},{"id":"changesizeoptions--cols-number-rows-number-pixelwidth-number-pixelheight-number--promisevoid","text":"`changeSize(options: { cols: number; rows: number; pixelWidth: number; pixelHeight: number }): Promise<void>`","depth":3,"charIndex":1062},{"id":"parameters-1","text":"Parameters:","depth":4,"charIndex":1345},{"id":"returns-1","text":"Returns:","depth":4,"charIndex":1817},{"id":"example-1","text":"Example:","depth":4,"charIndex":1915},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":2034}],"frontmatter":{},"version":"","description":"Represents a writable input stream for a TTY (teletypewriter) session opened over SSH. This class allows writing text to the remote terminal’s standard input and resizing the terminal window dynamically. This class is typically returned from methods such as SSHClient.withPTY() and SSHClient.withTTY()."},{"title":"Storage","content":"The `Storage` module provides a lightweight persistent key-value storage system for scripts. It allows scripts to save and retrieve simple typed data as well as binary data (`Data`). All data is persisted asynchronously in the background.\n\nBy default, all values are stored in the **private domain** of the current script, which means other scripts cannot access them. To share data across multiple scripts, set the `shared: true` option to use the **shared domain** instead.\n\n***\n\n# Supported Data Types\n\nThe following types can be stored using the Storage API:\n\n- `string`\n- `number`\n- `boolean`\n- `JSON` (any JSON-serializable structure)\n- `Data` (using `setData` / `getData`)\n\n***\n\n# Storage Domains\n\n| Domain  | Default                       | Accessible By           | Use Case                                                        |\n| ------- | ----------------------------- | ----------------------- | --------------------------------------------------------------- |\n| Private | Yes                           | Only the current script | Script-specific settings, preferences, cached content           |\n| Shared  | No (must pass `shared: true`) | All scripts             | Global settings, shared preferences, multi-script communication |\n\n***\n\n# API Reference\n\n## 1. `Storage.set(key, value, options?)`\n\n```ts\nfunction set<T>(key: string, value: T, options?: { shared: boolean }): boolean\n```\n\nStores a value in persistent storage. Supports `string`, `number`, `boolean`, and JSON-serializable values.\n\n### Parameters\n\n| Name           | Type      | Required | Description                                    |\n| -------------- | --------- | -------- | ---------------------------------------------- |\n| key            | `string`  | Yes      | The key under which the value is stored        |\n| value          | `T`       | Yes      | The value to store                             |\n| options.shared | `boolean` | No       | Store the value in the shared domain when true |\n\n### Returns\n\n- `boolean` — whether the operation was successful.\n\n***\n\n## 2. `Storage.get(key, options?)`\n\n```ts\nfunction get<T>(key: string, options?: { shared: boolean }): T | null\n```\n\nRetrieves a stored value. Returns `null` if the key does not exist.\n\n### Returns\n\n- `T | null` — the value associated with the key or `null`.\n\n***\n\n## 3. `Storage.setData(key, data, options?)`\n\n```ts\nfunction setData(key: string, data: Data, options?: { shared: boolean }): void\n```\n\nStores a `Data` object in persistent storage.\n\n***\n\n## 4. `Storage.getData(key, options?)`\n\n```ts\nfunction getData(key: string, options?: { shared: boolean }): Data | null\n```\n\nRetrieves a stored `Data` object. Returns `null` if the key does not exist.\n\n***\n\n## 5. `Storage.remove(key, options?)`\n\n```ts\nfunction remove(key: string, options?: { shared: boolean }): void\n```\n\nRemoves the entry associated with the specified key.\n\n***\n\n## 6. `Storage.contains(key, options?)`\n\n```ts\nfunction contains(key: string, options?: { shared: boolean }): boolean\n```\n\nChecks whether the storage contains the specified key.\n\n***\n\n## 7. `Storage.clear()`\n\n```ts\nfunction clear(): void\n```\n\nRemoves all entries from the **private storage domain**.\nThis does **not** affect shared storage.\n\n***\n\n## 8. `Storage.keys()`\n\n```ts\nfunction keys(): string[]\n```\n\nReturns an array of all keys stored in the current storage domain.\n\n***\n\n# Usage Examples\n\n## Example 1: Store and retrieve simple values\n\n```ts\n\n\nStorage.set(\"username\", \"Thom\")\n\nconst name = Storage.get<string>(\"username\")\nconsole.log(name) // \"Thom\"\n```\n\n***\n\n## Example 2: Store a JSON object\n\n```ts\nStorage.set(\"profile\", {\n  name: \"Alice\",\n  age: 30\n})\n\nconst profile = Storage.get<{ name: string; age: number }>(\"profile\")\nconsole.log(profile?.age) // 30\n```\n\n***\n\n## Example 3: Store and read binary Data\n\n```ts\n\n\nconst bytes = Data.fromUTF8(\"hello\")\nStorage.setData(\"payload\", bytes)\n\nconst result = Storage.getData(\"payload\")\nconsole.log(result?.toUTF8()) // \"hello\"\n```\n\n***\n\n## Example 4: Shared domain usage\n\n```ts\nStorage.set(\"theme\", \"dark\", { shared: true })\n\nconst theme = Storage.get<string>(\"theme\", { shared: true })\nconsole.log(theme) // \"dark\"\n```\n\n***\n\n## Example 5: Check existence and remove\n\n```ts\nif (Storage.contains(\"token\")) {\n  Storage.remove(\"token\")\n}\n```\n\n***\n\n## Example 6: List all keys\n\n```ts\nconsole.log(Storage.keys()) // [\"username\", \"profile\", ...]\n```\n\n***\n\n# Notes and Best Practices\n\n1. All writes are persisted asynchronously, but the method returns immediately with a success flag.\n2. `Data` cannot be stored using `Storage.set()`. Use `setData()` / `getData()` instead.\n3. JSON values must be fully serializable.\n4. Storage is intended for small, simple data. Avoid storing large binary blobs.\n5. `Storage.clear()` only clears the private domain.\n","routePath":"/doc/Utilities/Storage","lang":"en","toc":[{"id":"1-storagesetkey-value-options","text":"1. `Storage.set(key, value, options?)`","depth":2,"charIndex":1272},{"id":"parameters","text":"Parameters","depth":3,"charIndex":1514},{"id":"returns","text":"Returns","depth":3,"charIndex":1986},{"id":"2-storagegetkey-options","text":"2. `Storage.get(key, options?)`","depth":2,"charIndex":2057},{"id":"returns-1","text":"Returns","depth":3,"charIndex":2243},{"id":"3-storagesetdatakey-data-options","text":"3. `Storage.setData(key, data, options?)`","depth":2,"charIndex":2322},{"id":"4-storagegetdatakey-options","text":"4. `Storage.getData(key, options?)`","depth":2,"charIndex":2510},{"id":"5-storageremovekey-options","text":"5. `Storage.remove(key, options?)`","depth":2,"charIndex":2717},{"id":"6-storagecontainskey-options","text":"6. `Storage.contains(key, options?)`","depth":2,"charIndex":2892},{"id":"7-storageclear","text":"7. `Storage.clear()`","depth":2,"charIndex":3076},{"id":"8-storagekeys","text":"8. `Storage.keys()`","depth":2,"charIndex":3239},{"id":"example-1-store-and-retrieve-simple-values","text":"Example 1: Store and retrieve simple values","depth":2,"charIndex":3391},{"id":"example-2-store-a-json-object","text":"Example 2: Store a JSON object","depth":2,"charIndex":3563},{"id":"example-3-store-and-read-binary-data","text":"Example 3: Store and read binary Data","depth":2,"charIndex":3772},{"id":"example-4-shared-domain-usage","text":"Example 4: Shared domain usage","depth":2,"charIndex":3987},{"id":"example-5-check-existence-and-remove","text":"Example 5: Check existence and remove","depth":2,"charIndex":4176},{"id":"example-6-list-all-keys","text":"Example 6: List all keys","depth":2,"charIndex":4295}],"frontmatter":{},"version":"","description":"The Storage module provides a lightweight persistent key-value storage system for scripts. It allows scripts to save and retrieve simple typed data as well as binary data (Data). All data is persisted asynchronously in the background. By default, all values are stored in the private domain of the current script, which means other scripts cannot access them. To share data across multiple scripts, set the shared: true option to use the shared domain instead. The following types can be stored using the Storage API: stringnumberbooleanJSON (any JSON-serializable structure)Data (using setData / getData)"},{"title":"Thread","content":"Scripting’s UI rendering system and the vast majority of JavaScript execution run on the main thread by default. In normal usage, developers rarely need to manually switch threads.\n\nHowever, some system APIs or internal operations may occasionally execute on a background thread. To ensure UI updates are always safe, and to support running heavy work without blocking the main thread, Scripting provides the global `Thread` API.\n\n`Thread` is a global namespace and does not require imports.\n\n***\n\n## `Thread.isMainThread: boolean`\n\nIndicates whether the current JavaScript execution context is running on the main thread.\n\nMost of the time this value is `true`, but certain system callbacks or asynchronous operations may occur on background threads. When performing UI updates, this property can be used to confirm that the current thread is safe for UI operations.\n\n```ts\nif (Thread.isMainThread) {\n  console.log('On main thread')\n} else {\n  console.log('On background thread')\n}\n```\n\n***\n\n## `Thread.runInMain(execute: () => void): void`\n\nExecutes the given function on the main thread.\n\nBecause JavaScript normally runs on the main thread, you usually do not need to call this method explicitly. It is mainly useful when:\n\n- A system API callback happens on a background thread and you need to update the UI\n- You want to strictly ensure that a specific piece of logic runs on the main thread\n\nThis method does not return a value and does not switch back to the previous thread. It simply guarantees synchronous execution on the main thread.\n\n```ts\nThread.runInMain(() => {\n  title.value = 'Updated on main thread'\n})\n```\n\n***\n\n## `Thread.runInBackground<T>(execute: () => T | Promise<T>): Promise<T>`\n\nRuns the provided function on a background thread and returns its result as a Promise.\nOnce the background task completes, the result is delivered back on the thread that initiated the call (typically the main thread).\n\nThis is ideal for:\n\n- CPU-intensive tasks\n- Large data processing\n- Any work that should not block the UI\n\nThe function may return either a value or a Promise.\n\n```ts\nconst total = await Thread.runInBackground(() => {\n  let v = 0\n  for (let i = 0; i < 5_000_000; i++) v += i\n  return v\n})\n\nconsole.log('Computed result:', total)\n```\n\nAsync example:\n\n```ts\nconst filtered = await Thread.runInBackground(async () => {\n  const image = await loadImage()\n  return applyFilter(image)\n})\n\nThread.runInMain(() => {\n  setImage(filtered)\n})\n```\n\n***\n\n## Automatic Thread Switching in Asynchronous I/O\n\nMany **asynchronous I/O methods in Scripting already run on background threads automatically**, so developers do **not** need to manually call `runInBackground` for them.\n\nExample:\n\n```ts\nconst text = await FileManager.readAsString(path)\n```\n\n`readAsString` automatically performs file reading on a background thread, then returns the result back on the thread where the call was made (usually the main thread).\n\nThis means asynchronous I/O will **not** block the UI, even if you call them directly in your UI logic.\n\n### Only synchronous I/O runs on the main thread\n\nFor example:\n\n```ts\nconst text = FileManager.readAsStringSync(path)\n```\n\nSynchronous methods **always** execute on the main thread and do **not** switch threads internally.\n\nTherefore:\n\n- Avoid using synchronous I/O on large files\n- Prefer asynchronous versions (e.g., `readAsString`) for better performance\n- Use `runInBackground` only when you must perform blocking synchronous work or heavy computation\n\n***\n\n## Recommendations\n\n- JavaScript runs on the main thread by default; `runInMain` is rarely needed\n- Asynchronous I/O methods already run on background threads automatically\n- Use `runInBackground` for CPU-heavy or blocking synchronous tasks\n- If an API callback occurs on a background thread, use `runInMain` to safely update UI\n- Do not manipulate UI inside `runInBackground`; switch back first\n","routePath":"/doc/Utilities/Thread","lang":"en","toc":[{"id":"threadismainthread-boolean","text":"`Thread.isMainThread: boolean`","depth":2,"charIndex":498},{"id":"threadruninmainexecute---void-void","text":"`Thread.runInMain(execute: () => void): void`","depth":2,"charIndex":993},{"id":"threadruninbackgroundtexecute---t--promiset-promiset","text":"`Thread.runInBackground<T>(execute: () => T | Promise<T>): Promise<T>`","depth":2,"charIndex":1633},{"id":"automatic-thread-switching-in-asynchronous-io","text":"Automatic Thread Switching in Asynchronous I/O","depth":2,"charIndex":2469},{"id":"only-synchronous-io-runs-on-the-main-thread","text":"Only synchronous I/O runs on the main thread","depth":3,"charIndex":3038},{"id":"recommendations","text":"Recommendations","depth":2,"charIndex":3500}],"frontmatter":{},"version":"","description":"Scripting’s UI rendering system and the vast majority of JavaScript execution run on the main thread by default. In normal usage, developers rarely need to manually switch threads. However, some system APIs or internal operations may occasionally execute on a background thread. To ensure UI updates are always safe, and to support running heavy work without blocking the main thread, Scripting provides the global Thread API. Thread is a global namespace and does not require imports."},{"title":"UIImage","content":"The `UIImage` class represents an image object that can be loaded, encoded, converted, and displayed.\nIt supports creating images from file paths, binary data, or Base64 strings and provides multiple format conversion methods (PNG/JPEG).\n`UIImage` can be displayed directly in an `Image` component or used with the `Data` class for storage, uploading, or encryption.\n\n***\n\n## Overview\n\n`UIImage` is the core class for handling images in the scripting environment. It is commonly used for:\n\n- Loading images from local files, binary data, Base64 strings or networl URL.\n- Accessing image dimensions and scale\n- Converting image formats (e.g., PNG, JPEG)\n- Generating Base64-encoded strings\n- Adjusting rendering and resizing modes\n- Flipping or tinting images\n- Generating thumbnails\n- Displaying dynamic images that switch between light and dark modes\n\n***\n\n## Properties\n\n### `width: number`\n\nThe width of the image in pixels.\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/image.png\")\nconsole.log(image?.width)\n```\n\n***\n\n### `height: number`\n\nThe height of the image in pixels.\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/image.png\")\nconsole.log(image?.height)\n```\n\n***\n\n### `scale: number`\n\nThe scale factor of the image, usually `1` or `2` for Retina displays.\n\n```ts\nconsole.log(image?.scale)\n```\n\n***\n\n### `imageOrientation: string`\n\nThe orientation of the image. Possible values:\n\n- `\"up\"`\n- `\"down\"`\n- `\"left\"`\n- `\"right\"`\n- `\"upMirrored\"`\n- `\"downMirrored\"`\n- `\"leftMirrored\"`\n- `\"rightMirrored\"`\n- `\"unknown\"`\n\n***\n\n### `isSymbolImage: boolean`\n\nIndicates whether the image is an SF Symbol image.\n\n```ts\nconst symbol = UIImage.fromSFSymbol(\"heart.fill\")\nconsole.log(symbol?.isSymbolImage) // true\n```\n\n***\n\n### `renderingMode: \"automatic\" | \"alwaysOriginal\" | \"alwaysTemplate\" | \"unknown\"`\n\nThe rendering mode of the image:\n\n- `automatic`: Automatically determined by the system\n- `alwaysOriginal`: Display the image in its original color\n- `alwaysTemplate`: Render the image as a template (can be tinted)\n\n***\n\n### `resizingMode: \"tile\" | \"stretch\" | \"unknown\"`\n\nThe resizing mode of the image:\n\n- `\"tile\"`: The image is tiled to fill the area\n- `\"stretch\"`: The image is stretched to fit\n\n***\n\n### `capInsets: { top: number, left: number, bottom: number, right: number }`\n\nThe cap insets that define the stretchable area of the image.\n\n***\n\n### `flipsForRightToLeftLayoutDirection: boolean`\n\nIndicates whether the image automatically flips in right-to-left (RTL) layout directions.\n\n***\n\n## Instance Methods\n\n### `preparingThumbnail(size: Size): UIImage | null`\n\nCreates a thumbnail with the specified size.\n\n- **Parameters:**\n\n  - `size.width`: Width of the thumbnail\n  - `size.height`: Height of the thumbnail\n\n- **Returns:**\n  A new `UIImage` instance, or `null` if creation fails.\n\n**Example:**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/photo.jpg\")\nconst thumb = image?.preparingThumbnail({ width: 200, height: 200 })\n```\n\n***\n\n### `withBaselineOffset(offset: number): UIImage`\n\nReturns a new image with the specified baseline offset, it is useful for aligning text to the bottom of an image.\n\n```ts\nconst offset = image?.withBaselineOffset(10)\n```\n\n***\n\n### `withHorizontallyFlippedOrientation(): UIImage`\n\nReturns a new image with horizontally flipped orientation.\n\n```ts\nconst flipped = image?.withHorizontallyFlippedOrientation()\n```\n\n***\n\n### `withTintColor(color: string, renderingMode?: \"automatic\" | \"alwaysOriginal\" | \"alwaysTemplate\"): UIImage | null`\n\nApplies a tint color to the image using the specified rendering mode.\n\n- **Parameters:**\n\n  - `color`: The tint color as a string, e.g. `\"#ffcc00\"` or `\"rgb(255,128,0)\"`\n  - `renderingMode`: The rendering mode to use. Defaults to `\"automatic\"`\n\n**Example:**\n\n```ts\nconst symbol = UIImage.fromSFSymbol(\"star.fill\")\nconst tinted = symbol?.withTintColor(\"#ffcc00\", \"alwaysTemplate\")\n```\n\n***\n\n### `withRenderingMode(renderingMode: \"automatic\" | \"alwaysOriginal\" | \"alwaysTemplate\"): UIImage | null`\n\nReturns a new version of the image using the specified rendering mode.\n\n```ts\nconst templated = image?.withRenderingMode(\"alwaysTemplate\")\n```\n\n***\n\n### `resizableImage(capInsets, resizingMode?): UIImage | null`\n\nReturns a new version of the image with specified cap insets and resizing mode.\n\n- **Parameters:**\n\n  - `capInsets`: `{ top, left, bottom, right }`\n  - `resizingMode`: `\"tile\"` or `\"stretch\"` (default `\"tile\"`)\n\n**Example:**\n\n```ts\nconst resizable = image?.resizableImage(\n  { top: 10, left: 10, bottom: 10, right: 10 },\n  \"stretch\"\n)\n```\n\n***\n\n### `renderedInCircle(radius?: number | null, fitEntireImage?: boolean): UIImage`\n\nReturns a new version of the image rendered as a circle, with optional radius and fit behavior.\n\n- **Parameters:**\n\n  - `radius` (optional): The radius of the circle in points.\n\n    - If not specified:\n\n      - When `fitEntireImage` is `false`, the circle uses the **shortest dimension** of the image.\n      - When `fitEntireImage` is `true`, the circle uses the **longest dimension** of the image.\n  - `fitEntireImage` (optional): Whether to fit the entire image inside the circle.\n\n    - Default value: `true`.\n    - If set to `false`, the image fills the circular area and may be cropped.\n\n- **Returns:**\n\n  - A new `UIImage` instance representing the circular rendering.\n\n**Example 1: Create a default circular avatar**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/avatar.jpg\")\nconst circle = image?.renderedInCircle()\n<Image image={circle} />\n```\n\n**Example 2: Specify radius and fit entire image**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/photo.png\")\nconst circle = image?.renderedInCircle(60, true)\n<Image image={circle} />\n```\n\n**Example 3: Fill mode (may crop parts of the image)**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/icon.png\")\nconst circle = image?.renderedInCircle(50, false)\n<Image image={circle} />\n```\n\n***\n\n### `renderedIn(size: { width: number, height: number }, source?: {  position?: ..., size?: ... }): UIImage | null`\n\nReturns a new version of the image rendered with the specified size and optional source region.\n\n- **Parameters:**\n\n  - `size`: `{ width: number, height: number }` - The size of the rendered image.\n  - `source`: `{ position?: { x: number, y: number }, size?: { width: number, height: number } }` - The source region of the image.\n\n- **Returns:**\n\n  - A new `UIImage` instance if rendering succeeds, or `null` if it fails.\n\n**Example 1: Scale entire image into a rectangle**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/photo.jpg\")\nconst rendered = image?.renderedIn({width: 200, height: 200 })\n<Image image={rendered} />\n```\n\n**Example 2: Crop and render a specific region**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/landscape.jpg\")\nconst cropped = image?.renderedIn({\n    width: 150, height: 150 \n  },\n  position: { x: 100, y: 50 },\n  size: { width: 300, height: 300 }\n)\n<Image image={cropped} />\n```\n\n***\n\n### `applySymbolConfiguration(config: UIImageSymbolConfiguration | UIImageSymbolConfiguration[]): UIImage | null`\n\nReturns a new version of the image with the specified **symbol configuration** (`UIImageSymbolConfiguration`).\nThis method is primarily used to customize the appearance of **SF Symbols** images, including color, weight, size, rendering mode, and palette.\n\n- **Parameters:**\n\n  - `config`: The symbol configuration to apply to the image.\n\n    - Can be a single `UIImageSymbolConfiguration` instance, or\n    - An array of configurations, which will be applied sequentially (later configurations may override earlier ones).\n\n- **Returns:**\n\n  - A new `UIImage` instance representing the symbol with applied configuration, or `null` if the operation fails.\n\n**Example 1: Display a symbol in multicolor**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/sf_symbol.png\")\nconst config = UIImageSymbolConfiguration.preferringMulticolor()\nconst colored = image?.applySymbolConfiguration(config)\n<Image image={colored} />\n```\n\n**Example 2: Apply both scale and weight configurations**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/sf_symbol.png\")\nconst config = [\n  UIImageSymbolConfiguration.scale(\"large\"),\n  UIImageSymbolConfiguration.weight(\"bold\")\n]\nconst boldLarge = image?.applySymbolConfiguration(config)\n<Image image={boldLarge} />\n```\n\n**Example 3: Set hierarchical and palette colors**\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/symbol.png\")\nconst config = [\n  UIImageSymbolConfiguration.hierarchicalColor(Color.blue()),\n  UIImageSymbolConfiguration.paletteColors([Color.red(), Color.orange()])\n]\nconst customized = image?.applySymbolConfiguration(config)\n<Image image={customized} />\n```\n\n***\n\n## UIImageSymbolConfiguration\n\n`UIImageSymbolConfiguration` is a class used to define appearance configurations for **symbol images (SF Symbols)**.\nInstances created with its static methods can be passed to `applySymbolConfiguration()` to modify how the symbol is rendered.\n\n### Available Static Methods\n\n| Method                      | Description                                                                                                                                                        |\n| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| `preferringMonochrome()`    | Prefers monochrome rendering for the symbol.                                                                                                                       |\n| `preferringMulticolor()`    | Prefers multicolor rendering for the symbol.                                                                                                                       |\n| `scale(value)`              | Sets the scale of the symbol. Possible values: `\"default\"`, `\"large\"`, `\"medium\"`, `\"small\"`, `\"unspecified\"`.                                                     |\n| `weight(value)`             | Sets the stroke weight of the symbol. Possible values: `\"ultraLight\"`, `\"thin\"`, `\"light\"`, `\"regular\"`, `\"medium\"`, `\"semibold\"`, `\"bold\"`, `\"heavy\"`, `\"black\"`. |\n| `pointSize(value)`          | Sets the point size of the symbol.                                                                                                                                 |\n| `paletteColors(value)`      | Sets a color palette (array of `Color`) for multicolor or layered symbols.                                                                                         |\n| `hierarchicalColor(value)`  | Applies a hierarchical color (used for layered shading effects).                                                                                                   |\n| `variableValueMode(value)`  | Sets how variable-value symbols are displayed. Possible values: `\"automatic\"`, `\"color\"`, `\"draw\"`.                                                                |\n| `colorRenderingMode(value)` | Sets the color rendering mode. Possible values: `\"automatic\"`, `\"flat\"`, `\"gradient\"`.                                                                             |\n| `locale(identifier)`        | Sets the locale for localized symbol variants (e.g., `\"en\"`, `\"zh-Hans\"`).                                                                                         |\n\n***\n\n**Example: Combine multiple symbol configurations**\n\n```ts\nconst config = [\n  UIImageSymbolConfiguration.scale(\"medium\"),\n  UIImageSymbolConfiguration.weight(\"semibold\"),\n  UIImageSymbolConfiguration.preferringMonochrome(),\n  UIImageSymbolConfiguration.colorRenderingMode(\"flat\")\n]\n\nconst image = UIImage.fromFile(\"/path/to/symbol.png\")\nconst result = image?.applySymbolConfiguration(config)\n<Image image={result} />\n```\n\n***\n\n### `toJPEGData(compressionQuality?: number): Data | null`\n\nConverts the image to JPEG data.\n\n- **Parameters:**\n\n  - `compressionQuality`: A number between `0` and `1`, default is `1`.\n- **Returns:**\n  A `Data` instance or `null`.\n\n***\n\n### `toPNGData(): Data | null`\n\nConverts the image to PNG data.\nReturns a `Data` instance or `null`.\n\n***\n\n### `toJPEGBase64String(compressionQuality?: number): string | null`\n\nConverts the image to a Base64-encoded JPEG string.\n\n***\n\n### `toPNGBase64String(): string | null`\n\nConverts the image to a Base64-encoded PNG string.\n\n***\n\n## Static Methods\n\n### `UIImage.fromData(data: Data): UIImage | null`\n\nCreates an image from a `Data` instance containing PNG or JPEG data.\n\n***\n\n### `UIImage.fromFile(filePath: string): UIImage | null`\n\nCreates an image from a file path (supports PNG, JPG, JPEG).\n\n***\n\n### `UIImage.fromBase64String(base64String: string): UIImage | null`\n\nCreates an image from a Base64 string.\n\n***\n\n### `UIImage.fromSFSymbol(name: string): UIImage | null`\n\nCreates an image from a system SF Symbol.\n\n**Example:**\n\n```ts\nconst heart = UIImage.fromSFSymbol(\"heart.fill\")\n<Image image={heart} />\n```\n\n***\n\n### `UIImage.fromURL(url: string): Promise<UIImage | null>`\n\nCreates an image from a URL.\n\n**Example:**\n\n```ts\nconst image = await UIImage.fromURL(\"https://example.com/image.jpg\")\n<Image image={image} />\n```\n\n***\n\n## Using UIImage in the UI\n\n`UIImage` can be displayed directly in the `<Image>` component.\n\n### Component Definition\n\n```ts\ndeclare const Image: FunctionComponent<UIImageProps>\n```\n\n***\n\n### Props Definition\n\n```ts\ntype UIImageProps = {\n  image: UIImage | DynamicImageSource<UIImage>\n}\n```\n\n***\n\n### Dynamic Image Type\n\n```ts\ntype DynamicImageSource<T> = {\n  light: T\n  dark: T\n}\n```\n\nUsed for automatically switching images in light and dark mode.\n\n***\n\n### Example: Display a Single Image\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/avatar.png\")\n<Image image={image} />\n```\n\n***\n\n### Example: Light and Dark Mode\n\n```ts\nconst lightImage = UIImage.fromFile(\"/path/to/light-logo.png\")\nconst darkImage = UIImage.fromFile(\"/path/to/dark-logo.png\")\n\n<Image image={{ light: lightImage, dark: darkImage }} />\n```\n\n***\n\n## Common Usage Examples\n\n### 1. Convert Image to Base64\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/image.png\")\nconst base64 = image?.toPNGBase64String()\n```\n\n***\n\n### 2. Compress and Save as JPEG\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/photo.jpg\")\nconst jpegData = image?.toJPEGData(0.6)\nif (jpegData) {\n  // Save the data to a local file\n}\n```\n\n***\n\n### 3. Restore Image from Base64 String\n\n```ts\nconst base64 = \"iVBORw0KGgoAAAANSUhEUgAA...\"\nconst image = UIImage.fromBase64String(base64)\n<Image image={image} />\n```\n\n***\n\n### 4. Convert PNG to JPEG and Upload\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/logo.png\")\nconst jpegData = image?.toJPEGData(0.8)\nif (jpegData) {\n  const response = await fetch(\"https://example.com/upload\", {\n    method: \"POST\",\n    body: jpegData.toUint8Array()\n  })\n}\n```\n\n***\n\n### 5. Create and Tint an SF Symbol\n\n```ts\nconst symbol = UIImage.fromSFSymbol(\"star.fill\")\nconst colored = symbol?.withTintColor(\"#ffcc00\", \"alwaysTemplate\")\n<Image image={colored} />\n```\n\n***\n\n### 6. Generate a Thumbnail\n\n```ts\nconst image = UIImage.fromFile(\"/path/to/large.jpg\")\nconst thumb = image?.preparingThumbnail({ width: 120, height: 120 })\n<Image image={thumb} />\n```\n\n***\n\n## Summary\n\n`UIImage` is the core class for image manipulation in the Scripting environment. It provides:\n\n- Loading from files, binary data, or Base64 strings\n- Support for SF Symbols\n- Access to dimensions, scale, orientation, and rendering information\n- Methods for flipping, tinting, and resizing\n- PNG/JPEG conversion and Base64 encoding\n- Thumbnail generation and customizable rendering modes\n- Seamless integration with the `<Image>` component\n- Light and dark mode image switching support\n","routePath":"/doc/Utilities/UIImage","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":373},{"id":"properties","text":"Properties","depth":2,"charIndex":858},{"id":"width-number","text":"`width: number`","depth":3,"charIndex":873},{"id":"height-number","text":"`height: number`","depth":3,"charIndex":1024},{"id":"scale-number","text":"`scale: number`","depth":3,"charIndex":1178},{"id":"imageorientation-string","text":"`imageOrientation: string`","depth":3,"charIndex":1313},{"id":"issymbolimage-boolean","text":"`isSymbolImage: boolean`","depth":3,"charIndex":1531},{"id":"renderingmode-automatic--alwaysoriginal--alwaystemplate--unknown","text":"`renderingMode: \"automatic\" | \"alwaysOriginal\" | \"alwaysTemplate\" | \"unknown\"`","depth":3,"charIndex":1722},{"id":"resizingmode-tile--stretch--unknown","text":"`resizingMode: \"tile\" | \"stretch\" | \"unknown\"`","depth":3,"charIndex":2027},{"id":"capinsets--top-number-left-number-bottom-number-right-number-","text":"`capInsets: { top: number, left: number, bottom: number, right: number }`","depth":3,"charIndex":2211},{"id":"flipsforrighttoleftlayoutdirection-boolean","text":"`flipsForRightToLeftLayoutDirection: boolean`","depth":3,"charIndex":2358},{"id":"instance-methods","text":"Instance Methods","depth":2,"charIndex":2505},{"id":"preparingthumbnailsize-size-uiimage--null","text":"`preparingThumbnail(size: Size): UIImage | null`","depth":3,"charIndex":2526},{"id":"withbaselineoffsetoffset-number-uiimage","text":"`withBaselineOffset(offset: number): UIImage`","depth":3,"charIndex":2955},{"id":"withhorizontallyflippedorientation-uiimage","text":"`withHorizontallyFlippedOrientation(): UIImage`","depth":3,"charIndex":3182},{"id":"withtintcolorcolor-string-renderingmode-automatic--alwaysoriginal--alwaystemplate-uiimage--null","text":"`withTintColor(color: string, renderingMode?: \"automatic\" | \"alwaysOriginal\" | \"alwaysTemplate\"): UIImage | null`","depth":3,"charIndex":3371},{"id":"withrenderingmoderenderingmode-automatic--alwaysoriginal--alwaystemplate-uiimage--null","text":"`withRenderingMode(renderingMode: \"automatic\" | \"alwaysOriginal\" | \"alwaysTemplate\"): UIImage | null`","depth":3,"charIndex":3880},{"id":"resizableimagecapinsets-resizingmode-uiimage--null","text":"`resizableImage(capInsets, resizingMode?): UIImage | null`","depth":3,"charIndex":4136},{"id":"renderedincircleradius-number--null-fitentireimage-boolean-uiimage","text":"`renderedInCircle(radius?: number | null, fitEntireImage?: boolean): UIImage`","depth":3,"charIndex":4545},{"id":"renderedinsize--width-number-height-number--source---position--size---uiimage--null","text":"`renderedIn(size: { width: number, height: number }, source?: {  position?: ..., size?: ... }): UIImage | null`","depth":3,"charIndex":5873},{"id":"applysymbolconfigurationconfig-uiimagesymbolconfiguration--uiimagesymbolconfiguration-uiimage--null","text":"`applySymbolConfiguration(config: UIImageSymbolConfiguration | UIImageSymbolConfiguration[]): UIImage | null`","depth":3,"charIndex":6907},{"id":"uiimagesymbolconfiguration","text":"UIImageSymbolConfiguration","depth":2,"charIndex":8624},{"id":"available-static-methods","text":"Available Static Methods","depth":3,"charIndex":8899},{"id":"tojpegdatacompressionquality-number-data--null","text":"`toJPEGData(compressionQuality?: number): Data | null`","depth":3,"charIndex":11726},{"id":"topngdata-data--null","text":"`toPNGData(): Data | null`","depth":3,"charIndex":11963},{"id":"tojpegbase64stringcompressionquality-number-string--null","text":"`toJPEGBase64String(compressionQuality?: number): string | null`","depth":3,"charIndex":12070},{"id":"topngbase64string-string--null","text":"`toPNGBase64String(): string | null`","depth":3,"charIndex":12198},{"id":"static-methods","text":"Static Methods","depth":2,"charIndex":12297},{"id":"uiimagefromdatadata-data-uiimage--null","text":"`UIImage.fromData(data: Data): UIImage | null`","depth":3,"charIndex":12316},{"id":"uiimagefromfilefilepath-string-uiimage--null","text":"`UIImage.fromFile(filePath: string): UIImage | null`","depth":3,"charIndex":12443},{"id":"uiimagefrombase64stringbase64string-string-uiimage--null","text":"`UIImage.fromBase64String(base64String: string): UIImage | null`","depth":3,"charIndex":12568},{"id":"uiimagefromsfsymbolname-string-uiimage--null","text":"`UIImage.fromSFSymbol(name: string): UIImage | null`","depth":3,"charIndex":12683},{"id":"uiimagefromurlurl-string-promiseuiimage--null","text":"`UIImage.fromURL(url: string): Promise<UIImage | null>`","depth":3,"charIndex":12887},{"id":"using-uiimage-in-the-ui","text":"Using UIImage in the UI","depth":2,"charIndex":13101},{"id":"component-definition","text":"Component Definition","depth":3,"charIndex":13194},{"id":"props-definition","text":"Props Definition","depth":3,"charIndex":13289},{"id":"dynamic-image-type","text":"Dynamic Image Type","depth":3,"charIndex":13398},{"id":"example-display-a-single-image","text":"Example: Display a Single Image","depth":3,"charIndex":13557},{"id":"example-light-and-dark-mode","text":"Example: Light and Dark Mode","depth":3,"charIndex":13688},{"id":"common-usage-examples","text":"Common Usage Examples","depth":2,"charIndex":13920},{"id":"1-convert-image-to-base64","text":"1. Convert Image to Base64","depth":3,"charIndex":13946},{"id":"2-compress-and-save-as-jpeg","text":"2. Compress and Save as JPEG","depth":3,"charIndex":14089},{"id":"3-restore-image-from-base64-string","text":"3. Restore Image from Base64 String","depth":3,"charIndex":14285},{"id":"4-convert-png-to-jpeg-and-upload","text":"4. Convert PNG to JPEG and Upload","depth":3,"charIndex":14458},{"id":"5-create-and-tint-an-sf-symbol","text":"5. Create and Tint an SF Symbol","depth":3,"charIndex":14745},{"id":"6-generate-a-thumbnail","text":"6. Generate a Thumbnail","depth":3,"charIndex":14940},{"id":"summary","text":"Summary","depth":2,"charIndex":15131}],"frontmatter":{},"version":"","description":"The UIImage class represents an image object that can be loaded, encoded, converted, and displayed.\nIt supports creating images from file paths, binary data, or Base64 strings and provides multiple format conversion methods (PNG/JPEG).\nUIImage can be displayed directly in an Image component or used with the Data class for storage, uploading, or encryption."},{"title":"BackgroundURLSession","content":"`BackgroundURLSession` provides APIs in the **Scripting app** for creating, resuming, and managing background download and upload tasks that continue running even when your script or app is not active.\n\n> **Availability:** Only available when your script is running in the main app (`Script.env === \"index\"`).\n\n***\n\n## Namespace: `BackgroundURLSession`\n\n### 1) `startDownload(options): URLSessionDownloadTask`\n\n**Description:**\nStarts a new background download task.\n\n**Signature**\n\n```ts\nfunction startDownload(options: {\n  url: string\n  destination: string\n  headers?: Record<string, string>\n  notifyOnFinished?: {\n    success: string\n    failure: string\n  }\n}): URLSessionDownloadTask\n```\n\n**Parameters**\n\n- `url` (`string`): The URL of the file to download.\n- `destination` (`string`): The local file path where the downloaded file will be saved.\n- `headers` (`Record<string, string>`, optional): Custom HTTP headers.\n- `notifyOnFinished` (`{ success: string, failure: string }`, optional): Whether to show a local notification when the download finishes.\n\n**Returns**\n\n- `URLSessionDownloadTask`: A download task object (the task starts automatically).\n\n**Example**\n\n```ts\nconst task = BackgroundURLSession.startDownload({\n  url: 'https://example.com/file.zip',\n  destination: '/var/mobile/Containers/.../Downloads/file.zip',\n  headers: { 'User-Agent': 'Scripting/1.0' },\n  notifyOnFinished: {\n    success: 'Download completed',\n    failure: 'Download failed'\n  }\n})\n\ntask.resum()\n\ntask.onProgress = d => console.log('Progress:', d.progress)\ntask.onFinishDownload = (err, info) => {\n  if (!err) console.log('Download completed at:', info.destination)\n}\n```\n\n***\n\n### 2) `resumeDownload(options): URLSessionDownloadTask`\n\n**Description:**\nResumes a previously paused or interrupted download task using resume data.\n\n**Signature**\n\n```ts\nfunction resumeDownload(options: {\n  resumeData: Data\n  destination: string\n  notifyOnFinished?: {\n    success: string\n    failure: string\n  }\n}): URLSessionDownloadTask\n```\n\n**Parameters**\n\n- `resumeData` (`Data`): The resume data returned by `cancelByProducingResumeData()`.\n- `destination` (`string`): The path to save the resumed download.\n- `notifyOnFinished` (`{ success: string, failure: string }`, optional): Whether to show a local notification when the download finishes.\n\n**Returns**\n\n- `URLSessionDownloadTask`: A resumed download task (starts automatically).\n\n**Example**\n\n```ts\nconst task = BackgroundURLSession.resumeDownload({\n  resumeData,\n  destination: '/.../Downloads/file.zip',\n  notifyOnFinished: {\n    success: 'Resumed download completed',\n    failure: 'Resumed download failed'\n  }\n})\n\ntask.resume()\n\ntask.onFinishDownload = (err, info) => {\n  if (!err) console.log('Resumed download completed:', info.destination)\n}\n```\n\n***\n\n### 3) `getDownloadTasks(): Promise<URLSessionDownloadTask[]>`\n\n**Description:**\nRetrieves all active or pending background download tasks currently managed by the system.\nUseful when your script is restarted or relaunched — you can restore callbacks and monitor ongoing tasks.\n\n**Signature**\n\n```ts\nfunction getDownloadTasks(): Promise<URLSessionDownloadTask[]>\n```\n\n**Returns**\n\n- `Promise<URLSessionDownloadTask[]>`: An array of active `URLSessionDownloadTask` objects.\n\n**Example**\n\n```ts\nconst tasks = await BackgroundURLSession.getDownloadTasks()\nfor (const task of tasks) {\n  console.log('Task ID:', task.id, 'State:', task.state)\n  task.onComplete = err => {\n    if (err) console.error('Download failed:', err)\n  }\n}\n```\n\n***\n\n### 4) `startUpload(options): URLSessionUploadTask`\n\n**Description:**\nStarts a new background upload task.\n\n**Signature**\n\n```ts\nfunction startUpload(options: {\n  filePath: string\n  toURL: string\n  method?: string\n  headers?: Record<string, string>\n  notifyOnFinished?: {\n    success: string\n    failure: string\n  }\n}): URLSessionUploadTask\n```\n\n**Parameters**\n\n- `filePath` (`string`): The local file path to upload.\n- `toURL` (`string`): The destination server URL.\n- `method` (`string`, optional, default `\"POST\"`): The HTTP method to use.\n- `headers` (`Record<string, string>`, optional): Custom HTTP headers.\n- `notifyOnFinished` (`{ success: string, failure: string }`, optional): Whether to show a local notification when the upload finishes.\n\n**Returns**\n\n- `URLSessionUploadTask`: An upload task object (the task starts automatically).\n\n**Example**\n\n```ts\nconst task = BackgroundURLSession.startUpload({\n  filePath: '/.../upload.bin',\n  toURL: 'https://api.example.com/upload',\n  method: 'PUT',\n  headers: { Authorization: 'Bearer token' },\n  notifyOnFinished: {\n    success: 'Upload completed',\n    failure: 'Upload failed'\n  }\n})\n\ntask.resume()\n\ntask.onComplete = err => {\n  if (!err) console.log('Upload completed')\n  else console.error('Upload failed:', err)\n}\n```\n\n***\n\n### 5) `resumeUpload(options): URLSessionUploadTask`\n\n**Description:**\nResumes a paused or failed upload task using previously saved resume data (if supported by the server).\n\n**Signature**\n\n```ts\nfunction resumeUpload(options: {\n  resumeData: Data\n  notifyOnFinished?: {\n    success: string\n    failure: string\n  }\n}): URLSessionUploadTask\n```\n\n**Parameters**\n\n- `resumeData` (`Data`): Resume data returned from a previous incomplete upload.\n- `notifyOnFinished` (`{ success: string, failure: string }`, optional): Whether to show a local notification when the upload finishes.\n\n**Returns**\n\n- `URLSessionUploadTask`: A new resumed upload task (starts automatically).\n\n**Example**\n\n```ts\nconst task = BackgroundURLSession.resumeUpload({\n  resumeData,\n  notifyOnFinished: {\n    success: 'Resumed upload completed',\n    failure: 'Resumed upload failed'\n  }\n})\n\ntask.resume()\n\ntask.onComplete = err => {\n  if (!err) console.log('Resumed upload completed successfully')\n}\n```\n\n***\n\n### 6) `getUploadTasks(): Promise<URLSessionUploadTask[]>`\n\n**Description:**\nRetrieves all active or pending background upload tasks currently managed by the system.\nUse this method after restarting your script to reattach callbacks to ongoing uploads.\n\n**Signature**\n\n```ts\nfunction getUploadTasks(): Promise<URLSessionUploadTask[]>\n```\n\n**Returns**\n\n- `Promise<URLSessionUploadTask[]>`: An array of active `URLSessionUploadTask` objects.\n\n**Example**\n\n```ts\nconst tasks = await BackgroundURLSession.getUploadTasks()\nfor (const task of tasks) {\n  console.log('Task ID:', task.id, 'State:', task.state)\n  task.onComplete = err => {\n    if (err) console.error('Upload failed:', err)\n  }\n}\n```\n\n***\n\n## Usage Notes and Best Practices\n\n- **Start tasks:** Tasks begin in a suspended state, so you need to call `resume()` manually.\n- **Pause and resume:** You can temporarily pause a task using `task.suspend()` and later call `task.resume()` to continue.\n- **Resume support:** Download tasks can generate resume data via `cancelByProducingResumeData()`. Upload resumability depends on server capabilities.\n- **Task restoration:** Even if your script is terminated, ongoing background tasks continue running. When restarted, use `getDownloadTasks()` or `getUploadTasks()` to retrieve them and reattach event handlers.\n- **Local notifications:** The `notifyOnFinished` option only controls whether a notification is shown when a task completes; it does not affect task lifecycle or callbacks.\n","routePath":"/doc/Utilities/URLSession/BackgroundURLSession","lang":"en","toc":[{"id":"namespace-backgroundurlsession","text":"Namespace: `BackgroundURLSession`","depth":2,"charIndex":316},{"id":"1-startdownloadoptions-urlsessiondownloadtask","text":"1) `startDownload(options): URLSessionDownloadTask`","depth":3,"charIndex":354},{"id":"2-resumedownloadoptions-urlsessiondownloadtask","text":"2) `resumeDownload(options): URLSessionDownloadTask`","depth":3,"charIndex":1668},{"id":"3-getdownloadtasks-promiseurlsessiondownloadtask","text":"3) `getDownloadTasks(): Promise<URLSessionDownloadTask[]>`","depth":3,"charIndex":2793},{"id":"4-startuploadoptions-urlsessionuploadtask","text":"4) `startUpload(options): URLSessionUploadTask`","depth":3,"charIndex":3528},{"id":"5-resumeuploadoptions-urlsessionuploadtask","text":"5) `resumeUpload(options): URLSessionUploadTask`","depth":3,"charIndex":4812},{"id":"6-getuploadtasks-promiseurlsessionuploadtask","text":"6) `getUploadTasks(): Promise<URLSessionUploadTask[]>`","depth":3,"charIndex":5791},{"id":"usage-notes-and-best-practices","text":"Usage Notes and Best Practices","depth":2,"charIndex":6489}],"frontmatter":{},"version":"","description":"BackgroundURLSession provides APIs in the Scripting app for creating, resuming, and managing background download and upload tasks that continue running even when your script or app is not active. Availability: Only available when your script is running in the main app (Script.env === \"index\")."},{"title":"URLSessionDownloadTask","content":"`URLSessionDownloadTask` represents a background download task created by\n`BackgroundURLSession.startDownload()` or `BackgroundURLSession.resumeDownload()`.\nIt allows scripts in the **Scripting app** to download files in the foreground or background, and the task can continue even if the script is terminated or the app is suspended.\n\nEach download task is managed by the system and provides detailed state, progress, and event callbacks.\n\n***\n\n## Properties\n\n### `id: string`\n\nA unique identifier for the download task.\nYou can use this ID to recognize or reattach to the same task when your script restarts.\n\n**Example**\n\n```ts\nconsole.log(task.id) // Prints the unique task ID\n```\n\n***\n\n### `state: URLSessionTaskState`\n\nThe current state of the task.\n\nPossible values:\n\n- `\"running\"` — The task is currently downloading.\n- `\"suspended\"` — The task is paused.\n- `\"canceling\"` — The task is being canceled.\n- `\"completed\"` — The task has finished.\n- `\"unknown\"` — The state is unknown (usually when the task has been removed by the system).\n\n**Example**\n\n```ts\nif (task.state === \"running\") {\n  console.log(\"Download in progress…\")\n}\n```\n\n***\n\n### `progress: URLSessionProgress`\n\nReal-time progress information for the task.\n\nContains the following fields:\n\n- `fractionCompleted: number` — Progress fraction between `0` and `1`.\n- `totalUnitCount: number` — Total number of bytes to download.\n- `completedUnitCount: number` — Number of bytes downloaded so far.\n- `isFinished: boolean` — Whether the task has completed.\n- `estimatedTimeRemaining: number | null` — Estimated remaining time (in seconds), or `null` if unknown.\n\n**Example**\n\n```ts\nconst p = task.progress\nconsole.log(`Completed ${(p.fractionCompleted * 100).toFixed(2)}%`)\n```\n\n***\n\n### `priority: number`\n\nThe priority of the download task (range: `0.0–1.0`).\nDefaults to `0.5`.\nHigher values increase the likelihood that the system will prioritize this task.\n\n**Example**\n\n```ts\ntask.priority = 0.8\n```\n\n***\n\n### `earliestBeginDate?: Date | null`\n\nThe earliest date when the download task is allowed to begin.\nUseful for delaying downloads or optimizing bandwidth usage.\n\n**Example**\n\n```ts\ntask.earliestBeginDate = new Date(Date.now() + 10_000) // start after 10 seconds\n```\n\n***\n\n### `countOfBytesClientExpectsToSend: number`\n\nA best-guess upper bound on the number of bytes expected to send (for system estimation only).\n\n### `countOfBytesClientExpectsToReceive: number`\n\nA best-guess upper bound on the number of bytes expected to receive (for system estimation only).\n\n***\n\n## Callbacks\n\n### `onProgress?: (details) => void`\n\nCalled periodically as the download progresses.\n\n**details** includes:\n\n- `progress: number` — Progress fraction between `0` and `1`.\n- `bytesWritten: number` — Bytes written since the last update.\n- `totalBytesWritten: number` — Total bytes downloaded so far.\n- `totalBytesExpectedToWrite: number` — Total expected bytes for the download.\n\n**Example**\n\n```ts\ntask.onProgress = details => {\n  console.log(`Download progress: ${(details.progress * 100).toFixed(1)}%`)\n}\n```\n\n***\n\n### `onFinishDownload?: (error, details) => void`\n\nCalled when the download finishes (successfully or with an error).\n\n**Parameters**\n\n- `error: Error | null` — Error object if the download failed, otherwise `null`.\n- `details.temporary: string` — The temporary file path used by the system.\n- `details.destination: string | null` — The final destination path (if successful) or `null` if the download failed.\n\n> The downloaded file is automatically moved to the specified `destination` path upon completion.\n\n**Example**\n\n```ts\ntask.onFinishDownload = (error, details) => {\n  if (error) {\n    console.error(\"Download failed:\", error)\n  } else {\n    console.log(\"Download completed at:\", details.destination)\n  }\n}\n```\n\n***\n\n### `onComplete?: (error, resumeData) => void`\n\nCalled when the task finishes completely (either successfully or unsuccessfully).\n\n**Parameters**\n\n- `error: Error | null` — Error object if the download failed, otherwise `null`.\n- `resumeData: Data | null` — Resume data available if the download can be resumed later.\n\n**Example**\n\n```ts\ntask.onComplete = (error, resumeData) => {\n  if (error) {\n    console.error(\"Download error:\", error)\n    if (resumeData) {\n      console.log(\"Resume data is available for resuming the download\")\n    }\n  } else {\n    console.log(\"Download completed successfully\")\n  }\n}\n```\n\n***\n\n## Methods\n\n### `suspend(): void`\n\nSuspends the download task.\nWhile suspended, the task produces no network activity and is not subject to timeouts.\nYou can later call `resume()` to continue.\n\n**Example**\n\n```ts\ntask.suspend()\nconsole.log(\"Task suspended\")\n```\n\n***\n\n### `resume(): void`\n\nResumes a suspended task.\nCall this only if the task is in a `\"suspended\"` state.\n\n**Example**\n\n```ts\ntask.resume()\nconsole.log(\"Task resumed\")\n```\n\n***\n\n### `cancel(): void`\n\nCancels the download task immediately.\nThe task enters the `\"canceling\"` state, and the `onComplete` callback is triggered with an error once cancellation finishes.\n\n**Example**\n\n```ts\ntask.cancel()\nconsole.log(\"Task canceled\")\n```\n\n***\n\n### `cancelByProducingResumeData(): Promise<Data | null>`\n\nCancels the download task and attempts to produce resume data.\nIf resumable, the returned promise resolves to `Data` which can be used later with\n`BackgroundURLSession.resumeDownload()`.\nOtherwise, it resolves to `null`.\n\n**Example**\n\n```ts\nconst resumeData = await task.cancelByProducingResumeData()\nif (resumeData) {\n  console.log(\"Download canceled; resume data available for later resumption\")\n}\n```\n\n***\n\n## Example Usage\n\n```ts\nconst task = BackgroundURLSession.startDownload({\n  url: \"https://example.com/largefile.zip\",\n  destination: \"/.../Downloads/largefile.zip\",\n  notifyOnFinished: true\n})\n\ntask.onProgress = ({ progress }) => {\n  console.log(`Progress: ${(progress * 100).toFixed(1)}%`)\n}\n\ntask.onFinishDownload = (error, details) => {\n  if (error) {\n    console.error(\"Download failed:\", error)\n  } else {\n    console.log(\"Download completed at:\", details.destination)\n  }\n}\n\ntask.onComplete = async (error, resumeData) => {\n  if (error && resumeData) {\n    console.log(\"Resume data available — save it to resume later\")\n  }\n}\n```\n\n***\n\n## Notes and Best Practices\n\n- You need to call `resume()` start the download when you create a task by `BackgroundURLSession.startDownload()`.\n- Use `cancelByProducingResumeData()` to implement **download resumption**.\n- Even if the script exits or is terminated, downloads continue in the background.\n- After restarting the script, use `BackgroundURLSession.getDownloadTasks()` to recover existing tasks and reattach callbacks.\n- For long-running tasks, use `notifyOnFinished` to inform the user when a download completes.\n","routePath":"/doc/Utilities/URLSession/URLSessionDownloadTask","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":446},{"id":"id-string","text":"`id: string`","depth":3,"charIndex":461},{"id":"state-urlsessiontaskstate","text":"`state: URLSessionTaskState`","depth":3,"charIndex":691},{"id":"progress-urlsessionprogress","text":"`progress: URLSessionProgress`","depth":3,"charIndex":1147},{"id":"priority-number","text":"`priority: number`","depth":3,"charIndex":1749},{"id":"earliestbegindate-date--null","text":"`earliestBeginDate?: Date | null`","depth":3,"charIndex":1977},{"id":"countofbytesclientexpectstosend-number","text":"`countOfBytesClientExpectsToSend: number`","depth":3,"charIndex":2250},{"id":"countofbytesclientexpectstoreceive-number","text":"`countOfBytesClientExpectsToReceive: number`","depth":3,"charIndex":2393},{"id":"callbacks","text":"Callbacks","depth":2,"charIndex":2547},{"id":"onprogress-details--void","text":"`onProgress?: (details) => void`","depth":3,"charIndex":2561},{"id":"onfinishdownload-error-details--void","text":"`onFinishDownload?: (error, details) => void`","depth":3,"charIndex":3078},{"id":"oncomplete-error-resumedata--void","text":"`onComplete?: (error, resumeData) => void`","depth":3,"charIndex":3803},{"id":"methods","text":"Methods","depth":2,"charIndex":4421},{"id":"suspend-void","text":"`suspend(): void`","depth":3,"charIndex":4433},{"id":"resume-void","text":"`resume(): void`","depth":3,"charIndex":4689},{"id":"cancel-void","text":"`cancel(): void`","depth":3,"charIndex":4865},{"id":"cancelbyproducingresumedata-promisedata--null","text":"`cancelByProducingResumeData(): Promise<Data | null>`","depth":3,"charIndex":5125},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":5594},{"id":"notes-and-best-practices","text":"Notes and Best Practices","depth":2,"charIndex":6236}],"frontmatter":{},"version":"","description":"URLSessionDownloadTask represents a background download task created by\nBackgroundURLSession.startDownload() or BackgroundURLSession.resumeDownload().\nIt allows scripts in the Scripting app to download files in the foreground or background, and the task can continue even if the script is terminated or the app is suspended. Each download task is managed by the system and provides detailed state, progress, and event callbacks."},{"title":"URLSessionUploadTask","content":"`URLSessionUploadTask` represents a background upload task instance.\nIt is created via `BackgroundURLSession.startUpload()` or `BackgroundURLSession.resumeUpload()` and allows file uploads to continue in the **Scripting app**, even when the app is in the background or the script is terminated.\n\nEach upload task provides real-time state, progress, and event callbacks for tracking upload activity.\n\n***\n\n## Properties\n\n### `id: string`\n\nA unique identifier for the upload task.\nThis value can be used to recognize and reattach to the same task after restarting a script.\n\n**Example**\n\n```ts\nconsole.log(task.id) // Prints the unique task ID\n```\n\n***\n\n### `state: URLSessionTaskState`\n\nThe current state of the upload task.\n\nPossible values:\n\n- `\"running\"` — The task is currently uploading\n- `\"suspended\"` — The task is paused\n- `\"canceling\"` — The task is being canceled\n- `\"completed\"` — The task has completed\n- `\"unknown\"` — The task’s state is unknown (usually if removed by the system)\n\n**Example**\n\n```ts\nif (task.state === \"running\") {\n  console.log(\"Upload in progress…\")\n}\n```\n\n***\n\n### `progress: URLSessionProgress`\n\nReal-time progress information for the upload task.\n\nContains the following fields:\n\n- `fractionCompleted: number` — Completion ratio between `0` and `1`\n- `totalUnitCount: number` — Total number of bytes expected to upload\n- `completedUnitCount: number` — Number of bytes uploaded so far\n- `isFinished: boolean` — Whether the task has finished\n- `estimatedTimeRemaining: number | null` — Estimated remaining time in seconds (may be `null`)\n\n**Example**\n\n```ts\nconst p = task.progress\nconsole.log(`Upload progress: ${(p.fractionCompleted * 100).toFixed(1)}%`)\n```\n\n***\n\n### `priority: number`\n\nThe upload priority (range: `0.0–1.0`).\nDefaults to `0.5`.\nHigher values indicate a higher scheduling priority for the system.\n\n**Example**\n\n```ts\ntask.priority = 0.8\n```\n\n***\n\n### `earliestBeginDate?: Date | null`\n\nSpecifies the earliest date and time when the upload task may begin.\nUseful for delaying uploads until conditions like network availability or power are favorable.\n\n**Example**\n\n```ts\ntask.earliestBeginDate = new Date(Date.now() + 5000) // Begin after 5 seconds\n```\n\n***\n\n### `countOfBytesClientExpectsToSend: number`\n\nA best-guess upper bound of bytes expected to send (for system estimation only).\n\n### `countOfBytesClientExpectsToReceive: number`\n\nA best-guess upper bound of bytes expected to receive (for system estimation only).\n\n***\n\n## Callbacks\n\n### `onReceiveData?: (data: Data) => void`\n\nTriggered when response data is received from the server.\nThe `data` parameter contains binary data from the server.\n\n**Example**\n\n```ts\ntask.onReceiveData = data => {\n  console.log(\"Received response data:\", data.length, \"bytes\")\n}\n```\n\n***\n\n### `onComplete?: (error: Error | null, resumeData: Data | null) => void`\n\nTriggered when the upload task finishes, whether successfully or with an error.\n\n**Parameters**\n\n- `error`: If the upload failed, contains the error object; otherwise `null`.\n- `resumeData`: If the upload failed and can be resumed, contains resume data (`Data`); otherwise `null`.\n\n**Example**\n\n```ts\ntask.onComplete = (error, resumeData) => {\n  if (error) {\n    console.error(\"Upload failed:\", error)\n    if (resumeData) {\n      console.log(\"Upload is resumable — save resumeData for later recovery\")\n    }\n  } else {\n    console.log(\"Upload completed successfully!\")\n  }\n}\n```\n\n***\n\n## Methods\n\n### `suspend(): void`\n\nPauses the upload task.\nA suspended task produces no network traffic and isn’t subject to timeouts.\nUse `resume()` to continue the upload later.\n\n**Example**\n\n```ts\ntask.suspend()\nconsole.log(\"Task suspended\")\n```\n\n***\n\n### `resume(): void`\n\nResumes a suspended upload task.\nNewly-initialized tasks begin in a suspended state, so you need to call this method to start the task.\n\n**Example**\n\n```ts\ntask.resume()\nconsole.log(\"Upload resumed\")\n```\n\n***\n\n### `cancel(): void`\n\nCancels the upload task immediately.\nThe task enters the `\"canceling\"` state, and the `onComplete` callback is invoked with an error once cancellation finishes.\n\n**Example**\n\n```ts\ntask.cancel()\nconsole.log(\"Task canceled\")\n```\n\n***\n\n## Example Usage\n\n```ts\nconst task = BackgroundURLSession.startUpload({\n  filePath: \"/path/to/file.txt\",\n  toURL: \"https://api.example.com/upload\",\n  method: \"POST\",\n  headers: { Authorization: \"Bearer my_token\" },\n  notifyOnFinished: true\n})\n\ntask.resume()\n\ntask.onReceiveData = data => {\n  console.log(\"Received response:\", data.length, \"bytes\")\n}\n\ntask.onComplete = (error, resumeData) => {\n  if (error) {\n    console.error(\"Upload error:\", error)\n    if (resumeData) console.log(\"Resume data available — can retry later\")\n  } else {\n    console.log(\"Upload completed successfully\")\n  }\n}\n```\n\n***\n\n## Notes and Best Practices\n\n- You can pause a task with `suspend()` and later resume it with `resume()`.\n- Some servers support resumable uploads; if supported, you can use `resumeData` for recovery.\n- Uploads can continue even if the script or app is suspended or terminated.\n- Use `BackgroundURLSession.getUploadTasks()` to retrieve and reattach callbacks to ongoing uploads after restarting your script.\n- Setting `notifyOnFinished` allows a local notification to alert users when the upload completes.\n- When including authorization information (e.g., `Authorization` headers), ensure credentials are stored and managed securely.\n","routePath":"/doc/Utilities/URLSession/URLSessionUploadTask","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":405},{"id":"id-string","text":"`id: string`","depth":3,"charIndex":420},{"id":"state-urlsessiontaskstate","text":"`state: URLSessionTaskState`","depth":3,"charIndex":652},{"id":"progress-urlsessionprogress","text":"`progress: URLSessionProgress`","depth":3,"charIndex":1094},{"id":"priority-number","text":"`priority: number`","depth":3,"charIndex":1700},{"id":"earliestbegindate-date--null","text":"`earliestBeginDate?: Date | null`","depth":3,"charIndex":1901},{"id":"countofbytesclientexpectstosend-number","text":"`countOfBytesClientExpectsToSend: number`","depth":3,"charIndex":2212},{"id":"countofbytesclientexpectstoreceive-number","text":"`countOfBytesClientExpectsToReceive: number`","depth":3,"charIndex":2341},{"id":"callbacks","text":"Callbacks","depth":2,"charIndex":2481},{"id":"onreceivedata-data-data--void","text":"`onReceiveData?: (data: Data) => void`","depth":3,"charIndex":2495},{"id":"oncomplete-error-error--null-resumedata-data--null--void","text":"`onComplete?: (error: Error | null, resumeData: Data | null) => void`","depth":3,"charIndex":2782},{"id":"methods","text":"Methods","depth":2,"charIndex":3442},{"id":"suspend-void","text":"`suspend(): void`","depth":3,"charIndex":3454},{"id":"resume-void","text":"`resume(): void`","depth":3,"charIndex":3697},{"id":"cancel-void","text":"`cancel(): void`","depth":3,"charIndex":3929},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":4185},{"id":"notes-and-best-practices","text":"Notes and Best Practices","depth":2,"charIndex":4787}],"frontmatter":{},"version":"","description":"URLSessionUploadTask represents a background upload task instance.\nIt is created via BackgroundURLSession.startUpload() or BackgroundURLSession.resumeUpload() and allows file uploads to continue in the Scripting app, even when the app is in the background or the script is terminated. Each upload task provides real-time state, progress, and event callbacks for tracking upload activity."},{"title":"UUID","content":"The `UUID` module provides an easy way to generate unique UUID strings.\n\n***\n\n## Functions\n\n### `string(): string`\n\nGenerates a new UUID (Universally Unique Identifier) in string format.\n\n- **Returns**:\\\n  A UUID string (e.g., `\"550e8400-e29b-41d4-a716-446655440000\"`).\n\n***\n\n## Usage Example\n\n```tsx\nconst id = UUID.string()\nconsole.log('Generated UUID:', id)\n```\n","routePath":"/doc/Utilities/UUID","lang":"en","toc":[{"id":"functions","text":"Functions","depth":2,"charIndex":78},{"id":"string-string","text":"`string(): string`","depth":3,"charIndex":92},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":276}],"frontmatter":{},"version":"","description":"The UUID module provides an easy way to generate unique UUID strings."},{"title":"WebScoket","content":"The `WebSocket` class provides an interface for creating and managing WebSocket connections, allowing for real-time communication with a server. You can send and receive both text and binary data, including byte buffers, over the WebSocket connection.\n\n***\n\n## Overview\n\nWebSocket is a communication protocol that allows full-duplex communication between a client and a server. This makes it ideal for real-time applications like live messaging, notifications, or streaming data.\n\n***\n\n## Class: `WebSocket`\n\n### Constructor\n\n#### `new WebSocket(url: string)`\n\nCreates a new WebSocket connection to the specified URL and attempts to establish a connection immediately.\n\n- **Parameters**:\n  - `url: string`: The WebSocket server URL to connect to. Example: `\"ws://example.com/socket\"` or `\"wss://example.com/socket\"` for secure WebSocket connections.\n\n- **Returns**: A `WebSocket` object representing the connection.\n\n***\n\n### Properties\n\n- **`url: string`**\\\n  The URL to which the WebSocket is connected. This property is read-only.\n\n- **`onopen?: () => void`**\\\n  Optional callback function triggered when the WebSocket connection is successfully established.\n\n- **`onerror?: (error: Error) => void`**\\\n  Optional callback function triggered when an error occurs during the WebSocket connection or communication.\n\n- **`onmessage?: (message: string | Data) => void`**\\\n  Optional callback function triggered when a message is received from the WebSocket server. The `message` parameter can be either a string or binary data, represented by the `Data` class.\n\n- **`onclose?: (reason?: string) => void`**\\\n  Optional callback function triggered when the WebSocket connection is closed. The `reason` parameter provides an optional explanation for the closure.\n\n***\n\n### Methods\n\n#### `send(message: string | Data): void`\n\nSends data to the server over the WebSocket connection.\n\n- **Parameters**:\n  - `message: string | Data`: The data to be sent to the server. It can be a string or an instance of the `Data` class.\n\n- **Returns**: `void`\n\n#### `close(code?: 1000 | 1001 | 1002 | 1003, reason?: string): void`\n\nCloses the WebSocket connection. If the connection is already closed, this method does nothing.\n\n- **Parameters**:\n  - `code?: 1000 | 1001 | 1002 | 1003`: An optional WebSocket connection close code. Common codes include:\n    - `1000`: Normal closure\n    - `1001`: Going away\n    - `1002`: Protocol error\n    - `1003`: Unsupported data type\n  - `reason?: string`: An optional reason for closing the connection. This string must be no longer than 123 bytes (UTF-8 encoded).\n\n- **Returns**: `void`\n\n***\n\n### Event Handling\n\nYou can listen for WebSocket events using `addEventListener` and remove event listeners with `removeEventListener`.\n\n#### `addEventListener(event: \"open\", listener: () => void): void`\n\nAdds an event listener for the `\"open\"` event, triggered when the WebSocket connection is established.\n\n#### `addEventListener(event: \"error\", listener: (error: Error) => void): void`\n\nAdds an event listener for the `\"error\"` event, triggered when an error occurs during the WebSocket connection.\n\n#### `addEventListener(event: \"message\", listener: (message: string | Data) => void): void`\n\nAdds an event listener for the `\"message\"` event, triggered when a message is received from the WebSocket server.\n\n#### `addEventListener(event: \"close\", listener: (reason?: string) => void): void`\n\nAdds an event listener for the `\"close\"` event, triggered when the WebSocket connection is closed.\n\n#### `removeEventListener(event: \"open\", listener: () => void): void`\n\nRemoves an event listener for the `\"open\"` event.\n\n#### `removeEventListener(event: \"error\", listener: (error: Error) => void): void`\n\nRemoves an event listener for the `\"error\"` event.\n\n#### `removeEventListener(event: \"message\", listener: (message: string | Data) => void): void`\n\nRemoves an event listener for the `\"message\"` event.\n\n#### `removeEventListener(event: \"close\", listener: (reason?: string) => void): void`\n\nRemoves an event listener for the `\"close\"` event.\n\n***\n\n## Example Usage\n\n### Establishing a WebSocket Connection\n\n```ts\nconst ws = new WebSocket(\"wss://example.com/socket\")\n\n// Set up event listeners\nws.addEventListener(\"open\", () => {\n  console.log(\"Connection established!\")\n  ws.send(\"Hello, Server!\")\n})\n\nws.addEventListener(\"message\", (message) => {\n  console.log(\"Received message:\", message)\n})\n\nws.addEventListener(\"error\", (error) => {\n  console.log(\"WebSocket error:\", error)\n})\n\nws.addEventListener(\"close\", (reason) => {\n  console.log(\"Connection closed:\", reason)\n})\n```\n\n### Sending a String Message\n\n```ts\nconst ws = new WebSocket(\"wss://example.com/socket\")\n\nws.addEventListener(\"open\", () => {\n  ws.send(\"Hello, this is a test message!\")\n})\n```\n\n### Sending Binary Data Using `Data`\n\n```ts\nconst ws = new WebSocket(\"wss://example.com/socket\")\n\nws.addEventListener(\"open\", () => {\n  const data = Data.fromString(\"some message\")\n  ws.send(data) // Send binary data\n})\n```\n\n### Handling Binary Data\n\n```ts\nconst ws = new WebSocket(\"wss://example.com/socket\")\n\nws.addEventListener(\"message\", (message) => {\n  if (message instanceof Data) {\n    const byteArray = message.getBytes()\n    if (byteArray) {\n      console.log(\"Received binary data:\", byteArray)\n    }\n  }\n})\n```\n\n### Closing the WebSocket Connection\n\n```ts\nconst ws = new WebSocket(\"wss://example.com/socket\")\n\nws.addEventListener(\"open\", () => {\n  console.log(\"Connection established!\")\n  // Close the connection with a custom reason\n  ws.close(1000, \"Closing connection after test\")\n})\n```\n\n***\n\n## Notes\n\n- The `send()` method can handle both text and binary data. For binary data, you can use the `Data` class to handle the byte buffer.\n- For binary data, ensure that your WebSocket server is capable of handling binary data, such as `ArrayBuffer` or `Uint8Array`.\n- The `close()` method can take a `code` and an optional `reason` to specify how the WebSocket connection should close.\n","routePath":"/doc/Utilities/WebScoket","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":258},{"id":"class-websocket","text":"Class: `WebSocket`","depth":2,"charIndex":486},{"id":"constructor","text":"Constructor","depth":3,"charIndex":509},{"id":"new-websocketurl-string","text":"`new WebSocket(url: string)`","depth":4,"charIndex":526},{"id":"properties","text":"Properties","depth":3,"charIndex":922},{"id":"methods","text":"Methods","depth":3,"charIndex":1764},{"id":"sendmessage-string--data-void","text":"`send(message: string | Data): void`","depth":4,"charIndex":1777},{"id":"closecode-1000--1001--1002--1003-reason-string-void","text":"`close(code?: 1000 | 1001 | 1002 | 1003, reason?: string): void`","depth":4,"charIndex":2039},{"id":"event-handling","text":"Event Handling","depth":3,"charIndex":2612},{"id":"addeventlistenerevent-open-listener---void-void","text":"`addEventListener(event: \"open\", listener: () => void): void`","depth":4,"charIndex":2749},{"id":"addeventlistenerevent-error-listener-error-error--void-void","text":"`addEventListener(event: \"error\", listener: (error: Error) => void): void`","depth":4,"charIndex":2921},{"id":"addeventlistenerevent-message-listener-message-string--data--void-void","text":"`addEventListener(event: \"message\", listener: (message: string | Data) => void): void`","depth":4,"charIndex":3115},{"id":"addeventlistenerevent-close-listener-reason-string--void-void","text":"`addEventListener(event: \"close\", listener: (reason?: string) => void): void`","depth":4,"charIndex":3323},{"id":"removeeventlistenerevent-open-listener---void-void","text":"`removeEventListener(event: \"open\", listener: () => void): void`","depth":4,"charIndex":3507},{"id":"removeeventlistenerevent-error-listener-error-error--void-void","text":"`removeEventListener(event: \"error\", listener: (error: Error) => void): void`","depth":4,"charIndex":3629},{"id":"removeeventlistenerevent-message-listener-message-string--data--void-void","text":"`removeEventListener(event: \"message\", listener: (message: string | Data) => void): void`","depth":4,"charIndex":3765},{"id":"removeeventlistenerevent-close-listener-reason-string--void-void","text":"`removeEventListener(event: \"close\", listener: (reason?: string) => void): void`","depth":4,"charIndex":3915},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":4059},{"id":"establishing-a-websocket-connection","text":"Establishing a WebSocket Connection","depth":3,"charIndex":4077},{"id":"sending-a-string-message","text":"Sending a String Message","depth":3,"charIndex":4589},{"id":"sending-binary-data-using-data","text":"Sending Binary Data Using `Data`","depth":3,"charIndex":4767},{"id":"handling-binary-data","text":"Handling Binary Data","depth":3,"charIndex":4992},{"id":"closing-the-websocket-connection","text":"Closing the WebSocket Connection","depth":3,"charIndex":5291},{"id":"notes","text":"Notes","depth":2,"charIndex":5576}],"frontmatter":{},"version":"","description":"The WebSocket class provides an interface for creating and managing WebSocket connections, allowing for real-time communication with a server. You can send and receive both text and binary data, including byte buffers, over the WebSocket connection."},{"title":"socket.io","content":"The `Socket.IO` API provides robust tools for managing real-time, bidirectional communication between clients and servers. It includes a `SocketManager` for handling multiple namespaces and a `SocketIOClient` for individual socket connections. This document provides an overview of the API, including setup, configuration, and usage.\n\n***\n\n## Getting Started\n\nThe `Socket.IO` API allows you to create and manage WebSocket connections using a `SocketManager`. Each `SocketManager` can handle multiple namespaces and configurations.\n\n### Example:\n\n```typescript\n// Create a SocketManager instance\nconst manager = new SocketManager(\"http://localhost:8080\", {\n    reconnects: true,\n    reconnectAttempts: 5,\n    compress: true\n})\n\n// Access the default namespace socket\nconst defaultSocket = manager.defaultSocket\n\n// Create a socket for a specific namespace\nconst roomASocket = manager.socket(\"/roomA\")\n```\n\n***\n\n## API Reference\n\n### SocketManager\n\n#### Constructor\n\n**`constructor(url: string, config?: SocketManagerConfig)`**\n\n- **`url`**: The URL of the Socket.IO server.\n- **`config`**: Optional configuration object.\n\n#### Properties\n\n- **`socketURL: string`**: The server URL.\n- **`status: SocketIOStatus`**: The manager's connection status (`connected`, `connecting`, `disconnected`, etc.).\n- **`defaultSocket: SocketIOClient`**: The socket for the default namespace (`\"/\"`).\n\n#### Methods\n\n- **`socket(namespace: string): SocketIOClient`**\n  - Returns a `SocketIOClient` for the specified namespace.\n\n- **`setConfigs(config: SocketManagerConfig): void`**\n  - Updates the manager's configuration.\n\n- **`disconnect(): void`**\n  - Disconnects all sockets managed by this instance.\n\n- **`reconnect(): void`**\n  - Attempts to reconnect to the server.\n\n### SocketIOClient\n\n#### Properties\n\n- **`id: string | null`**: The unique identifier for the socket connection.\n- **`status: SocketIOStatus`**: The client's connection status (`connected`, `connecting`, etc.).\n\n#### Methods\n\n- **`connect(): void`**\n  - Initiates a connection.\n\n- **`disconnect(): void`**\n  - Disconnects the socket.\n\n- **`emit(event: string, data: any): void`**\n  - Sends an event to the server with associated data.\n\n- **`on(event: string, callback: (data: any[], ack: (value?: any) => void) => void): void`**\n  - Registers an event listener.\n\n***\n\n## Configuration\n\nThe `SocketManagerConfig` object allows you to customize connection behavior.\n\n### Key Options:\n\n- **`compress`**: Enables compression for WebSocket transport.\n- **`connectParams`**: A dictionary of GET parameters included in the connection URL.\n- **`cookies`**: An array of cookies to send during the initial connection.\n- **`forceNew`**: Ensures a new engine is created for every connection.\n- **`reconnects`**: Enables automatic reconnection.\n- **`reconnectAttempts`**: Sets the maximum number of reconnection attempts.\n- **`reconnectWait`**: Minimum time (in seconds) between reconnection attempts.\n\n### Example:\n\n```typescript\nconst config: SocketManagerConfig = {\n    compress: true,\n    reconnects: true,\n    reconnectAttempts: 5,\n    reconnectWait: 2,\n    extraHeaders: {\n        Authorization: \"Bearer token\"\n    }\n}\nconst manager = new SocketManager(\"http://example.com\", config)\n```\n\n***\n\n## Common Use Cases\n\n### Emit and Listen to Events\n\n```typescript\nconst socket = manager.defaultSocket\n\nsocket.on(\"connect\", () => {\n    console.log(\"Connected to server\")\n    socket.emit(\"joinRoom\", { room: \"roomA\" })\n})\n\nsocket.on(\"message\", (data) => {\n    console.log(\"Message received:\", data)\n})\n```\n\n### Handle Reconnection\n\n```typescript\nmanager.setConfigs({ reconnects: true, reconnectAttempts: 10 })\n\nmanager.defaultSocket.on(\"reconnect\", () => {\n    console.log(\"Reconnected to server\")\n})\n```\n\n### Use Namespaces\n\n```typescript\nconst chatSocket = manager.socket(\"/chat\")\n\nchatSocket.on(\"newMessage\", (data) => {\n    console.log(\"New message in chat:\", data)\n})\n```\n\n***\n\n## Best Practices\n\n1. **Manage Lifecycles:** Always call `disconnect()` when sockets are no longer needed.\n2. **Namespace Isolation:** Use separate namespaces for logically distinct communication channels.\n3. **Reconnection Strategies:** Configure reconnection parameters based on your app's requirements.\n4. **Error Handling:** Register an `on(\"error\")` handler to gracefully handle connection issues.\n5. **Secure Connections:** Use secure WebSocket (WSS) for sensitive data and configure `secure: true`.\n\n***\n\n## Full Example\n\n```typescript\n// Create a SocketManager with configuration\nconst manager = new SocketManager(\"https://example.com\", {\n    reconnects: true,\n    reconnectAttempts: -1,\n    reconnectWait: 1\n})\n\n// Access the default namespace\nconst socket = manager.defaultSocket\n\n// Register event handlers\nsocket.on(\"connect\", () => {\n    console.log(\"Connected to server\")\n    socket.emit(\"join\", { room: \"lobby\" })\n})\n\nsocket.on(\"message\", (data) => {\n    console.log(\"Message received:\", data)\n})\n\nsocket.on(\"disconnect\", () => {\n    console.log(\"Disconnected from server\")\n})\n\n// Emit a custom event\nsocket.emit(\"sendMessage\", { text: \"Hello, world!\" })\n\n// Disconnect when done\nsetTimeout(() => {\n    manager.disconnect()\n}, 60000)\n```\n","routePath":"/doc/Utilities/socket.io","lang":"en","toc":[{"id":"getting-started","text":"Getting Started","depth":2,"charIndex":340},{"id":"example","text":"Example:","depth":3,"charIndex":532},{"id":"api-reference","text":"API Reference","depth":2,"charIndex":910},{"id":"socketmanager","text":"SocketManager","depth":3,"charIndex":928},{"id":"constructor","text":"Constructor","depth":4,"charIndex":947},{"id":"properties","text":"Properties","depth":4,"charIndex":1121},{"id":"methods","text":"Methods","depth":4,"charIndex":1382},{"id":"socketioclient","text":"SocketIOClient","depth":3,"charIndex":1753},{"id":"properties-1","text":"Properties","depth":4,"charIndex":1773},{"id":"methods-1","text":"Methods","depth":4,"charIndex":1965},{"id":"configuration","text":"Configuration","depth":2,"charIndex":2321},{"id":"key-options","text":"Key Options:","depth":3,"charIndex":2418},{"id":"example-1","text":"Example:","depth":3,"charIndex":2943},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":3239},{"id":"emit-and-listen-to-events","text":"Emit and Listen to Events","depth":3,"charIndex":3260},{"id":"handle-reconnection","text":"Handle Reconnection","depth":3,"charIndex":3546},{"id":"use-namespaces","text":"Use Namespaces","depth":3,"charIndex":3745},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":3922},{"id":"full-example","text":"Full Example","depth":2,"charIndex":4434}],"frontmatter":{},"version":"","description":"The Socket.IO API provides robust tools for managing real-time, bidirectional communication between clients and servers. It includes a SocketManager for handling multiple namespaces and a SocketIOClient for individual socket connections. This document provides an overview of the API, including setup, configuration, and usage."},{"title":"Animation and Transition","content":"Scripting Animation & Transition System\n\n# Animation Class\n\nThe `Animation` class describes how values animate in time.\n\n## Factory Methods\n\n### `Animation.default()`\n\nCreates a default system animation.\n\n```ts\nstatic default(): Animation\n```\n\n***\n\n### `Animation.linear(duration?)`\n\n```ts\nstatic linear(duration?: number | null): Animation\n```\n\nConstant-speed animation.\n\n***\n\n### `Animation.easeIn(duration?)`\n\n```ts\nstatic easeIn(duration?: number | null): Animation\n```\n\n***\n\n### `Animation.easeOut(duration?)`\n\n```ts\nstatic easeOut(duration?: number | null): Animation\n```\n\n***\n\n### `Animation.bouncy(options?)`\n\n```ts\nstatic bouncy(options?: {\n  duration?: number\n  extraBounce?: number\n}): Animation\n```\n\nSpring-like animation with additional bounce.\n\n***\n\n### `Animation.smooth(options?)`\n\n```ts\nstatic smooth(options?: {\n  duration?: number\n  extraBounce?: number\n}): Animation\n```\n\n***\n\n### `Animation.snappy(options?)`\n\n```ts\nstatic snappy(options?: {\n  duration?: number\n  extraBounce?: number\n}): Animation\n```\n\n***\n\n### `Animation.spring(options?)`\n\nSupports two mutually exclusive modes.\n\n```ts\nstatic spring(options?: {\n  blendDuration?: number\n} & (\n  | {\n      duration?: number\n      bounce?: number\n      response?: never\n      dampingFraction?: never\n    }\n  | {\n      response?: number\n      dampingFraction?: number\n      duration?: never\n      bounce?: never\n    }\n)): Animation\n```\n\n***\n\n### `Animation.interactiveSpring(options?)`\n\n```ts\nstatic interactiveSpring(options?: {\n  response?: number\n  dampingFraction?: number\n  blendDuration?: number\n}): Animation\n```\n\n***\n\n### `Animation.interpolatingSpring(options?)`\n\n```ts\nstatic interpolatingSpring(options?: {\n  mass?: number\n  stiffness: number\n  damping: number\n  initialVelocity?: number\n} | {\n  duration?: number\n  bounce?: number\n  initialVelocity?: number\n  mass?: never\n  stiffness?: never\n  damping?: never\n}): Animation\n```\n\n***\n\n## Modifier Methods\n\n### `.delay(time)`\n\n```ts\ndelay(time: number): Animation\n```\n\n### `.repeatCount(count, autoreverses)`\n\n```ts\nrepeatCount(count: number, autoreverses?: boolean): Animation\n```\n\n### `.repeatForever(autoreverses)`\n\n```ts\nrepeatForever(autoreverses?: boolean): Animation\n```\n\n***\n\n# Transition Class\n\n`Transition` describes how a view enters or leaves the hierarchy.\n\n## Instance Methods\n\n### `.animation(animation)`\n\nAttach a specific animation to a transition.\n\n```ts\nanimation(animation?: Animation): Transition\n```\n\n### `.combined(other)`\n\nCombine transitions.\n\n```ts\ncombined(other: Transition): Transition\n```\n\n***\n\n## Static Transitions\n\n### Identity\n\n```ts\nTransition.identity()\n```\n\n### Move\n\n```ts\nTransition.move(edge: Edge)\n```\n\n### Offset\n\n```ts\nTransition.offset(position?: Point)\n```\n\n### Push\n\n```ts\nTransition.pushFrom(edge: Edge)\n```\n\n### Opacity\n\n```ts\nTransition.opacity()\n```\n\n### Scale\n\n```ts\nTransition.scale(scale?: number, anchor?: Point | KeywordPoint)\n```\n\n### Slide\n\n```ts\nTransition.slide()\n```\n\n### Fade\n\n```ts\nTransition.fade(duration?: number)\n```\n\n### Flip transitions\n\n```ts\nTransition.flipFromLeft(duration?)\nTransition.flipFromRight(duration?)\nTransition.flipFromTop(duration?)\nTransition.flipFromBottom(duration?)\n```\n\n### Asymmetric\n\n```ts\nTransition.asymmetric(insertion: Transition, removal: Transition)\n```\n\n***\n\n# withAnimation\n\n```ts\nfunction withAnimation(body: () => void): Promise<void>\nfunction withAnimation(animation: Animation, body: () => void): Promise<void>\nfunction withAnimation(\n  animation: Animation,\n  completionCriteria: \"logicallyComplete\" | \"removed\",\n  body: () => void\n): Promise<void>\n```\n\nWraps a state update and animates any affected values.\n\nExample:\n\n```ts\nwithAnimation(Animation.easeOut(0.3), () => {\n  visible.setValue(false)\n})\n```\n\n***\n\n# Correct Usage of the animation View Modifier\n\n### (Important Correction)\n\nIn Scripting, the `animation` prop is **not**:\n\n```tsx\nanimation={anim}     // incorrect\n```\n\nThe correct format is:\n\n```tsx\nanimation={{\n  animation: anim,\n  value: <observable or value>\n}}\n```\n\n### Meaning:\n\n| Field       | Description                                           |\n| ----------- | ----------------------------------------------------- |\n| `animation` | The `Animation` instance to use                       |\n| `value`     | The observable value whose changes should be animated |\n\nThis mirrors SwiftUI’s `.animation(animation, value: value)` modifier.\n\n***\n\n## Correct Examples\n\n### Example: Animate size changes\n\n```tsx\nconst size = useObservable(100)\nconst anim = Animation.spring({ duration: 0.3, bounce: 0.3 })\n\n<Rectangle\n  frame={{ width: size.value, height: size.value }}\n  animation={{ animation: anim, value: size.value }}\n/>\n\n<Button\n  title=\"Toggle Size\"\n  action={() => {\n    size.setValue(size.value === 100 ? 200 : 100)\n  }}\n/>\n```\n\n### Example: Animate color changes\n\n```tsx\nconst isOn = useObservable(false)\n\n<Text\n  color={isOn.value ? \"red\" : \"blue\"}\n  animation={{\n    animation: Animation.easeIn(0.25),\n    value: isOn.value\n  }}\n>\n  Changing color\n</Text>\n```\n\n### Example: Animate layout changes\n\n```tsx\nconst expanded = useObservable(false)\n\n<VStack\n  spacing={expanded.value ? 40 : 10}\n  animation={{\n    animation: Animation.smooth({ duration: 0.3 }),\n    value: expanded.value\n  }}\n>\n```\n\n***\n\n# Transition Usage Examples\n\n### Simple visibility toggle with transition\n\n```tsx\nconst visible = useObservable(true)\n\n<VStack>\n  {visible.value &&\n    <Text\n      transition={Transition\n        .slide()\n        .combined(Transition.opacity())\n      }\n    >\n      Slide + Fade\n    </Text>\n  }\n\n  <Button\n    title=\"Toggle\"\n    action={() => {\n      withAnimation(() => {\n        visible.setValue(!visible.value)\n      })\n    }}\n  />\n</VStack>\n```\n\n***\n\n# Combined Example: Animation + Transition\n\n```tsx\nconst visible = useObservable(true)\nconst anim = Animation.spring({ duration: 0.4, bounce: 0.25 })\n\n<VStack spacing={12}>\n  {visible.value &&\n    <Text\n      transition={Transition\n        .move(\"bottom\")\n        .combined(Transition.opacity())\n        .animation(anim)\n      }\n    >\n      Animated panel\n    </Text>\n  }\n\n  <Button\n    title=\"Toggle\"\n    action={() => {\n      withAnimation(anim, () => {\n        visible.setValue(!visible.value)\n      })\n    }}\n  />\n</VStack>\n```\n\n***\n\n# Summary\n\n### Key Points\n\n- `useObservable` drives UI updates.\n- `withAnimation` animates state changes.\n- `Transition` defines enter/exit effects.\n- **Correct animation modifier usage**:\n\n```tsx\nanimation={{ animation: myAnimation, value: myValue }}\n```\n","routePath":"/doc/View Modifiers/Animation and Transition","lang":"en","toc":[{"id":"factory-methods","text":"Factory Methods","depth":2,"charIndex":121},{"id":"animationdefault","text":"`Animation.default()`","depth":3,"charIndex":141},{"id":"animationlinearduration","text":"`Animation.linear(duration?)`","depth":3,"charIndex":249},{"id":"animationeaseinduration","text":"`Animation.easeIn(duration?)`","depth":3,"charIndex":378},{"id":"animationeaseoutduration","text":"`Animation.easeOut(duration?)`","depth":3,"charIndex":480},{"id":"animationbouncyoptions","text":"`Animation.bouncy(options?)`","depth":3,"charIndex":584},{"id":"animationsmoothoptions","text":"`Animation.smooth(options?)`","depth":3,"charIndex":764},{"id":"animationsnappyoptions","text":"`Animation.snappy(options?)`","depth":3,"charIndex":897},{"id":"animationspringoptions","text":"`Animation.spring(options?)`","depth":3,"charIndex":1030},{"id":"animationinteractivespringoptions","text":"`Animation.interactiveSpring(options?)`","depth":3,"charIndex":1413},{"id":"animationinterpolatingspringoptions","text":"`Animation.interpolatingSpring(options?)`","depth":3,"charIndex":1597},{"id":"modifier-methods","text":"Modifier Methods","depth":2,"charIndex":1918},{"id":"delaytime","text":"`.delay(time)`","depth":3,"charIndex":1939},{"id":"repeatcountcount-autoreverses","text":"`.repeatCount(count, autoreverses)`","depth":3,"charIndex":2001},{"id":"repeatforeverautoreverses","text":"`.repeatForever(autoreverses)`","depth":3,"charIndex":2115},{"id":"instance-methods","text":"Instance Methods","depth":2,"charIndex":2303},{"id":"animationanimation","text":"`.animation(animation)`","depth":3,"charIndex":2324},{"id":"combinedother","text":"`.combined(other)`","depth":3,"charIndex":2455},{"id":"static-transitions","text":"Static Transitions","depth":2,"charIndex":2557},{"id":"identity","text":"Identity","depth":3,"charIndex":2580},{"id":"move","text":"Move","depth":3,"charIndex":2627},{"id":"offset","text":"Offset","depth":3,"charIndex":2676},{"id":"push","text":"Push","depth":3,"charIndex":2735},{"id":"opacity","text":"Opacity","depth":3,"charIndex":2788},{"id":"scale","text":"Scale","depth":3,"charIndex":2833},{"id":"slide","text":"Slide","depth":3,"charIndex":2919},{"id":"fade","text":"Fade","depth":3,"charIndex":2960},{"id":"flip-transitions","text":"Flip transitions","depth":3,"charIndex":3016},{"id":"asymmetric","text":"Asymmetric","depth":3,"charIndex":3191},{"id":"important-correction","text":"(Important Correction)","depth":3,"charIndex":3795},{"id":"meaning","text":"Meaning:","depth":3,"charIndex":4019},{"id":"correct-examples","text":"Correct Examples","depth":2,"charIndex":4399},{"id":"example-animate-size-changes","text":"Example: Animate size changes","depth":3,"charIndex":4420},{"id":"example-animate-color-changes","text":"Example: Animate color changes","depth":3,"charIndex":4788},{"id":"example-animate-layout-changes","text":"Example: Animate layout changes","depth":3,"charIndex":5023},{"id":"simple-visibility-toggle-with-transition","text":"Simple visibility toggle with transition","depth":3,"charIndex":5290},{"id":"key-points","text":"Key Points","depth":3,"charIndex":6263}],"frontmatter":{},"version":"","description":"Scripting Animation & Transition System The Animation class describes how values animate in time."},{"title":"Chaining View Modifiers","content":"The `modifiers` property allows you to apply multiple view modifiers to a view using a fluent, chainable syntax. This API is a flexible and expressive alternative to the traditional single `modifier` attribute on a view in TSX, which only supports one layer of modification.\n\nWith `modifiers`, you can apply the same modifier multiple times (e.g., nested paddings or backgrounds), control modifier order explicitly, and build view style stacks that are closer in spirit to SwiftUI.\n\n***\n\n## Type\n\n```ts\ndeclare function modifiers(): ViewModifiers;\n\ndeclare class ViewModifiers {\n  // Example methods:\n  padding(value): this;\n  background(value): this;\n  opacity(value): this;\n  frame(value): this;\n  font(value): this;\n  // ... and many more (same as `CommonViewProps`)\n}\n```\n\n> The `ViewModifiers` class contains chainable methods for nearly all standard SwiftUI view modifiers, including layout, styling, interaction, and animation. Each method returns `this`, enabling fluent chaining.\n\n***\n\n## Benefits\n\n- **Supports multiple instances** of the same modifier (e.g., multiple `.padding()` or `.background()` layers).\n- **Preserves modifier order**, ensuring layout and appearance behave as expected.\n- **Increased modularity**, making it easier to abstract and reuse modifier chains.\n- **SwiftUI-like syntax**, aligning more closely with native SwiftUI best practices.\n\n***\n\n## Usage Examples\n\n### Example 1: Layered background and padding\n\n```tsx\n<VStack\n  modifiers={\n    modifiers()\n      .padding()\n      .background(\"red\")\n      .padding()\n      .background(\"blue\")\n  }\n>\n  <Text>Hello</Text>\n</VStack>\n```\n\nThis will produce a layout similar to:\n\n```swift\nText(\"Hello\")\n  .padding()\n  .background(Color.red)\n  .padding()\n  .background(Color.blue)\n```\n\n### Example 2: Reusable modifier chain\n\n```ts\nconst myModifiers = modifiers()\n  .padding(12)\n  .background(\"gray\")\n  .cornerRadius(8)\n  .opacity(0.9)\n\n<List modifiers={myModifiers}>\n  <Text>Item 1</Text>\n</List>\n```\n\n### Example 3: Composing modifiers dynamically\n\n```ts\nconst base = modifiers().padding()\n\nif (isDarkMode) {\n  base.background(\"black\")\n} else {\n  base.background(\"white\")\n}\n\nreturn <HStack modifiers={base}>...</HStack>\n```\n\n***\n\n## When to Use\n\nUse `modifiers` when:\n\n- You need multiple layers of the same modifier (e.g., multiple paddings or backgrounds).\n- You want to cleanly separate style logic into reusable chains.\n- You prefer an imperative, fluent way to express modifier order.\n- You are dynamically building view styles based on runtime conditions.\n\n***\n\n## Full Modifier List\n\n`ViewModifiers` exposes methods for over 200 modifiers, covering:\n\n- **Layout**: `padding`, `frame`, `offset`, `position`, `zIndex`, etc.\n- **Styling**: `background`, `foregroundStyle`, `opacity`, `shadow`, `clipShape`, etc.\n- **Text and Font**: `font`, `bold`, `italic`, `underline`, `kerning`, etc.\n- **Interactions**: `onTapGesture`, `onAppear`, `onDisappear`, `contextMenu`, etc.\n- **Scroll and Navigation**: `scrollDisabled`, `navigationTitle`, `sheet`, `popover`, etc.\n- **Charts**: `chartXAxis`, `chartYAxisLabel`, `chartSymbolScale`, etc.\n- **Widget-specific**: `widgetURL`, `widgetBackground`, etc.\n\n> See the full type definition for all supported modifier methods.\n\n***\n\n## Notes\n\n- Modifiers are applied in the **exact order** they are chained.\n- Each call to `modifiers()` returns a fresh instance. If you call it multiple times, they do **not** merge.\n- `modifiers` is preferred for complex chains.\n\n***\n\nThis feature enhances expressiveness and power when building UI with TSX, offering a richer and more modular view configuration approach.\n","routePath":"/doc/View Modifiers/Chaining View Modifiers","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":488},{"id":"benefits","text":"Benefits","depth":2,"charIndex":995},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":1378},{"id":"example-1-layered-background-and-padding","text":"Example 1: Layered background and padding","depth":3,"charIndex":1397},{"id":"example-2-reusable-modifier-chain","text":"Example 2: Reusable modifier chain","depth":3,"charIndex":1761},{"id":"example-3-composing-modifiers-dynamically","text":"Example 3: Composing modifiers dynamically","depth":3,"charIndex":1978},{"id":"when-to-use","text":"When to Use","depth":2,"charIndex":2207},{"id":"full-modifier-list","text":"Full Modifier List","depth":2,"charIndex":2545},{"id":"notes","text":"Notes","depth":2,"charIndex":3250}],"frontmatter":{},"version":"","description":"The modifiers property allows you to apply multiple view modifiers to a view using a fluent, chainable syntax. This API is a flexible and expressive alternative to the traditional single modifier attribute on a view in TSX, which only supports one layer of modification. With modifiers, you can apply the same modifier multiple times (e.g., nested paddings or backgrounds), control modifier order explicitly, and build view style stacks that are closer in spirit to SwiftUI."},{"title":"ChartMarkProps","content":"`ChartMarkProps` defines a set of visual and behavioral modifiers applicable to individual chart marks such as bars, lines, or areas. These modifiers allow developers to customize the appearance, layout, and dynamic behavior of chart elements in `BarChart`, `LineChart`, `AreaChart`, and other mark-based components.\n\n***\n\n## 1. Style Modifiers\n\n### `foregroundStyle`\n\nSpecifies the fill style of the chart content.\n\n- Type: `ShapeStyle | DynamicShapeStyle`\n- Example:\n\n  ```tsx\n  foregroundStyle: \"systemGreen\"\n  ```\n\n### `opacity`\n\nSets the opacity of the mark, ranging from `0.0` (fully transparent) to `1.0` (fully opaque).\n\n- Type: `number`\n- Example:\n\n  ```tsx\n  opacity: 0.6\n  ```\n\n### `cornerRadius`\n\nSets the corner radius for shapes such as bars or capsules.\n\n- Type: `number`\n- Example:\n\n  ```tsx\n  cornerRadius: 8\n  ```\n\n### `lineStyle`\n\nApplies stroke styles for line marks.\n\n- Type: `StrokeStyle`\n- Structure:\n\n  ```ts\n  {\n    lineWidth?: number\n    lineCap?: 'butt' | 'round' | 'square'\n    lineJoin?: 'bevel' | 'miter' | 'round'\n    mitterLimit?: number\n    dash?: number[]\n    dashPhase?: number\n  }\n  ```\n- Example:\n\n  ```tsx\n  lineStyle: {\n    lineWidth: 2,\n    lineCap: \"round\",\n    dash: [4, 2]\n  }\n  ```\n\n### `interpolationMethod`\n\nControls how lines or areas interpolate between data points.\n\n- Type: `ChartInterpolationMethod`\n- Options:\n  `\"cardinal\"`, `\"catmullRom\"`, `\"linear\"`, `\"monotone\"`, `\"stepCenter\"`, `\"stepEnd\"`, `\"stepStart\"`\n- Example:\n\n  ```tsx\n  interpolationMethod: \"catmullRom\"\n  ```\n\n### `alignsMarkStylesWithPlotArea`\n\nDetermines whether styles align with the chart’s plot area.\n\n- Type: `boolean`\n- Example:\n\n  ```tsx\n  alignsMarkStylesWithPlotArea: true\n  ```\n\n***\n\n## 2. Symbol Configuration (for Line/Scatter Charts)\n\n### `symbol`\n\nSets a symbol type or a custom view as the plotting symbol.\n\n- Type: `ChartSymbolShape | VirtualNode`\n- Options:\n  `\"circle\"`, `\"square\"`, `\"triangle\"`, `\"diamond\"`, `\"cross\"`, `\"plus\"`, `\"asterisk\"`, `\"pentagon\"`\n- Example:\n\n  ```tsx\n  symbol: \"triangle\"\n  ```\n\n### `symbolSize`\n\nControls the symbol’s size.\n\n- Type: `number | { width: number; height: number }`\n- Example:\n\n  ```tsx\n  symbolSize: 18\n  // or\n  symbolSize: { width: 16, height: 16 }\n  ```\n\n***\n\n## 3. Annotations\n\n### `annotation`\n\nAdds an annotation view positioned relative to a mark.\n\n- Type: `VirtualNode | { position?, alignment?, spacing?, overflowResolution?, content }`\n- Structure:\n\n  ```ts\n  {\n    position?: AnnotationPosition\n    alignment?: Alignment\n    spacing?: number\n    overflowResolution?: {\n      x?: AnnotationOverflowResolutionStrategy\n      y?: AnnotationOverflowResolutionStrategy\n    }\n    content: VirtualNode\n  }\n  ```\n- Example:\n\n  ```tsx\n  annotation: {\n    position: \"top\",\n    alignment: \"center\",\n    spacing: 4,\n    overflowResolution: {\n      x: \"fit\",\n      y: \"padScale\"\n    },\n    content: <Text>Label</Text>\n  }\n  ```\n\n#### `AnnotationPosition`\n\nDefines where the annotation is placed relative to the mark.\n\n- Type: string\n- Values:\n\n  - `\"automatic\"`\n  - `\"top\"`, `\"topLeading\"`, `\"topTrailing\"`\n  - `\"bottom\"`, `\"bottomLeading\"`, `\"bottomTrailing\"`\n  - `\"leading\"`, `\"trailing\"`\n  - `\"overlay\"` (overlay the mark itself)\n\n#### `AnnotationOverflowResolutionStrategy`\n\nSpecifies how to handle annotation layout overflow.\n\n- Type: string\n- Values:\n\n  - `\"automatic\"`: Selects the best resolution strategy automatically\n  - `\"fit\"`: Adjusts the annotation to stay within the boundary\n  - `\"fitToPlot\"`: Fits annotation within the plot area\n  - `\"fitToChart\"`: Fits within the full chart bounds\n  - `\"fitToAutomatic\"`: Automatically chooses between chart and plot bounds\n  - `\"padScale\"`: Extends the chart scale to fit the annotation\n  - `\"disabled\"`: Disables overflow resolution (allows clipping)\n\n***\n\n## 4. Shape Effects\n\n### `clipShape`\n\nApplies a clipping shape to the mark.\n\n- Type: `'rect' | 'circle' | 'capsule' | 'ellipse' | 'buttonBorder' | 'containerRelative'`\n- Example:\n\n  ```tsx\n  clipShape: \"capsule\"\n  ```\n\n### `shadow`\n\nAdds a drop shadow to the mark.\n\n- Type:\n\n  ```ts\n  {\n    color?: string // e.g. \"systemGray\"\n    radius: number\n    x?: number\n    y?: number\n  }\n  ```\n- Example:\n\n  ```tsx\n  shadow: {\n    color: \"systemGray\",\n    radius: 5,\n    x: 2,\n    y: 2\n  }\n  ```\n\n### `blur`\n\nApplies a Gaussian blur effect.\n\n- Type: `number`\n- Example:\n\n  ```tsx\n  blur: 6\n  ```\n\n### `zIndex`\n\nControls the rendering order of the mark relative to others.\n\n- Type: `number`\n- Example:\n\n  ```tsx\n  zIndex: 2\n  ```\n\n### `offset`\n\nOffsets the mark in one or more dimensions.\n\n- Supported formats:\n\n  - `{ x, y }`\n  - `{ x, yStart, yEnd }`\n  - `{ xStart, xEnd, y }`\n  - `{ xStart, xEnd, yStart, yEnd }`\n- Example:\n\n  ```tsx\n  offset: { x: 10, y: -5 }\n  ```\n\n***\n\n## 5. Dynamic Data Mapping (`xxxBy`)\n\nThese properties dynamically bind mark appearance or position to data fields. They should not be used in combination with their corresponding static properties (e.g. `foregroundStyleBy` vs. `foregroundStyle`).\n\n### `foregroundStyleBy`\n\nMaps a data field to a foreground style.\n\n- Type: `string | number | Date | { value, label }`\n- Example:\n\n  ```tsx\n  foregroundStyleBy: {\n    value: item.color,\n    label: \"Color\"\n  }\n  ```\n\n### `lineStyleBy`\n\nMaps a data field to a line style.\n\n- Example:\n\n  ```tsx\n  lineStyleBy: {\n    value: item.pattern,\n    label: \"Line Style\"\n  }\n  ```\n\n### `positionBy`\n\nMaps a data field to mark position and axis alignment.\n\n- Type:\n\n  ```ts\n  {\n    value: string | number | Date\n    label?: string\n    axis: 'horizontal' | 'vertical'\n    span?: MarkDimension\n  }\n  ```\n- Example:\n\n  ```tsx\n  positionBy: {\n    value: item.category,\n    axis: \"horizontal\",\n    span: {\n      type: \"ratio\",\n      value: 0.8\n    }\n  }\n  ```\n\n#### `MarkDimension`\n\nControls the spacing or sizing behavior of the mark within its axis.\n\n- Type: `\"automatic\"` or an object:\n\n  ```ts\n  {\n    type: \"inset\" | \"fixed\" | \"ratio\"\n    value: number\n  }\n  ```\n- Explanation:\n\n  - `\"automatic\"`: Lets the system determine the size\n  - `\"inset\"`: Shrinks the size by an inset margin\n  - `\"fixed\"`: Fixed screen-space size (in points)\n  - `\"ratio\"`: Relative to available axis spacing (0 to 1)\n\n### `symbolBy`\n\nMaps a field to different symbol shapes.\n\n- Example:\n\n  ```tsx\n  symbolBy: {\n    value: item.category,\n    label: \"Type\"\n  }\n  ```\n\n### `symbolSizeBy`\n\nMaps a field to symbol size.\n\n- Example:\n\n  ```tsx\n  symbolSizeBy: {\n    value: item.score,\n    label: \"Score\"\n  }\n  ```\n\n***\n\n## Example: Grouped Bar Chart\n\n```tsx\n<BarChart\n  marks={data.map(item => ({\n    label: item.type,\n    value: item.count,\n    positionBy: {\n      value: item.color,\n      axis: \"horizontal\"\n    },\n    foregroundStyleBy: item.color,\n    cornerRadius: 8\n  }))}\n/>\n```\n","routePath":"/doc/View Modifiers/ChartMarkProps/","lang":"en","toc":[{"id":"1-style-modifiers","text":"1. Style Modifiers","depth":2,"charIndex":323},{"id":"foregroundstyle","text":"`foregroundStyle`","depth":3,"charIndex":346},{"id":"opacity","text":"`opacity`","depth":3,"charIndex":519},{"id":"cornerradius","text":"`cornerRadius`","depth":3,"charIndex":689},{"id":"linestyle","text":"`lineStyle`","depth":3,"charIndex":833},{"id":"interpolationmethod","text":"`interpolationMethod`","depth":3,"charIndex":1227},{"id":"alignsmarkstyleswithplotarea","text":"`alignsMarkStylesWithPlotArea`","depth":3,"charIndex":1527},{"id":"2-symbol-configuration-for-linescatter-charts","text":"2. Symbol Configuration (for Line/Scatter Charts)","depth":2,"charIndex":1712},{"id":"symbol","text":"`symbol`","depth":3,"charIndex":1766},{"id":"symbolsize","text":"`symbolSize`","depth":3,"charIndex":2043},{"id":"3-annotations","text":"3. Annotations","depth":2,"charIndex":2241},{"id":"annotation","text":"`annotation`","depth":3,"charIndex":2260},{"id":"annotationposition","text":"`AnnotationPosition`","depth":4,"charIndex":2904},{"id":"annotationoverflowresolutionstrategy","text":"`AnnotationOverflowResolutionStrategy`","depth":4,"charIndex":3209},{"id":"4-shape-effects","text":"4. Shape Effects","depth":2,"charIndex":3788},{"id":"clipshape","text":"`clipShape`","depth":3,"charIndex":3809},{"id":"shadow","text":"`shadow`","depth":3,"charIndex":4007},{"id":"blur","text":"`blur`","depth":3,"charIndex":4277},{"id":"zindex","text":"`zIndex`","depth":3,"charIndex":4377},{"id":"offset","text":"`offset`","depth":3,"charIndex":4510},{"id":"5-dynamic-data-mapping-xxxby","text":"5. Dynamic Data Mapping (`xxxBy`)","depth":2,"charIndex":4755},{"id":"foregroundstyleby","text":"`foregroundStyleBy`","depth":3,"charIndex":5004},{"id":"linestyleby","text":"`lineStyleBy`","depth":3,"charIndex":5220},{"id":"positionby","text":"`positionBy`","depth":3,"charIndex":5373},{"id":"markdimension","text":"`MarkDimension`","depth":4,"charIndex":5746},{"id":"symbolby","text":"`symbolBy`","depth":3,"charIndex":6185},{"id":"symbolsizeby","text":"`symbolSizeBy`","depth":3,"charIndex":6333},{"id":"example-grouped-bar-chart","text":"Example: Grouped Bar Chart","depth":2,"charIndex":6480}],"frontmatter":{},"version":"","description":"ChartMarkProps defines a set of visual and behavioral modifiers applicable to individual chart marks such as bars, lines, or areas. These modifiers allow developers to customize the appearance, layout, and dynamic behavior of chart elements in BarChart, LineChart, AreaChart, and other mark-based components."},{"title":"Charts Style","content":"The Chart component in the Scripting app provides a highly customizable interface for creating and displaying various types of charts. This documentation explains how to use the properties of the Chart view to configure axes, scales, labels, legends, and more.\n\n### **1. Axis Visibility**\n\n- **`chartXAxis`**\n  - **Type**: `\"automatic\" | \"hidden\" | \"visible\"`\n  - **Description**: Sets the visibility of the X-axis.\n  - **Example**:\n    ```tsx\n    <Chart chartXAxis=\"visible\">\n      <BarChart ... />\n    </Chart>\n    ```\n\n- **`chartYAxis`**\n  - **Type**: `\"automatic\" | \"hidden\" | \"visible\"`\n  - **Description**: Sets the visibility of the Y-axis.\n  - **Example**:\n    ```tsx\n    <Chart chartYAxis=\"hidden\">\n      <LineChart ... />\n    </Chart>\n    ```\n\n***\n\n### **2. Axis Labels**\n\n- **`chartXAxisLabel`**\n  - **Type**:\n    ```ts\n    {\n      position?: \"automatic\" | \"bottom\" | \"bottomLeading\" | \"bottomTrailing\" | \"leading\" | \"overlay\" | \"top\" | \"topLeading\" | \"topTrailing\" | \"trailing\";\n      alignment?: \"leading\" | \"center\" | \"trailing\";\n      spacing?: number;\n      content: VirtualNode;\n    }\n    ```\n  - **Description**: Adds a label to the X-axis.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartXAxisLabel={{\n        position: \"bottom\",\n        alignment: \"center\",\n        spacing: 10,\n        content: <Text>X Axis Label</Text>,\n      }}\n    >\n      <BarChart ... />\n    </Chart>\n    ```\n\n- **`chartYAxisLabel`**\n  - **Type**: Same as `chartXAxisLabel`.\n  - **Description**: Adds a label to the Y-axis.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartYAxisLabel={{\n        position: \"leading\",\n        content: <Text>Y Axis Label</Text>,\n      }}\n    >\n      <LineChart ... />\n    </Chart>\n    ```\n\n***\n\n### **3. Legend**\n\n- **`chartLegend`**\n  - **Type**:\n    ```ts\n    \"automatic\" | \"hidden\" | \"visible\" | {\n      position?: \"automatic\" | \"bottom\" | \"bottomLeading\" | \"bottomTrailing\" | \"leading\" | \"overlay\" | \"top\" | \"topLeading\" | \"topTrailing\" | \"trailing\";\n      alignment?: \"leading\" | \"center\" | \"trailing\";\n      spacing?: number;\n      content?: VirtualNode;\n    }\n    ```\n  - **Description**: Configures the chart legend.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartLegend={{\n        position: \"top\",\n        alignment: \"center\",\n        content: <Text>Legend</Text>,\n      }}\n    >\n      <AreaChart ... />\n    </Chart>\n    ```\n\n***\n\n### **4. Scales**\n\n- **`chartXScale` / `chartYScale`**\n  - **Type**:\n    ```ts\n    ClosedRange<number> | ClosedRange<Date> | string[] | \"category\" | \"date\" | \"linear\" | \"log\" | \"squareRoot\" | \"symmetricLog\" | {\n      domain: ClosedRange<number> | ClosedRange<Date> | string[];\n      type: \"category\" | \"date\" | \"linear\" | \"log\" | \"squareRoot\" | \"symmetricLog\";\n    }\n    ```\n  - **Description**: Configures the X or Y-axis scale.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartXScale={{ domain: { from: 0, to: 100 }, type: \"linear\" }}\n      chartYScale={[\"A\", \"B\", \"C\"]}\n    >\n      <LineChart ... />\n    </Chart>\n    ```\n\n***\n\n### **5. Background**\n\n- **`chartBackground`**\n  - **Type**:\n    ```ts\n    VirtualNode | {\n      alignment?: \"leading\" | \"center\" | \"trailing\";\n      content: VirtualNode;\n    }\n    ```\n  - **Description**: Adds a background to the chart container.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartBackground={{\n        alignment: \"center\",\n        content: <Rectangle fill=\"gray\" />,\n      }}\n    >\n      <PieChart ... />\n    </Chart>\n    ```\n\n***\n\n### **6. Foreground Style**\n\n- **`chartForegroundStyleScale`**\n  - **Type**:\n    ```ts\n    Record<string, ShapeStyle>;\n    ```\n  - **Description**: Customizes colors for marks in the chart.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartForegroundStyleScale={{\n        \"Category 1\": { color: \"blue\" },\n        \"Category 2\": { color: \"red\" },\n      }}\n    >\n      <BarChart ... />\n    </Chart>\n    ```\n\n***\n\n### **7. Scrollable Axes**\n\n- **`chartScrollableAxes`**\n  - **Type**:\n    ```ts\n    \"vertical\" | \"horizontal\" | \"all\"\n    ```\n  - **Description**: Enables scrolling for the specified axes.\n  - **Example**:\n    ```tsx\n    <Chart chartScrollableAxes=\"horizontal\">\n      <LineChart ... />\n    </Chart>\n    ```\n\n***\n\n### **8. Selection**\n\n- **`chartXSelection` / `chartYSelection` / `chartAngleSelection`**\n  - **Type**:\n    ```ts\n    {\n      value: string | number | null;\n      onChanged: (newValue: string | number | null) => void;\n      valueType: \"string\" | \"number\";\n    }\n    ```\n  - **Description**: Enables selection for the specified axis.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartXSelection={{\n        value: \"Category 1\",\n        onChanged: (newValue) => console.log(\"Selected:\", newValue),\n        valueType: \"string\",\n      }}\n    >\n      <BarChart ... />\n    </Chart>\n    ```\n\n***\n\n### **9. Scroll Position**\n\n- **`chartScrollPositionX` / `chartScrollPositionY`**\n  - **Type**:\n    ```ts\n    number | string | {\n      value: number | string;\n      onChanged: (newValue: number | string) => void;\n    }\n    ```\n  - **Description**: Sets the initial scroll position along the X or Y-axis.\n  - **Example**:\n    ```tsx\n    <Chart\n      chartScrollPositionX={{\n        value: 0,\n        onChanged: (newValue) => console.log(\"Scroll X:\", newValue),\n      }}\n    >\n      <BarChart ... />\n    </Chart>\n    ```\n\n***\n\n## **Comprehensive Example**\n\nThe following example demonstrates the usage of multiple properties to create a fully customized chart:\n\n```tsx\n<Chart\n  chartXAxis=\"visible\"\n  chartYAxis=\"visible\"\n  chartXAxisLabel={{\n    position: \"bottom\",\n    alignment: \"center\",\n    spacing: 8,\n    content: <Text>X Axis Label</Text>,\n  }}\n  chartYAxisLabel={{\n    position: \"leading\",\n    content: <Text>Y Axis Label</Text>,\n  }}\n  chartLegend={{\n    position: \"top\",\n    alignment: \"center\",\n    content: <Text>Chart Legend</Text>,\n  }}\n  chartXScale={{ domain: { from: 0, to: 100 }, type: \"linear\" }}\n  chartScrollableAxes=\"all\"\n  chartForegroundStyleScale={{\n    \"Category A\": { color: \"green\" },\n    \"Category B\": { color: \"blue\" },\n  }}\n  chartBackground={{\n    content: <Rectangle fill=\"lightgray\" />,\n  }}\n>\n  <BarChart\n    marks={[\n      { label: \"A\", value: 30, foregroundStyle: { color: \"red\" } },\n      { label: \"B\", value: 70 },\n    ]}\n  />\n  <LineChart\n    marks={[\n      { label: \"A\", value: 40 },\n      { label: \"B\", value: 80 },\n    ]}\n  />\n</Chart>\n```\n\nThis example combines axis labels, scrolling, legend, scales, foreground styles, and multiple chart types in a single `Chart` container. Use it as a template for building your own charts.\n","routePath":"/doc/View Modifiers/Charts Style","lang":"en","toc":[{"id":"1-axis-visibility","text":"**1. Axis Visibility**","depth":3,"charIndex":262},{"id":"2-axis-labels","text":"**2. Axis Labels**","depth":3,"charIndex":759},{"id":"3-legend","text":"**3. Legend**","depth":3,"charIndex":1722},{"id":"4-scales","text":"**4. Scales**","depth":3,"charIndex":2370},{"id":"5-background","text":"**5. Background**","depth":3,"charIndex":3001},{"id":"6-foreground-style","text":"**6. Foreground Style**","depth":3,"charIndex":3452},{"id":"7-scrollable-axes","text":"**7. Scrollable Axes**","depth":3,"charIndex":3862},{"id":"8-selection","text":"**8. Selection**","depth":3,"charIndex":4175},{"id":"9-scroll-position","text":"**9. Scroll Position**","depth":3,"charIndex":4764},{"id":"comprehensive-example","text":"**Comprehensive Example**","depth":2,"charIndex":5290}],"frontmatter":{},"version":"","description":"The Chart component in the Scripting app provides a highly customizable interface for creating and displaying various types of charts. This documentation explains how to use the properties of the Chart view to configure axes, scales, labels, legends, and more. 1. Axis Visibility chartXAxisType: \"automatic\" | \"hidden\" | \"visible\"Description: Sets the visibility of the X-axis.Example:<Chart chartXAxis=\"visible\">\n  <BarChart ... />\n</Chart>chartYAxisType: \"automatic\" | \"hidden\" | \"visible\"Description: Sets the visibility of the Y-axis.Example:<Chart chartYAxis=\"hidden\">\n  <LineChart ... />\n</Chart> 2. Axis Labels chartXAxisLabelType:{\n  position?: \"automatic\" | \"bottom\" | \"bottomLeading\" | \"bottomTrailing\" | \"leading\" | \"overlay\" | \"top\" | \"topLeading\" | \"topTrailing\" | \"trailing\";\n  alignment?: \"leading\" | \"center\" | \"trailing\";\n  spacing?: number;\n  content: VirtualNode;\n}Description: Adds a label to the X-axis.Example:<Chart\n  chartXAxisLabel={{\n    position: \"bottom\",\n    alignment: \"center\",\n    spacing: 10,\n    content: <Text>X Axis Label</Text>,\n  }}\n>\n  <BarChart ... />\n</Chart>chartYAxisLabelType: Same as chartXAxisLabel.Description: Adds a label to the Y-axis.Example:<Chart\n  chartYAxisLabel={{\n    position: \"leading\",\n    content: <Text>Y Axis Label</Text>,\n  }}\n>\n  <LineChart ... />\n</Chart> 3. Legend chartLegendType:\"automatic\" | \"hidden\" | \"visible\" | {\n  position?: \"automatic\" | \"bottom\" | \"bottomLeading\" | \"bottomTrailing\" | \"leading\" | \"overlay\" | \"top\" | \"topLeading\" | \"topTrailing\" | \"trailing\";\n  alignment?: \"leading\" | \"center\" | \"trailing\";\n  spacing?: number;\n  content?: VirtualNode;\n}Description: Configures the chart legend.Example:<Chart\n  chartLegend={{\n    position: \"top\",\n    alignment: \"center\",\n    content: <Text>Legend</Text>,\n  }}\n>\n  <AreaChart ... />\n</Chart> 4. Scales chartXScale / chartYScaleType:ClosedRange<number> | ClosedRange<Date> | string[] | \"category\" | \"date\" | \"linear\" | \"log\" | \"squareRoot\" | \"symmetricLog\" | {\n  domain: ClosedRange<number> | ClosedRange<Date> | string[];\n  type: \"category\" | \"date\" | \"linear\" | \"log\" | \"squareRoot\" | \"symmetricLog\";\n}Description: Configures the X or Y-axis scale.Example:<Chart\n  chartXScale={{ domain: { from: 0, to: 100 }, type: \"linear\" }}\n  chartYScale={[\"A\", \"B\", \"C\"]}\n>\n  <LineChart ... />\n</Chart> 5. Background chartBackgroundType:VirtualNode | {\n  alignment?: \"leading\" | \"center\" | \"trailing\";\n  content: VirtualNode;\n}Description: Adds a background to the chart container.Example:<Chart\n  chartBackground={{\n    alignment: \"center\",\n    content: <Rectangle fill=\"gray\" />,\n  }}\n>\n  <PieChart ... />\n</Chart> 6. Foreground Style chartForegroundStyleScaleType:Record<string, ShapeStyle>;Description: Customizes colors for marks in the chart.Example:<Chart\n  chartForegroundStyleScale={{\n    \"Category 1\": { color: \"blue\" },\n    \"Category 2\": { color: \"red\" },\n  }}\n>\n  <BarChart ... />\n</Chart> 7. Scrollable Axes chartScrollableAxesType:\"vertical\" | \"horizontal\" | \"all\"Description: Enables scrolling for the specified axes.Example:<Chart chartScrollableAxes=\"horizontal\">\n  <LineChart ... />\n</Chart> 8. Selection chartXSelection / chartYSelection / chartAngleSelectionType:{\n  value: string | number | null;\n  onChanged: (newValue: string | number | null) => void;\n  valueType: \"string\" | \"number\";\n}Description: Enables selection for the specified axis.Example:<Chart\n  chartXSelection={{\n    value: \"Category 1\",\n    onChanged: (newValue) => console.log(\"Selected:\", newValue),\n    valueType: \"string\",\n  }}\n>\n  <BarChart ... />\n</Chart> 9. Scroll Position chartScrollPositionX / chartScrollPositionYType:number | string | {\n  value: number | string;\n  onChanged: (newValue: number | string) => void;\n}Description: Sets the initial scroll position along the X or Y-axis.Example:<Chart\n  chartScrollPositionX={{\n    value: 0,\n    onChanged: (newValue) => console.log(\"Scroll X:\", newValue),\n  }}\n>\n  <BarChart ... />\n</Chart>"},{"title":"Grid Layout Control","content":"These view modifiers are used to control the layout behavior of individual views placed inside a `Grid` structure. They provide fine-grained control over cell spanning, alignment, and sizing, consistent with SwiftUI’s grid system.\n\n***\n\n### `gridCellColumns`\n\nTells a view in a grid to span across multiple columns.\n\n#### Type\n\n```ts\ngridCellColumns?: number\n```\n\n#### Description\n\nUse this modifier to expand a single view across two or more columns. This is typically used for headers or wide content rows.\n\n#### Example\n\n```tsx\n<Grid>\n  <GridRow>\n    <Text gridCellColumns={2}>This spans 2 columns</Text>\n  </GridRow>\n  <GridRow>\n    <Text>Cell A</Text>\n    <Text>Cell B</Text>\n  </GridRow>\n</Grid>\n```\n\n***\n\n### `gridCellAnchor`\n\nSpecifies a custom alignment anchor within the grid cell.\n\n#### Type\n\n```ts\ngridCellAnchor?: KeywordPoint | Point\n```\n\n#### Description\n\nUse this modifier to align the content of a cell to a specific anchor point, either using a named keyword (such as `\"center\"` or `\"topLeading\"`) or a custom `{ x, y }` point.\n\n#### Example\n\n```tsx\n<Grid>\n  <GridRow>\n    <Text gridCellAnchor=\"topLeading\">Anchored to top leading</Text>\n  </GridRow>\n</Grid>\n```\n\n***\n\n### `gridCellUnsizedAxes`\n\nPrevents the view from expanding in the specified directions when placed in a grid cell.\n\n#### Type\n\n```ts\ngridCellUnsizedAxes?: AxisSet\n```\n\n#### Description\n\nThis modifier tells the grid not to assign extra size to the view along specified axes, allowing the view to tightly wrap its content.\n\n#### Options\n\n- `\"horizontal\"` – Prevent horizontal expansion\n- `\"vertical\"` – Prevent vertical expansion\n- `\"all\"` – Prevent expansion in both directions\n\n#### Example\n\n```tsx\n<Grid>\n  <GridRow>\n    <Image\n      gridCellUnsizedAxes=\"horizontal\"\n      imageUrl=\"https://example.com/icon.png\"\n    />\n    <Text>Description</Text>\n  </GridRow>\n</Grid>\n```\n\n***\n\n### `gridColumnAlignment`\n\nOverrides the default horizontal alignment of the column the view appears in.\n\n#### Type\n\n```ts\ngridColumnAlignment?: \"leading\" | \"center\" | \"trailing\"\n```\n\n#### Description\n\nAffects how all cells in the column are aligned horizontally. Only one view in a column needs to specify this to affect the whole column.\n\n#### Example\n\n```tsx\n<Grid>\n  <GridRow>\n    <Text gridColumnAlignment=\"trailing\">Right-aligned column</Text>\n    <Text>Next Cell</Text>\n  </GridRow>\n</Grid>\n```\n\n***\n\n## Grid and GridRow Structure\n\nThese modifiers are only applicable within the context of the `Grid` and `GridRow` components.\n\n### `Grid`\n\nA container that lays out content in a two-dimensional grid.\n\n#### Props\n\n- `alignment?: Alignment` – Alignment of child views in grid cells\n- `horizontalSpacing?: number` – Spacing between columns\n- `verticalSpacing?: number` – Spacing between rows\n\n#### Example\n\n```tsx\n<Grid>\n  <GridRow>\n    <Text>Hello</Text>\n    <Image systemName=\"globe\" />\n  </GridRow>\n  <Divider />\n  <GridRow>\n    <Image systemName=\"hand.wave\" />\n    <Text>World</Text>\n  </GridRow>\n</Grid>\n```\n\n### `GridRow`\n\nRepresents a horizontal row of views inside a `Grid`.\n\n#### Props\n\n- `alignment?: VerticalAlignment` – Vertical alignment for cells in the row\n\n***\n\n## Summary\n\n| Modifier              | Description                                                 |\n| --------------------- | ----------------------------------------------------------- |\n| `gridCellColumns`     | Allows a view to span multiple columns in the grid          |\n| `gridCellAnchor`      | Sets a specific anchor point for the view within its cell   |\n| `gridCellUnsizedAxes` | Prevents the view from expanding along specified axes       |\n| `gridColumnAlignment` | Overrides the horizontal alignment of the containing column |\n","routePath":"/doc/View Modifiers/Grid Layout Control","lang":"en","toc":[{"id":"gridcellcolumns","text":"`gridCellColumns`","depth":3,"charIndex":237},{"id":"type","text":"Type","depth":4,"charIndex":317},{"id":"description","text":"Description","depth":4,"charIndex":364},{"id":"example","text":"Example","depth":4,"charIndex":510},{"id":"gridcellanchor","text":"`gridCellAnchor`","depth":3,"charIndex":712},{"id":"type-1","text":"Type","depth":4,"charIndex":793},{"id":"description-1","text":"Description","depth":4,"charIndex":853},{"id":"example-1","text":"Example","depth":4,"charIndex":1047},{"id":"gridcellunsizedaxes","text":"`gridCellUnsizedAxes`","depth":3,"charIndex":1187},{"id":"type-2","text":"Type","depth":4,"charIndex":1304},{"id":"description-2","text":"Description","depth":4,"charIndex":1356},{"id":"options","text":"Options","depth":4,"charIndex":1510},{"id":"example-2","text":"Example","depth":4,"charIndex":1666},{"id":"gridcolumnalignment","text":"`gridColumnAlignment`","depth":3,"charIndex":1869},{"id":"type-3","text":"Type","depth":4,"charIndex":1975},{"id":"description-3","text":"Description","depth":4,"charIndex":2053},{"id":"example-3","text":"Example","depth":4,"charIndex":2210},{"id":"grid-and-gridrow-structure","text":"Grid and GridRow Structure","depth":2,"charIndex":2377},{"id":"grid","text":"`Grid`","depth":3,"charIndex":2504},{"id":"props","text":"Props","depth":4,"charIndex":2578},{"id":"example-4","text":"Example","depth":4,"charIndex":2767},{"id":"gridrow","text":"`GridRow`","depth":3,"charIndex":2988},{"id":"props-1","text":"Props","depth":4,"charIndex":3058},{"id":"summary","text":"Summary","depth":2,"charIndex":3152}],"frontmatter":{},"version":"","description":"These view modifiers are used to control the layout behavior of individual views placed inside a Grid structure. They provide fine-grained control over cell spanning, alignment, and sizing, consistent with SwiftUI’s grid system. gridCellColumns Tells a view in a grid to span across multiple columns. Type Description Use this modifier to expand a single view across two or more columns. This is typically used for headers or wide content rows. Example gridCellAnchor Specifies a custom alignment anchor within the grid cell. Type Description Use this modifier to align the content of a cell to a specific anchor point, either using a named keyword (such as \"center\" or \"topLeading\") or a custom { x, y } point. Example gridCellUnsizedAxes Prevents the view from expanding in the specified directions when placed in a grid cell. Type Description This modifier tells the grid not to assign extra size to the view along specified axes, allowing the view to tightly wrap its content. Options \"horizontal\" – Prevent horizontal expansion\"vertical\" – Prevent vertical expansion\"all\" – Prevent expansion in both directions Example gridColumnAlignment Overrides the default horizontal alignment of the column the view appears in. Type Description Affects how all cells in the column are aligned horizontally. Only one view in a column needs to specify this to affect the whole column. Example"},{"title":"Image Style","content":"These modifiers are specifically designed for views that render images (e.g., system symbols, local or remote images). They control layout behavior, scaling, and rendering characteristics of the image content.\n\n***\n\n## `scaleToFit`\n\n### Definition\n\n```ts\nscaleToFit?: boolean\n```\n\n### Description\n\nScales the image **proportionally** to fit within its parent container. The image's **aspect ratio is preserved**, and the entire image will be visible. Any remaining space in the container is left empty.\n\nEquivalent to:\n\n```swift\n.aspectRatio(contentMode: .fit)\n```\n\n### Behavior\n\n- Resizes the image without cropping\n- Preserves the original width-to-height ratio\n- May introduce padding if aspect ratios do not match\n\n### Example\n\n```tsx\n<Image\n  filePath=\"path/to/local.jpg\"\n  scaleToFit={true}\n/>\n```\n\n***\n\n## `scaleToFill`\n\n### Definition\n\n```ts\nscaleToFill?: boolean\n```\n\n### Description\n\nScales the image **proportionally** to completely fill its parent container. The image's **aspect ratio is preserved**, but the image may be **cropped** to fit.\n\nEquivalent to:\n\n```swift\n.aspectRatio(contentMode: .fill)\n```\n\n### Behavior\n\n- Image fills the entire container\n- Maintains aspect ratio\n- Portions of the image may be clipped\n\n### Example\n\n```tsx\n<Image\n  imageUrl=\"https://example.com/banner.jpg\"\n  scaleToFill={true}\n/>\n```\n\n***\n\n## `aspectRatio`\n\n### Definition\n\n```ts\naspectRatio?: {\n  value?: number | null\n  contentMode: \"fit\" | \"fill\"\n}\n```\n\n### Description\n\nConstrains the view’s dimensions to a specific **width-to-height ratio**, and determines how the image should be resized (`fit` or `fill`).\n\n- `value`: A numeric aspect ratio (e.g. `16 / 9`) or `null` to preserve the original image’s ratio.\n- `contentMode`: `\"fit\"` ensures the entire image fits within the view; `\"fill\"` ensures the view is fully filled, potentially cropping the image.\n\n### Example: Set aspect ratio to 3:2 and fit\n\n```tsx\n<Image\n  filePath=\"path/to/photo.jpg\"\n  aspectRatio={{\n    value: 3 / 2,\n    contentMode: \"fit\"\n  }}\n/>\n```\n\n### Example: Use original aspect ratio and fill the space\n\n```tsx\n<Image\n  systemName=\"photo\"\n  aspectRatio={{\n    value: null,\n    contentMode: \"fill\"\n  }}\n/>\n```\n\n***\n\n## `imageScale`\n\n### Definition\n\n```ts\nimageScale?: \"small\" | \"medium\" | \"large\"\n```\n\n### Description\n\nSets the rendering size of **symbol-based images** (SF Symbols). This modifier does **not affect the layout size**, only the visual scale of the symbol image.\n\n- `\"small\"`: Reduced symbol size\n- `\"medium\"`: Default scale\n- `\"large\"`: Enlarged symbol rendering\n\n> Note: This modifier only applies to system symbol images created with `systemName`.\n\n### Example\n\n```tsx\n<Image\n  systemName=\"bolt.fill\"\n  imageScale=\"large\"\n/>\n```\n\n***\n\n## Summary\n\n| Modifier      | Purpose                                   | Affects Layout? | Cropping? | Symbol Only? |\n| ------------- | ----------------------------------------- | --------------- | --------- | ------------ |\n| `scaleToFit`  | Fit image proportionally within container | Yes             | No        | No           |\n| `scaleToFill` | Fill container with proportional scaling  | Yes             | Yes       | No           |\n| `aspectRatio` | Constrain view to a specific aspect ratio | Yes             | Optional  | No           |\n| `imageScale`  | Adjust rendering size of symbol images    | No              | No        | **Yes**      |\n","routePath":"/doc/View Modifiers/Image Style","lang":"en","toc":[{"id":"scaletofit","text":"`scaleToFit`","depth":2,"charIndex":216},{"id":"definition","text":"Definition","depth":3,"charIndex":233},{"id":"description","text":"Description","depth":3,"charIndex":281},{"id":"behavior","text":"Behavior","depth":3,"charIndex":566},{"id":"example","text":"Example","depth":3,"charIndex":719},{"id":"scaletofill","text":"`scaleToFill`","depth":2,"charIndex":810},{"id":"definition-1","text":"Definition","depth":3,"charIndex":828},{"id":"description-1","text":"Description","depth":3,"charIndex":877},{"id":"behavior-1","text":"Behavior","depth":3,"charIndex":1119},{"id":"example-1","text":"Example","depth":3,"charIndex":1233},{"id":"aspectratio","text":"`aspectRatio`","depth":2,"charIndex":1338},{"id":"definition-2","text":"Definition","depth":3,"charIndex":1356},{"id":"description-2","text":"Description","depth":3,"charIndex":1455},{"id":"example-set-aspect-ratio-to-32-and-fit","text":"Example: Set aspect ratio to 3:2 and fit","depth":3,"charIndex":1861},{"id":"example-use-original-aspect-ratio-and-fill-the-space","text":"Example: Use original aspect ratio and fill the space","depth":3,"charIndex":2023},{"id":"imagescale","text":"`imageScale`","depth":2,"charIndex":2193},{"id":"definition-3","text":"Definition","depth":3,"charIndex":2210},{"id":"description-3","text":"Description","depth":3,"charIndex":2279},{"id":"example-2","text":"Example","depth":3,"charIndex":1861},{"id":"summary","text":"Summary","depth":2,"charIndex":2730}],"frontmatter":{},"version":"","description":"These modifiers are specifically designed for views that render images (e.g., system symbols, local or remote images). They control layout behavior, scaling, and rendering characteristics of the image content."},{"title":"Lifecycle Events","content":"Scripting supports SwiftUI-style lifecycle hooks `onAppear` and `onDisappear` to execute custom logic when a view becomes visible or is removed from the visible interface. These hooks allow you to trigger animations, start data loading, update state, or perform cleanup when views enter or exit the screen.\n\n***\n\n## Property Definitions\n\n```ts\nonAppear?: () => void\nonDisappear?: () => void\n```\n\n### Property Descriptions\n\n| Property      | Type         | Description                                          |\n| ------------- | ------------ | ---------------------------------------------------- |\n| `onAppear`    | `() => void` | Called when the view becomes visible.                |\n| `onDisappear` | `() => void` | Called when the view is no longer visible on screen. |\n\n***\n\n## Example\n\n```tsx\n\n\nfunction Example() {\n  const [message, setMessage] = useState(\"\")\n\n  return <VStack\n    onAppear={() => setMessage(\"View is visible\")}\n    onDisappear={() => setMessage(\"View is hidden\")}\n    padding\n  >\n    <Text>{message}</Text>\n  </VStack>\n}\n```\n","routePath":"/doc/View Modifiers/Lifecycle Events","lang":"en","toc":[{"id":"property-definitions","text":"Property Definitions","depth":2,"charIndex":313},{"id":"property-descriptions","text":"Property Descriptions","depth":3,"charIndex":396},{"id":"example","text":"Example","depth":2,"charIndex":781}],"frontmatter":{},"version":"","description":"Scripting supports SwiftUI-style lifecycle hooks onAppear and onDisappear to execute custom logic when a view becomes visible or is removed from the visible interface. These hooks allow you to trigger animations, start data loading, update state, or perform cleanup when views enter or exit the screen."},{"title":"Glass Effect Transition","content":"This document provides a comprehensive explanation of **Glass Effect Transitions** in Scripting, including how Liquid Glass materials animate during view changes, how geometry matching works, and how to correctly use `NamespaceReader` to access SwiftUI’s `@Namespace` within TSX code.\n\nContents include:\n\n- Overview of Liquid Glass transitions\n- The three transition types\n- Relationship among `glassEffectTransition`, `glassEffectID`, and `namespace`\n- Role of `glassEffectUnion`\n- Purpose and behavior of `GlassEffectContainer`\n- Design and usage of `NamespaceReader`\n- Detailed walkthrough of the provided example\n- Best practice recommendations\n\n***\n\n# 1. Overview: What Is a Glass Effect Transition?\n\nA **Glass Effect Transition** defines how a Liquid Glass material animates when:\n\n- A view is inserted or removed\n- Layout changes\n- Views switch between two states\n\n```ts\ntype GlassEffectTransition = 'identity' | 'materialize' | 'matchedGeometry'\n```\n\nThese transitions affect **only the Liquid Glass material**—not the rest of the view’s opacity or scale.\n\nA transition controls:\n\n1. How the glass material appears or disappears\n2. Whether the shape of the glass participates in animation\n3. Whether the glass attempts to match geometry with other shapes\n\n***\n\n# 2. Transition Types\n\n## 2.1 identity\n\n```tsx\nglassEffectTransition=\"identity\"\n```\n\nBehavior:\n\n- No animation or geometry change.\n- The glass effect appears immediately with no fade or shape transformation.\n\nUse cases:\n\n- Disabling animations\n- Static UI\n- Debugging transitions\n\n***\n\n## 2.2 materialize\n\n```tsx\nglassEffectTransition=\"materialize\"\n```\n\nBehavior:\n\n- The material fades in or out smoothly.\n- No attempt is made to match geometry with any other glass shape.\n- Content transitions in a simple, clean way.\n\nUse cases:\n\n- Basic menu transitions\n- Buttons appearing or disappearing\n- When geometric continuity is not needed\n\n***\n\n## 2.3 matchedGeometry (most powerful)\n\n```tsx\nglassEffectTransition=\"matchedGeometry\"\n```\n\nBehavior:\n\n- The Liquid Glass shape morphs between views that share the same ID and namespace.\n- Creates smooth, fluid transitions between corresponding glass shapes.\n- Requires `glassEffectID` and `namespace`.\n\nUse cases:\n\n- Menu switching (e.g., Edit → Home)\n- Toolbar reconfiguration\n- Any UI element where continuity matters\n\n***\n\n# 3. glassEffectID and namespace\n\n**The core of geometric matching**\n\nLiquid Glass’ geometric-matching transitions require the ability to identify and relate specific glass shapes.\n\n***\n\n## 3.1 Why IDs Are Required\n\nTo animate a shape from state A → state B, the system must know:\n\n- which old shape matches which new shape\n\nThe identity is provided by:\n\n```tsx\nglassEffectID={{\n  id: 1,\n  namespace\n}}\n```\n\nViews with the same `id` in the same namespace are treated as the **same conceptual glass entity** across states.\n\n***\n\n## 3.2 Why a namespace Is Required\n\nSwiftUI’s matchedGeometry system requires an `@Namespace` to define the animation scope.\n\nSince TSX cannot define SwiftUI property wrappers, Scripting provides:\n\n```tsx\n<NamespaceReader>\n  {namespace => (…)}\n</NamespaceReader>\n```\n\nInside the closure:\n\n- `namespace` refers to a real SwiftUI `@Namespace`\n- All `glassEffectID` and `glassEffectUnion` inside this closure must use this namespace\n\nBenefits:\n\n- Provides correct scope for geometry transitions\n- Prevents accidental cross-scope animation\n- Ensures matchedGeometry and unions behave predictably\n\nWithout a namespace, geometric matching does not work.\n\n***\n\n# 4. glassEffectUnion: Unifying Glass Regions\n\n`glassEffectUnion` merges multiple views into a **single continuous glass material region**.\n\n```tsx\nglassEffectUnion={{\n  id: 1,\n  namespace\n}}\n```\n\nEffects:\n\n- Buttons appear to share a single underlying piece of glass\n- Material may shift or reflow cohesively\n- Enhances visual coherence in grouped UI elements\n\nTypically paired with matchedGeometry transitions.\n\n***\n\n# 5. GlassEffectContainer\n\nThe container provides:\n\n- A shared environment for geometry matching\n- A rendering boundary for unioned glass\n- Optimized rendering for clusters of Liquid Glass views\n\nExample:\n\n```tsx\n<GlassEffectContainer>\n  <HStack> ... </HStack>\n</GlassEffectContainer>\n```\n\nEvery view participating in glass transitions should be placed inside the same container.\n\n***\n\n# 6. NamespaceReader\n\n**Exposing SwiftUI’s `@Namespace` to TSX**\n\n## 6.1 Why NamespaceReader Exists\n\nSwiftUI defines matchedGeometry transitions using:\n\n```swift\n@Namespace private var namespace\n```\n\nBut TSX code cannot create Swift `@Namespace` values.\nTherefore Scripting provides:\n\n```tsx\n<NamespaceReader>\n  {namespace => (…)}\n</NamespaceReader>\n```\n\n### Purpose:\n\n- Internally creates and manages a real SwiftUI `@Namespace`\n- Makes the namespace accessible to JavaScript/TypeScript\n- Ensures all participating views share the same namespace\n- Enables matchedGeometry transitions to work in TSX\n\n## 6.2 How It Works\n\n- NamespaceReader creates a SwiftUI view containing `@Namespace`.\n- That namespace is passed to the TSX children via a function parameter.\n- All `glassEffectID` and `glassEffectUnion` must use this namespace.\n- All participating views inside the closure are guaranteed to match within the same namespace.\n\n***\n\n# 7. Example Analysis\n\nBelow is the provided example, demonstrating a dynamic menu switching between two states:\n\n- Menu A: Home / Settings\n- Menu B: Edit / Erase / Delete\n- Using animation for transitions\n- Using matchedGeometry via ID sharing\n- Using union IDs for continuous material appearance\n\n### Key excerpts:\n\n```tsx\nisAlternativeMenu.value\n  ? <>\n      <Button\n        title=\"Home\"\n        glassEffectID={{id:1, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n      <Button\n        title=\"Settings\"\n        glassEffectID={{id:2, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n    </>\n  : <>\n      <Button\n        title=\"Edit\"\n        glassEffectID={{id:1, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n      <Button\n        title=\"Erase\"\n        glassEffectID={{id:3, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n        glassEffectTransition=\"materialize\"\n      />\n      <Button\n        title=\"Delete\"\n        glassEffectID={{id:2, namespace}}\n        glassEffectUnion={{id:1,namespace}}\n      />\n    </>\n```\n\n### 1. Shared union (id = 1)\n\nAll buttons belong to the same glass union.\nThis produces a smooth, unified underlying glass region.\n\n### 2. Shared glassEffectID for corresponding buttons\n\n- `Home` and `Edit` share `id = 1`\n- `Settings` and `Delete` share `id = 2`\n\n→ They animate between each other using `matchedGeometry`.\n\n### 3. “Erase” uses a different transition\n\n```tsx\nglassEffectTransition=\"materialize\"\n```\n\nThis button fades its material rather than matching geometry, making its appearance more distinct.\n\n### 4. Animation is triggered explicitly\n\n```tsx\nwithAnimation(() => {\n  isAlternativeMenu.setValue(\n    !isAlternativeMenu.value\n  )\n})\n```\n\nGlass transitions attach themselves to this animation transaction automatically.\n\n***\n\n# 8. Best Practices\n\n### 1. Use a single GlassEffectContainer\n\nAll participating glass views must share one container.\n\n### 2. Use one NamespaceReader per animated region\n\nDo not create multiple namespaces unless intentionally separating animation scopes.\n\n### 3. Use consistent glassEffectID between states\n\nBoth old and new states must contain the same ID to animate geometrically.\n\n### 4. Use glassEffectUnion for cohesive material appearance\n\nEspecially in toolbars and menus.\n\n### 5. Prefer matchedGeometry for sophisticated transitions\n\nUse materialize only for elements needing simple appearance behavior.\n\n***\n\n# 9. Summary\n\nGlass Effect Transitions enable highly expressive and fluid animations for Liquid Glass materials in iOS 26.\nIn Scripting:\n\n- `glassEffectTransition` defines how the material animates\n- `glassEffectID` and `namespace` enable geometric matching\n- `glassEffectUnion` creates unified material regions\n- `GlassEffectContainer` manages the animation environment\n- `NamespaceReader` exposes SwiftUI’s `@Namespace` to TSX, making advanced animations possible\n","routePath":"/doc/View Modifiers/Liquid Glass/Glass Effect Transition/","lang":"en","toc":[{"id":"21-identity","text":"2.1 identity","depth":2,"charIndex":1292},{"id":"22-materialize","text":"2.2 materialize","depth":2,"charIndex":1555},{"id":"23-matchedgeometry-most-powerful","text":"2.3 matchedGeometry (most powerful)","depth":2,"charIndex":1910},{"id":"31-why-ids-are-required","text":"3.1 Why IDs Are Required","depth":2,"charIndex":2524},{"id":"32-why-a-namespace-is-required","text":"3.2 Why a namespace Is Required","depth":2,"charIndex":2865},{"id":"61-why-namespacereader-exists","text":"6.1 Why NamespaceReader Exists","depth":2,"charIndex":4390},{"id":"purpose","text":"Purpose:","depth":3,"charIndex":4679},{"id":"62-how-it-works","text":"6.2 How It Works","depth":2,"charIndex":4925},{"id":"key-excerpts","text":"Key excerpts:","depth":3,"charIndex":5556},{"id":"1-shared-union-id--1","text":"1. Shared union (id = 1)","depth":3,"charIndex":-1},{"id":"2-shared-glasseffectid-for-corresponding-buttons","text":"2. Shared glassEffectID for corresponding buttons","depth":3,"charIndex":6474},{"id":"3-erase-uses-a-different-transition","text":"3. “Erase” uses a different transition","depth":3,"charIndex":6666},{"id":"4-animation-is-triggered-explicitly","text":"4. Animation is triggered explicitly","depth":3,"charIndex":6858},{"id":"1-use-a-single-glasseffectcontainer","text":"1. Use a single GlassEffectContainer","depth":3,"charIndex":7108},{"id":"2-use-one-namespacereader-per-animated-region","text":"2. Use one NamespaceReader per animated region","depth":3,"charIndex":7207},{"id":"3-use-consistent-glasseffectid-between-states","text":"3. Use consistent glassEffectID between states","depth":3,"charIndex":7344},{"id":"4-use-glasseffectunion-for-cohesive-material-appearance","text":"4. Use glassEffectUnion for cohesive material appearance","depth":3,"charIndex":7472},{"id":"5-prefer-matchedgeometry-for-sophisticated-transitions","text":"5. Prefer matchedGeometry for sophisticated transitions","depth":3,"charIndex":7569}],"frontmatter":{},"version":"","description":"This document provides a comprehensive explanation of Glass Effect Transitions in Scripting, including how Liquid Glass materials animate during view changes, how geometry matching works, and how to correctly use NamespaceReader to access SwiftUI’s @Namespace within TSX code. Contents include: Overview of Liquid Glass transitionsThe three transition typesRelationship among glassEffectTransition, glassEffectID, and namespaceRole of glassEffectUnionPurpose and behavior of GlassEffectContainerDesign and usage of NamespaceReaderDetailed walkthrough of the provided exampleBest practice recommendations A Glass Effect Transition defines how a Liquid Glass material animates when: A view is inserted or removedLayout changesViews switch between two states These transitions affect only the Liquid Glass material—not the rest of the view’s opacity or scale. A transition controls: How the glass material appears or disappearsWhether the shape of the glass participates in animationWhether the glass attempts to match geometry with other shapes"},{"title":"Example","content":"```tsx\n\n\nfunction View() {\n\n  const isAlternativeMenu = useObservable(false)\n\n  return <NamespaceReader>{namespace => <VStack\n    spacing={50}\n    frame={{\n      maxWidth: 'infinity',\n      maxHeight: 'infinity'\n    }}\n    background=\"systemYellow\"\n  >\n    <GlassEffectContainer\n    >\n      <HStack\n        spacing={0}\n        font=\"largeTitle\"\n        imageScale=\"large\"\n        buttonStyle=\"glass\"\n        labelStyle=\"iconOnly\"\n      >\n        {\n          isAlternativeMenu.value\n            ? <>\n              <Button\n                title=\"Home\"\n                systemImage=\"house\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 1,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n              <Button\n                title=\"Settings\"\n                systemImage=\"gear\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 2,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n            </>\n\n            : <>\n              <Button\n                title=\"Edit\"\n                systemImage=\"pencil\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 1,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n              <Button\n                title=\"Erase\"\n                systemImage=\"eraser\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 3,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n                glassEffectTransition=\"materialize\"\n              />\n              <Button\n                title=\"Delete\"\n                systemImage=\"trash\"\n                action={() => { }}\n                glassEffectID={{\n                  id: 2,\n                  namespace\n                }}\n                glassEffectUnion={{\n                  id: 1,\n                  namespace\n                }}\n              />\n            </>\n        }\n      </HStack>\n    </GlassEffectContainer>\n\n    <Button\n      title=\"Toggle\"\n      buttonStyle=\"bordered\"\n      action={() => {\n        withAnimation(() => {\n          isAlternativeMenu.setValue(\n            !isAlternativeMenu.value\n          )\n        })\n      }}\n    />\n  </VStack>\n  }</NamespaceReader>\n}\n\nasync function run() {\n  await Navigation.present(<View />)\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/View Modifiers/Liquid Glass/Glass Effect Transition/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Liquid Glass Effect","content":"Scripting provides full support for the new **Liquid Glass** visual system introduced in iOS 26. This includes `glassEffect`, `GlassEffectContainer`, `UIGlass`, and related geometry-matching and transition APIs. These APIs allow scripts to create rich translucent materials, fluid glass shapes, matched geometry animations, and unioned glass regions directly within TSX.\n\nThis document explains how the Liquid Glass APIs are used in Scripting, including:\n\n- Concepts and fundamentals\n- How to apply glass effects\n- UIGlass configuration\n- Geometry transitions\n- glassEffect identifiers and unions\n- GlassEffectContainer behavior\n- Practical examples and best practices\n\n***\n\n# 1. Overview of Liquid Glass\n\nLiquid Glass is a new material and animation system in iOS 26. Compared to earlier blur or material effects, Liquid Glass provides:\n\n- Fluid, dynamic shapes that follow view geometry\n- Tintable and interactive glass materials\n- Geometry-matched transitions\n- Grouped “glass unions” to merge multiple regions\n- High-performance rendering inside containers\n\n***\n\n# 2. The `glassEffect` Modifier\n\nAny view that adopts `GlassProps` can apply a Liquid Glass effect using the `glassEffect` property.\n\n### Definition\n\n```ts\ntype GlassProps = {\n  glassEffect?: boolean | UIGlass | Shape | {\n    glass: UIGlass\n    shape: Shape\n  }\n\n  glassEffectTransition?: GlassEffectTransition\n\n  glassEffectID?: {\n    id: string | number\n    namespace: NamespaceID\n  }\n\n  glassEffectUnion?: {\n    id: string | number\n    namespace: NamespaceID\n  }\n}\n```\n\n***\n\n## 2.1 Ways to Use `glassEffect`\n\n### **1. Enable default Liquid Glass material**\n\n```tsx\n<Text glassEffect>Foo</Text>\n```\n\nEquivalent to `UIGlass.regular()`.\n\n***\n\n### **2. Apply a specific UIGlass instance**\n\n```tsx\n<Text glassEffect={UIGlass.regular().interactive(false)}>\n  Foo\n</Text>\n```\n\nYou can chain configuration calls such as `interactive()` and `tint()`.\n\n***\n\n### **3. Provide a specific Shape**\n\n```tsx\n<Text\n  glassEffect={{\n    glass: UIGlass.regular(),\n    shape: { type: 'rect', cornerRadius: 10 }\n  }}\n>\n  Foo\n</Text>\n```\n\nOr directly provide a Shape object:\n\n```tsx\n<Text glassEffect={{ type: 'rect', cornerRadius: 10 }}>\n  Foo\n</Text>\n```\n\nThe glass material will be clipped to the shape’s geometry.\n\n***\n\n### **4. Boolean shorthand**\n\n```tsx\n<View glassEffect />\n```\n\nActs the same as default Liquid Glass material.\n\n***\n\n# 3. The `UIGlass` Class\n\n`UIGlass` represents the Liquid Glass material configuration.\n\n### Static factories\n\n| Method               | Description                                                    |\n| -------------------- | -------------------------------------------------------------- |\n| `UIGlass.clear()`    | Fully clear variant, used for overlay or blending composition. |\n| `UIGlass.regular()`  | Standard Liquid Glass material.                                |\n| `UIGlass.identity()` | Identity material that leaves content visually unchanged.      |\n\n### Instance configuration\n\n```ts\ninteractive(value?: boolean): UIGlass\ntint(color: Color): UIGlass\n```\n\nExample:\n\n```tsx\nglassEffect={UIGlass.regular().interactive().tint(\"red\")}\n```\n\n***\n\n# 4. Glass Effect Transitions\n\n```ts\ntype GlassEffectTransition = 'identity' | 'materialize' | 'matchedGeometry'\n```\n\n### Transition Types\n\n| Transition          | Description                                                                 |\n| ------------------- | --------------------------------------------------------------------------- |\n| `'identity'`        | No change or animation applied.                                             |\n| `'materialize'`     | Fades in content and animates the glass material without geometry matching. |\n| `'matchedGeometry'` | Matches the geometry of other glass shapes during transitions.              |\n\n### Usage\n\n```tsx\n<Text\n  glassEffect\n  glassEffectTransition=\"materialize\"\n>\n  Foo\n</Text>\n```\n\n`matchedGeometry` works best with **glassEffectID** or **glassEffectUnion**.\n\n***\n\n# 5. glassEffectID and glassEffectUnion\n\nLiquid Glass can identify or group glass effects to create smooth geometry animations or unified material regions.\n\n***\n\n## 5.1 glassEffectID\n\nAssigns a unique identity to a glass effect for matched geometry animations.\n\n```tsx\n<Text\n  glassEffect\n  glassEffectID={{ id: \"avatar\", namespace }}\n>\n  Foo\n</Text>\n```\n\nViews with the same `id + namespace` can participate in matched geometry transitions.\n\n***\n\n## 5.2 glassEffectUnion\n\nGroups multiple glass effects into a single unioned glass region.\n\n```tsx\n<Text\n  glassEffect\n  glassEffectUnion={{ id: 1, namespace }}\n/>\n```\n\nThis merges material rendering across multiple views.\n\n***\n\n# 6. GlassEffectContainer\n\n`GlassEffectContainer` is used to group and manage correlated glass effects. Views inside the container:\n\n- Participate in matched geometry\n- Support glass unions\n- Render glass transitions more efficiently\n\n### Example\n\n```tsx\n<GlassEffectContainer>\n  <HStack spacing={40}>\n    <Image systemName=\"1.circle\" glassEffect />\n    <Image systemName=\"2.circle\" glassEffect />\n  </HStack>\n</GlassEffectContainer>\n```\n\nNo configuration is required; the container acts as a shared environment.\n\n***\n\n# 7. Glass Button Styles\n\nScripting supports additional iOS 26 button styles:\n\n- `\"glass\"`\n- `\"glassProminent\"`\n\n### Examples\n\n```tsx\n<Button title=\"Glass\" buttonStyle=\"glass\" />\n\n<Button title=\"Glass Prominent\" buttonStyle=\"glassProminent\" />\n\n<Button\n  title=\"Glass & Tint\"\n  buttonStyle=\"glass\"\n  tint=\"red\"\n/>\n```\n\nThese styles use Liquid Glass materials and integrate with tint and interaction behaviors.\n\n***\n\n# 8. Practical Example\n\nBelow is a real example combining multiple features:\n\n- Glass buttons\n- GlassEffectContainer\n- UIGlass configurations\n- Shape-based glass\n- Offset effects\n\n```tsx\n<GlassEffectContainer>\n  <HStack spacing={40}>\n    <Image\n      systemName=\"1.circle\"\n      frame={{ width: 80, height: 80 }}\n      font={36}\n      glassEffect\n      offset={{ x: 30, y: 0 }}\n    />\n    <Image\n      systemName=\"2.circle\"\n      frame={{ width: 80, height: 80 }}\n      font={36}\n      glassEffect\n      offset={{ x: -30, y: 0 }}\n    />\n  </HStack>\n</GlassEffectContainer>\n```\n\n***\n\n# 9. Best Practices\n\n### 1. Place related glass views inside a single GlassEffectContainer\n\nImproves performance and produces more consistent transitions.\n\n### 2. Provide glassEffectID for matched geometry animations\n\nWithout IDs, transitions cannot interpolate shapes.\n\n### 3. Use glassEffectUnion to merge nearby glass regions\n\nCreates a seamless material surface.\n\n### 4. Avoid deeply nested glass hierarchies\n\nPrefer using a container with ZStack for organization.\n\n### 5. Use UIGlass.identity when structure must remain but material disabled\n\nUseful for conditionally enabling glass without changing layout.\n","routePath":"/doc/View Modifiers/Liquid Glass/Liquid Glass Effect/","lang":"en","toc":[{"id":"definition","text":"Definition","depth":3,"charIndex":1201},{"id":"21-ways-to-use-glasseffect","text":"2.1 Ways to Use `glassEffect`","depth":2,"charIndex":1545},{"id":"1-enable-default-liquid-glass-material","text":"**1. Enable default Liquid Glass material**","depth":3,"charIndex":1579},{"id":"2-apply-a-specific-uiglass-instance","text":"**2. Apply a specific UIGlass instance**","depth":3,"charIndex":1710},{"id":"3-provide-a-specific-shape","text":"**3. Provide a specific Shape**","depth":3,"charIndex":1918},{"id":"4-boolean-shorthand","text":"**4. Boolean shorthand**","depth":3,"charIndex":2272},{"id":"static-factories","text":"Static factories","depth":3,"charIndex":2478},{"id":"instance-configuration","text":"Instance configuration","depth":3,"charIndex":2951},{"id":"transition-types","text":"Transition Types","depth":3,"charIndex":3259},{"id":"usage","text":"Usage","depth":3,"charIndex":3792},{"id":"51-glasseffectid","text":"5.1 glassEffectID","depth":2,"charIndex":4134},{"id":"52-glasseffectunion","text":"5.2 glassEffectUnion","depth":2,"charIndex":4420},{"id":"example","text":"Example","depth":3,"charIndex":4884},{"id":"examples","text":"Examples","depth":3,"charIndex":5281},{"id":"1-place-related-glass-views-inside-a-single-glasseffectcontainer","text":"1. Place related glass views inside a single GlassEffectContainer","depth":3,"charIndex":6188},{"id":"2-provide-glasseffectid-for-matched-geometry-animations","text":"2. Provide glassEffectID for matched geometry animations","depth":3,"charIndex":6323},{"id":"3-use-glasseffectunion-to-merge-nearby-glass-regions","text":"3. Use glassEffectUnion to merge nearby glass regions","depth":3,"charIndex":6438},{"id":"4-avoid-deeply-nested-glass-hierarchies","text":"4. Avoid deeply nested glass hierarchies","depth":3,"charIndex":6535},{"id":"5-use-uiglassidentity-when-structure-must-remain-but-material-disabled","text":"5. Use UIGlass.identity when structure must remain but material disabled","depth":3,"charIndex":6637}],"frontmatter":{},"version":"","description":"Scripting provides full support for the new Liquid Glass visual system introduced in iOS 26. This includes glassEffect, GlassEffectContainer, UIGlass, and related geometry-matching and transition APIs. These APIs allow scripts to create rich translucent materials, fluid glass shapes, matched geometry animations, and unioned glass regions directly within TSX. This document explains how the Liquid Glass APIs are used in Scripting, including: Concepts and fundamentalsHow to apply glass effectsUIGlass configurationGeometry transitionsglassEffect identifiers and unionsGlassEffectContainer behaviorPractical examples and best practices Liquid Glass is a new material and animation system in iOS 26. Compared to earlier blur or material effects, Liquid Glass provides: Fluid, dynamic shapes that follow view geometryTintable and interactive glass materialsGeometry-matched transitionsGrouped “glass unions” to merge multiple regionsHigh-performance rendering inside containers Any view that adopts GlassProps can apply a Liquid Glass effect using the glassEffect property. Definition"},{"title":"Example","content":"```tsx\n\n\nfunction View({\n  image\n}: {\n  image: UIImage\n}) {\n  // Access dismiss function.\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle=\"GlassEffect DEMO\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <ZStack>\n        <Image\n          image={image}\n          resizable\n          scaleToFill\n        />\n        <VStack>\n          <HStack>\n            <Button\n              title=\"Glass\"\n              action={() => { }}\n              buttonStyle=\"glass\"\n            />\n            <Button\n              title=\"Glass & Tint\"\n              action={() => { }}\n              buttonStyle=\"glass\"\n              tint=\"red\"\n            />\n          </HStack>\n          <HStack>\n            <Button\n              title=\"Glass Prominent\"\n              action={() => { }}\n              buttonStyle=\"glassProminent\"\n            />\n            <Button\n              title=\"Glass Prominent & Tint\"\n              action={() => { }}\n              buttonStyle=\"glassProminent\"\n              tint=\"red\"\n            />\n          </HStack>\n          <GlassEffectContainer>\n            <HStack spacing={40}>\n              <Image\n                systemName=\"1.circle\"\n                frame={{ width: 80, height: 80 }}\n                font={36}\n                glassEffect\n                offset={{ x: 30, y: 0 }}\n              />\n              <Image\n                systemName=\"2.circle\"\n                frame={{ width: 80, height: 80 }}\n                font={36}\n                glassEffect\n                offset={{ x: -30, y: 0 }}\n              />\n            </HStack>\n          </GlassEffectContainer>\n          <HStack spacing={12}>\n            <Text\n              padding\n              glassEffect\n            >Foo</Text>\n            <Text\n              padding\n              glassEffect={{\n                type: 'rect',\n                cornerRadius: 10\n              }}\n            >Foo</Text>\n            <Text\n              padding\n              glassEffect={UIGlass.regular().interactive()}\n            >Foo</Text>\n            <Text\n              padding\n              glassEffect={UIGlass.regular().tint(\"red\")}\n              foregroundStyle=\"white\"\n            >Foo</Text>\n          </HStack>\n        </VStack>\n      </ZStack>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  try {\n    const image = (await Photos.pickPhotos(1))?.at(0)\n    if (!image) {\n      throw new Error(\"You must pick an image as the background.\")\n    }\n    // Present view.\n    await Navigation.present({\n      element: <View\n        image={image}\n      />\n    })\n  } catch (e) {\n    console.present()\n    console.error(e)\n  }\n\n  // Avoiding memory leaks.\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/View Modifiers/Liquid Glass/Liquid Glass Effect/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Common","content":"These modifiers allow you to customize how rows and sections behave and appear inside a `<List>` component.\n\n## Applies To:\n\n- Individual **rows** (e.g., `<Text>`, `<HStack>`, etc. inside `<List>`)\n- Entire **sections** (e.g., `<Section>`)\n- Or directly on the `<List>` component itself\n\n***\n\n## `listItemTint`\n\nSets the **tint color** applied to the row or its accessories (e.g., icons, buttons).\n\n### Type\n\n```ts\nlistItemTint?: Color\n```\n\n### Description\n\n- Use this to override the inherited tint color for a row or its content.\n- Use `null` to avoid overriding the inherited tint.\n\n### Example\n\n```tsx\n<Text\n  listItemTint=\"green\"\n>\n  Tinted Row\n</Text>\n```\n\n***\n\n## `listRowInsets`\n\nApplies **padding (insets)** to a row in a list.\n\n### Type\n\n```ts\nlistRowInsets?: number | EdgeInsets\n```\n\n### Description\n\n- Use a single `number` to apply uniform padding.\n- Use an `EdgeInsets` object to apply individual insets for top, bottom, leading, and trailing.\n\n### Example\n\n```tsx\n<Text\n  listRowInsets={{\n    top: 10,\n    bottom: 10,\n    leading: 20,\n    trailing: 20\n  }}\n>\n  Custom Insets Row\n</Text>\n```\n\n***\n\n## `listRowSpacing`\n\nControls the **vertical spacing** between adjacent rows.\n\n### Type\n\n```ts\nlistRowSpacing?: number\n```\n\n### Example\n\n```tsx\n<List listRowSpacing={12}>\n  <Text>Row 1</Text>\n  <Text>Row 2</Text>\n</List>\n```\n\n***\n\n## `listRowSeparator`\n\nSets the **visibility of the separator line** for a specific row.\n\n### Type\n\n```ts\nlistRowSeparator?: Visibility | {\n  visibility: Visibility\n  edges: VerticalEdgeSet\n}\n```\n\n### `Visibility` options:\n\n- `\"visible\"` – Always show the separator\n- `\"hidden\"` – Hide the separator\n- `\"automatic\"` – System default behavior\n\n### `VerticalEdgeSet` options:\n\n- `\"top\"` | `\"bottom\"` | `\"all\"`\n\n### Example\n\n```tsx\n<Text\n  listRowSeparator={{\n    visibility: \"hidden\",\n    edges: \"bottom\"\n  }}\n>\n  No Bottom Separator\n</Text>\n```\n\n***\n\n## `listRowSeparatorTint`\n\nSets the **tint color of the separator** for a specific row.\n\n### Type\n\n```ts\nlistRowSeparatorTint?: Color | {\n  color: Color\n  edges: VerticalEdgeSet\n}\n```\n\n### Example\n\n```tsx\n<Text\n  listRowSeparatorTint={{\n    color: \"rgba(255,0,0,0.5)\",\n    edges: \"bottom\"\n  }}\n>\n  Colored Separator\n</Text>\n```\n\n***\n\n## `listRowBackground`\n\nPlaces a **custom background** behind a list row.\n\n### Type\n\n```ts\nlistRowBackground?: VirtualNode\n```\n\n### Example\n\n```tsx\n<Text\n  listRowBackground={\n    <Rectangle fill=\"#f0f0f0\" cornerRadius={10} />\n  }\n>\n  Row with background\n</Text>\n```\n\n***\n\n## `listSectionSpacing`\n\nControls the **spacing between adjacent list sections**.\n\n### Type\n\n```ts\nlistSectionSpacing?: ListSectionSpacing\n```\n\n### `ListSectionSpacing` options:\n\n- `\"default\"` – System default spacing\n- `\"compact\"` – Smaller spacing\n- A `number` – Custom spacing in points\n\n### Example\n\n```tsx\n<List listSectionSpacing=\"compact\">\n  <Section>...</Section>\n  <Section>...</Section>\n</List>\n```\n\n***\n\n## `listSectionSeparator`\n\nControls the **visibility of the separator** between list sections.\n\n### Type\n\n```ts\nlistSectionSeparator?: Visibility | {\n  visibility: Visibility\n  edges: VerticalEdgeSet\n}\n```\n\n### Example\n\n```tsx\n<Section\n  listSectionSeparator={{\n    visibility: \"hidden\",\n    edges: \"top\"\n  }}\n>\n  <Text>Section Content</Text>\n</Section>\n```\n\n***\n\n## `listSectionSeparatorTint`\n\nSets the **separator tint color** for a section.\n\n### Type\n\n```ts\nlistSectionSeparatorTint?: Color | {\n  color: Color\n  edges: VerticalEdgeSet\n}\n```\n\n### Example\n\n```tsx\n<Section\n  listSectionSeparatorTint={{\n    color: \"#cccccc\",\n    edges: \"bottom\"\n  }}\n>\n  <Text>Styled Section</Text>\n</Section>\n```\n\n***\n\n## Supporting Types\n\n## `EdgeInsets`\n\n```ts\n{\n  top: number\n  bottom: number\n  leading: number\n  trailing: number\n}\n```\n\n## `Visibility`\n\n```ts\n\"automatic\" | \"visible\" | \"hidden\"\n```\n\n## `VerticalEdgeSet`\n\n```ts\n\"top\" | \"bottom\" | \"all\"\n```\n\n## `Color` formats\n\nYou can define color in three ways:\n\n- Named keyword: `\"green\"`, `\"label\"`, etc.\n- Hex: `\"#ff0000\"`\n- RGBA: `\"rgba(255,0,0,1)\"`\n\n***\n\n## Summary Table\n\n| Modifier                   | Scope   | Description                       |\n| -------------------------- | ------- | --------------------------------- |\n| `listItemTint`             | Row     | Sets tint color for row content   |\n| `listRowInsets`            | Row     | Custom padding for row            |\n| `listRowSpacing`           | List    | Vertical spacing between rows     |\n| `listRowSeparator`         | Row     | Controls row separator visibility |\n| `listRowSeparatorTint`     | Row     | Tint color of row separator       |\n| `listRowBackground`        | Row     | Background behind a specific row  |\n| `listSectionSpacing`       | List    | Spacing between sections          |\n| `listSectionSeparator`     | Section | Visibility of section separator   |\n| `listSectionSeparatorTint` | Section | Tint color of section separator   |\n","routePath":"/doc/View Modifiers/List and Section View Modifiers/Common","lang":"en","toc":[{"id":"applies-to","text":"Applies To:","depth":2,"charIndex":109},{"id":"listitemtint","text":"`listItemTint`","depth":2,"charIndex":293},{"id":"type","text":"Type","depth":3,"charIndex":399},{"id":"description","text":"Description","depth":3,"charIndex":441},{"id":"example","text":"Example","depth":3,"charIndex":586},{"id":"listrowinsets","text":"`listRowInsets`","depth":2,"charIndex":668},{"id":"type-1","text":"Type","depth":3,"charIndex":738},{"id":"description-1","text":"Description","depth":3,"charIndex":795},{"id":"example-1","text":"Example","depth":3,"charIndex":959},{"id":"listrowspacing","text":"`listRowSpacing`","depth":2,"charIndex":1112},{"id":"type-2","text":"Type","depth":3,"charIndex":1191},{"id":"example-2","text":"Example","depth":3,"charIndex":1236},{"id":"listrowseparator","text":"`listRowSeparator`","depth":2,"charIndex":1343},{"id":"type-3","text":"Type","depth":3,"charIndex":1433},{"id":"visibility-options","text":"`Visibility` options:","depth":3,"charIndex":1540},{"id":"verticaledgeset-options","text":"`VerticalEdgeSet` options:","depth":3,"charIndex":1686},{"id":"example-3","text":"Example","depth":3,"charIndex":1752},{"id":"listrowseparatortint","text":"`listRowSeparatorTint`","depth":2,"charIndex":1893},{"id":"type-4","text":"Type","depth":3,"charIndex":1982},{"id":"example-4","text":"Example","depth":3,"charIndex":2078},{"id":"listrowbackground","text":"`listRowBackground`","depth":2,"charIndex":2227},{"id":"type-5","text":"Type","depth":3,"charIndex":2302},{"id":"example-5","text":"Example","depth":3,"charIndex":2355},{"id":"listsectionspacing","text":"`listSectionSpacing`","depth":2,"charIndex":2500},{"id":"type-6","text":"Type","depth":3,"charIndex":2583},{"id":"listsectionspacing-options","text":"`ListSectionSpacing` options:","depth":3,"charIndex":2644},{"id":"example-6","text":"Example","depth":3,"charIndex":2791},{"id":"listsectionseparator","text":"`listSectionSeparator`","depth":2,"charIndex":2915},{"id":"type-7","text":"Type","depth":3,"charIndex":3011},{"id":"example-7","text":"Example","depth":3,"charIndex":3122},{"id":"listsectionseparatortint","text":"`listSectionSeparatorTint`","depth":2,"charIndex":3279},{"id":"type-8","text":"Type","depth":3,"charIndex":3360},{"id":"example-8","text":"Example","depth":3,"charIndex":3460},{"id":"supporting-types","text":"Supporting Types","depth":2,"charIndex":3619},{"id":"edgeinsets","text":"`EdgeInsets`","depth":2,"charIndex":3640},{"id":"visibility","text":"`Visibility`","depth":2,"charIndex":1541},{"id":"verticaledgeset","text":"`VerticalEdgeSet`","depth":2,"charIndex":1687},{"id":"color-formats","text":"`Color` formats","depth":2,"charIndex":3861},{"id":"summary-table","text":"Summary Table","depth":2,"charIndex":4015}],"frontmatter":{},"version":"","description":"These modifiers allow you to customize how rows and sections behave and appear inside a <List> component."},{"title":"New List View Modifiers","content":"# Overview of Properties\n\n| Property                     | Type                                                        | Availability | Description                                                        |   |   |\n| ---------------------------- | ----------------------------------------------------------- | ------------ | ------------------------------------------------------------------ | - | - |\n| `listSectionIndexVisibility` | `Visibility`                                                | iOS 26.0+    | Controls the visibility of the List's right-side section index     |   |   |\n| `listSectionMargins`         | `number \\| EdgeSets \\| { edges: EdgeSets; length: number }` | iOS 26.0+    | Customizes section margins, replacing SwiftUI’s automatic defaults |   |   |\n| `sectionIndexLabel`          | `string`                                                    | iOS 26.0+    | Sets the character displayed in the section index                  |   |   |\n| `sectionActions`             | `VirtualNode`                                               | iOS 18.0+    | Adds custom actions to the section header area                     |   |   |\n\n***\n\n# 1. listSectionIndexVisibility\n\n```ts\n/**\n * Sets the visibility of the list section index.\n * @available iOS 26.0+.\n */\nlistSectionIndexVisibility?: Visibility\n```\n\n### Description\n\nControls whether the List shows the right-side section index (commonly used for A–Z navigation in contact lists).\n\nPossible values:\n\n- `\"visible\"`\n- `\"hidden\"`\n- `\"automatic\"` (default system behavior)\n\n### Example\n\n```tsx\n<List listSectionIndexVisibility=\"visible\">\n  <ForEach\n    data={groups}\n    builder={group => (\n      <Section\n        header={<Text>{group.title}</Text>}\n        sectionIndexLabel={group.title}\n      >\n        {group.items.map(item => <Text key={item}>{item}</Text>)}\n      </Section>\n    )}\n  />\n</List>\n```\n\n***\n\n# 2. listSectionMargins\n\n```ts\n/**\n * Set the section margins for the specific edges.\n * @available iOS 26.0+.\n */\nlistSectionMargins?: number | EdgeSets | {\n  edges: EdgeSets\n  length: number\n}\n```\n\n### Description\n\nCustomizes the margins of a section. When set, it **fully replaces** SwiftUI’s default section margin rules.\n\n### Supported Formats\n\n### 2.1 Single number\n\nApplies the same margin to all edges.\n\n```tsx\nlistSectionMargins={12}\n```\n\n### 2.2 EdgeSets\n\nApplies the specified edges with the default margin.\n\n```tsx\nlistSectionMargins={[\"horizontal\", \"top\"]}\n```\n\n### 2.3 Specific edges with length\n\nApplies a margin of `length` only to the specified edges.\n\n```tsx\nlistSectionMargins={{\n  edges: \"horizontal\",\n  length: 20\n}}\n```\n\nEquivalent to SwiftUI:\n\n```swift\n.listSectionMargins(.horizontal, 20)\n```\n\n### Example\n\n```tsx\n<Section\n  header={<Text>Favorites</Text>}\n  listSectionMargins={{\n  edges: \"horizontal\",\n  length: 20\n  }}\n>\n  <Text>Item A</Text>\n  <Text>Item B</Text>\n</Section>\n```\n\n***\n\n# 3. sectionIndexLabel\n\n```ts\n/**\n * Sets the label that is used in a section index.\n * @available iOS 26.0+.\n */\nsectionIndexLabel?: string\n```\n\n### Description\n\nSets the character or text displayed in the right-side section index for this section. Typically a single letter.\n\n### Example\n\n```tsx\n<Section\n  header={<Text>A</Text>}\n  sectionIndexLabel=\"A\"\n>\n  <Text>Adam</Text>\n  <Text>Ana</Text>\n</Section>\n```\n\n***\n\n# 4. sectionActions\n\n```ts\n/**\n * Adds custom actions to a section.\n * @available iOS 18.0+\n */\nsectionActions?: VirtualNode\n```\n\n### Description\n\nAdds custom UI elements such as buttons or menus to the section header’s trailing (accessory) area.\n\n### Example: Refresh button\n\n```tsx\n<Section\n  header={<Text>Downloads</Text>}\n  sectionActions={\n    <Button title=\"Refresh\" action={() => doRefresh()} />\n  }\n>\n  <Text>File 1</Text>\n  <Text>File 2</Text>\n</Section>\n```\n\n### Example: Menu with multiple actions\n\n```tsx\n<Section\n  header={<Text>Photos</Text>}\n  sectionActions={\n    <Menu title=\"Actions\">\n      <Button title=\"Upload All\" action={() => uploadAll()} />\n      <Button title=\"Delete All\" action={() => deleteAll()} />\n    </Menu>\n  }\n>\n  {photos.map(photo => <Text key={photo.id}>{photo.name}</Text>)}\n</Section>\n```\n\n***\n\n# Full Example\n\n```tsx\n<List listSectionIndexVisibility=\"visible\">\n  <ForEach\n    data={groups}\n    builder={group => (\n      <Section\n        header={<Text>{group.title}</Text>}\n        sectionIndexLabel={group.title}\n        listSectionMargins={12}\n        sectionActions={\n          <Button title=\"Refresh\" action={() => refreshGroup(group)} />\n        }\n      >\n        {group.items.map(item => <Text key={item}>{item}</Text>)}\n      </Section>\n    )}\n  />\n</List>\n```\n","routePath":"/doc/View Modifiers/List and Section View Modifiers/New List View Modifiers","lang":"en","toc":[{"id":"description","text":"Description","depth":3,"charIndex":1321},{"id":"example","text":"Example","depth":3,"charIndex":1541},{"id":"description-1","text":"Description","depth":3,"charIndex":2078},{"id":"supported-formats","text":"Supported Formats","depth":3,"charIndex":2205},{"id":"21-single-number","text":"2.1 Single number","depth":3,"charIndex":2228},{"id":"22-edgesets","text":"2.2 EdgeSets","depth":3,"charIndex":2326},{"id":"23-specific-edges-with-length","text":"2.3 Specific edges with length","depth":3,"charIndex":2453},{"id":"example-1","text":"Example","depth":3,"charIndex":2696},{"id":"description-2","text":"Description","depth":3,"charIndex":3037},{"id":"example-2","text":"Example","depth":3,"charIndex":3169},{"id":"description-3","text":"Description","depth":3,"charIndex":3440},{"id":"example-refresh-button","text":"Example: Refresh button","depth":3,"charIndex":3558},{"id":"example-menu-with-multiple-actions","text":"Example: Menu with multiple actions","depth":3,"charIndex":3780}],"frontmatter":{},"version":"","description":"Description Controls whether the List shows the right-side section index (commonly used for A–Z navigation in contact lists). Possible values: \"visible\"\"hidden\"\"automatic\" (default system behavior) Example Description Customizes the margins of a section. When set, it fully replaces SwiftUI’s default section margin rules. Supported Formats 2.1 Single number Applies the same margin to all edges. 2.2 EdgeSets Applies the specified edges with the default margin. 2.3 Specific edges with length Applies a margin of length only to the specified edges. Equivalent to SwiftUI: Example Description Sets the character or text displayed in the right-side section index for this section. Typically a single letter. Example Description Adds custom UI elements such as buttons or menus to the section header’s trailing (accessory) area. Example: Refresh button Example: Menu with multiple actions"},{"title":"LiveActivity View Modifiers","content":"Scripting provides two view modifiers that customize the appearance of Live Activities on the Lock Screen. These modifiers control the background tint color of the Live Activity and the foreground color of the system-provided action button.\n\nThese properties are designed to match SwiftUI’s Live Activity customization options.\n\n***\n\n# Modifier Definitions\n\n```ts\n/**\n * Sets the tint color for the background of a Live Activity that appears on the Lock Screen.\n */\nactivityBackgroundTint?: Color | {\n  light: Color\n  dark: Color\n}\n\n/**\n * Sets the text (foreground) color for the system-provided auxiliary action button\n * that appears next to a Live Activity on the Lock Screen.\n */\nactivitySystemActionForegroundColor?: Color | {\n  light: Color\n  dark: Color\n}\n```\n\n***\n\n# Usage Constraints\n\nThese modifiers **can only be applied to the `content` view** of the Live Activity UI.\n\nThey **do not** take effect when placed in:\n\n- `compactLeading`\n- `compactTrailing`\n- `minimal`\n\nOnly the **full-size Lock Screen presentation** (the `content` region) supports these appearance customizations.\n\n***\n\n# Modifier Details\n\n## 1. activityBackgroundTint\n\n**Type:** `Color | { light: Color; dark: Color }`\n**Description:**\nSets the tint color used as the background of the Live Activity when displayed on the Lock Screen.\n\nThis influences the main card background rendered by the system.\n\n### Typical Use Cases\n\n- Applying a brand color as the Live Activity background\n- Giving different Live Activities distinct themes\n- Improving readability by contrasting text and background colors\n\n***\n\n## 2. activitySystemActionForegroundColor\n\n**Type:** `Color | { light: Color; dark: Color }`\n**Description:**\nSpecifies the foreground (text/icon) color of the system’s auxiliary action button that may appear next to the Live Activity on the Lock Screen.\n\n### Typical Use Cases\n\n- Ensuring button text is readable on dark or bright backgrounds\n- Highlighting an important system-provided action\n- Matching the app’s color theme\n\n***\n\n# Usage Example (Content Only)\n\nThese modifiers must be applied to the **content** view inside your Live Activity UI builder:\n\n```tsx\nfunction ActivityView() {\n  <LiveActivityUI\n    content={\n      <ContentView\n        activityBackgroundTint={\"blue\"}\n        activitySystemActionForegroundColor={\"white\"}\n      />\n    }\n    compactLeading={...}\n    compactTrailing={...}\n    minimal={<Image systemName=\"clock\" />}\n  >\n    <LiveActivityUIExpandedCenter>\n      <ContentView />\n    </LiveActivityUIExpandedCenter>\n  </LiveActivityUI>\n}\n```\n\n***\n\n# Additional Notes\n\n1. These modifiers affect only the Lock Screen presentation of the Live Activity.\n2. They do not modify the compact or minimal variants shown in the Dynamic Island.\n3. If not provided, the system will use default styles consistent with SwiftUI’s behavior.\n","routePath":"/doc/View Modifiers/LiveActivity View Modifiers","lang":"en","toc":[{"id":"1-activitybackgroundtint","text":"1. activityBackgroundTint","depth":2,"charIndex":1119},{"id":"typical-use-cases","text":"Typical Use Cases","depth":3,"charIndex":1382},{"id":"2-activitysystemactionforegroundcolor","text":"2. activitySystemActionForegroundColor","depth":2,"charIndex":1585},{"id":"typical-use-cases-1","text":"Typical Use Cases","depth":3,"charIndex":1841}],"frontmatter":{},"version":"","description":"Scripting provides two view modifiers that customize the appearance of Live Activities on the Lock Screen. These modifiers control the background tint color of the Live Activity and the foreground color of the system-provided action button. These properties are designed to match SwiftUI’s Live Activity customization options. These modifiers can only be applied to the content view of the Live Activity UI. They do not take effect when placed in: compactLeadingcompactTrailingminimal Only the full-size Lock Screen presentation (the content region) supports these appearance customizations."},{"title":"Navigation View Modifiers","content":"The Scripting app supports a set of navigation-related view modifiers that enable developers to control how views are presented within navigation stacks. These modifiers allow for the customization of navigation titles, title display styles, and back button behavior—closely following the conventions of SwiftUI's navigation system.\n\n***\n\n## `navigationTitle`\n\n```ts\nnavigationTitle?: string\n```\n\nSpecifies the navigation title of the view.\n\n### Description\n\n- On **iOS**, the navigation title appears in the navigation bar when the view is part of a navigation stack.\n- On **iPadOS**, the title of the primary navigation destination is also used as the app window's title in the App Switcher.\n\n***\n\n## `navigationBarTitleDisplayMode`\n\n```ts\nnavigationBarTitleDisplayMode?: NavigationBarTitleDisplayMode\n```\n\nControls the display style of the navigation title.\n\n### Enum: `NavigationBarTitleDisplayMode`\n\n```ts\ntype NavigationBarTitleDisplayMode = \"automatic\" | \"large\" | \"inline\"\n```\n\n- **`automatic`**: The system chooses the most appropriate display style based on context.\n- **`large`**: Displays the title in a prominent, large style (typically for root views).\n- **`inline`**: Displays the title in-line with the navigation bar controls, using a compact layout.\n\n***\n\n## `navigationBarBackButtonHidden`\n\n```ts\nnavigationBarBackButtonHidden?: boolean\n```\n\nHides or shows the navigation bar back button.\n\n### Description\n\n- When set to `true`, the default back button is not shown for the view.\n- This is useful when implementing custom navigation controls or when the default back action should be disabled.\n\n***\n\n## Usage Example\n\n```tsx\n<VStack\n  navigationTitle={\"Profile\"}\n  navigationBarTitleDisplayMode={\"inline\"}\n  navigationBarBackButtonHidden={true}\n>\n  <Text>Welcome to the Profile screen</Text>\n</VStack>\n```\n\nIn this example:\n\n- The view’s title is set to `\"Profile\"` and will be shown in the navigation bar.\n- The title uses the `inline` display style.\n- The default back button is hidden.\n","routePath":"/doc/View Modifiers/Navigation View Modifiers","lang":"en","toc":[{"id":"navigationtitle","text":"`navigationTitle`","depth":2,"charIndex":339},{"id":"description","text":"Description","depth":3,"charIndex":442},{"id":"navigationbartitledisplaymode","text":"`navigationBarTitleDisplayMode`","depth":2,"charIndex":700},{"id":"enum-navigationbartitledisplaymode","text":"Enum: `NavigationBarTitleDisplayMode`","depth":3,"charIndex":862},{"id":"navigationbarbackbuttonhidden","text":"`navigationBarBackButtonHidden`","depth":2,"charIndex":1274},{"id":"description-1","text":"Description","depth":3,"charIndex":1409},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":1619}],"frontmatter":{},"version":"","description":"The Scripting app supports a set of navigation-related view modifiers that enable developers to control how views are presented within navigation stacks. These modifiers allow for the customization of navigation titles, title display styles, and back button behavior—closely following the conventions of SwiftUI's navigation system."},{"title":"Picture in Pictuer View Modifiers <span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO","content":"# Picture in Pictuer View Modifiers \\<span style={{ backgroundColor:'#007bff',color:'white',borderRadius:'6px',padding:'2px 6px',fontSize:'0.7em',marginLeft:'8px'}}>PRO</span>\n\nScripting provides a set of Picture in Picture (PiP) view modifiers that allow developers to render any SwiftUI view inside a system PiP window.\nThese APIs abstract away the underlying `AVPictureInPicture` implementation and provide a declarative, script-friendly way to control PiP presentation, interaction, and lifecycle.\n\nPiP is suitable for the following scenarios:\n\n- Real-time status display (timers, workouts, progress indicators)\n- Audio or video playback companion UI\n- Lightweight views that should remain visible when the app enters background\n\n***\n\n## 1. PiPProps API Definition\n\n```ts\ntype PiPProps = {\n  pip?: {\n    isPresented: Observable<boolean>\n    maximumUpdatesPerSecond?: number\n    content: VirtualNode\n  }\n  \n  onPipStart?: () => void\n  onPipStop?: () => void\n  onPipPlayPauseToggle?: (isPlaying: boolean) => void\n  onPipSkip?: (isForward: boolean) => void\n  onPipRenderSizeChanged?: (size: Size) => void\n\n  pipHideOnForeground?: boolean\n  pipShowOnBackground?: boolean\n}\n```\n\n***\n\n## 2. Core Properties\n\n### 2.1 `pip.isPresented`\n\n```ts\nisPresented: Observable<boolean>\n```\n\n- The **single source of truth** for PiP presentation\n- `true`: PiP window is presented\n- `false`: PiP window is dismissed\n\nThis value is typically controlled by user actions or app lifecycle events.\n\n***\n\n### 2.2 `pip.content`\n\n```ts\ncontent: VirtualNode\n```\n\n- The view rendered inside the PiP window\n- Strongly recommended to be a **dedicated PiP view**\n- Should be minimal, stable, and predictable in layout\n\n***\n\n### 2.3 `pip.maximumUpdatesPerSecond`\n\n```ts\nmaximumUpdatesPerSecond?: number\n```\n\n- **Default value: 30**\n- Limits how often the PiP view can be re-rendered per second\n- One of the most important performance-related parameters\n\n#### Recommended values\n\n- **No animation / low-frequency updates**\n  Use `1–5`\n\n- **Animated PiP views**\n  Can be set to `60`\n\nImportant:\nSetting this value to `60` has a **significant performance impact**, increasing both CPU and GPU usage. This should only be used when animation is strictly required.\n\n***\n\n## 3. PiP Lifecycle Callbacks\n\n(Only valid inside the PiP view)\n\n### 3.1 `onPipStart`\n\n```ts\nonPipStart?: () => void\n```\n\n- Called when the PiP window is successfully presented\n- Typical use cases:\n\n  - Start timers\n  - Begin state updates\n  - Subscribe to data streams\n\n***\n\n### 3.2 `onPipStop`\n\n```ts\nonPipStop?: () => void\n```\n\n- Called when PiP is dismissed or stopped by the system\n- All side effects should be cleaned up here:\n\n  - Timers\n  - Subscriptions\n  - Long-running tasks\n\n***\n\n## 4. PiP Interaction Callbacks\n\n(Only valid inside the PiP view)\n\n### 4.1 Play / Pause Toggle\n\n```ts\nonPipPlayPauseToggle?: (isPlaying: boolean) => void\n```\n\n- Triggered when the user taps the play/pause control in the PiP window\n- `isPlaying` indicates the resulting playback state\n- Commonly used for audio, video, or workout scenarios\n\n***\n\n### 4.2 Skip Forward / Backward\n\n```ts\nonPipSkip?: (isForward: boolean) => void\n```\n\n- `true`: skip forward\n- `false`: skip backward\n\n***\n\n## 5. Render Size Changes\n\n### `onPipRenderSizeChanged`\n\n```ts\nonPipRenderSizeChanged?: (size: Size) => void\n```\n\n- Called whenever the PiP render size changes\n- Can be used to adapt layout for different PiP sizes or orientations\n\n***\n\n## 6. Foreground and Background Behavior\n\n(Only valid inside the PiP view)\n\n### 6.1 `pipHideOnForeground`\n\n```ts\npipHideOnForeground?: boolean\n```\n\n- When the app enters foreground:\n\n  - Determines whether an active PiP session should be stopped\n- Default: `false`\n\n***\n\n### 6.2 `pipShowOnBackground`\n\n```ts\npipShowOnBackground?: boolean\n```\n\n- Automatically starts PiP when the app moves to background\n- Commonly used for audio playback or real-time status displays\n\n***\n\n## 7. Complete Code Example\n\n### 7.1 PiP Content View\n\n```tsx\nfunction PipView() {\n  const started = useObservable(false)\n  const count = useObservable(0)\n\n  useEffect(() => {\n    if (!started.value) {\n      return\n    }\n\n    let timerId: number\n\n    function startTimer() {\n      timerId = setTimeout(() => {\n        count.setValue(count.value + 1)\n        startTimer()\n      }, 1000)\n    }\n\n    startTimer()\n\n    return () => {\n      clearTimeout(timerId)\n    }\n  }, [started.value])\n\n  return <HStack\n    onPipStart={() => {\n      started.setValue(true)\n    }}\n    frame={{\n      width: Device.screen.width,\n      height: 50\n    }}\n    background=\"systemBlue\"\n  >\n    <Image\n      systemName=\"figure.walk\"\n      font=\"title\"\n    />\n    <Text foregroundStyle=\"white\">\n      Count: {count.value}\n    </Text>\n  </HStack>\n}\n```\n\n***\n\n### 7.2 Enabling PiP on a Page\n\n```tsx\nfunction PageView() {\n  const dismiss = Navigation.useDismiss()\n  const pipPresented = useObservable(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"PiP Demo\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n      pip={{\n        isPresented: pipPresented,\n        content: <PipView />\n      }}\n    >\n      <Button\n        title=\"Toggle PiP\"\n        action={() => {\n          pipPresented.setValue(!pipPresented.value)\n        }}\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## 8. Critical Notes\n\n### 8.1 PiP views are constructed even when not presented\n\nWhen `isPresented` is `false`:\n\n- The PiP view is **not visible**\n- But it is still constructed and participates in state binding\n\nTherefore:\n\n- Do not perform heavy computation in the view body\n- Delay all side effects until `onPipStart`\n- Always clean up in `onPipStop`\n\n***\n\n### 8.2 PiP-specific modifiers must be used only in the PiP view\n\nThe following properties and callbacks:\n\n- `onPipStart`\n- `onPipStop`\n- `onPipPlayPauseToggle`\n- `onPipSkip`\n- `onPipRenderSizeChanged`\n- `pipHideOnForeground`\n- `pipShowOnBackground`\n\n**Must be declared on the PiP content view (PipView)**.\n\nDeclaring them on a normal page view will result in:\n\n- No callbacks being triggered\n- Missing or incorrect state updates\n- Undefined behavior\n\n***\n\n### 8.3 PiP is not suitable for complex UI\n\nAvoid using the following inside PiP:\n\n- `List` or `ScrollView`\n- Complex or chained animations\n- High-frequency state updates\n- Network-driven UI rendering\n\nPiP is designed for:\n\nLightweight, stable, and continuously visible system-level companion views.\n\n***\n\n## 9. Recommended Best Practices\n\n- Design a dedicated, minimal PiP view\n- Keep layout fixed and predictable\n- Tune `maximumUpdatesPerSecond` carefully\n- Start all logic in `onPipStart`\n- Always release resources in `onPipStop`\n- Never reuse complex page-level views inside PiP\n","routePath":"/doc/View Modifiers/Picture in Pictuer View Modifiers","lang":"en","toc":[{"id":"1-pipprops-api-definition","text":"1. PiPProps API Definition","depth":2,"charIndex":739},{"id":"2-core-properties","text":"2. Core Properties","depth":2,"charIndex":1183},{"id":"21-pipispresented","text":"2.1 `pip.isPresented`","depth":3,"charIndex":1206},{"id":"22-pipcontent","text":"2.2 `pip.content`","depth":3,"charIndex":1483},{"id":"23-pipmaximumupdatespersecond","text":"2.3 `pip.maximumUpdatesPerSecond`","depth":3,"charIndex":1695},{"id":"recommended-values","text":"Recommended values","depth":4,"charIndex":1924},{"id":"3-pip-lifecycle-callbacks","text":"3. PiP Lifecycle Callbacks","depth":2,"charIndex":2235},{"id":"31-onpipstart","text":"3.1 `onPipStart`","depth":3,"charIndex":2300},{"id":"32-onpipstop","text":"3.2 `onPipStop`","depth":3,"charIndex":2511},{"id":"4-pip-interaction-callbacks","text":"4. PiP Interaction Callbacks","depth":2,"charIndex":2727},{"id":"41-play--pause-toggle","text":"4.1 Play / Pause Toggle","depth":3,"charIndex":2794},{"id":"42-skip-forward--backward","text":"4.2 Skip Forward / Backward","depth":3,"charIndex":3072},{"id":"5-render-size-changes","text":"5. Render Size Changes","depth":2,"charIndex":3211},{"id":"onpiprendersizechanged","text":"`onPipRenderSizeChanged`","depth":3,"charIndex":3238},{"id":"6-foreground-and-background-behavior","text":"6. Foreground and Background Behavior","depth":2,"charIndex":3447},{"id":"61-piphideonforeground","text":"6.1 `pipHideOnForeground`","depth":3,"charIndex":3523},{"id":"62-pipshowonbackground","text":"6.2 `pipShowOnBackground`","depth":3,"charIndex":3718},{"id":"7-complete-code-example","text":"7. Complete Code Example","depth":2,"charIndex":3920},{"id":"71-pip-content-view","text":"7.1 PiP Content View","depth":3,"charIndex":3949},{"id":"72-enabling-pip-on-a-page","text":"7.2 Enabling PiP on a Page","depth":3,"charIndex":4753},{"id":"8-critical-notes","text":"8. Critical Notes","depth":2,"charIndex":5409},{"id":"81-pip-views-are-constructed-even-when-not-presented","text":"8.1 PiP views are constructed even when not presented","depth":3,"charIndex":5431},{"id":"82-pip-specific-modifiers-must-be-used-only-in-the-pip-view","text":"8.2 PiP-specific modifiers must be used only in the PiP view","depth":3,"charIndex":5768},{"id":"83-pip-is-not-suitable-for-complex-ui","text":"8.3 PiP is not suitable for complex UI","depth":3,"charIndex":6225},{"id":"9-recommended-best-practices","text":"9. Recommended Best Practices","depth":2,"charIndex":6531}],"frontmatter":{},"version":"","description":"Scripting provides a set of Picture in Picture (PiP) view modifiers that allow developers to render any SwiftUI view inside a system PiP window.\nThese APIs abstract away the underlying AVPictureInPicture implementation and provide a declarative, script-friendly way to control PiP presentation, interaction, and lifecycle. PiP is suitable for the following scenarios: Real-time status display (timers, workouts, progress indicators)Audio or video playback companion UILightweight views that should remain visible when the app enters background"},{"title":"Presentation View Modifiers","content":"These view modifiers customize the appearance, sizing, and interaction behavior of views presented using `sheet` in the **Scripting** app. They allow for adaptive presentations, resizing with detents, background interaction control, and more.\n\n> Apply these modifiers to the **root view** of the sheet content (e.g., `<VStack>`, `<NavigationStack>`, or `<List>`).\n\n***\n\n## `presentationCompactAdaptation`\n\nDefines how a sheet adapts in **compact horizontal or vertical size classes**.\n\n### Type\n\n```ts\npresentationCompactAdaptation?: PresentationAdaptation | {\n  horizontal: PresentationAdaptation\n  vertical: PresentationAdaptation\n}\n```\n\n### `PresentationAdaptation` options:\n\n- `\"automatic\"` – System default behavior\n- `\"fullScreenCover\"` – Adapts to full-screen presentation\n- `\"sheet\"` – Adapts to sheet-style presentation\n- `\"popover\"` – Adapts to popover-style (where supported)\n- `\"none\"` – Disables adaptation\n\n### Example\n\n```tsx\n<NavigationStack\n  presentationCompactAdaptation={{\n    horizontal: \"fullScreenCover\",\n    vertical: \"sheet\"\n  }}\n>\n  {/* Sheet content */}\n</NavigationStack>\n```\n\n***\n\n## `presentationDragIndicator`\n\nControls visibility of the drag indicator at the top of the sheet.\n\n### Type\n\n```ts\npresentationDragIndicator?: \"visible\" | \"hidden\" | \"automatic\"\n```\n\n### Example\n\n```tsx\n<VStack presentationDragIndicator=\"visible\">\n  <Text>Pull the indicator to resize</Text>\n</VStack>\n```\n\n***\n\n## `presentationDetents`\n\nDefines the **available heights** (\"detents\") that the sheet can rest at. If multiple detents are provided, the user can **drag the sheet** to resize it.\n\n### Type\n\n```ts\npresentationDetents?: PresentationDetent[]\n```\n\n### `PresentationDetent` values:\n\n- `\"medium\"` – Approximately half screen height (not available in compact vertical size class)\n- `\"large\"` – Full screen height\n- `number > 1` – A fixed height in points\n- `number between 0 and 1` – A **fractional height** (e.g., `0.5` means 50% of available height)\n\n### Example\n\n```tsx\n<VStack presentationDetents={[200, \"medium\", \"large\"]}>\n  <Text>Drag the sheet to change its height</Text>\n</VStack>\n```\n\n***\n\n## `presentationBackgroundInteraction`\n\nDefines whether and how the user can interact with **views behind** the presented sheet.\n\n### Type\n\n```ts\npresentationBackgroundInteraction?:\n  | \"automatic\"\n  | \"enabled\"\n  | \"disabled\"\n  | { enabledUpThrough: PresentationDetent }\n```\n\n### Example\n\nAllow background interaction **up to** a certain sheet size:\n\n```tsx\n<VStack presentationBackgroundInteraction={{\n  enabledUpThrough: \"medium\"\n}}>\n  <Text>Background is interactive when sheet is small</Text>\n</VStack>\n```\n\n***\n\n## `presentationContentInteraction`\n\nControls how the sheet prioritizes **resizing vs scrolling** when the user swipes up.\n\n### Type\n\n```ts\npresentationContentInteraction?: \"automatic\" | \"resizes\" | \"scrolls\"\n```\n\n### Description\n\n- `\"resizes\"`: Swipe gesture first resizes the sheet, then scrolls content.\n- `\"scrolls\"`: Content inside (e.g., `ScrollView`) scrolls immediately.\n- `\"automatic\"`: System default (usually prefers resizing first).\n\n### Example\n\n```tsx\n<ScrollView presentationContentInteraction=\"scrolls\">\n  {/* Scrolls immediately, doesn't trigger resize */}\n</ScrollView>\n```\n\n***\n\n## `presentationCornerRadius`\n\nSets a custom **corner radius** for the sheet background.\n\n### Type\n\n```ts\npresentationCornerRadius?: number\n```\n\n### Example\n\n```tsx\n<VStack presentationCornerRadius={16}>\n  <Text>Sheet has rounded corners</Text>\n</VStack>\n```\n\n***\n\n## Full Usage Example\n\n```tsx\nfunction SheetPage({ onDismiss }: {\n  onDismiss: () => void\n}) {\n  return <NavigationStack>\n    <List navigationTitle=\"Other Page\">\n      <Text font=\"title\" padding={50}>\n        Drag the indicator to resize the sheet height.\n      </Text>\n      <Button\n        title=\"Dismiss\"\n        action={onDismiss}\n      />\n    </List>\n  </NavigationStack>\n}\n\n<Button\n  title=\"Present\"\n  action={() => setIsPresented(true)}\n  sheet={{\n    isPresented: isPresented,\n    onChanged: setIsPresented,\n    content: <SheetPage\n      presentationDragIndicator=\"visible\"\n      presentationDetents={[200, \"medium\", \"large\"]}\n      onDismiss={() => setIsPresented(false)}\n    />\n  }}\n/>\n```\n\n***\n\n## Summary\n\n| Modifier                            | Description                                                             |\n| ----------------------------------- | ----------------------------------------------------------------------- |\n| `presentationCompactAdaptation`     | Defines how the sheet adapts in compact size classes                    |\n| `presentationDragIndicator`         | Shows or hides the drag indicator                                       |\n| `presentationDetents`               | Defines the heights the sheet can rest at                               |\n| `presentationBackgroundInteraction` | Controls interaction with the background view during sheet presentation |\n| `presentationContentInteraction`    | Determines whether sheet resizes or content scrolls on swipe            |\n| `presentationCornerRadius`          | Sets a custom corner radius for the sheet                               |\n","routePath":"/doc/View Modifiers/Presentation View Modifiers","lang":"en","toc":[{"id":"presentationcompactadaptation","text":"`presentationCompactAdaptation`","depth":2,"charIndex":370},{"id":"type","text":"Type","depth":3,"charIndex":486},{"id":"presentationadaptation-options","text":"`PresentationAdaptation` options:","depth":3,"charIndex":640},{"id":"example","text":"Example","depth":3,"charIndex":921},{"id":"presentationdragindicator","text":"`presentationDragIndicator`","depth":2,"charIndex":1110},{"id":"type-1","text":"Type","depth":3,"charIndex":1210},{"id":"example-1","text":"Example","depth":3,"charIndex":1294},{"id":"presentationdetents","text":"`presentationDetents`","depth":2,"charIndex":1423},{"id":"type-2","text":"Type","depth":3,"charIndex":1604},{"id":"presentationdetent-values","text":"`PresentationDetent` values:","depth":3,"charIndex":1668},{"id":"example-2","text":"Example","depth":3,"charIndex":1970},{"id":"presentationbackgroundinteraction","text":"`presentationBackgroundInteraction`","depth":2,"charIndex":2117},{"id":"type-3","text":"Type","depth":3,"charIndex":2247},{"id":"example-3","text":"Example","depth":3,"charIndex":2394},{"id":"presentationcontentinteraction","text":"`presentationContentInteraction`","depth":2,"charIndex":2635},{"id":"type-4","text":"Type","depth":3,"charIndex":2759},{"id":"description","text":"Description","depth":3,"charIndex":2849},{"id":"example-4","text":"Example","depth":3,"charIndex":3081},{"id":"presentationcornerradius","text":"`presentationCornerRadius`","depth":2,"charIndex":3233},{"id":"type-5","text":"Type","depth":3,"charIndex":3323},{"id":"example-5","text":"Example","depth":3,"charIndex":3378},{"id":"full-usage-example","text":"Full Usage Example","depth":2,"charIndex":3498},{"id":"summary","text":"Summary","depth":2,"charIndex":4204}],"frontmatter":{},"version":"","description":"These view modifiers customize the appearance, sizing, and interaction behavior of views presented using sheet in the Scripting app. They allow for adaptive presentations, resizing with detents, background interaction control, and more. Apply these modifiers to the root view of the sheet content (e.g., <VStack>, <NavigationStack>, or <List>)."},{"title":"Redaction View Modifiers","content":"# Redaction View Modifiers\n\nThe Scripting app supports view modifiers for applying redaction to a view hierarchy. Redaction allows views to display placeholder, obscured, or invalidated content, commonly used to indicate loading states, protect sensitive data, or mark content as outdated.\n\nThese modifiers closely follow SwiftUI's `redacted(reason:)` and `unredacted()` API behavior.\n\n***\n\n## `redacted`\n\n```ts\nredacted?: RedactedReason | null\n```\n\nApplies a redaction reason to the view hierarchy, changing the visual appearance of content according to the specified context.\n\n### Description\n\nRedaction visually alters the view and its descendants to reflect the current content state without modifying the underlying data. Use this modifier to display placeholders, hide private data, or indicate invalid content.\n\n### Enum: `RedactedReason`\n\n```ts\ntype RedactedReason = \"placeholder\" | \"invalidated\" | \"privacy\"\n```\n\n- **`placeholder`**: Displays generic placeholder visuals, typically used during loading.\n- **`invalidated`**: Indicates the content is stale or awaiting a refresh.\n- **`privacy`**: Obscures content to protect private or sensitive information.\n\n### Example\n\n```tsx\n<Text\n  redacted={\"placeholder\"}\n>\n  Loading text...\n</Text>\n```\n\nIn this example, the text will be displayed as a placeholder until real data is available.\n\n***\n\n## `unredacted`\n\n```ts\nunredacted?: boolean\n```\n\nRemoves any previously applied redaction from the view hierarchy.\n\n### Description\n\nSet this property to `true` to opt a view out of inherited redaction, restoring its original appearance even when an ancestor view is redacted.\n\n### Example\n\n```tsx\n<VStack redacted={\"placeholder\"}>\n  <Text>Loading...</Text>\n  <Text unredacted={true}>This content is not redacted</Text>\n</VStack>\n```\n\nIn this example, the entire `VStack` is redacted, but the second `Text` view will render normally due to `unredacted: true`.\n\n***\n\n## Usage Notes\n\n- Redaction is purely visual and does not alter layout or accessibility semantics.\n- `unredacted` is effective only when applied to a view that inherits redaction from an ancestor.\n- Setting `redacted` to `null` removes any redaction from the current view.\n","routePath":"/doc/View Modifiers/Redaction View Modifiers","lang":"en","toc":[{"id":"redacted","text":"`redacted`","depth":2,"charIndex":391},{"id":"description","text":"Description","depth":3,"charIndex":579},{"id":"enum-redactedreason","text":"Enum: `RedactedReason`","depth":3,"charIndex":819},{"id":"example","text":"Example","depth":3,"charIndex":1167},{"id":"unredacted","text":"`unredacted`","depth":2,"charIndex":1350},{"id":"description-1","text":"Description","depth":3,"charIndex":1466},{"id":"example-1","text":"Example","depth":3,"charIndex":1628},{"id":"usage-notes","text":"Usage Notes","depth":2,"charIndex":1916}],"frontmatter":{},"version":"","description":"The Scripting app supports view modifiers for applying redaction to a view hierarchy. Redaction allows views to display placeholder, obscured, or invalidated content, commonly used to indicate loading states, protect sensitive data, or mark content as outdated. These modifiers closely follow SwiftUI's redacted(reason:) and unredacted() API behavior."},{"title":"Safe Area","content":"Safe area modifiers in **Scripting** allow you to **adjust layout behavior relative to the system-defined safe areas**, such as the areas around notches, toolbars, or the on-screen keyboard.\n\n***\n\n## `safeAreaPadding`\n\nAdds custom padding inside the safe area of a view. This modifier adjusts the visible content region by extending or inseting from the edges defined by the system’s safe area (e.g., accounting for the notch, home indicator, or rounded corners).\n\n### Type\n\n```ts\nsafeAreaPadding?: \n  true | \n  number | \n  {\n    horizontal?: number | true\n    vertical?: number | true\n    leading?: number | true\n    trailing?: number | true\n    top?: number | true\n    bottom?: number | true\n  }\n```\n\n***\n\n### Description\n\nThis modifier gives fine-grained control over how much padding should be added inside the safe area for specific edges or directions. You can either apply:\n\n- **A default system padding** by passing `true`\n- **A uniform padding** value by passing a `number`\n- **Directional padding** for each edge using a detailed configuration object\n\nThis modifier is particularly useful when you want the view to respect or override the system safe area while maintaining proper layout spacing.\n\n***\n\n### Usage Options\n\n- `true`: Applies default system padding on all safe area edges\n- `number`: Applies the specified number of points as uniform padding on all edges\n- `object`: Specifies padding per edge or direction\n\n***\n\n### Object Properties\n\n- `horizontal`: Padding for both `leading` and `trailing` edges\n- `vertical`: Padding for both `top` and `bottom` edges\n- `leading`, `trailing`, `top`, `bottom`: Individual edge-specific padding\n- Values can be a `number` or `true` to apply system default padding for that edge\n\n***\n\n### Example: Default Padding\n\n```tsx\n<VStack safeAreaPadding={true}>\n  <Text>Hello</Text>\n</VStack>\n```\n\nApplies system default padding on all safe area edges.\n\n***\n\n### Example: Custom Padding\n\n```tsx\n<VStack\n  safeAreaPadding={{\n    top: 20,\n    bottom: true,\n    horizontal: 12\n  }}\n>\n  <Text>Content</Text>\n</VStack>\n```\n\nAdds 20 points of padding at the top, system default padding at the bottom, and 12 points on both horizontal edges.\n\n***\n\n## `safeAreaInset`\n\nInserts a custom view into the safe area edge of another view.\n\n### Type\n\n```ts\nsafeAreaInset?: {\n  top?: {\n    alignment?: HorizontalAlignment\n    spacing?: number\n    content: VirtualNode\n  },\n  bottom?: {\n    alignment?: HorizontalAlignment\n    spacing?: number\n    content: VirtualNode\n  },\n  leading?: {\n    alignment?: VerticalAlignment\n    spacing?: number\n    content: VirtualNode\n  },\n  trailing?: {\n    alignment?: VerticalAlignment\n    spacing?: number\n    content: VirtualNode\n  }\n}\n```\n\n***\n\n### Description\n\n- Adds content (such as toolbars, controls, or info bars) to the specified safe area edge: `top`, `bottom`, `leading`, or `trailing`.\n- You can control **alignment** (horizontal or vertical) and **spacing** between the original view and the inserted content.\n- Typically used in scrollable or full-screen layouts where you want to place persistent UI elements without obstructing core content.\n\n***\n\n### Example\n\n```tsx\n<ScrollView\n  safeAreaInset={{\n    bottom: {\n      alignment: \"center\",\n      spacing: 8,\n      content: <Text>Toolbar here</Text>\n    }\n  }}\n>\n  <VStack>\n    <Text>Scrollable content</Text>\n  </VStack>\n</ScrollView>\n```\n\n***\n\n### Alignment Options\n\n- **Horizontal** (for `top` and `bottom`): `\"leading\"`, `\"center\"`, `\"trailing\"`\n- **Vertical** (for `leading` and `trailing`): `\"top\"`, `\"center\"`, `\"bottom\"`\n\n### Notes\n\n- `spacing` is optional. If omitted, a default system spacing will be applied.\n- The `spacing` typo in the `leading`/`trailing` definition should be interpreted as `spacing`.\n\n***\n\n## `ignoresSafeArea`\n\nExpands a view’s content to extend into one or more safe area regions.\n\n### Type\n\n```ts\nignoresSafeArea?: boolean | {\n  regions?: SafeAreaRegions\n  edges?: EdgeSet\n}\n```\n\n***\n\n### Description\n\n- Allows a view to \"ignore\" the system-defined safe areas and occupy the full screen or extend under system UI.\n- Useful for immersive layouts like full-screen images, maps, or background layers.\n\n### Boolean Usage\n\n```tsx\n<Image\n  imageUrl=\"https://example.com/background.jpg\"\n  ignoresSafeArea\n/>\n```\n\n> This will ignore all safe area regions on all edges.\n\n### Object Usage\n\n```tsx\n<VStack\n  ignoresSafeArea={{\n    regions: \"all\",\n    edges: \"bottom\"\n  }}\n>\n  <Text>Bottom edge extends under home indicator</Text>\n</VStack>\n```\n\n### `regions` (optional)\n\n| Value         | Description                                    |\n| ------------- | ---------------------------------------------- |\n| `\"all\"`       | Ignores all regions (default)                  |\n| `\"container\"` | Ignores container padding (e.g., nav/tab bars) |\n| `\"keyboard\"`  | Ignores the software keyboard area             |\n\n### `edges` (optional)\n\n| Value          | Description                            |\n| -------------- | -------------------------------------- |\n| `\"top\"`        | Ignores the top safe area              |\n| `\"bottom\"`     | Ignores the bottom safe area           |\n| `\"leading\"`    | Ignores the leading (left) safe area   |\n| `\"trailing\"`   | Ignores the trailing (right) safe area |\n| `\"vertical\"`   | Ignores top + bottom                   |\n| `\"horizontal\"` | Ignores leading + trailing             |\n| `\"all\"`        | Ignores all edges (default if omitted) |\n","routePath":"/doc/View Modifiers/Safe Area","lang":"en","toc":[{"id":"safeareapadding","text":"`safeAreaPadding`","depth":2,"charIndex":197},{"id":"type","text":"Type","depth":3,"charIndex":465},{"id":"description","text":"Description","depth":3,"charIndex":708},{"id":"usage-options","text":"Usage Options","depth":3,"charIndex":1213},{"id":"object-properties","text":"Object Properties","depth":3,"charIndex":1437},{"id":"example-default-padding","text":"Example: Default Padding","depth":3,"charIndex":1744},{"id":"example-custom-padding","text":"Example: Custom Padding","depth":3,"charIndex":1910},{"id":"safeareainset","text":"`safeAreaInset`","depth":2,"charIndex":2192},{"id":"type-1","text":"Type","depth":3,"charIndex":2276},{"id":"description-1","text":"Description","depth":3,"charIndex":2717},{"id":"example","text":"Example","depth":3,"charIndex":1744},{"id":"alignment-options","text":"Alignment Options","depth":3,"charIndex":3381},{"id":"notes","text":"Notes","depth":3,"charIndex":3565},{"id":"ignoressafearea","text":"`ignoresSafeArea`","depth":2,"charIndex":3757},{"id":"type-2","text":"Type","depth":3,"charIndex":3851},{"id":"description-2","text":"Description","depth":3,"charIndex":3955},{"id":"boolean-usage","text":"Boolean Usage","depth":3,"charIndex":4169},{"id":"object-usage","text":"Object Usage","depth":3,"charIndex":4332},{"id":"regions-optional","text":"`regions` (optional)","depth":3,"charIndex":4504},{"id":"edges-optional","text":"`edges` (optional)","depth":3,"charIndex":4866}],"frontmatter":{},"version":"","description":"Safe area modifiers in Scripting allow you to adjust layout behavior relative to the system-defined safe areas, such as the areas around notches, toolbars, or the on-screen keyboard."},{"title":"Search Interactions","content":"The Scripting app supports advanced search interactions similar to SwiftUI. You can add a search bar, control its visibility and placement, react to changes in input, and display dynamic suggestions.\n\n***\n\n## `searchable`\n\nMarks a view as searchable by displaying a search field and binding it to a state value.\n\n### Type\n\n```ts\nsearchable?: {\n  value: string\n  onChanged: (value: string) => void\n  placement?: SearchFieldPlacement\n  prompt?: string\n  presented?: {\n    value: boolean\n    onChanged: (value: boolean) => void\n  }\n}\n```\n\n### Description\n\n- Displays a search field in the view (typically above a `<List>`).\n- The `value` is the current search query, which you control via state.\n- The `onChanged` callback updates the state when the user types.\n- Optionally provide a `prompt` as placeholder text.\n- Use `placement` to customize where the search field appears.\n- Use `presented` to programmatically show or dismiss the search field.\n\n### Example\n\n```tsx\nfunction SearchExample() {\n  const [query, setQuery] = useState(\"\")\n  const [showSearch, setShowSearch] = useState(false)\n\n  return (\n    <List\n      searchable={{\n        value: query,\n        onChanged: setQuery,\n        placement: \"navigationBarDrawer\",\n        prompt: \"Search items\",\n        presented: {\n          value: showSearch,\n          onChanged: setShowSearch,\n        }\n      }}\n    >\n      <Text>Searching: {query}</Text>\n    </List>\n  )\n}\n```\n\n### `SearchFieldPlacement` options\n\n| Value                                   | Description                                                |\n| --------------------------------------- | ---------------------------------------------------------- |\n| `'automatic'`                           | Default behavior, automatically selected placement.        |\n| `'navigationBarDrawer'`                 | Appears as a drawer below the navigation bar.              |\n| `'navigationBarDrawerAlwaysDisplay'`    | Always shows the drawer, even when inactive.               |\n| `'navigationBarDrawerAutomaticDisplay'` | Shows drawer only when needed.                             |\n| `'toolbar'`                             | Displays the search field in the toolbar.                  |\n| `'sidebar'`                             | Places the search field in the sidebar (iPad/macOS-style). |\n\n***\n\n## `searchSuggestions`\n\nDisplays a list of suggestions below the search field as the user types.\n\n### Type\n\n```ts\nsearchSuggestions?: VirtualNode\n```\n\n### Description\n\nUse this to return a list of suggestions, typically based on the user's input.\n\n### Example\n\n```tsx\nconst suggestions = useMemo(() => [\n  {\n    label: \"🍎 Apple\",\n    value: \"Apple\"\n  },\n  {\n    label: \"🍌 Bananer\",\n    value: \"Bananer\"\n  }\n], [])\nconst filteredSuggestions = useMemo(() => {\n  if (!/\\S+/.test(query)) {\n    return suggestions\n  }\n  const q = query.toLowerCase()\n  return suggestions.filter(s =>\n    s.label.toLowerCase().includes(q) ||\n    s.value.toLowerCase().includes(q))\n}, [query, suggestions])\n\n<List\n  searchable={{\n    value: query,\n    onChanged: setQuery\n  }}\n  searchSuggestions={\n    <>\n      {filteredSuggestions.map(s =>\n        <Text\n          searchCompletion={s.value}\n        >{s.label}</Text>\n      )}\n    </>\n  }\n/>\n```\n\n***\n\n## `searchSuggestionsVisibility`\n\nControls when and where search suggestions are shown.\n\n### Type\n\n```ts\nsearchSuggestionsVisibility?: {\n  visibility: 'visible' | 'hidden'\n  placements: SearchSuggestionsPlacementSet\n}\n```\n\n### `SearchSuggestionsPlacementSet` options\n\n| Value       | Description                                 |\n| ----------- | ------------------------------------------- |\n| `'content'` | Shows suggestions inline with the content.  |\n| `'menu'`    | Shows suggestions in a popover or dropdown. |\n| `'all'`     | Applies to all available placements.        |\n\n### Example\n\n```tsx\n<List\n  searchSuggestionsVisibility={{\n    visibility: 'visible',\n    placements: 'menu'\n  }}\n/>\n```\n\n***\n\n## `searchCompletion`\n\nAssociates a tappable search suggestion with a complete search query string.\n\n### Type\n\n```ts\nsearchCompletion?: string\n```\n\n### Description\n\nApply this modifier to suggestion views (such as `<Text>`) to indicate what value should be filled into the search field when the user taps the suggestion.\n\n### Example\n\n```tsx\n<Text searchCompletion=\"Mango\">🥭 Mango</Text>\n```\n\nWhen tapped, this will set the search field to `\"Mango\"`.\n\n***\n\n## Summary\n\n| Modifier                      | Purpose                                               |\n| ----------------------------- | ----------------------------------------------------- |\n| `searchable`                  | Adds a search field with bindings and customization.  |\n| `searchSuggestions`           | Provides a list of custom suggestions.                |\n| `searchSuggestionsVisibility` | Controls where and when suggestions are shown.        |\n| `searchCompletion`            | Defines the value used when a suggestion is selected. |\n\nThese modifiers work together to create a responsive, interactive search experience in any scrollable view like `<List>`.\n","routePath":"/doc/View Modifiers/Search Interactions","lang":"en","toc":[{"id":"searchable","text":"`searchable`","depth":2,"charIndex":206},{"id":"type","text":"Type","depth":3,"charIndex":313},{"id":"description","text":"Description","depth":3,"charIndex":536},{"id":"example","text":"Example","depth":3,"charIndex":948},{"id":"searchfieldplacement-options","text":"`SearchFieldPlacement` options","depth":3,"charIndex":1429},{"id":"searchsuggestions","text":"`searchSuggestions`","depth":2,"charIndex":2311},{"id":"type-1","text":"Type","depth":3,"charIndex":2409},{"id":"description-1","text":"Description","depth":3,"charIndex":2462},{"id":"example-1","text":"Example","depth":3,"charIndex":2559},{"id":"searchsuggestionsvisibility","text":"`searchSuggestionsVisibility`","depth":2,"charIndex":3242},{"id":"type-2","text":"Type","depth":3,"charIndex":3331},{"id":"searchsuggestionsplacementset-options","text":"`SearchSuggestionsPlacementSet` options","depth":3,"charIndex":3465},{"id":"example-2","text":"Example","depth":3,"charIndex":3821},{"id":"searchcompletion","text":"`searchCompletion`","depth":2,"charIndex":3948},{"id":"type-3","text":"Type","depth":3,"charIndex":4049},{"id":"description-2","text":"Description","depth":3,"charIndex":4096},{"id":"example-3","text":"Example","depth":3,"charIndex":4270},{"id":"summary","text":"Summary","depth":2,"charIndex":4406}],"frontmatter":{},"version":"","description":"The Scripting app supports advanced search interactions similar to SwiftUI. You can add a search bar, control its visibility and placement, react to changes in input, and display dynamic suggestions."},{"title":"Set environment values (environments)","content":"The `environments` view modifier allows injecting specific environment values into the current view hierarchy.\nIt serves a role similar to SwiftUI’s `.environment()`, but with a more explicit and controlled design tailored for Scripting.\n\nCurrently, the modifier supports:\n\n- `editMode` — controls editing behavior in views such as `List`\n- `openURL` — customizes how links are handled when tapped\n\nThese environment values affect all descendants within the modified view subtree.\n\n***\n\n# Modifier Definition\n\n```ts\nenvironments?: {\n  editMode?: Observable<EditMode>;\n  openURL?: (url: string) => OpenURLActionResult;\n};\n```\n\n***\n\n# 1. editMode Environment\n\nThe `editMode` environment value controls the editing state of views that support editing behavior, such as `List` with row deletion or movement.\n\nIt must be provided as an `Observable<EditMode>` so views can reactively update when the editing state changes.\n\n## EditMode Type\n\n```ts\nclass EditMode {\n  readonly value: \"active\" | \"inactive\" | \"transient\" | \"unknown\";\n  readonly isEditing: boolean;\n\n  static active(): EditMode;\n  static inactive(): EditMode;\n  static transient(): EditMode;\n}\n```\n\n### Meaning of `value`\n\n| Value       | Description                   |\n| ----------- | ----------------------------- |\n| `active`    | Editing mode is enabled       |\n| `inactive`  | Editing mode is disabled      |\n| `transient` | Temporary transitional state  |\n| `unknown`   | Undefined or unexpected state |\n\n***\n\n## editMode Example\n\n```tsx\nconst editMode = useObservable(() => EditMode.active())\n\n<List\n  environments={{\n    editMode: editMode\n  }}\n>\n  <ForEach\n    editActions=\"all\"\n    data={items}\n    builder={item => <Text key={item.id}>{item}</Text>}\n  />\n</List>\n```\n\n***\n\n# 2. openURL Environment\n\nThe `openURL` environment value customizes how URLs are handled when interacted with inside the view tree.\nIt overrides the default behavior of components such as `<Link>`.\n\nThis is useful for:\n\n- Deciding whether URLs should open inside the app or externally\n- Filtering or validating URLs\n- Redirecting URLs to different handlers\n\n## Function Signature\n\n```ts\nopenURL?: (url: string) => OpenURLActionResult;\n```\n\n***\n\n# OpenURLActionResult\n\n```ts\nclass OpenURLActionResult {\n  type: string;\n\n  static handled(): OpenURLActionResult;\n  static discarded(): OpenURLActionResult;\n\n  static systemAction(options?: {\n    url?: string;\n    /**\n     * Whether the system should prefer opening the URL in-app.\n     * Requires iOS 26.0+.\n     */\n    prefersInApp: boolean;\n  }): OpenURLActionResult;\n}\n```\n\n### Result Behavior\n\n| Method           | Meaning                                                     |\n| ---------------- | ----------------------------------------------------------- |\n| `handled()`      | The URL is considered fully handled; default behavior stops |\n| `discarded()`    | The URL is ignored                                          |\n| `systemAction()` | Requests the system to open a (possibly modified) URL       |\n\n### iOS Requirement\n\n- `prefersInApp` **requires iOS 26.0+**\n- On earlier versions, the parameter may have no effect and system defaults will apply\n\n***\n\n# openURL Example\n\n```tsx\n<Group\n  environments={{\n    openURL: (url) => {\n      return OpenURLActionResult.systemAction({\n        url,\n        prefersInApp: false   // Requires iOS 26.0+\n      })\n    }\n  }}\n>\n  {urls.map(url =>\n    <Link url={url}>{url}</Link>\n  )}\n</Group>\n```\n\n***\n\n# Combined Example (editMode + openURL)\n\n```tsx\nconst editMode = useObservable(() => EditMode.inactive())\n\n<VStack\n  environments={{\n    editMode,\n    openURL: (url) => {\n      if (url.startsWith(\"https://safe.com\")) {\n        return OpenURLActionResult.systemAction({\n          url,\n          prefersInApp: true   // iOS 26.0+ only\n        })\n      }\n      return OpenURLActionResult.discarded()\n    }\n  }}\n>\n  <Button\n    title=\"Toggle Edit\"\n    action={() => {\n      editMode.value = editMode.value.isEditing\n        ? EditMode.inactive()\n        : EditMode.active()\n    }}\n  />\n\n  <List>\n    ...\n  </List>\n\n  <Link url=\"https://safe.com\">Safe Link</Link>\n  <Link url=\"https://blocked.com\">Blocked Link</Link>\n</VStack>\n```\n\n***\n\n# Notes & Behavior Summary\n\n1. The `environments` modifier applies only to the subtree where it is used.\n2. `editMode` must be an `Observable<EditMode>` for reactive updates.\n3. `openURL` replaces default URL-handling behavior for all descendant views.\n4. Returning `handled()` stops further URL processing.\n5. `systemAction()` delegates handling back to the system.\n6. **`prefersInApp` requires iOS 26.0+** and may be ignored on earlier versions.\n7. Scripting’s environment system is explicit—only the values you define are injected.\n","routePath":"/doc/View Modifiers/Set environment values (environments)","lang":"en","toc":[{"id":"editmode-type","text":"EditMode Type","depth":2,"charIndex":918},{"id":"meaning-of-value","text":"Meaning of `value`","depth":3,"charIndex":1157},{"id":"editmode-example","text":"editMode Example","depth":2,"charIndex":1475},{"id":"function-signature","text":"Function Signature","depth":2,"charIndex":2102},{"id":"result-behavior","text":"Result Behavior","depth":3,"charIndex":2568},{"id":"ios-requirement","text":"iOS Requirement","depth":3,"charIndex":3005}],"frontmatter":{},"version":"","description":"The environments view modifier allows injecting specific environment values into the current view hierarchy.\nIt serves a role similar to SwiftUI’s .environment(), but with a more explicit and controlled design tailored for Scripting. Currently, the modifier supports: editMode — controls editing behavior in views such as ListopenURL — customizes how links are handled when tapped These environment values affect all descendants within the modified view subtree. The editMode environment value controls the editing state of views that support editing behavior, such as List with row deletion or movement. It must be provided as an Observable<EditMode> so views can reactively update when the editing state changes."},{"title":"Swipe Actions","content":"In the **Scripting** app, you can attach swipe actions to views used as rows in a `<List>` (such as `<HStack>`) to support contextual interactions like deleting, editing, marking favorites, etc.\n\nTo improve clarity and ease of use in TypeScript, the SwiftUI `swipeActions` modifier is split into two separate modifiers:\n\n- `leadingSwipeActions`: For swipe gestures from left to right.\n- `trailingSwipeActions`: For swipe gestures from right to left.\n\n***\n\n## `leadingSwipeActions`\n\nAdds swipe actions to the **leading** (left) edge of a list row.\n\n### Type\n\n```ts\nleadingSwipeActions?: {\n  allowsFullSwipe?: boolean\n  actions: VirtualNode[]\n}\n```\n\n### Description\n\n- `actions`: An array of `<Button>` elements that will appear when the user swipes right on the row.\n- `allowsFullSwipe`: If `true` (default), a full swipe will automatically invoke the **first action** in the list.\n\n***\n\n## `trailingSwipeActions`\n\nAdds swipe actions to the **trailing** (right) edge of a list row.\n\n### Type\n\n```ts\ntrailingSwipeActions?: {\n  allowsFullSwipe?: boolean\n  actions: VirtualNode[]\n}\n```\n\n### Description\n\n- `actions`: An array of `<Button>` elements that appear when the user swipes left on the row.\n- `allowsFullSwipe`: If `true` (default), a full swipe will automatically trigger the **first action**.\n\n***\n\n## Example Usage\n\n```tsx\n<List>\n  {list.map(item => \n    <HStack\n      trailingSwipeActions={{\n        allowsFullSwipe: true,\n        actions: [\n          <Button\n            title=\"Delete\"\n            role=\"destructive\"\n            action={() => deleteItem(item)}\n          />,\n          <Button\n            title=\"Edit\"\n            tint=\"accentColor\"\n            action={() => editItem(item)}\n          />\n        ]\n      }}\n    >\n      <Image systemName={item.icon} />\n      <Text>{item.title}</Text>\n    </HStack>\n  )}\n</List>\n```\n\nYou can also add leading actions:\n\n```tsx\n<HStack\n  leadingSwipeActions={{\n    actions: [\n      <Button\n        title=\"Favorite\"\n        tint=\"orange\"\n        action={() => markAsFavorite(item)}\n      />\n    ]\n  }}\n>\n  <Text>{item.title}</Text>\n</HStack>\n```\n\n***\n\n## Button Roles and Styling\n\nEach swipe action must be a `<Button>` component. You can customize buttons with:\n\n- `title`: Text label for the button.\n- `action`: The function to execute when tapped.\n- `role` (optional): `\"destructive\"` for delete-like actions.\n- `tint` (optional): Use system color names like `\"accentColor\"` or any custom color string.\n\n***\n\n## Notes\n\n- You can use both `leadingSwipeActions` and `trailingSwipeActions` on the same row.\n- Only views used within a scrollable list (like `<List>`) support swipe actions.\n- If `allowsFullSwipe` is disabled, the user must tap the button rather than relying on a full swipe gesture.\n","routePath":"/doc/View Modifiers/Swipe Actions/","lang":"en","toc":[{"id":"leadingswipeactions","text":"`leadingSwipeActions`","depth":2,"charIndex":456},{"id":"type","text":"Type","depth":3,"charIndex":548},{"id":"description","text":"Description","depth":3,"charIndex":648},{"id":"trailingswipeactions","text":"`trailingSwipeActions`","depth":2,"charIndex":887},{"id":"type-1","text":"Type","depth":3,"charIndex":982},{"id":"description-1","text":"Description","depth":3,"charIndex":1083},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":1305},{"id":"button-roles-and-styling","text":"Button Roles and Styling","depth":2,"charIndex":2106},{"id":"notes","text":"Notes","depth":2,"charIndex":2466}],"frontmatter":{},"version":"","description":"In the Scripting app, you can attach swipe actions to views used as rows in a <List> (such as <HStack>) to support contextual interactions like deleting, editing, marking favorites, etc. To improve clarity and ease of use in TypeScript, the SwiftUI swipeActions modifier is split into two separate modifiers: leadingSwipeActions: For swipe gestures from left to right.trailingSwipeActions: For swipe gestures from right to left."},{"title":"Example","content":"```tsx\n\n\ntype Message = {\n  from: string\n  content: string\n  isUnread: boolean\n}\n\nfunction MessageCell({\n  message\n}: {\n  message: Message\n}) {\n  return <HStack>\n    <Circle\n      fill={message.isUnread ? \"systemBlue\" : \"clear\"}\n      frame={{\n        width: 16,\n        height: 16,\n      }}\n    />\n    <VStack\n      alignment={\"leading\"}\n    >\n      <Text font={\"headline\"}>{message.from}</Text>\n      <Text>{message.content}</Text>\n    </VStack>\n  </HStack>\n}\n\nfunction Example() {\n  const [messages, setMessages] = useState<Message[]>(() => [\n    {\n      from: \"Maria Ruiz\",\n      content: \"If you have a list of messages, you can add an action to toggle a message as unread on a swipe from the leading edge, and actions to delete or flag messages on a trailing edge swipe.\",\n      isUnread: true,\n    },\n    {\n      from: \"Mei Chen\",\n      content: \"Actions appear in the order you list them, starting from the swipe’s originating edge. In the example, the Delete action appears closest to the screen’s trailing edge\",\n      isUnread: true,\n    },\n    {\n      from: \"Maria Ruiz\",\n      content: \"By default, the user can perform the first action for a given swipe direction with a full swipe. The user can perform both the toggle unread and delete actions with full swipes. You can opt out of this behavior for an edge by setting the allowsFullSwipe parameter to false.\",\n      isUnread: false,\n    },\n    {\n      from: \"Mei Chen\",\n      content: \"When you set a role for a button using one of the values from the ButtonRole, system styles the button according to its role. In the example above, the delete action appears in red because it has the destructive role. If you want to set a different color, add the tint property to the button\",\n      isUnread: true,\n    }\n  ])\n\n  function toggleUnread(message: Message) {\n    setMessages(messages.map(item => item !== message ? item : {\n      ...message,\n      isUnread: !item.isUnread\n    }))\n  }\n\n  function deleteMessage(message: Message) {\n    setMessages(messages.filter(item => item !== message))\n  }\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Messages\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      listStyle={\"inset\"}\n    >\n      {messages.map(message =>\n        <MessageCell\n          message={message}\n          leadingSwipeActions={{\n            allowsFullSwipe: false,\n            actions: [\n              <Button\n                action={() => toggleUnread(message)}\n                tint={\"systemBlue\"}\n              >\n                {message.isUnread\n                  ? <Label title={\"Read\"} systemImage={\"envelope.open\"} />\n                  : <Label title={\"Unread\"} systemImage={\"envelope.badge\"} />\n                }\n              </Button>\n            ]\n          }}\n          trailingSwipeActions={{\n            actions: [\n              <Button\n                role={\"destructive\"}\n                action={() => deleteMessage(message)}\n              >\n                <Label title={\"Delete\"} systemImage={\"trash\"} />\n              </Button>,\n              <Button\n                action={() => { }}\n                tint={\"systemOrange\"}\n              >\n                <Label title={\"Flag\"} systemImage={\"flag\"} />\n              </Button>\n            ]\n          }}\n        />\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/View Modifiers/Swipe Actions/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Symbol Style","content":"These modifiers allow you to customize how **SF Symbols** are displayed and animated inside views, particularly with the `Image` component.\n\n***\n\n## `symbolRenderingMode`\n\nSets the **rendering mode** for symbol images within the view.\n\n### Type\n\n```ts\nsymbolRenderingMode?: SymbolRenderingMode\n```\n\n### Options (`SymbolRenderingMode`)\n\n- `\"monochrome\"` – A single-color version using the foreground style\n- `\"hierarchical\"` – Multiple layers with different opacities for depth (good for semantic coloring)\n- `\"multicolor\"` – Uses the symbol's built-in colors\n- `\"palette\"` – Allows layered tinting (like using multiple `foregroundStyle` layers)\n\n### Example\n\n```tsx\n<Image\n  systemName=\"star.fill\"\n  symbolRenderingMode=\"palette\"\n  foregroundStyle={{\n    primary: \"red\",\n    secondary: \"orange\",\n    tertiary: \"yellow\"\n  }}\n/>\n```\n\n### Explanation:\n\n- `symbolRenderingMode=\"palette\"` tells the system to render the symbol in **multiple layered styles**.\n- `foregroundStyle` now uses an object with `primary`, `secondary`, and optionally `tertiary` layers to color those symbol layers individually.\n\n> This matches SwiftUI's behavior with `.symbolRenderingMode(.palette)` and `.foregroundStyle(primary, secondary, tertiary)`.\n\n***\n\n## `symbolVariant`\n\nDisplays the symbol with a particular **visual variant**.\n\n### Type\n\n```ts\nsymbolVariant?: SymbolVariants\n```\n\n### Options (`SymbolVariants`)\n\n- `\"none\"` – Default symbol with no variant\n- `\"circle\"` – Encapsulated in a circle\n- `\"square\"` – Encapsulated in a square\n- `\"rectangle\"` – Encapsulated in a rectangle\n- `\"fill\"` – Filled symbol\n- `\"slash\"` – Adds a slash over the symbol (often used to indicate \"off\" states)\n\n### Example\n\n```tsx\n<Image\n  systemName=\"wifi\"\n  symbolVariant=\"slash\"\n/>\n```\n\n***\n\n## `symbolEffect`\n\nApplies a **symbol animation effect** to the view. This can include transitions (appear/disappear), scale, bounce, rotation, breathing, pulsing, and wiggle effects. You can also bind the effect to a value so it animates when the value changes.\n\n### Type\n\n```ts\nsymbolEffect?: SymbolEffect\n```\n\nThere are two forms of usage:\n\n***\n\n### 1. **Simple effects** (transition, scale, etc.)\n\nYou can directly assign a symbol effect name:\n\n#### Examples\n\n```tsx\n<Image\n  systemName=\"heart\"\n  symbolEffect=\"appear\"\n/>\n\n<Image\n  systemName=\"checkmark\"\n  symbolEffect=\"scaleByLayer\"\n/>\n```\n\n***\n\n### 2. **Value-bound discrete effects**\n\nThese effects animate when the associated value changes.\n\n#### Type\n\n```ts\nsymbolEffect?: {\n  effect: DiscreteSymbolEffect\n  value: string | number | boolean\n}\n```\n\n#### Example\n\n```tsx\n<Image\n  systemName=\"star.fill\"\n  symbolEffect={{\n    effect: \"bounce\",\n    value: isFavorited\n  }}\n/>\n```\n\nIn this example, each time `isFavorited` changes, the bounce animation is triggered.\n\n***\n\n## Available Discrete Effects (`DiscreteSymbolEffect`)\n\nThese effects can be bound to values:\n\n| Category          | Effects                                                                                                                                                                               |\n| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **Bounce**        | `bounce`, `bounceByLayer`, `bounceDown`, `bounceUp`, `bounceWholeSymbol`                                                                                                              |\n| **Breathe**       | `breathe`, `breatheByLayer`, `breathePlain`, `breathePulse`, `breatheWholeSymbol`                                                                                                     |\n| **Pulse**         | `pulse`, `pulseByLayer`, `pulseWholeSymbol`                                                                                                                                           |\n| **Rotate**        | `rotate`, `rotateByLayer`, `rotateClockwise`, `rotateCounterClockwise`, `rotateWholeSymbol`                                                                                           |\n| **VariableColor** | `variableColor`, `variableColorCumulative`, `variableColorDimInactiveLayers`, `variableColorHideInactiveLayers`, `variableColorIterative`                                             |\n| **Wiggle**        | `wiggle`, `wiggleByLayer`, `wiggleWholeSymbol`, `wiggleLeft`, `wiggleRight`, `wiggleUp`, `wiggleDown`, `wiggleForward`, `wiggleBackward`, `wiggleClockwise`, `wiggleCounterClockwise` |\n\n***\n\n## Full Example\n\n```tsx\n<Image\n  systemName=\"bell.fill\"\n  symbolRenderingMode=\"hierarchical\"\n  symbolVariant=\"circle\"\n  symbolEffect={{\n    effect: \"breathePulse\",\n    value: isNotified\n  }}\n  foregroundStyle=\"indigo\"\n/>\n```\n\nThis image uses:\n\n- a hierarchical rendering mode\n- a circular variant around the symbol\n- a pulsing animation bound to `isNotified` state\n\n***\n\n## Summary\n\n| Modifier              | Description                                                             |\n| --------------------- | ----------------------------------------------------------------------- |\n| `symbolRenderingMode` | Sets how SF Symbols are rendered (monochrome, multicolor, etc.)         |\n| `symbolVariant`       | Applies a visual variant like `fill`, `circle`, or `slash`              |\n| `symbolEffect`        | Adds visual animation effects; can be static or bound to a state change |\n","routePath":"/doc/View Modifiers/Symbol Style","lang":"en","toc":[{"id":"symbolrenderingmode","text":"`symbolRenderingMode`","depth":2,"charIndex":146},{"id":"type","text":"Type","depth":3,"charIndex":236},{"id":"options-symbolrenderingmode","text":"Options (`SymbolRenderingMode`)","depth":3,"charIndex":299},{"id":"example","text":"Example","depth":3,"charIndex":646},{"id":"explanation","text":"Explanation:","depth":3,"charIndex":832},{"id":"symbolvariant","text":"`symbolVariant`","depth":2,"charIndex":1231},{"id":"type-1","text":"Type","depth":3,"charIndex":1310},{"id":"options-symbolvariants","text":"Options (`SymbolVariants`)","depth":3,"charIndex":1362},{"id":"example-1","text":"Example","depth":3,"charIndex":1673},{"id":"symboleffect","text":"`symbolEffect`","depth":2,"charIndex":1757},{"id":"type-2","text":"Type","depth":3,"charIndex":2021},{"id":"1-simple-effects-transition-scale-etc","text":"1. **Simple effects** (transition, scale, etc.)","depth":3,"charIndex":2106},{"id":"examples","text":"Examples","depth":4,"charIndex":2206},{"id":"2-value-bound-discrete-effects","text":"2. **Value-bound discrete effects**","depth":3,"charIndex":2359},{"id":"type-3","text":"Type","depth":4,"charIndex":2458},{"id":"example-2","text":"Example","depth":4,"charIndex":-1},{"id":"available-discrete-effects-discretesymboleffect","text":"Available Discrete Effects (`DiscreteSymbolEffect`)","depth":2,"charIndex":2785},{"id":"full-example","text":"Full Example","depth":2,"charIndex":4534},{"id":"summary","text":"Summary","depth":2,"charIndex":4905}],"frontmatter":{},"version":"","description":"These modifiers allow you to customize how SF Symbols are displayed and animated inside views, particularly with the Image component."},{"title":"Text Field","content":"The following modifiers customize the behavior and appearance of `TextField` components. These allow you to control keyboard behavior, input handling, and submission logic.\n\n***\n\n## `onSubmit`\n\nAdds an action to perform when the user submits a value from the text field.\n\n### Type\n\n```ts\nonSubmit?: (() => void) | {\n  triggers: SubmitTriggers\n  action: () => void\n}\n```\n\n### Behavior\n\n- If provided as a function:\n\n  ```tsx\n  <TextField onSubmit={() => console.log('Submitted')} />\n  ```\n\n  This is equivalent to:\n\n  ```tsx\n  <TextField\n    onSubmit={{\n      triggers: 'text',\n      action: () => console.log('Submitted')\n    }}\n  />\n  ```\n\n- You can explicitly define what kind of submission should trigger the action using the `triggers` option:\n\n  ```tsx\n  <TextField\n    onSubmit={{\n      triggers: 'search',\n      action: () => console.log('Search submitted')\n    }}\n  />\n  ```\n\n### `SubmitTriggers` values:\n\n- `\"text\"`: Triggered by text input views like `TextField`, `SecureField`, etc.\n- `\"search\"`: Triggered by search fields (e.g., those using the `searchable` modifier).\n\n***\n\n## `keyboardType`\n\nSpecifies the type of keyboard to display when the text field is focused.\n\n### Type\n\n```ts\nkeyboardType?: KeyboardType\n```\n\n### Options\n\n- `'default'`\n- `'numberPad'`\n- `'phonePad'`\n- `'namePhonePad'`\n- `'URL'`\n- `'decimalPad'`\n- `'asciiCapable'`\n- `'asciiCapableNumberPad'`\n- `'emailAddress'`\n- `'numbersAndPunctuation'`\n- `'twitter'`\n- `'webSearch'`\n\n### Example\n\n```tsx\n<TextField keyboardType=\"emailAddress\" />\n```\n\n***\n\n## `autocorrectionDisabled`\n\nControls whether the system autocorrection is enabled.\n\n### Type\n\n```ts\nautocorrectionDisabled?: boolean\n```\n\n### Default\n\n- `true` — autocorrection is disabled by default.\n\n### Example\n\n```tsx\n<TextField autocorrectionDisabled={false} />\n```\n\n***\n\n## `textInputAutocapitalization`\n\nSets how the text input system should automatically capitalize text.\n\n### Type\n\n```ts\ntextInputAutocapitalization?: TextInputAutocapitalization\n```\n\n### Options\n\n- `\"never\"` – No capitalization.\n- `\"characters\"` – All letters capitalized.\n- `\"sentences\"` – First letter of each sentence capitalized.\n- `\"words\"` – First letter of each word capitalized.\n\n### Example\n\n```tsx\n<TextField textInputAutocapitalization=\"words\" />\n```\n\n***\n\n## `submitScope`\n\nPrevents submission triggers from this view from propagating upward to parent views with submission handlers.\n\n### Type\n\n```ts\nsubmitScope?: boolean\n```\n\n### Default\n\n- `false` — submission actions bubble up by default.\n\n### Example\n\n```tsx\n<TextField submitScope />\n```\n\nThis ensures that `onSubmit` handlers defined higher up in the view hierarchy won’t be called when this field is submitted.\n\n## `submitLabel`\n\nSets the label for the submit button.\n\n### Type\n\n```ts\nsubmitLabel?: \"continue\" | \"return\" | \"send\" | \"go\" | \"search\" | \"join\" | \"done\" | \"next\" | \"route\"\n```\n\n### Example\n\n```tsx\n<TextField submitLabel=\"search\" />\n```\n","routePath":"/doc/View Modifiers/Text Field","lang":"en","toc":[{"id":"onsubmit","text":"`onSubmit`","depth":2,"charIndex":179},{"id":"type","text":"Type","depth":3,"charIndex":272},{"id":"behavior","text":"Behavior","depth":3,"charIndex":371},{"id":"submittriggers-values","text":"`SubmitTriggers` values:","depth":3,"charIndex":884},{"id":"keyboardtype","text":"`keyboardType`","depth":2,"charIndex":1088},{"id":"type-1","text":"Type","depth":3,"charIndex":1182},{"id":"options","text":"Options","depth":3,"charIndex":1231},{"id":"example","text":"Example","depth":3,"charIndex":1460},{"id":"autocorrectiondisabled","text":"`autocorrectionDisabled`","depth":2,"charIndex":1532},{"id":"type-2","text":"Type","depth":3,"charIndex":1617},{"id":"default","text":"Default","depth":3,"charIndex":1671},{"id":"example-1","text":"Example","depth":3,"charIndex":1735},{"id":"textinputautocapitalization","text":"`textInputAutocapitalization`","depth":2,"charIndex":1810},{"id":"type-3","text":"Type","depth":3,"charIndex":1914},{"id":"options-1","text":"Options","depth":3,"charIndex":1993},{"id":"example-2","text":"Example","depth":3,"charIndex":2198},{"id":"submitscope","text":"`submitScope`","depth":2,"charIndex":2278},{"id":"type-4","text":"Type","depth":3,"charIndex":2407},{"id":"default-1","text":"Default","depth":3,"charIndex":2450},{"id":"example-3","text":"Example","depth":3,"charIndex":2517},{"id":"submitlabel","text":"`submitLabel`","depth":2,"charIndex":2693},{"id":"type-5","text":"Type","depth":3,"charIndex":2750},{"id":"example-4","text":"Example","depth":3,"charIndex":2871}],"frontmatter":{},"version":"","description":"The following modifiers customize the behavior and appearance of TextField components. These allow you to control keyboard behavior, input handling, and submission logic."},{"title":"Text View Modifiers","content":"The following properties allow you to style and format text-based views, such as `Text` or `Label`, in ways that closely mirror SwiftUI’s built-in modifiers. By customizing these properties, you can control the font, weight, design, spacing, and other typographic attributes of the displayed text.\n\n## Overview\n\nThese properties are generally passed to text-related views like `Text` or `Label` components as attributes. For example, you can specify a font size, enable bold formatting, or add an underline with a custom color—all without manually calling multiple modifiers.\n\n```tsx\n<Text\n  font={{ name: 'SystemFontName', size: 18 }}\n  fontWeight=\"semibold\"\n  italic\n  underline=\"red\"\n  lineLimit={2}\n  multilineTextAlignment=\"center\"\n>\n  Stylish Text Here\n</Text>\n```\n\nIn the example above, the text uses a custom font, semibold weight, italic style, a red underline, limits to two lines, and centers the text.\n\n***\n\n## Font Configuration\n\n### `font`\n\nDefines the font and size to apply to the text.\n\n- **Number**: When you provide a number (e.g., `14`), it applies the system font at that size.\n- **Preset Font Name** (`Font` type): Use one of the built-in text styles (`\"largeTitle\"`, `\"title\"`, `\"headline\"`, `\"subheadline\"`, `\"body\"`, `\"callout\"`, `\"footnote\"`, `\"caption\"`). The system determines the size and weight based on that style.\n- **Object with name and size**: Apply a custom font by specifying the `name` and `size`.\n\n```tsx\n<Text font={20}>System Font, Size 20</Text>\n<Text font=\"headline\">System Headline Font</Text>\n<Text font={{ name: \"CustomFontName\", size: 16 }}>Custom Font</Text>\n```\n\n***\n\n### `fontWeight`\n\nSets the thickness of the font’s stroke. Options range from `\"ultraLight\"` to `\"black\"`.\n\n```tsx\n<Text fontWeight=\"bold\">Bold Text</Text>\n```\n\n***\n\n### `fontWidth`\n\nSpecifies the width variant of the font if available. Possible values include `\"compressed\"`, `\"condensed\"`, `\"expanded\"`, and `\"standard\"`. You can also use a numeric value if supported.\n\n```tsx\n<Text fontWidth=\"condensed\">Condensed Width Font</Text>\n```\n\n***\n\n### `fontDesign`\n\nModifies the font design. Options include `\"default\"`, `\"monospaced\"`, `\"rounded\"`, `\"serif\"`.\n\n```tsx\n<Text fontDesign=\"rounded\">Rounded Font Design</Text>\n```\n\n***\n\n## Text Formatting\n\n### `minScaleFactor`\n\nA number between 0 and 1 that indicates how much the text can shrink if it doesn’t fit the available space. For example, `0.5` means the text can shrink down to 50% of its original size to fit.\n\n```tsx\n<Text minScaleFactor={0.8}>This text shrinks slightly if it doesn't fit.</Text>\n```\n\n***\n\n### `bold`\n\nApplies a bold font weight if `true`.\n\n```tsx\n<Text bold>This text is bold</Text>\n```\n\n***\n\n### `baselineOffset`\n\nAdjusts the text’s vertical position relative to its baseline. Positive values move the text up, negative values move it down.\n\n```tsx\n<Text baselineOffset={5}>Text shifted up</Text>\n```\n\n***\n\n### `kerning`\n\nControls the spacing between characters. A positive value increases spacing; a negative value decreases it.\n\n```tsx\n<Text kerning={2}>Extra spaced text</Text>\n```\n\n***\n\n### `italic`\n\nApplies an italic style if `true`.\n\n```tsx\n<Text italic>Italic text</Text>\n```\n\n***\n\n### `monospaced`\n\nForces all child text to use a monospaced variant, if available.\n\n```tsx\n<Text monospaced>Monospaced text</Text>\n```\n\n***\n\n### `monospacedDigit`\n\nUses fixed-width digits while leaving other characters as they are. This helps align numbers vertically, useful for tables or timers.\n\n```tsx\n<Text monospacedDigit>Digits aligned in monospace 1234</Text>\n```\n\n***\n\n## Text Decorations\n\n### `strikethrough`\n\nApplies a strikethrough (line through the text). You can provide a color, or an object specifying a pattern and color.\n\n- **Color only**: `strikethrough=\"red\"`\n- **Object**: `strikethrough={{ pattern: 'dash', color: 'blue' }}`\n\n```tsx\n<Text strikethrough=\"gray\">Strikethrough text in gray</Text>\n<Text strikethrough={{ pattern: 'dot', color: 'red' }}>Dotted red strikethrough</Text>\n```\n\n***\n\n### `underline`\n\nApplies an underline in a similar way to `strikethrough`.\n\n- **Color only**: `underline=\"blue\"`\n- **Object**: `underline={{ pattern: 'dashDot', color: 'green' }}`\n\n```tsx\n<Text underline=\"blue\">Underlined text in blue</Text>\n<Text underline={{ pattern: 'dot', color: 'pink' }}>Dotted pink underline</Text>\n```\n\n***\n\n## Line & Layout Control\n\n### `lineLimit`\n\nSpecifies how many lines of text can display. You can provide:\n\n- A single number for a maximum line limit.\n- An object `{ min?: number; max: number; reservesSpace?: boolean }` to specify a minimum and maximum number of lines, and whether the text should reserve space for all those lines even when not used.\n\n```tsx\n<Text lineLimit={1}>This text will be truncated if it doesn't fit on one line.</Text>\n<Text lineLimit={{ min: 2, max: 4, reservesSpace: true }}>\n  This text can display between 2 and 4 lines, and always reserves space for 4 lines, preventing layout shifts.\n</Text>\n```\n\n***\n\n### `lineSpacing`\n\nSets the spacing between lines, in pixels.\n\n```tsx\n<Text lineSpacing={5}>Line spacing set to 5 pixels</Text>\n```\n\n***\n\n### `multilineTextAlignment`\n\nSets the text alignment for multi-line text: `\"leading\"`, `\"center\"`, or `\"trailing\"`.\n\n```tsx\n<Text multilineTextAlignment=\"center\">\n  This text is centered across multiple lines.\n</Text>\n```\n\n***\n\n### `truncationMode`\n\nSpecifies how to truncate a line of text when it is too long to fit within the available horizontal space.\n\n#### Type\n\n```ts\ntype TruncationMode = \"head\" | \"middle\" | \"tail\"\n```\n\n#### Description\n\nDefines the position at which the text is truncated:\n\n- `\"head\"`: Truncates the beginning of the line, preserving the end.\n\n- `\"middle\"`: Truncates the middle of the line, preserving both the beginning and end.\n\n- `\"tail\"`: Truncates the end of the line, preserving the beginning.\n\n```tsx\n<Text\n  truncationMode=\"middle\"\n>\n  This is a very long piece of text that may be truncated.\n</Text>\n```\n\n***\n\n### `allowsTightening?: boolean`\n\nDetermines whether the system is allowed to reduce the spacing between characters to fit the text within a line when needed.\n\n#### Type\n\n`boolean`\n\n#### Default\n\n`false`\n\n#### Description\n\nWhen set to true, the system may compress the character spacing to avoid truncation and better fit the content. This is typically used to improve layout responsiveness in constrained environments.\n\n```tsx\n<Text\n  allowsTightening={true}\n>\n  Condensed text if necessary\n</Text>\n```\n\n***\n\n## Summary\n\nBy combining these properties, you can fully control the typography of your text-based views without needing multiple wrapper components or modifiers. Whether you need a bold, italic headline font with custom kerning and underline, or a simple body font that truncates after two lines, these options cover a broad range of text styling needs.\n","routePath":"/doc/View Modifiers/Text View Modifiers","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":299},{"id":"font-configuration","text":"Font Configuration","depth":2,"charIndex":920},{"id":"font","text":"`font`","depth":3,"charIndex":943},{"id":"fontweight","text":"`fontWeight`","depth":3,"charIndex":1617},{"id":"fontwidth","text":"`fontWidth`","depth":3,"charIndex":1783},{"id":"fontdesign","text":"`fontDesign`","depth":3,"charIndex":2062},{"id":"text-formatting","text":"Text Formatting","depth":2,"charIndex":2247},{"id":"minscalefactor","text":"`minScaleFactor`","depth":3,"charIndex":2267},{"id":"bold","text":"`bold`","depth":3,"charIndex":2581},{"id":"baselineoffset","text":"`baselineOffset`","depth":3,"charIndex":2685},{"id":"kerning","text":"`kerning`","depth":3,"charIndex":2900},{"id":"italic","text":"`italic`","depth":3,"charIndex":3084},{"id":"monospaced","text":"`monospaced`","depth":3,"charIndex":3183},{"id":"monospaceddigit","text":"`monospacedDigit`","depth":3,"charIndex":3324},{"id":"text-decorations","text":"Text Decorations","depth":2,"charIndex":3561},{"id":"strikethrough","text":"`strikethrough`","depth":3,"charIndex":3582},{"id":"underline","text":"`underline`","depth":3,"charIndex":3996},{"id":"line--layout-control","text":"Line & Layout Control","depth":2,"charIndex":4329},{"id":"linelimit","text":"`lineLimit`","depth":3,"charIndex":4355},{"id":"linespacing","text":"`lineSpacing`","depth":3,"charIndex":4964},{"id":"multilinetextalignment","text":"`multilineTextAlignment`","depth":3,"charIndex":5102},{"id":"truncationmode","text":"`truncationMode`","depth":3,"charIndex":5331},{"id":"type","text":"Type","depth":4,"charIndex":5461},{"id":"description","text":"Description","depth":4,"charIndex":5532},{"id":"allowstightening-boolean","text":"`allowsTightening?: boolean`","depth":3,"charIndex":5950},{"id":"type-1","text":"Type","depth":4,"charIndex":6110},{"id":"default","text":"Default","depth":4,"charIndex":6132},{"id":"description-1","text":"Description","depth":4,"charIndex":6155},{"id":"summary","text":"Summary","depth":2,"charIndex":6460}],"frontmatter":{},"version":"","description":"The following properties allow you to style and format text-based views, such as Text or Label, in ways that closely mirror SwiftUI’s built-in modifiers. By customizing these properties, you can control the font, weight, design, spacing, and other typographic attributes of the displayed text."},{"title":"Toast","content":"The `toast` view modifier displays a temporary notification message (toast) over the current view.\nIt is typically used to show short feedback messages such as “Saved successfully,” “Action completed,” or “Network error.”\n\nYou can show a simple text message or provide a fully custom view as the toast’s content.\nYou can also control its duration, position, background color, text color, corner radius, and shadow style.\n\n***\n\n## Type Definition\n\n```ts\ntoast?: {\n  duration?: number | null\n  position?: \"top\" | \"bottom\" | \"center\"\n  backgroundColor?: Color | null\n  textColor?: Color | null\n  cornerRadius?: number | null\n  shadowRadius?: number | null\n} & (\n  | { message: string; content?: never }\n  | { message?: never; content: VirtualNode }\n) & ({\n  isPresented: boolean\n  onChanged: (isPresented: boolean) => void\n} | {\n  isPresented: Observable<boolean>\n})\n```\n\n***\n\n## Property Descriptions\n\n### `isPresented: boolean` and `onChanged(isPresented: boolean): void`\n\n**Description**:\nUses the `isPresented` and `onChanged` properties to control the visibility and behavior of the toast.\n\n**Example**:\n\n```tsx\nconst [showToast, setShowToast] = useState(false)\n\ntoast={{\n  isPresented: showToast,\n  onChanged: setShowToast,\n  message: \"Saved successfully\"\n}}\n```\n\n***\n\n### `isPresented: Observable<boolean>`\n\n**Description**:\nUses the `isPresented` observable to control the visibility and behavior of the toast.\n\n**Example**:\n\n```tsx\nconst showToast = useObservable(false)\n\ntoast={{\n  isPresented: showToast,\n  message: \"Saved successfully\"\n}}\n```\n\n***\n\n### `duration?: number | null`\n\n**Description**:\nSpecifies how long (in seconds) the toast should remain visible.\nDefaults to `2` seconds.\n\n**Example**:\n\n```tsx\ntoast={{\n  isPresented: showToast,\n  onChanged: setShowToast,\n  duration: 3,\n  message: \"Action completed\"\n}}\n```\n\n***\n\n### `position?: \"top\" | \"bottom\" | \"center\"`\n\n**Description**:\nControls where the toast appears on the screen.\n\nAvailable values:\n\n- `\"top\"` – Displays the toast at the top.\n- `\"bottom\"` – Displays the toast at the bottom (default).\n- `\"center\"` – Displays the toast in the center.\n\n**Example**:\n\n```tsx\ntoast={{\n  isPresented: showToast,\n  onChanged: setShowToast,\n  position: \"top\",\n  message: \"New message received\"\n}}\n```\n\n***\n\n### `backgroundColor?: Color | null`\n\n**Description**:\nSets the background color of the toast.\n\n**Example**:\n\n```tsx\ntoast={{\n  isPresented: showToast,\n  onChanged: setShowToast,\n  backgroundColor: \"blue\",\n  message: \"Upload successful\"\n}}\n```\n\n***\n\n### `textColor?: Color | null`\n\n**Description**:\nSets the text color of the toast message.\n\n**Example**:\n\n```tsx\ntoast={{\n  isPresented: showToast,\n  onChanged: setShowToast,\n  textColor: \"white\",\n  message: \"Download failed\"\n}}\n```\n\n***\n\n### `cornerRadius?: number | null`\n\n**Description**:\nSets the corner radius of the toast.\nDefaults to `16`.\n\n**Example**:\n\n```tsx\ntoast={{\n  isPresented: showToast,\n  onChanged: setShowToast,\n  cornerRadius: 8,\n  message: \"Item added\"\n}}\n```\n\n***\n\n### `shadowRadius?: number | null`\n\n**Description**:\nSets the blur radius of the toast’s shadow.\nDefaults to `4`.\n\n**Example**:\n\n```tsx\ntoast={{\n  isPresented: showToast,\n  onChanged: setShowToast,\n  shadowRadius: 6,\n  message: \"Success\"\n}}\n```\n\n***\n\n## Displaying a Simple Message\n\n**Example**:\n\n```tsx\nfunction View() {\n  const [showToast, setShowToast] = useState(false)\n\n  return (\n    <List\n      toast={{\n        isPresented: showToast,\n        onChanged: setShowToast,\n        message: \"Data saved successfully\",\n        duration: 2,\n        position: \"bottom\",\n        backgroundColor: \"green\",\n        textColor: \"white\"\n      }}\n    >\n      <Button\n        title=\"Save\"\n        action={() => setShowToast(true)}\n      />\n    </List>\n  )\n}\n```\n\nWhen the button is pressed, a green toast with the message “Data saved successfully” appears at the bottom for 2 seconds.\n\n***\n\n## Displaying Custom Content\n\n**Description**:\nInstead of plain text, you can provide a custom `VirtualNode` (view) as the toast content.\nThis allows you to include icons, multiple text lines, or other view layouts.\n\n**Example**:\n\n```tsx\nfunction View() {\n  const [showToast, setShowToast] = useState(false)\n\n  return (\n    <List\n      toast={{\n        isPresented: showToast,\n        onChanged: setShowToast,\n        content: (\n          <HStack spacing={8}>\n            <Image systemName=\"checkmark.circle.fill\" />\n            <Text foregroundStyle=\"white\">Upload Complete</Text>\n          </HStack>\n        ),\n        backgroundColor: \"black\",\n        cornerRadius: 12\n      }}\n    >\n      <Button\n        title=\"Show Toast\"\n        action={() => setShowToast(true)}\n      />\n    </List>\n  )\n}\n```\n\nThis example shows a custom toast with an icon and message inside a black rounded background.\n\n***\n\n## Best Practices\n\n1. **Keep state synchronized**\n   Always ensure `isPresented` and `onChanged` stay in sync so the toast can be properly dismissed.\n\n2. **Use for lightweight notifications**\n   Toasts should only display short, transient messages and should not include complex interactions.\n\n3. **Avoid multiple simultaneous toasts**\n   Displaying more than one toast at the same time may confuse users.\n\n4. **Combine with user actions**\n   Pair the toast with `Button`, `Form`, or other components to provide quick feedback after an action.\n","routePath":"/doc/View Modifiers/Toast","lang":"en","toc":[{"id":"type-definition","text":"Type Definition","depth":2,"charIndex":427},{"id":"property-descriptions","text":"Property Descriptions","depth":2,"charIndex":874},{"id":"ispresented-boolean-and-onchangedispresented-boolean-void","text":"`isPresented: boolean` and `onChanged(isPresented: boolean): void`","depth":3,"charIndex":900},{"id":"ispresented-observableboolean","text":"`isPresented: Observable<boolean>`","depth":3,"charIndex":1272},{"id":"duration-number--null","text":"`duration?: number | null`","depth":3,"charIndex":1558},{"id":"position-top--bottom--center","text":"`position?: \"top\" | \"bottom\" | \"center\"`","depth":3,"charIndex":1839},{"id":"backgroundcolor-color--null","text":"`backgroundColor?: Color | null`","depth":3,"charIndex":2271},{"id":"textcolor-color--null","text":"`textColor?: Color | null`","depth":3,"charIndex":2521},{"id":"cornerradius-number--null","text":"`cornerRadius?: number | null`","depth":3,"charIndex":2760},{"id":"shadowradius-number--null","text":"`shadowRadius?: number | null`","depth":3,"charIndex":3008},{"id":"displaying-a-simple-message","text":"Displaying a Simple Message","depth":2,"charIndex":3259},{"id":"displaying-custom-content","text":"Displaying Custom Content","depth":2,"charIndex":3890},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":4792}],"frontmatter":{},"version":"","description":"The toast view modifier displays a temporary notification message (toast) over the current view.\nIt is typically used to show short feedback messages such as “Saved successfully,” “Action completed,” or “Network error.” You can show a simple text message or provide a fully custom view as the toast’s content.\nYou can also control its duration, position, background color, text color, corner radius, and shadow style."},{"title":"ToolBar View Modifiers","content":"The Scripting app supports a collection of view modifiers that control the visibility, appearance, and behavior of system toolbars, including the navigation bar, bottom bar, and tab bar. These modifiers align closely with SwiftUI's APIs and provide declarative control over toolbar configuration at the view level.\n\n***\n\n## Visibility Modifiers\n\nThese modifiers control the visibility of various interface bars on a per-view basis.\n\n```ts\nbottomBarVisibility?: Visibility\nnavigationBarVisibility?: Visibility\ntabBarVisibility?: Visibility\n```\n\n### Enum: `Visibility`\n\n```ts\ntype Visibility = \"automatic\" | \"hidden\" | \"visible\"\n```\n\n- **`automatic`**: Defers visibility decision to the system.\n- **`hidden`**: Explicitly hides the bar.\n- **`visible`**: Forces the bar to be shown.\n\n***\n\n## Toolbar Title Menu\n\n```ts\ntoolbarTitleMenu?: VirtualNode\n```\n\nAdds a custom menu that appears when tapping the navigation title. This feature is often used to expose contextual actions relevant to the current screen or view hierarchy.\n\n***\n\n## Toolbar Background Style\n\n```ts\ntoolbarBackground?: ShapeStyle | DynamicShapeStyle | {\n  style: ShapeStyle | DynamicShapeStyle\n  bars?: ToolbarPlacement[]\n}\n```\n\nSpecifies the preferred background style of toolbars. You can apply a color, material, or gradient background, and optionally limit the scope to specific bars.\n\n### `bars` (optional)\n\n```ts\ntype ToolbarPlacement = \"automatic\" | \"tabBar\" | \"bottomBar\" | \"navigationBar\"\n```\n\n- Use this field to apply the background style only to specific system bars.\n- If `bars` is omitted, the style applies automatically based on system behavior.\n\n***\n\n## Toolbar Background Visibility (iOS 18+)\n\n```ts\ntoolbarBackgroundVisibility?: Visibility | {\n  visibility: Visibility\n  bars?: ToolbarPlacement[]\n}\n```\n\nControls the visibility of the toolbar background. You can use this to make toolbars appear translucent or completely hidden in specific contexts.\n\n- **`visibility`**: A value of `\"automatic\"`, `\"visible\"`, or `\"hidden\"`.\n- **`bars`** (optional): Targeted bars for applying the visibility change. If omitted, all toolbars are affected.\n\n***\n\n## Toolbar Color Scheme\n\n```ts\ntoolbarColorScheme?: ColorScheme | {\n  colorScheme: ColorScheme | null\n  bars?: ToolbarPlacement[]\n}\n```\n\nSpecifies the color scheme used by toolbars and their contents.\n\n### Enum: `ColorScheme`\n\n```ts\ntype ColorScheme = \"light\" | \"dark\"\n```\n\n- **`light`**: Enforces a light appearance.\n- **`dark`**: Enforces a dark appearance.\n- **`null`**: Resets to the system default.\n\nThe `bars` field limits the color scheme application to selected bars, such as `navigationBar` or `tabBar`.\n\n***\n\n## Toolbar Title Display Mode\n\n```ts\ntoolbarTitleDisplayMode?: ToolbarTitleDisplayMode\n```\n\nControls how the navigation bar title is displayed.\n\n### Enum: `ToolbarTitleDisplayMode`\n\n```ts\ntype ToolbarTitleDisplayMode = \"automatic\" | \"large\" | \"inline\" | \"inlineLarge\"\n```\n\n- **`automatic`**: The system chooses between large or inline style based on context.\n- **`large`**: Displays a large navigation title when appropriate.\n- **`inline`**: Displays the title inline with the navigation bar.\n- **`inlineLarge`**: Enables inline layout while preserving large title characteristics (e.g., custom styling).\n\n***\n\n## Usage Notes\n\n- These modifiers can be combined to achieve consistent toolbar customization across different views.\n- `toolbarBackground`, `toolbarColorScheme`, and `toolbarBackgroundVisibility` accept scoped configuration via the `bars` field, enabling precise visual adjustments.\n- iOS 18 is required for `toolbarBackgroundVisibility`.\n","routePath":"/doc/View Modifiers/ToolBar View Modifiers","lang":"en","toc":[{"id":"visibility-modifiers","text":"Visibility Modifiers","depth":2,"charIndex":321},{"id":"enum-visibility","text":"Enum: `Visibility`","depth":3,"charIndex":544},{"id":"toolbar-title-menu","text":"Toolbar Title Menu","depth":2,"charIndex":786},{"id":"toolbar-background-style","text":"Toolbar Background Style","depth":2,"charIndex":1030},{"id":"bars-optional","text":"`bars` (optional)","depth":3,"charIndex":1356},{"id":"toolbar-background-visibility-ios-18","text":"Toolbar Background Visibility (iOS 18+)","depth":2,"charIndex":1634},{"id":"toolbar-color-scheme","text":"Toolbar Color Scheme","depth":2,"charIndex":2131},{"id":"enum-colorscheme","text":"Enum: `ColorScheme`","depth":3,"charIndex":2333},{"id":"toolbar-title-display-mode","text":"Toolbar Title Display Mode","depth":2,"charIndex":2650},{"id":"enum-toolbartitledisplaymode","text":"Enum: `ToolbarTitleDisplayMode`","depth":3,"charIndex":2795},{"id":"usage-notes","text":"Usage Notes","depth":2,"charIndex":3261}],"frontmatter":{},"version":"","description":"The Scripting app supports a collection of view modifiers that control the visibility, appearance, and behavior of system toolbars, including the navigation bar, bottom bar, and tab bar. These modifiers align closely with SwiftUI's APIs and provide declarative control over toolbar configuration at the view level."},{"title":"blur","content":"Applies a Gaussian blur effect to the view.\n\n## Type\n\n```ts\nblur?: number | {\n  radius: number\n  opaque: boolean\n}\n```\n\n## Example\n\nSimple blur:\n\n```tsx\n<Image blur={10} />\n```\n\nCustom blur:\n\n```tsx\n<Image\n  blur={{\n    radius: 12,\n    opaque: false\n  }}\n/>\n```\n","routePath":"/doc/View Modifiers/blur","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":45},{"id":"example","text":"Example","depth":2,"charIndex":120}],"frontmatter":{},"version":"","description":"Applies a Gaussian blur effect to the view."},{"title":"border","content":"The `border` property adds a border around the view using the specified `style` and optional `width`. This allows you to visually outline views with solid colors, gradients, or system materials, and support light/dark mode adaptations.\n\n## Definition\n\n```ts\nborder?: {\n  style: ShapeStyle | DynamicShapeStyle\n  width?: number\n}\n```\n\n- **`style`**: Required. Defines the visual appearance of the border. Accepts `ShapeStyle` or `DynamicShapeStyle`.\n- **`width`**: Optional. Specifies the thickness of the border in pixels. Defaults to `1`.\n\n## Usage Examples\n\n### Basic Solid Color Border\n\n```tsx\n<Text\n  border={{\n    style: \"systemRed\",\n    width: 2\n  }}\n>\n  Bordered Text\n</Text>\n```\n\n### Default Width Border (1px)\n\n```tsx\n<HStack\n  border={{\n    style: \"#000000\"\n  }}\n>\n  ...\n</HStack>\n```\n\n### Gradient Border\n\n```tsx\n<Text\n  border={{\n    style: {\n      gradient: [\n        { color: \"red\", location: 0 },\n        { color: \"blue\", location: 1 }\n      ],\n      startPoint: { x: 0, y: 0 },\n      endPoint: { x: 1, y: 1 }\n    },\n    width: 3\n  }}\n>\n  Gradient Border\n</Text>\n```\n\n### Dynamic Border Style (Light/Dark Mode)\n\n```tsx\n<Text\n  border={{\n    style: {\n      light: \"gray\",\n      dark: \"white\"\n    },\n    width: 1.5\n  }}\n>\n  Adaptive Border\n</Text>\n```\n\n## Notes\n\n- The border surrounds the entire view, respecting its layout and frame.\n- You can use any `ShapeStyle`, including material blur styles like `\"regularMaterial\"` or `\"ultraThinMaterial\"` for a more iOS-native look.\n","routePath":"/doc/View Modifiers/border","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":237},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":540},{"id":"basic-solid-color-border","text":"Basic Solid Color Border","depth":3,"charIndex":559},{"id":"default-width-border-1px","text":"Default Width Border (1px)","depth":3,"charIndex":687},{"id":"gradient-border","text":"Gradient Border","depth":3,"charIndex":795},{"id":"dynamic-border-style-lightdark-mode","text":"Dynamic Border Style (Light/Dark Mode)","depth":3,"charIndex":1082},{"id":"notes","text":"Notes","depth":2,"charIndex":1265}],"frontmatter":{},"version":"","description":"The border property adds a border around the view using the specified style and optional width. This allows you to visually outline views with solid colors, gradients, or system materials, and support light/dark mode adaptations."},{"title":"buttonStyle","content":"The `buttonStyle` property allows you to customize the interaction behavior and appearance of buttons within a view hierarchy in your UI.\n\n## Property Declaration\n\n```tsx\nbuttonStyle?: ButtonStyle;\n```\n\n### Description\n\nThe `buttonStyle` property applies a specific style to all buttons within a view hierarchy, enabling you to customize their appearance and interaction behavior.\n\n### Accepted Values\n\nThe `buttonStyle` property accepts the following string values:\n\n- **`automatic`**: The default button style, adapting to the button’s context.\n- **`bordered`**: Applies standard border artwork based on the button’s context.\n- **`borderedProminent`**: Applies prominent border artwork for buttons.\n- **`borderless`**: A style that doesn’t apply a border.\n- **`plain`**: A style that avoids decoration while idle but may indicate the button's pressed, focused, or enabled state visually.\n\n### Default Behavior\n\nIf `buttonStyle` is not specified, the default style (`automatic`) is applied based on the button’s context.\n\n## Usage Example\n\nHere’s how you can apply the `buttonStyle` property in your TypeScript code:\n\n### Example: Bordered Button Style\n\n```tsx\n<Button\n  title=\"Press Me\"\n  buttonStyle=\"bordered\"\n  action={() => console.log('Button pressed!')}\n/>\n```\n\nThis creates a button with a standard border.\n\n### Example: Borderless Button Style\n\n```tsx\n<Button\n  title=\"Press Me\"\n  buttonStyle=\"borderless\"\n  action={() => console.log('Button pressed!')}\n/>\n```\n\nThis creates a button without any border.\n\n### Example: Plain Button Style\n\n```tsx\n<Button\n  title=\"Press Me\"\n  buttonStyle=\"plain\"\n  action={() => console.log('Button pressed!')}\n/>\n```\n\nThis creates a button that does not decorate its content while idle but visually indicates interaction states.\n\n## Notes\n\n- The `buttonStyle` property directly maps to SwiftUI’s `buttonStyle` modifier.\n- Ensure the string value matches one of the predefined styles listed above to avoid runtime errors.\n","routePath":"/doc/View Modifiers/buttonStyle","lang":"en","toc":[{"id":"property-declaration","text":"Property Declaration","depth":2,"charIndex":139},{"id":"description","text":"Description","depth":3,"charIndex":203},{"id":"accepted-values","text":"Accepted Values","depth":3,"charIndex":382},{"id":"default-behavior","text":"Default Behavior","depth":3,"charIndex":891},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":1023},{"id":"example-bordered-button-style","text":"Example: Bordered Button Style","depth":3,"charIndex":1119},{"id":"example-borderless-button-style","text":"Example: Borderless Button Style","depth":3,"charIndex":1317},{"id":"example-plain-button-style","text":"Example: Plain Button Style","depth":3,"charIndex":1515},{"id":"notes","text":"Notes","depth":2,"charIndex":1772}],"frontmatter":{},"version":"","description":"The buttonStyle property allows you to customize the interaction behavior and appearance of buttons within a view hierarchy in your UI."},{"title":"clipShape","content":"Clips the view to the specified shape while maintaining its aspect ratio.\n\n### Type\n\n```ts\nclipShape?: Shape\n```\n\n### Example\n\n```tsx\n<Image \n  filePath=\"path/to/photo.jpg\"\n  clipShape=\"Circle\"\n/>\n\n<Image \n  filePath=\"path/to/photo.jpg\"\n  clipShape={\n    type: \"rect\",\n    cornerRadius: 12\n  }\n/>\n```\n","routePath":"/doc/View Modifiers/clipShape","lang":"en","toc":[{"id":"type","text":"Type","depth":3,"charIndex":75},{"id":"example","text":"Example","depth":3,"charIndex":114}],"frontmatter":{},"version":"","description":"Clips the view to the specified shape while maintaining its aspect ratio. Type Example"},{"title":"clipped","content":"Clips the view to its rectangular bounds. You can specify whether to apply anti-aliasing for smooth edges.\n\n## Type\n\n```ts\nclipped?: boolean\n```\n\n## Example\n\n```tsx\n<Text\n  fixedSize\n  frame={{\n    width: 175,\n    height: 100\n  }}\n  clipped={true}\n  border={{\n    style: \"gray\"\n  }}\n>This long text string is clipped</Text>\n```\n","routePath":"/doc/View Modifiers/clipped","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":108},{"id":"example","text":"Example","depth":2,"charIndex":146}],"frontmatter":{},"version":"","description":"Clips the view to its rectangular bounds. You can specify whether to apply anti-aliasing for smooth edges."},{"title":"colorConvert","content":"Inverts the colors in this view. Useful for accessibility or visual emphasis.\n\n### Type\n\n```ts\ncolorConvert?: boolean\n```\n\n### Example\n\n```tsx\n<Image\n  colorConvert={true}\n  imageUrl=\"https://example.com/imgs/example.jpg\"\n/>\n```\n","routePath":"/doc/View Modifiers/colorConvert","lang":"en","toc":[{"id":"type","text":"Type","depth":3,"charIndex":79},{"id":"example","text":"Example","depth":3,"charIndex":123}],"frontmatter":{},"version":"","description":"Inverts the colors in this view. Useful for accessibility or visual emphasis. Type Example"},{"title":"containerRelativeFrame","content":"Positions the view within an invisible frame whose size and position are relative to its nearest container. This modifier is especially useful when working with container views like `ScrollView`, `Grid`, or layout stacks to achieve proportional layout behavior.\n\n## Type\n\n```ts\ncontainerRelativeFrame?: {\n  axes: AxisSet\n  alignment?: Alignment\n  count: never\n  span: never\n  spacing: never\n} | {\n  axes: AxisSet\n  alignment?: Alignment\n  count: number\n  span?: number\n  spacing: number\n}\n```\n\n***\n\n## Description\n\nThis modifier allows a view to size and position itself based on its container’s dimensions. It is often used to create layouts where the view should occupy a specific fraction of the available space or follow container-aligned scrolling behavior.\n\n***\n\n## Properties\n\n- **`axes`** (`AxisSet`, required)\n  The axes (`horizontal`, `vertical`, or `all`) along which to apply the relative sizing and positioning.\n\n- **`alignment`** (`Alignment`, optional, default: `\"center\"`)\n  The alignment of the view within its container-relative frame.\n\n- **`count`** (`number`, optional in second form)\n  The number of equal-sized segments to divide the container's space into.\n\n- **`span`** (`number`, optional, default: `1`)\n  The number of segments the view should span within the container.\n\n- **`spacing`** (`number`, required in second form)\n  The spacing between views laid out using this modifier.\n\n***\n\n## Behavior\n\nThere are two configuration modes:\n\n1. **Auto-Sizing Mode**\n   The view positions itself within a relative container frame without defining how the space is divided.\n\n   ```tsx\n   containerRelativeFrame={{\n     axes: 'horizontal',\n     alignment: 'leading'\n   }}\n   ```\n\n2. **Grid-Like Division Mode**\n   The container is divided into equal parts, and each view can occupy one or more spans with spacing.\n\n   ```tsx\n   containerRelativeFrame={{\n     axes: 'horizontal',\n     count: 4,\n     span: 2,\n     spacing: 10\n   }}\n   ```\n\n***\n\n## Example\n\n```tsx\n<HStack>\n  <Text\n    containerRelativeFrame={{\n      axes: 'horizontal',\n      count: 3,\n      span: 1,\n      spacing: 8,\n      alignment: 'center'\n    }}\n  >\n    One Third\n  </Text>\n</HStack>\n```\n\nThis example places the text in a frame that takes up one-third of the container’s width with spacing of 8 points between items.\n\n***\n\n## See Also\n\n- [Apple Documentation]()\n- [Hacking with Swift: containerRelativeFrame]()\n","routePath":"/doc/View Modifiers/containerRelativeFrame","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":263},{"id":"description","text":"Description","depth":2,"charIndex":499},{"id":"properties","text":"Properties","depth":2,"charIndex":769},{"id":"behavior","text":"Behavior","depth":2,"charIndex":1414},{"id":"example","text":"Example","depth":2,"charIndex":1962},{"id":"see-also","text":"See Also","depth":2,"charIndex":2314}],"frontmatter":{},"version":"","description":"Positions the view within an invisible frame whose size and position are relative to its nearest container. This modifier is especially useful when working with container views like ScrollView, Grid, or layout stacks to achieve proportional layout behavior."},{"title":"contentMargins","content":"The `contentMargins` modifier configures custom margins around a view’s content. This allows precise control over layout spacing, particularly in scrollable containers such as `ScrollView`, `List`, or `Form`. You can apply margins uniformly or selectively to certain edges and placement contexts.\n\n***\n\n## Type\n\n```ts\ncontentMargins?: \n  | number\n  | EdgeInsets\n  | {\n      edges?: EdgeSet\n      insets: number | EdgeInsets\n      placement?: ContentMarginPlacement\n    }\n```\n\n***\n\n## Parameters\n\n## `insets` (required)\n\nDefines the margin values to apply. You can provide:\n\n- A single number (applied to all specified edges)\n- An `EdgeInsets` object for per-edge customization\n\n### Example – uniform insets:\n\n```tsx\n<ScrollView\n  contentMargins={20}\n>\n  <Text>Applies 20 points of margin on all sides</Text>\n</ScrollView>\n```\n\n### Example – edge-specific insets:\n\n```tsx\n<ScrollView\n  contentMargins={{\n    top: 10,\n    bottom: 30,\n    leading: 16,\n    trailing: 16\n  }}\n>\n  <Text>Custom edge insets</Text>\n</ScrollView>\n```\n\n***\n\n## `edges` (optional)\n\nDefines which edges the insets should apply to. If omitted, all edges are used.\n\n### Type\n\n```ts\ntype EdgeSet = \"top\" | \"bottom\" | \"leading\" | \"trailing\" | \"vertical\" | \"horizontal\" | \"all\"\n```\n\n### Example – apply to top and bottom only:\n\n```tsx\n<ScrollView\n  contentMargins={{\n    edges: \"vertical\",\n    insets: 12\n  }}\n>\n  <Text>Vertical-only margins</Text>\n</ScrollView>\n```\n\n***\n\n## `placement` (optional)\n\nSpecifies **where** in the layout the margins should be applied. This is especially relevant in scrollable views that have both scrollable content and indicators.\n\n### Type\n\n```ts\ntype ContentMarginPlacement = \"automatic\" | \"scrollContent\" | \"scrollIndicators\"\n```\n\n### Options\n\n| Value                | Description                                                   |\n| -------------------- | ------------------------------------------------------------- |\n| `\"automatic\"`        | System chooses appropriate placement (default)                |\n| `\"scrollContent\"`    | Margins apply to the main scrollable content only             |\n| `\"scrollIndicators\"` | Margins apply only to scroll indicators (e.g. scrollbar area) |\n\n### Example – margin applied only to scrollable content:\n\n```tsx\n<ScrollView\n  contentMargins={{\n    insets: 24,\n    placement: \"scrollContent\"\n  }}\n>\n  <Text>Scroll content margins only</Text>\n</ScrollView>\n```\n\n***\n\n## Full Configuration Example\n\n```tsx\n<ScrollView\n  contentMargins={{\n    edges: \"horizontal\",\n    insets: { leading: 20, trailing: 20, top: 0, bottom: 0 },\n    placement: \"scrollContent\"\n  }}\n>\n  <VStack spacing={10}>\n    <Text>Margin is applied only to horizontal scroll content area</Text>\n  </VStack>\n</ScrollView>\n```\n\n***\n\n## Summary\n\n| Property    | Description                                                                                       |\n| ----------- | ------------------------------------------------------------------------------------------------- |\n| `insets`    | Required. Margin values to apply. Can be a number or `EdgeInsets`.                                |\n| `edges`     | Optional. Specifies which edges to apply the margins to. Default is `all`.                        |\n| `placement` | Optional. Defines where the margins apply (scroll content or indicators). Default is `automatic`. |\n","routePath":"/doc/View Modifiers/contentMargins","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":303},{"id":"parameters","text":"Parameters","depth":2,"charIndex":481},{"id":"insets-required","text":"`insets` (required)","depth":2,"charIndex":496},{"id":"example--uniform-insets","text":"Example – uniform insets:","depth":3,"charIndex":678},{"id":"example--edge-specific-insets","text":"Example – edge-specific insets:","depth":3,"charIndex":827},{"id":"edges-optional","text":"`edges` (optional)","depth":2,"charIndex":1031},{"id":"type-1","text":"Type","depth":3,"charIndex":1630},{"id":"example--apply-to-top-and-bottom-only","text":"Example – apply to top and bottom only:","depth":3,"charIndex":1249},{"id":"placement-optional","text":"`placement` (optional)","depth":2,"charIndex":1439},{"id":"type-2","text":"Type","depth":3,"charIndex":-1},{"id":"options","text":"Options","depth":3,"charIndex":1732},{"id":"example--margin-applied-only-to-scrollable-content","text":"Example – margin applied only to scrollable content:","depth":3,"charIndex":2191},{"id":"full-configuration-example","text":"Full Configuration Example","depth":2,"charIndex":2409},{"id":"summary","text":"Summary","depth":2,"charIndex":2738}],"frontmatter":{},"version":"","description":"The contentMargins modifier configures custom margins around a view’s content. This allows precise control over layout spacing, particularly in scrollable containers such as ScrollView, List, or Form. You can apply margins uniformly or selectively to certain edges and placement contexts."},{"title":"contentShape","content":"The `contentShape` property defines the **interactive or visual boundary shape** of a view's content. This shape can influence how a view behaves during interactions such as tapping, dragging, accessibility focus, hover effects, and previews. It is commonly used to fine-tune the **hit-testing area** or provide a custom **visual outline** for advanced interaction features.\n\nThis is especially useful for views like `Button`, `ListRow`, or custom views where the tappable or interactive area should differ from the visual content.\n\n***\n\n## Definition\n\n```ts\ncontentShape?: Shape | {\n  kind: ContentShapeKinds\n  shape: Shape\n}\n```\n\n## Supported Formats\n\n### 1. Simple Shape\n\nYou can specify a standalone `Shape` to define the default content shape for all purposes.\n\n```tsx\ncontentShape=\"circle\"\n```\n\nThis applies to all interactions (tap, accessibility, drag, etc.) unless overridden.\n\n***\n\n### 2. Typed Shape by Purpose\n\nYou can define a content shape with a specific **interaction kind**, using the following structure:\n\n```ts\n{\n  kind: ContentShapeKinds\n  shape: Shape\n}\n```\n\nThis lets you control the content shape behavior in specific contexts (e.g., drag previews or accessibility hit-testing).\n\n***\n\n## Supported `ContentShapeKinds`\n\n| Kind                   | Description                                                                |\n| ---------------------- | -------------------------------------------------------------------------- |\n| `\"interaction\"`        | Defines the hit-testing area (taps, clicks, gestures)                      |\n| `\"dragPreview\"`        | Used for shaping drag-and-drop previews                                    |\n| `\"contextMenuPreview\"` | Used when displaying a context menu preview                                |\n| `\"hoverEffect\"`        | Defines the area for hover interactions (e.g., when using pointer devices) |\n| `\"accessibility\"`      | Defines the shape used for accessibility focus, highlighting, and ordering |\n\n***\n\n## Examples\n\n### Default shape for all interactions\n\n```tsx\n<Button\n  title=\"Click Me\"\n  contentShape=\"capsule\"\n  action={() => {\n\n  }}\n/>\n```\n\n### Custom shape for accessibility only\n\n```tsx\n<Button\n  title=\"Accessible Button\"\n  action={() => {\n\n  }}\n  contentShape={{\n    kind: \"accessibility\",\n    shape: {\n      type: \"rect\",\n      cornerRadius: 12\n    }\n  }}\n/>\n```\n\n### Custom interaction area using an ellipse\n\n```tsx\n<Text\n  contentShape={{\n    kind: \"interaction\",\n    shape: \"ellipse\"\n  }}\n>\n  Custom Tap Area\n</Text>\n```\n\n***\n\n## Notes\n\n- `contentShape` does not alter how the view **looks**, only how it **responds** to interactions or previews.\n- When using custom shapes, ensure the shape aligns appropriately with the view’s layout frame.\n- For symbol-based views (e.g., buttons with icons), defining a `contentShape` can make tap targets more accessible.\n","routePath":"/doc/View Modifiers/contentShape","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":538},{"id":"supported-formats","text":"Supported Formats","depth":2,"charIndex":632},{"id":"1-simple-shape","text":"1. Simple Shape","depth":3,"charIndex":654},{"id":"2-typed-shape-by-purpose","text":"2. Typed Shape by Purpose","depth":3,"charIndex":892},{"id":"supported-contentshapekinds","text":"Supported `ContentShapeKinds`","depth":2,"charIndex":1208},{"id":"examples","text":"Examples","depth":2,"charIndex":1976},{"id":"default-shape-for-all-interactions","text":"Default shape for all interactions","depth":3,"charIndex":1989},{"id":"custom-shape-for-accessibility-only","text":"Custom shape for accessibility only","depth":3,"charIndex":2120},{"id":"custom-interaction-area-using-an-ellipse","text":"Custom interaction area using an ellipse","depth":3,"charIndex":2348},{"id":"notes","text":"Notes","depth":2,"charIndex":2514}],"frontmatter":{},"version":"","description":"The contentShape property defines the interactive or visual boundary shape of a view's content. This shape can influence how a view behaves during interactions such as tapping, dragging, accessibility focus, hover effects, and previews. It is commonly used to fine-tune the hit-testing area or provide a custom visual outline for advanced interaction features. This is especially useful for views like Button, ListRow, or custom views where the tappable or interactive area should differ from the visual content."},{"title":"contentTransition","content":"The `contentTransition` modifier specifies a transition animation to apply when the **content within a single view changes**. Unlike view-level transitions (such as `.transition(.move)`), `contentTransition` animates **changes in content** rather than the insertion or removal of the view itself.\n\nThis is particularly useful when updating the contents of views like `Text`, `Image`, or symbol-based `Image(systemName: ...)`, providing smooth visual feedback on state or data changes.\n\n***\n\n## Type\n\n```ts\ncontentTransition?: ContentTransition\n```\n\n***\n\n## Supported `ContentTransition` Values\n\n| Value | Description |\n| ----- | ----------- |\n\n### `\"identity\"`\n\n- No animation is applied to the content change.\n- The view updates instantly with no visual transition.\n\n```tsx\n<Text contentTransition=\"identity\">{value}</Text>\n```\n\n***\n\n### `\"interpolate\"`\n\n- The view attempts to interpolate between the old and new content where appropriate.\n- Best used with animatable types such as `Color`, `Shape`, or `View` interpolations.\n\n```tsx\n<Rectangle fill={color} contentTransition=\"interpolate\" />\n```\n\n***\n\n### `\"opacity\"`\n\n- Applies a fade effect: old content fades out while new content fades in.\n- Works well with general-purpose views.\n\n```tsx\n<Text contentTransition=\"opacity\">{message}</Text>\n```\n\n***\n\n### `\"numericText\"`\n\n- Specialized transition for `Text` views displaying numbers.\n- Animates character changes in a way that emphasizes numerical progression.\n\n```tsx\n<Text contentTransition=\"numericText\">{score}</Text>\n```\n\n***\n\n### `\"numericTextCountsUp\"`\n\n- Similar to `\"numericText\"`, but optimized for numeric **increments**.\n- Intended for counter-like transitions.\n\n```tsx\n<Text contentTransition=\"numericTextCountsUp\">{level}</Text>\n```\n\n***\n\n### `\"numericTextCountsDown\"`\n\n- Optimized for numeric **decrements**.\n- Useful for countdowns or decreasing counters.\n\n```tsx\n<Text contentTransition=\"numericTextCountsDown\">{remainingTime}</Text>\n```\n\n***\n\n### `\"symbolEffect\"`\n\n- Applies a default symbol animation when a **symbol image** changes.\n- Only affects symbol-based images (`Image(systemName: ...)`) and has no effect on other views.\n\n```tsx\n<Image\n  systemName={isOn ? \"lightbulb.fill\" : \"lightbulb\"}\n  contentTransition=\"symbolEffect\"\n/>\n```\n\n***\n\n### `\"symbolEffectAutomatic\"`\n\n- Uses platform-adaptive symbol animation depending on context.\n- Typically provides fade, scale, or morphing effects between symbols.\n\n```tsx\n<Image\n  systemName={icon}\n  contentTransition=\"symbolEffectAutomatic\"\n/>\n```\n\n***\n\n### `\"symbolEffectReplace\"`\n\n- Replaces the layers of one symbol image with another.\n- Provides a more visually fluid symbol swap than abrupt replacement.\n\n```tsx\n<Image\n  systemName={currentSymbol}\n  contentTransition=\"symbolEffectReplace\"\n/>\n```\n\n***\n\n### `\"symbolEffectAppear\"` / `\"symbolEffectDisappear\"`\n\n- Explicit transitions for symbol insertion and removal, respectively.\n- These may be combined with visibility-based state changes.\n\n```tsx\n{isShown\n  ? <Image\n    systemName=\"checkmark\"\n    contentTransition=\"symbolEffectAppear\"\n  />\n  : null}\n```\n\n***\n\n### `\"symbolEffectScale\"`\n\n- Scales the symbol up or down during the content change.\n- Works well for symbol emphasis or status feedback.\n\n```tsx\n<Image\n  systemName={statusIcon}\n  contentTransition=\"symbolEffectScale\"\n/>\n```\n\n***\n\n## Summary\n\n| Transition              | Best Used For                                |\n| ----------------------- | -------------------------------------------- |\n| `identity`              | No animation at all                          |\n| `interpolate`           | Animatable content (e.g. color, shape)       |\n| `opacity`               | General-purpose fade-in/fade-out transitions |\n| `numericText`           | Text views displaying numbers                |\n| `numericTextCountsUp`   | Animated numeric increases                   |\n| `numericTextCountsDown` | Animated numeric decreases                   |\n| `symbolEffect`          | Transition between two SF Symbols            |\n| `symbolEffectAutomatic` | Platform-determined symbol transitions       |\n| `symbolEffectReplace`   | Replacing symbol layers smoothly             |\n| `symbolEffectAppear`    | Animate symbol appearing                     |\n| `symbolEffectDisappear` | Animate symbol disappearing                  |\n| `symbolEffectScale`     | Scaling effect on symbol changes             |\n\n***\n\nThis modifier is ideal for providing subtle, performant feedback in data-driven UI updates while maintaining view identity and layout stability. It is particularly effective in dashboards, counters, toggles, icon transitions, and numerically dynamic interfaces.\n","routePath":"/doc/View Modifiers/contentTransition","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":491},{"id":"supported-contenttransition-values","text":"Supported `ContentTransition` Values","depth":2,"charIndex":554},{"id":"identity","text":"`\"identity\"`","depth":3,"charIndex":644},{"id":"interpolate","text":"`\"interpolate\"`","depth":3,"charIndex":835},{"id":"opacity","text":"`\"opacity\"`","depth":3,"charIndex":1105},{"id":"numerictext","text":"`\"numericText\"`","depth":3,"charIndex":1307},{"id":"numerictextcountsup","text":"`\"numericTextCountsUp\"`","depth":3,"charIndex":1538},{"id":"numerictextcountsdown","text":"`\"numericTextCountsDown\"`","depth":3,"charIndex":1759},{"id":"symboleffect","text":"`\"symbolEffect\"`","depth":3,"charIndex":1967},{"id":"symboleffectautomatic","text":"`\"symbolEffectAutomatic\"`","depth":3,"charIndex":2271},{"id":"symboleffectreplace","text":"`\"symbolEffectReplace\"`","depth":3,"charIndex":2529},{"id":"symboleffectappear--symboleffectdisappear","text":"`\"symbolEffectAppear\"` / `\"symbolEffectDisappear\"`","depth":3,"charIndex":2783},{"id":"symboleffectscale","text":"`\"symbolEffectScale\"`","depth":3,"charIndex":3094},{"id":"summary","text":"Summary","depth":2,"charIndex":3326}],"frontmatter":{},"version":"","description":"The contentTransition modifier specifies a transition animation to apply when the content within a single view changes. Unlike view-level transitions (such as .transition(.move)), contentTransition animates changes in content rather than the insertion or removal of the view itself. This is particularly useful when updating the contents of views like Text, Image, or symbol-based Image(systemName: ...), providing smooth visual feedback on state or data changes."},{"title":"contextMenu","content":"The `contextMenu` property allows a view to present a contextual menu when the user performs a long-press or right-click gesture. This behavior is consistent with the system-provided context menus in iOS and iPadOS. Developers can define menu items and optionally include a preview view that appears alongside the menu.\n\n***\n\n## Definition\n\n```ts\ncontextMenu?: {\n  menuItems: VirtualNode\n  preview?: VirtualNode\n}\n```\n\n***\n\n## Properties\n\n- **`menuItems`**: A `VirtualNode` that defines the contents of the context menu. This typically consists of one or more `Button` components grouped within a `Group` element.\n\n- **`preview`** (optional): A `VirtualNode` representing a preview view. This preview is displayed adjacent to the context menu, giving users a visual hint of the item or action being contextualized.\n\n***\n\n## Behavior\n\nWhen applied to a view, the `contextMenu` modifier activates when the user performs a long press (on touch devices) or right-click (on pointer-based devices). The system then displays the defined `menuItems`, and if provided, renders the `preview` view.\n\n***\n\n## Example\n\n```tsx\nfunction View() {\n  return <Text\n    contextMenu={{\n      menuItems: <Group>\n        <Button\n          title=\"Add\"\n          action={() => {\n            // Handle add action\n          }}\n        />\n        <Button\n          title=\"Delete\"\n          role=\"destructive\"\n          action={() => {\n            // Handle delete action\n          }}\n        />\n      </Group>\n    }}\n  >\n    Long Press to Open Context Menu\n  </Text>\n}\n```\n\nIn this example, the `Text` view is enhanced with a context menu that appears on long press. The menu presents two actions: \"Add\" and \"Delete\", with the \"Delete\" button styled as destructive.\n\n***\n\n## Notes\n\n- The context menu is automatically styled by the system and adapts to platform conventions.\n- If the `preview` property is not provided, only the menu items will be displayed.\n- The `menuItems` should be structured within a `Group` to ensure proper layout and interaction handling.\n","routePath":"/doc/View Modifiers/contextMenu","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":326},{"id":"properties","text":"Properties","depth":2,"charIndex":424},{"id":"behavior","text":"Behavior","depth":2,"charIndex":821},{"id":"example","text":"Example","depth":2,"charIndex":1094},{"id":"notes","text":"Notes","depth":2,"charIndex":1744}],"frontmatter":{},"version":"","description":"The contextMenu property allows a view to present a contextual menu when the user performs a long-press or right-click gesture. This behavior is consistent with the system-provided context menus in iOS and iPadOS. Developers can define menu items and optionally include a preview view that appears alongside the menu."},{"title":"controlGroupStyle","content":"The `controlGroupStyle` property allows you to set the visual and interactive style for control groups within your view, reflecting the look and feel found in SwiftUI. By defining a `ControlGroupStyle`, you can influence how related controls—such as buttons, toggles, or other interactable elements—are grouped and presented to the user.\n\n## Overview\n\nIn SwiftUI, you might set a `controlGroupStyle` like this:\n\n```swift\nControlGroup {\n    Button(\"Action 1\") { ... }\n    Button(\"Action 2\") { ... }\n}\n.controlGroupStyle(.navigation)\n```\n\n**In Scripting (TypeScript/TSX),** you can achieve similar styling by using the `controlGroupStyle` property on a view that contains control group components:\n\n```tsx\n<ControlGroup\n  title=\"Text Formatting\"\n  controlGroupStyle=\"navigation\"\n>\n  <Button title=\"Bold\" action={() => console.log('Bold pressed')} />\n  <Button title=\"Italic\" action={() => console.log('Italic pressed')} />\n  <Button title=\"Underline\" action={() => console.log('Underline pressed')} />\n</ControlGroup>\n```\n\n## Available Styles\n\nYou can assign any of the following string values to `controlGroupStyle` to define how the control group is displayed:\n\n- **`automatic`**: Let the system decide an appropriate style based on the context.\n- **`compactMenu`**: Presents the controls as a compact menu when tapped, or as a submenu if nested within a larger menu.\n- **`menu`**: Displays the controls in a menu format when pressed, or as a submenu when nested.\n- **`navigation`**: Styles the controls to fit within a navigation context, often aligning with platform-specific navigation styles.\n- **`palette`**: Presents the controls in a palette-like grouping, often showing multiple actions at once.\n\n## Example Usage\n\n### Setting the `controlGroupStyle` to a Menu\n\n```tsx\n<ControlGroup\n  controlGroupStyle=\"menu\"\n>\n  {/* Your content here, possibly a set of controls */}\n</ControlGroup>\n```\n\nIn this example, the controls will appear as a menu. Tapping or interacting with the group will present the items in a menu-like interface.\n\n### Using a Palette Style\n\n```tsx\n<ControlGroup\n  title=\"Text Formatting\"\n  controlGroupStyle=\"palette\"\n>\n  <Button title=\"Bold\" action={() => console.log('Bold pressed')} />\n  <Button title=\"Italic\" action={() => console.log('Italic pressed')} />\n  <Button title=\"Underline\" action={() => console.log('Underline pressed')} />\n</ControlGroup>\n```\n\nHere, the controls may be displayed together in a palette, which could show multiple styling options together for quick selection.\n\n### Automatic Style\n\nIf you’re unsure which style is best, or want to let the system pick a suitable style, you can choose `automatic`:\n\n```tsx\n<ControlGroup\n  title=\"Media Controls\"\n  controlGroupStyle=\"automatic\"\n>\n  <Button title=\"Action A\" action={() => console.log('Action A')} />\n  <Button title=\"Action B\" action={() => console.log('Action B')} />\n</ControlGroup>\n```\n\n## Summary\n\nBy setting `controlGroupStyle`, you guide how your set of controls are displayed and interacted with. Whether you choose a `menu`, `compactMenu`, `navigation`, `palette`, or rely on `automatic`, this property helps ensure that your script’s controls feel naturally integrated with the platform’s UI conventions and user expectations.\n","routePath":"/doc/View Modifiers/controlGroupStyle","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":339},{"id":"available-styles","text":"Available Styles","depth":2,"charIndex":1021},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":1705},{"id":"setting-the-controlgroupstyle-to-a-menu","text":"Setting the `controlGroupStyle` to a Menu","depth":3,"charIndex":1723},{"id":"using-a-palette-style","text":"Using a Palette Style","depth":3,"charIndex":2038},{"id":"automatic-style","text":"Automatic Style","depth":3,"charIndex":2518},{"id":"summary","text":"Summary","depth":2,"charIndex":2894}],"frontmatter":{},"version":"","description":"The controlGroupStyle property allows you to set the visual and interactive style for control groups within your view, reflecting the look and feel found in SwiftUI. By defining a ControlGroupStyle, you can influence how related controls—such as buttons, toggles, or other interactable elements—are grouped and presented to the user."},{"title":"datePickerStyle","content":"The `datePickerStyle` property allows you to customize the appearance and interaction of the `DatePicker` view in your UI.\n\n## Property Declaration\n\n```tsx\nDatePickerStyle = \"automatic\" | \"compact\" | \"graphical\" | \"wheel\" | \"field\" | \"stepperField\"\nDatePickerComponents = \"hourAndMinute\" | \"date\" | \"hourMinuteAndSecond\"\n```\n\n***\n\n## `DatePickerStyle` Values\n\nThe `DatePickerStyle` property accepts the following string values to define the appearance and interaction:\n\n- **`automatic`**: The default style for date pickers.\n- **`compact`**: Displays the date picker components in a compact, textual format.\n- **`graphical`**: Displays the date picker as an interactive calendar or clock.\n- **`wheel`**: Displays the date picker components as columns in a scrollable wheel.\n- **`field`** *(macOS only)*: Displays the components in an editable field.\n- **`stepperField`** *(macOS only)*: Displays the components in an editable field with an adjoining stepper to increment or decrement the selected component.\n\n***\n\n## `DatePickerComponents` Values\n\nThe `displayedComponents` property specifies which components of the date are shown and editable. Accepted values are:\n\n- **`date`**: Displays the day, month, and year based on the locale.\n- **`hourAndMinute`**: Displays the hour and minute components based on the locale.\n- **`hourMinuteAndSecond`** *(watchOS only)*: Displays the hour, minute, and second components based on the locale.\n\n***\n\n## Usage Example\n\n### Example 1: Graphical Date Picker\n\n```tsx\nfunction View() {\n  const [date, setDate] = useState(Date.now())\n\n  return <DatePicker\n    title=\"Select Date\"\n    value={date}\n    onChanged={setDate}\n    startDate={Date.now() - 31556926000} // 1 year ago\n    endDate={Date.now() + 31556926000}  // 1 year ahead\n    displayedComponents={[\"date\"]}\n    datePickerStyle=\"graphical\"\n  />\n}\n```\n\nThis creates a graphical date picker for selecting a date.\n\n***\n\n### Example 2: Compact Date Picker with Time Selection\n\n```tsx\nfunction View() {\n  const [time, setTime] = useState(Date.now())\n  return <DatePicker\n    title=\"Select Time\"\n    value={time}\n    onChanged={setTime}\n    displayedComponents={[\"hourAndMinute\"]}\n    datePickerStyle=\"compact\"\n  />\n}\n```\n\nThis creates a compact date picker for selecting the hour and minute.\n\n***\n\n### Example 3: Wheel Date Picker\n\n```tsx\nfunction View() {\n  const [date, setDate] = useState(Date.now())\n  return <DatePicker\n    title=\"Choose Date and Time\"\n    value={date}\n    onChanged={setDate}\n    displayedComponents={[\"hourAndMinute\", \"date\"]}\n    datePickerStyle=\"wheel\"\n  />\n}\n```\n\nThis creates a date picker with a scrollable wheel for date and time selection.\n\n***\n\n## Notes\n\n- The `DatePickerStyle` property maps directly to SwiftUI’s `datePickerStyle` modifier.\n- Ensure that the `displayedComponents` and `datePickerStyle` values are compatible with the target platform to avoid runtime errors.\n- For macOS-specific styles (`field` and `stepperField`), ensure the app is running on macOS.\n\nWith `DatePickerStyle`, you can create versatile date pickers to suit your app’s design and functional requirements.\n","routePath":"/doc/View Modifiers/datePickerStyle","lang":"en","toc":[{"id":"property-declaration","text":"Property Declaration","depth":2,"charIndex":124},{"id":"datepickerstyle-values","text":"`DatePickerStyle` Values","depth":2,"charIndex":331},{"id":"datepickercomponents-values","text":"`DatePickerComponents` Values","depth":2,"charIndex":1014},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":1443},{"id":"example-1-graphical-date-picker","text":"Example 1: Graphical Date Picker","depth":3,"charIndex":1461},{"id":"example-2-compact-date-picker-with-time-selection","text":"Example 2: Compact Date Picker with Time Selection","depth":3,"charIndex":1913},{"id":"example-3-wheel-date-picker","text":"Example 3: Wheel Date Picker","depth":3,"charIndex":2289},{"id":"notes","text":"Notes","depth":2,"charIndex":2668}],"frontmatter":{},"version":"","description":"The datePickerStyle property allows you to customize the appearance and interaction of the DatePicker view in your UI."},{"title":"disabled","content":"Disables user interactions for this view and its children. Visual elements typically appear dimmed.\n\n## Type\n\n```ts\ndisabled?: boolean\n```\n\n## Example\n\n```tsx\n<Button\n title=\"Submit\" \n disabled={submitDisabled}\n action={submit}\n/>\n```\n","routePath":"/doc/View Modifiers/disabled","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":101},{"id":"example","text":"Example","depth":2,"charIndex":140}],"frontmatter":{},"version":"","description":"Disables user interactions for this view and its children. Visual elements typically appear dimmed."},{"title":"fixedSize","content":"Fixes the size of a view to its ideal dimensions, preventing the view from being compressed or expanded beyond its natural size.\n\n## Type\n\n```ts\nfixedSize?: boolean | {\n  horizontal: boolean\n  vertical: boolean\n}\n```\n\n## Overview\n\nThe `fixedSize` modifier tells the layout system to size a view according to its ideal content size, rather than allowing it to stretch or shrink to fit the parent’s constraints. This is especially useful when you want text or other content to fully display without being truncated, or to prevent the view from being resized to fill available space.\n\nThis modifier behaves similarly to SwiftUI’s [`fixedSize()`]().\n\n## Usage\n\nYou can apply `fixedSize` in one of two ways:\n\n### 1. Boolean Form\n\n```tsx\n<Text fixedSize>\n  This text won't be truncated or compressed.\n</Text>\n```\n\nThis is equivalent to:\n\n```tsx\n<Text fixedSize={{ horizontal: true, vertical: true }}>\n  This text won't be truncated or compressed.\n</Text>\n```\n\n### 2. Object Form\n\nUse this to fix only the horizontal or vertical dimensions:\n\n```tsx\n<Text fixedSize={{ horizontal: true, vertical: false }}>\n  This text won't compress horizontally, but can grow or shrink vertically.\n</Text>\n```\n\n## Behavior\n\n- `horizontal: true`: Prevents the view from compressing or expanding horizontally. Ideal for avoiding text truncation.\n- `vertical: true`: Prevents the view from compressing or expanding vertically.\n- When both are `false`, the modifier has no effect.\n- If a parent container attempts to resize the view, the fixed dimensions take precedence, and the view will remain at its ideal size in those axes.\n\n## Example\n\n```tsx\n<VStack>\n  <Text fixedSize>\n    Long text that should wrap and never be truncated or compressed.\n  </Text>\n  <Text fixedSize={{ horizontal: true, vertical: false }}>\n    This text can grow vertically but keeps its natural width.\n  </Text>\n</VStack>\n```\n\n## Notes\n\n- Common use cases include making sure `Text` views don’t get truncated or `HStack`/`VStack` layouts don’t force views to resize.\n- When using this modifier, be mindful of the parent layout, as it may cause content to overflow if not handled properly.\n","routePath":"/doc/View Modifiers/fixedSize","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":130},{"id":"overview","text":"Overview","depth":2,"charIndex":218},{"id":"usage","text":"Usage","depth":2,"charIndex":647},{"id":"1-boolean-form","text":"1. Boolean Form","depth":3,"charIndex":704},{"id":"2-object-form","text":"2. Object Form","depth":3,"charIndex":954},{"id":"behavior","text":"Behavior","depth":2,"charIndex":1188},{"id":"example","text":"Example","depth":2,"charIndex":1604},{"id":"notes","text":"Notes","depth":2,"charIndex":1877}],"frontmatter":{},"version":"","description":"Fixes the size of a view to its ideal dimensions, preventing the view from being compressed or expanded beyond its natural size."},{"title":"flipsForRightToLeftLayoutDirection","content":"Determines whether the view should horizontally mirror its contents when the system layout direction is right-to-left (RTL), such as when the user interface is set to a right-to-left language (e.g., Arabic or Hebrew).\n\n## Type\n\n`flipsForRightToLeftLayoutDirection?: boolean`\n\n## Description\n\nWhen set to `true`, this modifier causes the view to flip its horizontal layout to match the RTL direction, aligning the visual appearance with the reading flow of right-to-left languages. This is especially useful for custom views or components that require explicit mirroring behavior in internationalized layouts.\n\nWhen set to `false`, the view maintains its left-to-right layout regardless of the system layout direction.\n\n## Default\n\n`false` (The view does not flip by default unless explicitly configured.)\n\n## Example\n\n```tsx\n<Image\n  filePath=\"path/to/icon.png\"\n  flipsForRightToLeftLayoutDirection={true}\n/>\n```\n\nIn this example, the image will automatically flip its horizontal orientation when displayed in a right-to-left layout environment.\n","routePath":"/doc/View Modifiers/flipsForRightToLeftLayoutDirection","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":219},{"id":"description","text":"Description","depth":2,"charIndex":276},{"id":"default","text":"Default","depth":2,"charIndex":719},{"id":"example","text":"Example","depth":2,"charIndex":806}],"frontmatter":{},"version":"","description":"Determines whether the view should horizontally mirror its contents when the system layout direction is right-to-left (RTL), such as when the user interface is set to a right-to-left language (e.g., Arabic or Hebrew)."},{"title":"foregroundStyle & background","content":"These two modifiers—`foregroundStyle` and `background`—allow you to customize the visual styling of view content and its background, supporting a wide range of styles including solid colors, gradients, materials, and dynamic appearances for light/dark mode.\n\n***\n\n## `foregroundStyle`\n\n### Definition\n\n```ts\nforegroundStyle?: ShapeStyle | DynamicShapeStyle | {\n  primary: ShapeStyle | DynamicShapeStyle\n  secondary: ShapeStyle | DynamicShapeStyle\n  tertiary?: ShapeStyle | DynamicShapeStyle\n}\n```\n\nSets the style of a view’s foreground content, such as the color of text, shapes, or symbols. You can pass a single style or a layered style object (`primary`, `secondary`, `tertiary`) to support multi-layered rendering, such as in SF Symbols or decorated text.\n\n### Usage Examples\n\n#### Basic Foreground Color\n\n```tsx\n<Text foregroundStyle=\"white\">\n  Hello World!\n</Text>\n```\n\n#### Foreground with Dynamic Colors (Light/Dark Mode)\n\n```tsx\n<Text\n  foregroundStyle={{\n    light: \"black\",\n    dark: \"white\"\n  }}\n>\n  Adaptive Text\n</Text>\n```\n\n#### Multi-layer Foreground Style\n\n```tsx\n<Text\n  foregroundStyle={{\n    primary: \"red\",\n    secondary: \"orange\",\n    tertiary: \"yellow\"\n  }}\n>\n  Layered Style\n</Text>\n```\n\n> Use layered styles primarily with views that support multistage rendering like system icons or stylized text.\n\n***\n\n## `background`\n\n### Definition\n\n```ts\nbackground?: \n  | ShapeStyle \n  | DynamicShapeStyle \n  | { style: ShapeStyle | DynamicShapeStyle, shape: Shape }\n  | VirtualNode \n  | { content: VirtualNode, alignment: Alignment }\n```\n\nSets the background of a view. You can apply simple colors or gradients, or supply a custom shape or view as the background.\n\n### Background Variants\n\n1. **ShapeStyle**: Use a solid color, gradient, or material.\n2. **DynamicShapeStyle**: Automatically switches styles between light and dark mode.\n3. **Shape with Fill Style**: Use a shape (e.g., `RoundedRectangle`) with a style applied to it.\n4. **VirtualNode**: Use another component as the background.\n5. **Custom Alignment**: Align a background content explicitly behind the main view.\n\n### Usage Examples\n\n#### Solid Color Background\n\n```tsx\n<Text background=\"systemBlue\">\n  Hello\n</Text>\n```\n\n#### Gradient Background\n\n```tsx\n<Text\n  background={{\n    gradient: [\n      { color: \"purple\", location: 0 },\n      { color: \"blue\", location: 1 }\n    ],\n    startPoint: { x: 0, y: 0 },\n    endPoint: { x: 1, y: 1 }\n  }}\n>\n  Gradient Background\n</Text>\n```\n\n#### Dynamic Background\n\n```tsx\n<Text\n  background={{\n    light: \"white\",\n    dark: \"black\"\n  }}\n>\n  Mode-aware Background\n</Text>\n```\n\n#### Background with a Shape\n\n```tsx\n<Text\n  background={\n    <RoundedRectangle fill=\"systemBlue\" />\n  }\n>\n  Hello World!\n</Text>\n```\n\n#### Background with Custom Alignment\n\n```tsx\n<Text\n  background={{\n    content: <Image filePath=\"path/to/background.jpg\" />,\n    alignment: \"center\"\n  }}\n>\n  Overlayed Text\n</Text>\n```\n\n***\n\n## Related Types\n\n- **`ShapeStyle`**\n  A visual style that defines how a foreground or background is rendered—this can be a color, gradient, or material. Supports `\"red\"`, `\"systemBlue\"`, `\"#FF0000\"`, `rgba(...)`, and gradient definitions.\n\n- **`DynamicShapeStyle`**\n  A light/dark mode–aware style with separate definitions for each appearance. The system automatically applies the appropriate style based on the current UI mode.\n\n- **`VirtualNode`**\n  A component used as a background, such as `<Image />`, `<RoundedRectangle />`, or any view that returns a `JSX.Element`.\n\n- **`Shape`**\n  A predefined shape such as `RoundedRectangle`, `Circle`, or `Capsule`, used for styled background shapes.\n\n***\n\n## Summary\n\n| Property          | Purpose                             | Value Types                                            |\n| ----------------- | ----------------------------------- | ------------------------------------------------------ |\n| `foregroundStyle` | Styles text/icons/foreground shapes | `ShapeStyle`, `DynamicShapeStyle`, layered object      |\n| `background`      | Renders a styled background         | `ShapeStyle`, `DynamicShapeStyle`, shape + style, view |\n\nThese properties give you fine-grained control over visual styling and are essential for building rich, adaptive interfaces in the Scripting app.\n","routePath":"/doc/View Modifiers/foregroundStyle & background","lang":"en","toc":[{"id":"foregroundstyle","text":"`foregroundStyle`","depth":2,"charIndex":264},{"id":"definition","text":"Definition","depth":3,"charIndex":286},{"id":"usage-examples","text":"Usage Examples","depth":3,"charIndex":761},{"id":"basic-foreground-color","text":"Basic Foreground Color","depth":4,"charIndex":781},{"id":"foreground-with-dynamic-colors-lightdark-mode","text":"Foreground with Dynamic Colors (Light/Dark Mode)","depth":4,"charIndex":876},{"id":"multi-layer-foreground-style","text":"Multi-layer Foreground Style","depth":4,"charIndex":1039},{"id":"background","text":"`background`","depth":2,"charIndex":1330},{"id":"definition-1","text":"Definition","depth":3,"charIndex":1347},{"id":"background-variants","text":"Background Variants","depth":3,"charIndex":1681},{"id":"usage-examples-1","text":"Usage Examples","depth":3,"charIndex":2096},{"id":"solid-color-background","text":"Solid Color Background","depth":4,"charIndex":2116},{"id":"gradient-background","text":"Gradient Background","depth":4,"charIndex":2204},{"id":"dynamic-background","text":"Dynamic Background","depth":4,"charIndex":2462},{"id":"background-with-a-shape","text":"Background with a Shape","depth":4,"charIndex":2598},{"id":"background-with-custom-alignment","text":"Background with Custom Alignment","depth":4,"charIndex":2733},{"id":"related-types","text":"Related Types","depth":2,"charIndex":2925},{"id":"summary","text":"Summary","depth":2,"charIndex":3629}],"frontmatter":{},"version":"","description":"These two modifiers—foregroundStyle and background—allow you to customize the visual styling of view content and its background, supporting a wide range of styles including solid colors, gradients, materials, and dynamic appearances for light/dark mode."},{"title":"formStyle","content":"The `FormStyle` type defines how a form’s content is visually arranged and presented. By choosing a particular style, you can influence the layout of labels, controls, and sections within your form, providing a more organized and intuitive user experience.\n\n## Overview\n\nA `Form` view can contain various controls (such as text fields, toggles, pickers, etc.) arranged in rows. The `FormStyle` determines how these rows are displayed—whether labels and values line up in columns or if controls are grouped within visually distinct sections.\n\n## Available Styles\n\n- **`automatic`**:\n  Let the system choose the most appropriate style based on context. This is often a good default choice when you don’t have specific layout requirements.\n\n- **`columns`**:\n  Displays a non-scrolling form where labels appear in a trailing-aligned column on the left, and their associated values or controls appear in a leading-aligned column on the right. This style is well-suited for forms where alignment and quick scanning of label-value pairs is important.\n\n- **`grouped`**:\n  Organizes the form into visually grouped sections. Each row typically has a leading-aligned label and a trailing-aligned control. This style helps segment related input fields into distinct categories, making long or complex forms easier to navigate.\n\n## Example Usage\n\n**Columns Style**\n\n```tsx\n<Form formStyle=\"columns\">\n  <TextField\n    title=\"First Name\"\n    value={firstName} \n    onChanged={setFirstName}\n  />\n  <TextField \n    title=\"Last Name\" \n    value={lastName} \n    onChanged={setLastName} \n  />\n  <Toggle \n    title=\"Subscribe\" \n    value={subscribe} \n    onChanged={setSubscribe} \n  />\n</Form>\n```\n\nIn this layout, the labels (e.g., “First Name”, “Last Name”, “Subscribe”) appear in a neat column on one side, with their corresponding input fields or toggles aligned next to them.\n\n**Grouped Style**\n\n```tsx\n<Form formStyle=\"grouped\">\n  <Section \n    header={\n      <Text>Personal Information</Text>\n    }>\n    <TextField \n      title=\"Email\" \n      value={email} \n      onChanged={setEmail} \n    />\n    <TextField \n      title=\"Phone\" \n      value={phone} \n      onChanged={setPhone} \n    />\n  </Section>\n  <Section \n    header={\n      <Text>Settings</Text>\n    }>\n    <Toggle \n      title=\"Enable Notifications\" \n      value={notificationsEnabled} \n      onChanged={setNotificationsEnabled} \n    />\n    <Toggle \n      title=\"Auto-Update\" \n      value={autoUpdate} \n      onChanged={setAutoUpdate} \n    />\n  </Section>\n</Form>\n```\n\nHere, fields are grouped into sections like “Personal Information” and “Settings.” Each section’s rows present a clear label and control pair, helping users understand the logical grouping of inputs.\n\n**Automatic Style**\n\n```tsx\n<Form formStyle=\"automatic\">\n  <TextField \n    title=\"Username\" \n    value={username} \n    onChanged={setUsername} \n  />\n  <SecureField \n    title=\"Password\" \n    value={password} \n    onChanged={setPassword} \n  />\n</Form>\n```\n\nWith `automatic`, the system picks a default style. This is a convenient option for simple forms or when you want to allow the system’s default styling to adapt to different contexts or platforms.\n\n## Summary\n\n- Use **`columns`** for a structured, two-column layout that makes scanning labels and values straightforward.\n- Choose **`grouped`** for visually distinct sections that help users navigate more complex forms.\n- Select **`automatic`** to let the system handle layout decisions, making it ideal for simpler or more adaptable interfaces.\n\nBy setting the `formStyle` on a `Form`, you can fine-tune the presentation to best suit your form’s complexity and user needs.\n","routePath":"/doc/View Modifiers/formStyle","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":258},{"id":"available-styles","text":"Available Styles","depth":2,"charIndex":542},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":1316},{"id":"summary","text":"Summary","depth":2,"charIndex":3167}],"frontmatter":{},"version":"","description":"The FormStyle type defines how a form’s content is visually arranged and presented. By choosing a particular style, you can influence the layout of labels, controls, and sections within your form, providing a more organized and intuitive user experience."},{"title":"frame","content":"The `frame` property defines the size and alignment of a view. You can specify it in one of two formats:\n\n***\n\n#### 1. Fixed Width and Height\n\n```ts\nframe?: {\n  width?: number\n  height?: number\n  alignment?: Alignment\n}\n```\n\nThis format allows you to specify a fixed width and/or height for the view, as well as how it is aligned within that frame.\n\n##### Example\n\n```tsx\n<VStack\n  frame={{\n    width: 100,\n    height: 100,\n    alignment: 'center'\n  }}\n>\n  <Text>Fixed size</Text>\n</VStack>\n```\n\n***\n\n#### 2. Flexible Frame Constraints\n\n```ts\nframe?: {\n  alignment?: Alignment\n  minWidth?: number\n  minHeight?: number\n  maxWidth?: number | 'infinity'\n  maxHeight?: number | 'infinity'\n  idealWidth?: number | 'infinity'\n  idealHeight?: number | 'infinity'\n}\n```\n\nThis format gives more control over layout by specifying minimum, maximum, and ideal dimensions for the frame. These values can be numeric or `'infinity'`, which instructs the view to expand to fill available space.\n\n##### Example\n\n```tsx\n<HStack\n  frame={{\n    minWidth: 100,\n    maxWidth: 'infinity',\n    minHeight: 50,\n    idealHeight: 100,\n    alignment: 'leading'\n  }}\n>\n  <Text>Expandable width</Text>\n</HStack>\n```\n\n***\n\n## Alignment\n\nThe `alignment` property determines how the view is positioned within the frame. Common alignment values include:\n\n- `'center'`\n- `'top'`\n- `'bottom'`\n- `'leading'`\n- `'trailing'`\n- `'topLeading'`\n- `'topTrailing'`\n- `'bottomLeading'`\n- `'bottomTrailing'`\n\n> **Note**: Alignment only affects layout when the frame size exceeds the view’s natural size.\n\n##### Example\n\n```tsx\n<Text\n  frame={{\n    width: 200,\n    height: 100,\n    alignment: 'bottomTrailing'\n  }}\n>\n  Aligned Text\n</Text>\n```\n\n***\n\n## Best Practices\n\n- Use the fixed `width` and `height` format when you want precise dimensions.\n- Use the flexible format with `min` / `max` / `ideal` values when working with responsive layouts.\n- Avoid specifying both `width`/`height` and `minWidth`/`maxWidth`, etc., in the same frame object — choose one format to avoid conflicts.\n\n***\n\n## Summary\n\nThe `frame` property in `CommonViewProps` allows fine-grained control over layout sizing and alignment, closely mirroring SwiftUI’s native `frame` modifier. Use it to design clean and adaptable interfaces across different screen sizes.\n","routePath":"/doc/View Modifiers/frame","lang":"en","toc":[{"id":"1-fixed-width-and-height","text":"1. Fixed Width and Height","depth":4,"charIndex":111},{"id":"2-flexible-frame-constraints","text":"2. Flexible Frame Constraints","depth":4,"charIndex":501},{"id":"alignment","text":"Alignment","depth":2,"charIndex":1191},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":1702},{"id":"summary","text":"Summary","depth":2,"charIndex":2044}],"frontmatter":{},"version":"","description":"The frame property defines the size and alignment of a view. You can specify it in one of two formats: 1. Fixed Width and Height This format allows you to specify a fixed width and/or height for the view, as well as how it is aligned within that frame. Example 2. Flexible Frame Constraints This format gives more control over layout by specifying minimum, maximum, and ideal dimensions for the frame. These values can be numeric or 'infinity', which instructs the view to expand to fill available space. Example"},{"title":"gaugeStyle","content":"The `GaugeStyle` type defines how a gauge is visually represented. By selecting a particular style, you control whether the gauge appears as a ring, a bar, or uses markers to indicate the current value. Some styles only apply on specific platforms (notably watchOS), while others are more broadly available.\n\n## Overview\n\nA `Gauge` component visually represents a value within a specified range. For example, you might use it to show a battery level, download progress, or temperature reading. By combining a `Gauge` with a chosen `GaugeStyle`, you can tailor the gauge’s appearance to match your app’s design language or functional requirements.\n\n**Key points:**\n\n- Choose a style that best suits the data you’re representing—rings for circular contexts, bars for linear contexts.\n- Some styles show a marker at the current value; others show a filled segment or partial capacity.\n- Certain styles are only available on watchOS, as noted below.\n\n## Available Styles\n\n- **`automatic`**:\\\n  Relies on the system’s default style for the current platform and context. This is a good starting point if you don’t have a strong preference.\n\n- **`accessoryCircular`**:\\\n  Shows an open ring with a marker that points to the current value along the ring’s circumference. Great for showing levels or percentages in a compact, circular form.\n\n- **`accessoryCircularCapacity`**:\\\n  Similar to `accessoryCircular` but shows a closed ring partially filled in up to the current value. This works well to indicate capacity levels, such as a storage meter.\n\n- **`circular`** *(Only available on watchOS)*:\\\n  Like `accessoryCircular`, this displays an open ring with a marker. Useful for watchOS complications or similar small form factor displays.\n\n- **`linearCapacity`**:\\\n  Displays a horizontal bar that fills from the leading edge to the trailing edge as the value increases. Ideal for progress bars, battery meters, or memory usage indicators.\n\n- **`accessoryLinear`**:\\\n  A linear gauge that shows a marker along a bar, indicating the exact point of the current value rather than a filled segment.\n\n- **`accessoryLinearCapacity`**:\\\n  Combines aspects of `linearCapacity` with the `accessoryLinear` style. It shows a filled bar segment that grows with the value, suitable for showing capacity or progress out of a whole.\n\n- **`linear`** *(Only available on watchOS)*:\\\n  Similar to `accessoryLinear` but watchOS-specific. It shows a marker along a bar for the current value.\n\n## Example Usage\n\n```tsx\n<Gauge\n  value={0.7}\n  min={0}\n  max={1}\n  label={<Text>Battery</Text>}\n  currentValueLabel={<Text>70%</Text>}\n  minValueLabel={<Text>0%</Text>}\n  maxValueLabel={<Text>100%</Text>}\n  gaugeStyle=\"accessoryCircularCapacity\"\n/>\n```\n\nIn this example, the gauge shows a partially filled circular ring indicating that the battery level is at 70%.\n\nSwitching to a linear capacity style:\n\n```tsx\n<Gauge\n  value={0.7}\n  min={0}\n  max={1}\n  label={<Text>Download Progress</Text>}\n  currentValueLabel={<Text>70%</Text>}\n  gaugeStyle=\"linearCapacity\"\n/>\n```\n\nThis would show a horizontal bar filled from left to right up to 70% of its length.\n\nIf you prefer a style that shows a marker instead of a fill, you could do:\n\n```tsx\n<Gauge\n  value={0.7}\n  min={0}\n  max={1}\n  label={<Text>Temperature</Text>}\n  currentValueLabel={<Text>Warm</Text>}\n  gaugeStyle=\"accessoryCircular\"\n/>\n```\n\nThis style displays an open ring with a marker pointing to the current value (70%) rather than a filled segment.\n\n## When to Use Each Style\n\n- **`circular` and `accessoryCircular` styles:**\\\n  Ideal for data that you intuitively represent in a circular format, such as a timer, speedometer-like reading, or capacity shown as a ring.\n\n- **`linear` and `accessoryLinear` styles:**\\\n  Best for data that’s inherently linear, like progress bars, completion percentages, or levels that are typically read left to right.\n\n- **`Capacity` styles:**\\\n  Perfect for scenarios where you want a filled segment to indicate how “full” or “complete” something is, such as battery life, storage space used, or loading progress.\n\n- **`automatic`:**\\\n  Let the system decide and adapt style based on context. Good as a default choice if you’re unsure.\n\n## Summary\n\nBy setting the `gaugeStyle` on a `Gauge`, you have full control over the visual representation of your data. Whether you want a circular ring, a linear bar, a simple marker, or a filled capacity indicator, `GaugeStyle` provides flexible options to present information in a way that feels both intuitive and aesthetically pleasing.\n","routePath":"/doc/View Modifiers/gaugeStyle","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":309},{"id":"available-styles","text":"Available Styles","depth":2,"charIndex":947},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2467},{"id":"when-to-use-each-style","text":"When to Use Each Style","depth":2,"charIndex":3478},{"id":"summary","text":"Summary","depth":2,"charIndex":4199}],"frontmatter":{},"version":"","description":"The GaugeStyle type defines how a gauge is visually represented. By selecting a particular style, you control whether the gauge appears as a ring, a bar, or uses markers to indicate the current value. Some styles only apply on specific platforms (notably watchOS), while others are more broadly available."},{"title":"hidden","content":"If `true`, the view is invisible and does not respond to interactions. However, it still occupies layout space in the view hierarchy.\n\n## Type\n\n```ts\nhidden?: boolean\n```\n\n## Example\n\n```tsx\n<Text hidden={true}>This text is hidden</Text>\n```\n","routePath":"/doc/View Modifiers/hidden","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":135},{"id":"example","text":"Example","depth":2,"charIndex":172}],"frontmatter":{},"version":"","description":"If true, the view is invisible and does not respond to interactions. However, it still occupies layout space in the view hierarchy."},{"title":"labelsHidden","content":"Hides the labels of controls (e.g. `Picker`, `DatePicker`) contained within the view. The controls remain visible and functional.\n\n## Type\n\n```ts\nlabelsHidden?: boolean\n```\n\n## Example\n\n```tsx\n<Picker\n  title=\"Picker\"\n  labelsHidden={true}\n  value={value}\n  onChanged={onChanged}\n>\n  <Text tag={0}>Option 1</Text>\n  <Text tag={1}>Option 2</Text>\n</Picker>\n```\n","routePath":"/doc/View Modifiers/labelsHidden","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":131},{"id":"example","text":"Example","depth":2,"charIndex":174}],"frontmatter":{},"version":"","description":"Hides the labels of controls (e.g. Picker, DatePicker) contained within the view. The controls remain visible and functional."},{"title":"layoutPriority","content":"`layoutPriority` determines how much priority a view has when its parent layout allocates space among multiple child views, especially when space is constrained.\n\nWhen multiple child views compete for space within a layout, those with a higher layout priority will be allocated more space, while those with a lower priority may be compressed or truncated.\n\n## Parameter\n\n- `layoutPriority` *(optional)*\n  A number that defines the layout priority of the view.\n  Higher values indicate higher priority. The default is `0`. Decimal values are supported.\n\n## Usage Example\n\nSuppose you want to create a horizontal stack of text views and ensure that a title is prioritized over a subtitle when space is limited:\n\n```tsx\n<HStack>\n  <Text layoutPriority={1}>Title</Text>\n  <Text>Subtitle (can be compressed)</Text>\n</HStack>\n```\n\nIn this example, the `\"Title\"` text has a higher layout priority, so it will be allocated space first. If space runs out, the `\"Subtitle\"` will be truncated or compressed before the title.\n\n## Notes\n\n- `layoutPriority` only has an effect when the parent layout needs to resolve space conflicts among its children.\n- If all child views have the same priority, space is distributed evenly.\n- Useful in layout containers like `HStack`, `VStack`, and `ZStack` where views might compete for limited space.\n\n***\n\nThe `layoutPriority` modifier is a powerful tool for controlling how views behave in constrained layouts. By adjusting priority values, you can create more adaptive and user-friendly interfaces.\n","routePath":"/doc/View Modifiers/layoutPriority","lang":"en","toc":[{"id":"parameter","text":"Parameter","depth":2,"charIndex":357},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":553},{"id":"notes","text":"Notes","depth":2,"charIndex":1015}],"frontmatter":{},"version":"","description":"layoutPriority determines how much priority a view has when its parent layout allocates space among multiple child views, especially when space is constrained. When multiple child views compete for space within a layout, those with a higher layout priority will be allocated more space, while those with a lower priority may be compressed or truncated."},{"title":"listStyle","content":"The `listStyle` property allows you to customize the behavior and appearance of a list in your UI when using the `List` view.\n\n## Property Declaration\n\n```tsx\nlistStyle?: ListStyle;\n```\n\n### Description\n\nThe `listStyle` property defines the visual style of a list, allowing you to choose from various predefined list styles.\n\n### Accepted Values\n\nThe `listStyle` property accepts the following string values:\n\n- **`automatic`**: Uses the platform’s default behavior and appearance for a list.\n- **`bordered`**: Displays a list with standard borders.\n- **`carousel`**: Applies a carousel-like appearance to the list.\n- **`elliptical`**: Gives the list an elliptical style.\n- **`grouped`**: Displays the list in a grouped format.\n- **`inset`**: Applies an inset appearance to the list.\n- **`insetGroup`**: Combines inset and grouped styles for the list.\n- **`plain`**: Displays the list in a plain style without additional decorations.\n- **`sidebar`**: Renders the list in a sidebar-like appearance.\n\n### Default Behavior\n\nIf `listStyle` is not specified, the default style is determined by the platform.\n\n## Usage Example\n\nHere’s how you can apply the `listStyle` property in your TypeScript code:\n\n### Example: Plain List Style\n\n```tsx\n<List\n  listStyle=\"plain\"\n>\n  <Text>Item 1</Text>\n  <Text>Item 2</Text>\n  <Text>Item 3</Text>\n</List>\n```\n\nThis creates a list with a plain style.\n\n### Example: Grouped List Style\n\n```tsx\n<List\n  listStyle=\"grouped\"\n>\n  <Section header={\n    <Text>Fruits</Text>\n  }>\n    <Text>Apple</Text>\n    <Text>Banana</Text>\n  </Section>\n  <Section header={\n    <Text>Vegetables</Text>\n  }>\n    <Text>Carrot</Text>\n    <Text>Broccoli</Text>\n  </Section>\n</List>\n```\n\nThis creates a grouped list with sections.\n\n### Example: Sidebar List Style\n\n```tsx\n<List\n  listStyle=\"sidebar\"\n>\n  <Text>Home</Text>\n  <Text>Settings</Text>\n  <Text>Profile</Text>\n</List>\n```\n\nThis creates a sidebar-style list.\n\n## Notes\n\n- The `listStyle` property directly maps to SwiftUI’s `listStyle` modifier.\n- Make sure to match the string value with one of the predefined styles listed above to avoid runtime errors.\n","routePath":"/doc/View Modifiers/listStyle","lang":"en","toc":[{"id":"property-declaration","text":"Property Declaration","depth":2,"charIndex":127},{"id":"description","text":"Description","depth":3,"charIndex":187},{"id":"accepted-values","text":"Accepted Values","depth":3,"charIndex":326},{"id":"default-behavior","text":"Default Behavior","depth":3,"charIndex":999},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":1104},{"id":"example-plain-list-style","text":"Example: Plain List Style","depth":3,"charIndex":1198},{"id":"example-grouped-list-style","text":"Example: Grouped List Style","depth":3,"charIndex":1384},{"id":"example-sidebar-list-style","text":"Example: Sidebar List Style","depth":3,"charIndex":1736},{"id":"notes","text":"Notes","depth":2,"charIndex":1922}],"frontmatter":{},"version":"","description":"The listStyle property allows you to customize the behavior and appearance of a list in your UI when using the List view."},{"title":"mask","content":"The `mask` modifier clips the visual rendering of a view using the **alpha channel** of another view. Only the parts of the original view that align with the opaque (non-transparent) portions of the mask remain visible; the rest is hidden.\n\nThis is commonly used to apply custom shapes, spotlight effects, or partial reveals.\n\n***\n\n## Type\n\n```ts\nmask?: VirtualNode | {\n  alignment: Alignment\n  content: VirtualNode\n}\n```\n\n***\n\n## Usage\n\n## 1. Simple Form\n\nApply a mask view directly. The mask is centered on the base view by default.\n\n```tsx\n<Image\n  filePath=\"path/to/photo.png\"\n  frame={{ width: 100, height: 100 }}\n  mask={<Circle />}\n />\n```\n\nIn this example, the image is clipped to a circular shape using a `Circle` as the mask. Only the circular portion of the image is visible.\n\n***\n\n## 2. Object Form (with Alignment)\n\nUse this form when you want to position the mask relative to the base view.\n\n### Structure:\n\n```ts\n{\n  alignment: Alignment\n  content: VirtualNode\n}\n```\n\n### `Alignment` values:\n\n- `\"top\"` | `\"bottom\"` | `\"leading\"` | `\"trailing\"`\n- `\"topLeading\"` | `\"topTrailing\"` | `\"bottomLeading\"` | `\"bottomTrailing\"`\n- `\"center\"`\n\n### Example – apply a top-aligned rectangular mask:\n\n```tsx\n<Rectangle\n  fill=\"blue\"\n  frame={{ width: 100, height: 100 }}\n  mask={{\n    alignment: \"top\",\n    content: <Rectangle frame={{ width: 100, height: 50 }} />\n  }}\n/>\n```\n\nOnly the top half of the blue rectangle will be visible, defined by the opaque rectangle used as the mask.\n\n***\n\n## Behavior\n\n- The **mask view’s opacity** determines the visibility of the base view.\n\n  - Opaque areas (alpha = 1) show the base view.\n  - Transparent areas (alpha = 0) hide it.\n- The mask does **not affect layout**, only how the content is rendered.\n- Use `frame={{ width, height }}` on both base and mask views to ensure proper alignment and coverage.\n\n***\n\n## Common Use Cases\n\n- Cropping images into non-rectangular shapes (e.g., circle, capsule)\n- Creating spotlight or reveal effects\n- Masking decorative or semantic content\n\n***\n\n## Summary\n\n| Field                | Description                                                |\n| -------------------- | ---------------------------------------------------------- |\n| `mask` (VirtualNode) | A view that defines the clipping mask; centered by default |\n| `alignment`          | Optional. Aligns the mask view relative to the base view   |\n| `content`            | The actual masking content used to clip rendering          |\n","routePath":"/doc/View Modifiers/mask","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":332},{"id":"usage","text":"Usage","depth":2,"charIndex":428},{"id":"1-simple-form","text":"1. Simple Form","depth":2,"charIndex":438},{"id":"2-object-form-with-alignment","text":"2. Object Form (with Alignment)","depth":2,"charIndex":793},{"id":"structure","text":"Structure:","depth":3,"charIndex":906},{"id":"alignment-values","text":"`Alignment` values:","depth":3,"charIndex":983},{"id":"example--apply-a-top-aligned-rectangular-mask","text":"Example – apply a top-aligned rectangular mask:","depth":3,"charIndex":1150},{"id":"behavior","text":"Behavior","depth":2,"charIndex":1493},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":1855},{"id":"summary","text":"Summary","depth":2,"charIndex":2032}],"frontmatter":{},"version":"","description":"The mask modifier clips the visual rendering of a view using the alpha channel of another view. Only the parts of the original view that align with the opaque (non-transparent) portions of the mask remain visible; the rest is hidden. This is commonly used to apply custom shapes, spotlight effects, or partial reveals."},{"title":"matchedGeometryEffect","content":"`matchedGeometryEffect` establishes a **geometric relationship between different views**, allowing them to animate smoothly when transitioning across:\n\n- Different layouts\n- Different containers\n- Different conditional render states\n- Different size and position configurations\n\nIt corresponds to SwiftUI’s `matchedGeometryEffect` and is a **component-level geometry animation system**, independent of navigation.\n\n***\n\n## 1. API Definition\n\n```ts\nmatchedGeometryEffect?: {\n  id: string | number\n  namespace: NamespaceID\n  properties?: MatchedGeometryProperties\n  anchor?: Point | KeywordPoint\n  isSource?: boolean\n}\n```\n\n```ts\ntype MatchedGeometryProperties = \"frame\" | \"position\" | \"size\"\n```\n\n***\n\n## 2. Core Purpose\n\nThe core purpose of `matchedGeometryEffect` is:\n\n> To make two views that represent the same logical element share geometry information across different layouts, producing a continuous animated transition instead of a visual jump.\n\nThis solves issues such as:\n\n- Sudden jumps when a view moves between containers\n- Abrupt size changes when expanding a card\n- Layout discontinuity between list and detail views\n- Teleport-like behavior of tab indicators\n\n***\n\n## 3. Parameter Details\n\n### 3.1 `id` — Geometry Matching Identifier\n\n```ts\nid: string | number\n```\n\n- Identifies which views belong to the same geometry group.\n- Only views with the **same `id` inside the same `namespace`** will match.\n- Typically derived from:\n\n  - Model identifiers\n  - Index values\n  - Stable business keys\n\nRules:\n\n- The `id` must remain stable during animation.\n- One `id` can have **only one `isSource = true` at any moment**.\n\n***\n\n### 3.2 `namespace` — Geometry Namespace\n\n```ts\nnamespace: NamespaceID\n```\n\n- Defines the animation scope.\n- Even if two views share the same `id`, they **will not animate** unless the `namespace` is also the same.\n- Must be created and injected via `NamespaceReader`.\n\nRules:\n\n- Source and target **must use the exact same namespace instance**.\n- Cross-namespace matching is not allowed.\n\n***\n\n### 3.3 `properties` — Geometry Properties to Match\n\n```ts\nproperties?: \"frame\" | \"position\" | \"size\"\n```\n\nDefault:\n\n```ts\nproperties = \"frame\"\n```\n\nMeaning:\n\n| Value        | Description                      |\n| ------------ | -------------------------------- |\n| `\"frame\"`    | Matches both position and size   |\n| `\"position\"` | Matches only the center position |\n| `\"size\"`     | Matches only width and height    |\n\nGuidelines:\n\n- Use `\"frame\"` for natural transitions\n- Use `\"position\"` for indicators and sliding highlights\n- Use `\"size\"` for zooming and expansion effects\n\n***\n\n### 3.4 `anchor` — Animation Anchor Point\n\n```ts\nanchor?: Point | KeywordPoint\n```\n\nDefault:\n\n```ts\nanchor = \"center\"\n```\n\nControls how the geometry alignment is calculated during animation.\n\nCommon values:\n\n- `\"center\"`\n- `\"topLeading\"`\n- `\"topTrailing\"`\n- `\"bottomLeading\"`\n- `\"bottomTrailing\"`\n\nUsage examples:\n\n- Expanding a card from the top-left\n- Zooming an avatar from the top-right\n- Sliding a panel upward from the bottom\n\n***\n\n### 3.5 `isSource` — Geometry Data Provider\n\n```ts\nisSource?: boolean\n```\n\nDefault:\n\n```ts\nisSource = true\n```\n\nMeaning:\n\n| Value   | Behavior                              |\n| ------- | ------------------------------------- |\n| `true`  | This view provides geometry data      |\n| `false` | This view receives geometry animation |\n\nStandard pattern:\n\n- Original view → `isSource: true`\n- Target view → `isSource: false`\n\nIf omitted:\n\n- The first appearing view becomes the source by default.\n\n***\n\n## 4. Minimal Working Example (Position + Size Matching)\n\nThis example shows a circle moving and scaling smoothly between two containers.\n\n```tsx\nconst expanded = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <VStack spacing={40}>\n      <Button\n        title=\"Toggle\"\n        onTapGesture={() => {\n          expanded.setValue(!expanded.value)\n        }}\n      />\n\n      <ZStack\n        frame={{ width: 300, height: 200 }}\n        background=\"systemGray6\"\n      >\n        {!expanded.value && (\n          <Circle\n            fill=\"systemOrange\"\n            frame={{ width: 60, height: 60 }}\n            matchedGeometryEffect={{\n              id: \"circle\",\n              namespace\n            }}\n          />\n        )}\n      </ZStack>\n\n      <ZStack\n        frame={{ width: 300, height: 300 }}\n        background=\"systemGray4\"\n      >\n        {expanded.value && (\n          <Circle\n            fill=\"systemOrange\"\n            frame={{ width: 150, height: 150 }}\n            matchedGeometryEffect={{\n              id: \"circle\",\n              namespace,\n              isSource: false\n            }}\n          />\n        )}\n      </ZStack>\n    </VStack>\n  )}\n</NamespaceReader>\n```\n\n### Behavior\n\n- The same logical circle:\n\n  - Moves downward\n  - Grows in size\n  - Maintains continuous animation\n- No visual teleportation occurs\n\n***\n\n## 5. Position-Only Matching (Tab Indicator)\n\n```tsx\nconst selected = useObservable(0)\n\n<NamespaceReader>\n  {namespace => (\n    <HStack spacing={24}>\n      <Text\n        onTapGesture={() => selected.setValue(0)}\n        matchedGeometryEffect={{\n          id: \"indicator\",\n          namespace,\n          properties: \"position\",\n          isSource: selected.value === 0\n        }}\n      >\n        Tab 1\n      </Text>\n\n      <Text\n        onTapGesture={() => selected.setValue(1)}\n        matchedGeometryEffect={{\n          id: \"indicator\",\n          namespace,\n          properties: \"position\",\n          isSource: selected.value === 1\n        }}\n      >\n        Tab 2\n      </Text>\n    </HStack>\n  )}\n</NamespaceReader>\n```\n\nUsed for:\n\n- Tab selection indicators\n- Sliding highlights\n- Moving selection backgrounds\n\n***\n\n## 6. Size-Only Matching (Zoom Animation)\n\n```tsx\nconst expanded = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <ZStack>\n      <Circle\n        fill=\"systemBlue\"\n        frame={{\n          width: expanded.value ? 200 : 80,\n          height: expanded.value ? 200 : 80\n        }}\n        matchedGeometryEffect={{\n          id: \"avatar\",\n          namespace,\n          properties: \"size\"\n        }}\n        onTapGesture={() => {\n          expanded.setValue(!expanded.value)\n        }}\n      />\n    </ZStack>\n  )}\n</NamespaceReader>\n```\n\nSuitable for:\n\n- Avatar zooming\n- Card expansion\n- Press feedback animations\n\n***\n\n## 7. Multi-Element Matching (Card → Detail View)\n\n```tsx\nconst showDetail = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <ZStack>\n      {!showDetail.value && (\n        <VStack spacing={16}>\n          <Image\n            source=\"cover\"\n            matchedGeometryEffect={{\n              id: \"card.image\",\n              namespace\n            }}\n            onTapGesture={() => {\n              showDetail.setValue(true)\n            }}\n          />\n\n          <Text\n            matchedGeometryEffect={{\n              id: \"card.title\",\n              namespace\n            }}\n          >\n            Card Title\n          </Text>\n        </VStack>\n      )}\n\n      {showDetail.value && (\n        <VStack spacing={24}>\n          <Image\n            source=\"cover\"\n            frame={{ width: 300, height: 200 }}\n            matchedGeometryEffect={{\n              id: \"card.image\",\n              namespace,\n              isSource: false\n            }}\n          />\n\n          <Text\n            font=\"largeTitle\"\n            matchedGeometryEffect={{\n              id: \"card.title\",\n              namespace,\n              isSource: false\n            }}\n          >\n            Card Title\n          </Text>\n        </VStack>\n      )}\n    </ZStack>\n  )}\n</NamespaceReader>\n```\n\nEffect:\n\n- Image and title animate together\n- Transition from compact card to expanded detail layout\n- No navigation system required\n\n***\n\n## 8. Key Usage Rules\n\n1. **`namespace` must be identical**\n2. **`id` must be identical**\n3. At any time:\n\n   - One `id` → only one `isSource = true`\n4. Default behavior:\n\n   ```ts\n   properties = \"frame\"\n   anchor = \"center\"\n   isSource = true\n   ```\n5. Source and target must switch within the same render cycle\n6. If both views are marked as `isSource: true`, results are undefined\n7. Live Activity and Widget environments do not fully support matched geometry animations\n\n***\n\n## 9. Suitable Use Cases\n\nRecommended:\n\n- Tab indicators\n- Card-to-detail transitions\n- Image zoom previews\n- List selection animations\n- Split-view selection synchronization\n\nNot recommended:\n\n- High-frequency updating lists\n- Large grids with many simultaneous matches\n- Real-time chart rendering\n","routePath":"/doc/View Modifiers/matchedGeometryEffect","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":420},{"id":"2-core-purpose","text":"2. Core Purpose","depth":2,"charIndex":701},{"id":"3-parameter-details","text":"3. Parameter Details","depth":2,"charIndex":1180},{"id":"31-id--geometry-matching-identifier","text":"3.1 `id` — Geometry Matching Identifier","depth":3,"charIndex":1205},{"id":"32-namespace--geometry-namespace","text":"3.2 `namespace` — Geometry Namespace","depth":3,"charIndex":1637},{"id":"33-properties--geometry-properties-to-match","text":"3.3 `properties` — Geometry Properties to Match","depth":3,"charIndex":2032},{"id":"34-anchor--animation-anchor-point","text":"3.4 `anchor` — Animation Anchor Point","depth":3,"charIndex":2617},{"id":"35-issource--geometry-data-provider","text":"3.5 `isSource` — Geometry Data Provider","depth":3,"charIndex":3055},{"id":"4-minimal-working-example-position--size-matching","text":"4. Minimal Working Example (Position + Size Matching)","depth":2,"charIndex":3552},{"id":"behavior","text":"Behavior","depth":3,"charIndex":4746},{"id":"5-position-only-matching-tab-indicator","text":"5. Position-Only Matching (Tab Indicator)","depth":2,"charIndex":4899},{"id":"6-size-only-matching-zoom-animation","text":"6. Size-Only Matching (Zoom Animation)","depth":2,"charIndex":5719},{"id":"7-multi-element-matching-card--detail-view","text":"7. Multi-Element Matching (Card → Detail View)","depth":2,"charIndex":6352},{"id":"8-key-usage-rules","text":"8. Key Usage Rules","depth":2,"charIndex":7771},{"id":"9-suitable-use-cases","text":"9. Suitable Use Cases","depth":2,"charIndex":8252}],"frontmatter":{},"version":"","description":"matchedGeometryEffect establishes a geometric relationship between different views, allowing them to animate smoothly when transitioning across: Different layoutsDifferent containersDifferent conditional render statesDifferent size and position configurations It corresponds to SwiftUI’s matchedGeometryEffect and is a component-level geometry animation system, independent of navigation."},{"title":"matchedTransitionSource","content":"`matchedTransitionSource` marks a view as the **geometric source of a navigation transition**. It allows a view to act as the starting point of a page-level transition animation, such as a **zoom (Hero-style) transition**.\n\nThis API corresponds to SwiftUI’s `matchedTransitionSource` and is intended **only for navigation transitions**, not for component-level layout animations.\n\nTypical use cases include:\n\n- Image → Image detail zoom\n- Card → Detail page Hero animation\n- Avatar → Profile page transition\n\n***\n\n## 1. API Definition\n\n```ts\n/**\n * Identifies this view as the source of a navigation transition, such as a zoom transition.\n * @available iOS 18.0+\n */\nmatchedTransitionSource?: {\n  id: string | number\n  namespace: NamespaceID\n}\n```\n\n***\n\n## 2. Core Purpose\n\nThe core purpose of `matchedTransitionSource` is:\n\n> To define **which exact view** should be used as the **starting geometry** of a navigation transition.\n\nIt solves the following problems:\n\n- Eliminates the visual disconnect between a tapped view and the destination page\n- Prevents “disappear → new page appears” jump cuts\n- Enables spatial continuity between the source element and the destination layout\n\nWith this API, the system can:\n\n- Read the source view’s real on-screen frame\n- Compute the destination page’s final layout frame\n- Animate smoothly between the two\n\n***\n\n## 3. Parameter Details\n\n### 3.1 `id` — Transition Source Identifier\n\n```ts\nid: string | number\n```\n\nMeaning:\n\n- Uniquely identifies **which view is the transition source**\n- Must **exactly match** the destination page’s `navigationTransition.sourceID`\n\nRules:\n\n- Within the same `namespace`, `id` must be unique\n- Per navigation transition:\n\n  - Only **one** `matchedTransitionSource` may match the `sourceID`\n\n***\n\n### 3.2 `namespace` — Transition Namespace\n\n```ts\nnamespace: NamespaceID\n```\n\nMeaning:\n\n- Defines the **transition animation scope**\n- Created and injected by `NamespaceReader`\n\nRules:\n\n1. The source view and the destination page **must use the exact same namespace**\n2. Different namespaces will **never** produce a matched transition\n3. Even if `id` is the same, a different namespace disables the animation\n\n***\n\n## 4. How matchedTransitionSource Works\n\nA successful navigation zoom transition requires **all four conditions** to be satisfied:\n\n1. A view defines `matchedTransitionSource`\n2. The destination page defines `navigationTransition`\n3. `navigationTransition.sourceID === matchedTransitionSource.id`\n4. Both sides use the **same `namespace`**\n\nOnly when all conditions are met will the system:\n\n- Capture the source view’s:\n\n  - Frame\n  - Position\n  - Scale\n- Capture the destination layout’s final frame\n- Compute:\n\n  - Translation path\n  - Scale ratio\n- Perform the full transition animation\n\n***\n\n## 5. Minimal Working Example: Image → Detail Zoom\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    <NavigationLink\n      destination={\n        <DetailPage\n          navigationTransition={{\n            type: \"zoom\",\n            namespace,\n            sourceID: \"cover\"\n          }}\n        />\n      }\n    >\n      <Image\n        source=\"cover\"\n        frame={{\n          width: 120,\n          height: 160\n        }}\n        matchedTransitionSource={{\n          id: \"cover\",\n          namespace\n        }}\n      />\n    </NavigationLink>\n  )}\n</NamespaceReader>\n```\n\n### Resulting Behavior\n\n1. The user taps the image\n2. Navigation begins\n3. The destination page does not appear instantly\n4. Instead, it **zooms smoothly from the tapped image’s position and size**\n\n***\n\n## 6. Card → Detail Hero Transition Example\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    <NavigationLink\n      destination={\n        <DetailPage\n          navigationTransition={{\n            type: \"zoom\",\n            namespace,\n            sourceID: \"card-1\"\n          }}\n        />\n      }\n    >\n      <VStack\n        frame={{\n          width: 280,\n          height: 180\n        }}\n        background=\"systemGray6\"\n        matchedTransitionSource={{\n          id: \"card-1\",\n          namespace\n        }}\n      >\n        <Text>Card Title</Text>\n      </VStack>\n    </NavigationLink>\n  )}\n</NamespaceReader>\n```\n\nEffect:\n\n- The entire card becomes the transition origin\n- The detail page expands naturally from that card\n- Produces a classic Hero-style animation\n\n***\n\n## 7. Difference Between matchedTransitionSource and matchedGeometryEffect\n\n| Aspect                      | matchedTransitionSource | matchedGeometryEffect  |\n| --------------------------- | ----------------------- | ---------------------- |\n| Scope                       | Page-level navigation   | Component-level layout |\n| Requires Navigation         | Yes                     | No                     |\n| Multiple elements supported | No                      | Yes                    |\n| Needs `sourceID`            | Yes                     | No                     |\n| Geometry property control   | No                      | Yes                    |\n| Internal layout animation   | No                      | Yes                    |\n\nSummary:\n\n- `matchedTransitionSource`: controls **where a page transition starts**\n- `matchedGeometryEffect`: controls **how layout changes animate inside views**\n\n***\n\n## 8. Common Issues and Debug Checklist\n\n### 8.1 Transition Does Not Trigger\n\nCheck:\n\n- Does `sourceID` exactly match `matchedTransitionSource.id`?\n- Are both using the same `namespace` instance?\n- Is the navigation actually triggered via `NavigationLink`?\n\n***\n\n### 8.2 Wrong Direction or Scaling Artifacts\n\nCommon causes:\n\n- The source view uses:\n\n  - `scaleEffect`\n  - `offset`\n  - `rotation`\n- Or is wrapped by:\n\n  - `clipShape`\n  - `mask`\n  - `containerShape`\n\nThese affect how the system reads the real geometry frame.\n\n***\n\n### 8.3 Multiple Sources with the Same ID\n\nIncorrect:\n\n- Multiple views share the same `id`\n- All define `matchedTransitionSource`\n\nResult:\n\n- The system cannot determine the true source\n- The transition becomes undefined or fails\n\n***\n\n## 9. Platform and Environment Limitations\n\n1. `matchedTransitionSource` works only with:\n\n   - Navigation-based transitions\n2. It is **not supported or is limited** in:\n\n   - Widgets\n   - Live Activities\n3. It should not be used for:\n\n   - Tab switching\n   - Collapsing/expanding menus\n   - Component state animations\n\nUse `matchedGeometryEffect` for those cases.\n\n***\n\n## 10. Recommended Use Cases\n\nHighly suitable:\n\n- Image → full-screen preview\n- Article cover → reading page\n- Product card → product detail\n- Avatar → profile page\n- Large card → immersive detail view\n\nNot suitable:\n\n- High-frequency UI state changes\n- Dense grid transitions\n- Real-time updating interfaces\n","routePath":"/doc/View Modifiers/matchedTransitionSource","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":514},{"id":"2-core-purpose","text":"2. Core Purpose","depth":2,"charIndex":754},{"id":"3-parameter-details","text":"3. Parameter Details","depth":2,"charIndex":1355},{"id":"31-id--transition-source-identifier","text":"3.1 `id` — Transition Source Identifier","depth":3,"charIndex":1380},{"id":"32-namespace--transition-namespace","text":"3.2 `namespace` — Transition Namespace","depth":3,"charIndex":1772},{"id":"4-how-matchedtransitionsource-works","text":"4. How matchedTransitionSource Works","depth":2,"charIndex":2188},{"id":"5-minimal-working-example-image--detail-zoom","text":"5. Minimal Working Example: Image → Detail Zoom","depth":2,"charIndex":2785},{"id":"resulting-behavior","text":"Resulting Behavior","depth":3,"charIndex":3348},{"id":"6-card--detail-hero-transition-example","text":"6. Card → Detail Hero Transition Example","depth":2,"charIndex":3552},{"id":"7-difference-between-matchedtransitionsource-and-matchedgeometryeffect","text":"7. Difference Between matchedTransitionSource and matchedGeometryEffect","depth":2,"charIndex":4324},{"id":"8-common-issues-and-debug-checklist","text":"8. Common Issues and Debug Checklist","depth":2,"charIndex":5234},{"id":"81-transition-does-not-trigger","text":"8.1 Transition Does Not Trigger","depth":3,"charIndex":5275},{"id":"82-wrong-direction-or-scaling-artifacts","text":"8.2 Wrong Direction or Scaling Artifacts","depth":3,"charIndex":5497},{"id":"83-multiple-sources-with-the-same-id","text":"8.3 Multiple Sources with the Same ID","depth":3,"charIndex":5765},{"id":"9-platform-and-environment-limitations","text":"9. Platform and Environment Limitations","depth":2,"charIndex":6002},{"id":"10-recommended-use-cases","text":"10. Recommended Use Cases","depth":2,"charIndex":6373}],"frontmatter":{},"version":"","description":"matchedTransitionSource marks a view as the geometric source of a navigation transition. It allows a view to act as the starting point of a page-level transition animation, such as a zoom (Hero-style) transition. This API corresponds to SwiftUI’s matchedTransitionSource and is intended only for navigation transitions, not for component-level layout animations. Typical use cases include: Image → Image detail zoomCard → Detail page Hero animationAvatar → Profile page transition"},{"title":"offset","content":"Moves the view from its original position by the specified x and y distances.\n\n## Type\n\n```ts\noffset?: { x: number, y: number }\n```\n\n## Example\n\n```tsx\n<Text \n  offset={{\n    x: 10,\n    y: -20\n  }}\n>Offset Text</Text>\n```\n","routePath":"/doc/View Modifiers/offset","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":79},{"id":"example","text":"Example","depth":2,"charIndex":133}],"frontmatter":{},"version":"","description":"Moves the view from its original position by the specified x and y distances."},{"title":"onDrag and onDrop View Modifiers","content":"Scripting provides a Drag & Drop API closely aligned with the SwiftUI drag-and-drop interaction model. It enables views to act as drag sources, drop destinations, or both, supporting intra-app and cross-app drag-and-drop scenarios.\n\nThe API is composed of three core parts:\n\n- **onDrag**: Declares a view as a drag source\n- **onDrop**: Declares a view as a drop destination\n- **DropInfo / ItemProvider / UTType**: Context objects describing drag content and state\n\nDrag and drop is a system-controlled interaction. Certain APIs are only valid during specific callbacks. These constraints are explicitly documented below and must be respected.\n\n***\n\n## Core Types\n\n### DropInfo\n\n`DropInfo` represents the real-time state of a drag operation relative to a specific drop target view.\nIt is only valid within `onDrop` callbacks.\n\n### Properties\n\n#### location: Point\n\n- The current drag location\n- Expressed in the **local coordinate space of the drop view**\n- Commonly used for:\n\n  - Insertion indicators\n  - Reordering logic\n  - Position-based highlighting\n\n### Methods\n\n#### hasItemsConforming(types: UTType\\[]): boolean\n\n- Indicates whether at least one dragged item conforms to any of the specified UTTypes\n- Commonly used in:\n\n  - `validateDrop`\n  - `dropEntered`\n  - `dropUpdated`\n- This method performs capability checks only and does not load data\n\n#### itemProviders(types: UTType\\[]): ItemProvider\\[]\n\n- Returns all `ItemProvider` instances conforming to the specified UTTypes\n- **Only valid inside the `performDrop` callback**\n- After `performDrop` returns, access to the dragged data is revoked by the system\n\n> Critical constraint\n> You must **start loading the contents** of the returned `ItemProvider` instances **within the scope of `performDrop`**.\n> Loading may complete later, but it must be initiated synchronously before `performDrop` returns.\n\n***\n\n## DropOperation\n\n`DropOperation` describes the action a drop target intends to perform.\n\nAvailable values:\n\n- `\"copy\"`\n  Copies the dragged data (default and most common)\n\n- `\"move\"`\n  Moves the data instead of copying it (typically internal to the app)\n\n- `\"cancel\"`\n  Cancels the drag operation and transfers no data\n\n- `\"forbidden\"`\n  Explicitly disallows the drop at the current location\n\n`DropOperation` is usually returned from `dropUpdated` to dynamically control the drag behavior.\n\n***\n\n## DragDropProps\n\n`DragDropProps` defines the optional drag-and-drop capabilities that a view may adopt.\n\n***\n\n## onDrag\n\n### Purpose\n\nMarks the view as a **drag source**, allowing the user to initiate a drag operation from it.\n\n### Definition\n\n```ts\nonDrag?: {\n  data: () => ItemProvider\n  preview: VirtualNode\n}\n```\n\n### Parameters\n\n#### data\n\n```ts\ndata: () => ItemProvider\n```\n\n- Returns an `ItemProvider` describing the dragged data\n- Supports text, images, files, URLs, and custom types\n- Invoked each time a drag begins\n\nRecommended practice:\nCreate a new `ItemProvider` instance for each drag operation. Do not reuse instances.\n\n#### preview\n\n```ts\npreview: VirtualNode\n```\n\n- A view used as the drag preview\n- Rendered by the system as a floating representation during dragging\n- Centered over the source view by default\n\n***\n\n## onDrop\n\n### Purpose\n\nMarks the view as a **drop destination** and provides fine-grained control over validation, interaction updates, and data handling.\n\n### Definition\n\n```ts\nonDrop?: {\n  types: UTType[]\n  validateDrop?: (info: DropInfo) => boolean\n  dropEntered?: (info: DropInfo) => void\n  dropUpdated?: (info: DropInfo) => DropOperation | null\n  dropExited?: (info: DropInfo) => void\n  performDrop: (info: DropInfo) => boolean\n}\n```\n\n***\n\n### onDrop.types\n\n```ts\ntypes: UTType[]\n```\n\n- Declares the content types this view can accept\n- If the dragged content does not conform to any listed type:\n\n  - The drop target does not activate\n  - `validateDrop` is not called\n  - Visual feedback is not shown\n\n***\n\n### validateDrop\n\n```ts\nvalidateDrop?: (info: DropInfo) => boolean\n```\n\n- Determines whether the drop operation should be allowed to begin\n- Returning `false` immediately rejects the drag\n- Common use cases:\n\n  - Checking item count\n  - Enforcing application state constraints\n\nDefault behavior: always returns `true`\n\n***\n\n### dropEntered\n\n```ts\ndropEntered?: (info: DropInfo) => void\n```\n\n- Called when the drag enters the drop target area\n- Typically used to:\n\n  - Show highlight states\n  - Display insertion placeholders\n  - Trigger animations\n\n***\n\n### dropUpdated\n\n```ts\ndropUpdated?: (info: DropInfo) => DropOperation | null\n```\n\n- Called repeatedly as the drag moves within the drop target\n- Used to dynamically specify the intended `DropOperation`\n\nReturn value behavior:\n\n- Returning a `DropOperation` updates the active operation\n- Returning `null`:\n\n  - Reuses the last valid operation\n  - Falls back to `\"copy\"` if none was previously returned\n\n***\n\n### dropExited\n\n```ts\ndropExited?: (info: DropInfo) => void\n```\n\n- Called when the drag leaves the drop target area\n- Commonly used to clear highlight or placeholder UI\n\n***\n\n### performDrop\n\n```ts\nperformDrop: (info: DropInfo) => boolean\n```\n\n- **The most critical callback**\n- Indicates that the user has released the drag and data access is permitted\n- Return value:\n\n  - `true` if the drop was successfully handled\n  - `false` if the drop failed\n\n#### Mandatory constraints\n\n- Within this method, you must:\n\n  - Call `info.itemProviders(...)`\n  - Immediately initiate data loading from the returned providers\n- You must not:\n\n  - Store `ItemProvider` references for later use\n  - Defer loading to unrelated callbacks\n\nThese constraints are enforced by the operating system for security reasons.\n\n***\n\n## Typical Interaction Flow\n\n1. The user initiates a drag from an `onDrag` view\n2. The system checks compatibility using `onDrop.types`\n3. `validateDrop` is invoked\n4. The drag enters the drop target → `dropEntered`\n5. The drag moves within the target → repeated `dropUpdated`\n6. The drag leaves the target → `dropExited`\n7. The user releases the drag → `performDrop`\n8. Data is loaded and processed\n\n***\n\n## Design Guidelines and Best Practices\n\n- Declare UTTypes as narrowly as possible\n- Use `\"forbidden\"` in `dropUpdated` to explicitly block invalid drops\n- Perform heavy parsing or processing only after `ItemProvider` loading completes\n- Prefer system-standard UTTypes (text, image, file, URL) for cross-app drag-and-drop\n","routePath":"/doc/View Modifiers/onDrag and onDrop View Modifiers","lang":"en","toc":[{"id":"core-types","text":"Core Types","depth":2,"charIndex":649},{"id":"dropinfo","text":"DropInfo","depth":3,"charIndex":664},{"id":"properties","text":"Properties","depth":3,"charIndex":826},{"id":"location-point","text":"location: Point","depth":4,"charIndex":842},{"id":"methods","text":"Methods","depth":3,"charIndex":1056},{"id":"hasitemsconformingtypes-uttype-boolean","text":"hasItemsConforming(types: UTType[]): boolean","depth":4,"charIndex":-1},{"id":"itemproviderstypes-uttype-itemprovider","text":"itemProviders(types: UTType[]): ItemProvider[]","depth":4,"charIndex":-1},{"id":"dropoperation","text":"DropOperation","depth":2,"charIndex":1868},{"id":"dragdropprops","text":"DragDropProps","depth":2,"charIndex":2365},{"id":"ondrag","text":"onDrag","depth":2,"charIndex":2476},{"id":"purpose","text":"Purpose","depth":3,"charIndex":2487},{"id":"definition","text":"Definition","depth":3,"charIndex":2594},{"id":"parameters","text":"Parameters","depth":3,"charIndex":2684},{"id":"data","text":"data","depth":4,"charIndex":2700},{"id":"preview","text":"preview","depth":4,"charIndex":3002},{"id":"ondrop","text":"onDrop","depth":2,"charIndex":3201},{"id":"purpose-1","text":"Purpose","depth":3,"charIndex":3212},{"id":"definition-1","text":"Definition","depth":3,"charIndex":3358},{"id":"ondroptypes","text":"onDrop.types","depth":3,"charIndex":3647},{"id":"validatedrop","text":"validateDrop","depth":3,"charIndex":3915},{"id":"dropentered","text":"dropEntered","depth":3,"charIndex":4239},{"id":"dropupdated","text":"dropUpdated","depth":3,"charIndex":4469},{"id":"dropexited","text":"dropExited","depth":3,"charIndex":4878},{"id":"performdrop","text":"performDrop","depth":3,"charIndex":5053},{"id":"mandatory-constraints","text":"Mandatory constraints","depth":4,"charIndex":5329},{"id":"typical-interaction-flow","text":"Typical Interaction Flow","depth":2,"charIndex":5683},{"id":"design-guidelines-and-best-practices","text":"Design Guidelines and Best Practices","depth":2,"charIndex":6089}],"frontmatter":{},"version":"","description":"Scripting provides a Drag & Drop API closely aligned with the SwiftUI drag-and-drop interaction model. It enables views to act as drag sources, drop destinations, or both, supporting intra-app and cross-app drag-and-drop scenarios. The API is composed of three core parts: onDrag: Declares a view as a drag sourceonDrop: Declares a view as a drop destinationDropInfo / ItemProvider / UTType: Context objects describing drag content and state Drag and drop is a system-controlled interaction. Certain APIs are only valid during specific callbacks. These constraints are explicitly documented below and must be respected."},{"title":"onDropContent","content":"`onDropContent` is a view modifier provided by Scripting that allows a view to act as a **drop target**, receiving files, images, or text dragged in from other applications.\n\n***\n\n## Overview\n\nWith `onDropContent`, you can:\n\n- Receive drag-and-drop content from other apps\n- Restrict acceptable content using UTType identifiers\n- Track whether a drag operation is hovering over the view\n- Start loading dropped content through `ItemProvider`\n- Establish persistent access to security-scoped files when needed\n\n***\n\n## Modifier Definition\n\n```ts\nonDropContent?: {\n  types: UTType[]\n  isTarget: {\n    value: boolean\n    onChanged: (value: boolean) => void\n  } | Observable<boolean>\n  perform: (attachments: ItemProvider[]) => boolean\n}\n```\n\n***\n\n## Parameters\n\n### types\n\nSpecifies the list of content types that the view can accept, expressed as UTType strings.\n\nIf the drag operation does not contain any of the specified types:\n\n- The view does not activate as a drop target\n- `isTarget` does not update\n- `perform` is not called\n\nExample:\n\n```ts\ntypes: [\"public.image\", \"public.movie\"]\n```\n\n***\n\n### isTarget\n\nIndicates whether the drag operation is currently hovering over the view.\n\n- The value is `true` when the drag enters the view’s area\n- The value is `false` when the drag exits the area\n\nTwo forms are supported:\n\n- Binding object form\n\n  ```ts\n  {\n    value: boolean\n    onChanged: (value: boolean) => void\n  }\n  ```\n\n- Observable form\n\n  ```ts\n  Observable<boolean>\n  ```\n\nThe observable form works well with `useObservable` and provides a more concise reactive binding.\n\n***\n\n### perform\n\nCalled when content matching the specified `types` is dropped onto the view.\n\n```ts\nperform: (attachments: ItemProvider[]) => boolean\n```\n\n- `attachments` is an array of `ItemProvider`\n- Each `ItemProvider` represents one dropped item\n- The return value indicates whether the drop was successfully handled\n\nReturn value semantics:\n\n- Return `true` to indicate the drop was accepted\n- Return `false` to indicate the drop was not handled\n\n***\n\n## Execution Rules for perform\n\nThe following rules must be followed inside `perform`:\n\n- Loading of `ItemProvider` contents must be **started synchronously within the execution scope of `perform`**\n- Asynchronous completion is allowed using `Promise` or `then`\n- Loading must not be initiated later from a different callback or event\n- If `perform` returns `false`, the system treats the drop as unhandled\n\nReasoning:\n\n- Dropped content is protected by system security rules\n- Access to the dropped payload is only valid while `perform` is executing\n- If loading does not begin within this scope, the content may no longer be accessible\n\n***\n\n## Working with ItemProvider\n\nWithin `perform`, you should inspect each `ItemProvider` and start loading based on its capabilities.\n\nTypical steps include:\n\n- Checking type conformance using `hasItemConforming`\n- Selecting an appropriate loading method\n- Handling files, images, or text accordingly\n\n***\n\n## Example Usage\n\n```tsx\nconst isTarget = useObservable(false)\n\nreturn <VStack\n  onDropContent={{\n    types: [\"public.image\", \"public.movie\"],\n    isTarget: isTarget,\n    perform: (attachments) => {\n      const images: UIImage[] = []\n      const videos: string[] = []\n\n      let found = false\n\n      for (const attachment of attachments) {\n        if (attachment.hasItemConforming(\"public.png\")) {\n          found = true\n          attachment.loadUIImage().then(image => {\n            if (image != null) {\n              images.push(image)\n            }\n          })\n        } else if (attachment.hasItemConforming(\"public.movie\")) {\n          found = true\n          attachment.loadFilePath(\"public.movie\").then(filePath => {\n            if (filePath != null) {\n              // Create a bookmark for the security-scoped file\n              FileManager.addFileBookmark(filePath)\n              videos.push(filePath)\n            }\n          })\n        }\n      }\n\n      return found\n    }\n  }}\n>\n  ...\n</VStack>\n```\n\n***\n\n## Security-Scoped File Access\n\nFile paths obtained via `onDropContent` are typically **security-scoped resources**.\n\nThese paths may become invalid when:\n\n- `perform` returns\n- The app restarts\n- The script lifecycle ends\n\nTo retain long-term access, you should create a file bookmark as soon as the path is obtained.\n\n***\n\n## FileManager.addFileBookmark\n\n```ts\nFileManager.addFileBookmark(path: string, name?: string): string | null\n```\n\nDescription:\n\n- Creates a security-scoped bookmark for a file or folder\n- Intended for paths obtained via APIs such as `Photos` or `onDropContent`\n- Returns the bookmark name, or `null` if creation fails\n\nExample:\n\n```ts\nconst bookmarkName = FileManager.addFileBookmark(filePath)\n```\n\n***\n\n## FileManager.removeFileBookmark\n\n```ts\nFileManager.removeFileBookmark(name: string): boolean\n```\n\nDescription:\n\n- Removes a previously created file bookmark\n- Should be called when access to the file is no longer needed\n- Returns whether the removal was successful\n\nExample:\n\n```ts\nFileManager.removeFileBookmark(bookmarkName)\n```\n\n***\n\n## Usage Recommendations\n\n- Specify `types` as precisely as possible\n- Use `perform` only to start loading, not to wait for results\n- Load images and lightweight data as objects when appropriate\n- Prefer file paths for large resources such as videos or documents\n- Create bookmarks for files that require long-term access\n- Remove bookmarks when the associated files are no longer needed\n","routePath":"/doc/View Modifiers/onDropContent","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":180},{"id":"modifier-definition","text":"Modifier Definition","depth":2,"charIndex":515},{"id":"parameters","text":"Parameters","depth":2,"charIndex":744},{"id":"types","text":"types","depth":3,"charIndex":759},{"id":"istarget","text":"isTarget","depth":3,"charIndex":1098},{"id":"perform","text":"perform","depth":3,"charIndex":1590},{"id":"execution-rules-for-perform","text":"Execution Rules for perform","depth":2,"charIndex":2045},{"id":"working-with-itemprovider","text":"Working with ItemProvider","depth":2,"charIndex":2689},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2994},{"id":"security-scoped-file-access","text":"Security-Scoped File Access","depth":2,"charIndex":4010},{"id":"filemanageraddfilebookmark","text":"FileManager.addFileBookmark","depth":2,"charIndex":4335},{"id":"filemanagerremovefilebookmark","text":"FileManager.removeFileBookmark","depth":2,"charIndex":4740},{"id":"usage-recommendations","text":"Usage Recommendations","depth":2,"charIndex":5079}],"frontmatter":{},"version":"","description":"onDropContent is a view modifier provided by Scripting that allows a view to act as a drop target, receiving files, images, or text dragged in from other applications."},{"title":"opacity","content":"Sets the transparency level of a view. A value of `0` makes the view completely transparent (invisible), while `1` means fully opaque.\n\n## Type\n\n```ts\nopacity?: number\n```\n\n## Example\n\n```tsx\n<Text opacity={0.5}>Semi-transparent Text</Text>\n```\n","routePath":"/doc/View Modifiers/opacity","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":136},{"id":"example","text":"Example","depth":2,"charIndex":173}],"frontmatter":{},"version":"","description":"Sets the transparency level of a view. A value of 0 makes the view completely transparent (invisible), while 1 means fully opaque."},{"title":"overlay","content":"The `overlay` modifier places a view on top of the modified view, creating a layered composition. This is useful for adding decorations, badges, shadows, visual indicators, or interactive elements such as buttons or loading spinners.\n\n***\n\n## Type\n\n```ts\noverlay?: VirtualNode | {\n  alignment: Alignment\n  content: VirtualNode\n}\n```\n\n***\n\n## Parameters\n\n### 1. `VirtualNode` (Simple Form)\n\nDirectly specifies the overlay view to be layered on top of the current view. The overlay is aligned to the center by default.\n\n```tsx\n<Image\n  imageUrl=\"https://example.com/avatar.png\"\n  overlay={<Circle fill=\"black\" opacity={0.2} />}\n/>\n```\n\n### 2. Object Form with Alignment\n\nProvides both the overlay content and a custom alignment for positioning.\n\n#### Structure\n\n```ts\n{\n  alignment: Alignment\n  content: VirtualNode\n}\n```\n\n#### `Alignment` options:\n\n- `\"top\"` | `\"bottom\"` | `\"leading\"` | `\"trailing\"`\n- `\"topLeading\"` | `\"topTrailing\"`\n- `\"bottomLeading\"` | `\"bottomTrailing\"`\n- `\"center\"`\n\n#### Example – badge overlay in top trailing corner:\n\n```tsx\n<Image\n  imageUrl=\"https://example.com/avatar.png\"\n  overlay={{\n    alignment: \"topTrailing\",\n    content: <Circle \n      fill=\"red\"\n      frame={{\n        width: 10,\n        height: 10\n      }}\n   />\n  }}\n/>\n```\n\n***\n\n## Behavior\n\n- The overlay is drawn **in front** of the base view.\n- The overlay respects the bounds of the base view unless clipped.\n- Layout and size of the base view are unaffected by the overlay.\n\n***\n\n## Common Use Cases\n\n- Adding notification badges\n- Overlaying loading indicators\n- Adding visual highlights or status icons\n- Layering semi-transparent effects\n\n***\n\n## Example – Overlay with Text\n\n```tsx\n<Rectangle\n  fill=\"blue\"\n  frame={{\n    width: 100,\n    height: 100\n  }}\n  overlay={{\n    alignment: \"center\",\n    content: <Text foregroundColor=\"white\">Hello</Text>\n  }}\n/>\n```\n\nThis renders a white \"Hello\" text centered on top of a blue rectangle.\n\n***\n\n## Summary\n\n| Parameter     | Description                                             |\n| ------------- | ------------------------------------------------------- |\n| `VirtualNode` | A view to layer on top (centered by default)            |\n| `alignment`   | (Optional) Position of the overlay within the base view |\n| `content`     | The overlay content to display                          |\n","routePath":"/doc/View Modifiers/overlay","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":240},{"id":"parameters","text":"Parameters","depth":2,"charIndex":339},{"id":"1-virtualnode-simple-form","text":"1. `VirtualNode` (Simple Form)","depth":3,"charIndex":354},{"id":"2-object-form-with-alignment","text":"2. Object Form with Alignment","depth":3,"charIndex":634},{"id":"structure","text":"Structure","depth":4,"charIndex":744},{"id":"alignment-options","text":"`Alignment` options:","depth":4,"charIndex":821},{"id":"example--badge-overlay-in-top-trailing-corner","text":"Example – badge overlay in top trailing corner:","depth":4,"charIndex":990},{"id":"behavior","text":"Behavior","depth":2,"charIndex":1270},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":1476},{"id":"example--overlay-with-text","text":"Example – Overlay with Text","depth":2,"charIndex":1643},{"id":"summary","text":"Summary","depth":2,"charIndex":1939}],"frontmatter":{},"version":"","description":"The overlay modifier places a view on top of the modified view, creating a layered composition. This is useful for adding decorations, badges, shadows, visual indicators, or interactive elements such as buttons or loading spinners."},{"title":"padding","content":"The `padding` property adds space around the content of a view, mirroring the behavior of SwiftUI’s `padding` modifier. It helps separate a view from surrounding elements and improve layout clarity.\n\n## Definition\n\n```ts\npadding?: true | number | {\n  horizontal?: number | true\n  vertical?: number | true\n  leading?: number | true\n  trailing?: number | true\n  top?: number | true\n  bottom?: number | true\n}\n```\n\n## Supported Formats\n\nYou can specify padding in multiple ways:\n\n***\n\n### 1. Default Padding\n\n```ts\npadding: true\n```\n\nApplies the system default padding on all sides.\n\n#### Example:\n\n```tsx\n<Text padding={true}>\n  Default Padding\n</Text>\n```\n\n***\n\n### 2. Uniform Padding\n\n```ts\npadding: 8\n```\n\nApplies the same number of points of padding to all edges.\n\n#### Example:\n\n```tsx\n<VStack padding={12}>\n  <Text>Even Padding</Text>\n</VStack>\n```\n\n***\n\n### 3. Directional Padding Object\n\nSpecify individual edges or edge groups.\n\n```ts\npadding: {\n  horizontal: 16,\n  vertical: 8\n}\n```\n\n#### Supported Keys:\n\n| Key          | Description                               |\n| ------------ | ----------------------------------------- |\n| `horizontal` | Padding for both `leading` and `trailing` |\n| `vertical`   | Padding for both `top` and `bottom`       |\n| `leading`    | Padding on the leading edge (LTR: left)   |\n| `trailing`   | Padding on the trailing edge (LTR: right) |\n| `top`        | Padding on the top                        |\n| `bottom`     | Padding on the bottom                     |\n\nEach value can be a number or `true`. When set to `true`, it applies the default system padding for that edge.\n\n#### Example:\n\n```tsx\n<Text\n  padding={{\n    top: 10,\n    bottom: 10,\n    horizontal: 16\n  }}\n>\n  Custom Edge Padding\n</Text>\n```\n\n#### Example with `true` for specific edges:\n\n```tsx\n<Text\n  padding={{\n    top: true,\n    horizontal: 12\n  }}\n>\n  Mixed Padding\n</Text>\n```\n\n***\n\n## Notes\n\n- Padding does **not** affect the size of the view’s content directly, but adjusts the space around it.\n- Combining directional keys allows for precise control over layout spacing.\n- `horizontal`/`vertical` and `leading`/`trailing` can be combined. The more specific key (like `leading`) overrides the group key (like `horizontal`) if both are provided.\n","routePath":"/doc/View Modifiers/padding","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":200},{"id":"supported-formats","text":"Supported Formats","depth":2,"charIndex":412},{"id":"1-default-padding","text":"1. Default Padding","depth":3,"charIndex":482},{"id":"example","text":"Example:","depth":4,"charIndex":581},{"id":"2-uniform-padding","text":"2. Uniform Padding","depth":3,"charIndex":661},{"id":"example-1","text":"Example:","depth":4,"charIndex":767},{"id":"3-directional-padding-object","text":"3. Directional Padding Object","depth":3,"charIndex":859},{"id":"supported-keys","text":"Supported Keys:","depth":4,"charIndex":992},{"id":"example-2","text":"Example:","depth":4,"charIndex":1615},{"id":"example-with-true-for-specific-edges","text":"Example with `true` for specific edges:","depth":4,"charIndex":1746},{"id":"notes","text":"Notes","depth":2,"charIndex":1893}],"frontmatter":{},"version":"","description":"The padding property adds space around the content of a view, mirroring the behavior of SwiftUI’s padding modifier. It helps separate a view from surrounding elements and improve layout clarity."},{"title":"pickerStyle","content":"The `pickerStyle` property allows you to customize the appearance and behavior of pickers within a view hierarchy in your UI.\n\n## Property Declaration\n\n```tsx\npickerStyle?: PickerStyle;\n```\n\n### Description\n\nThe `pickerStyle` property sets the visual style of pickers, enabling you to adapt them to the context and desired user experience.\n\n### Accepted Values\n\nThe `pickerStyle` property accepts the following string values:\n\n- **`automatic`**: The default picker style, adapting to the picker’s context.\n- **`inline`**: Displays each option inline with other views in the current container.\n- **`menu`**: Presents the options as a menu when the user presses a button or as a submenu when nested within a larger menu.\n- **`navigationLink`**: Represents a picker style where the options are presented by pushing a List-style picker view via a navigation link.\n- **`palette`**: Presents the options as a row of compact elements.\n- **`segmented`**: Displays the options in a segmented control.\n- **`wheel`**: Displays the options in a scrollable wheel, showing the selected option and a few neighboring options.\n\n### Default Behavior\n\nIf `pickerStyle` is not specified, the default style (`automatic`) is applied based on the picker’s context.\n\n## Usage Example\n\nHere’s how you can apply the `pickerStyle` property in your TypeScript code:\n\n### Example: Inline Picker Style\n\n```tsx\nfunction View() {\n  const [\n    value,\n    setValue\n  ] = useState(0)\n\n  return <Picker\n    title=\"Picker\"\n    pickerStyle=\"inline\"\n    value={value}\n    onChanged={(value) => {\n      setValue(value)\n      console.log('Selected:', value)\n    }}\n  >\n    <Text tag={0}>Option 1</Text>\n    <Text tag={1}>Option 2</Text>\n    <Text tag={2}>Option 3</Text>\n  </Picker>\n}\n```\n\nThis creates a picker with an inline style.\n\n### Example: Segmented Picker Style\n\n```tsx\nfunction View() {\n  const [\n    value,\n    setValue\n  ] = useState(0)\n\n  return <Picker\n    title=\"Picker\"\n    pickerStyle=\"segmented\"\n    value={value}\n    onChanged={(value) => {\n      setValue(value)\n      console.log('Selected:', value)\n    }}\n  >\n    <Text tag={0}>Option 1</Text>\n    <Text tag={1}>Option 2</Text>\n    <Text tag={2}>Option 3</Text>\n  </Picker>\n}\n```\n\nThis creates a picker displayed in a segmented control.\n\n### Example: Wheel Picker Style\n\n```tsx\nfunction View() {\n  const [\n    value,\n    setValue\n  ] = useState(0)\n\n  return <Picker\n    title=\"Picker\"\n    pickerStyle=\"wheel\"\n    value={value}\n    onChanged={(value) => {\n      setValue(value)\n      console.log('Selected:', value)\n    }}\n  >\n    <Text tag={0}>Option 1</Text>\n    <Text tag={1}>Option 2</Text>\n    <Text tag={2}>Option 3</Text>\n  </Picker>\n}\n```\n\nThis creates a picker with a scrollable wheel style.\n\n## Notes\n\n- The `pickerStyle` property directly maps to SwiftUI’s `pickerStyle` modifier.\n- Ensure the string value matches one of the predefined styles listed above to avoid runtime errors.\n\nWith `pickerStyle`, you can customize the appearance of pickers to suit various contexts and provide a seamless user experience.\n","routePath":"/doc/View Modifiers/pickerStyle","lang":"en","toc":[{"id":"property-declaration","text":"Property Declaration","depth":2,"charIndex":127},{"id":"description","text":"Description","depth":3,"charIndex":191},{"id":"accepted-values","text":"Accepted Values","depth":3,"charIndex":341},{"id":"default-behavior","text":"Default Behavior","depth":3,"charIndex":1111},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":1243},{"id":"example-inline-picker-style","text":"Example: Inline Picker Style","depth":3,"charIndex":1339},{"id":"example-segmented-picker-style","text":"Example: Segmented Picker Style","depth":3,"charIndex":1795},{"id":"example-wheel-picker-style","text":"Example: Wheel Picker Style","depth":3,"charIndex":2269},{"id":"notes","text":"Notes","depth":2,"charIndex":2732}],"frontmatter":{},"version":"","description":"The pickerStyle property allows you to customize the appearance and behavior of pickers within a view hierarchy in your UI."},{"title":"position","content":"Positions the center of the view at the given x and y coordinates within its parent’s coordinate space.\n\n## Type\n\n```ts\nposition?: { x: number, y: number }\n```\n\n## Example\n\n```tsx\n<Text\n  position={{ \n    x: 100,\n    y: 200 \n  }}\n>Positioned Text</Text>\n```\n","routePath":"/doc/View Modifiers/position","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":105},{"id":"example","text":"Example","depth":2,"charIndex":161}],"frontmatter":{},"version":"","description":"Positions the center of the view at the given x and y coordinates within its parent’s coordinate space."},{"title":"preferredColorScheme","content":"Sets the preferred system appearance (light or dark) for the view hierarchy. Only affects non-transient system overlays.\n\n## Type\n\n```ts\npreferredColorScheme?: \"light\" | \"dark\"\n```\n\n## Example\n\n```tsx\n<NavigationStack>\n  <List preferredColorScheme=\"dark\">\n    <Text>Dark mode view</Text>\n  </List>\n</NavigationStack>\n```\n","routePath":"/doc/View Modifiers/preferredColorScheme","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":122},{"id":"example","text":"Example","depth":2,"charIndex":182}],"frontmatter":{},"version":"","description":"Sets the preferred system appearance (light or dark) for the view hierarchy. Only affects non-transient system overlays."},{"title":"progressViewStyle","content":"The `progressViewStyle` property allows you to customize the appearance of a progress view in your UI.\n\n## Property Declaration\n\n```tsx\nprogressViewStyle?: ProgressViewStyle;\n```\n\n### Description\n\nThe `progressViewStyle` property defines the style of a progress view, allowing you to select a visual representation that best fits your app’s context.\n\n### Accepted Values\n\nThe `progressViewStyle` property accepts the following string values:\n\n- **`automatic`**: Uses the default progress view style, adapting to the current context of the view being styled.\n- **`circular`**: Displays a circular gauge to indicate the partial completion of an activity. On platforms other than macOS, this style may appear as an indeterminate indicator.\n- **`linear`**: Displays a horizontal bar to visually indicate progress.\n\n### Default Behavior\n\nIf `progressViewStyle` is not specified, the default style (`automatic`) is applied based on the view’s context.\n\n***\n\n## Progress View Properties\n\n### Timer Interval Progress View Properties\n\nUse these properties to display a progress view for a time-based task:\n\n- **`timerFrom`**: The starting date range timestamp over which the view progresses.\n- **`timerTo`**: The ending date range timestamp over which the view progresses.\n- **`countsDown`** *(optional)*: If true (default), the view empties as time passes.\n- **`label`** *(optional)*: A view that describes the task in progress.\n- **`currentValueLabel`** *(optional)*: A view that describes the level of completed progress of the task.\n\n### Normal Progress View Properties\n\nUse these properties to display a progress view for a task with a defined scope:\n\n- **`value`** *(optional)*: The completed amount of the task to this point, in a range of 0.0 to `total`, or `nil` if the progress is indeterminate.\n- **`total`** *(optional)*: The full amount representing the complete scope of the task (default is 1.0).\n- **`title`** *(optional)*: A title describing the task in progress.\n- **`label`** *(optional)*: A view that describes the task in progress.\n- **`currentValueLabel`** *(optional)*: A view that describes the level of completed progress of the task.\n\n***\n\n## Usage Example\n\n### Example 1: Timer Interval Progress View\n\n```tsx\n<ProgressView\n  progressViewStyle=\"circular\"\n  timerFrom={Date.now()}\n  timerTo={Date.now() + 3600000}\n  countsDown={true}\n  label={<Text>Timer Progress</Text>}\n  currentValueLabel={<Text>Remaining Time</Text>}\n/>\n```\n\nThis creates a circular progress view for a timer interval task.\n\n### Example 2: Normal Progress View\n\n```tsx\n<ProgressView\n  progressViewStyle=\"linear\"\n  value={0.5}\n  total={1.0}\n  title=\"File Upload\"\n  label={<Text>Uploading...</Text>}\n  currentValueLabel={<Text>50%</Text>}\n/>\n```\n\nThis creates a linear progress view for a task with 50% completion.\n\n***\n\n## Notes\n\n- The `progressViewStyle` property directly maps to SwiftUI’s `progressViewStyle` modifier.\n- Ensure the string value matches one of the predefined styles listed above to avoid runtime errors.\n","routePath":"/doc/View Modifiers/progressViewStyle","lang":"en","toc":[{"id":"property-declaration","text":"Property Declaration","depth":2,"charIndex":104},{"id":"description","text":"Description","depth":3,"charIndex":180},{"id":"accepted-values","text":"Accepted Values","depth":3,"charIndex":351},{"id":"default-behavior","text":"Default Behavior","depth":3,"charIndex":811},{"id":"progress-view-properties","text":"Progress View Properties","depth":2,"charIndex":952},{"id":"timer-interval-progress-view-properties","text":"Timer Interval Progress View Properties","depth":3,"charIndex":981},{"id":"normal-progress-view-properties","text":"Normal Progress View Properties","depth":3,"charIndex":1529},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":2157},{"id":"example-1-timer-interval-progress-view","text":"Example 1: Timer Interval Progress View","depth":3,"charIndex":2175},{"id":"example-2-normal-progress-view","text":"Example 2: Normal Progress View","depth":3,"charIndex":2512},{"id":"notes","text":"Notes","depth":2,"charIndex":2806}],"frontmatter":{},"version":"","description":"The progressViewStyle property allows you to customize the appearance of a progress view in your UI."},{"title":"refresable","content":"Marks a scrollable view as **refreshable**, enabling the user to pull down to trigger an asynchronous data reload.\n\n## Type\n\n```ts\nrefreshable?: () => Promise<void>\n```\n\n***\n\n## Overview\n\nUse the `refreshable` modifier on scrollable views—such as `<List>`—to implement pull-to-refresh functionality. When the user pulls down past the top of the view, the framework executes the asynchronous handler defined by `refreshable`.\n\nInside the handler, you can perform any asynchronous operations (e.g., fetching network data or updating local state), and once the operation completes, the refresh control will automatically dismiss.\n\nThis behavior closely mirrors SwiftUI’s [`refreshable`]() modifier.\n\n***\n\n## Usage Example\n\n```tsx\n<List\n  navigationTitle=\"Refreshable List\"\n  navigationBarTitleDisplayMode=\"inline\"\n  refreshable={refresh}\n/>\n```\n\n### Full Example\n\n```tsx\nfunction Example() {\n  const [data, setData] = useState(generateRandomList)\n\n  function generateRandomList() {\n    const data: number[] = []\n    const count = Math.ceil(Math.random() * 100 + 10)\n\n    for (let i = 0; i < count; i++) {\n      const num = Math.ceil(Math.random() * 1000)\n      data.push(num)\n    }\n\n    return data\n  }\n\n  async function refresh() {\n    return new Promise<void>(resolve => {\n      setTimeout(() => {\n        setData(generateRandomList())\n        resolve()\n      }, 2000)\n    })\n  }\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"Refreshable List\"\n      navigationBarTitleDisplayMode=\"inline\"\n      refreshable={refresh}\n    >\n      <Section header={\n        <Text textCase={null}>Pull down to refresh</Text>\n      }>\n        {data.map(item =>\n          <Text>Number: {item}</Text>\n        )}\n      </Section>\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## Behavior Notes\n\n- The `refreshable` function **must return a `Promise<void>`**. The refresh control remains visible until the promise resolves.\n- Use `await` inside the refresh function to perform async tasks:\n\n  ```ts\n  refreshable={async () => {\n    const result = await fetchData()\n    updateState(result)\n  }}\n  ```\n- This modifier is only effective on **scrollable containers**, such as `<List>`.\n- You should update the relevant state inside the handler to reflect new data.\n- Avoid long-running or blocking tasks without feedback; always resolve the promise in a timely manner to dismiss the refresh spinner.\n\n***\n\n## Best Practices\n\n- Keep refresh logic short and efficient.\n- Always **resolve** the promise to ensure the UI doesn’t hang.\n- If needed, use a short delay to simulate refresh animations during development:\n\n  ```ts\n  await new Promise(resolve => setTimeout(resolve, 1000))\n  ```\n","routePath":"/doc/View Modifiers/refresable/","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":116},{"id":"overview","text":"Overview","depth":2,"charIndex":175},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":702},{"id":"full-example","text":"Full Example","depth":3,"charIndex":843},{"id":"behavior-notes","text":"Behavior Notes","depth":2,"charIndex":1765},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":2390}],"frontmatter":{},"version":"","description":"Marks a scrollable view as refreshable, enabling the user to pull down to trigger an asynchronous data reload."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [data, setData] = useState(generateRandomList)\n\n  function generateRandomList() {\n    const data: number[] = []\n    const count = Math.ceil(Math.random() * 100 + 10)\n\n    for (let i = 0; i < count; i++) {\n      const num = Math.ceil(Math.random() * 1000)\n      data.push(num)\n    }\n\n    return data\n  }\n\n  async function refresh() {\n    return new Promise<void>(resolve => {\n      setTimeout(() => {\n        setData(generateRandomList())\n        resolve()\n      }, 1000 * 2)\n    })\n  }\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Refreshable List\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      refreshable={refresh}\n    >\n      <Section header={\n        <Text textCase={null}>Pull down to refresh</Text>\n      }>\n        {data.map(item =>\n          <Text>Number: {item}</Text>\n        )}\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/View Modifiers/refresable/refreshable_list","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"rotationEffect","content":"Rotates the view by a specified angle in degrees. You can optionally set the anchor point around which the rotation occurs.\n\n## Type\n\n```ts\nrotationEffect?: number | {\n  degrees: number\n  anchor: KeywordPoint | Point\n}\n```\n\n## Example\n\n```tsx\n<Text rotationEffect={45}>Rotated</Text>\n```\n\nWith anchor point:\n\n```tsx\n<Text\n  rotationEffect={{\n    degrees: 30,\n    anchor: \"bottomTrailing\"\n  }}\n>\n  Custom Anchor\n</Text>\n```\n","routePath":"/doc/View Modifiers/rotationEffect","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":125},{"id":"example","text":"Example","depth":2,"charIndex":224}],"frontmatter":{},"version":"","description":"Rotates the view by a specified angle in degrees. You can optionally set the anchor point around which the rotation occurs."},{"title":"scaleEffect","content":"Scales the view horizontally and vertically. You can specify a common value or separate values, and optionally provide an anchor point.\n\n## Type\n\n```ts\nscaleEffect?: number | {\n  x: number\n  y: number\n  anchor?: KeywordPoint | Point\n}\n```\n\n## Example\n\n```tsx\n<Text scaleEffect={1.5}>Scaled</Text>\n```\n\nCustom scale:\n\n```tsx\n<Text\n  scaleEffect={{\n    x: 1.2,\n    y: 0.8,\n    anchor: \"center\"\n  }}\n>\n  Non-uniform Scale\n</Text>\n```\n","routePath":"/doc/View Modifiers/scaleEffect","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":137},{"id":"example","text":"Example","depth":2,"charIndex":240}],"frontmatter":{},"version":"","description":"Scales the view horizontally and vertically. You can specify a common value or separate values, and optionally provide an anchor point."},{"title":"shadow","content":"Applies a shadow behind the view. You can control color, blur radius, and x/y offset.\n\n## Type\n\n```ts\nshadow?: {\n  color: Color\n  radius: number\n  x?: number\n  y?: number\n}\n```\n\n## Example\n\n```tsx\n<Text\n  shadow={{\n    color: \"black\",\n    radius: 5,\n    x: 2,\n    y: 4\n  }}\n>\n  Shadowed Text\n</Text>\n```\n","routePath":"/doc/View Modifiers/shadow","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":87},{"id":"example","text":"Example","depth":2,"charIndex":178}],"frontmatter":{},"version":"","description":"Applies a shadow behind the view. You can control color, blur radius, and x/y offset."},{"title":"textFieldStyle","content":"The `textFieldStyle` property determines the visual style of your text fields, influencing how their borders, backgrounds, and layout appear. Different styles can help your text fields blend seamlessly into various UI designs, or provide subtle cues about their functionality.\n\n## Overview\n\nA `TextField` provides a way for users to enter text. By selecting a `textFieldStyle`, you can define whether your text fields have a plain, borderless appearance, or a more pronounced, rounded border that sets them apart from surrounding elements.\n\n## Available Styles\n\n- **`automatic`**:\\\n  Allows the system to choose an appropriate style based on the platform and context. This is a convenient default if you don’t have a strong styling preference.\n\n- **`plain`**:\\\n  Displays the text field with minimal adornment. This style often looks like plain text, making it suitable for layouts where you want the field to appear unobtrusive.\n\n- **`roundedBorder`**:\\\n  Surrounds the text field with a rounded rectangle border. This helps make the input area stand out, making it more obvious to users that they can type into it. Ideal for forms or places where user input is a primary action.\n\n## Basic Usage\n\nBelow is an example showing how you might use a `TextField` with a specific style:\n\n```tsx\n<TextField\n  title=\"Username\"\n  value={username}\n  onChanged={newVal => setUsername(newVal)}\n  textFieldStyle=\"roundedBorder\"\n  prompt=\"Enter your username\"\n/>\n```\n\nIn this example, the `textFieldStyle=\"roundedBorder\"` will visually highlight the input field, giving users a clear indication that they can tap and start typing.\n\n## Other Useful Properties\n\n- **`value: string`**:\\\n  The current text content of the field. Update this when the user types to keep the displayed text in sync.\n\n- **`onChanged: (value: string) => void`**:\\\n  A callback invoked whenever the text in the field changes, allowing you to respond to user input.\n\n- **`prompt?: string`**:\\\n  A hint or placeholder text guiding the user about what to type.\n\n- **`axis?: Axis`**:\\\n  Determines how text can scroll if it doesn’t fit. This is useful if you expect long input that might exceed the available space.\n\n- **`autofocus?: boolean` (default: false)**:\\\n  If true, focuses the text field automatically when it appears, making it ready for immediate typing.\n\n- **`onFocus?: () => void` and `onBlur?: () => void`**:\\\n  Callbacks triggered when the text field gains or loses focus, respectively. This can help you provide visual feedback, run validation, or update other parts of your UI.\n\n## Example\n\n```tsx\n<TextField\n  label={<Text style={{fontWeight: 'bold'}}>Email:</Text>}\n  value={email}\n  onChanged={setEmail}\n  prompt=\"you@example.com\"\n  textFieldStyle=\"plain\"\n  autofocus={true}\n  onFocus={() => console.log('Focused')}\n  onBlur={() => console.log('Lost focus')}\n/>\n```\n\nIn this example, the text field is styled as `plain`, appearing more integrated into the surrounding content. The `autofocus` property ensures that the user can start typing immediately upon arrival at this view.\n\n## Summary\n\n`textFieldStyle` lets you adapt the appearance of your input fields to different contexts. Whether you opt for the subtlety of `plain` or the more structured look of `roundedBorder`, choosing the right style helps create a clear and intuitive user experience. If unsure, use `automatic` to let the system decide the most appropriate look.\n","routePath":"/doc/View Modifiers/textFieldStyle","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":278},{"id":"available-styles","text":"Available Styles","depth":2,"charIndex":541},{"id":"basic-usage","text":"Basic Usage","depth":2,"charIndex":1182},{"id":"other-useful-properties","text":"Other Useful Properties","depth":2,"charIndex":1618},{"id":"example","text":"Example","depth":2,"charIndex":2553},{"id":"summary","text":"Summary","depth":2,"charIndex":3058}],"frontmatter":{},"version":"","description":"The textFieldStyle property determines the visual style of your text fields, influencing how their borders, backgrounds, and layout appear. Different styles can help your text fields blend seamlessly into various UI designs, or provide subtle cues about their functionality."},{"title":"tint","content":"The `tint` property overrides the default accent color for a specific view using a given style. Unlike the global app accent color (which may be modified by user settings), `tint` is always respected and should be used to convey semantic meaning or visual emphasis at the component level.\n\n## Definition\n\n```ts\ntint?: ShapeStyle | DynamicShapeStyle\n```\n\n## Supported Values\n\n- **`ShapeStyle`**: A solid color, gradient, or material.\n- **`DynamicShapeStyle`**: A color or gradient that adapts to light/dark mode.\n\n## Common Use Cases\n\n- Apply a local accent color to controls like `Toggle`, `Slider`, `Button`, or `ProgressView`.\n- Visually differentiate elements in lists, forms, or modal components.\n- Ensure consistent behavior regardless of system or user theme overrides.\n\n## Example: Basic Tint\n\n```tsx\n<Toggle \n  tint=\"systemGreen\"\n  // ...\n/>\n```\n\n## Example: Gradient Tint\n\n```tsx\n<ProgressView\n  value={0.6}\n  tint={{\n    gradient: [\n      { color: \"red\", location: 0 },\n      { color: \"orange\", location: 1 }\n    ],\n    startPoint: { x: 0, y: 0 },\n    endPoint: { x: 1, y: 1 }\n  }}\n/>\n```\n\n## Example: Dynamic Tint\n\n```tsx\n<Slider\n  tint={{\n    light: \"blue\",\n    dark: \"purple\"\n  }}\n  // ...\n/>\n```\n","routePath":"/doc/View Modifiers/tint","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":290},{"id":"supported-values","text":"Supported Values","depth":2,"charIndex":354},{"id":"common-use-cases","text":"Common Use Cases","depth":2,"charIndex":513},{"id":"example-basic-tint","text":"Example: Basic Tint","depth":2,"charIndex":777},{"id":"example-gradient-tint","text":"Example: Gradient Tint","depth":2,"charIndex":855},{"id":"example-dynamic-tint","text":"Example: Dynamic Tint","depth":2,"charIndex":1100}],"frontmatter":{},"version":"","description":"The tint property overrides the default accent color for a specific view using a given style. Unlike the global app accent color (which may be modified by user settings), tint is always respected and should be used to convey semantic meaning or visual emphasis at the component level."},{"title":"toggleStyle","content":"The `toggleStyle` property defines how a `Toggle` (commonly known as a switch or checkbox) visually appears and behaves. By selecting a style, you can influence the toggle’s look—whether it looks like a traditional switch, a button-like state indicator, or let the system decide what’s best.\n\n## Overview\n\nA `Toggle` is used to represent a boolean on/off state. It might appear as a switch, a tappable button, or use the platform’s default look based on context. The `toggleStyle` property allows you to specify which appearance to use, ensuring your UI remains consistent with your app’s overall design language.\n\n## Available Styles\n\n- **`automatic`**:\\\n  Lets the system select the most appropriate style based on the platform and context. If you’re unsure which style to choose, `automatic` is a good default.\n\n- **`switch`**:\\\n  Renders the toggle as a classic switch, similar to what you’d see in iOS Settings. The switch slides between off and on states, providing a familiar interaction for most users.\n\n- **`button`**:\\\n  Presents the toggle as a button-like element. Instead of sliding, tapping toggles it on or off. This can fit well into UI layouts where toggles should feel more like selectable options rather than switches.\n\n## Example Usage\n\n### Switch Style\n\n```tsx\n<Toggle\n  title=\"Enable Notifications\"\n  value={notificationsEnabled}\n  onChanged={(newVal) => setNotificationsEnabled(newVal)}\n  toggleStyle=\"switch\"\n/>\n```\n\nHere, the toggle is displayed as a switch. When the user taps it, the knob slides, turning the option on or off.\n\n### Button Style\n\n```tsx\n<Toggle\n  title=\"Dark Mode\"\n  value={darkMode}\n  onChanged={(newVal) => setDarkMode(newVal)}\n  toggleStyle=\"button\"\n/>\n```\n\nIn this scenario, the toggle looks like a button that changes state when tapped. It may be useful in contexts where a more pronounced, clickable style feels appropriate.\n\n### Automatic Style\n\n```tsx\n<Toggle\n  title=\"Use Cellular Data\"\n  value={useCellular}\n  onChanged={(newVal) => setUseCellular(newVal)}\n  toggleStyle=\"automatic\"\n/>\n```\n\nWith `automatic`, the system chooses the style. This is a good choice if you trust the system’s default styling to match the platform’s conventions, or if you’re aiming for maximum consistency without manually specifying a style.\n\n## Other Toggle Properties\n\n- **`value: boolean`**:\\\n  Indicates the current state of the toggle (on or off).\n\n- **`onChanged(value: boolean): void`**:\\\n  A callback that fires when the toggle changes state. Use this to update your app’s data model accordingly.\n\n- **`intent: AppIntent<any>` (optional)**:\\\n  Instead of handling state changes locally, you can associate a toggle with an `AppIntent` for certain widget or Live Activity scenarios. This lets you trigger predefined app actions directly from the toggle’s state changes.\n\n- **`title` and `systemImage`**:\\\n  Provide a descriptive text label and optionally an image to convey the toggle’s purpose clearly.\n\n- **`children`**:\\\n  Instead of a title or image, you can provide custom content (e.g., a text node, an icon, or a combination) as the label for the toggle.\n\n## Summary\n\nBy adjusting the `toggleStyle`, you control how your toggle looks and feels. Whether you choose a familiar switch, a button-like toggle, or leave it to `automatic`, this property ensures that the toggle fits cohesively into your script's design and provides a clear and intuitive way for users to change a Boolean setting.\n","routePath":"/doc/View Modifiers/toggleStyle","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":293},{"id":"available-styles","text":"Available Styles","depth":2,"charIndex":615},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":1239},{"id":"switch-style","text":"Switch Style","depth":3,"charIndex":1257},{"id":"button-style","text":"Button Style","depth":3,"charIndex":1555},{"id":"automatic-style","text":"Automatic Style","depth":3,"charIndex":1875},{"id":"other-toggle-properties","text":"Other Toggle Properties","depth":2,"charIndex":2275},{"id":"summary","text":"Summary","depth":2,"charIndex":3101}],"frontmatter":{},"version":"","description":"The toggleStyle property defines how a Toggle (commonly known as a switch or checkbox) visually appears and behaves. By selecting a style, you can influence the toggle’s look—whether it looks like a traditional switch, a button-like state indicator, or let the system decide what’s best."},{"title":"Use with Toolbar Component","content":"In Scripting, views can populate their navigation bar or toolbar area using either the original `ToolBarProps` object or the declarative component-based API that mirrors SwiftUI’s toolbar system. This document explains in detail how to use the `Toolbar`, `ToolbarItem`, `ToolbarItemGroup`, `ToolbarSpacer`, and `DefaultToolbarItem` components, including parameters, types, and usage patterns.\n\n***\n\n# Overview\n\nThe `toolbar` property can be used in two ways:\n\n- By passing a `ToolBarProps` object\n- By passing a **VirtualNode**, which **must be a `<Toolbar>` component**\n\nWhen using the component-based API, all toolbar content is declared inside a `<Toolbar>` container, and each item defines its placement explicitly. This provides clearer structure and more precise layout control, similar to SwiftUI.\n\n```tsx\n<List\n  toolbar={\n    <Toolbar>\n      {/* toolbar items here */}\n    </Toolbar>\n  }\n>\n  {/* main content */}\n</List>\n```\n\n***\n\n# Toolbar\n\nThe `<Toolbar>` component serves as a container for toolbar content. It does not define placement itself; instead, `ToolbarItem` and `ToolbarItemGroup` determine where items go.\n\n## Example\n\n```tsx\n<List\n  toolbar={\n    <Toolbar>\n      <ToolbarItem placement=\"topBarLeading\">\n        <Button title=\"Close\" action={dismiss} />\n      </ToolbarItem>\n      <ToolbarItem placement=\"topBarTrailing\">\n        <Button title=\"Done\" action={handleDone} />\n      </ToolbarItem>\n    </Toolbar>\n  }\n>\n  {/* content */}\n</List>\n```\n\n***\n\n# ToolbarItem\n\n`ToolbarItem` represents a single toolbar element placed at a specific position.\n\n## Parameters\n\n| Parameter   | Type                   | Default     | Description                                                                  |\n| ----------- | ---------------------- | ----------- | ---------------------------------------------------------------------------- |\n| `placement` | `ToolbarItemPlacement` | `automatic` | Position of the item, such as `topBarLeading`, `navigation`, `primaryAction` |\n| `children`  | `VirtualNode`          | required    | The item’s content, usually a button or text                                 |\n\n## Example\n\n```tsx\n<Toolbar>\n  <ToolbarItem placement=\"navigation\">\n    <Button title=\"Back\" action={Navigation.useDismiss()} />\n  </ToolbarItem>\n</Toolbar>\n```\n\n***\n\n# ToolbarItemGroup\n\n`ToolbarItemGroup` allows multiple toolbar items to be grouped together in a single placement.\n\n## Parameters\n\n| Parameter   | Type                    | Default     | Description                    |\n| ----------- | ----------------------- | ----------- | ------------------------------ |\n| `placement` | `ToolbarItemPlacement`  | `automatic` | Placement for the entire group |\n| `children`  | multiple `VirtualNode`s | required    | The grouped toolbar items      |\n\n## Example\n\n```tsx\n<Toolbar>\n  <ToolbarItemGroup placement=\"topBarTrailing\">\n    <Button title=\"Refresh\" action={reload} />\n    <Button title=\"More\" action={openMenu} />\n  </ToolbarItemGroup>\n</Toolbar>\n```\n\n***\n\n# ToolbarSpacer\n\n`ToolbarSpacer` inserts empty space in a toolbar. It can be used to fine-tune layout between items.\n\n## Parameters\n\n| Parameter   | Type                    | Default     | Description                                          |\n| ----------- | ----------------------- | ----------- | ---------------------------------------------------- |\n| `sizing`    | `'fixed' \\| 'flexible'` | `flexible`  | Determines whether the spacer expands or stays fixed |\n| `placement` | `ToolbarItemPlacement`  | `automatic` | Placement for the  spacer                            |\n\n### Behavior\n\n- `flexible`: Expands to fill available space.\n- `fixed`: Adds a fixed separation between items.\n\n## Example\n\n```tsx\n<Toolbar>\n  <ToolbarItem placement=\"topBarTrailing\">\n    <Button title=\"Edit\" action={edit} />\n  </ToolbarItem>\n\n  <ToolbarSpacer sizing=\"fixed\" />\n\n  <ToolbarItem placement=\"topBarTrailing\">\n    <Button title=\"Save\" action={save} />\n  </ToolbarItem>\n</Toolbar>\n```\n\n***\n\n# DefaultToolbarItem\n\n`DefaultToolbarItem` inserts system-provided toolbar items, such as the sidebar toggle button or search button.\n\n## Parameters\n\n| Parameter   | Type                                     | Default     | Description                           |\n| ----------- | ---------------------------------------- | ----------- | ------------------------------------- |\n| `kind`      | `\"sidebarToggle\" \\| \"search\" \\| \"title\"` | required    | Specifies which system item to insert |\n| `placement` | `ToolbarItemPlacement`                   | `automatic` | Toolbar placement                     |\n\n## Example\n\n```tsx\n<Toolbar>\n  <DefaultToolbarItem kind=\"search\" placement=\"topBarTrailing\" />\n</Toolbar>\n```\n\n***\n\n# Complete Example\n\n```tsx\n<NavigationStack>\n  <List\n    toolbar={\n      <Toolbar>\n\n        {/* Navigation button */}\n        <ToolbarItem placement=\"navigation\">\n          <Button title=\"Back\" action={Navigation.useDismiss()} />\n        </ToolbarItem>\n\n        {/* Title */}\n        <DefaultToolbarItem kind=\"title\" />\n\n        {/* Trailing group */}\n        <ToolbarItem placement=\"topBarTrailing\">\n          <Button title=\"Edit\" action={edit} />\n        </ToolbarItem>\n        <ToolbarSpacer sizing=\"fixed\" />\n        <ToolbarItem placement=\"topBarTrailing\">\n          <Button title=\"Done\" action={finish} />\n        </ToolbarItem>\n\n        {/* Bottom bar item */}\n        <ToolbarItem placement=\"bottomBar\">\n          <Button title=\"Help\" action={showHelp} />\n        </ToolbarItem>\n\n      </Toolbar>\n    }\n  >\n    {/* content */}\n  </List>\n</NavigationStack>\n```\n\n***\n\n# Relationship with ToolBarProps\n\n| Method                                    | Description                                              |\n| ----------------------------------------- | -------------------------------------------------------- |\n| `toolbar={{ topBarTrailing: <Button/> }}` | Simple and declarative for straightforward scenarios     |\n| `toolbar={<Toolbar>...</Toolbar>}`        | More explicit, structured, and ideal for complex layouts |\n\nBoth approaches remain fully supported. When a `VirtualNode` is passed, it **must be a `<Toolbar>` component** to ensure proper layout interpretation.\n","routePath":"/doc/View Modifiers/toolbar/Use with Toolbar Component","lang":"en","toc":[{"id":"example","text":"Example","depth":2,"charIndex":1130},{"id":"parameters","text":"Parameters","depth":2,"charIndex":1572},{"id":"example-1","text":"Example","depth":2,"charIndex":2124},{"id":"parameters-1","text":"Parameters","depth":2,"charIndex":2407},{"id":"example-2","text":"Example","depth":2,"charIndex":2779},{"id":"parameters-2","text":"Parameters","depth":2,"charIndex":3110},{"id":"behavior","text":"Behavior","depth":3,"charIndex":3570},{"id":"example-3","text":"Example","depth":2,"charIndex":3682},{"id":"parameters-3","text":"Parameters","depth":2,"charIndex":4108},{"id":"example-4","text":"Example","depth":2,"charIndex":4576}],"frontmatter":{},"version":"","description":"In Scripting, views can populate their navigation bar or toolbar area using either the original ToolBarProps object or the declarative component-based API that mirrors SwiftUI’s toolbar system. This document explains in detail how to use the Toolbar, ToolbarItem, ToolbarItemGroup, ToolbarSpacer, and DefaultToolbarItem components, including parameters, types, and usage patterns. The toolbar property can be used in two ways: By passing a ToolBarProps objectBy passing a VirtualNode, which must be a <Toolbar> component When using the component-based API, all toolbar content is declared inside a <Toolbar> container, and each item defines its placement explicitly. This provides clearer structure and more precise layout control, similar to SwiftUI. The <Toolbar> component serves as a container for toolbar content. It does not define placement itself; instead, ToolbarItem and ToolbarItemGroup determine where items go."},{"title":"Use with ToolbarProps","content":"The `toolbar` property allows you to populate a view’s navigation or toolbar area with various items, mirroring the functionality of SwiftUI's `toolbar` view modifier. By setting `toolbar` on a component, you can place items in the navigation bar or bottom toolbar, and specify their semantic roles.\n\n## Overview\n\nThe `toolbar` property accepts a `ToolBarProps` object. Each key within `ToolBarProps` corresponds to a specific toolbar placement or action type. The values you provide should be either a single `VirtualNode` or an array of `VirtualNode` elements, which represent your custom UI items.\n\n**In SwiftUI (for reference):**\n\n```swift\n// SwiftUI code example\nYourView()\n    .toolbar {\n        ToolbarItem(placement: .confirmationAction) {\n            Button(\"Save\") {\n                // Handle save\n            }\n        }\n    }\n```\n\n**In Scripting (TypeScript/TSX):**\n\n```tsx\n<NavigationStack>\n  <List\n    toolbar={{\n      confirmationAction: <Button title=\"Save\" action={() => handleSave()} />,\n      cancellationAction: <Button title=\"Cancel\" action={() => handleCancel()} />,\n      topBarLeading: [\n        <Button title=\"Edit\" action={() => handleEdit()} />,\n        <Button title=\"Refresh\" action={() => handleRefresh()} />\n      ]\n    }}\n  >\n    {/* Your main content here */}\n  </List>\n</NavigationStack>\n```\n\n## Toolbar Placements\n\nThe following keys can be used within `ToolBarProps` to specify where and how an item is placed:\n\n- **automatic**: Automatically determines placement based on context and platform.\n- **bottomBar**: Places the item in a bottom toolbar.\n- **cancellationAction**: Represents a cancellation action in a modal interface.\n- **confirmationAction**: Represents a confirmation action in a modal interface (e.g., \"Save\").\n- **destructiveAction**: Represents an action that performs a destructive task (e.g., \"Delete\").\n- **keyboard**: Places the item in a toolbar associated with the keyboard.\n- **navigation**: Represents a navigation-related action (e.g., \"Back\", \"Close\").\n- **primaryAction**: Represents the primary action of the interface.\n- **principal**: Places the item in the principal item section of the toolbar (often centered in the navigation bar).\n- **topBarLeading**: Places the item on the leading edge (e.g., left side) of the top bar.\n- **topBarTrailing**: Places the item on the trailing edge (e.g., right side) of the top bar.\n\n## Example Usage\n\n### Single Item\n\nIf you want to add a single `confirmationAction` button to the toolbar:\n\n```tsx\n<NavigationStack>\n  <VStack\n    toolbar={{\n      confirmationAction: <Button\n        title=\"Save\"\n        action={() => console.log('Saving...')}\n      />\n    }}\n  >\n    {/* Main content */}\n  </Vstack>\n</NavigationStack>\n```\n\n### Multiple Items\n\nYou can also pass an array of nodes to a single placement, allowing multiple items in the same area:\n\n```tsx\n<NavigationStack>\n  <VStack\n    toolbar={{\n      topBarLeading: [\n        <Button title=\"Edit\" action={() => console.log('Edit pressed')} />,\n        <Button title=\"Settings\" action={() => console.log('Settings pressed')} />\n      ],\n      topBarTrailing: <Button title=\"Done\" action={() => console.log('Done pressed')} />\n    }}\n  >\n    {/* Main content */}\n  </Vstack>\n</NavigationStack>\n```\n\n### Combining Multiple Toolbar Placements\n\nYou can mix and match different toolbar placements as needed:\n\n```tsx\n<NavigationStack>\n  <List\n    toolbar={{\n      navigation: <Button title=\"Back\" action={() => console.log('Back pressed')} />,\n      principal: <Text fontWeight={\"bold\"}>Title</Text>,\n      primaryAction: <Button title=\"Share\" action={() => console.log('Share pressed')} />,\n      bottomBar: <Button title=\"Help\" action={() => console.log('Help pressed')} />\n    }}\n  >\n    {/* Main content */}\n  </List>\n</NavigationStack>\n```\n\n## Summary\n\nBy using the `toolbar` property, you can easily replicate the behavior of SwiftUI’s `toolbar` modifier in your Scripting app. Assigning `VirtualNode` elements to the appropriate keys in `ToolBarProps` allows you to build rich, contextual toolbars and navigation bars for your pages.\n","routePath":"/doc/View Modifiers/toolbar/Use with ToolbarProps","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":301},{"id":"toolbar-placements","text":"Toolbar Placements","depth":2,"charIndex":1327},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2389},{"id":"single-item","text":"Single Item","depth":3,"charIndex":2407},{"id":"multiple-items","text":"Multiple Items","depth":3,"charIndex":2731},{"id":"combining-multiple-toolbar-placements","text":"Combining Multiple Toolbar Placements","depth":3,"charIndex":3255},{"id":"summary","text":"Summary","depth":2,"charIndex":3797}],"frontmatter":{},"version":"","description":"The toolbar property allows you to populate a view’s navigation or toolbar area with various items, mirroring the functionality of SwiftUI's toolbar view modifier. By setting toolbar on a component, you can place items in the navigation bar or bottom toolbar, and specify their semantic roles."},{"title":"translationHost","content":"The `translationHost` view modifier is used to provide a translation service context to your UI. This modifier enables user interaction with system-level translation dialogs, such as downloading required languages or selecting ambiguous source languages.\n\n***\n\n## Purpose\n\nApply the `translationHost` modifier to the **root view** of your page when using the `Translation` class for localized translations. It ensures that:\n\n- If the **source or target language** is not currently available on the device, the system will **prompt the user to download** the necessary language resources.\n- If the **source language is not specified** and cannot be inferred from the text content, the system will **prompt the user to select a source language**.\n\nWithout applying this modifier, such user prompts may not function correctly, and your translation session may fail silently or throw an error.\n\n***\n\n## Type\n\n```ts\ntranslationHost?: Translation\n```\n\nThe value of this modifier must be an instance of the `Translation` class.\n\n***\n\n## Usage Example\n\n```tsx\nfunction View() {\n  const translation = useMemo(() => new Translation(), [])\n  const [translated, setTranslated] = useState<Record<string, string>>({})\n  const texts = [\"Hello\", \"Goodbye\"]\n  \n  useEffect(() => {\n    translation.translateBatch({\n      texts,\n      source: \"en\",\n      target: \"fr\"\n    }).then(result => {\n      const map: Record<string, string> = {}\n      result.forEach((item, index) => {\n        map[texts[index]] = item\n      })\n      setTranslated(map)\n    })\n  }, [])\n\n  return <VStack translationHost={translation}>\n    {texts.map(text => (\n      <Text key={text}>\n        {translated[text] || text}\n      </Text>\n    ))}\n  </VStack>\n}\n```\n\nIn this example:\n\n- A `Translation` instance is created using `useMemo`.\n- A batch of English texts is translated to French.\n- The `VStack` view is wrapped with the `translationHost` modifier so the system can show download or language selection prompts if necessary.\n\n***\n\n## Best Practices\n\n- Always apply `translationHost` to the **top-level container view** when performing translation-related operations.\n- Use a **consistent `Translation` instance** that matches the one used for calling `.translate()` or `.translateBatch()`.\n- Avoid creating multiple `Translation` instances for the same session if possible.\n","routePath":"/doc/View Modifiers/translationHost","lang":"en","toc":[{"id":"purpose","text":"Purpose","depth":2,"charIndex":261},{"id":"type","text":"Type","depth":2,"charIndex":896},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":1027},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":1989}],"frontmatter":{},"version":"","description":"The translationHost view modifier is used to provide a translation service context to your UI. This modifier enables user interaction with system-level translation dialogs, such as downloading required languages or selecting ambiguous source languages."},{"title":"widgetBackground","content":"The `widgetBackground` modifier is used to define background styles specifically for **widgets**, with behavior optimized for **iOS 18’s accented (tinted)** rendering mode.\n\n## Purpose\n\nIn **accented mode**, iOS displays nearly all view colors—including backgrounds—as white, unless the view is explicitly marked with `widgetAccentable`. This can cause unintended visual issues in widgets.\n\nThe `widgetBackground` modifier addresses this by:\n\n- **Automatically hiding the background** when the widget is displayed in accented mode.\n- **Rendering the background normally** in all other display modes (default or full-color).\n\nThis ensures your widget layout remains visually consistent and unaffected by system-imposed tinting rules.\n\n***\n\n## Supported Background Variants\n\nThe `widgetBackground` modifier accepts several input formats:\n\n### 1. **Solid Color (ShapeStyle)**\n\nApply a simple color to the background.\n\n```tsx\n<Text widgetBackground=\"systemBlue\">\n  Hello\n</Text>\n```\n\n***\n\n### 2. **Dynamic Color (DynamicShapeStyle)**\n\nApply different styles for light and dark modes.\n\n```tsx\n<Text\n  widgetBackground={{\n    light: \"white\",\n    dark: \"black\"\n  }}\n>\n  Mode-aware Background\n</Text>\n```\n\n***\n\n### 3. **Shape with Fill Style**\n\nUse a **shape** along with a **fill style**. This form provides structured and stylized backgrounds.\n\n```tsx\n<Text\n  widgetBackground={{\n    style: \"systemGray6\",\n    shape: {\n      type: \"rect\",\n      cornerRadius: 12,\n      style: \"continuous\"\n    }\n  }}\n>\n  Rounded Background\n</Text>\n```\n\nYou may use any supported built-in or custom shape types, such as:\n\n- `'rect'`, `'circle'`, `'capsule'`, `'ellipse'`, `'buttonBorder'`, `'containerRelative'`\n- Custom rounded rectangles with `cornerRadius`, `cornerSize`, or `cornerRadii`\n\n***\n\n## Behavior in Accented Mode\n\n- **In accented (tinted) mode**: The background is **automatically hidden** to prevent it from rendering as solid white.\n- **In default and full-color modes**: The background displays as defined.\n\nThis conditional behavior ensures better design control and visual integrity across widget contexts.\n\n***\n\n## Best Practices\n\n- Use `widgetBackground` only in **widget-specific views**.\n- Do not use it for essential visual meaning, since the background may be hidden in accented mode.\n- Combine it with `widgetAccentable` to precisely control which parts of the widget are subject to system tinting.\n","routePath":"/doc/View Modifiers/widgetBackground","lang":"en","toc":[{"id":"purpose","text":"Purpose","depth":2,"charIndex":174},{"id":"supported-background-variants","text":"Supported Background Variants","depth":2,"charIndex":739},{"id":"1-solid-color-shapestyle","text":"1. **Solid Color (ShapeStyle)**","depth":3,"charIndex":837},{"id":"2-dynamic-color-dynamicshapestyle","text":"2. **Dynamic Color (DynamicShapeStyle)**","depth":3,"charIndex":985},{"id":"3-shape-with-fill-style","text":"3. **Shape with Fill Style**","depth":3,"charIndex":1203},{"id":"behavior-in-accented-mode","text":"Behavior in Accented Mode","depth":2,"charIndex":1774},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":2108}],"frontmatter":{},"version":"","description":"The widgetBackground modifier is used to define background styles specifically for widgets, with behavior optimized for iOS 18’s accented (tinted) rendering mode."},{"title":"AVPlayerView","content":"`AVPlayerView` is a video playback component introduced in Scripting that wraps the system-native `AVPlayerViewController`.\nUnlike `VideoPlayer`, `AVPlayerView` **fully supports system Picture in Picture (PiP)** and exposes PiP lifecycle state to scripts.\n\nThis component is intended for **media-centric scenarios** where native playback behavior, PiP, Now Playing integration, and background playback are required.\n\n***\n\n## 1. When to Use AVPlayerView\n\nUse `AVPlayerView` when you need:\n\n- System Picture in Picture (PiP) for video\n- Native playback controls\n- Integration with Now Playing / Control Center / Lock Screen\n- Automatic PiP when entering background\n- Fine-grained observation of PiP lifecycle\n\nIf you do **not** need PiP, `VideoPlayer` remains a lighter alternative.\n\n***\n\n## 2. Core Properties Explained\n\n### 2.1 `player`\n\n```ts\nplayer: AVPlayer\n```\n\n- The underlying media player\n- Fully managed by the developer\n- Supports local files, remote URLs, HLS streams, etc.\n\n`AVPlayerView` **does not own the player lifecycle**.\nThe player must remain alive while PiP is active.\n\n***\n\n### 2.2 `pipStatus`\n\n```ts\npipStatus: Observable<PIPStatus>\n```\n\nProvides real-time updates for the PiP lifecycle.\n\nPossible values:\n\n| Value              | Meaning               |\n| ------------------ | --------------------- |\n| `willStart`        | PiP is about to start |\n| `didStart`         | PiP has started       |\n| `willStop`         | PiP is about to stop  |\n| `didStop`          | PiP has stopped       |\n| `undefined / null` | No PiP activity yet   |\n\nThis value is **system-controlled**.\nYou should **observe it only**, never assign values manually.\n\n***\n\n## 3. Picture in Picture Configuration\n\n### 3.1 `allowsPictureInPicturePlayback`\n\n- Enables or disables PiP entirely\n- Default: `true`\n\nWhen set to `false`:\n\n- PiP controls are hidden\n- PiP cannot be activated\n\n***\n\n### 3.2 `canStartPictureInPictureAutomaticallyFromInline`\n\n- If enabled, PiP starts automatically when:\n\n  - The app moves to background\n  - Video is playing inline\n- Default: `false`\n\nRecommended for:\n\n- Media apps\n- Continuous playback experiences\n\n***\n\n### 3.3 `updatesNowPlayingInfoCenter`\n\n- Controls automatic updates to:\n\n  - Lock screen\n  - Control Center\n  - External playback controls\n- Default: `true`\n\nShould generally remain enabled for video playback apps.\n\n***\n\n## 4. Full-Screen Playback Behavior\n\n### 4.1 `entersFullScreenWhenPlaybackBegins`\n\n- Automatically enters full screen on play\n- Default: `false`\n\n***\n\n### 4.2 `exitsFullScreenWhenPlaybackEnds`\n\n- Automatically exits full screen on completion\n- Default: `false`\n\n***\n\n## 5. Video Scaling (`videoGravity`)\n\n```ts\nvideoGravity?: AVLayerVideoGravity\n```\n\n| Value              | Behavior                                    |\n| ------------------ | ------------------------------------------- |\n| `resize`           | Stretch to fill (no aspect ratio)           |\n| `resizeAspect`     | Preserve aspect ratio, fit inside (default) |\n| `resizeAspectFill` | Preserve aspect ratio, fill and crop        |\n\n***\n\n## 6. Complete Demo Example\n\nThe following example demonstrates:\n\n- Creating and configuring `AVPlayer`\n- Activating audio playback session\n- Observing PiP lifecycle\n- Controlling playback state\n- Proper cleanup\n\n```tsx\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [status, setStatus] = useState<TimeControlStatus>(\n    TimeControlStatus.paused\n  )\n  const pipstatus = useObservable<PIPStatus>()\n\n  console.log(pipstatus.value)\n\n  const player = useMemo(() => {\n    const player = new AVPlayer()\n\n    player.setSource(\n      \"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4\"\n    )\n\n    player.onTimeControlStatusChanged = status => {\n      setStatus(status)\n    }\n\n    SharedAudioSession.setActive(true)\n    SharedAudioSession.setCategory(\n      \"playback\",\n      [\"defaultToSpeaker\"]\n    )\n\n    return player\n  }, [])\n\n  useEffect(() => {\n    return () => {\n      player.dispose()\n    }\n  }, [])\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle=\"VideoPlayer\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        cancellationAction: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <AVPlayerView\n        player={player}\n        pipStatus={pipstatus}\n        canStartPictureInPictureAutomaticallyFromInline\n        updatesNowPlayingInfoCenter\n        entersFullScreenWhenPlaybackBegins\n      />\n\n      <Button\n        title={\n          status === TimeControlStatus.paused\n            ? \"Play\"\n            : \"Pause\"\n        }\n        action={() => {\n          if (status === TimeControlStatus.paused) {\n            player.play()\n          } else {\n            player.pause()\n          }\n        }}\n      />\n    </VStack>\n  </NavigationStack>\n}\n```\n\n***\n\n## 7. PiP Lifecycle Notes\n\nTypical PiP state progression:\n\n1. `willStart`\n2. `didStart`\n3. PiP running\n4. `willStop`\n5. `didStop`\n\nThe system may skip stages in error or interruption scenarios.\nAlways treat `didStart` and `didStop` as authoritative.\n\n***\n\n## 8. Important Notes and Constraints\n\n### 8.1 AVPlayerView PiP is System-Level PiP\n\n- Uses native video PiP\n- Completely separate from Scripting’s custom PiP View Modifiers\n- These two mechanisms must not be mixed\n\n***\n\n### 8.2 Audio Session Is Required\n\nFor PiP to work reliably:\n\n- An active audio session is required\n- Category should be `playback`\n- Background audio capability must be enabled\n\nFailing to configure the audio session may cause PiP to fail silently.\n\n***\n\n### 8.3 Do Not Dispose AVPlayer While PiP Is Active\n\n- Disposing or replacing `AVPlayer` during PiP\n- Will force PiP to stop unexpectedly\n- May result in system errors\n\nAlways wait until `pipStatus` reaches `didStop` before releasing the player.\n\n***\n\n## 9. Recommended Best Practices\n\n- Use `AVPlayerView` exclusively for video PiP\n- Treat `pipStatus` as read-only state\n- Keep `AVPlayer` lifecycle stable during PiP\n- Configure audio session explicitly\n- Avoid frequent player replacement\n- Clean up resources only after PiP has fully stopped\n","routePath":"/doc/Views/AVPlayerView","lang":"en","toc":[{"id":"1-when-to-use-avplayerview","text":"1. When to Use AVPlayerView","depth":2,"charIndex":422},{"id":"2-core-properties-explained","text":"2. Core Properties Explained","depth":2,"charIndex":787},{"id":"21-player","text":"2.1 `player`","depth":3,"charIndex":820},{"id":"22-pipstatus","text":"2.2 `pipStatus`","depth":3,"charIndex":1095},{"id":"3-picture-in-picture-configuration","text":"3. Picture in Picture Configuration","depth":2,"charIndex":1664},{"id":"31-allowspictureinpictureplayback","text":"3.1 `allowsPictureInPicturePlayback`","depth":3,"charIndex":1704},{"id":"32-canstartpictureinpictureautomaticallyfrominline","text":"3.2 `canStartPictureInPictureAutomaticallyFromInline`","depth":3,"charIndex":1880},{"id":"33-updatesnowplayinginfocenter","text":"3.3 `updatesNowPlayingInfoCenter`","depth":3,"charIndex":2136},{"id":"4-full-screen-playback-behavior","text":"4. Full-Screen Playback Behavior","depth":2,"charIndex":2357},{"id":"41-entersfullscreenwhenplaybackbegins","text":"4.1 `entersFullScreenWhenPlaybackBegins`","depth":3,"charIndex":2394},{"id":"42-exitsfullscreenwhenplaybackends","text":"4.2 `exitsFullScreenWhenPlaybackEnds`","depth":3,"charIndex":2508},{"id":"5-video-scaling-videogravity","text":"5. Video Scaling (`videoGravity`)","depth":2,"charIndex":2624},{"id":"6-complete-demo-example","text":"6. Complete Demo Example","depth":2,"charIndex":3059},{"id":"7-pip-lifecycle-notes","text":"7. PiP Lifecycle Notes","depth":2,"charIndex":4843},{"id":"8-important-notes-and-constraints","text":"8. Important Notes and Constraints","depth":2,"charIndex":5099},{"id":"81-avplayerview-pip-is-system-level-pip","text":"8.1 AVPlayerView PiP is System-Level PiP","depth":3,"charIndex":5138},{"id":"82-audio-session-is-required","text":"8.2 Audio Session Is Required","depth":3,"charIndex":5320},{"id":"83-do-not-dispose-avplayer-while-pip-is-active","text":"8.3 Do Not Dispose AVPlayer While PiP Is Active","depth":3,"charIndex":5576},{"id":"9-recommended-best-practices","text":"9. Recommended Best Practices","depth":2,"charIndex":5828}],"frontmatter":{},"version":"","description":"AVPlayerView is a video playback component introduced in Scripting that wraps the system-native AVPlayerViewController.\nUnlike VideoPlayer, AVPlayerView fully supports system Picture in Picture (PiP) and exposes PiP lifecycle state to scripts. This component is intended for media-centric scenarios where native playback behavior, PiP, Now Playing integration, and background playback are required."},{"title":"AccessoryWidgetBackground","content":"An adaptive background view that provides a standard appearance based on the widget’s environment.\n\n## Overview\n\nThe `AccessoryWidgetBackground` component is designed to be used inside accessory widgets—such as Lock Screen widgets or StandBy widgets—where it applies a system-defined background appropriate for the widget's context.\n\nUsing this view ensures that your widget maintains visual consistency with the surrounding system UI, adapting automatically to light and dark modes, transparency effects, and other environmental styling set by the system.\n\nYou typically use `AccessoryWidgetBackground` as a background layer in combination with other views, such as `ZStack`, to provide system-adaptive styling while layering custom content above it.\n\n## Example\n\n```tsx\n\n\nfunction AccessoryView() {\n  return (\n    <ZStack>\n      <AccessoryWidgetBackground />\n      <Text font=\"caption\">Weather</Text>\n    </ZStack>\n  )\n}\n```\n\nIn this example, `AccessoryWidgetBackground` provides the adaptive system background, and the `Text` element is rendered on top of it. This layout is useful for Lock Screen widgets where consistent and legible appearance is important.\n\n## Best Practices\n\n- Always place `AccessoryWidgetBackground` beneath your content using a stacking layout like `ZStack`.\n- Do not apply custom colors or effects directly to `AccessoryWidgetBackground`; it automatically adapts to system appearance.\n- Combine it with other SwiftUI-inspired components to maintain a consistent style with iOS system widgets.\n\n## Compatibility\n\nThis component is intended for use in accessory widgets and may not have any visual effect outside that context. Use it to ensure your widget blends seamlessly with the native iOS design system.\n","routePath":"/doc/Views/AccessoryWidgetBackground","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":100},{"id":"example","text":"Example","depth":2,"charIndex":753},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":1164},{"id":"compatibility","text":"Compatibility","depth":2,"charIndex":1522}],"frontmatter":{},"version":"","description":"An adaptive background view that provides a standard appearance based on the widget’s environment."},{"title":"Button","content":"The `Button` component in the **Scripting** app allows you to create interactive elements with customizable actions, labels, styles, and roles. Buttons can trigger actions, execute intents, and display various visual styles based on the configuration. This documentation provides a detailed guide on how to use the `Button` API, including its properties, roles, styles, and examples.\n\n***\n\n## `Button`\n\n### Description\n\nYou create a button by providing an **action** or an **intent** and a **label**. The label can be a simple text, an icon, or a complex view. Buttons are essential for creating interactive interfaces, such as submitting forms or navigating between pages.\n\n### Properties\n\n| **Property**  | **Type**                                                         | **Description**                                                                                                                                          |\n| ------------- | ---------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `title`       | `string`                                                         | The text label displayed on the button.                                                                                                                  |\n| `systemImage` | `string` *(optional)*                                            | The name of a system icon to display alongside the button's title.                                                                                       |\n| `children`    | `VirtualNode` or `VirtualNode[]`                                 | Custom view(s) to be used as the button label instead of `title`.                                                                                        |\n| `role`        | `'destructive' \\| 'cancel' \\| 'close' \\| 'confirm'` *(optional)* | Describes the purpose of the button. `destructive` highlights the button as performing a potentially dangerous action, while `cancel` implies dismissal. |\n| `intent`      | `AppIntent<any>`                                                 | An intent to execute when the button is triggered. Available for `Widget` or `LiveActivity`. See the `Interactive Widget and LiveActivity`.              |\n| `action`      | `() => void`                                                     | A function to execute when the user triggers the button.                                                                                                 |\n\n***\n\n### `ButtonStyle`\n\nDefines the visual appearance of the button.\n\n| **Value**           | **Description**                                                                                             |\n| ------------------- | ----------------------------------------------------------------------------------------------------------- |\n| `automatic`         | The default style based on the button's context.                                                            |\n| `bordered`          | A standard bordered style.                                                                                  |\n| `borderedProminent` | A prominent bordered style that stands out.                                                                 |\n| `borderless`        | A style without any border.                                                                                 |\n| `plain`             | A plain style with minimal decoration, though it may indicate pressed, focused, or enabled states visually. |\n\n***\n\n### `ButtonBorderShape`\n\nSpecifies the shape of the button's border when using `bordered` or `borderedProminent` styles.\n\n| **Value**                            | **Description**                                                   |\n| ------------------------------------ | ----------------------------------------------------------------- |\n| `automatic`                          | Defers to the system to determine the appropriate shape.          |\n| `capsule`                            | A capsule-shaped border.                                          |\n| `circle`                             | A circular border.                                                |\n| `roundedRectangle`                   | A rectangle with rounded corners.                                 |\n| `buttonBorder`                       | Defers to the environment to determine the resolved border shape. |\n| `{ roundedRectangleRadius: number }` | A rounded rectangle with a specific corner radius.                |\n\n***\n\n### `ControlSize`\n\nDefines the size of the button and other controls.\n\n| **Value**    | **Description**                                                                  |\n| ------------ | -------------------------------------------------------------------------------- |\n| `mini`       | The smallest control size.                                                       |\n| `small`      | A compact control size.                                                          |\n| `regular`    | The standard control size.                                                       |\n| `large`      | A large control size.                                                            |\n| `extraLarge` | The largest control size, typically for high emphasis or accessibility purposes. |\n\n***\n\n### `CommonViewProps`\n\nThese properties can be applied to customize the appearance and behavior of buttons within a view.\n\n| **Property**        | **Type**            | **Description**                                                                         |\n| ------------------- | ------------------- | --------------------------------------------------------------------------------------- |\n| `controlSize`       | `ControlSize`       | Sets the size for controls within this view.                                            |\n| `buttonStyle`       | `ButtonStyle`       | Applies custom interaction behavior and appearance to buttons.                          |\n| `buttonBorderShape` | `ButtonBorderShape` | Specifies the shape of the border for `bordered` and `borderedProminent` button styles. |\n\n***\n\n## Example Usage\n\n### Basic Button with Action\n\n```tsx\n<Button title=\"Sign in\" action={handleSignIn} />\n```\n\n### Button with System Image\n\n```tsx\n<Button title=\"Delete\" systemImage=\"trash\" role=\"destructive\" action={handleDelete} />\n```\n\n### Button with Custom Label\n\n```tsx\n<Button>\n  <Text>Custom Label</Text>\n</Button>\n```\n\n### Button Executing an AppIntent\n\n```tsx\n<Button\n  title=\"Start Workout\"\n  intent={MyStartWorkoutIntent({ duration: 30 })}\n  buttonStyle=\"borderedProminent\"\n/>\n```\n\n### Styling Buttons\n\n```tsx\n<Group\n  buttonStyle=\"bordered\"\n  buttonBorderShape={{ roundedRectangleRadius: 8 }}\n  controlSize=\"large\"\n>\n  <Button title=\"Save\" action={handleSave} />\n</Group>\n```\n\n***\n\n### Notes\n\n- Use `role` to indicate buttons with specific purposes, such as canceling or destructive actions.\n- Combine `buttonStyle` and `buttonBorderShape` for consistent theming across views.\n- The `intent` property integrates buttons with `Widget` and `LiveActivity` for seamless interactions.\n\nFor further details on `AppIntent`, refer to the `Interactive Widget and LiveActivity` documentation.\n","routePath":"/doc/Views/Button","lang":"en","toc":[{"id":"button","text":"`Button`","depth":2,"charIndex":390},{"id":"description","text":"Description","depth":3,"charIndex":403},{"id":"properties","text":"Properties","depth":3,"charIndex":675},{"id":"buttonstyle","text":"`ButtonStyle`","depth":3,"charIndex":2617},{"id":"buttonbordershape","text":"`ButtonBorderShape`","depth":3,"charIndex":3626},{"id":"controlsize","text":"`ControlSize`","depth":3,"charIndex":4626},{"id":"commonviewprops","text":"`CommonViewProps`","depth":3,"charIndex":5403},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":6212},{"id":"basic-button-with-action","text":"Basic Button with Action","depth":3,"charIndex":6230},{"id":"button-with-system-image","text":"Button with System Image","depth":3,"charIndex":6321},{"id":"button-with-custom-label","text":"Button with Custom Label","depth":3,"charIndex":6450},{"id":"button-executing-an-appintent","text":"Button Executing an AppIntent","depth":3,"charIndex":6539},{"id":"styling-buttons","text":"Styling Buttons","depth":3,"charIndex":6705},{"id":"notes","text":"Notes","depth":3,"charIndex":6906}],"frontmatter":{},"version":"","description":"The Button component in the Scripting app allows you to create interactive elements with customizable actions, labels, styles, and roles. Buttons can trigger actions, execute intents, and display various visual styles based on the configuration. This documentation provides a detailed guide on how to use the Button API, including its properties, roles, styles, and examples."},{"title":"AreaStackChart","content":"The `AreaStackChart` component displays a series of values as stacked areas over a shared axis, allowing for a clear comparison of data parts and totals across categories or time.\n\n## Usage\n\n```tsx\n<Chart frame={{ height: 300 }}>\n  <AreaStackChart\n    marks={[\n      {\n        category: \"Cheese\",\n        label: \"2020\",\n        value: 0.26,\n        stacking: \"standard\"\n      },\n      ...\n    ]}\n  />\n</Chart>\n```\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nAn array of data points to render on the chart.\n\nEach mark supports the following properties:\n\n- `category: string`\n  A category label for the mark, typically used to group data in the stacked chart.\n\n- `label: string | Date`\n  The x-axis label for this mark. Can be a year, date, or other descriptor.\n\n- `value: number`\n  The numeric value to be represented by the mark.\n\n- `unit?: CalendarComponent`\n  Specifies the calendar component for time-based values (e.g., `\"year\"`, `\"month\"`, `\"day\"`). Useful when rendering time series.\n\n- `stacking?: ChartMarkStackingMethod`\n  Controls how marks are stacked:\n\n  - `\"standard\"`: Stack values from a common baseline (default).\n  - `\"normalized\"`: Normalize all values to represent a percentage of the total.\n  - `\"center\"`: Stack around a central axis for symmetrical data.\n  - `\"unstacked\"`: Render without stacking.\n\n- Other optional `ChartMarkProps`:\n  Includes extensive styling and behavior options such as:\n\n  - `foregroundStyle`\n  - `opacity`\n  - `cornerRadius`\n  - `interpolationMethod`\n  - `symbol`, `symbolSize`, `annotation`, `clipShape`, `shadow`, `blur`, `zIndex`, `offset`, etc.\n\nRefer to `ChartMarkProps` for detailed mark customization.\n\n### `labelOnYAxis?: boolean`\n\nWhether to display the `label` values on the Y-axis instead of the default X-axis.\nDefaults to `false`.\n\n## Example\n\n```tsx\n<AreaStackChart\n  labelOnYAxis={false}\n  marks={[\n    {\n      category: \"Burger\",\n      label: 2020,\n      value: 0.6,\n      stacking: \"standard\"\n    },\n    {\n      category: \"Cheese\",\n      label: 2020,\n      value: 0.26,\n      stacking: \"standard\"\n    },\n    {\n      category: \"Bun\",\n      label: 2020,\n      value: 0.24,\n      stacking: \"standard\"\n    }\n  ]}\n/>\n```\n","routePath":"/doc/Views/Charts/AreaStackChart/","lang":"en","toc":[{"id":"usage","text":"Usage","depth":2,"charIndex":181},{"id":"props","text":"Props","depth":2,"charIndex":415},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":425},{"id":"labelonyaxis-boolean","text":"`labelOnYAxis?: boolean`","depth":3,"charIndex":1667},{"id":"example","text":"Example","depth":2,"charIndex":1802}],"frontmatter":{},"version":"","description":"The AreaStackChart component displays a series of values as stacked areas over a shared axis, allowing for a clear comparison of data parts and totals across categories or time."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { name: \"Burger\", price: 0.07, year: 1960 },\n  { name: \"Cheese\", price: 0.03, year: 1960 },\n  { name: \"Bun\", price: 0.05, year: 1960 },\n\n  { name: \"Burger\", price: 0.10, year: 1970 },\n  { name: \"Cheese\", price: 0.04, year: 1970 },\n  { name: \"Bun\", price: 0.06, year: 1970 },\n\n  { name: \"Burger\", price: 0.15, year: 1980 },\n  { name: \"Cheese\", price: 0.10, year: 1980 },\n  { name: \"Bun\", price: 0.1, year: 1980 },\n\n  { name: \"Burger\", price: 0.23, year: 1990 },\n  { name: \"Cheese\", price: 0.12, year: 1990 },\n  { name: \"Bun\", price: 0.13, year: 1990 },\n\n  { name: \"Burger\", price: 0.32, year: 2000 },\n  { name: \"Cheese\", price: 0.15, year: 2000 },\n  { name: \"Bun\", price: 0.15, year: 2000 },\n\n  { name: \"Burger\", price: 0.49, year: 2010 },\n  { name: \"Cheese\", price: 0.20, year: 2010 },\n  { name: \"Bun\", price: 0.19, year: 2010 },\n\n  { name: \"Burger\", price: 0.60, year: 2020 },\n  { name: \"Cheese\", price: 0.26, year: 2020 },\n  { name: \"Bun\", price: 0.24, year: 2020 },\n]\n\nconst stackings: ChartMarkStackingMethod[] = [\n  'center',\n  'normalized',\n  'standard',\n  'unstacked'\n]\n\nfunction Example() {\n  const [stacking, setStacking] = useState<ChartMarkStackingMethod>('standard')\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"AreaStackChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Picker\n        title={\"StackingMethod\"}\n        value={stacking}\n        onChanged={setStacking as any}\n        pickerStyle={\"menu\"}\n      >\n        {stackings.map(item =>\n          <Text tag={item}>{item}</Text>\n        )}\n      </Picker>\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <AreaStackChart\n          marks={data.map(item => ({\n            category: item.name,\n            label: item.year.toString(),\n            value: item.price,\n            stacking: stacking,\n          }))}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/AreaStackChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Bar1DChart","content":"The `Bar1DChart` component renders a one-dimensional bar chart for comparing numerical values across discrete categories. Each bar represents a single category with its corresponding value, making it ideal for simple horizontal or vertical bar comparisons.\n\n## Usage\n\n```tsx\n<Chart\n  padding={0}\n  frame={{ height: 400 }}\n>\n  <Bar1DChart\n    marks={[\n      { category: \"Gadgets\", value: 3800 },\n      { category: \"Gizmos\", value: 4400 },\n      { category: \"Widgets\", value: 6500 },\n    ]}\n  />\n</Chart>\n```\n\n## Props\n\n### `labelOnYAxis?: boolean`\n\nIf set to `true`, category labels will be displayed on the Y-axis and bars will be laid out horizontally.\nDefaults to `false`, where labels appear on the X-axis and bars are rendered vertically.\n\n### `marks: Array<object>` **(required)**\n\nAn array of data points defining each bar. Each mark includes:\n\n- `category: string`\n  The category label for the bar.\n\n- `value: number`\n  The numeric value represented by the bar length.\n\n- Additional optional `ChartMarkProps`:\n  Use `ChartMarkProps` to further style or annotate the bars, including:\n\n  - `foregroundStyle`\n  - `opacity`\n  - `symbol`\n  - `annotation`\n  - `offset`\n  - `zIndex`, etc.\n\n## Example\n\n```tsx\nconst data = [\n  { type: \"Gadgets\", profit: 3800 },\n  { type: \"Gizmos\", profit: 4400 },\n  { type: \"Widgets\", profit: 6500 },\n]\n\nfunction Example() {\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Bar1DChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        padding={0}\n        frame={{ height: 400 }}\n      >\n        <Bar1DChart\n          marks={data.map(item => ({\n            category: item.type,\n            value: item.profit,\n          }))}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n```\n\n## Run the Chart\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n## Use Cases\n\n`Bar1DChart` is best suited for:\n\n- Comparing discrete values across categories\n- Displaying ranked items or sorted values\n- Visualizing simple datasets in a clear and minimal layout\n","routePath":"/doc/Views/Charts/Bar1DChart/","lang":"en","toc":[{"id":"usage","text":"Usage","depth":2,"charIndex":258},{"id":"props","text":"Props","depth":2,"charIndex":508},{"id":"labelonyaxis-boolean","text":"`labelOnYAxis?: boolean`","depth":3,"charIndex":518},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":744},{"id":"example","text":"Example","depth":2,"charIndex":1190},{"id":"run-the-chart","text":"Run the Chart","depth":2,"charIndex":1765},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1903}],"frontmatter":{},"version":"","description":"The Bar1DChart component renders a one-dimensional bar chart for comparing numerical values across discrete categories. Each bar represents a single category with its corresponding value, making it ideal for simple horizontal or vertical bar comparisons."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { type: \"Gadgets\", profit: 3800 },\n  { type: \"Gizmos\", profit: 4400 },\n  { type: \"Widgets\", profit: 6500 },\n]\n\nfunction Example() {\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Bar1DChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        padding={0}\n        frame={{\n          height: 400\n        }}\n      >\n        <Bar1DChart\n          marks={data.map(item => ({\n            category: item.type,\n            value: item.profit,\n          }))}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack >\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/Bar1DChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"BarChart","content":"The `BarChart` component renders a standard bar chart, enabling visual comparison of numeric values across different categories. Each bar corresponds to a label and represents its associated value through height (vertical layout) or length (horizontal layout).\n\n## Example Scenario\n\nThis example displays the count of different toy shapes — `Cube`, `Sphere`, and `Pyramid`. The chart provides an optional toggle to switch between vertical and horizontal layouts using the `labelOnYAxis` property.\n\n## Usage\n\n```tsx\n<Chart frame={{ height: 400 }}>\n  <BarChart\n    labelOnYAxis={false}\n    marks={[\n      { label: \"Cube\", value: 5 },\n      { label: \"Sphere\", value: 4 },\n      { label: \"Pyramid\", value: 4 },\n    ]}\n  />\n</Chart>\n```\n\n## Props\n\n### `labelOnYAxis?: boolean`\n\n- If `true`, labels will be displayed on the **Y-axis**, and bars will be rendered **horizontally**.\n- If `false` (default), labels appear on the **X-axis**, and bars are rendered **vertically**.\n\n### `marks: Array<object>` **(required)**\n\nEach data point defines a bar and includes:\n\n- `label: string | Date`\n  The name or identifier for the category.\n\n- `value: number`\n  The numeric value represented by the bar.\n\n- `unit?: CalendarComponent` *(optional)*\n  Used when displaying time-based values.\n\n- Optional `ChartMarkProps`\n  Provides additional customization, such as:\n\n  - `foregroundStyle`\n  - `opacity`\n  - `cornerRadius`\n  - `symbol`\n  - `annotation`\n  - etc.\n\n## Example Code\n\n```tsx\nconst toysData = [\n  { type: \"Cube\", count: 5 },\n  { type: \"Sphere\", count: 4 },\n  { type: \"Pyramid\", count: 4 },\n]\n\n<BarChart\n  marks={toysData.map(toy => ({\n    label: toy.type,\n    value: toy.count,\n  }))}\n/>\n```\n\n## Use Cases\n\nThe `BarChart` component is ideal for:\n\n- Comparing values across discrete categories\n- Displaying survey results, item counts, or rankings\n- Switching between horizontal and vertical layouts with minimal configuration\n","routePath":"/doc/Views/Charts/BarChart/","lang":"en","toc":[{"id":"example-scenario","text":"Example Scenario","depth":2,"charIndex":262},{"id":"usage","text":"Usage","depth":2,"charIndex":498},{"id":"props","text":"Props","depth":2,"charIndex":733},{"id":"labelonyaxis-boolean","text":"`labelOnYAxis?: boolean`","depth":3,"charIndex":743},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":970},{"id":"example-code","text":"Example Code","depth":2,"charIndex":1445},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1686}],"frontmatter":{},"version":"","description":"The BarChart component renders a standard bar chart, enabling visual comparison of numeric values across different categories. Each bar corresponds to a label and represents its associated value through height (vertical layout) or length (horizontal layout)."},{"title":"Example","content":"```tsx\n\n\ntype ToyShape = {\n  type: string\n  count: number\n}\n\nconst toysData: ToyShape[] = [\n  {\n    type: \"Cube\",\n    count: 5,\n  },\n  {\n    type: \"Sphere\",\n    count: 4,\n  },\n  {\n    type: \"Pyramid\",\n    count: 4\n  }\n]\n\nfunction Example() {\n  const [labelOnYAxis, setLabelOnYAxis] = useState(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"BarChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section>\n        <Toggle\n          title={\"labelOnYAxis\"}\n          value={labelOnYAxis}\n          onChanged={setLabelOnYAxis}\n        />\n      </Section>\n      <Chart\n        chartXVisibleDomain={10}\n        frame={{\n          height: 400\n        }}\n      >\n        <BarChart\n          labelOnYAxis={labelOnYAxis}\n          marks={toysData.map(toy => ({\n            label: toy.type,\n            value: toy.count,\n          }))}\n        />\n      </Chart>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/BarChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"BarGanttChart","content":"The `BarGanttChart` component visualizes time intervals across multiple categories, making it ideal for illustrating schedules, timelines, or task durations. It displays bars that span from a start to an end value on a continuous axis, grouped by labeled categories.\n\n## Usage\n\n```tsx\n<Chart frame={{ height: 400 }}>\n  <BarGanttChart\n    labelOnYAxis\n    marks={[\n      { label: \"Job 1\", start: 0, end: 15 },\n      { label: \"Job 2\", start: 5, end: 25 },\n      ...\n    ]}\n  />\n</Chart>\n```\n\n## Props\n\n### `labelOnYAxis?: boolean`\n\nIf `true`, the category labels will be displayed on the **Y-axis**, and bars will extend horizontally along the X-axis (typical Gantt chart layout).\nDefault is `false`, which would render a vertical layout with labels on the X-axis.\n\n### `marks: Array<object>` **(required)**\n\nDefines the time intervals for each bar. Each object must include:\n\n- `label: string`\n  The category label associated with the time interval (e.g., task or job name).\n\n- `start: number`\n  The starting value (usually representing time or progress) of the bar.\n\n- `end: number`\n  The ending value of the bar. The bar will visually span from `start` to `end`.\n\nAdditional `ChartMarkProps` can also be provided for customization.\n\n## Example\n\n```tsx\nconst data = [\n  { job: \"Job 1\", start: 0, end: 15 },\n  { job: \"Job 2\", start: 5, end: 25 },\n  { job: \"Job 1\", start: 20, end: 35 },\n  { job: \"Job 1\", start: 40, end: 55 },\n  { job: \"Job 2\", start: 30, end: 60 },\n  { job: \"Job 2\", start: 30, end: 60 },\n]\n\nfunction Example() {\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"BarGanttChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart frame={{ height: 400 }}>\n        <BarGanttChart\n          labelOnYAxis\n          marks={data.map(item => ({\n            label: item.job,\n            start: item.start,\n            end: item.end,\n          }))}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n```\n\n## Execution\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n## Use Cases\n\n`BarGanttChart` is ideal for:\n\n- Project planning and task scheduling\n- Visualizing task overlaps and durations\n- Representing resource allocation over time\n","routePath":"/doc/Views/Charts/BarGanttChart/","lang":"en","toc":[{"id":"usage","text":"Usage","depth":2,"charIndex":268},{"id":"props","text":"Props","depth":2,"charIndex":490},{"id":"labelonyaxis-boolean","text":"`labelOnYAxis?: boolean`","depth":3,"charIndex":500},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":764},{"id":"example","text":"Example","depth":2,"charIndex":1234},{"id":"execution","text":"Execution","depth":2,"charIndex":1953},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2087}],"frontmatter":{},"version":"","description":"The BarGanttChart component visualizes time intervals across multiple categories, making it ideal for illustrating schedules, timelines, or task durations. It displays bars that span from a start to an end value on a continuous axis, grouped by labeled categories."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { job: \"Job 1\", start: 0, end: 15 },\n  { job: \"Job 2\", start: 5, end: 25 },\n  { job: \"Job 1\", start: 20, end: 35 },\n  { job: \"Job 1\", start: 40, end: 55 },\n  { job: \"Job 2\", start: 30, end: 60 },\n  { job: \"Job 2\", start: 30, end: 60 },\n]\n\nfunction Example() {\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"BarGanttChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        frame={{\n          height: 400\n        }}\n      >\n        <BarGanttChart\n          labelOnYAxis\n          marks={data.map(item => ({\n            label: item.job,\n            start: item.start,\n            end: item.end\n          }))}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/BarGanttChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"BarGroupChart","content":"This example demonstrates how to create grouped bars in a `BarChart` by using the `positionBy` property to segment bars by a secondary dimension (e.g., \"color\") and `foregroundStyleBy` to apply distinct colors to each group. This pattern is useful when comparing subcategories within a larger category.\n\n## Example Scenario\n\nThe dataset includes different object types (`Cube`, `Sphere`, `Pyramid`) grouped by color (`Green`, `Purple`, `Pink`, `Yellow`). The chart displays the count of each shape per color, with grouped and color-coded bars.\n\n## Key Concepts\n\n### `positionBy`\n\n```ts\npositionBy: {\n  value: item.color,\n  axis: 'horizontal',\n}\n```\n\n- Groups bars by the specified `value` (e.g., color).\n- The `axis` indicates how the bars are positioned:\n\n  - `'horizontal'`: groups by Y-axis (stacked vertically within each color group).\n  - `'vertical'`: groups by X-axis (used for transposed layouts).\n\n### `foregroundStyleBy`\n\n```ts\nforegroundStyleBy: item.color\n```\n\n- Applies a unique foreground color to each bar based on the color group.\n- This helps visually distinguish between grouped items.\n\n## Code Summary\n\n```tsx\nconst data = [\n  { color: \"Green\", type: \"Cube\", count: 2 },\n  { color: \"Purple\", type: \"Sphere\", count: 1 },\n  ...\n]\n\nconst list = data.map(item => ({\n  label: item.type,              // Primary label (e.g., Cube, Sphere)\n  value: item.count,             // Numeric value\n  positionBy: {\n    value: item.color,           // Grouping key\n    axis: 'horizontal',\n  },\n  foregroundStyleBy: item.color, // Color grouping\n  cornerRadius: 8,\n}))\n```\n\n## Full Example\n\n```tsx\n<Chart frame={{ height: 400 }}>\n  <BarChart marks={list} />\n</Chart>\n```\n\nThis chart will render vertical groups of bars by color (e.g., Green, Purple...), and each group will contain the respective shapes (Cube, Sphere, Pyramid) with the appropriate height and color.\n\n## Use Cases\n\nThis grouped bar layout is ideal for:\n\n- Comparing subcategories within grouped categories (e.g., survey responses by demographic).\n- Visualizing segmented data distributions.\n- Highlighting clusters of related values in a compact chart.\n","routePath":"/doc/Views/Charts/BarGroupChart/","lang":"en","toc":[{"id":"example-scenario","text":"Example Scenario","depth":2,"charIndex":304},{"id":"key-concepts","text":"Key Concepts","depth":2,"charIndex":545},{"id":"positionby","text":"`positionBy`","depth":3,"charIndex":562},{"id":"foregroundstyleby","text":"`foregroundStyleBy`","depth":3,"charIndex":907},{"id":"code-summary","text":"Code Summary","depth":2,"charIndex":1105},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1575},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1869}],"frontmatter":{},"version":"","description":"This example demonstrates how to create grouped bars in a BarChart by using the positionBy property to segment bars by a secondary dimension (e.g., \"color\") and foregroundStyleBy to apply distinct colors to each group. This pattern is useful when comparing subcategories within a larger category."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { color: \"Green\", type: \"Cube\", count: 2 },\n  { color: \"Green\", type: \"Sphere\", count: 0 },\n  { color: \"Green\", type: \"Pyramid\", count: 1 },\n  { color: \"Purple\", type: \"Cube\", count: 1 },\n  { color: \"Purple\", type: \"Sphere\", count: 1 },\n  { color: \"Purple\", type: \"Pyramid\", count: 1 },\n  { color: \"Pink\", type: \"Cube\", count: 1 },\n  { color: \"Pink\", type: \"Sphere\", count: 2 },\n  { color: \"Pink\", type: \"Pyramid\", count: 0 },\n  { color: \"Yellow\", type: \"Cube\", count: 1 },\n  { color: \"Yellow\", type: \"Sphere\", count: 1 },\n  { color: \"Yellow\", type: \"Pyramid\", count: 2 },\n]\n\nfunction View() {\n  // Access dismiss function.\n  const dismiss = Navigation.useDismiss()\n\n  const list = useMemo(() => {\n    return data.map(item => ({\n      label: item.type,\n      value: item.count,\n      positionBy: {\n        value: item.color,\n        axis: 'horizontal',\n      },\n      foregroundStyleBy: item.color,\n      cornerRadius: 8,\n    }) as BarChartProps[\"marks\"][0])\n  }, [])\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle=\"Page Title\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <Chart\n        frame={{\n          height: 400\n        }}\n      >\n        <BarChart\n          marks={list}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  // Present view.\n  await Navigation.present({\n    element: <View />\n  })\n\n  // Avoiding memory leaks.\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/BarGroupChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"BarStackChart","content":"The `BarStackChart` component renders grouped values as stacked bars, enabling visual comparison of cumulative totals and their individual components across categories. Each bar is split into colored segments that represent different subcategories within a shared label.\n\n## Example Scenario\n\nThis example visualizes toy counts grouped by **type** (`Cube`, `Sphere`, `Pyramid`) and stacked by **color** (`Green`, `Purple`, `Pink`, `Yellow`). The stacked bar chart shows how each color contributes to the total count per shape.\n\n## Usage\n\n```tsx\n<Chart frame={{ height: 400 }}>\n  <BarStackChart\n    labelOnYAxis={false}\n    marks={[\n      { label: \"Cube\", value: 2, category: \"Green\" },\n      { label: \"Cube\", value: 1, category: \"Purple\" },\n      ...\n    ]}\n  />\n</Chart>\n```\n\n## Props\n\n### `labelOnYAxis?: boolean`\n\n- If `true`, category labels will be displayed on the **Y-axis**, rendering the bars horizontally.\n- If `false` (default), labels appear on the **X-axis**, and bars are drawn vertically.\n\n### `marks: Array<object>` **(required)**\n\nEach mark represents a segment in the stacked bar and includes the following fields:\n\n- `label: string | Date`\n  The shared label used to group segments into one bar (e.g., \"Cube\", \"Sphere\").\n\n- `category: string`\n  The subcategory used to split the bar into segments (e.g., color groups like \"Green\", \"Pink\").\n\n- `value: number`\n  The numeric value for this segment.\n\n- `unit?: CalendarComponent`\n  *(Optional)* Used when rendering time-based charts.\n\n- Additional optional `ChartMarkProps`\n  For customizing appearance, including:\n\n  - `foregroundStyle`\n  - `cornerRadius`\n  - `symbol`\n  - `annotation`\n  - etc.\n\n## Full Example\n\n```tsx\nconst data = [\n  { color: \"Green\", type: \"Cube\", count: 2 },\n  { color: \"Purple\", type: \"Cube\", count: 1 },\n  ...\n]\n\n<BarStackChart\n  labelOnYAxis={labelOnYAxis}\n  marks={data.map(item => ({\n    label: item.type,\n    value: item.count,\n    category: item.color,\n  }))}\n/>\n```\n\n## Dynamic Layout Toggle\n\nThe example also includes a toggle to switch between vertical and horizontal layouts using `labelOnYAxis`.\n\n## Execution\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n```\n\n## Use Cases\n\n`BarStackChart` is ideal for:\n\n- Showing composition of totals across categories\n- Comparing group contributions visually\n- Displaying part-to-whole relationships over multiple items\n","routePath":"/doc/Views/Charts/BarStackChart/","lang":"en","toc":[{"id":"example-scenario","text":"Example Scenario","depth":2,"charIndex":272},{"id":"usage","text":"Usage","depth":2,"charIndex":528},{"id":"props","text":"Props","depth":2,"charIndex":777},{"id":"labelonyaxis-boolean","text":"`labelOnYAxis?: boolean`","depth":3,"charIndex":787},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":1005},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1663},{"id":"dynamic-layout-toggle","text":"Dynamic Layout Toggle","depth":2,"charIndex":1964},{"id":"execution","text":"Execution","depth":2,"charIndex":2098},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2225}],"frontmatter":{},"version":"","description":"The BarStackChart component renders grouped values as stacked bars, enabling visual comparison of cumulative totals and their individual components across categories. Each bar is split into colored segments that represent different subcategories within a shared label."},{"title":"Example","content":"```tsx\n\n\ntype ToyShape = {\n  color: string\n  type: string\n  count: number\n}\n\nconst toyWithColorData: ToyShape[] = [\n  { color: \"Green\", type: \"Cube\", count: 2 },\n  { color: \"Green\", type: \"Sphere\", count: 0 },\n  { color: \"Green\", type: \"Pyramid\", count: 1 },\n  { color: \"Purple\", type: \"Cube\", count: 1 },\n  { color: \"Purple\", type: \"Sphere\", count: 1 },\n  { color: \"Purple\", type: \"Pyramid\", count: 1 },\n  { color: \"Pink\", type: \"Cube\", count: 1 },\n  { color: \"Pink\", type: \"Sphere\", count: 2 },\n  { color: \"Pink\", type: \"Pyramid\", count: 0 },\n  { color: \"Yellow\", type: \"Cube\", count: 1 },\n  { color: \"Yellow\", type: \"Sphere\", count: 1 },\n  { color: \"Yellow\", type: \"Pyramid\", count: 2 },\n]\n\nfunction Example() {\n  const [labelOnYAxis, setLabelOnYAxis] = useState(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"BarStackChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section>\n        <Toggle\n          title={\"labelOnYAxis\"}\n          value={labelOnYAxis}\n          onChanged={setLabelOnYAxis}\n        />\n      </Section>\n      <Chart\n        frame={{\n          height: 400\n        }}\n      >\n        <BarStackChart\n          labelOnYAxis={labelOnYAxis}\n          marks={toyWithColorData.map(toy => ({\n            label: toy.type,\n            value: toy.count,\n            category: toy.color,\n          }))}\n        />\n      </Chart>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/BarStackChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"DonutChart","content":"The `DonutChart` component displays data as a circular ring divided into segments, where each segment’s angle represents a proportion of the whole. It is ideal for visualizing part-to-whole relationships with an inner radius that distinguishes it from a traditional pie chart.\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nEach mark represents a sector (slice) of the donut chart and includes the following properties:\n\n***\n\n### `category: string`\n\nA label representing the category for the segment (e.g., product name, region).\n\n### `value: number`\n\nDetermines the angular size of the segment. The segment’s angle will be proportional to this value in relation to the total of all segments.\n\n***\n\n### `innerRadius?: MarkDimension`\n\nDefines the **inner radius** of the donut.\nThis determines the size of the \"hole\" in the center.\n\n- Format:\n\n  ```ts\n  {\n    type: 'ratio' | 'inset';\n    value: number;\n  }\n  ```\n\n- `type: 'ratio'`\n  The radius is a ratio (e.g., `0.618`) of the outer radius.\n\n- `type: 'inset'`\n  The radius is an absolute inset in points from the outer radius.\n\n***\n\n### `outerRadius?: MarkDimension`\n\nDefines the **outer radius** of the segment.\nControls how far each segment extends from the center.\n\n- Format:\n\n  ```ts\n  {\n    type: 'inset';\n    value: number;\n  }\n  ```\n\n- `type: 'inset'`\n  Specifies how much to inset the outer edge from the edge of the chart’s plot area.\n\n***\n\n### `angularInset?: number`\n\nOptional gap (in degrees) between each segment.\nThis controls how rounded or spaced out each slice appears.\n\n***\n\n### Inherited from `ChartMarkProps`\n\nYou can also use all styling and behavior properties from `ChartMarkProps`, including:\n\n- `foregroundStyle` – sets the color of each slice\n- `annotation` – attaches labels or icons\n- `opacity`, `cornerRadius`, `offset`, `shadow`, etc.\n\n## Example\n\n```tsx\n<DonutChart\n  marks={data.map(item => ({\n    category: item.name,\n    value: item.sales,\n    innerRadius: {\n      type: 'ratio',\n      value: 0.618\n    },\n    outerRadius: {\n      type: 'inset',\n      value: 10\n    },\n    angularInset: 1\n  }))}\n/>\n```\n\n## Use Cases\n\n- Showing sales distribution across products\n- Visualizing market share or demographic segments\n- Comparing multiple values as part of a total\n","routePath":"/doc/Views/Charts/DonutChart/","lang":"en","toc":[{"id":"props","text":"Props","depth":2,"charIndex":278},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":288},{"id":"category-string","text":"`category: string`","depth":3,"charIndex":433},{"id":"value-number","text":"`value: number`","depth":3,"charIndex":538},{"id":"innerradius-markdimension","text":"`innerRadius?: MarkDimension`","depth":3,"charIndex":706},{"id":"outerradius-markdimension","text":"`outerRadius?: MarkDimension`","depth":3,"charIndex":1092},{"id":"angularinset-number","text":"`angularInset?: number`","depth":3,"charIndex":1409},{"id":"inherited-from-chartmarkprops","text":"Inherited from `ChartMarkProps`","depth":3,"charIndex":1552},{"id":"example","text":"Example","depth":2,"charIndex":1825},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2097}],"frontmatter":{},"version":"","description":"The DonutChart component displays data as a circular ring divided into segments, where each segment’s angle represents a proportion of the whole. It is ideal for visualizing part-to-whole relationships with an inner radius that distinguishes it from a traditional pie chart."},{"title":"Example","content":"```tsx\n\n\nlet data = [\n  { name: \"Cachapa\", sales: 9631 },\n  { name: \"Crêpe\", sales: 6959 },\n  { name: \"Injera\", sales: 4891 },\n  { name: \"Jian Bing\", sales: 2506 },\n  { name: \"American\", sales: 1777 },\n  { name: \"Dosa\", sales: 625 },\n]\n\nfunction Example() {\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"DonutChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <DonutChart\n          marks={\n            data.map(item => ({\n              category: item.name,\n              value: item.sales,\n              innerRadius: {\n                type: 'ratio',\n                value: 0.618\n              },\n              outerRadius: {\n                type: 'inset',\n                value: 10,\n              },\n              angularInset: 1,\n            }))\n          }\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/DonutChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"HeatMapChart","content":"The `HeatMapChart` component displays data values as a grid of cells, where the color intensity of each cell represents the magnitude of a numeric value. It is ideal for visualizing bivariate data distributions or correlations across two categorical dimensions.\n\n## Usage Example\n\n```tsx\n<Chart\n  aspectRatio={{\n    value: 1,\n    contentMode: 'fit'\n  }}\n>\n  <HeatMapChart\n    marks={[\n      { x: \"+\", y: \"+\", value: 125 },\n      { x: \"+\", y: \"-\", value: 10 },\n      { x: \"-\", y: \"-\", value: 80 },\n      { x: \"-\", y: \"+\", value: 1 },\n    ]}\n  />\n</Chart>\n```\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nEach item in the array represents a single cell in the heatmap, defined by its X/Y coordinates and a value that determines the cell's color intensity.\n\n#### Fields:\n\n- `x: string`\n  The horizontal coordinate (e.g., category or label on the X-axis).\n\n- `y: string`\n  The vertical coordinate (e.g., category or label on the Y-axis).\n\n- `value: number`\n  A numeric value used to determine the color intensity of the cell. Higher values typically produce darker or more saturated colors.\n\n- Inherits all `ChartMarkProps` for styling and customization, such as:\n\n  - `foregroundStyle`\n  - `opacity`\n  - `annotation`\n  - `cornerRadius`\n  - `zIndex`, etc.\n\n## Use Cases\n\n`HeatMapChart` is suitable for:\n\n- Displaying correlation matrices\n- Analyzing two-dimensional categorical data\n- Visualizing frequency, density, or performance across paired factors\n\n## Full Example\n\n```tsx\nconst data = [\n  { positive: \"+\", negative: \"+\", num: 125 },\n  { positive: \"+\", negative: \"-\", num: 10 },\n  { positive: \"-\", negative: \"-\", num: 80 },\n  { positive: \"-\", negative: \"+\", num: 1 },\n]\n\n<HeatMapChart\n  marks={data.map(item => ({\n    x: item.positive,\n    y: item.negative,\n    value: item.num,\n  }))}\n/>\n```\n","routePath":"/doc/Views/Charts/HeatMapChart/","lang":"en","toc":[{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":263},{"id":"props","text":"Props","depth":2,"charIndex":559},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":569},{"id":"fields","text":"Fields:","depth":4,"charIndex":764},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1262},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1460}],"frontmatter":{},"version":"","description":"The HeatMapChart component displays data values as a grid of cells, where the color intensity of each cell represents the magnitude of a numeric value. It is ideal for visualizing bivariate data distributions or correlations across two categorical dimensions."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { positive: \"+\", negative: \"+\", num: 125 },\n  { positive: \"+\", negative: \"-\", num: 10 },\n  { positive: \"-\", negative: \"-\", num: 80 },\n  { positive: \"-\", negative: \"+\", num: 1 },\n]\n\nfunction Example() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"HeatMapChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        aspectRatio={{\n          value: 1,\n          contentMode: 'fit'\n        }}\n      >\n        <HeatMapChart\n          marks={\n            data.map(item => ({\n              x: item.positive,\n              y: item.negative,\n              value: item.num,\n            }))\n          }\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/HeatMapChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"LineCategoryChart","content":"The `LineCategoryChart` component displays multiple line series categorized by a secondary key, allowing you to compare trends across distinct groups (categories) along a shared axis of discrete labels.\n\nIt is ideal for grouped comparisons across labeled segments (e.g., departments, months, stages) and is especially useful for showing how each category's values evolve over the same set of labels.\n\n***\n\n## Example Scenario\n\nIn this example, different departments (`Production`, `Marketing`, `Finance`) are plotted along the X-axis, and each product category (`Gizmos`, `Gadgets`, `Widgets`) is represented by its own line.\n\n***\n\n## Usage\n\n```tsx\n<LineCategoryChart\n  labelOnYAxis={false}\n  marks={[\n    { label: \"Production\", value: 4000, category: \"Gizmos\" },\n    { label: \"Marketing\", value: 2000, category: \"Gizmos\" },\n    ...\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `labelOnYAxis?: boolean`\n\n- If `true`, the category labels (e.g., \"Production\", \"Marketing\") are displayed on the **Y-axis**, and the lines are drawn **horizontally**.\n- If `false` (default), labels are on the **X-axis**, and lines are rendered **vertically**.\n\n***\n\n### `marks: Array<object>` **(required)**\n\nEach item defines a data point on the chart. It must include:\n\n- `label: string | Date`\n  The shared axis label (e.g., phase, department, month) across which each line progresses.\n\n- `value: number`\n  The value to be plotted at that label for the corresponding category.\n\n- `category: string`\n  Defines the group to which this point belongs. Each `category` generates its own line.\n\nAdditional fields from `ChartMarkProps` may also be used for styling (e.g., `foregroundStyle`, `symbol`, `annotation`).\n\n***\n\n## Full Example\n\n```tsx\nconst data = [\n  { label: \"Production\", value: 4000, category: \"Gizmos\" },\n  { label: \"Marketing\", value: 2000, category: \"Gizmos\" },\n  { label: \"Finance\", value: 2000.5, category: \"Gizmos\" },\n\n  { label: \"Production\", value: 5000, category: \"Gadgets\" },\n  { label: \"Marketing\", value: 1000, category: \"Gadgets\" },\n  { label: \"Finance\", value: 3000, category: \"Gadgets\" },\n\n  { label: \"Production\", value: 6000, category: \"Widgets\" },\n  { label: \"Marketing\", value: 5000.9, category: \"Widgets\" },\n  { label: \"Finance\", value: 5000, category: \"Widgets\" },\n]\n\n<LineCategoryChart\n  labelOnYAxis={labelOnYAxis}\n  marks={data}\n/>\n```\n\n***\n\n## Use Cases\n\n`LineCategoryChart` is useful for:\n\n- Visualizing grouped comparisons across discrete stages\n- Showing category trends over consistent labels\n- Comparing multi-line metrics in business, finance, marketing, etc.\n","routePath":"/doc/Views/Charts/LineCategoryChart/","lang":"en","toc":[{"id":"example-scenario","text":"Example Scenario","depth":2,"charIndex":406},{"id":"usage","text":"Usage","depth":2,"charIndex":632},{"id":"props","text":"Props","depth":2,"charIndex":851},{"id":"labelonyaxis-boolean","text":"`labelOnYAxis?: boolean`","depth":3,"charIndex":861},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":1132},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1684},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2343}],"frontmatter":{},"version":"","description":"The LineCategoryChart component displays multiple line series categorized by a secondary key, allowing you to compare trends across distinct groups (categories) along a shared axis of discrete labels. It is ideal for grouped comparisons across labeled segments (e.g., departments, months, stages) and is especially useful for showing how each category's values evolve over the same set of labels."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { label: \"Production\", value: 4000, category: \"Gizmos\" },\n  { label: \"Production\", value: 5000, category: \"Gadgets\" },\n  { label: \"Production\", value: 6000, category: \"Widgets\" },\n  { label: \"Marketing\", value: 2000, category: \"Gizmos\" },\n  { label: \"Marketing\", value: 1000, category: \"Gadgets\" },\n  { label: \"Marketing\", value: 5000.9, category: \"Widgets\" },\n  { label: \"Finance\", value: 2000.5, category: \"Gizmos\" },\n  { label: \"Finance\", value: 3000, category: \"Gadgets\" },\n  { label: \"Finance\", value: 5000, category: \"Widgets\" },\n]\n\nfunction Example() {\n  const [labelOnYAxis, setLabelOnYAxis] = useState(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"LineCategoryChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section>\n        <Toggle\n          title={\"labelOnYAxis\"}\n          value={labelOnYAxis}\n          onChanged={setLabelOnYAxis}\n        />\n      </Section>\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <LineCategoryChart\n          labelOnYAxis={labelOnYAxis}\n          marks={data}\n        />\n      </Chart>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/LineCategoryChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"LineChart","content":"The `LineChart` component renders a single continuous line across discrete labeled points. It is useful for visualizing simple trends or progressions where each data point is mapped to a category or label.\n\nIt shares the same API as `BarChart` and is ideal for basic one-line comparisons over labeled axes.\n\n***\n\n## Example Scenario\n\nThis example visualizes the count of different toy shapes (`Cube`, `Sphere`, `Pyramid`) using a single line. The user can toggle between horizontal and vertical layouts using `labelOnYAxis`.\n\n***\n\n## Usage\n\n```tsx\n<Chart>\n  <LineChart\n    labelOnYAxis={false}\n    marks={[\n      { label: \"Cube\", value: 5 },\n      { label: \"Sphere\", value: 4 },\n      { label: \"Pyramid\", value: 4 },\n    ]}\n  />\n</Chart>\n```\n\n***\n\n## Props\n\n### `labelOnYAxis?: boolean`\n\n- When `true`, category labels are shown on the **Y-axis**, and the line is plotted **horizontally**.\n- When `false` (default), labels appear on the **X-axis**, and the line is plotted **vertically**.\n\n***\n\n### `marks: Array<object>` **(required)**\n\nEach item defines a point on the line:\n\n- `label: string | Date`\n  The axis label corresponding to the point (e.g., category, time, name).\n\n- `value: number`\n  The numeric value for this point.\n\n- Optional fields from `ChartMarkProps` can also be applied:\n\n  - `foregroundStyle`\n  - `symbol`\n  - `annotation`\n  - `cornerRadius`\n  - `opacity`, etc.\n\n***\n\n## Full Example\n\n```tsx\nconst toysData = [\n  { type: \"Cube\", count: 5 },\n  { type: \"Sphere\", count: 4 },\n  { type: \"Pyramid\", count: 4 },\n]\n\n<LineChart\n  marks={toysData.map(toy => ({\n    label: toy.type,\n    value: toy.count,\n  }))}\n/>\n```\n\n***\n\n## Use Cases\n\n`LineChart` is useful for:\n\n- Showing a basic trend or progression over a labeled axis\n- Comparing changes across a single dimension\n- Minimal visualizations with one continuous line\n","routePath":"/doc/Views/Charts/LineChart/","lang":"en","toc":[{"id":"example-scenario","text":"Example Scenario","depth":2,"charIndex":313},{"id":"usage","text":"Usage","depth":2,"charIndex":531},{"id":"props","text":"Props","depth":2,"charIndex":748},{"id":"labelonyaxis-boolean","text":"`labelOnYAxis?: boolean`","depth":3,"charIndex":758},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":995},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1392},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1639}],"frontmatter":{},"version":"","description":"The LineChart component renders a single continuous line across discrete labeled points. It is useful for visualizing simple trends or progressions where each data point is mapped to a category or label. It shares the same API as BarChart and is ideal for basic one-line comparisons over labeled axes."},{"title":"Example","content":"```tsx\n\n\ntype ToyShape = {\n  type: string\n  count: number\n}\n\nconst toysData: ToyShape[] = [\n  {\n    type: \"Cube\",\n    count: 5,\n  },\n  {\n    type: \"Sphere\",\n    count: 4,\n  },\n  {\n    type: \"Pyramid\",\n    count: 4\n  }\n]\n\nfunction Example() {\n  const [labelOnYAxis, setLabelOnYAxis] = useState(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"LineChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section>\n        <Toggle\n          title={\"labelOnYAxis\"}\n          value={labelOnYAxis}\n          onChanged={setLabelOnYAxis}\n        />\n      </Section>\n      <Chart>\n        <LineChart\n          labelOnYAxis={labelOnYAxis}\n          marks={toysData.map(toy => ({\n            label: toy.type,\n            value: toy.count,\n          }))}\n        />\n      </Chart>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/LineChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Multiple Charts Example","content":"This example demonstrates how to combine multiple chart types in a single chart context, dynamically display annotations based on user interaction, and customize appearance and interactivity using chart overlays.\n\n## Example Code\n\n```tsx\nconst data = [\n  { sales: 1200, year: '2020', growth: 0.14, },\n  { sales: 1400, year: '2021', growth: 0.16, },\n  { sales: 2000, year: '2022', growth: 0.42, },\n  { sales: 2500, year: '2023', growth: 0.25, },\n  { sales: 3600, year: '2024', growth: 0.44, },\n]\n\nfunction Example() {\n  const [chartSelection, setChartSelection] = useState<string | null>()\n  const selectedItem = useMemo(() => {\n    if (chartSelection == null) {\n      return null\n    }\n    return data.find(item => item.year === chartSelection)\n  }, [chartSelection])\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Multiple Charts\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Text>\n        Press and move on the chart to view the details.\n      </Text>\n      <Chart\n        frame={{\n          height: 300,\n        }}\n        chartXSelection={{\n          value: chartSelection,\n          onChanged: setChartSelection,\n          valueType: \"string\"\n        }}\n      >\n        <LineChart\n          marks={data.map(item => ({\n            label: item.year,\n            value: item.sales,\n            interpolationMethod: \"catmullRom\",\n            symbol: \"circle\",\n          }))}\n        />\n        <AreaChart\n          marks={data.map(item => ({\n            label: item.year,\n            value: item.sales,\n            interpolationMethod: \"catmullRom\",\n            foregroundStyle: [\"rgba(255,100,0,1)\", \"rgba(255,100,0,0.2)\"]\n          }))}\n        />\n        {selectedItem != null\n          ? <RuleLineForLabelChart\n            marks={[{\n              label: selectedItem.year,\n              foregroundStyle: { color: \"gray\", opacity: 0.5 },\n              annotation: {\n                position: \"top\",\n                overflowResolution: {\n                  x: \"fit\",\n                  y: \"disabled\"\n                },\n                content: <ZStack\n                  padding\n                  background={\n                    <RoundedRectangle\n                      cornerRadius={4}\n                      fill={\"regularMaterial\"}\n                    />\n                  }\n                >\n                  <Text\n                    foregroundStyle={\"white\"}\n                  >Sales: {selectedItem.sales}</Text>\n                </ZStack>\n              }\n            }]}\n          />\n          : null}\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n```\n\n## Overview\n\nThe example uses the following components together:\n\n- [`LineChart`](): Plots discrete points and connects them with curved lines.\n- [`AreaChart`](): Fills the area under a line graph, visually indicating magnitude.\n- [`RuleLineForLabelChart`](): Draws a reference line at the selected label and overlays a custom annotation.\n- `chartXSelection`: Enables user interaction by tracking X-axis selection.\n\n***\n\n## Data Format\n\nThe dataset used represents yearly sales performance:\n\n```ts\nconst data = [\n  { sales: 1200, year: '2020', growth: 0.14 },\n  { sales: 1400, year: '2021', growth: 0.16 },\n  { sales: 2000, year: '2022', growth: 0.42 },\n  { sales: 2500, year: '2023', growth: 0.25 },\n  { sales: 3600, year: '2024', growth: 0.44 },\n]\n```\n\nEach entry includes:\n\n- `sales`: Numeric value to be plotted\n- `year`: Used as the label on the X-axis\n- `growth`: Additional metric (not directly visualized here)\n\n***\n\n## Key Features\n\n### Chart Selection\n\n```tsx\nchartXSelection={{\n  value: chartSelection,\n  onChanged: setChartSelection,\n  valueType: \"string\"\n}}\n```\n\n- Enables users to tap or drag on the chart to select a point based on its label (`year`).\n- Triggers the `setChartSelection` callback to update the selected year.\n\n### LineChart\n\n```tsx\n<LineChart\n  marks={data.map(item => ({\n    label: item.year,\n    value: item.sales,\n    interpolationMethod: \"catmullRom\",\n    symbol: \"circle\",\n  }))}\n/>\n```\n\n- Plots sales values with labeled X-axis.\n- Uses `\"catmullRom\"` for smooth curves between points.\n- Displays circular symbols for each point.\n\n### AreaChart\n\n```tsx\n<AreaChart\n  marks={data.map(item => ({\n    label: item.year,\n    value: item.sales,\n    interpolationMethod: \"catmullRom\",\n    foregroundStyle: [\"rgba(255,100,0,1)\", \"rgba(255,100,0,0.2)\"]\n  }))}\n/>\n```\n\n- Overlays a filled area beneath the line, enhancing visual weight.\n- Uses a two-stop gradient from solid to transparent orange.\n\n### RuleLineForLabelChart (Dynamic Annotation)\n\n```tsx\n<RuleLineForLabelChart\n  marks={[{\n    label: selectedItem.year,\n    foregroundStyle: { color: \"gray\", opacity: 0.5 },\n    annotation: {\n      position: \"top\",\n      overflowResolution: { x: \"fit\", y: \"disabled\" },\n      content: <ZStack\n        padding\n        background={<RoundedRectangle cornerRadius={4} fill={\"regularMaterial\"} />}\n      >\n        <Text foregroundStyle={\"white\"}>Sales: {selectedItem.sales}</Text>\n      </ZStack>\n    }\n  }]}\n/>\n```\n\n- Shows a vertical gray reference line at the selected year.\n- Displays a floating tooltip with the `sales` value in a styled background.\n- Uses `ZStack` and `RoundedRectangle` to build a custom annotation view.\n\n***\n\n## User Interaction Flow\n\n1. The user touches the chart.\n2. The closest label (`year`) is selected and passed to `chartSelection`.\n3. `selectedItem` is computed using `useMemo`.\n4. A rule line is rendered at the selected label.\n5. A floating annotation displays detailed data (e.g., `Sales: 2500`).\n\n***\n\n## Conclusion\n\nThis example demonstrates how to:\n\n- Combine multiple charts (`LineChart`, `AreaChart`, `RuleLineForLabelChart`) within a single `<Chart>` container.\n- Use `chartXSelection` to enable touch-based exploration.\n- Render contextual annotations that enhance data storytelling.\n- Apply modern styling using gradient fills, translucent overlays, and SwiftUI-inspired layout components.\n\nThis pattern is ideal for dashboards and interactive reports where data insight and responsiveness are key.\n","routePath":"/doc/Views/Charts/Multiple Charts Example/","lang":"en","toc":[{"id":"example-code","text":"Example Code","depth":2,"charIndex":214},{"id":"overview","text":"Overview","depth":2,"charIndex":2598},{"id":"data-format","text":"Data Format","depth":2,"charIndex":3019},{"id":"key-features","text":"Key Features","depth":2,"charIndex":3523},{"id":"chart-selection","text":"Chart Selection","depth":3,"charIndex":3540},{"id":"linechart","text":"LineChart","depth":3,"charIndex":3839},{"id":"areachart","text":"AreaChart","depth":3,"charIndex":4165},{"id":"rulelineforlabelchart-dynamic-annotation","text":"RuleLineForLabelChart (Dynamic Annotation)","depth":3,"charIndex":4522},{"id":"user-interaction-flow","text":"User Interaction Flow","depth":2,"charIndex":5252},{"id":"conclusion","text":"Conclusion","depth":2,"charIndex":5557}],"frontmatter":{},"version":"","description":"This example demonstrates how to combine multiple chart types in a single chart context, dynamically display annotations based on user interaction, and customize appearance and interactivity using chart overlays."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { sales: 1200, year: '2020', growth: 0.14, },\n  { sales: 1400, year: '2021', growth: 0.16, },\n  { sales: 2000, year: '2022', growth: 0.42, },\n  { sales: 2500, year: '2023', growth: 0.25, },\n  { sales: 3600, year: '2024', growth: 0.44, },\n]\n\nfunction Example() {\n  const [chartSelection, setChartSelection] = useState<string | null>()\n  const selectedItem = useMemo(() => {\n    if (chartSelection == null) {\n      return null\n    }\n    return data.find(item => item.year === chartSelection)\n  }, [chartSelection])\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Multiple Charts\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Text>\n        Press and move on the chart to view the details.\n      </Text>\n      <Chart\n        frame={{\n          height: 300,\n        }}\n        chartXSelection={{\n          value: chartSelection,\n          onChanged: setChartSelection,\n          valueType: \"string\"\n        }}\n      >\n        <LineChart\n          marks={data.map(item => ({\n            label: item.year,\n            value: item.sales,\n            interpolationMethod: \"catmullRom\",\n            symbol: \"circle\",\n          }))}\n        />\n        <AreaChart\n          marks={data.map(item => ({\n            label: item.year,\n            value: item.sales,\n            interpolationMethod: \"catmullRom\",\n            foregroundStyle: [\"rgba(255,100,0,1)\", \"rgba(255,100,0,0.2)\"]\n          }))}\n        />\n        {selectedItem != null\n          ? <RuleLineForLabelChart\n            marks={[{\n              label: selectedItem.year,\n              foregroundStyle: { color: \"gray\", opacity: 0.5 },\n              annotation: {\n                position: \"top\",\n                overflowResolution: {\n                  x: \"fit\",\n                  y: \"disabled\"\n                },\n                content: <ZStack\n                  padding\n                  background={\n                    <RoundedRectangle\n                      cornerRadius={4}\n                      fill={\"regularMaterial\"}\n                    />\n                  }\n                >\n                  <Text\n                    foregroundStyle={\"white\"}\n                  >Sales: {selectedItem.sales}</Text>\n                </ZStack>\n              }\n            }]}\n          />\n          : null}\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/Multiple Charts Example/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"PieChart","content":"The `PieChart` component displays part-to-whole relationships using circular slices. Each slice represents a category, and its angle is proportional to the numeric value it contributes to the total.\n\nThis chart is well-suited for visualizing distribution, market share, or proportions across categories.\n\n***\n\n## Usage Example\n\n```tsx\n<PieChart\n  marks={[\n    { category: \"Cachapa\", value: 9631 },\n    { category: \"Crêpe\", value: 6959 },\n    { category: \"Injera\", value: 4891 },\n    ...\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nDefines the segments (slices) of the pie chart.\n\nEach mark must include:\n\n- `category: string`\n  A label for the slice. It identifies the category the value belongs to.\n\n- `value: number`\n  The numeric value used to determine the slice’s angle. All values are summed and each slice’s angle is proportional to its fraction of the total.\n\n- Inherits additional properties from `ChartMarkProps` for styling:\n\n  - `foregroundStyle` – set color per category\n  - `annotation` – attach labels or icons\n  - `opacity`, `cornerRadius`, `zIndex`, etc.\n\n***\n\n## Full Example\n\n```tsx\nconst data = [\n  { name: \"Cachapa\", sales: 9631 },\n  { name: \"Crêpe\", sales: 6959 },\n  { name: \"Injera\", sales: 4891 },\n  { name: \"Jian Bing\", sales: 2506 },\n  { name: \"American\", sales: 1777 },\n  { name: \"Dosa\", sales: 625 },\n]\n\n<PieChart\n  marks={data.map(item => ({\n    category: item.name,\n    value: item.sales\n  }))}\n/>\n```\n\n***\n\n## Use Cases\n\n`PieChart` is suitable for:\n\n- Displaying proportions across a fixed set of categories\n- Visualizing market share, vote distribution, or sales ratios\n- Representing totals broken down by labeled segments\n","routePath":"/doc/Views/Charts/PieChart/","lang":"en","toc":[{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":310},{"id":"props","text":"Props","depth":2,"charIndex":505},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":515},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1105},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1465}],"frontmatter":{},"version":"","description":"The PieChart component displays part-to-whole relationships using circular slices. Each slice represents a category, and its angle is proportional to the numeric value it contributes to the total. This chart is well-suited for visualizing distribution, market share, or proportions across categories."},{"title":"Example","content":"```tsx\n\n\nlet data = [\n  { name: \"Cachapa\", sales: 9631 },\n  { name: \"Crêpe\", sales: 6959 },\n  { name: \"Injera\", sales: 4891 },\n  { name: \"Jian Bing\", sales: 2506 },\n  { name: \"American\", sales: 1777 },\n  { name: \"Dosa\", sales: 625 },\n]\n\nfunction Example() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"PieChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <PieChart\n          marks={\n            data.map(item => ({\n              category: item.name,\n              value: item.sales,\n            }))\n          }\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/PieChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"PointCategoryChart","content":"The `PointCategoryChart` component displays categorized points on a 2D plane, allowing for flexible visual encoding using color, symbol type, or symbol size. It is ideal for representing multi-category scatter plots, surveys, or segmented data comparisons.\n\n***\n\n## Usage Example\n\n```tsx\n<PointCategoryChart\n  representsDataUsing=\"foregroundStyle\"\n  marks={[\n    { category: \"Apple\", x: 10, y: 42 },\n    { category: \"Apple\", x: 20, y: 37 },\n    { category: \"Orange\", x: 30, y: 62 },\n    ...\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nEach mark defines a data point on the chart and must include:\n\n- `x: number`\n  The value on the horizontal axis (e.g., age, time, score).\n\n- `y: number`\n  The value on the vertical axis (e.g., quantity, percentage).\n\n- `category: string`\n  A grouping key. Each category may be visually differentiated using color, symbol, or size.\n\n- Additional optional properties from `ChartMarkProps` can be used for further customization:\n\n  - `foregroundStyle`\n  - `symbol`\n  - `symbolSize`\n  - `annotation`\n  - `opacity`, etc.\n\n***\n\n### `representsDataUsing?: \"foregroundStyle\" | \"symbol\" | \"symbolSize\"`\n\nControls how the chart visually distinguishes different categories:\n\n- `\"foregroundStyle\"` – uses different colors per category.\n- `\"symbol\"` – uses different shapes (e.g., circles, squares) per category.\n- `\"symbolSize\"` – varies the size of symbols based on the category (or data magnitude).\n\n> This is an alternative to setting `foregroundStyleBy`, `symbolBy`, or `symbolSizeBy` manually.\n\n***\n\n## Full Example\n\n```tsx\nconst favoriteFruitsData = [\n  { fruit: \"Apple\", age: 10, count: 42 },\n  { fruit: \"Apple\", age: 20, count: 37 },\n  ...\n]\n\n<PointCategoryChart\n  representsDataUsing=\"symbol\"\n  marks={favoriteFruitsData.map(item => ({\n    category: item.fruit,\n    x: item.age,\n    y: item.count,\n  }))}\n/>\n```\n\nYou can dynamically switch how data is represented using a `<Picker>` and bind it to the `representsDataUsing` prop.\n\n***\n\n## Use Cases\n\n`PointCategoryChart` is suitable for:\n\n- Comparing multiple categories over time or value ranges\n- Visualizing multivariate distributions\n- Highlighting categorical distinctions within scatter plots\n","routePath":"/doc/Views/Charts/PointCategoryChart/","lang":"en","toc":[{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":263},{"id":"props","text":"Props","depth":2,"charIndex":509},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":519},{"id":"representsdatausing-foregroundstyle--symbol--symbolsize","text":"`representsDataUsing?: \"foregroundStyle\" | \"symbol\" | \"symbolSize\"`","depth":3,"charIndex":1084},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1555},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1995}],"frontmatter":{},"version":"","description":"The PointCategoryChart component displays categorized points on a 2D plane, allowing for flexible visual encoding using color, symbol type, or symbol size. It is ideal for representing multi-category scatter plots, surveys, or segmented data comparisons."},{"title":"Example","content":"```tsx\n\n\nconst favoriteFruitsData = [\n  { fruit: 'Apple', age: 10, count: 42 },\n  { fruit: 'Apple', age: 20, count: 37 },\n  { fruit: 'Apple', age: 30, count: 11 },\n\n  { fruit: 'Bananer', age: 10, count: 23 },\n  { fruit: 'Bananer', age: 20, count: 58 },\n  { fruit: 'Bananer', age: 30, count: 79 },\n\n  { fruit: 'Orange', age: 10, count: 36 },\n  { fruit: 'Orange', age: 20, count: 24 },\n  { fruit: 'Orange', age: 30, count: 62 },\n]\n\nfunction Example() {\n  const [representsDataUsing, setRepresentsDataUsing] = useState<string>('foregroundStyle')\n  const options: string[] = [\n    'foregroundStyle',\n    'symbol',\n    'symbolSize'\n  ]\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"PointCategoryChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Picker\n        title={\"representsDataUsing\"}\n        value={representsDataUsing}\n        onChanged={setRepresentsDataUsing}\n        pickerStyle={\"menu\"}\n      >\n        {options.map(option =>\n          <Text tag={option}>{option}</Text>\n        )}\n      </Picker>\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <PointCategoryChart\n          representsDataUsing={representsDataUsing as any}\n          marks={favoriteFruitsData.map(item => ({\n            category: item.fruit,\n            x: item.age,\n            y: item.count,\n          }))}\n        />\n      </Chart>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/PointCategoryChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"PointChart","content":"The `PointChart` component renders a basic 2D scatter plot, plotting individual points on an X-Y coordinate system. Each point is defined by a pair of numeric values and can be customized using standard mark styling properties.\n\nThis chart is ideal for visualizing correlations, distributions, or individual measurements across two continuous dimensions.\n\n***\n\n## Usage Example\n\n```tsx\n<PointChart\n  marks={[\n    { x: 0, y: 2 },\n    { x: 1, y: 3 },\n    { x: 2, y: 4 },\n    { x: 3, y: 3 },\n    { x: 4, y: 6 },\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nDefines the set of points to render. Each point must include:\n\n- `x: number`\n  The X-axis coordinate.\n\n- `y: number`\n  The Y-axis coordinate.\n\nYou may also use additional `ChartMarkProps` to customize the appearance of each point:\n\n- `symbol` – the shape of the plotted point (e.g., circle, square)\n- `foregroundStyle` – sets the color of the point\n- `symbolSize` – adjusts the size of each point\n- `opacity`, `annotation`, `offset`, `zIndex`, etc.\n\n***\n\n## Full Example\n\n```tsx\nconst data = [\n  { x: 0, y: 2 },\n  { x: 1, y: 3 },\n  { x: 2, y: 4 },\n  { x: 3, y: 3 },\n  { x: 4, y: 6 },\n]\n\n<PointChart marks={data} />\n```\n\nThe above example plots five points on a chart, creating a simple scatter plot.\n\n***\n\n## Use Cases\n\n`PointChart` is suitable for:\n\n- Plotting relationships between two continuous variables\n- Displaying experimental measurements, coordinates, or trends\n- Creating simple scatter plots with optional visual annotations\n","routePath":"/doc/Views/Charts/PointChart/","lang":"en","toc":[{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":361},{"id":"props","text":"Props","depth":2,"charIndex":527},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":537},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1035},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1286}],"frontmatter":{},"version":"","description":"The PointChart component renders a basic 2D scatter plot, plotting individual points on an X-Y coordinate system. Each point is defined by a pair of numeric values and can be customized using standard mark styling properties. This chart is ideal for visualizing correlations, distributions, or individual measurements across two continuous dimensions."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { x: 0, y: 2 },\n  { x: 1, y: 3 },\n  { x: 2, y: 4 },\n  { x: 3, y: 3 },\n  { x: 4, y: 6 },\n]\n\nfunction Example() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"PointChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        frame={{\n          height: 300\n        }}>\n        <PointChart\n          marks={data}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/PointChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"RangeAreaChart","content":"The `RangeAreaChart` component displays a shaded area between a range of values for each data point, typically between a `start` and `end` value. It is ideal for visualizing value intervals, such as temperature ranges, confidence intervals, or min/max ranges over time.\n\n***\n\n## Usage Example\n\n```tsx\n<RangeAreaChart\n  marks={[\n    { label: \"Jan\", start: 0, end: 4 },\n    { label: \"Feb\", start: 2, end: 6 },\n    ...\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nEach `mark` defines the area range for one category.\n\n- `label: string | Date`\n  The X-axis label (e.g., month, category name, time).\n\n- `start: number`\n  The lower boundary of the range.\n\n- `end: number`\n  The upper boundary of the range.\n\n- *(Optional)* properties from `ChartMarkProps`:\n\n  - `foregroundStyle` – fill color of the area\n  - `opacity`, `interpolationMethod`, `annotation`, etc.\n\n***\n\n### `interpolationMethod?: string`\n\nSpecifies how the area curve is drawn between points.\nFor example, `'catmullRom'` produces a smooth, curved shape between ranges.\n\n***\n\n## Full Example\n\n```tsx\nconst weatherData = [\n  { month: \"Jan\", min: 0, max: 4 },\n  { month: \"Feb\", min: 2, max: 6 },\n  ...\n]\n\n<RangeAreaChart\n  marks={weatherData.map(item => ({\n    label: item.month,\n    start: item.min,\n    end: item.max,\n    interpolationMethod: \"catmullRom\"\n  }))}\n/>\n```\n\nThis example plots monthly temperature ranges using a smooth interpolated area chart.\n\n***\n\n## Use Cases\n\n`RangeAreaChart` is well-suited for:\n\n- Temperature ranges over time\n- Visualizing confidence intervals in statistics\n- Min/max stock prices, performance bands, or uncertainty areas\n","routePath":"/doc/Views/Charts/RangeAreaChart/","lang":"en","toc":[{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":276},{"id":"props","text":"Props","depth":2,"charIndex":434},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":444},{"id":"interpolationmethod-string","text":"`interpolationMethod?: string`","depth":3,"charIndex":888},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1060},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1447}],"frontmatter":{},"version":"","description":"The RangeAreaChart component displays a shaded area between a range of values for each data point, typically between a start and end value. It is ideal for visualizing value intervals, such as temperature ranges, confidence intervals, or min/max ranges over time."},{"title":"Example","content":"```tsx\n\n\nconst weatherData = [\n  { month: 'Jan', min: 0, max: 4 },\n  { month: 'Feb', min: 2, max: 6 },\n  { month: 'Mar', min: 3, max: 8 },\n  { month: 'Apr', min: 5, max: 10 },\n  { month: 'May', min: 7, max: 14 },\n  { month: 'Jun', min: 10, max: 25 },\n  { month: 'Jul', min: 15, max: 30 },\n  { month: 'Aug', min: 20, max: 33 },\n  { month: 'Sep', min: 24, max: 35 },\n  { month: 'Oct', min: 18, max: 30 },\n  { month: 'Nov', min: 10, max: 23 },\n  { month: 'Dec', min: 5, max: 10 },\n]\n\nfunction Example() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"RangeAreaChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <RangeAreaChart\n          marks={weatherData.map(item => ({\n            label: item.month,\n            start: item.min,\n            end: item.max,\n            interpolationMethod: 'catmullRom'\n          }))}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/RangeAreaChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"RectAreaChart","content":"The `RectAreaChart` component renders rectangular areas over a 2D chart coordinate space. It is useful for highlighting regions, data clusters, or ranges of interest on a chart. You can combine it with other charts like `PointChart` for layered visualizations.\n\n***\n\n## Usage Example\n\n```tsx\n<RectAreaChart\n  marks={[\n    { xStart: 2.5, xEnd: 3.5, yStart: 4.5, yEnd: 5.5 },\n    { xStart: 1.0, xEnd: 2.0, yStart: 1.0, yEnd: 2.0 },\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `marks: Array<object>` **(required)**\n\nEach `mark` defines a rectangular area with the following fields:\n\n- `xStart: number`\n  The starting X-axis value of the rectangle.\n\n- `xEnd: number`\n  The ending X-axis value of the rectangle.\n\n- `yStart: number`\n  The starting Y-axis value of the rectangle.\n\n- `yEnd: number`\n  The ending Y-axis value of the rectangle.\n\n#### Optional from `ChartMarkProps`:\n\n- `opacity` – Controls the transparency of the rectangle.\n- `foregroundStyle` – Fill color or style of the rectangle.\n- `annotation` – Optional label or annotation on the mark.\n\n***\n\n## Full Example\n\n```tsx\nconst data = [\n  { x: 5, y: 5 },\n  { x: 2.5, y: 2.5 },\n  { x: 3, y: 3 },\n]\n\n<RectAreaChart\n  marks={data.map(item => ({\n    xStart: item.x - 0.25,\n    xEnd: item.x + 0.25,\n    yStart: item.y - 0.25,\n    yEnd: item.y + 0.25,\n    opacity: 0.2,\n  }))}\n/>\n\n<PointChart marks={data} />\n```\n\nThis example overlays transparent rectangles centered around each data point, providing a visual range or margin around them.\n\n***\n\n## Use Cases\n\n- Highlight clusters of points or zones on a scatter plot.\n- Visualize regions of interest or acceptable ranges.\n- Represent uncertainty or tolerance around data values.\n","routePath":"/doc/Views/Charts/RectAreaChart/","lang":"en","toc":[{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":267},{"id":"props","text":"Props","depth":2,"charIndex":448},{"id":"marks-arrayobject-required","text":"`marks: Array<object>` **(required)**","depth":3,"charIndex":458},{"id":"optional-from-chartmarkprops","text":"Optional from `ChartMarkProps`:","depth":4,"charIndex":824},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1045},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1487}],"frontmatter":{},"version":"","description":"The RectAreaChart component renders rectangular areas over a 2D chart coordinate space. It is useful for highlighting regions, data clusters, or ranges of interest on a chart. You can combine it with other charts like PointChart for layered visualizations."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { x: 5, y: 5 },\n  { x: 2.5, y: 2.5 },\n  { x: 3, y: 3 },\n]\n\nfunction Example() {\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"RectAreaChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <RectAreaChart\n          marks={\n            data.map(item => ({\n              xStart: item.x - 0.25,\n              xEnd: item.x + 0.25,\n              yStart: item.y - 0.25,\n              yEnd: item.y + 0.25,\n              opacity: 0.2,\n            }))\n          }\n        />\n\n        <PointChart\n          marks={data}\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/RectAreaChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"RectChart","content":"The `RectChart` component renders a bar-like rectangular chart that visualizes value-based data associated with labels. It is similar in usage to `BarChart` and uses the same `BarChartProps` interface.\n\n***\n\n## Example\n\n```tsx\n<RectChart\n  labelOnYAxis={false}\n  marks={[\n    { label: \"Cube\", value: 5 },\n    { label: \"Sphere\", value: 4 },\n    { label: \"Pyramid\", value: 4 },\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `labelOnYAxis` (optional)\n\n- **Type:** `boolean`\n- **Default:** `false`\n- **Description:**\n  If `true`, the labels will appear along the Y-axis and the chart will display as horizontal bars. If `false`, labels are on the X-axis with vertical bars.\n\n***\n\n### `marks` (required)\n\n- **Type:** `Array<{ label: string | Date; value: number; unit?: CalendarComponent } & ChartMarkProps>`\n- **Description:**\n  Defines each data point to render as a rectangle in the chart.\n\n#### `mark` object fields:\n\n- `label`: The category label shown on the axis (e.g., “Cube”).\n- `value`: The numeric value determining the height or width of the rectangle.\n- `unit`: *(Optional)* A calendar unit used for time-based data.\n\nYou may also use optional visual properties inherited from `ChartMarkProps`, such as:\n\n- `foregroundStyle`\n- `cornerRadius`\n- `annotation`\n- `opacity`\n\n***\n\n## Full Example\n\n```tsx\nconst toysData = [\n  { type: \"Cube\", count: 5 },\n  { type: \"Sphere\", count: 4 },\n  { type: \"Pyramid\", count: 4 },\n]\n\n<RectChart\n  labelOnYAxis={true}\n  marks={toysData.map(toy => ({\n    label: toy.type,\n    value: toy.count,\n  }))}\n/>\n```\n\n***\n\n## Use Cases\n\n- Comparing categorical quantities visually.\n- Displaying metrics in dashboards or reports.\n- Alternative to traditional bar charts with customizable rendering.\n","routePath":"/doc/Views/Charts/RectChart/","lang":"en","toc":[{"id":"example","text":"Example","depth":2,"charIndex":208},{"id":"props","text":"Props","depth":2,"charIndex":394},{"id":"labelonyaxis-optional","text":"`labelOnYAxis` (optional)","depth":3,"charIndex":404},{"id":"marks-required","text":"`marks` (required)","depth":3,"charIndex":662},{"id":"mark-object-fields","text":"`mark` object fields:","depth":4,"charIndex":875},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1269},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1538}],"frontmatter":{},"version":"","description":"The RectChart component renders a bar-like rectangular chart that visualizes value-based data associated with labels. It is similar in usage to BarChart and uses the same BarChartProps interface."},{"title":"Example","content":"```tsx\n\n\ntype ToyShape = {\n  type: string\n  count: number\n}\n\nconst toysData: ToyShape[] = [\n  {\n    type: \"Cube\",\n    count: 5,\n  },\n  {\n    type: \"Sphere\",\n    count: 4,\n  },\n  {\n    type: \"Pyramid\",\n    count: 4\n  }\n]\n\nfunction Example() {\n  const [labelOnYAxis, setLabelOnYAxis] = useState(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"RectChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section>\n        <Toggle\n          title={\"labelOnYAxis\"}\n          value={labelOnYAxis}\n          onChanged={setLabelOnYAxis}\n        />\n      </Section>\n      <Chart>\n        <RectChart\n          labelOnYAxis={labelOnYAxis}\n          marks={toysData.map(toy => ({\n            label: toy.type,\n            value: toy.count,\n          }))}\n        />\n      </Chart>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/RectChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"RuleChart","content":"# `RuleChart`\n\nThe `RuleChart` component displays a range or duration for each labeled item as a horizontal or vertical rule. It is suitable for visualizing time spans, data ranges, or active periods across categories.\n\n***\n\n## Example\n\n```tsx\n<RuleChart\n  labelOnYAxis\n  marks={[\n    { label: \"Trees\", start: 1, end: 10 },\n    { label: \"Grass\", start: 3, end: 11 },\n    { label: \"Weeds\", start: 4, end: 12 },\n  ]}\n/>\n```\n\n***\n\n## Props\n\n### `labelOnYAxis` (optional)\n\n- **Type:** `boolean`\n- **Default:** `false`\n- **Description:**\n  When set to `true`, the chart switches to horizontal mode and displays category labels along the Y-axis. Otherwise, labels appear on the X-axis with vertical rules.\n\n***\n\n### `marks` (required)\n\n- **Type:**\n\n  ```ts\n  Array<{\n    label: string | Date;\n    start: number;\n    end: number;\n    unit?: CalendarComponent;\n  } & ChartMarkProps>\n  ```\n- **Description:**\n  Defines the rules (lines or spans) to be drawn on the chart.\n\n#### Each mark includes:\n\n- `label`: The category label or time unit (e.g., `\"Trees\"` or a `Date`).\n- `start`: The numeric starting value of the rule.\n- `end`: The numeric ending value of the rule.\n- `unit`: *(optional)* The time unit, useful when the chart represents calendar-based data (e.g., `.month`, `.day`).\n\nAdditional `ChartMarkProps` can be applied to customize visual styling:\n\n- `foregroundStyle` — Controls color or style\n- `annotation` — Adds annotation labels\n- `opacity` — Adjusts transparency\n\n***\n\n## Full Example\n\n```tsx\nconst data = [\n  { startMonth: 1, numMonths: 9, source: \"Trees\" },\n  { startMonth: 12, numMonths: 1, source: \"Trees\" },\n  { startMonth: 3, numMonths: 8, source: \"Grass\" },\n  { startMonth: 4, numMonths: 8, source: \"Weeds\" },\n]\n\n<RuleChart\n  labelOnYAxis\n  marks={data.map(item => ({\n    start: item.startMonth,\n    end: item.startMonth + item.numMonths,\n    label: item.source,\n  }))}\n/>\n```\n\n***\n\n## Use Cases\n\n- Displaying periods of activity or growth (e.g., pollen seasons)\n- Showing task durations or project phases\n- Visualizing ranges in data for different categories\n","routePath":"/doc/Views/Charts/RuleChart/","lang":"en","toc":[{"id":"example","text":"Example","depth":2,"charIndex":225},{"id":"props","text":"Props","depth":2,"charIndex":428},{"id":"labelonyaxis-optional","text":"`labelOnYAxis` (optional)","depth":3,"charIndex":438},{"id":"marks-required","text":"`marks` (required)","depth":3,"charIndex":706},{"id":"each-mark-includes","text":"Each mark includes:","depth":4,"charIndex":964},{"id":"full-example","text":"Full Example","depth":2,"charIndex":1480},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1901}],"frontmatter":{},"version":"","description":"The RuleChart component displays a range or duration for each labeled item as a horizontal or vertical rule. It is suitable for visualizing time spans, data ranges, or active periods across categories."},{"title":"Example","content":"```tsx\n\n\nconst data = [\n  { startMonth: 1, numMonths: 9, source: \"Trees\" },\n  { startMonth: 12, numMonths: 1, source: \"Trees\" },\n  { startMonth: 3, numMonths: 8, source: \"Grass\" },\n  { startMonth: 4, numMonths: 8, source: \"Weeds\" },\n]\n\nfunction Example() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"RuleChart\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Chart\n        frame={{\n          height: 300\n        }}\n      >\n        <RuleChart\n          labelOnYAxis\n          marks={\n            data.map(item => ({\n              start: item.startMonth,\n              end: item.startMonth + item.numMonths,\n              label: item.source,\n            }))\n          }\n        />\n      </Chart>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Charts/RuleChart/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"RuleLineForLabelChart","content":"`RuleLineForLabelChart` overlays vertical or horizontal reference lines based on label (or date) positions in a chart. It is commonly used to highlight specific categories or time points in combination with other chart types, such as `BarChart` or `LineChart`.\n\n***\n\n## Declaration\n\n```ts\ndeclare const RuleLineForLabelChart: FunctionComponent<{\n  /**\n   * If specified as true, the chart will display labels on the Y-axis, causing rule lines to be drawn horizontally. Defaults to false (vertical lines).\n   */\n  labelOnYAxis?: boolean;\n\n  /**\n   * An array of rule marks, each specifying the label or date to draw a reference line at.\n   */\n  marks: Array<{\n    /**\n     * The label (string or Date) where the rule line should be placed.\n     */\n    label: string | Date;\n\n    /**\n     * Optional calendar component (e.g., 'month', 'day') if using a Date label.\n     */\n    unit?: CalendarComponent;\n  } & ChartMarkProps>;\n}>;\n```\n\n***\n\n## Properties\n\n| Property       | Type      | Description                                                                                         |\n| -------------- | --------- | --------------------------------------------------------------------------------------------------- |\n| `labelOnYAxis` | `boolean` | If `true`, rule lines are drawn **horizontally** using Y-axis label positions. Default is vertical. |\n| `marks`        | `Array`   | An array of labeled rule definitions. Each mark can include styling options from `ChartMarkProps`.  |\n\nEach item in `marks` can include:\n\n- `label`: The string or date at which to draw the rule.\n- `unit`: Optional, only relevant for date-based axes.\n- `foregroundStyle`: Optional. Controls the color.\n- `opacity`: Optional. Controls line transparency.\n- `lineStyle`: Optional. Allows custom dashing (e.g., `[3, 2]`).\n\n***\n\n## Example: Marking Categories in a Bar Chart\n\n```tsx\nimport {\n  Chart,\n  RuleLineForLabelChart,\n  BarChart,\n  Navigation,\n  NavigationStack,\n  Script,\n  VStack\n} from \"scripting\"\n\nconst data = [\n  { label: \"Q1\", value: 1500 },\n  { label: \"Q2\", value: 2300 },\n  { label: \"Q3\", value: 1800 },\n  { label: \"Q4\", value: 2700 },\n]\n\nconst referenceLines = [\n  { label: \"Q2\", foregroundStyle: \"blue\", lineStyle: { dash: [3, 2] } },\n  { label: \"Q4\", foregroundStyle: \"red\", opacity: 0.5 },\n]\n\nfunction Example() {\n  return (\n    <NavigationStack>\n      <VStack\n        navigationTitle=\"BarChart with Reference Lines\"\n        navigationBarTitleDisplayMode=\"inline\"\n      >\n        <Chart frame={{ height: 300 }}>\n          <BarChart marks={data} />\n          <RuleLineForLabelChart marks={referenceLines} />\n        </Chart>\n      </VStack>\n    </NavigationStack>\n  )\n}\n\nasync function run() {\n  await Navigation.present({ element: <Example /> })\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Use Cases\n\n- Highlight important events or milestones in a timeline.\n- Visually separate regions in a categorical chart.\n- Indicate thresholds or labels of significance.\n","routePath":"/doc/Views/Charts/RuleLineForLabelChart","lang":"en","toc":[{"id":"declaration","text":"Declaration","depth":2,"charIndex":267},{"id":"properties","text":"Properties","depth":2,"charIndex":938},{"id":"example-marking-categories-in-a-bar-chart","text":"Example: Marking Categories in a Bar Chart","depth":2,"charIndex":1806},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2779}],"frontmatter":{},"version":"","description":"RuleLineForLabelChart overlays vertical or horizontal reference lines based on label (or date) positions in a chart. It is commonly used to highlight specific categories or time points in combination with other chart types, such as BarChart or LineChart."},{"title":"RuleLineForValueChart","content":"The `RuleLineForValueChart` component is used to draw one or more horizontal or vertical reference lines on a chart, based on numeric values. This is useful for highlighting thresholds, targets, or reference levels in your data visualization.\n\n***\n\n## Usage Example\n\n```tsx\n<Chart>\n  <RuleLineForValueChart\n    marks={[\n      { value: 50 },\n      { value: 75, lineStyle: { dash: [2, 4] } },\n    ]}\n  />\n</Chart>\n```\n\nThis example renders two rule lines:\n\n- A solid line at value `50`\n- A dashed line at value `75`, with a dash pattern of 2-point dash and 4-point gap\n\n***\n\n## Props\n\n### `labelOnYAxis` (optional)\n\n- **Type:** `boolean`\n- **Default:** `false`\n- **Description:**\n  When set to `true`, the chart displays value labels on the **Y Axis**, and rule lines are rendered **vertically**.\n  When `false`, labels appear on the X Axis and lines are **horizontal**.\n\n***\n\n### `marks` (required)\n\n- **Type:**\n\n  ```ts\n  Array<{\n    value: number;\n  } & ChartMarkProps>\n  ```\n- **Description:**\n  Each item in the `marks` array defines a rule line at a specific `value`.\n\n#### `value`\n\n- The coordinate value at which the rule line should appear.\n\n#### `ChartMarkProps` (optional extensions)\n\nYou can also customize each line using standard chart mark properties:\n\n- `foregroundStyle`: Set color or gradient\n- `opacity`: Set line transparency\n- `lineStyle`: Customize the stroke pattern (e.g., dashed lines)\n\n***\n\n## Use Cases\n\n- Indicating statistical thresholds (e.g., average, median)\n- Highlighting min/max limits or control boundaries\n- Marking goals or performance targets\n\n***\n\n## Summary\n\n`RuleLineForValueChart` is a minimal yet powerful overlay chart component that enables enhanced readability and interpretation by visually marking important numerical values on your chart. It can be used alongside other chart types such as `BarChart`, `LineChart`, or `PointChart` to enrich data visualization.\n","routePath":"/doc/Views/Charts/RuleLineForValueChart","lang":"en","toc":[{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":249},{"id":"props","text":"Props","depth":2,"charIndex":573},{"id":"labelonyaxis-optional","text":"`labelOnYAxis` (optional)","depth":3,"charIndex":583},{"id":"marks-required","text":"`marks` (required)","depth":3,"charIndex":875},{"id":"value","text":"`value`","depth":4,"charIndex":1073},{"id":"chartmarkprops-optional-extensions","text":"`ChartMarkProps` (optional extensions)","depth":4,"charIndex":1149},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":1415},{"id":"summary","text":"Summary","depth":2,"charIndex":1586}],"frontmatter":{},"version":"","description":"The RuleLineForValueChart component is used to draw one or more horizontal or vertical reference lines on a chart, based on numeric values. This is useful for highlighting thresholds, targets, or reference levels in your data visualization."},{"title":"ConcentricRectangle","content":"`ConcentricRectangle` is a **concentric rectangle shape view** introduced in iOS 26+. It is designed to create rectangles with **progressively inset (concentric) corner geometry**, which adapts naturally to modern UI designs.\n\nIt is especially suitable for:\n\n- Glass-style buttons\n- Card backgrounds\n- Interactive clipping regions\n- Glass transition masks\n- Layered container UI\n\nIn Scripting, `ConcentricRectangle` can be used both as:\n\n- A **standalone Shape view**\n- A **specialized shape inside**:\n\n  - `clipShape`\n  - `background`\n  - `contentShape`\n\n***\n\n## 1. ConcentricRectangle Core Definition\n\n```ts\ntype ConcentricRectangleProps = ShapeProps & ConcentricRectangleShape\n\n/**\n * A concentric rectangle aligned inside the frame of the view containing it.\n * @available iOS 26+.\n */\ndeclare const ConcentricRectangle: FunctionComponent<ConcentricRectangleProps>\n```\n\n### Description\n\n- `ConcentricRectangle` is a standard **Shape component**\n- Supports:\n\n  - Fill\n  - Stroke\n  - Trimmed paths\n  - Advanced corner distribution via `ConcentricRectangleShape`\n- Always renders **inside the parent view’s frame**\n- Available on **iOS 26 and later only**\n\n***\n\n## 2. Corner Style System: EdgeCornerStyle\n\nThe core visual behavior of `ConcentricRectangle` is controlled through `EdgeCornerStyle`, which defines how each corner behaves.\n\n```ts\ntype EdgeCornerStyle =\n  | {\n      style: \"fixed\"\n      radius: number\n    }\n  | {\n      style: \"concentric\"\n      minimum: number\n    }\n  | \"concentric\"\n```\n\n***\n\n### 2.1 Fixed Corner Style\n\n```ts\n{\n  style: \"fixed\"\n  radius: number\n}\n```\n\nUsed to create traditional fixed-radius rounded corners.\n\n| Property | Description                   |\n| -------- | ----------------------------- |\n| `radius` | Fixed corner radius in points |\n\nThis mode is appropriate for classic static cards and buttons.\n\n***\n\n### 2.2 Concentric Corner Style\n\n```ts\n{\n  style: \"concentric\"\n  minimum: number\n}\n```\n\nCreates a dynamically inset **concentric corner effect**.\n\n| Property  | Description                                                                |\n| --------- | -------------------------------------------------------------------------- |\n| `minimum` | The minimum inner corner radius used as the base for automatic progression |\n\nRecommended for:\n\n- Glass-style controls\n- Dynamic cards\n- Layered UI surfaces\n- Animated masking effects\n\n***\n\n### 2.3 Shorthand Mode\n\n```ts\n\"concentric\"\n```\n\nEquivalent to:\n\n```ts\n{\n  style: \"concentric\"\n  minimum: systemDefault\n}\n```\n\n***\n\n## 3. ConcentricRectangleShape (Corner Distribution Rules)\n\n`ConcentricRectangleShape` defines **how corner styles are distributed** across all four corners.\nIt supports **seven structural configuration patterns**.\n\n***\n\n### 3.1 Uniform Corners (Most Common)\n\n```ts\n{\n  corners: EdgeCornerStyle\n  isUniform?: boolean\n}\n```\n\n| Property    | Description                                  |\n| ----------- | -------------------------------------------- |\n| `corners`   | Corner style applied to all four corners     |\n| `isUniform` | Forces strict uniformity, default is `false` |\n\nExample:\n\n```tsx\n<ConcentricRectangle\n  corners={{\n    style: \"concentric\",\n    minimum: 8\n  }}\n  fill=\"red\"\n/>\n```\n\n***\n\n### 3.2 Fully Independent Corners\n\n```ts\n{\n  topLeadingCorner?: EdgeCornerStyle\n  topTrailingCorner?: EdgeCornerStyle\n  bottomLeadingCorner?: EdgeCornerStyle\n  bottomTrailingCorner?: EdgeCornerStyle\n}\n```\n\nUsed for:\n\n- Asymmetric cards\n- Special edge treatments\n- Adaptive container layouts\n\n***\n\n### 3.3 Uniform Bottom Corners\n\n```ts\n{\n  uniformBottomCorners?: EdgeCornerStyle\n  topLeadingCorner?: EdgeCornerStyle\n  topTrailingCorner?: EdgeCornerStyle\n}\n```\n\nTypical for bottom sheets and lifted panels.\n\n***\n\n### 3.4 Uniform Top Corners\n\n```ts\n{\n  uniformTopCorners?: EdgeCornerStyle\n  bottomLeadingCorner?: EdgeCornerStyle\n  bottomTrailingCorner?: EdgeCornerStyle\n}\n```\n\nTypical for modal headers and floating top panels.\n\n***\n\n### 3.5 Uniform Top and Bottom\n\n```ts\n{\n  uniformTopCorners?: EdgeCornerStyle\n  uniformBottomCorners?: EdgeCornerStyle\n}\n```\n\n***\n\n### 3.6 Uniform Leading Corners\n\n```ts\n{\n  uniformLeadingCorners?: EdgeCornerStyle\n  topTrailingCorner?: EdgeCornerStyle\n  bottomTrailingCorner?: EdgeCornerStyle\n}\n```\n\n***\n\n### 3.7 Uniform Leading and Trailing\n\n```ts\n{\n  uniformLeadingCorners?: EdgeCornerStyle\n  uniformTrailingCorners?: EdgeCornerStyle\n}\n```\n\n***\n\n## 4. Shared Shape Properties (ShapeProps)\n\n```ts\ntype ShapeProps = {\n  trim?: {\n    from: number\n    to: number\n  }\n\n  fill?: ShapeStyle | DynamicShapeStyle\n\n  stroke?: ShapeStyle | DynamicShapeStyle | {\n    shapeStyle: ShapeStyle | DynamicShapeStyle\n    strokeStyle: StrokeStyle\n  }\n}\n```\n\n***\n\n### 4.1 trim (Path Trimming)\n\n```ts\ntrim={{\n  from: 0.0,\n  to: 0.5\n}}\n```\n\nUsed for:\n\n- Progressive path animations\n- Partial rendering effects\n- Stroke-only transitions\n\n***\n\n### 4.2 fill (Shape Fill)\n\n```ts\nfill=\"red\"\nfill=\"ultraThinMaterial\"\n```\n\nSupports:\n\n- Solid colors\n- System materials\n- Gradient styles\n\n***\n\n### 4.3 stroke (Outline Rendering)\n\n```ts\nstroke=\"blue\"\n\nstroke={{\n  shapeStyle: \"blue\",\n  strokeStyle: {\n    lineWidth: 2\n  }\n}}\n```\n\n***\n\n## 5. Using ConcentricRectangle in View Modifiers\n\n### 5.1 As clipShape\n\n```ts\nclipShape?: Shape | \"concentricRect\" | ({\n  type: \"concentricRect\"\n} & ConcentricRectangleShape)\n```\n\nExample:\n\n```tsx\n<VStack\n  clipShape={{\n    type: \"concentricRect\",\n    corners: {\n      style: \"concentric\",\n      minimum: 10\n    }\n  }}\n/>\n```\n\nUsed for:\n\n- Actual visual clipping\n- Glass transition masking\n- Blur boundary control\n\n***\n\n### 5.2 As background\n\n```ts\nbackground?: ShapeStyle | DynamicShapeStyle | {\n  style: ShapeStyle | DynamicShapeStyle\n  shape: Shape | \"concentricRect\" | ({\n    type: \"concentricRect\"\n  } & ConcentricRectangleShape)\n} | VirtualNode | {\n  content: VirtualNode\n  alignment: Alignment\n}\n```\n\nExample:\n\n```tsx\n<VStack\n  background={{\n    style: \"ultraThinMaterial\",\n    shape: {\n      type: \"concentricRect\",\n      corners: \"concentric\"\n    }\n  }}\n/>\n```\n\n***\n\n### 5.3 As contentShape (Hit Testing Area)\n\n```ts\ncontentShape?: Shape | {\n  kind: ContentShapeKinds\n  shape: Shape | \"concentricRect\" | ({\n    type: \"concentricRect\"\n  } & ConcentricRectangleShape)\n}\n```\n\nDefines the interactive region for:\n\n- Taps\n- Gestures\n- Hover detection\n- Drag operations\n\n***\n\n## 6. Full Example Breakdown\n\n```tsx\n<ZStack\n  frame={{\n    width: 300,\n    height: 200\n  }}\n  containerShape={{\n    type: \"rect\",\n    cornerRadius: 32\n  }}\n>\n  <ConcentricRectangle\n    corners={{\n      style: \"concentric\",\n      minimum: 8\n    }}\n    fill=\"red\"\n  />\n</ZStack>\n```\n\nThis configuration produces:\n\n- A fixed-radius outer container\n- A concentric inner rectangle\n- A layered depth effect between the two shapes\n- A visually emphasized inner hierarchy via red fill\n\n***\n\n## 7. Design and Implementation Notes\n\n1. `minimum` should never exceed half of the smallest side of the container.\n2. Concentric corner styles work best when combined with:\n\n   - Glass material\n   - Blur\n   - Opacity layering\n3. When used as `contentShape`, it only affects hit-testing, not rendering.\n4. When used as `clipShape`, it physically clips the rendered content.\n5. Nested `ConcentricRectangle` layers create stronger depth cues than uniform rounded rectangles.\n","routePath":"/doc/Views/ConcentricRectangle","lang":"en","toc":[{"id":"1-concentricrectangle-core-definition","text":"1. ConcentricRectangle Core Definition","depth":2,"charIndex":561},{"id":"description","text":"Description","depth":3,"charIndex":874},{"id":"2-corner-style-system-edgecornerstyle","text":"2. Corner Style System: EdgeCornerStyle","depth":2,"charIndex":1163},{"id":"21-fixed-corner-style","text":"2.1 Fixed Corner Style","depth":3,"charIndex":1508},{"id":"22-concentric-corner-style","text":"2.2 Concentric Corner Style","depth":3,"charIndex":1848},{"id":"23-shorthand-mode","text":"2.3 Shorthand Mode","depth":3,"charIndex":2381},{"id":"3-concentricrectangleshape-corner-distribution-rules","text":"3. ConcentricRectangleShape (Corner Distribution Rules)","depth":2,"charIndex":2512},{"id":"31-uniform-corners-most-common","text":"3.1 Uniform Corners (Most Common)","depth":3,"charIndex":2733},{"id":"32-fully-independent-corners","text":"3.2 Fully Independent Corners","depth":3,"charIndex":3211},{"id":"33-uniform-bottom-corners","text":"3.3 Uniform Bottom Corners","depth":3,"charIndex":3508},{"id":"34-uniform-top-corners","text":"3.4 Uniform Top Corners","depth":3,"charIndex":3722},{"id":"35-uniform-top-and-bottom","text":"3.5 Uniform Top and Bottom","depth":3,"charIndex":3942},{"id":"36-uniform-leading-corners","text":"3.6 Uniform Leading Corners","depth":3,"charIndex":4073},{"id":"37-uniform-leading-and-trailing","text":"3.7 Uniform Leading and Trailing","depth":3,"charIndex":4247},{"id":"4-shared-shape-properties-shapeprops","text":"4. Shared Shape Properties (ShapeProps)","depth":2,"charIndex":4390},{"id":"41-trim-path-trimming","text":"4.1 trim (Path Trimming)","depth":3,"charIndex":4687},{"id":"42-fill-shape-fill","text":"4.2 fill (Shape Fill)","depth":3,"charIndex":4863},{"id":"43-stroke-outline-rendering","text":"4.3 stroke (Outline Rendering)","depth":3,"charIndex":5006},{"id":"5-using-concentricrectangle-in-view-modifiers","text":"5. Using ConcentricRectangle in View Modifiers","depth":2,"charIndex":5146},{"id":"51-as-clipshape","text":"5.1 As clipShape","depth":3,"charIndex":5197},{"id":"52-as-background","text":"5.2 As background","depth":3,"charIndex":5567},{"id":"53-as-contentshape-hit-testing-area","text":"5.3 As contentShape (Hit Testing Area)","depth":3,"charIndex":6023},{"id":"6-full-example-breakdown","text":"6. Full Example Breakdown","depth":2,"charIndex":6326},{"id":"7-design-and-implementation-notes","text":"7. Design and Implementation Notes","depth":2,"charIndex":6810}],"frontmatter":{},"version":"","description":"ConcentricRectangle is a concentric rectangle shape view introduced in iOS 26+. It is designed to create rectangles with progressively inset (concentric) corner geometry, which adapts naturally to modern UI designs. It is especially suitable for: Glass-style buttonsCard backgroundsInteractive clipping regionsGlass transition masksLayered container UI In Scripting, ConcentricRectangle can be used both as: A standalone Shape viewA specialized shape inside:clipShapebackgroundcontentShape"},{"title":"ColorPicker","content":"The `ColorPicker` component provides a system color picker UI that allows users to select a color and passes the selected color back to the application via the `onChanged` event. It supports the following formats for colors:\n\n- Keyword colors (e.g., `green`, `red`, `blue`, etc.)\n- Hexadecimal color strings (e.g., `#FF5733` or `#333`)\n- CSS rgba strings (e.g., `rgba(255,0,0,1)`)\n\n***\n\n## `ColorPickerProps`\n\n`ColorPickerProps` is the type of properties for the `ColorPicker` component. It can be defined in the following two ways:\n\n### 1. Using the `title` property\n\n- **`title`** (`string`): Provides a title for the color picker, describing its purpose or offering guidance to the user.\n\n### 2. Using the `children` property\n\n- **`children`** (`VirtualNode | undefined | null | (VirtualNode | undefined | null)[]` | `VirtualNode`): A custom view that describes the usage of the selected color. The system color picker UI will use the text of this view to set the title. If you don't use `children`, you can simply use `title`.\n\n### Additional properties\n\n- **`value`** (`Color`): The current selected color value. It can be a keyword color, hexadecimal color string, or RGBA string.\n\n- **`onChanged`** (`(value: Color) => void`): A callback function triggered when the color changes. This callback is invoked with the new color value when the user selects a new color.\n\n- **`supportsOpacity`** (`boolean`, optional): If set to `true`, allows the user to adjust the opacity of the selected color. The default is `true`.\n\n***\n\n### Example Code\n\n```tsx\n\n\n\nconst MyComponent = () => {\n  const [color, setColor] = useState<Color>('#FF5733')\n\n  return (\n    <ColorPicker\n      title=\"Pick a Color\"\n      value={color}\n      onChanged={setColor}\n    />\n  )\n}\n```\n\n### Explanation\n\nIn the example above:\n\n- The `ColorPicker` component’s `title` is set to `\"Pick a Color\"`, instructing the user to choose a color.\n- The initial color value is `#FF5733`.\n- The `onChanged` callback is triggered when the color changes, updating the `color` state.\n\n### Optional Opacity Support\n\nIf you wish to allow adjusting the opacity of the selected color, you can enable this feature by setting the `supportsOpacity` property:\n\n```tsx\n<ColorPicker\n  title=\"Pick a Color\"\n  value={color}\n  onChanged={setColor}\n  supportsOpacity={true}\n/>\n```\n\n## `Color` Type\n\nThe `Color` type is used to define various color formats, including:\n\n- **Keyword colors**: such as `\"red\"`, `\"green\"`, `\"blue\"`, etc.\n- **Hexadecimal strings**: such as `\"#FF5733\"`.\n- **CSS rgba strings**: such as `rgba(255, 0, 0, 0.5)`.\n\n### Example\n\n```tsx\nconst color: Color = 'rgba(255, 0, 0, 0.5)'\n```\n","routePath":"/doc/Views/Controls/ColorPicker/","lang":"en","toc":[{"id":"colorpickerprops","text":"`ColorPickerProps`","depth":2,"charIndex":387},{"id":"1-using-the-title-property","text":"1. Using the `title` property","depth":3,"charIndex":534},{"id":"2-using-the-children-property","text":"2. Using the `children` property","depth":3,"charIndex":692},{"id":"additional-properties","text":"Additional properties","depth":3,"charIndex":1032},{"id":"example-code","text":"Example Code","depth":3,"charIndex":1529},{"id":"explanation","text":"Explanation","depth":3,"charIndex":1761},{"id":"optional-opacity-support","text":"Optional Opacity Support","depth":3,"charIndex":2042},{"id":"color-type","text":"`Color` Type","depth":2,"charIndex":2325},{"id":"example","text":"Example","depth":3,"charIndex":1529}],"frontmatter":{},"version":"","description":"The ColorPicker component provides a system color picker UI that allows users to select a color and passes the selected color back to the application via the onChanged event. It supports the following formats for colors: Keyword colors (e.g., green, red, blue, etc.)Hexadecimal color strings (e.g., #FF5733 or #333)CSS rgba strings (e.g., rgba(255,0,0,1))"},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [value, setValue] = useState<Color>('blue')\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Color Picker\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <ColorPicker\n        value={value}\n        onChanged={setValue}\n      >\n        <Text>Current color: {value}</Text>\n      </ColorPicker>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Controls/ColorPicker/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"ContentUnavailableView","content":"`ContentUnavailableView` is a UI component designed to present a view when the content in your app is unavailable. It typically shows a title, an optional description, and an action area, making it clear to users that content is missing or not yet available. This component can be used in places like lists, where no data is available to show to the user.\n\n## Props\n\n### Common Properties\n\nYou can pass one of two structures of properties to the `ContentUnavailableView` component:\n\n1. **String-based Props:**\n   - `title` (string): The main title to display, typically describing the content that is unavailable.\n   - `systemImage` (string): A system icon to visually represent the unavailable content. This is used to enhance the UI and provide an intuitive, recognizable symbol.\n   - `description` (string, optional): A brief text description of the unavailable content. This is optional and can be omitted if not needed.\n\n2. **VirtualNode-based Props:**\n   - `label` (VirtualNode): A virtual node, typically a `Text` or any other UI component, that will serve as the label describing the unavailable content.\n   - `description` (VirtualNode | null, optional): A virtual node, usually a `Text` component, that provides more detailed information about the unavailable content. If you don't need a description, this can be set to `null`.\n   - `actions` (Array of VirtualNode | null, optional): An optional list of action buttons or links to display. These actions can be buttons, links, or other components, and they can be `null` if no actions are needed.\n\n## Example Usage\n\n### 1. Simple Usage with Strings\n\n```tsx\nfunction View({documents}: {documents: {name: string}[]}) {\n  return (\n    <NavigationStack>\n      <List\n        overlay={\n          documents.length > 0\n            ? undefined\n            : <ContentUnavailableView\n                title=\"No documents\"\n                systemImage=\"tray.fill\"\n              />\n        }\n      >\n        {documents.map(item => (\n          <Text>{item.name}</Text>\n        ))}\n      </List>\n    </NavigationStack>\n  )\n}\n```\n\nIn this example, `ContentUnavailableView` is used to show a message with an icon when the list of documents is empty. If the `documents` array is empty, the view will show the title \"No documents\" and a system icon `\"tray.fill\"`.\n\n### 2. Advanced Usage with VirtualNode\n\n```tsx\nfunction View({documents}: {documents: {name: string}[]}) {\n  return (\n    <NavigationStack>\n      <List\n        overlay={\n          documents.length > 0\n            ? undefined\n            : <ContentUnavailableView\n                label={<Text>No documents available</Text>}\n                description={<Text>Please check back later for available documents.</Text>}\n                actions={[<Button onClick={handleRefresh}>Refresh</Button>]}\n              />\n        }\n      >\n        {documents.map(item => (\n          <Text>{item.name}</Text>\n        ))}\n      </List>\n    </NavigationStack>\n  )\n}\n```\n\nIn this example, the `ContentUnavailableView` is passed virtual nodes for the label and description. It also includes an action button to refresh the list of documents.\n\n## Notes\n\n- You can choose to use either the string-based or virtual node-based properties depending on how dynamic you want the content of the unavailable view to be.\n- The component is flexible and can be integrated into lists, stacks, and other complex layouts.\n\n## API Details\n\n- **`title`** and **`systemImage`**: Provide a simple, static way to show unavailable content with a string title and system icon.\n- **`label`** and **`description`**: Allow you to customize the label and description with full control, using `VirtualNode` components.\n- **`actions`**: Optional actions can be added to guide users, like buttons or links, that perform actions like refreshing content or redirecting users to another screen.\n\nThis component is ideal for UIs where content might be temporarily unavailable and you want to display a consistent and clear message to users.\n","routePath":"/doc/Views/Controls/ContentUnavailableView/","lang":"en","toc":[{"id":"props","text":"Props","depth":2,"charIndex":357},{"id":"common-properties","text":"Common Properties","depth":3,"charIndex":367},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":1559},{"id":"1-simple-usage-with-strings","text":"1. Simple Usage with Strings","depth":3,"charIndex":1577},{"id":"2-advanced-usage-with-virtualnode","text":"2. Advanced Usage with VirtualNode","depth":3,"charIndex":2305},{"id":"notes","text":"Notes","depth":2,"charIndex":3130},{"id":"api-details","text":"API Details","depth":2,"charIndex":3396}],"frontmatter":{},"version":"","description":"ContentUnavailableView is a UI component designed to present a view when the content in your app is unavailable. It typically shows a title, an optional description, and an action area, making it clear to users that content is missing or not yet available. This component can be used in places like lists, where no data is available to show to the user."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [list, setList] = useState<string[]>([])\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"ContentUnavailableView\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      overlay={\n        list.length ? undefined\n          : <ContentUnavailableView\n            title=\"No data\"\n            systemImage=\"tray.fill\"\n          />\n      }\n      toolbar={{\n        bottomBar: [\n          <Button\n            title=\"Add\"\n            action={() => {\n              setList(list => {\n                let newList = [\n                  (Math.random() * 1000 | 0).toString(),\n\n                  ...list\n                ]\n                return newList\n              })\n            }}\n          />,\n          <Button\n            title=\"Clear\"\n            action={() => {\n              setList([])\n            }}\n          />\n        ]\n      }}\n    >\n      {list.map(name => <Text>{name}</Text>)}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Controls/ContentUnavailableView/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"DatePicker","content":"The `DatePicker` is a UI component for selecting a date (and optionally a time). It supports various interactive display styles, such as calendar views, wheel selectors, and compact text formats. This component is ideal for scenarios where users need to select a specific date and time, such as choosing an event start date or a task deadline.\n\n## Props\n\n### `DatePickerProps` Type\n\n- **`title`** (required): `string`\n\n  The title of the date picker, typically used to describe the purpose of the selection, such as \"Select Date.\"\n\n- **`children`** (optional): `(VirtualNode | undefined | null | (VirtualNode | undefined | null)[])[] | VirtualNode`\n\n  Used for rendering custom child content. If no custom content is required, this property can be omitted.\n\n- **`value`** (required): `number`\n\n  The timestamp (in milliseconds) representing the currently selected date. This value is passed to the `onChanged` handler.\n\n- **`onChanged`** (required): `(value: number) => void`\n\n  A callback function that is called when the date value changes. The argument is the new timestamp.\n\n- **`startDate`** (optional): `number`\n\n  The starting date for selectable dates. The user can only select dates greater than or equal to this value.\n\n- **`endDate`** (optional): `number`\n\n  The ending date for selectable dates. The user can only select dates less than or equal to this value.\n\n- **`displayedComponents`** (optional): `DatePickerComponents[]`\n\n  An optional array specifying the date components the user can view and edit. The default value is `['hourAndMinute', 'date']`, which displays both the date and time (hour and minute). If you need to show seconds (only available on watchOS), you can use `['hourMinuteAndSecond']`.\n\n### `DatePickerComponents` Type\n\nThis type defines the components that can be displayed in the date picker:\n\n- **`date`**: Displays the day, month, and year based on the locale.\n- **`hourAndMinute`**: Displays the hour and minute based on the locale.\n- **`hourMinuteAndSecond`**: Available only on watchOS. Displays the hour, minute, and second components based on the locale.\n\n### `DatePickerStyle` Type\n\nDefines the style of the `DatePicker` component. The following options are available:\n\n- **`automatic`**: The default style for the date picker, which automatically selects the most appropriate display format.\n- **`compact`**: A compact style that displays the components in a textual format.\n- **`graphical`**: A graphical style that shows an interactive calendar or clock.\n- **`wheel`**: A wheel style where each component is displayed as a scrollable column.\n- **`field`**: Available only on macOS. A field style that displays the components in an editable text field.\n- **`stepperField`**: Available only on macOS. A system style that displays the components in an editable field, with an adjoining stepper to increment or decrement the selected component.\n\n## Example Code\n\nHere’s an example of how to use the `DatePicker` component:\n\n```tsx\n<DatePicker\n  title=\"Select Date and Time\"\n  value={new Date().getTime()}\n  onChanged={(newDate) => console.log('New Date:', newDate)}\n  startDate={new Date('2024-01-01').getTime()}\n  endDate={new Date('2024-12-31').getTime()}\n  displayedComponents={['date', 'hourAndMinute']}\n  datePickerStyle=\"wheel\"\n/>\n```\n\n## Usage Notes\n\nThe `DatePicker` component allows you to control the displayed components via the `displayedComponents` prop. By default, it will show both the date and time (hour and minute), but you can customize which components to display according to your needs. For example, on watchOS devices, you can show the hour, minute, and second components.\n\nThe appearance and interaction style of the date picker can be further customized using the `datePickerStyle` prop. Different styles provide varying user experiences, and you can choose the one most suitable for your platform and use case.\n\n## Considerations\n\n- The `startDate` and `endDate` properties are used to limit the selectable date range, ensuring that users can only select valid dates.\n- The `displayedComponents` property can be adjusted according to your requirements. If you don't need time selection, you can opt to display only the date component.\n- The `DatePicker` supports different experiences on various platforms (e.g., `stepperField` is only available on macOS), so make sure to adjust the style options based on the platform.\n","routePath":"/doc/Views/Controls/DatePicker/","lang":"en","toc":[{"id":"props","text":"Props","depth":2,"charIndex":345},{"id":"datepickerprops-type","text":"`DatePickerProps` Type","depth":3,"charIndex":355},{"id":"datepickercomponents-type","text":"`DatePickerComponents` Type","depth":3,"charIndex":1723},{"id":"datepickerstyle-type","text":"`DatePickerStyle` Type","depth":3,"charIndex":2101},{"id":"example-code","text":"Example Code","depth":2,"charIndex":2891},{"id":"usage-notes","text":"Usage Notes","depth":2,"charIndex":3287},{"id":"considerations","text":"Considerations","depth":2,"charIndex":3884}],"frontmatter":{},"version":"","description":"The DatePicker is a UI component for selecting a date (and optionally a time). It supports various interactive display styles, such as calendar views, wheel selectors, and compact text formats. This component is ideal for scenarios where users need to select a specific date and time, such as choosing an event start date or a task deadline."},{"title":"Example","content":"```tsx\n\n\nconst oneDay = 1000 * 60 * 60 * 24\n\n function Example() {\n  const [date, setDate] = useState(() => Date.now())\n  const [startDateEnabled, setStartDateEnabled] = useState(false)\n  const [endDateEnabled, setEndDateEnabled] = useState(false)\n  const startDate = useMemo(() => Date.now() - oneDay * 7, [])\n  const endDate = useMemo(() => Date.now() + oneDay * 7, [])\n  const components = useMemo<DatePickerComponents[]>(() => [\n    'date',\n    'hourAndMinute'\n  ], [])\n  const [displayedComponents, setDisplayedComponents] = useState<DatePickerComponents[]>([\n    'date', 'hourAndMinute'\n  ])\n  const datePickerStyles = useMemo<DatePickerStyle[]>(() => [\n    'compact',\n    'graphical',\n    'wheel',\n  ], [])\n  const [selectedStyle, setSelectedStyle] = useState<DatePickerStyle>('graphical')\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"DatePicker\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section>\n        <Toggle\n          title={\"Use startDate\"}\n          value={startDateEnabled}\n          onChanged={setStartDateEnabled}\n        />\n\n        <Toggle\n          title={\"Use endDate\"}\n          value={endDateEnabled}\n          onChanged={setEndDateEnabled}\n        />\n        {components.map(name =>\n          <HStack\n            contentShape={'rect'}\n            onTapGesture={() => {\n              if (displayedComponents.includes(name)) {\n                if (displayedComponents.length > 1) {\n                  setDisplayedComponents(displayedComponents.filter(e => e !== name))\n                }\n              } else {\n                setDisplayedComponents([name, ...displayedComponents])\n              }\n            }}\n          >\n            <Text>Display: {name}</Text>\n            <Spacer />\n            {displayedComponents.includes(name)\n              ? <Image\n                systemName={\"checkmark\"}\n                foregroundStyle={\"systemBlue\"}\n              />\n              : undefined}\n          </HStack>\n        )}\n\n        <Picker\n          title={\"DatePicker Style\"}\n          value={selectedStyle}\n          onChanged={setSelectedStyle as any}\n          pickerStyle={'menu'}\n        >\n          {datePickerStyles.map(style =>\n            <Text tag={style}>{style}</Text>\n          )}\n        </Picker>\n      </Section>\n\n      <DatePicker\n        title={\"DatePicker\"}\n        value={date}\n        onChanged={setDate}\n        startDate={startDateEnabled ? startDate : undefined}\n        endDate={endDateEnabled ? endDate : undefined}\n        displayedComponents={displayedComponents}\n        datePickerStyle={selectedStyle}\n      />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Controls/DatePicker/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Gauge","content":"The `Gauge` component is a view used to display the current value in relation to a specified finite capacity, similar to a fuel gauge in an automobile. The `Gauge` component is highly configurable and can display any combination of the current value, the range the gauge can display, and a label describing the purpose of the gauge itself. It is suitable for showing the current value of a limited capacity, such as progress, level, or quantity.\n\n## Properties\n\n### `value` (Required)\n\n- **Type**: `number`\n- **Description**: The current value to display in the gauge. This value should be within the range defined by the `min` and `max` properties.\n\n### `label` (Required)\n\n- **Type**: `VirtualNode`\n- **Description**: A view element that describes the purpose of the gauge. For example, this could display descriptive text such as \"Battery Level\" or \"Temperature\".\n\n### `min` (Optional)\n\n- **Type**: `number`\n- **Description**: The minimum valid value of the gauge, defaulting to `0`. It represents the lower bound of the gauge.\n\n### `max` (Optional)\n\n- **Type**: `number`\n- **Description**: The maximum valid value of the gauge, defaulting to `1`. It represents the upper bound of the gauge.\n\n### `currentValueLabel` (Optional)\n\n- **Type**: `VirtualNode`\n- **Description**: A view element that describes the current value of the gauge. For example, it could show a text label displaying the current value (e.g., \"70%\").\n\n### `minValueLabel` (Optional)\n\n- **Type**: `VirtualNode`\n- **Description**: A view element that describes the lower bound of the gauge. For example, it could display a label like \"0%\" or \"Min\" at the minimum value position.\n\n### `maxValueLabel` (Optional)\n\n- **Type**: `VirtualNode`\n- **Description**: A view element that describes the upper bound of the gauge. For example, it could display a label like \"100%\" or \"Max\" at the maximum value position.\n\n### `gaugeStyle` (Optional)\n\n- **Type**: `GaugeStyle`\n- **Description**: The style of the gauge view. This property controls the visual appearance of the gauge and has the following options:\n  - **`automatic`**: The default style based on the current context of the view being styled.\n  - **`accessoryCircular`**: Displays an open circular ring with a marker that appears at a point along the ring to indicate the current value.\n  - **`accessoryCircularCapacity`**: Displays a closed circular ring that is partially filled to indicate the current value.\n  - **`circular`**: **(Available only on watchOS)** Displays an open circular ring with a marker that appears at a point along the ring to indicate the current value.\n  - **`linearCapacity`**: Displays a bar that fills from the leading to trailing edge as the value increases.\n  - **`accessoryLinear`**: Displays a bar with a marker that appears at a point along the bar to indicate the current value.\n  - **`accessoryLinearCapacity`**: Displays a bar that fills from the leading to trailing edge as the value increases.\n  - **`linear`**: **(Available only on watchOS)** Displays a bar with a marker that appears at a point along the bar to indicate the current value.\n\n## Example Code\n\n```tsx\n<Gauge\n  value={0.7}\n  label={<Text>Battery Level</Text>}\n  min={0}\n  max={1}\n  currentValueLabel={<Text>70%</Text>}\n  minValueLabel={<Text>0%</Text>}\n  maxValueLabel={<Text>100%</Text>}\n  gaugeStyle=\"accessoryCircular\"\n/>\n```\n\n## Use Cases\n\nThe `Gauge` component is ideal for the following use cases:\n\n- Displaying progress (e.g., task completion, download progress).\n- Showing device status (e.g., battery level, signal strength).\n- Displaying performance metrics (e.g., temperature, humidity, CPU usage).\n\nBy customizing properties such as `label` and `currentValueLabel`, the `Gauge` component can be adapted for various display needs, helping users understand the current state more clearly.\n\n## Notes\n\n- The `value` property should be within the range specified by `min` and `max` to ensure proper display.\n- If `min` and `max` are not provided, the gauge will default to the range `[0, 1]`.\n- Different `gaugeStyle` options provide varied visual representations. Select an appropriate style based on the device and context to enhance user experience.\n","routePath":"/doc/Views/Controls/Gauge/","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":447},{"id":"value-required","text":"`value` (Required)","depth":3,"charIndex":462},{"id":"label-required","text":"`label` (Required)","depth":3,"charIndex":651},{"id":"min-optional","text":"`min` (Optional)","depth":3,"charIndex":868},{"id":"max-optional","text":"`max` (Optional)","depth":3,"charIndex":1032},{"id":"currentvaluelabel-optional","text":"`currentValueLabel` (Optional)","depth":3,"charIndex":1196},{"id":"minvaluelabel-optional","text":"`minValueLabel` (Optional)","depth":3,"charIndex":1424},{"id":"maxvaluelabel-optional","text":"`maxValueLabel` (Optional)","depth":3,"charIndex":1650},{"id":"gaugestyle-optional","text":"`gaugeStyle` (Optional)","depth":3,"charIndex":1878},{"id":"example-code","text":"Example Code","depth":2,"charIndex":3102},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":3354},{"id":"notes","text":"Notes","depth":2,"charIndex":3824}],"frontmatter":{},"version":"","description":"The Gauge component is a view used to display the current value in relation to a specified finite capacity, similar to a fuel gauge in an automobile. The Gauge component is highly configurable and can display any combination of the current value, the range the gauge can display, and a label describing the purpose of the gauge itself. It is suitable for showing the current value of a limited capacity, such as progress, level, or quantity."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Gauge\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section\n        header={\n          <Text>accessoryCircular</Text>\n        }\n      >\n        <Gauge\n          value={0.4}\n          label={<Text>0 100</Text>}\n          currentValueLabel={<Text>40%</Text>}\n          gaugeStyle={\"accessoryCircular\"}\n          tint={\"systemGreen\"}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>accessoryCircularCapacity</Text>\n        }\n      >\n        <Gauge\n          value={0.4}\n          label={<Text>Battery Level</Text>}\n          currentValueLabel={<Text>40%</Text>}\n          gaugeStyle={\"accessoryCircularCapacity\"}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>linearCapacity</Text>\n        }\n      >\n        <Gauge\n          value={0.4}\n          label={<Text>Battery Level</Text>}\n          currentValueLabel={<Text>40%</Text>}\n          gaugeStyle={\"linearCapacity\"}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>accessoryLinear</Text>\n        }\n      >\n        <Gauge\n          value={0.4}\n          label={<Text>Battery Level</Text>}\n          currentValueLabel={<Text>40%</Text>}\n          gaugeStyle={\"accessoryLinear\"}\n        />\n      </Section>\n      <Section\n        header={\n          <Text>accessoryLinearCapacity</Text>\n        }\n      >\n        <Gauge\n          value={0.4}\n          label={<Text>Battery Level</Text>}\n          currentValueLabel={<Text>40%</Text>}\n          gaugeStyle={\"accessoryLinearCapacity\"}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Controls/Gauge/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Picker","content":"The `Picker` component is used to select a single value from a set of mutually exclusive options. It supports various display styles and allows users to choose a single value. The selected value and the change event can be managed using the `value` and `onChanged` properties.\n\n## Type Definitions\n\n- `PickerValue`: The type of the selected value, which can be either `number` or `string`.\n- `PickerProps<T extends PickerValue>`: The property type for the `Picker` component, which includes:\n  - `value`: The current selected value, which can be a `number` or `string` (optional).\n  - `onChanged`: A callback function triggered when the selected value changes, with the new value (`T`) as the parameter.\n  - `children`: The option views, where each child must have a `tag` property to indicate its value. This can be a `JSX.Element` or an array of `JSX.Element`s.\n  - `title`: A string describing the option's purpose, used in certain cases.\n  - `systemImage`: The name of the system image resource, used in certain cases.\n  - `label`: A `JSX.Element` that describes the purpose of the selection, used in certain cases.\n\n## Component Functionality\n\nThe `Picker` component manages the user's selection through the `value` and `onChanged` properties. The `value` is the current selected value, and the `onChanged` is a callback function that is invoked when the user changes the selection. The `children` property defines the options' views, allowing multiple layouts to be used for displaying the options. Each `children` element must have a `tag` property to mark its value, for example, `<Text tag={1}>Option 1</Text>`.\n\n## Picker Styles\n\nThe `Picker` component supports the following styles to adjust how the component is displayed:\n\n- `automatic`: The default style, automatically determined based on the picker’s context.\n- `inline`: Displays each option inline with other views in the current container.\n- `menu`: Displays the options in a menu that opens when the user presses a button or as a submenu within a larger menu.\n- `navigationLink`: Displays a navigation link that presents the options in a List-style picker view when clicked.\n- `palette`: Displays the options as a row of compact elements.\n- `segmented`: Displays the options in a segmented control style.\n- `wheel`: Displays the options in a scrollable wheel, showing the selected option and a few neighboring options.\n\n## Example Usage\n\nBelow are examples of how to use the `Picker` component:\n\n### Example 1: Picker with Numeric Values\n\n```tsx\n\n\nconst MyPicker = () => {\n  const [selectedValue, setSelectedValue] = useState<number>(1)\n\n  return (\n    <Picker\n      value={selectedValue}\n      onChanged={(newValue) => setSelectedValue(newValue)}\n      pickerStyle=\"inline\"\n    >\n      <Text tag={1}>Option 1</Text>\n      <Text tag={2}>Option 2</Text>\n      <Text tag={3}>Option 3</Text>\n    </Picker>\n  )\n}\n```\n\n### Example 2: Picker with String Values\n\n```tsx\n\n\nconst MyPicker = () => {\n  const [selectedValue, setSelectedValue] = useState<string>(\"Option 1\")\n\n  return (\n    <Picker\n      value={selectedValue}\n      onChanged={(newValue) => setSelectedValue(newValue)}\n      pickerStyle=\"segmented\"\n    >\n      <Text tag=\"Option 1\">Option 1</Text>\n      <Text tag=\"Option 2\">Option 2</Text>\n      <Text tag=\"Option 3\">Option 3</Text>\n    </Picker>\n  )\n}\n```\n\n### Example 3: Picker with Title and System Image\n\n```tsx\n\n\nconst MyPicker = () => {\n  const [selectedValue, setSelectedValue] = useState<string>(\"Option 1\")\n\n  return (\n    <Picker\n      value={selectedValue}\n      onChanged={(newValue) => setSelectedValue(newValue)}\n      pickerStyle=\"menu\"\n      title=\"Choose an option\"\n      systemImage=\"star\"\n    >\n      <Text tag=\"Option 1\">Option 1</Text>\n      <Text tag=\"Option 2\">Option 2</Text>\n      <Text tag=\"Option 3\">Option 3</Text>\n    </Picker>\n  )\n}\n```\n\n## Common Use Cases for `Picker`\n\n1. **Form Selection**: `Picker` can be used in forms to select a single value from a predefined set of options.\n2. **Settings Interface**: In app settings, `Picker` can be used to choose colors, themes, languages, etc.\n3. **Navigation Options**: In more complex interfaces, `Picker` can serve as a tool for selecting options within multi-level menus.\n\n## Notes\n\n- Each `children` element in the `Picker` must use the `tag` property to mark its value, for example: `<Text tag={1}>Option 1</Text>`.\n- The `value` and `onChanged` properties must be used together to ensure correct functionality when the user changes the selected value.\n- The `pickerStyle` property provides various styles to enhance the user experience. Select the one that fits your use case best.\n\n### Related APIs\n\n- `JSX.Element`: The type used for defining the view structure. The `Picker` component’s `children` property relies on this type.\n- `useState`: A React hook for managing the selected value’s state.\n","routePath":"/doc/Views/Controls/Picker/","lang":"en","toc":[{"id":"type-definitions","text":"Type Definitions","depth":2,"charIndex":278},{"id":"component-functionality","text":"Component Functionality","depth":2,"charIndex":1121},{"id":"picker-styles","text":"Picker Styles","depth":2,"charIndex":1622},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2390},{"id":"example-1-picker-with-numeric-values","text":"Example 1: Picker with Numeric Values","depth":3,"charIndex":2466},{"id":"example-2-picker-with-string-values","text":"Example 2: Picker with String Values","depth":3,"charIndex":2884},{"id":"example-3-picker-with-title-and-system-image","text":"Example 3: Picker with Title and System Image","depth":3,"charIndex":3334},{"id":"common-use-cases-for-picker","text":"Common Use Cases for `Picker`","depth":2,"charIndex":3844},{"id":"notes","text":"Notes","depth":2,"charIndex":4230},{"id":"related-apis","text":"Related APIs","depth":3,"charIndex":4643}],"frontmatter":{},"version":"","description":"The Picker component is used to select a single value from a set of mutually exclusive options. It supports various display styles and allows users to choose a single value. The selected value and the change event can be managed using the value and onChanged properties."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [value, setValue] = useState<number>(0)\n  const options = useMemo<PickerStyle[]>(() => [\n    'automatic',\n    'inline',\n    'menu',\n    'navigationLink',\n    'palette',\n    'segmented',\n    'wheel'\n  ], [])\n  const users = useMemo<string[]>(() => [\n    \"Jobs\", \"Elon\", \"Zack\", \"Joe\"\n  ], [])\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Picker\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {options.map((style) =>\n        <Section\n          header={\n            <Text>Picker: {style}</Text>}\n        >\n          <Picker\n            title={\"Picker: \" + style}\n            pickerStyle={style}\n            value={value}\n            onChanged={setValue}\n          >\n            {users.map((user, index) =>\n              <Text\n                tag={index}\n              >{user}</Text>\n            )}\n          </Picker>\n        </Section>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Controls/Picker/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"ProgressView","content":"`ProgressView` is a UI component that visually represents the progress of a task or operation. It can display both determinate (percentage complete) and indeterminate (progressing or not) types of progress. Additionally, it offers customizable progress view styles, including linear and circular representations.\n\nYou can use `ProgressView` to display the progress of various tasks, such as downloading a file, completing a process, or waiting for an event. The component can also show additional details like labels for the task description and current progress.\n\n## Usage\n\n### Component Declaration\n\nThe `ProgressView` component accepts two possible sets of properties, depending on whether you want to represent a time-based interval or a general progress task. These are specified through the `ProgressViewProps` type, which can be one of the following:\n\n- `TimerIntervalProgressViewProps`\n- `NormalProgressViewProps`\n\nYou can create a determinate progress view by binding the `value` and `total` properties to represent progress. Additionally, the component supports custom styling through the `progressViewStyle` property.\n\n### Example: Timer-Based Progress View\n\n```tsx\n<ProgressView\n  timerFrom={startTimestamp}\n  timerTo={endTimestamp}\n  countsDown={true}\n  label={<Text>Task in Progress</Text>}\n  currentValueLabel={<Text>50% Complete</Text>}\n/>\n```\n\n### Example: Normal Progress View\n\n```tsx\n<ProgressView\n  value={0.5}\n  total={1.0}\n  title=\"Loading\"\n  label={<Text>File Download</Text>}\n  currentValueLabel={<Text>50% Complete</Text>}\n/>\n```\n\n## Props\n\n### `TimerIntervalProgressViewProps`\n\n- **`timerFrom`** (`number`):\\\n  The start timestamp (in milliseconds) that defines the beginning of the progress interval. This is used to calculate how much time has passed in the progress view.\n\n- **`timerTo`** (`number`):\\\n  The end timestamp (in milliseconds) that defines the completion of the progress interval. This marks the end point of the progress view.\n\n- **`countsDown`** (`boolean`, optional, default: `true`):\\\n  If set to `true`, the progress view counts down from the `timerFrom` to `timerTo` timestamp. If `false`, it will count up.\n\n- **`label`** (`VirtualNode`, optional):\\\n  A virtual node that provides additional context or description about the task in progress. This could be a text label or another type of view.\n\n- **`currentValueLabel`** (`VirtualNode`, optional):\\\n  A virtual node that describes the current value or progress of the task. For example, this could show the current percentage of completion.\n\n### `NormalProgressViewProps`\n\n- **`value`** (`number`, optional):\\\n  The completed progress of the task so far. This is a floating-point number between `0.0` and `total`, representing the task's completion percentage. If `nil`, the progress is indeterminate.\n\n- **`total`** (`number`, optional, default: `1.0`):\\\n  The total amount representing 100% completion of the task. The progress is considered complete when `value` equals `total`. Defaults to `1.0`.\n\n- **`title`** (`string`, optional):\\\n  The title or name of the task that is being represented in the progress view.\n\n- **`label`** (`VirtualNode`, optional):\\\n  A virtual node that describes the task in progress, similar to the `label` property in `TimerIntervalProgressViewProps`.\n\n- **`currentValueLabel`** (`VirtualNode`, optional):\\\n  A virtual node that shows the current progress value of the task, similar to the `currentValueLabel` in `TimerIntervalProgressViewProps`.\n\n### `CommonViewProps`\n\n- **`progressViewStyle`** (`ProgressViewStyle`, optional):\\\n  The style of the progress view. The available styles are:\n  - **`automatic`**: The default style based on the current context of the view being styled.\n  - **`circular`**: A circular gauge style to show progress. On platforms other than macOS, this may appear as an indeterminate indicator.\n  - **`linear`**: A horizontal bar style indicating the task's progress.\n\n### `ProgressViewStyle`\n\n- **`linear`**: A progress view that visually indicates its progress using a horizontal bar.\n- **`circular`**: A circular progress view that indicates the partial completion of an activity. On non-macOS platforms, this may be used for indeterminate progress.\n- **`automatic`**: The default style, which automatically chooses the appropriate style based on the context.\n\n## Notes\n\n- `ProgressView` automatically adjusts its display based on the values provided in the `TimerIntervalProgressViewProps` or `NormalProgressViewProps`.\n- If both `value` and `total` are provided, the progress will be determinate. If either of them is `nil`, the progress view will be indeterminate.\n- You can use the `label` and `currentValueLabel` properties to customize the UI by passing any type of view, including text, images, or custom components.\n- The `progressViewStyle` can be set to customize the visual style of the progress indicator. By default, it uses the `automatic` style, but you can choose `linear` or `circular` depending on your needs.\n\n## Examples\n\n### Determinate Progress (with value and total)\n\n```tsx\n<ProgressView\n  value={0.75}\n  total={1.0}\n  title=\"Task Progress\"\n  label={<Text>Task is 75% complete</Text>}\n  currentValueLabel={<Text>75%</Text>}\n  progressViewStyle=\"linear\"\n/>\n```\n\n### Indeterminate Progress (without value)\n\n```tsx\n<ProgressView\n  title=\"Loading\"\n  label={<Text>Loading file...</Text>}\n  progressViewStyle=\"circular\"\n/>\n```\n\n## Conclusion\n\n`ProgressView` is a flexible and easy-to-use UI component that supports both determinate and indeterminate progress states. It allows you to display progress through either a linear or circular visual representation. With the ability to customize progress details and UI style, `ProgressView` is an ideal choice for indicating task progress in various scenarios.\n","routePath":"/doc/Views/Controls/ProgressView/","lang":"en","toc":[{"id":"usage","text":"Usage","depth":2,"charIndex":565},{"id":"component-declaration","text":"Component Declaration","depth":3,"charIndex":575},{"id":"example-timer-based-progress-view","text":"Example: Timer-Based Progress View","depth":3,"charIndex":1130},{"id":"example-normal-progress-view","text":"Example: Normal Progress View","depth":3,"charIndex":1361},{"id":"props","text":"Props","depth":2,"charIndex":1556},{"id":"timerintervalprogressviewprops","text":"`TimerIntervalProgressViewProps`","depth":3,"charIndex":1566},{"id":"normalprogressviewprops","text":"`NormalProgressViewProps`","depth":3,"charIndex":2542},{"id":"commonviewprops","text":"`CommonViewProps`","depth":3,"charIndex":3481},{"id":"progressviewstyle","text":"`ProgressViewStyle`","depth":3,"charIndex":3931},{"id":"notes","text":"Notes","depth":2,"charIndex":4326},{"id":"examples","text":"Examples","depth":2,"charIndex":4994},{"id":"determinate-progress-with-value-and-total","text":"Determinate Progress (with value and total)","depth":3,"charIndex":5007},{"id":"indeterminate-progress-without-value","text":"Indeterminate Progress (without value)","depth":3,"charIndex":5250},{"id":"conclusion","text":"Conclusion","depth":2,"charIndex":5411}],"frontmatter":{},"version":"","description":"ProgressView is a UI component that visually represents the progress of a task or operation. It can display both determinate (percentage complete) and indeterminate (progressing or not) types of progress. Additionally, it offers customizable progress view styles, including linear and circular representations. You can use ProgressView to display the progress of various tasks, such as downloading a file, completing a process, or waiting for an event. The component can also show additional details like labels for the task description and current progress."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [timerFrom] = useState(() => Date.now())\n  const timerTo = timerFrom + 1000 * 60\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"ProgressView\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section\n        header={\n          <Text>circular</Text>\n        }\n      >\n        <ProgressView\n          progressViewStyle={'circular'}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>linear</Text>\n        }\n      >\n        <ProgressView\n          progressViewStyle={'linear'}\n          total={100}\n          value={50}\n          label={<Text>Progress 50%</Text>}\n          currentValueLabel={<Text>50</Text>}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>TimerInterval</Text>\n        }\n      >\n        <ProgressView\n          progressViewStyle={'linear'}\n          timerFrom={timerFrom}\n          timerTo={timerTo}\n          countsDown={false}\n          label={<Text>Workout</Text>}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Controls/ProgressView/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Slider","content":"The `Slider` component allows users to select a value from a bounded linear range of values. You can configure the slider by setting the minimum value, maximum value, step size, and the current value. The component also supports custom labels to describe the minimum and maximum values, as well as the slider itself. Additionally, it provides callbacks for handling value changes and editing state changes.\n\n## SliderProps Type\n\n`SliderProps` defines the properties for the `Slider` component, which includes the following fields:\n\n- **min** (`number`):\n  - The minimum value of the slider.\n  - **Required**.\n\n- **max** (`number`):\n  - The maximum value of the slider.\n  - **Required**.\n\n- **step** (`number`):\n  - The step size between each valid value of the slider.\n  - **Optional**, defaults to `1`.\n\n- **value** (`number`):\n  - The selected value within bounds.\n  - **Required**, must be between `min` and `max`.\n\n- **onChanged** (`(value: number) => void`):\n  - A callback function that is called whenever the slider value changes.\n  - **Required**, called each time the value is updated.\n\n- **onEditingChanged** (`(value: boolean) => void`):\n  - An optional callback function called when the editing state of the slider changes.\n  - `value` is `true` when editing starts, and `false` when editing ends.\n\n- **label** (`VirtualNode`):\n  - An optional view that describes the purpose of the slider. Even if some slider styles do not display the label, the system uses it for accessibility purposes (e.g., VoiceOver).\n  - **Optional**.\n\n- **minValueLabel** (`VirtualNode`):\n  - An optional view that describes the minimum value of the slider.\n  - **Optional**, used only in the `SliderWithRangeValueLabelProps` mode.\n\n- **maxValueLabel** (`VirtualNode`):\n  - An optional view that describes the maximum value of the slider.\n  - **Optional**, used only in the `SliderWithRangeValueLabelProps` mode.\n\n## SliderWithRangeValueLabelProps Type\n\n`SliderWithRangeValueLabelProps` is a type that defines additional properties for labeling the slider's range. It includes:\n\n- **label** (`VirtualNode`):\n  - The label that describes the purpose of the slider.\n\n- **minValueLabel** (`VirtualNode`):\n  - The label that describes the minimum value of the slider.\n\n- **maxValueLabel** (`VirtualNode`):\n  - The label that describes the maximum value of the slider.\n\n## Usage Example\n\nHere’s an example of using the `Slider` component:\n\n```tsx\n\n\nconst ExampleSlider = () => {\n  const [value, setValue] = useState(50)\n\n  const handleChange = (newValue: number) => {\n    setValue(newValue)\n  }\n\n  return (\n    <Slider\n      min={0}\n      max={100}\n      value={value}\n      onChanged={handleChange}\n      label={<Text>Adjust Volume</Text>}\n      minValueLabel={<Text>0</Text>}\n      maxValueLabel={<Text>100</Text>}\n    />\n  )\n}\n```\n\nIn this example, the `Slider` component is configured with a range from `0` to `100`, with the default value set to `50`. Labels for the slider's purpose, as well as the minimum and maximum values, are provided.\n\n## Important Notes\n\n- The `min` and `max` properties of the `Slider` must be numeric, and the `value` must be within this range.\n- The `onChanged` callback will trigger whenever the slider's value changes, passing the new value.\n- If you use `SliderWithRangeValueLabelProps`, you must provide appropriate view elements for `minValueLabel` and `maxValueLabel`.\n\n## Summary\n\nThe `Slider` component is a versatile UI control suitable for scenarios where the user needs to select a numerical value. With its flexible properties and callbacks, it can handle a wide range of use cases, especially when labels for the minimum, maximum values, or the slider itself are needed.\n","routePath":"/doc/Views/Controls/Slider/","lang":"en","toc":[{"id":"sliderprops-type","text":"SliderProps Type","depth":2,"charIndex":408},{"id":"sliderwithrangevaluelabelprops-type","text":"SliderWithRangeValueLabelProps Type","depth":2,"charIndex":1902},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":2353},{"id":"important-notes","text":"Important Notes","depth":2,"charIndex":3031},{"id":"summary","text":"Summary","depth":2,"charIndex":3392}],"frontmatter":{},"version":"","description":"The Slider component allows users to select a value from a bounded linear range of values. You can configure the slider by setting the minimum value, maximum value, step size, and the current value. The component also supports custom labels to describe the minimum and maximum values, as well as the slider itself. Additionally, it provides callbacks for handling value changes and editing state changes."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [value, setValue] = useState(15)\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Slider\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Slider\n        min={0}\n        max={100}\n        value={value}\n        onChanged={setValue}\n        label={<Text>{value}</Text>}\n        minValueLabel={<Text>0</Text>}\n        maxValueLabel={<Text>100</Text>}\n      />\n      <Text>Current value: {value}</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Controls/Slider/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Stepper","content":"The `Stepper` is a control used for performing increment and decrement actions. It allows the user to increase or decrease a value by tapping the “+” or “-” buttons. The component also supports triggering callback functions when editing starts or ends.\n\n## Properties\n\n### 1. `title` (Optional, String)\n\n- **Description**: Specifies the title of the stepper, typically used to describe the purpose of the stepper.\n- **Type**: `string`\n- **Example**:\n  ```tsx\n  <Stepper\n    title=\"Adjust Volume\" \n    onIncrement={handleIncrement} \n    onDecrement={handleDecrement} \n  />\n  ```\n\n### 2. `children` (Optional, VirtualNode)\n\n- **Description**: A view that describes the purpose of this stepper. Multiple child views can be used to build the appearance of the control. This property is mutually exclusive with the `title` property.\n- **Type**: `(VirtualNode | undefined | null | (VirtualNode | undefined | null)[])[] | VirtualNode`\n- **Example**:\n  ```tsx\n  <Stepper \n    onIncrement={handleIncrement} \n    onDecrement={handleDecrement}\n  >\n    <Text>Adjust Volume</Text>\n  </Stepper>\n  ```\n\n### 3. `onIncrement` (Required, Callback Function)\n\n- **Description**: A function executed when the user clicks or taps the “+” button.\n- **Type**: `() => void`\n- **Example**:\n  ```tsx\n  const handleIncrement = () => {\n    console.log(\"Incremented\")\n  }\n\n  <Stepper onIncrement={handleIncrement} onDecrement={handleDecrement} />\n  ```\n\n### 4. `onDecrement` (Required, Callback Function)\n\n- **Description**: A function executed when the user clicks or taps the “-” button.\n- **Type**: `() => void`\n- **Example**:\n  ```tsx\n  const handleDecrement = () => {\n    console.log(\"Decremented\")\n  }\n\n  <Stepper \n    onIncrement={handleIncrement} \n    onDecrement={handleDecrement} \n  />\n  ```\n\n### 5. `onEditingChanged` (Optional, Callback Function)\n\n- **Description**: A function called when editing begins and ends. For example, on iOS, when the user touches and holds the increment or decrement buttons on a Stepper, it triggers the `onEditingChanged` callback to indicate the start and end of the editing gesture.\n- **Type**: `(value: boolean) => void`\n- **Example**:\n  ```tsx\n  const handleEditingChanged = (isEditing: boolean) => {\n    console.log(\"Editing started:\", isEditing)\n  }\n\n  <Stepper\n    onIncrement={handleIncrement}\n    onDecrement={handleDecrement}\n    onEditingChanged={handleEditingChanged}\n  />\n  ```\n\n## Example Code\n\nHere is a complete example showing how to use the `Stepper` component:\n\n```tsx\nconst handleIncrement = () => {\n  console.log(\"Volume increased\")\n}\n\nconst handleDecrement = () => {\n  console.log(\"Volume decreased\")\n}\n\nconst handleEditingChanged = (isEditing: boolean) => {\n  console.log(\"Editing started:\", isEditing)\n}\n\n<Stepper\n  title=\"Volume Control\"\n  onIncrement={handleIncrement}\n  onDecrement={handleDecrement}\n  onEditingChanged={handleEditingChanged}\n/>\n```\n\n## Notes\n\n- The `title` and `children` properties are mutually exclusive. You can use one or the other to describe the purpose of the stepper.\n- The `onEditingChanged` callback is optional and only triggered when editing is supported, such as when the user long presses the buttons.\n\n## Summary\n\nThe `Stepper` control provides a simple interface to increment and decrement values, with support for triggering callbacks during user interaction. You can configure the `title` or `children` properties to describe the purpose of the control, and use the `onIncrement` and `onDecrement` functions to define actions when the buttons are clicked.\n","routePath":"/doc/Views/Controls/Stepper/","lang":"en","toc":[{"id":"properties","text":"Properties","depth":2,"charIndex":254},{"id":"1-title-optional-string","text":"1. `title` (Optional, String)","depth":3,"charIndex":269},{"id":"2-children-optional-virtualnode","text":"2. `children` (Optional, VirtualNode)","depth":3,"charIndex":579},{"id":"3-onincrement-required-callback-function","text":"3. `onIncrement` (Required, Callback Function)","depth":3,"charIndex":1088},{"id":"4-ondecrement-required-callback-function","text":"4. `onDecrement` (Required, Callback Function)","depth":3,"charIndex":1424},{"id":"5-oneditingchanged-optional-callback-function","text":"5. `onEditingChanged` (Optional, Callback Function)","depth":3,"charIndex":1773},{"id":"example-code","text":"Example Code","depth":2,"charIndex":2404},{"id":"notes","text":"Notes","depth":2,"charIndex":2889},{"id":"summary","text":"Summary","depth":2,"charIndex":3173}],"frontmatter":{},"version":"","description":"The Stepper is a control used for performing increment and decrement actions. It allows the user to increase or decrease a value by tapping the “+” or “-” buttons. The component also supports triggering callback functions when editing starts or ends."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [value, setValue] = useState(0)\n  const colors = useMemo<Color[]>(() => ['blue', 'red', 'green', 'purple'], [])\n  const color = colors[value]\n\n  function incrementStep() {\n    if (value + 1 >= colors.length) {\n      setValue(0)\n    } else {\n      setValue(value + 1)\n    }\n  }\n\n  function decrementStep() {\n    if (value - 1 < 0) {\n      setValue(colors.length - 1)\n    } else {\n      setValue(value - 1)\n    }\n  }\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Stepper\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Stepper\n        title={\"Stepper\"}\n        onIncrement={incrementStep}\n        onDecrement={decrementStep}\n      />\n      <HStack>\n        <Text>Value: {value}</Text>\n        <Spacer />\n        <RoundedRectangle\n          fill={color}\n          cornerRadius={4}\n          frame={{\n            width: 120,\n            height: 30\n          }}\n        />\n      </HStack>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Controls/Stepper/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Toggle","content":"The `Toggle` component in the Scripting app provides a view control that allows users to toggle between \"on\" and \"off\" states. It supports various configuration options to suit different use cases, including user interaction handlers, intents for automation, and customization for display purposes.\n\n## ToggleProps\n\nThe `ToggleProps` type defines the configuration options for the `Toggle` component.\n\n### Properties\n\n#### **value**\n\n- **Type**: `boolean`\n- **Description**: Indicates whether the toggle is currently in the \"on\" (`true`) or \"off\" (`false`) state.\n- **Required**: Yes\n\n***\n\n#### **onChanged**\n\n- **Type**: `(value: boolean) => void`\n- **Description**: A handler function that is invoked whenever the toggle state changes. It receives the new state (`true` or `false`) as a parameter.\n- **Required**: Yes, if `intent` is not provided.\n\n***\n\n#### **intent**\n\n- **Type**: `AppIntent<any>`\n- **Description**: An `AppIntent` to execute when the toggle is toggled. This is available only for `Widget` or `LiveActivity` contexts.\n- **Required**: Yes, if `onChanged` is not provided.\n\n***\n\n#### **title**\n\n- **Type**: `string`\n- **Description**: A short string describing the purpose of the toggle.\n- **Optional**: Yes, mutually exclusive with `children`.\n\n***\n\n#### **systemImage**\n\n- **Type**: `string`\n- **Description**: The name of an image resource to display alongside the toggle, typically for enhancing the description.\n- **Optional**: Yes, available only if `title` is provided.\n\n***\n\n#### **children**\n\n- **Type**: `(VirtualNode | undefined | null | (VirtualNode | undefined | null)[])[] | VirtualNode`\n- **Description**: A custom view that describes the purpose of the toggle, offering a more flexible alternative to `title`.\n- **Optional**: Yes, mutually exclusive with `title`.\n\n***\n\n## ToggleStyle\n\nDefines the appearance and behavior of the `Toggle`. It can be configured through the `toggleStyle` property in `CommonViewProps`.\n\n### Options\n\n- **`'automatic'`**: Automatically chooses the most appropriate style based on context.\n- **`'switch'`**: Displays the toggle as a traditional switch.\n- **`'button'`**: Displays the toggle as a button.\n\n***\n\n## CommonViewProps\n\n`CommonViewProps` provides additional customization options for the `Toggle`.\n\n### Properties\n\n#### **toggleStyle**\n\n- **Type**: `'automatic' | 'switch' | 'button'`\n- **Description**: Specifies the appearance and behavior of the toggle. Defaults to `'automatic'` if not set.\n- **Optional**: Yes\n\n***\n\n## Usage Examples\n\n### Example 1: Basic Toggle with State Change Handler\n\n```tsx\n\n\nfunction MyComponent() {\n  const [isEnabled, setIsEnabled] = useState(false)\n\n  return (\n    <Toggle \n      value={isEnabled} \n      onChanged={newValue => setIsEnabled(newValue)} \n      title=\"Enable Notifications\" \n      systemImage=\"bell\"\n    />\n  )\n}\n```\n\n***\n\n### Example 2: Toggle with AppIntent\n\n```tsx\n\n\n\nfunction MyWidget() {\n  const checked = getCheckedState()\n  return (\n    <Toggle \n        value={checked} \n        intent={SomeToggleIntent(checked)} \n        title=\"Perform Action\" \n        systemImage=\"action\"\n    />\n  )\n}\n```\n\n## See `Interactive Widget and LiveActivity` documentation for more information about `AppIntent`.\n\n### Example 3: Toggle with Custom View\n\n```tsx\n\n\nfunction MyComponent() {\n  const [isEnabled, setIsEnabled] = useState(false)\n\n  return (\n    <Toggle \n      value={isEnabled} \n      onChanged={newValue => setIsEnabled(newValue)}\n    >\n      <View>\n        <Text>Enable Feature</Text>\n        <Image imageUrl=\"https://example.com/feature-icon.png\" />\n      </View>\n    </Toggle>\n  )\n}\n```\n\n***\n\n### Example 4: Toggle with `toggleStyle`\n\n```tsx\n\n\nfunction StyledToggle() {\n  const [isActive, setIsActive] = useState(false)\n\n  return (\n    <Toggle \n      value={isActive} \n      onChanged={newValue => setIsActive(newValue)} \n      title=\"Styled Toggle\" \n      toggleStyle=\"button\"\n    />\n  )\n}\n```\n\n***\n\nThis documentation ensures developers can utilize the `Toggle` component effectively, leveraging its versatility for creating dynamic and interactive UI experiences in the Scripting app.\n","routePath":"/doc/Views/Controls/Toggle/","lang":"en","toc":[{"id":"toggleprops","text":"ToggleProps","depth":2,"charIndex":300},{"id":"properties","text":"Properties","depth":3,"charIndex":402},{"id":"value","text":"**value**","depth":4,"charIndex":418},{"id":"onchanged","text":"**onChanged**","depth":4,"charIndex":590},{"id":"intent","text":"**intent**","depth":4,"charIndex":856},{"id":"title","text":"**title**","depth":4,"charIndex":1098},{"id":"systemimage","text":"**systemImage**","depth":4,"charIndex":1270},{"id":"children","text":"**children**","depth":4,"charIndex":1502},{"id":"togglestyle","text":"ToggleStyle","depth":2,"charIndex":1805},{"id":"options","text":"Options","depth":3,"charIndex":1953},{"id":"commonviewprops","text":"CommonViewProps","depth":2,"charIndex":2174},{"id":"properties-1","text":"Properties","depth":3,"charIndex":2273},{"id":"togglestyle-1","text":"**toggleStyle**","depth":4,"charIndex":-1},{"id":"usage-examples","text":"Usage Examples","depth":2,"charIndex":2495},{"id":"example-1-basic-toggle-with-state-change-handler","text":"Example 1: Basic Toggle with State Change Handler","depth":3,"charIndex":2514},{"id":"example-2-toggle-with-appintent","text":"Example 2: Toggle with AppIntent","depth":3,"charIndex":2843},{"id":"see-interactive-widget-and-liveactivity-documentation-for-more-information-about-appintent","text":"See `Interactive Widget and LiveActivity` documentation for more information about `AppIntent`.","depth":2,"charIndex":3121},{"id":"example-3-toggle-with-custom-view","text":"Example 3: Toggle with Custom View","depth":3,"charIndex":3221},{"id":"example-4-toggle-with-togglestyle","text":"Example 4: Toggle with `toggleStyle`","depth":3,"charIndex":3615}],"frontmatter":{},"version":"","description":"The Toggle component in the Scripting app provides a view control that allows users to toggle between \"on\" and \"off\" states. It supports various configuration options to suit different use cases, including user interaction handlers, intents for automation, and customization for display purposes."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [on, setOn] = useState(false)\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Toggle\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Toggle\n        title={\"Toggle Switch\"}\n        value={on}\n        onChanged={setOn}\n      />\n      <Text>Current: {on ? 'on' : 'off'}</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Controls/Toggle/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Dialog","content":"The `Dialog` module provides convenient methods to present various types of user interface dialogs such as alerts, confirmations, prompts, and action sheets. These dialogs are useful for requesting user input or interaction during script execution.\n\n***\n\n## Module: `Dialog`\n\n### ▸ `Dialog.alert(options: { message: string, title?: string, buttonLabel?: string }): Promise<void>`\n\nDisplays a simple alert dialog with a message and an optional title and button label. The dialog shows a single button and resolves when the user dismisses it.\n\n#### Parameters\n\n- `message` (`string`) – The main message displayed in the alert.\n- `title?` (`string`) – Optional title shown above the message.\n- `buttonLabel?` (`string`) – The text for the dismiss button. Defaults to `\"OK\"`.\n\n#### Returns\n\n- A `Promise<void>` that resolves after the user taps the button.\n\n#### Example\n\n```ts\nawait Dialog.alert({\n  title: 'Notice',\n  message: 'This operation completed successfully.',\n  buttonLabel: 'Got it'\n})\n```\n\n***\n\n### ▸ `Dialog.confirm(options: { message: string, title?: string, cancelLabel?: string, confirmLabel?: string }): Promise<boolean>`\n\nDisplays a confirmation dialog with cancel and confirm options. Resolves to `true` if the user confirms, or `false` if the user cancels.\n\n#### Parameters\n\n- `message` (`string`) – The confirmation message.\n- `title?` (`string`) – Optional title.\n- `cancelLabel?` (`string`) – Label for the cancel button. Defaults to `\"Cancel\"`.\n- `confirmLabel?` (`string`) – Label for the confirm button. Defaults to `\"OK\"`.\n\n#### Returns\n\n- A `Promise<boolean>` indicating the user's choice.\n\n#### Example\n\n```ts\nconst confirmed = await Dialog.confirm({\n  title: 'Delete File',\n  message: 'Are you sure you want to delete this file?',\n  cancelLabel: 'No',\n  confirmLabel: 'Yes'\n})\n\nif (confirmed) {\n  // Proceed with deletion\n}\n```\n\n***\n\n### ▸ `Dialog.prompt(options: {...}): Promise<string | null>`\n\nDisplays a prompt dialog where the user can enter text. The result is a string if the user confirms or `null` if the user cancels.\n\n#### Parameters\n\n- `title` (`string`) – Required title explaining what the prompt is for.\n- `message?` (`string`) – Optional supporting message.\n- `defaultValue?` (`string`) – Pre-filled text in the input field.\n- `obscureText?` (`boolean`) – Whether to obscure input (e.g., for passwords).\n- `selectAll?` (`boolean`) – Whether the input text should be fully selected initially.\n- `placeholder?` (`string`) – Placeholder text for the input.\n- `cancelLabel?` (`string`) – Text for the cancel button.\n- `confirmLabel?` (`string`) – Text for the confirm button.\n- `keyboardType?` (`KeyboardType`) – The type of keyboard to display (e.g., numeric, email).\n\n#### Returns\n\n- A `Promise<string | null>` with the user's input, or `null` if canceled.\n\n#### Example\n\n```ts\nconst name = await Dialog.prompt({\n  title: 'Enter your name',\n  placeholder: 'Full name',\n  defaultValue: 'John Doe',\n  confirmLabel: 'Submit',\n  cancelLabel: 'Cancel'\n})\n\nif (name != null) {\n  console.log(`Hello, ${name}`)\n}\n```\n\n***\n\n### ▸ `Dialog.actionSheet(options: {...}): Promise<number | null>`\n\nDisplays an action sheet with multiple selectable options. Resolves to the index of the selected action, or `null` if canceled.\n\n#### Parameters\n\n- `title` (`string`) – Title of the action sheet.\n- `message?` (`string`) – Optional descriptive message.\n- `cancelButton?` (`boolean`) – Whether to show a cancel button. Defaults to `true`.\n- `actions` (`{ label: string, destructive?: boolean }[]`) – A list of actions. Use `destructive: true` to visually highlight a destructive action.\n\n#### Returns\n\n- A `Promise<number | null>` indicating the index of the selected action, or `null` if the user canceled.\n\n#### Example\n\n```ts\nconst index = await Dialog.actionSheet({\n  title: 'Do you want to delete this image?',\n  actions: [\n    { label: 'Delete', destructive: true },\n    { label: 'Keep' }\n  ]\n})\n\nif (index === 0) {\n  // User chose \"Delete\"\n} else if (index === 1) {\n  // User chose \"Keep\"\n} else {\n  // User canceled\n}\n```\n\n***\n\n## Summary\n\n| Function      | Purpose                          | Return Type                |   |\n| ------------- | -------------------------------- | -------------------------- | - |\n| `alert`       | Show a message with an OK button | `Promise<void>`            |   |\n| `confirm`     | Ask for confirmation (Yes/No)    | `Promise<boolean>`         |   |\n| `prompt`      | Ask for user input               | `Promise<string  \\| null>` |   |\n| `actionSheet` | Show multiple options            | `Promise<number  \\| null>` |   |\n","routePath":"/doc/Views/Dialog/","lang":"en","toc":[{"id":"module-dialog","text":"Module: `Dialog`","depth":2,"charIndex":255},{"id":"-dialogalertoptions--message-string-title-string-buttonlabel-string--promisevoid","text":"▸ `Dialog.alert(options: { message: string, title?: string, buttonLabel?: string }): Promise<void>`","depth":3,"charIndex":276},{"id":"parameters","text":"Parameters","depth":4,"charIndex":542},{"id":"returns","text":"Returns","depth":4,"charIndex":773},{"id":"example","text":"Example","depth":4,"charIndex":854},{"id":"-dialogconfirmoptions--message-string-title-string-cancellabel-string-confirmlabel-string--promiseboolean","text":"▸ `Dialog.confirm(options: { message: string, title?: string, cancelLabel?: string, confirmLabel?: string }): Promise<boolean>`","depth":3,"charIndex":1004},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":1275},{"id":"returns-1","text":"Returns","depth":4,"charIndex":1548},{"id":"example-1","text":"Example","depth":4,"charIndex":1616},{"id":"-dialogpromptoptions--promisestring--null","text":"▸ `Dialog.prompt(options: {...}): Promise<string | null>`","depth":3,"charIndex":1861},{"id":"parameters-2","text":"Parameters","depth":4,"charIndex":2056},{"id":"returns-2","text":"Returns","depth":4,"charIndex":2709},{"id":"example-2","text":"Example","depth":4,"charIndex":2799},{"id":"-dialogactionsheetoptions--promisenumber--null","text":"▸ `Dialog.actionSheet(options: {...}): Promise<number | null>`","depth":3,"charIndex":3056},{"id":"parameters-3","text":"Parameters","depth":4,"charIndex":3253},{"id":"returns-3","text":"Returns","depth":4,"charIndex":3610},{"id":"example-3","text":"Example","depth":4,"charIndex":3731},{"id":"summary","text":"Summary","depth":2,"charIndex":4058}],"frontmatter":{},"version":"","description":"The Dialog module provides convenient methods to present various types of user interface dialogs such as alerts, confirmations, prompts, and action sheets. These dialogs are useful for requesting user input or interaction during script execution."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Dialog\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Button\n        title={\"Dialog.alert\"}\n        action={async () => {\n          await Dialog.alert({\n            message: \"This is message\",\n            title: \"Alert\",\n          })\n          console.log(\"Alert dismissed\")\n        }}\n      />\n\n      <Button\n        title={\"Dialog.prompt\"}\n        action={async () => {\n          const result = await Dialog.prompt({\n            title: \"Rename script\",\n            placeholder: \"Enter script name\",\n          })\n\n          Dialog.alert({\n            message: result == null\n              ? \"You cancel the prompt\"\n              : \"The new script name is: \" + result\n          })\n        }}\n      />\n\n      <Button\n        title={\"Dialog.actionSheet\"}\n        action={async () => {\n          const selectedIndex = await Dialog.actionSheet({\n            title: \"Are you sure to delete this script?\",\n            message: \"This operation cannot be undone.\",\n            cancelButton: true,\n            actions: [\n              {\n                label: \"Delete\",\n                destructive: true,\n              }\n            ]\n          })\n\n          if (selectedIndex === 0) {\n            Dialog.alert({\n              message: \"The script is deleted.\"\n            })\n          }\n        }}\n      />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Dialog/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Displaying text","content":"The `Text` component is used to display one or more lines of read-only text in the Scripting app. It supports plain text, attributed text (Markdown), and rich text styling.\n\n***\n\n## **Type Definitions**\n\n### `TextProps`\n\nDefines the properties that can be passed to the `Text` component. There are three possible structures for the `TextProps` type:\n\n1. **Plain Text Props**\n   - `children` (optional):\n     - Type: `null | string | number | boolean | Array<string | number | boolean | undefined | null>`\n     - Description: The content to render as plain text. Can be a single value or an array of values.\n   - Example:\n     ```tsx\n     <Text>Simple plain text</Text>\n     ```\n\n2. **Markdown Text Props**\n   - `attributedString` (optional):\n     - Type: `string`\n     - Description: Specifies the text content in Markdown format.\n   - Example:\n     ```tsx\n     <Text attributedString=\"**Bold** _Italic_ [Link](https://example.com)\" />\n     ```\n\n3. **Rich Text Props**\n   - `styledText` (optional):\n     - Type: `StyledText`\n     - Description: Specifies rich text content with customizable styles and attributes.\n   - Example:\n     ```tsx\n     const richText: StyledText = {\n       font: \"title\",\n       bold: true,\n       underlineStyle: \"single\",\n       underlineColor: \"#0000FF\",\n       content: \"Rich styled text\"\n     }\n     <Text styledText={richText} />\n     ```\n\n***\n\n### `UnderlineStyle`\n\nDefines the available underline styles for rich text:\n\n- `\"byWord\"`: Underline each word.\n- `\"double\"`: Double underline.\n- `\"patternDash\"`: Dashed underline.\n- `\"patternDashDot\"`: Dash-dot underline.\n- `\"patternDashDotDot\"`: Dash-dot-dot underline.\n- `\"patternDot\"`: Dotted underline.\n- `\"single\"`: Single underline.\n- `\"thick\"`: Thick underline.\n\n***\n\n### `StyledText`\n\nDefines the structure for rich text styling:\n\n- `font` (optional): Specifies the font name. Example: `\"title\"`, `\"body\"`.\n- `fontDesign` (optional): Customizes the font design. Example: `\"serif\"`, `\"monospaced\"`.\n- `fontWeight` (optional): Adjusts font weight. Example: `\"light\"`, `\"bold\"`.\n- `italic` (optional): Adds italic styling. Type: `boolean`.\n- `bold` (optional): Adds bold styling. Type: `boolean`.\n- `baselineOffset` (optional): Adjusts text's baseline position. Type: `number`.\n- `kerning` (optional): Adjusts spacing between characters. Type: `number`.\n- `monospaced` (optional): Uses a monospaced font. Type: `boolean`.\n- `monospacedDigit` (optional): Ensures consistent width for numeric characters. Type: `boolean`.\n- `underlineColor` (optional): Color for the underline. Type: `Color`.\n- `underlineStyle` (optional): Style for the underline. Type: `UnderlineStyle`.\n- `strokeColor` (optional): Color for the text stroke. Type: `Color`.\n- `strokeWidth` (optional): Width of the text stroke. Type: `number`.\n- `strikethroughColor` (optional): Color for the strikethrough. Type: `Color`.\n- `strikethroughStyle` (optional): Style for the strikethrough. Type: `UnderlineStyle`.\n- `foregroundColor` (optional): Text color. Type: `Color`.\n- `backgroundColor` (optional): Background color for the text. Type: `Color`.\n- `content` (required): Specifies the text content. Can be a string or an array of strings and `StyledText` objects.\n- `link` (optional): URL to linkify the text. Type: `string`.\n- `onTapGesture` (optional): A function to execute when the text is tapped. Type: `() => void`.\n\n***\n\n## **`Text` Component**\n\n### **Description**\n\nA view that displays one or more lines of read-only text. The content can be styled using the properties in `TextProps`.\n\n### **Example Usages**\n\n1. **Plain Text**\n   ```tsx\n   <Text font=\"title\">\n     Hello world!\n   </Text>\n   ```\n\n2. **Markdown Text**\n   ```tsx\n   <Text attributedString=\"This is **bold**, _italic_, and a [link](https://example.com).\" />\n   ```\n\n3. **Rich Text**\n   ```tsx\n   const richText: StyledText = {\n     font: \"body\",\n     bold: true,\n     underlineStyle: \"single\",\n     underlineColor: \"#00FF00\",\n     foregroundColor: \"#FF0000\",\n     content: [\n       \"Part 1, \",\n       {\n         content: \"Styled\",\n         italic: true,\n         strokeColor: \"#0000FF\",\n         strokeWidth: 2\n       },\n       \", Part 2\"\n     ]\n   }\n\n   <Text styledText={richText} />\n   ```\n\n***\n\n## Notes\n\n- **Default Font:** When `font` is not specified, the default system font is used.\n- **Performance:** For dynamic or frequently updating content, ensure the `styledText` object remains immutable to avoid unnecessary re-renders.\n- **Tap Gestures:** Use the `onTapGesture` property within `StyledText` to add interactivity.\n","routePath":"/doc/Views/Displaying text/","lang":"en","toc":[{"id":"type-definitions","text":"**Type Definitions**","depth":2,"charIndex":179},{"id":"textprops","text":"`TextProps`","depth":3,"charIndex":204},{"id":"underlinestyle","text":"`UnderlineStyle`","depth":3,"charIndex":1377},{"id":"styledtext","text":"`StyledText`","depth":3,"charIndex":1753},{"id":"text-component","text":"**`Text` Component**","depth":2,"charIndex":3379},{"id":"description","text":"**Description**","depth":3,"charIndex":3404},{"id":"example-usages","text":"**Example Usages**","depth":3,"charIndex":3547},{"id":"notes","text":"Notes","depth":2,"charIndex":4225}],"frontmatter":{},"version":"","description":"The Text component is used to display one or more lines of read-only text in the Scripting app. It supports plain text, attributed text (Markdown), and rich text styling."},{"title":"Example","content":"```tsx\n\n\nfunction View() {\n  return <NavigationStack>\n    <List>\n      <Section title={\"Text\"}>\n        <VStack>\n          <Text\n            font={\"title\"}\n            foregroundStyle={\"systemRed\"}\n          >\n            Title\n          </Text>\n          <Text\n            font={\"body\"}\n            foregroundStyle={\"systemBlue\"}\n          >Hello Scripting!</Text>\n          <Text\n            foregroundStyle={\"systemGreen\"}\n            font={\"footnote\"}\n            italic\n          >\n            This is a footnote.\n          </Text>\n        </VStack>\n      </Section>\n\n      <Section title=\"AttributedString\">\n        <Text\n          attributedString={`This is regular text.\n* This is **bold** text, this is *italic* text, and this is ***bold, italic*** text.\n~~A strikethrough example~~\n\\`Monospaced works too\\`\nVisit Apple: [click here](https://apple.com)`}\n        />\n      </Section>\n\n      <Section title={\"Label\"}>\n        <Label\n          title={\"Hello world\"}\n          systemImage={\"globe\"}\n        />\n      </Section>\n\n      <Section title={\"Markdown\"}>\n        <Markdown\n          content={`\n# Scripting App\nRun your *ideas* quickly **with** scripts.\n      `}\n        />\n      </Section>\n\n      <Section title={\"RichText\"}>\n        <Text\n          font={16}\n          styledText={{\n            content: [\n              \"I agree the \",\n              {\n                content: \"Terms\",\n                foregroundColor: \"systemOrange\",\n                underlineColor: \"systemBlue\",\n                bold: true,\n                onTapGesture: () => {\n                  Dialog.alert({\n                    message: \"OK!\"\n                  })\n                }\n              }\n            ]\n          }}\n        />\n      </Section>\n\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present(<View />)\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Displaying text/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Editor","content":"A powerful code editor that can be controlled programmatically or embedded into a user interface. It supports syntax highlighting, read/write access, and flexible presentation using the `EditorController` class and the `Editor` component.\n\n***\n\n## EditorController\n\n### Overview\n\n`EditorController` is used to manage an instance of the editor. It allows you to configure the editor content, track changes, present the UI, and release resources.\n\n### Constructor\n\nCreates a new editor controller instance.\n\n**Parameters**:\n\n- `content` (optional): The initial text content displayed in the editor.\n- `ext` (optional): The file extension used to determine syntax highlighting. Supported values include `tsx`, `ts`, `js`, `jsx`, `txt`, `md`, `css`, `html`, and `json`.\n- `readOnly` (optional): If `true`, the editor is set to read-only mode. Defaults to `false`.\n\n***\n\n### Properties\n\n#### `ext`\n\nA read-only string indicating the file extension type provided during initialization. It determines the language syntax used in the editor.\n\n#### `content`\n\nA string representing the current content of the editor. You can assign a new value to update the editor programmatically.\n\n#### `onContentChanged`\n\nAn optional callback function that will be triggered when the content is changed by the user. This callback is **not called immediately**, but approximately 100 milliseconds after editing occurs. This allows for debounced content tracking or autosave behavior.\n\n***\n\n### Methods\n\n#### `present(options?)`\n\nDisplays the editor modally.\n\n**Parameters**:\n\n- `navigationTitle` (optional): Set the navigation title of the editor.\n- `scriptName` (optional): A custom script name that overrides the default `Script.name` while the editor is running. Defaults to `\"Temporary Script\"`.\n- `fullscreen` (optional): A boolean value that determines whether the editor should be presented in fullscreen mode. Defaults to `false`.\n\n**Returns**: A Promise that resolves when the editor is dismissed.\n\n#### `dismiss()`\n\nDismisses the currently presented editor view. This does **not** dispose of the controller instance, so you can call `present()` again later.\n\n**Returns**: A Promise that resolves when dismissal is complete.\n\n#### `dispose()`\n\nReleases the resources held by the editor controller. This must be called when the controller is no longer needed to avoid memory leaks. Once disposed, the controller cannot be used again.\n\n***\n\n## Editor Component\n\nThe `Editor` component is a React-style view that renders the editor inline within your UI. It is typically used in conjunction with an `EditorController` instance.\n\n**Props**:\n\n- `controller`: An `EditorController` instance that manages the editor's content and behavior.\n- `scriptName` (optional): Overrides the default script name for the embedded editor session.\n- `showAccessoryView` (optional): Whether to show the accessory view when the keyboard is visible. This is useful for showing buttons like \"Move Left\", \"Move Right\", \"Delete\", \"Dissmiss Keyboard\", etc. Defaults to `false`. It is recommended to set this to `true` when the editor is fully visible on the screen, such as when the editor is the only view in the screen.\n\n***\n\n### Example Usage\n\n```tsx\nfunction MyEditor() {\n  const controller = useMemo(() => {\n    return new EditorController({\n      content: `const text = \"Hello, World!\"`,\n      ext: \"ts\",\n      readOnly: false,\n    })\n  }, [])\n  \n  useEffect(() => {\n    return () => {\n      controller.dispose()\n    }\n  }, [controller])\n\n  return (\n    <Editor\n      controller={controller}\n      scriptName=\"My Script\"\n      showAccessoryView\n    />\n  )\n}\n```\n","routePath":"/doc/Views/Editor","lang":"en","toc":[{"id":"editorcontroller","text":"EditorController","depth":2,"charIndex":245},{"id":"overview","text":"Overview","depth":3,"charIndex":266},{"id":"constructor","text":"Constructor","depth":3,"charIndex":446},{"id":"properties","text":"Properties","depth":3,"charIndex":866},{"id":"ext","text":"`ext`","depth":4,"charIndex":882},{"id":"content","text":"`content`","depth":4,"charIndex":1035},{"id":"oncontentchanged","text":"`onContentChanged`","depth":4,"charIndex":1175},{"id":"methods","text":"Methods","depth":3,"charIndex":1467},{"id":"presentoptions","text":"`present(options?)`","depth":4,"charIndex":1480},{"id":"dismiss","text":"`dismiss()`","depth":4,"charIndex":1985},{"id":"dispose","text":"`dispose()`","depth":4,"charIndex":2212},{"id":"editor-component","text":"Editor Component","depth":2,"charIndex":2425},{"id":"example-usage","text":"Example Usage","depth":3,"charIndex":3186}],"frontmatter":{},"version":"","description":"A powerful code editor that can be controlled programmatically or embedded into a user interface. It supports syntax highlighting, read/write access, and flexible presentation using the EditorController class and the Editor component."},{"title":"EnvironmentValuesReader","content":"`EnvironmentValuesReader` is a Scripting component that allows you to read environment values from the current view hierarchy.\nIt serves a similar role to SwiftUI’s `@Environment`, but with a more explicit and controlled design:\n**You must specify which environment keys you want to read**, and the component will inject only those values into the `children` callback.\n\nThis makes environment access predictable, explicit, and optimized.\n\n***\n\n# EnvironmentValues Type\n\n```ts\ntype EnvironmentValues = {\n    colorScheme: ColorScheme;\n    colorSchemeContrast: ColorSchemeContrast;\n    displayScale: number;\n    horizontalSizeClass: UserInterfaceSizeClass | null;\n    verticalSizeClass: UserInterfaceSizeClass | null;\n    dismiss: () => void;\n    dismissSearch: () => void;\n    editMode: EditMode | null;\n    widgetRenderingMode: WidgetRenderingMode;\n    showsWidgetContainerBackground: boolean;\n    isSearching: boolean;\n    isPresented: boolean;\n    activityFamily: \"small\" | \"medium\";\n    tabViewBottomAccessoryPlacement: 'expanded' | 'inline';\n};\n```\n\nBelow are the descriptions of each field.\n\n***\n\n# Field Descriptions\n\n### 1. colorScheme\n\nType: `ColorScheme`\nThe current system color appearance (`light` or `dark`).\n\n***\n\n### 2. colorSchemeContrast\n\nType: `ColorSchemeContrast`\nRepresents contrast settings such as `standard` or `increased`.\n\n***\n\n### 3. displayScale\n\nType: `number`\nThe display scale factor of the device (e.g., **2.0**, **3.0**).\n\n***\n\n### 4. horizontalSizeClass\n\nType: `UserInterfaceSizeClass | null`\nThe horizontal size class of the current environment: `compact` or `regular`.\n\n***\n\n### 5. verticalSizeClass\n\nType: `UserInterfaceSizeClass | null`\nThe vertical size class, same categories as above.\n\n***\n\n### 6. dismiss\n\nType: `() => void`\nA function to dismiss the currently presented view (equivalent to SwiftUI’s `dismiss()`).\n\n***\n\n### 7. dismissSearch\n\nType: `() => void`\nA function that dismisses the current searchable field, if active.\n\n***\n\n### 8. editMode\n\nType: `EditMode | null`\nIndicates whether the view is in editing mode (e.g., during List editing).\n\n***\n\n### 9. widgetRenderingMode\n\nType: `WidgetRenderingMode`\nThe current widget rendering mode (e.g., `fullColor`, `accented`).\n\n***\n\n### 10. showsWidgetContainerBackground\n\nType: `boolean`\nIndicates whether the widget is showing the system-provided container background.\n\n***\n\n### 11. isSearching\n\nType: `boolean`\nWhether the view is currently in a searching state triggered by `searchable`.\n\n***\n\n### 12. isPresented\n\nType: `boolean`\nWhether the view is currently being shown, unlike `onAppear` which is called every time the view appears, `isPresented` is called only once when the view is first shown.\n\n***\n\n### 13. activityFamily\n\nType: `\"small\" | \"medium\"`\nThe current LiveActivity size, similar to SwiftUI's `activityFamily`, used to determine the size of LiveActivity UI.\n\n***\n\n### 14. tabViewBottomAccessoryPlacement\n\nType: `'expanded' | 'inline'`\nThe current TabView bottom accessory placement, similar to SwiftUI's `tabViewBottomAccessoryPlacement`.\n\n***\n\n# EnvironmentValuesReader Component\n\n```ts\ntype EnvironmentValuesReaderProps = {\n    /**\n     * The keys to read from the environment values.\n     */\n    keys: Array<keyof EnvironmentValues>;\n    /**\n     * The callback function that receives the environment values.\n     */\n    children: (values: EnvironmentValues) => VirtualNode;\n};\n```\n\n***\n\n# Props Description\n\n### keys\n\nType: `Array<keyof EnvironmentValues>`\nSpecifies exactly which environment keys you want to read.\nOnly these keys will be retrieved and passed to the callback.\n\n***\n\n### children(values)\n\nType: `(values: EnvironmentValues) => VirtualNode`\nA rendering callback that receives the requested environment values and returns the corresponding view.\n\n***\n\n# Component Definition\n\n```ts\ndeclare const EnvironmentValuesReader: FunctionComponent<EnvironmentValuesReaderProps>;\n```\n\n***\n\n# Usage Examples\n\n## Example 1 — Reading colorScheme and displayScale\n\n```tsx\n\n\nfunction View() {\n  return <EnvironmentValuesReader keys={[\"colorScheme\", \"displayScale\"]}>\n    {(env) => {\n      return <VStack>\n        <Text>Color Scheme: {env.colorScheme}</Text>\n        <Text>Scale: {env.displayScale}</Text>\n      </VStack>\n    }}\n  </EnvironmentValuesReader>\n}\n```\n\n***\n\n## Example 2 — Accessing dismiss\n\n```tsx\n<EnvironmentValuesReader keys={[\"dismiss\"]}>\n  {(env) => {\n    return <Button\n      title=\"Close\"\n      action={() => env.dismiss()}\n    />\n  }}\n</EnvironmentValuesReader>\n```\n\n***\n\n## Example 3 — Dynamic layout using size classes\n\n```tsx\n<EnvironmentValuesReader keys={[\"horizontalSizeClass\"]}>\n  {(env) => {\n    const compact = env.horizontalSizeClass === \"compact\"\n    return compact\n      ? <Text>Compact Layout</Text>\n      : <Text>Regular Layout</Text>\n  }}\n</EnvironmentValuesReader>\n```\n\n***\n\n# Behavior Notes\n\n1. **Only the explicitly listed keys are read**. All other environment values will not be included in the callback.\n2. When any of the requested environment values change, the `children()` callback re-renders automatically.\n3. `dismiss` and `dismissSearch` are real functional operations that behave like their SwiftUI equivalents.\n4. Environment values originate from the parent view hierarchy (Navigation, searchable, editMode, Widget context, etc.).\n5. If a key is not included in `keys`, it will not appear in the `values` object.\n6. This API is not intended for global state management—only for accessing the contextual environment of the current view.\n","routePath":"/doc/Views/EnvironmentValuesReader","lang":"en","toc":[{"id":"1-colorscheme","text":"1. colorScheme","depth":3,"charIndex":1123},{"id":"2-colorschemecontrast","text":"2. colorSchemeContrast","depth":3,"charIndex":1226},{"id":"3-displayscale","text":"3. displayScale","depth":3,"charIndex":1352},{"id":"4-horizontalsizeclass","text":"4. horizontalSizeClass","depth":3,"charIndex":1459},{"id":"5-verticalsizeclass","text":"5. verticalSizeClass","depth":3,"charIndex":1609},{"id":"6-dismiss","text":"6. dismiss","depth":3,"charIndex":1730},{"id":"7-dismisssearch","text":"7. dismissSearch","depth":3,"charIndex":1861},{"id":"8-editmode","text":"8. editMode","depth":3,"charIndex":1975},{"id":"9-widgetrenderingmode","text":"9. widgetRenderingMode","depth":3,"charIndex":2097},{"id":"10-showswidgetcontainerbackground","text":"10. showsWidgetContainerBackground","depth":3,"charIndex":2226},{"id":"11-issearching","text":"11. isSearching","depth":3,"charIndex":2370},{"id":"12-ispresented","text":"12. isPresented","depth":3,"charIndex":2491},{"id":"13-activityfamily","text":"13. activityFamily","depth":3,"charIndex":2704},{"id":"14-tabviewbottomaccessoryplacement","text":"14. tabViewBottomAccessoryPlacement","depth":3,"charIndex":2878},{"id":"keys","text":"keys","depth":3,"charIndex":3426},{"id":"childrenvalues","text":"children(values)","depth":3,"charIndex":3602},{"id":"example-1--reading-colorscheme-and-displayscale","text":"Example 1 — Reading colorScheme and displayScale","depth":2,"charIndex":3931},{"id":"example-2--accessing-dismiss","text":"Example 2 — Accessing dismiss","depth":2,"charIndex":4287},{"id":"example-3--dynamic-layout-using-size-classes","text":"Example 3 — Dynamic layout using size classes","depth":2,"charIndex":4510}],"frontmatter":{},"version":"","description":"EnvironmentValuesReader is a Scripting component that allows you to read environment values from the current view hierarchy.\nIt serves a similar role to SwiftUI’s @Environment, but with a more explicit and controlled design:\nYou must specify which environment keys you want to read, and the component will inject only those values into the children callback. This makes environment access predictable, explicit, and optimized. Below are the descriptions of each field. 1. colorScheme Type: ColorScheme\nThe current system color appearance (light or dark). 2. colorSchemeContrast Type: ColorSchemeContrast\nRepresents contrast settings such as standard or increased. 3. displayScale Type: number\nThe display scale factor of the device (e.g., 2.0, 3.0). 4. horizontalSizeClass Type: UserInterfaceSizeClass | null\nThe horizontal size class of the current environment: compact or regular. 5. verticalSizeClass Type: UserInterfaceSizeClass | null\nThe vertical size class, same categories as above. 6. dismiss Type: () => void\nA function to dismiss the currently presented view (equivalent to SwiftUI’s dismiss()). 7. dismissSearch Type: () => void\nA function that dismisses the current searchable field, if active. 8. editMode Type: EditMode | null\nIndicates whether the view is in editing mode (e.g., during List editing). 9. widgetRenderingMode Type: WidgetRenderingMode\nThe current widget rendering mode (e.g., fullColor, accented). 10. showsWidgetContainerBackground Type: boolean\nIndicates whether the widget is showing the system-provided container background. 11. isSearching Type: boolean\nWhether the view is currently in a searching state triggered by searchable. 12. isPresented Type: boolean\nWhether the view is currently being shown, unlike onAppear which is called every time the view appears, isPresented is called only once when the view is first shown. 13. activityFamily Type: \"small\" | \"medium\"\nThe current LiveActivity size, similar to SwiftUI's activityFamily, used to determine the size of LiveActivity UI. 14. tabViewBottomAccessoryPlacement Type: 'expanded' | 'inline'\nThe current TabView bottom accessory placement, similar to SwiftUI's tabViewBottomAccessoryPlacement. keys Type: Array<keyof EnvironmentValues>\nSpecifies exactly which environment keys you want to read.\nOnly these keys will be retrieved and passed to the callback. children(values) Type: (values: EnvironmentValues) => VirtualNode\nA rendering callback that receives the requested environment values and returns the corresponding view."},{"title":"GeometryReader","content":"`GeometryReader` in Scripting is the equivalent of SwiftUI’s GeometryReader. It provides layout information about the container in which its content is placed, including size, safe-area insets, and (on supported systems) container corner insets.\n\nThis component is essential for building responsive layouts that depend on the parent container’s geometry.\n\n***\n\n# GeometryProxy\n\nWhen `GeometryReader` constructs its child content, it injects a `GeometryProxy` instance into the `children` callback. This proxy exposes real-time layout information about the container.\n\n```ts\ninterface GeometryProxy {\n  readonly size: Size;\n  readonly safeAreaInsets: {\n    leading: number;\n    top: number;\n    trailing: number;\n    bottom: number;\n  };\n  /**\n   * Requires iOS 26.0+.\n   */\n  readonly containerCornerInsets: {\n    bottomLeading: Size;\n    bottomTrailing: Size;\n    topLeading: Size;\n    topTrailing: Size;\n  } | null;\n}\n```\n\n***\n\n# GeometryProxy Properties\n\n## 1. size\n\n```ts\nreadonly size: Size\n```\n\nThe actual size of the container during layout.\n\n### Size structure\n\n```ts\ntype Size = {\n  width: number\n  height: number\n}\n```\n\nUse this property when calculating adaptive layout behavior, such as scaling, alignment, or proportional spacing.\n\n***\n\n## 2. safeAreaInsets\n\n```ts\nreadonly safeAreaInsets: {\n  leading: number\n  top: number\n  trailing: number\n  bottom: number\n}\n```\n\nRepresents the safe-area insets of the current container.\nThis ensures content does not overlap with the device notch, home indicator, or other system UI elements.\n\n### Common use cases\n\n- Adjusting content away from the screen edges\n- Implementing custom navigation bars or toolbars\n- Ensuring layout compatibility across devices\n\n***\n\n## 3. containerCornerInsets (iOS 26.0+)\n\n```ts\nreadonly containerCornerInsets: {\n  bottomLeading: Size\n  bottomTrailing: Size\n  topLeading: Size\n  topTrailing: Size\n} | null\n```\n\nAvailable only on **iOS 26+**.\nProvides layout insets corresponding to the physical or visual rounded corners of the container.\n\n### Use cases\n\n- Adapting UI for windowed environments\n- Handling rounded container corners (Stage Manager, split view, floating scenes)\n- Performing precision layout aligned to dynamic corner geometry\n\nIf the platform does not support it, the value will be `null`.\n\n***\n\n# GeometryReader Component\n\n```ts\ntype GeometryReaderProps = {\n  children: (proxy: GeometryProxy) => VirtualNode;\n};\ndeclare const GeometryReader: FunctionComponent<GeometryReaderProps>;\n```\n\n## Props\n\n| Name     | Type                                    | Required | Description                                                               |\n| -------- | --------------------------------------- | -------- | ------------------------------------------------------------------------- |\n| children | `(proxy: GeometryProxy) => VirtualNode` | Yes      | A callback that receives the geometry proxy and returns the view content. |\n\n***\n\n# Behavior\n\n1. GeometryReader occupies the available space in its parent.\n2. During layout, it computes size, safe-area insets, and corner insets.\n3. It passes these values to the `children(proxy)` callback.\n4. The returned VirtualNode content is laid out using these values.\n\nThis behavior matches SwiftUI’s GeometryReader model.\n\n***\n\n# Example: Centered Content\n\n```tsx\n\n\nfunction View() {\n  return <GeometryReader>\n    {(proxy) => {\n      return <VStack\n        frame={{\n          width: proxy.size.width,\n          height: proxy.size.height,\n          alignment: \"center\"\n        }}\n      >\n        <Text>Hello Geometry</Text>\n        <Text>\n          width: {proxy.size.width}\n        </Text>\n        <Text>\n          height: {proxy.size.height}\n        </Text>\n      </VStack>\n    }}\n  </GeometryReader>\n}\n```\n\n***\n\n# Example: Adjusting Layout by Safe Area\n\n```tsx\n<GeometryReader>\n  {(proxy) => {\n    return <VStack\n      padding={{\n        top: proxy.safeAreaInsets.top,\n        bottom: proxy.safeAreaInsets.bottom\n      }}\n    >\n      <Text>Content inside safe area.</Text>\n    </VStack>\n  }}\n</GeometryReader>\n```\n\n***\n\n# Example (iOS 26+): Using containerCornerInsets\n\n```tsx\n<GeometryReader>\n  {(proxy) => {\n    const corners = proxy.containerCornerInsets\n    return <Text>\n      {corners == null\n        ? \"Corner insets not available\"\n        : `Top Leading Corner: ${corners.topLeading.width}, ${corners.topLeading.height}`\n      }\n    </Text>\n  }}\n</GeometryReader>\n```\n\n***\n\n# Best Practices\n\n- Use GeometryReader only when needed, as it creates a flexible layout container.\n- Prefer using it for adaptive, responsive layouts where container size matters.\n- Avoid placing complex or deeply nested views inside GeometryReader unless required.\n","routePath":"/doc/Views/GeometryReader","lang":"en","toc":[{"id":"1-size","text":"1. size","depth":2,"charIndex":958},{"id":"size-structure","text":"Size structure","depth":3,"charIndex":1050},{"id":"2-safeareainsets","text":"2. safeAreaInsets","depth":2,"charIndex":1250},{"id":"common-use-cases","text":"Common use cases","depth":3,"charIndex":1545},{"id":"3-containercornerinsets-ios-260","text":"3. containerCornerInsets (iOS 26.0+)","depth":2,"charIndex":1717},{"id":"use-cases","text":"Use cases","depth":3,"charIndex":2025},{"id":"props","text":"Props","depth":2,"charIndex":2489}],"frontmatter":{},"version":"","description":"GeometryReader in Scripting is the equivalent of SwiftUI’s GeometryReader. It provides layout information about the container in which its content is placed, including size, safe-area insets, and (on supported systems) container corner insets. This component is essential for building responsive layouts that depend on the parent container’s geometry. When GeometryReader constructs its child content, it injects a GeometryProxy instance into the children callback. This proxy exposes real-time layout information about the container."},{"title":"Gestures","content":"The **Scripting app** provides a gesture system similar to SwiftUI, allowing any view (`<VStack>`, `<HStack>`, `<Text>`, etc.) to respond to touch interactions such as tapping, long pressing, dragging, rotating, and magnifying.\n\nYou can use:\n\n- Simplified gesture properties like `onTapGesture`, `onLongPressGesture`, `onDragGesture`, or\n- Advanced gesture objects such as `TapGesture()`, `LongPressGesture()`, and the `gesture` modifiers for composition and priority control.\n\n***\n\n## 1. Simple Gesture Properties\n\nThese are convenient, shorthand ways to add gestures directly to a view.\n\n***\n\n### `onTapGesture`\n\nExecutes an action when a tap gesture is recognized.\n\n#### Type\n\n```ts\nonTapGesture?: (() => void) | {\n  count: number\n  perform: () => void\n}\n```\n\n#### Parameters\n\n| Name      | Type         | Default | Description                                                  |\n| --------- | ------------ | ------- | ------------------------------------------------------------ |\n| `count`   | `number`     | `1`     | Number of taps required (1 for single tap, 2 for double tap) |\n| `perform` | `() => void` | —       | Action to perform when the tap is recognized                 |\n\n#### Examples\n\n```tsx\n// Single tap\n<VStack onTapGesture={() => console.log('Tapped')} />\n\n// Double tap\n<HStack\n  onTapGesture={{\n    count: 2,\n    perform: () => console.log('Double tapped')\n  }}\n/>\n```\n\n***\n\n### `onLongPressGesture`\n\nExecutes an action when a long press gesture is recognized.\n\n#### Type\n\n```ts\nonLongPressGesture?: (() => void) | {\n  minDuration?: number\n  maxDuration?: number\n  perform: () => void\n  onPressingChanged?: (state: boolean) => void\n}\n```\n\n#### Parameters\n\n| Name                | Type                       | Default | Description                                             |\n| ------------------- | -------------------------- | ------- | ------------------------------------------------------- |\n| `minDuration`       | `number`                   | `500`   | Minimum press duration (ms) before the gesture succeeds |\n| `maxDuration`       | `number`                   | `10000` | Maximum duration before the gesture fails (ms)          |\n| `perform`           | `() => void`               | —       | Action to execute when the long press succeeds          |\n| `onPressingChanged` | `(state: boolean) => void` | —       | Called when pressing starts or ends (`true` = pressing) |\n\n#### Examples\n\n```tsx\n// Simple usage\n<VStack onLongPressGesture={() => console.log('Long pressed')} />\n\n// Custom duration and press state callback\n<HStack\n  onLongPressGesture={{\n    minDuration: 800,\n    maxDuration: 3000,\n    perform: () => console.log('Long press success'),\n    onPressingChanged: isPressing =>\n      console.log(isPressing ? 'Pressing...' : 'Released')\n  }}\n/>\n```\n\n***\n\n### `onDragGesture`\n\nAdds a drag gesture to a view, tracking position, offset, and velocity.\n\n#### Type\n\n```ts\nonDragGesture?: {\n  minDistance?: number\n  coordinateSpace?: 'local' | 'global'\n  onChanged?: (details: DragGestureDetails) => void\n  onEnded?: (details: DragGestureDetails) => void\n}\n```\n\n#### Parameters\n\n| Name              | Type                                    | Default    | Description                                            |                                 |\n| ----------------- | --------------------------------------- | ---------- | ------------------------------------------------------ | ------------------------------- |\n| `minDistance`     | `number`                                | `10`       | Minimum movement (in points) before the gesture starts |                                 |\n| `coordinateSpace` | `'local'`                               | `'global'` | `'local'`                                              | Coordinate space of the gesture |\n| `onChanged`       | `(details: DragGestureDetails) => void` | —          | Called as the drag changes                             |                                 |\n| `onEnded`         | `(details: DragGestureDetails) => void` | —          | Called when the drag ends                              |                                 |\n\n#### `DragGestureDetails`\n\n```ts\ntype DragGestureDetails = {\n  time: number\n  location: Point\n  startLocation: Point\n  translation: Size\n  velocity: Size\n  predictedEndLocation: Point\n  predictedEndTranslation: Size\n}\n```\n\n| Field                     | Description                              |\n| ------------------------- | ---------------------------------------- |\n| `time`                    | Timestamp of the drag event (ms)         |\n| `location`                | Current pointer position `{x, y}`        |\n| `startLocation`           | Initial drag position                    |\n| `translation`             | Offset from start to current position    |\n| `velocity`                | Current velocity in points per second    |\n| `predictedEndLocation`    | Predicted end position based on velocity |\n| `predictedEndTranslation` | Predicted total translation              |\n\n#### Example\n\n```tsx\n<VStack\n  onDragGesture={{\n    minDistance: 5,\n    coordinateSpace: 'global',\n    onChanged: details => {\n      console.log('Location:', details.location)\n      console.log('Offset:', details.translation)\n    },\n    onEnded: details => {\n      console.log('Predicted end:', details.predictedEndLocation)\n    }\n  }}\n/>\n```\n\n***\n\n## 2. Gesture Classes (Advanced Usage)\n\nFor complex interaction handling or gesture composition, use the gesture constructors and modifiers.\n\n***\n\n### `GestureInfo` Class\n\nAll gesture constructors return a `GestureInfo` object that defines configuration and callbacks.\n\n```ts\nclass GestureInfo<Options, Value> {\n  type: string\n  options: Options\n  onChanged(callback: (value: Value) => void): this\n  onEnded(callback: (value: Value) => void): this\n}\n```\n\n| Method                | Description                                              |\n| --------------------- | -------------------------------------------------------- |\n| `onChanged(callback)` | Called when the gesture changes (e.g. dragging, zooming) |\n| `onEnded(callback)`   | Called when the gesture finishes                         |\n\n#### Example\n\n```tsx\n<Text\n  gesture={\n    TapGesture()\n      .onEnded(() => console.log('Tapped'))\n  }\n/>\n```\n\n***\n\n### `TapGesture`\n\nDetects single or multiple taps.\n\n```ts\ndeclare function TapGesture(count?: number): GestureInfo<number | undefined, void>\n```\n\n| Parameter | Type     | Default | Description             |\n| --------- | -------- | ------- | ----------------------- |\n| `count`   | `number` | `1`     | Number of taps required |\n\n#### Example\n\n```tsx\n<Text\n  gesture={\n    TapGesture(2)\n      .onEnded(() => console.log('Double tapped'))\n  }\n/>\n```\n\n***\n\n### `LongPressGesture`\n\nDetects press and hold gestures.\n\n```ts\ndeclare function LongPressGesture(options?: LongPressGestureOptions): GestureInfo<LongPressGestureOptions, boolean>\n\ntype LongPressGestureOptions = {\n  minDuration?: number\n  maxDuration?: number\n}\n```\n\n| Parameter     | Default | Description                          |\n| ------------- | ------- | ------------------------------------ |\n| `minDuration` | `500`   | Minimum press duration (ms)          |\n| `maxDuration` | `10000` | Maximum duration before failure (ms) |\n\n#### Example\n\n```tsx\n<Text\n  gesture={\n    LongPressGesture({ minDuration: 800 })\n      .onChanged(() => console.log('Pressing...'))\n      .onEnded(() => console.log('Long press finished'))\n  }\n/>\n```\n\n***\n\n### `DragGesture`\n\nTracks finger or pointer movement.\n\n```ts\ndeclare function DragGesture(options?: DragGestureOptions): GestureInfo<DragGestureOptions, DragGestureDetails>\n\ntype DragGestureOptions = {\n  minDistance?: number\n  coordinateSpace?: 'local' | 'global'\n}\n```\n\n#### Example\n\n```tsx\n<VStack\n  gesture={\n    DragGesture({ coordinateSpace: 'global' })\n      .onChanged(d => console.log('Offset', d.translation))\n      .onEnded(d => console.log('Velocity', d.velocity))\n  }\n/>\n```\n\n***\n\n### `MagnifyGesture`\n\nDetects pinch zoom gestures.\n\n```ts\ndeclare function MagnifyGesture(minScaleDelta?: number | null): GestureInfo<number | null | undefined, MagnifyGestureValue>\n\ntype MagnifyGestureValue = {\n  time: Date\n  magnification: number\n  startAnchor: Point\n  startLocation: Point\n  velocity: number\n}\n```\n\n#### Example\n\n```tsx\n<Text\n  gesture={\n    MagnifyGesture(0.05)\n      .onChanged(v => console.log('Scale', v.magnification))\n      .onEnded(() => console.log('Zoom ended'))\n  }\n/>\n```\n\n***\n\n### `RotateGesture`\n\nDetects rotation gestures.\n\n```ts\ndeclare function RotateGesture(minAngleDelta?: Angle | null): GestureInfo<Angle | null | undefined, RotateGestureValue>\n\ntype RotateGestureValue = {\n  rotation: AngleValue\n  velocity: AngleValue\n  startAnchor: Point\n  time: Date\n}\n\ntype AngleValue = {\n  radians: number\n  degrees: number\n  magnitude: number\n  animatableData: number\n}\n```\n\n#### Example\n\n```tsx\n<ZStack\n  gesture={\n    RotateGesture()\n      .onChanged(v => console.log('Rotation', v.rotation.degrees))\n      .onEnded(() => console.log('Rotation ended'))\n  }\n/>\n```\n\n***\n\n## 3. Gesture Modifiers for Views\n\nAll views support the following gesture-related properties.\n\n```ts\ntype GesturesProps = {\n  gesture?: GestureProps\n  simultaneousGesture?: GestureProps\n  highPriorityGesture?: GestureProps\n  defersSystemGestures?: EdgeSet\n}\n```\n\n***\n\n### `gesture`\n\nAdds a gesture to the view.\n\n```tsx\n<Text\n  gesture={\n    TapGesture()\n      .onEnded(() => console.log('Tapped'))\n  }\n/>\n```\n\n***\n\n### `highPriorityGesture`\n\nAdds a gesture with higher priority than existing ones on the view.\n\n```tsx\n<Text\n  highPriorityGesture={\n    TapGesture(2)\n      .onEnded(() => console.log('Double tap takes priority'))\n  }\n/>\n```\n\n***\n\n### `simultaneousGesture`\n\nAllows multiple gestures to be recognized simultaneously.\n\n```tsx\n<Text\n  simultaneousGesture={\n    LongPressGesture()\n      .onEnded(() => console.log('Long pressed'))\n  }\n  gesture={\n    TapGesture()\n      .onEnded(() => console.log('Tapped'))\n  }\n/>\n```\n\n***\n\n### `defersSystemGestures`\n\nGives your custom gestures precedence over system gestures originating from screen edges.\n\n```tsx\n<VStack defersSystemGestures=\"all\">\n  <Text>Custom gestures take precedence</Text>\n</VStack>\n```\n\n#### Accepted Values\n\n| Value          | Description                          |\n| -------------- | ------------------------------------ |\n| `'top'`        | Top edge                             |\n| `'leading'`    | Leading edge (left, or right in RTL) |\n| `'trailing'`   | Trailing edge                        |\n| `'bottom'`     | Bottom edge                          |\n| `'horizontal'` | Left and right edges                 |\n| `'vertical'`   | Top and bottom edges                 |\n| `'all'`        | All edges                            |\n\n***\n\n## 4. GestureMask\n\nControls how adding a gesture affects other gestures on the same view or its subviews.\n\n```ts\ntype GestureMask = \"all\" | \"gesture\" | \"subviews\" | \"none\"\n```\n\n| Value        | Description                                                   |\n| ------------ | ------------------------------------------------------------- |\n| `\"all\"`      | Enables both the added gesture and subview gestures (default) |\n| `\"gesture\"`  | Enables only the added gesture, disables subview gestures     |\n| `\"subviews\"` | Enables subview gestures, disables the added gesture          |\n| `\"none\"`     | Disables all gestures                                         |\n\n#### Example\n\n```tsx\n<VStack\n  gesture={{\n    gesture: TapGesture().onEnded(() => console.log('Tapped')),\n    mask: 'gesture'\n  }}\n>\n  <Text>Tap here</Text>\n</VStack>\n```\n\n***\n\n## 5. Summary Table\n\n| Gesture Type | Description                     | Class Constructor    | Shorthand Property   | Common Callbacks             |\n| ------------ | ------------------------------- | -------------------- | -------------------- | ---------------------------- |\n| Tap          | Detects single or multiple taps | `TapGesture()`       | `onTapGesture`       | `.onEnded()`                 |\n| Long Press   | Detects hold gestures           | `LongPressGesture()` | `onLongPressGesture` | `.onChanged()`, `.onEnded()` |\n| Drag         | Detects movement                | `DragGesture()`      | `onDragGesture`      | `.onChanged()`, `.onEnded()` |\n| Magnify      | Detects pinch zoom              | `MagnifyGesture()`   | —                    | `.onChanged()`, `.onEnded()` |\n| Rotate       | Detects rotation                | `RotateGesture()`    | —                    | `.onChanged()`, `.onEnded()` |\n","routePath":"/doc/Views/Gestures","lang":"en","toc":[{"id":"1-simple-gesture-properties","text":"1. Simple Gesture Properties","depth":2,"charIndex":483},{"id":"ontapgesture","text":"`onTapGesture`","depth":3,"charIndex":595},{"id":"type","text":"Type","depth":4,"charIndex":669},{"id":"parameters","text":"Parameters","depth":4,"charIndex":763},{"id":"examples","text":"Examples","depth":4,"charIndex":1189},{"id":"onlongpressgesture","text":"`onLongPressGesture`","depth":3,"charIndex":1400},{"id":"type-1","text":"Type","depth":4,"charIndex":1487},{"id":"parameters-1","text":"Parameters","depth":4,"charIndex":1664},{"id":"examples-1","text":"Examples","depth":4,"charIndex":2408},{"id":"ondraggesture","text":"`onDragGesture`","depth":3,"charIndex":2802},{"id":"type-2","text":"Type","depth":4,"charIndex":2896},{"id":"parameters-2","text":"Parameters","depth":4,"charIndex":3102},{"id":"draggesturedetails","text":"`DragGestureDetails`","depth":4,"charIndex":4128},{"id":"example","text":"Example","depth":4,"charIndex":1189},{"id":"2-gesture-classes-advanced-usage","text":"2. Gesture Classes (Advanced Usage)","depth":2,"charIndex":5358},{"id":"gestureinfo-class","text":"`GestureInfo` Class","depth":3,"charIndex":5505},{"id":"example-1","text":"Example","depth":4,"charIndex":2408},{"id":"tapgesture","text":"`TapGesture`","depth":3,"charIndex":6271},{"id":"example-2","text":"Example","depth":4,"charIndex":5009},{"id":"longpressgesture","text":"`LongPressGesture`","depth":3,"charIndex":6726},{"id":"example-3","text":"Example","depth":4,"charIndex":6154},{"id":"draggesture","text":"`DragGesture`","depth":3,"charIndex":7469},{"id":"example-4","text":"Example","depth":4,"charIndex":6601},{"id":"magnifygesture","text":"`MagnifyGesture`","depth":3,"charIndex":7962},{"id":"example-5","text":"Example","depth":4,"charIndex":7262},{"id":"rotategesture","text":"`RotateGesture`","depth":3,"charIndex":8471},{"id":"example-6","text":"Example","depth":4,"charIndex":7740},{"id":"3-gesture-modifiers-for-views","text":"3. Gesture Modifiers for Views","depth":2,"charIndex":9063},{"id":"gesture","text":"`gesture`","depth":3,"charIndex":9332},{"id":"highprioritygesture","text":"`highPriorityGesture`","depth":3,"charIndex":9479},{"id":"simultaneousgesture","text":"`simultaneousGesture`","depth":3,"charIndex":9710},{"id":"deferssystemgestures","text":"`defersSystemGestures`","depth":3,"charIndex":10000},{"id":"accepted-values","text":"Accepted Values","depth":4,"charIndex":10224},{"id":"4-gesturemask","text":"4. GestureMask","depth":2,"charIndex":10774},{"id":"example-7","text":"Example","depth":4,"charIndex":8281},{"id":"5-summary-table","text":"5. Summary Table","depth":2,"charIndex":11615}],"frontmatter":{},"version":"","description":"The Scripting app provides a gesture system similar to SwiftUI, allowing any view (<VStack>, <HStack>, <Text>, etc.) to respond to touch interactions such as tapping, long pressing, dragging, rotating, and magnifying. You can use: Simplified gesture properties like onTapGesture, onLongPressGesture, onDragGesture, orAdvanced gesture objects such as TapGesture(), LongPressGesture(), and the gesture modifiers for composition and priority control."},{"title":"Image","content":"The `Image` component allows you to display images from various sources, such as system symbols, network URLs, local files, or `UIImage` objects. It supports dynamic image sources that change based on light or dark color schemes. Additionally, several view modifiers are available to customize the behavior and appearance of the `Image` component.\n\n***\n\n## **Type Definitions**\n\n### `ImageResizable`\n\nDefines how the image should be resized:\n\n- **`boolean`**:\n\n  - `true`: Enables default resizing.\n  - `false`: Disables resizing.\n\n- **`object`**:\n\n  - `capInsets` *(optional)*: `EdgeInsets`\n    Defines insets for image stretching to control which parts of the image stretch and which remain fixed.\n\n  - `resizingMode` *(optional)*: `ImageResizingMode`\n    Specifies the resizing mode, such as scaling or tiling.\n\n### `ImageScale`\n\nSpecifies relative image sizes available within the view:\n\n- `'large'`: Renders the image at a large size.\n- `'medium'`: Renders the image at a medium size.\n- `'small'`: Renders the image at a small size.\n\n### `DynamicImageSource<T>`\n\nDefines a dynamic source that changes based on the system color scheme:\n\n```ts\ntype DynamicImageSource<T> = {\n  dark: T\n  light: T\n}\n```\n\nUsed for adapting the image resource for light/dark modes. Supported in:\n\n- `imageUrl` (network images)\n- `filePath` (local file images)\n- `image` (`UIImage` objects)\n\n***\n\n## **Source Props**\n\n### `SystemImageProps`\n\n- **`systemName`** *(string, required)*\n  The name of a system-provided symbol.\n  Refer to the [SF Symbols]() library or use the [SF Symbols Browser]() app to browse available symbol names.\n\n- **`variableValue`** *(number, optional)*\n  A value between `0.0` and `1.0` for customizing the appearance of a variable symbol.\n  *(Has no effect for symbols that do not support variable values.)*\n\n- **`resizable`** *(ImageResizable, optional)*\n  Configures how the image is resized to fit its allocated space.\n\n### `NetworkImageProps`\n\n- **`imageUrl`** *(string | DynamicImageSource\\<string>, required)*\n  The URL of the image to load. Supports dynamic sources via `DynamicImageSource`.\n\n- **`placeholder`** *(VirtualNode, optional)*\n  A view displayed while the image is loading.\n\n- **`resizable`** *(ImageResizable, optional)*\n  Configures how the image is resized to fit its allocated space.\n\n### `FileImageProps`\n\n- **`filePath`** *(string | DynamicImageSource\\<string>, required)*\n  The path to the local image file. Supports dynamic sources via `DynamicImageSource`.\n\n- **`resizable`** *(ImageResizable, optional)*\n  Configures how the image is resized to fit its allocated space.\n\n### `UIImageProps`\n\n- **`image`** *(UIImage | DynamicImageSource\\<UIImage>, required)*\n  A `UIImage` object to display. Supports dynamic sources via `DynamicImageSource`.\n\n- **`resizable`** *(ImageResizable, optional)*\n  Configures how the image is resized to fit its allocated space.\n\n***\n\n## **CommonViewProps**\n\nModifiers applicable to the `Image` component and other views:\n\n- **`scaleToFit`** *(boolean, optional)*\n  Scales the view to fit its parent container.\n\n- **`scaleToFill`** *(boolean, optional)*\n  Scales the view to fill its parent container.\n\n- **`aspectRatio`** *(object, optional)*\n  Configures the view's aspect ratio:\n\n  - **`value`** *(number or null, optional)*: The width-to-height ratio. If `null`, maintains the current aspect ratio.\n  - **`contentMode`** *(ContentMode, required)*: Determines whether the content fits or fills its parent.\n\n- **`imageScale`** *(ImageScale, optional)*\n  Adjusts the size of images within the view. Options: `'large'`, `'medium'`, `'small'`.\n\n- **`foregroundStyle`** *(ShapeStyle or DynamicShapeStyle or object, optional)*\n  Configures the view's foreground elements:\n\n  - **`primary`**: Style for the primary foreground elements.\n  - **`secondary`**: Style for secondary elements.\n  - **`tertiary`** *(optional)*: Style for tertiary elements.\n\n***\n\n### Rendering Behavior (`ImageRenderingBehaviorProps`)\n\n| Prop                          | Type                                        | Default      | Description                                                     |\n| ----------------------------- | ------------------------------------------- | ------------ | --------------------------------------------------------------- |\n| `resizable`                   | `boolean \\| object`                         | `false`      | Controls whether the image resizes to fit its frame (see below) |\n| `renderingMode`               | `'original' \\| 'template'`                  | `'original'` | Use `\"template\"` to allow tinting via `foregroundColor`         |\n| `interpolation`               | `'none' \\| 'low' \\| 'medium' \\| 'high'`     | `'medium'`   | Sets interpolation quality when scaling the image               |\n| `antialiased`                 | `boolean`                                   | `false`      | Whether the image should use anti-aliasing                      |\n| `widgetAccentedRenderingMode` | `WidgetAccentedRenderingMode` (Widget-only) | —            | Defines how the image renders in Widget accented mode           |\n\n***\n\n## **Usage Examples**\n\n1. **Dynamic Network Image Based on Color Scheme**\n\n```tsx\n<Image\n  imageUrl={{\n    light: \"https://example.com/image-light.png\",\n    dark: \"https://example.com/image-dark.png\"\n  }}\n  placeholder={<Text>Loading...</Text>}\n/>\n```\n\n2. **Dynamic Local File Image**\n\n```tsx\n<Image\n  filePath={{\n    light: Path.join(Script.directory, \"light-mode.jpg\"),\n    dark: Path.join(Script.directory, \"dark-mode.jpg\")\n  }}\n  resizable={true}\n/>\n```\n\n3. **Dynamic UIImage Object**\n\n```tsx\nconst lightImg = UIImage.fromFile('/path/to/light.png')\nconst darkImg = UIImage.fromFile('/path/to/dark.png')\n\n<Image image={{ light: lightImg, dark: darkImg }} />\n```\n\n4. **System Symbol with Aspect Ratio and Scaling**\n\n```tsx\n<Image\n  systemName=\"square.and.arrow.up.circle\"\n  scaleToFit={true}\n  aspectRatio={{ value: 1.0, contentMode: \"fit\" }}\n  imageScale=\"medium\"\n  foregroundStyle={{\n    primary: \"blue\",\n    secondary: \"gray\",\n  }}\n/>\n```\n\n***\n\n## Notes\n\n- Use `DynamicImageSource` to adapt images for light/dark mode with minimal logic.\n- Combine view modifiers like `scaleToFit`, `scaleToFill`, and `aspectRatio` to achieve precise layout configurations.\n- Use the `foregroundStyle` property for detailed styling of icons or symbols.\n- Ensure URLs and file paths provided for dynamic image sources are valid and accessible.\n","routePath":"/doc/Views/Image/","lang":"en","toc":[{"id":"type-definitions","text":"**Type Definitions**","depth":2,"charIndex":354},{"id":"imageresizable","text":"`ImageResizable`","depth":3,"charIndex":379},{"id":"imagescale","text":"`ImageScale`","depth":3,"charIndex":815},{"id":"dynamicimagesourcet","text":"`DynamicImageSource<T>`","depth":3,"charIndex":1039},{"id":"source-props","text":"**Source Props**","depth":2,"charIndex":1379},{"id":"systemimageprops","text":"`SystemImageProps`","depth":3,"charIndex":1400},{"id":"networkimageprops","text":"`NetworkImageProps`","depth":3,"charIndex":1929},{"id":"fileimageprops","text":"`FileImageProps`","depth":3,"charIndex":2314},{"id":"uiimageprops","text":"`UIImageProps`","depth":3,"charIndex":2606},{"id":"commonviewprops","text":"**CommonViewProps**","depth":2,"charIndex":2897},{"id":"rendering-behavior-imagerenderingbehaviorprops","text":"Rendering Behavior (`ImageRenderingBehaviorProps`)","depth":3,"charIndex":3913},{"id":"usage-examples","text":"**Usage Examples**","depth":2,"charIndex":5102},{"id":"notes","text":"Notes","depth":2,"charIndex":6052}],"frontmatter":{},"version":"","description":"The Image component allows you to display images from various sources, such as system symbols, network URLs, local files, or UIImage objects. It supports dynamic image sources that change based on light or dark color schemes. Additionally, several view modifiers are available to customize the behavior and appearance of the Image component."},{"title":"Example","content":"```tsx\n\n\nfunction View() {\n  const dismiss = Navigation.useDismiss()\n  const url = \"https://github.com\"\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Image\"}\n      toolbar={{\n        topBarLeading: <Button\n          title={\"Close\"}\n          action={dismiss}\n        />\n      }}\n    >\n\n      <Section title={\"Network Image\"}>\n        <Image\n          imageUrl={'https://developer.apple.com/assets/elements/icons/swiftui/swiftui-96x96_2x.png'}\n          resizable\n          scaleToFit\n          placeholder={<ProgressView\n            progressViewStyle={'circular'}\n          />}\n        />\n      </Section>\n\n      <Section title={\"SF Symbol\"}>\n        <Image\n          systemName={\"phone\"}\n          resizable\n          scaleToFit\n          frame={{\n            width: 32,\n            height: 32,\n          }}\n          foregroundStyle={\"systemGreen\"}\n        />\n      </Section>\n\n      <Section title={\"Local Image\"}>\n        <Markdown\n          content={`\\`\\`\\`tsx\n<Image\n  filePath={Path.join(Script.directory, \"test.jpg\")}\n/>\n\\`\\`\\``}\n        />\n      </Section>\n\n      <Section title={\"QR Code Image\"}>\n        <VStack>\n          <Text>URL: {url}</Text>\n          <QRImage\n            data={url}\n          />\n        </VStack>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present(<View />)\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Image/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"FlowLayout","content":"`FlowLayout` is a flow-based layout component that arranges its children horizontally and automatically wraps items to the next line when there is insufficient space. It is ideal for displaying a group of elements with dynamic widths such as tags, buttons, or icon lists.\n\n***\n\n## Import\n\n```ts\n```\n\n***\n\n## Props\n\n### `spacing?: number`\n\nThe spacing between each item (both horizontal and vertical).\n\n- **Type:** `number`\n- **Default:** `8`\n\nDefines the amount of space inserted between child items. If not specified, the default spacing value is used.\n\n### `children?: VirtualNode | (VirtualNode | undefined | null | (VirtualNode | undefined | null)[])[]`\n\nThe child elements to be displayed inside the layout.\n\n- Supports a single node or multiple nodes\n- `undefined` and `null` children will be ignored\n- Nested arrays are supported (useful when rendering with `.map()`)\n\n***\n\n## Examples\n\n### Basic Usage\n\n```ts\n\n\nexport default function Example() {\n  return (\n    <FlowLayout spacing={12}>\n      <Text>Tag One</Text>\n      <Text>Tag Two</Text>\n      <Text>Tag Three</Text>\n      <Text>Tag Four</Text>\n    </FlowLayout>\n  )\n}\n```\n\n### Rendering from an Array\n\n```ts\nconst tags = [\"Apple\", \"Orange\", \"Banana\", \"Pear\", \"Grape\"]\n\nexport default function TagsExample() {\n  return (\n    <FlowLayout spacing={6}>\n      {tags.map(tag => <Text>{tag}</Text>)}\n    </FlowLayout>\n  )\n}\n```\n\n### Using Default Spacing\n\n```ts\n<FlowLayout>\n  <Text>A</Text>\n  <Text>B</Text>\n  <Text>C</Text>\n</FlowLayout>\n```\n\n***\n\n## Recommended Use Cases\n\nFlowLayout is suitable for layouts where elements vary in width and should wrap naturally, such as:\n\n- Tag clouds and keyword lists\n- Dynamic button groups\n- Icon or avatar lists\n- Adaptive content containers\n","routePath":"/doc/Views/Layout/FlowLayout","lang":"en","toc":[{"id":"import","text":"Import","depth":2,"charIndex":278},{"id":"props","text":"Props","depth":2,"charIndex":305},{"id":"spacing-number","text":"`spacing?: number`","depth":3,"charIndex":315},{"id":"children-virtualnode--virtualnode--undefined--null--virtualnode--undefined--null","text":"`children?: VirtualNode | (VirtualNode | undefined | null | (VirtualNode | undefined | null)[])[]`","depth":3,"charIndex":555},{"id":"examples","text":"Examples","depth":2,"charIndex":881},{"id":"basic-usage","text":"Basic Usage","depth":3,"charIndex":894},{"id":"rendering-from-an-array","text":"Rendering from an Array","depth":3,"charIndex":1136},{"id":"using-default-spacing","text":"Using Default Spacing","depth":3,"charIndex":1385},{"id":"recommended-use-cases","text":"Recommended Use Cases","depth":2,"charIndex":1506}],"frontmatter":{},"version":"","description":"FlowLayout is a flow-based layout component that arranges its children horizontally and automatically wraps items to the next line when there is insufficient space. It is ideal for displaying a group of elements with dynamic widths such as tags, buttons, or icon lists."},{"title":"Grid","content":"The `Grid` component in the **Scripting app** provides a flexible container for arranging child views in a two-dimensional grid layout. It supports customizable alignment, spacing, and nested child components to create visually appealing layouts.\n\n***\n\n### `Grid` Component\n\nA container view that arranges other views in a two-dimensional layout.\n\n### Import Path\n\n```ts\n```\n\n***\n\n### Type: `GridProps`\n\n| Property            | Type                                                                                          | Default          | Description                                                                                                 |\n| ------------------- | --------------------------------------------------------------------------------------------- | ---------------- | ----------------------------------------------------------------------------------------------------------- |\n| `alignment`         | `Alignment`                                                                                   | `center`         | The alignment for child views within each grid cell. Options include `leading`, `center`, or `trailing`.    |\n| `horizontalSpacing` | `number`                                                                                      | Platform-defined | The horizontal distance, in points, between each cell. Defaults to a platform-appropriate value if not set. |\n| `verticalSpacing`   | `number`                                                                                      | Platform-defined | The vertical distance, in points, between each cell. Defaults to a platform-appropriate value if not set.   |\n| `children`          | `(VirtualNode \\| undefined \\| null \\| (VirtualNode \\| undefined \\| null)[])[] \\| VirtualNode` | N/A              | The child components or nodes to be arranged in the grid.                                                   |\n\n***\n\n### `GridRow` Component\n\nA child component of `Grid` that represents a horizontal row in the grid layout. Use `GridRow` to group and align child views horizontally within the grid.\n\n***\n\n### Type: `GridRowProps`\n\n| Property    | Type                                                                                          | Default  | Description                                                                                 |\n| ----------- | --------------------------------------------------------------------------------------------- | -------- | ------------------------------------------------------------------------------------------- |\n| `alignment` | `VerticalAlignment`                                                                           | `center` | Aligns the content vertically within the row. Options include `top`, `center`, or `bottom`. |\n| `children`  | `(VirtualNode \\| undefined \\| null \\| (VirtualNode \\| undefined \\| null)[])[] \\| VirtualNode` | N/A      | The child components or nodes to be arranged horizontally in the row.                       |\n\n***\n\n## Usage Example\n\nBelow is an example demonstrating how to use the `Grid` and `GridRow` components to create a layout with rows, text, images, and dividers.\n\n```tsx\n<Grid\n  alignment=\"center\"\n  horizontalSpacing={10}\n  verticalSpacing={15}\n>\n  <GridRow alignment=\"center\">\n    <Text>Hello</Text>\n    <Image systemName=\"globe\" />\n  </GridRow>\n  <Divider />\n  <GridRow alignment=\"bottom\">\n    <Image systemName=\"hand.wave\" />\n    <Text>World</Text>\n  </GridRow>\n</Grid>\n```\n\n**Output Layout**\n\n- **First Row:** Contains a `Text` element (\"Hello\") and an `Image` with the `globe` icon, aligned vertically to the center.\n- **Divider:** Separates the two rows.\n- **Second Row:** Contains an `Image` with the `wave` icon and a `Text` element (\"World\"), aligned vertically to the bottom.\n\n***\n\n### Properties in Detail\n\n1. **Grid: Alignment**\n   - Aligns the content of each cell in the grid.\n   - Possible values:\n     - `leading`: Aligns content to the start of the cell.\n     - `center`: Centers content within the cell (default).\n     - `trailing`: Aligns content to the end of the cell.\n   - Example:\n     ```tsx\n     <Grid alignment=\"leading\">\n       <GridRow>\n         <Text>Aligned to start</Text>\n       </GridRow>\n     </Grid>\n     ```\n\n2. **GridRow: Alignment**\n   - Aligns the content vertically within each row.\n   - Possible values:\n     - `top`: Aligns content to the top of the row.\n     - `center`: Centers content vertically within the row (default).\n     - `bottom`: Aligns content to the bottom of the row.\n   - Example:\n     ```tsx\n     <Grid>\n       <GridRow alignment=\"top\">\n         <Text>Top-aligned</Text>\n       </GridRow>\n       <GridRow alignment=\"bottom\">\n         <Text>Bottom-aligned</Text>\n       </GridRow>\n     </Grid>\n     ```\n\n3. **Horizontal and Vertical Spacing**\n   - Customize the spacing between cells and rows.\n   - Example:\n     ```tsx\n     <Grid horizontalSpacing={5} verticalSpacing={20}>\n       <GridRow>\n         <Text>Item 1</Text>\n         <Text>Item 2</Text>\n       </GridRow>\n     </Grid>\n     ```\n\n4. **Children**\n   - Accepts any combination of `VirtualNode` components, including `Text`, `Image`, `GridRow`, and custom components.\n   - Nested arrays or null values are allowed for flexibility in dynamic layouts.\n\n***\n\n## Nested Components\n\nThe `Grid` and `GridRow` components work seamlessly with other supported UI elements:\n\n- **`Divider`**: Adds a visual separator between rows.\n- **`Text`, `Image`, and Custom Components**: Use any supported UI components as children of `GridRow`.\n\n***\n\n## Rendering Example with Image\n\nThe following showcases an image of the output:\n\nThis layout corresponds to the example provided, showing two rows with a divider.\n\n***\n\n## Notes\n\n- **Default Spacing:** Horizontal and vertical spacing values are optimized for iOS but can be customized for specific design needs.\n- **Alignment Options:** Combine `Grid`'s cell alignment with `GridRow`'s vertical alignment for precise layout control.\n- **Dynamic Layouts:** The flexibility of `Grid` and `GridRow` makes them suitable for responsive designs with varying content.\n\nFeel free to experiment with different child components and spacing configurations to create tailored designs for your UIs!\n","routePath":"/doc/Views/Layout/Grid/","lang":"en","toc":[{"id":"grid-component","text":"`Grid` Component","depth":3,"charIndex":253},{"id":"import-path","text":"Import Path","depth":3,"charIndex":348},{"id":"type-gridprops","text":"Type: `GridProps`","depth":3,"charIndex":381},{"id":"gridrow-component","text":"`GridRow` Component","depth":3,"charIndex":1904},{"id":"type-gridrowprops","text":"Type: `GridRowProps`","depth":3,"charIndex":2091},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":2991},{"id":"properties-in-detail","text":"Properties in Detail","depth":3,"charIndex":3778},{"id":"nested-components","text":"Nested Components","depth":2,"charIndex":5258},{"id":"rendering-example-with-image","text":"Rendering Example with Image","depth":2,"charIndex":5532},{"id":"notes","text":"Notes","depth":2,"charIndex":5702}],"frontmatter":{},"version":"","description":"The Grid component in the Scripting app provides a flexible container for arranging child views in a two-dimensional grid layout. It supports customizable alignment, spacing, and nested child components to create visually appealing layouts. Grid Component A container view that arranges other views in a two-dimensional layout. Import Path Type: GridProps GridRow Component A child component of Grid that represents a horizontal row in the grid layout. Use GridRow to group and align child views horizontally within the grid. Type: GridRowProps"},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [gridCellUnsizedAxes, setGridCellUnsizedAxes] = useState(false)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Grid\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section\n        header={\n          <Text>Grid</Text>\n        }\n      >\n        <Grid>\n          <GridRow>\n            <Text>Hello</Text>\n            <Image systemName={\"globe\"} />\n          </GridRow>\n          <GridRow>\n            <Image systemName={\"hand.wave\"} />\n            <Text>World</Text>\n          </GridRow>\n        </Grid>\n      </Section>\n\n      <Section\n        header={<Text>Grid Divider</Text>}\n      >\n        <VStack>\n          <Toggle\n            title={\"gridCellUnsizedAxes\"}\n            value={gridCellUnsizedAxes}\n            onChanged={setGridCellUnsizedAxes}\n          />\n          <Grid>\n            <GridRow>\n              <Text>Hello</Text>\n              <Image systemName={\"globe\"} />\n            </GridRow>\n            <Divider\n              gridCellUnsizedAxes={gridCellUnsizedAxes\n                ? 'horizontal'\n                : undefined}\n            />\n            <GridRow>\n              <Image systemName={\"hand.wave\"} />\n              <Text>World</Text>\n            </GridRow>\n          </Grid>\n        </VStack>\n      </Section>\n\n      <Section\n        header={\n          <Text>Column count, cell spacing, alignment</Text>\n        }\n      >\n        <Grid\n          alignment={\"bottom\"}\n          verticalSpacing={1}\n          horizontalSpacing={1}\n        >\n          <GridRow>\n            <Text>Row 1</Text>\n            <ForEach\n              count={2}\n              itemBuilder={index =>\n                <Rectangle\n                  fill={\"red\"}\n                  key={index.toString()}\n                />\n              }\n            />\n          </GridRow>\n          <GridRow>\n            <Text>Row 2</Text>\n            <ForEach\n              count={5}\n              itemBuilder={index =>\n                <Rectangle\n                  fill={\"green\"}\n                  key={index.toString()}\n                />\n              }\n            />\n          </GridRow>\n          <GridRow>\n            <Text>Row 3</Text>\n            <ForEach\n              count={5}\n              itemBuilder={index =>\n                <Rectangle\n                  fill={\"blue\"}\n                  key={index.toString()}\n                />\n              }\n            />\n          </GridRow>\n        </Grid>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Layout/Grid/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"HStack","content":"The `HStack` component in the Scripting app provides a convenient way to arrange views horizontally with flexible alignment and spacing options. This component is essential for creating layouts that require side-by-side positioning of subviews.\n\n***\n\n## `HStackProps`\n\n### Properties\n\n1. **`alignment`** (optional)\n   - **Type**: `VerticalAlignment`\n   - **Description**: Specifies the vertical alignment of the subviews within the stack. Each subview is aligned according to the same vertical screen coordinate.\n   - **Default Value**: `\"center\"`\n   - **Options**:\n     - `\"top\"`: Align subviews to the top edge.\n     - `\"center\"`: Align subviews to the vertical center.\n     - `\"bottom\"`: Align subviews to the bottom edge.\n     - `\"firstTextBaseline\"`: Align subviews to the first text baseline.\n     - `\"lastTextBaseline\"`: Align subviews to the last text baseline.\n   - **Example**:\n     ```tsx\n     <HStack alignment=\"top\">\n       <Text>Item 1</Text>\n       <Text>Item 2</Text>\n     </HStack>\n     ```\n\n2. **`spacing`** (optional)\n   - **Type**: `number`\n   - **Description**: Specifies the distance between adjacent subviews. If not provided, the stack automatically determines the default spacing.\n   - **Default Value**: `undefined` (uses default spacing)\n   - **Example**:\n     ```tsx\n     <HStack spacing={15}>\n       <Text>Item 1</Text>\n       <Text>Item 2</Text>\n     </HStack>\n     ```\n\n3. **`children`** (optional)\n   - **Type**:\n     ```ts\n     (VirtualNode | undefined | null | (VirtualNode | undefined | null)[])[] | VirtualNode | undefined\n     ```\n   - **Description**: Specifies the subviews to be arranged in the stack. It can accept a single child, multiple children, or nested arrays of children.\n   - **Example**:\n     ```tsx\n     <HStack>\n       <Text>Item 1</Text>\n       <Text>Item 2</Text>\n       <Text>Item 3</Text>\n     </HStack>\n     ```\n\n***\n\n## `VerticalAlignment`\n\n`VerticalAlignment` is an enumerated type that specifies how subviews are aligned vertically in an `HStack`.\n\n### Options:\n\n- **`\"top\"`**: Aligns the top edge of subviews.\n- **`\"center\"`**: Aligns subviews along the vertical center axis.\n- **`\"bottom\"`**: Aligns the bottom edge of subviews.\n- **`\"firstTextBaseline\"`**: Aligns subviews to the first baseline of the text content.\n- **`\"lastTextBaseline\"`**: Aligns subviews to the last baseline of the text content.\n\n***\n\n## **`HStack` Component**\n\n### Description\n\nThe `HStack` component is a layout container that arranges its subviews in a horizontal line. It provides options for aligning views vertically and specifying the spacing between them.\n\n### Syntax\n\n```tsx\n<HStack alignment=\"center\" spacing={10}>\n  {children}\n</HStack>\n```\n\n### Example 1: Basic Horizontal Stack\n\n```tsx\nfunction Example1() {\n  return (\n    <HStack>\n      <Text>Item 1</Text>\n      <Text>Item 2</Text>\n      <Text>Item 3</Text>\n    </HStack>\n  )\n}\n```\n\n### Example 2: Custom Spacing and Alignment\n\n```tsx\nfunction Example2() {\n  return (\n    <HStack alignment=\"bottom\" spacing={20}>\n      <Text>Aligned Bottom</Text>\n      <Text>With Spacing</Text>\n    </HStack>\n  )\n}\n```\n\n### Example 3: Complex Children\n\n```tsx\nfunction Example3() {\n  return (\n    <HStack spacing={10}>\n      {[1, 2, 3].map((item) => (\n        <Text key={item.toString()}>Item {item}</Text>\n      ))}\n    </HStack>\n  )\n}\n```\n\n### Notes:\n\n- Ensure that all child components passed to `HStack` are valid `VirtualNode` elements.\n- For advanced layouts, combine `HStack` with other components like `VStack` or `Spacer`.\n\n### See Also:\n\n- `VStack` for vertical stacking of views.\n- `Spacer` to create flexible spacing in stacks.\n- `Text` for rendering text content.\n\n***\n\n### Diagram\n\nThe following diagram shows how vertical alignments work within an `HStack`:\n","routePath":"/doc/Views/Layout/HStack/","lang":"en","toc":[{"id":"hstackprops","text":"`HStackProps`","depth":2,"charIndex":251},{"id":"properties","text":"Properties","depth":3,"charIndex":269},{"id":"verticalalignment","text":"`VerticalAlignment`","depth":2,"charIndex":1876},{"id":"options","text":"Options:","depth":3,"charIndex":2010},{"id":"hstack-component","text":"**`HStack` Component**","depth":2,"charIndex":2372},{"id":"description","text":"Description","depth":3,"charIndex":2399},{"id":"syntax","text":"Syntax","depth":3,"charIndex":2602},{"id":"example-1-basic-horizontal-stack","text":"Example 1: Basic Horizontal Stack","depth":3,"charIndex":2690},{"id":"example-2-custom-spacing-and-alignment","text":"Example 2: Custom Spacing and Alignment","depth":3,"charIndex":2885},{"id":"example-3-complex-children","text":"Example 3: Complex Children","depth":3,"charIndex":3106},{"id":"notes","text":"Notes:","depth":3,"charIndex":3328},{"id":"see-also","text":"See Also:","depth":3,"charIndex":3519},{"id":"diagram","text":"Diagram","depth":3,"charIndex":3669}],"frontmatter":{},"version":"","description":"The HStack component in the Scripting app provides a convenient way to arrange views horizontally with flexible alignment and spacing options. This component is essential for creating layouts that require side-by-side positioning of subviews."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const list = [0, 1, 2, 3, 4]\n\n  return <NavigationStack>\n    <HStack\n      navigationTitle={\"HStack\"}\n      alignment={\"top\"}\n      spacing={10}\n    >\n      {list.map((_, index) =>\n        <Text>Item{index + 1}</Text>\n      )}\n    </HStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Layout/HStack/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"LazyHGrid","content":"The `LazyHGrid` component is part of the **Scripting** app's UI library. It arranges its children in a grid layout with rows defined by customizable sizing and alignment options. Items are created and displayed only as needed, optimizing performance for large or dynamic data sets.\n\n***\n\n## LazyHGrid\n\n## Type: `FunctionComponent<LazyHGridProps>`\n\nA `LazyHGrid` arranges its children in a grid that grows horizontally. Unlike a regular grid, it loads and displays items lazily, creating them only when they are about to appear on the screen. This makes it ideal for grids with large or dynamic content.\n\n***\n\n## LazyHGridProps\n\n| Property      | Type                                                                                          | Default                       | Description                                                                                                                                          |\n| ------------- | --------------------------------------------------------------------------------------------- | ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `rows`        | `GridItem[]`                                                                                  | **Required**                  | Defines the configuration for the rows in the grid, including their size and alignment.                                                              |\n| `alignment`   | `VerticalAlignment`                                                                           | `undefined`                   | Controls how the grid is aligned vertically within its parent view.                                                                                  |\n| `spacing`     | `number`                                                                                      | `undefined` (default spacing) | The spacing between the grid and the next item in its parent view.                                                                                   |\n| `pinnedViews` | `'sectionHeaders'` \\| `'sectionFooters'` \\| `'sectionHeadersAndFooters'`                      | `undefined`                   | Specifies which child views remain pinned to the bounds of the parent scroll view.                                                                   |\n| `children`    | `(VirtualNode \\| undefined \\| null \\| (VirtualNode \\| undefined \\| null)[])[] \\| VirtualNode` | `undefined`                   | The content to be displayed in the grid. Accepts one or multiple `VirtualNode` elements, including arrays and optional `null` or `undefined` values. |\n\n***\n\n## GridItem\n\nDefines the properties for a single row in the grid.\n\n| Property    | Type        | Default                       | Description                                                                                        |\n| ----------- | ----------- | ----------------------------- | -------------------------------------------------------------------------------------------------- |\n| `alignment` | `Alignment` | `undefined`                   | Specifies the alignment to use when placing each child view in this row.                           |\n| `spacing`   | `number`    | `undefined` (default spacing) | The spacing between items in this row and the next.                                                |\n| `size`      | `GridSize`  | **Required**                  | Defines the size of the row. Can be a fixed size or a flexible/adaptive size based on the content. |\n\n***\n\n## GridSize\n\nDefines the size of a row or column in the grid layout.\n\n| Type       | Properties                                   | Description                                                                                            |\n| ---------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------ |\n| `number`   | *N/A*                                        | A fixed size for the row or column.                                                                    |\n| `adaptive` | `min: number`, `max?: number \\|'infinity'`   | Specifies a flexible size that adapts to the content, with a minimum and optional maximum constraint.  |\n| `flexible` | `min?: number`, `max?: number \\| 'infinity'` | Specifies a single flexible size that adjusts dynamically, constrained by optional min and max values. |\n\n***\n\n## PinnedScrollViews\n\nDefines which views in the grid remain pinned to the parent scroll view's bounds as it scrolls:\n\n- `'sectionHeaders'`: Pins only the section headers\n- `'sectionFooters'`: Pins only the section footers\n- `'sectionHeadersAndFooters'`: Pins both section headers and footers\n\n***\n\n## Example Usage\n\n```tsx\n\n\nconst Example = () => {\n  const rows = [\n    { size: 50 },\n    { size: { type: 'adaptive', min: 30, max: 80 } },\n    { size: { type: 'flexible', min: 20, max: 'infinity' } }\n  ]\n  \n  return (\n    <ScrollView\n      axes=\"horizontal\"\n    >\n      <LazyHGrid \n        rows={rows} \n        alignment=\"center\" \n        spacing={12} \n      >\n        <Text>Item 1</Text>\n        <Text>Item 2</Text>\n        <Text>Item 3</Text>\n      </LazyHGrid>\n    </ScrollView>\n  )\n}\n```\n\n### Explanation:\n\n- Defines three rows with different sizing:\n  - A fixed row with a size of 50\n  - An adaptive row with a minimum size of 30 and a maximum size of 80\n  - A flexible row with a minimum size of 20 and no maximum size\n- The grid is centered vertically in its parent view with 12 points of spacing\n\n***\n\n## Notes\n\n- `LazyHGrid` is ideal for horizontally growing grid layouts with large or dynamic content\n- Use `GridSize` to define flexible or adaptive layouts based on the available space\n- The `pinnedViews` property ensures critical views like headers or footers remain visible during scrolling\n\nThis API provides flexibility and performance optimizations for grid-based horizontal layouts.\n","routePath":"/doc/Views/Layout/LazyHGrid/","lang":"en","toc":[{"id":"lazyhgrid","text":"LazyHGrid","depth":2,"charIndex":288},{"id":"type-functioncomponentlazyhgridprops","text":"Type: `FunctionComponent<LazyHGridProps>`","depth":2,"charIndex":302},{"id":"lazyhgridprops","text":"LazyHGridProps","depth":2,"charIndex":609},{"id":"griditem","text":"GridItem","depth":2,"charIndex":2713},{"id":"gridsize","text":"GridSize","depth":2,"charIndex":3601},{"id":"pinnedscrollviews","text":"PinnedScrollViews","depth":2,"charIndex":4512},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":4811},{"id":"explanation","text":"Explanation:","depth":3,"charIndex":5305},{"id":"notes","text":"Notes","depth":2,"charIndex":5622}],"frontmatter":{},"version":"","description":"The LazyHGrid component is part of the Scripting app's UI library. It arranges its children in a grid layout with rows defined by customizable sizing and alignment options. Items are created and displayed only as needed, optimizing performance for large or dynamic data sets."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const colors = useMemo(() => {\n    const colors: {\n      name: string\n      value: Color\n    }[] = []\n\n    const numToHex = (n: number) => {\n      return n === 0 ? '00' : n.toString(16)\n    }\n\n    for (let r = 0x00; r <= 0xff; r += 0x11) {\n      for (let g = 0x00; g <= 0xff; g += 0x11) {\n        for (let b = 0x00; b <= 0xff; b += 0x11) {\n          const name = `${numToHex(r)}${numToHex(g)}${numToHex(b)}`\n          const value: Color = `#${name}`\n          colors.push({\n            name,\n            value\n          })\n        }\n      }\n    }\n\n    return colors\n  }, [])\n\n  return <NavigationStack>\n    <ScrollView\n      navigationTitle={\"LazyHGrid\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      axes={\"horizontal\"}\n    >\n      <LazyHGrid\n        spacing={2}\n        rows={[\n          { size: 100 },\n          { size: 100 },\n          { size: 100 },\n          { size: 100 },\n        ]}\n      >\n        {colors.map((color) =>\n          <VStack>\n            <Text>\n              {color.name}\n            </Text>\n            <RoundedRectangle\n              fill={color.value}\n              cornerRadius={4}\n              frame={{\n                width: 50,\n                height: 50\n              }}\n            />\n          </VStack>\n        )}\n      </LazyHGrid>\n    </ScrollView>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Layout/LazyHGrid/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"LazyHStack","content":"The `LazyHStack` component is part of the **Scripting** app's UI library. It arranges its children in a horizontal stack, creating and displaying items only as needed, which improves performance for large data sets.\n\n## LazyHStack\n\n## Type: `FunctionComponent<LazyHStackProps>`\n\nA `LazyHStack` arranges its children in a line that grows horizontally. Unlike a regular horizontal stack, it loads and displays views lazily, creating them only when they are about to appear on the screen. This makes it ideal for scenarios involving large or dynamic data.\n\n***\n\n## LazyHStackProps\n\n| Property      | Type                                                                                          | Default                       | Description                                                                                                                                           |\n| ------------- | --------------------------------------------------------------------------------------------- | ----------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `alignment`   | `VerticalAlignment`                                                                           | `undefined`                   | Determines how the children are aligned vertically within the stack. All child views share the same vertical screen coordinate.                       |\n| `spacing`     | `number`                                                                                      | `undefined` (default spacing) | The space between adjacent subviews. If `undefined`, the stack uses a default spacing value.                                                          |\n| `pinnedViews` | `'sectionHeaders'` \\| `'sectionFooters'` \\| `'sectionHeadersAndFooters'`                      | `undefined`                   | Specifies which child views remain pinned to the bounds of the scroll view during scrolling.                                                          |\n| `children`    | `(VirtualNode \\| undefined \\| null \\| (VirtualNode \\| undefined \\| null)[])[] \\| VirtualNode` | `undefined`                   | The content to be displayed in the stack. Accepts one or multiple `VirtualNode` elements, including arrays and optional `null` or `undefined` values. |\n\n***\n\n## PinnedScrollViews\n\nThe `PinnedScrollViews` type defines which kinds of child views can remain pinned to the scroll view's bounds as it scrolls:\n\n- `'sectionHeaders'`: Pins only the section headers.\n- `'sectionFooters'`: Pins only the section footers.\n- `'sectionHeadersAndFooters'`: Pins both section headers and footers.\n\n***\n\n## Example Usage\n\n```tsx\n\n\nconst Example = () => {\n  return (\n    <ScrollView\n      axes=\"horizontal\"\n    >\n      <LazyHStack\n        alignment=\"center\"\n        spacing={10}\n        pinnedViews=\"sectionHeaders\"\n      >\n        {list.map(item =>\n          <Section\n            key={item.id}\n            header={\n              <Text>{item.title}</Text>\n            }\n          >\n            <ItemView\n              item={item}\n            />\n          </Section>\n        )}\n      </LazyHStack>\n    </ScrollView>\n  )\n}\n```\n\n### Explanation:\n\n- The stack arranges the `Section` views horizontally with `10` points of spacing.\n- The `alignment` property centers the items vertically within the stack.\n- The `pinnedViews` property ensures that section headers remain pinned to the top of the scroll view when scrolling.\n\n***\n\n## Notes\n\n- Lazy loading improves performance by creating views only as they become visible.\n- Use `spacing` to adjust the distance between items and `alignment` to control vertical positioning.\n- The `pinnedViews` property is particularly useful for table-like layouts where headers or footers should remain visible during scrolling.\n\nThis API allows you to efficiently handle horizontally growing content while providing customization for layout and scrolling behavior.\n","routePath":"/doc/Views/Layout/LazyHStack/","lang":"en","toc":[{"id":"lazyhstack","text":"LazyHStack","depth":2,"charIndex":217},{"id":"type-functioncomponentlazyhstackprops","text":"Type: `FunctionComponent<LazyHStackProps>`","depth":2,"charIndex":232},{"id":"lazyhstackprops","text":"LazyHStackProps","depth":2,"charIndex":559},{"id":"pinnedscrollviews","text":"PinnedScrollViews","depth":2,"charIndex":2373},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2704},{"id":"explanation","text":"Explanation:","depth":3,"charIndex":3225},{"id":"notes","text":"Notes","depth":2,"charIndex":3524}],"frontmatter":{},"version":"","description":"The LazyHStack component is part of the Scripting app's UI library. It arranges its children in a horizontal stack, creating and displaying items only as needed, which improves performance for large data sets."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"LazyHStack\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <ScrollView\n        axes={\"horizontal\"}\n      >\n        <LazyHStack\n          alignment={\"top\"}\n          spacing={10}\n        >\n          <ForEach\n            count={100}\n            itemBuilder={index =>\n              <Text\n                padding\n                background={\"systemIndigo\"}\n                key={index.toString()}\n              >Column {index}</Text>\n            }\n          />\n        </LazyHStack>\n      </ScrollView>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Layout/LazyHStack/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"LazyVGrid","content":"The `LazyVGrid` component is part of the **Scripting** app's UI library. It arranges its children in a grid layout with columns defined by customizable sizing and alignment options. Items are created and displayed only as needed, optimizing performance for large or dynamic data sets.\n\n***\n\n## LazyVGrid\n\n## Type: `FunctionComponent<LazyVGridProps>`\n\nA `LazyVGrid` arranges its children in a grid that grows vertically. Unlike a regular grid, it loads and displays items lazily, creating them only when they are about to appear on the screen. This makes it ideal for grids with large or dynamic content.\n\n***\n\n## LazyVGridProps\n\n| Property      | Type                                                                                          | Default                       | Description                                                                                                                                          |\n| ------------- | --------------------------------------------------------------------------------------------- | ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `columns`     | `GridItem[]`                                                                                  | **Required**                  | Defines the configuration for the columns in the grid, including their size and alignment.                                                           |\n| `alignment`   | `HorizontalAlignment`                                                                         | `undefined`                   | Controls how the grid is aligned horizontally within its parent view.                                                                                |\n| `spacing`     | `number`                                                                                      | `undefined` (default spacing) | The distance between adjacent grid items. If `undefined`, the grid uses a default spacing value.                                                     |\n| `pinnedViews` | `'sectionHeaders'` \\| `'sectionFooters'` \\| `'sectionHeadersAndFooters'`                      | `undefined`                   | Specifies which child views remain pinned to the bounds of the parent scroll view.                                                                   |\n| `children`    | `(VirtualNode \\| undefined \\| null \\| (VirtualNode \\| undefined \\| null)[])[] \\| VirtualNode` | `undefined`                   | The content to be displayed in the grid. Accepts one or multiple `VirtualNode` elements, including arrays and optional `null` or `undefined` values. |\n\n***\n\n## GridItem\n\nDefines the properties for a single column in the grid.\n\n| Property    | Type        | Default                       | Description                                                                                           |\n| ----------- | ----------- | ----------------------------- | ----------------------------------------------------------------------------------------------------- |\n| `alignment` | `Alignment` | `undefined`                   | Specifies the alignment to use when placing each child view in this column.                           |\n| `spacing`   | `number`    | `undefined` (default spacing) | The spacing between items in this column and the next.                                                |\n| `size`      | `GridSize`  | **Required**                  | Defines the size of the column. Can be a fixed size or a flexible/adaptive size based on the content. |\n\n***\n\n## GridSize\n\nDefines the size of a row or column in the grid layout.\n\n| Type       | Properties                                   | Description                                                                                            |\n| ---------- | -------------------------------------------- | ------------------------------------------------------------------------------------------------------ |\n| `number`   | *N/A*                                        | A fixed size for the row or column.                                                                    |\n| `adaptive` | `min: number`, `max?: number \\| 'infinity'`  | Specifies a flexible size that adapts to the content, with a minimum and optional maximum constraint.  |\n| `flexible` | `min?: number`, `max?: number \\| 'infinity'` | Specifies a single flexible size that adjusts dynamically, constrained by optional min and max values. |\n\n***\n\n## PinnedScrollViews\n\nDefines which views in the grid remain pinned to the parent scroll view's bounds as it scrolls:\n\n- `'sectionHeaders'`: Pins only the section headers\n- `'sectionFooters'`: Pins only the section footers\n- `'sectionHeadersAndFooters'`: Pins both section headers and footers\n\n***\n\n## Example Usage\n\n```tsx\n\n\nconst Example = () => {\n  const columns = [\n    { size: 50 },\n    { size: { type: 'adaptive', min: 40, max: 100 } },\n    { size: { type: 'flexible', min: 30, max: 'infinity' } }\n  ]\n\n  return (\n    <ScrollView>\n      <LazyVGrid\n        columns={columns}\n        alignment=\"leading\"\n        spacing={16}\n      >\n        <Text>Item 1</Text>\n        <Text>Item 2</Text>\n        <Text>Item 3</Text>\n      </LazyVGrid>\n    </ScrollView>\n  )\n}\n```\n\n### Explanation:\n\n- Defines three columns with different sizing:\n  - A fixed column with a size of 50\n  - An adaptive column with a minimum size of 40 and a maximum size of 100\n  - A flexible column with a minimum size of 30 and no maximum size\n- The grid is aligned to the leading edge of its parent view with 16 points of spacing\n\n***\n\n## Notes\n\n- `LazyVGrid` is ideal for vertically growing grid layouts with large or dynamic content\n- Use `GridSize` to define flexible or adaptive layouts based on the available space\n- The `pinnedViews` property ensures critical views like headers or footers remain visible during scrolling\n\nThis API provides flexibility and performance optimizations for grid-based vertical layouts.\n","routePath":"/doc/Views/Layout/LazyVGrid/","lang":"en","toc":[{"id":"lazyvgrid","text":"LazyVGrid","depth":2,"charIndex":291},{"id":"type-functioncomponentlazyvgridprops","text":"Type: `FunctionComponent<LazyVGridProps>`","depth":2,"charIndex":305},{"id":"lazyvgridprops","text":"LazyVGridProps","depth":2,"charIndex":610},{"id":"griditem","text":"GridItem","depth":2,"charIndex":2714},{"id":"gridsize","text":"GridSize","depth":2,"charIndex":3620},{"id":"pinnedscrollviews","text":"PinnedScrollViews","depth":2,"charIndex":4531},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":4830},{"id":"explanation","text":"Explanation:","depth":3,"charIndex":5300},{"id":"notes","text":"Notes","depth":2,"charIndex":5638}],"frontmatter":{},"version":"","description":"The LazyVGrid component is part of the Scripting app's UI library. It arranges its children in a grid layout with columns defined by customizable sizing and alignment options. Items are created and displayed only as needed, optimizing performance for large or dynamic data sets."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const colors = useMemo(() => {\n    const colors: {\n      name: string\n      value: Color\n    }[] = []\n\n    const numToHex = (n: number) => {\n      return n === 0 ? '00' : n.toString(16)\n    }\n\n    for (let r = 0x00; r <= 0xff; r += 0x11) {\n      for (let g = 0x00; g <= 0xff; g += 0x11) {\n        for (let b = 0x00; b <= 0xff; b += 0x11) {\n          const name = `${numToHex(r)}${numToHex(g)}${numToHex(b)}`\n          const value: Color = `#${name}`\n          colors.push({\n            name,\n            value\n          })\n        }\n      }\n    }\n\n    return colors\n  }, [])\n\n  return <NavigationStack>\n    <ScrollView\n      navigationTitle={\"LazyVGrid\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <LazyVGrid\n        spacing={2}\n        columns={[\n          { size: 100 },\n          { size: 100 },\n          { size: 100 },\n          { size: 100 },\n        ]}\n      >\n        {colors.map((color) =>\n          <VStack>\n            <Text>\n              {color.name}\n            </Text>\n            <RoundedRectangle\n              fill={color.value}\n              cornerRadius={4}\n              frame={{\n                width: 50,\n                height: 50\n              }}\n            />\n          </VStack>\n        )}\n      </LazyVGrid>\n    </ScrollView>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Layout/LazyVGrid/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"LazyVStack","content":"The `LazyVStack` component is part of the **Scripting** app's UI library. It arranges its children in a vertical stack, creating and displaying items only as needed, optimizing performance for large data sets.\n\n## LazyVStack\n\n## Type: `FunctionComponent<LazyVStackProps>`\n\nA `LazyVStack` arranges its children in a line that grows vertically. Unlike a regular vertical stack, it lazily loads and displays views only when they are about to appear on the screen. This makes it ideal for lists or large sets of dynamically generated content.\n\n***\n\n## LazyVStackProps\n\n| Property      | Type                                                                                          | Default                       | Description                                                                                                                                           |\n| ------------- | --------------------------------------------------------------------------------------------- | ----------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `alignment`   | `HorizontalAlignment`                                                                         | `undefined`                   | Determines how the children are aligned horizontally within the stack. All child views share the same horizontal screen coordinate.                   |\n| `spacing`     | `number`                                                                                      | `undefined` (default spacing) | The space between adjacent subviews. If `undefined`, the stack uses a default spacing value.                                                          |\n| `pinnedViews` | `'sectionHeaders'` \\| `'sectionFooters'` \\| `'sectionHeadersAndFooters'`                      | `undefined`                   | Specifies which child views remain pinned to the bounds of the scroll view during scrolling.                                                          |\n| `children`    | `(VirtualNode \\| undefined \\| null \\| (VirtualNode \\| undefined \\| null)[])[] \\| VirtualNode` | `undefined`                   | The content to be displayed in the stack. Accepts one or multiple `VirtualNode` elements, including arrays and optional `null` or `undefined` values. |\n\n***\n\n## PinnedScrollViews\n\nThe `PinnedScrollViews` type defines which kinds of child views can remain pinned to the scroll view's bounds as it scrolls:\n\n- `'sectionHeaders'`: Pins only the section headers\n- `'sectionFooters'`: Pins only the section footers\n- `'sectionHeadersAndFooters'`: Pins both section headers and footers\n\n***\n\n## Example Usage\n\n```tsx\n\n\nconst Example = () => {\n  return (\n    <ScrollView>\n      <LazyVStack alignment=\"leading\" spacing={12} pinnedViews=\"sectionHeaders\">\n        {list.map(item => \n          <Section\n            key={item.id}\n            header={\n              <Text>{item.title}</Text>\n            }\n          >\n            <ItemView\n              item={item}\n            />\n          </Section>\n        )}\n      </LazyVStack>\n    </ScrollView>\n  )\n}\n```\n\n### Explanation:\n\n- The stack arranges the `Section` views vertically with `12` points of spacing\n- The `alignment` property aligns the items to the leading edge of the stack\n- The `pinnedViews` property ensures that section headers remain pinned to the top of the scroll view when scrolling\n\n***\n\n## Notes\n\n- Lazy loading ensures that views are only created as they become visible, which improves performance for large content\n- Use `spacing` to control the vertical distance between items and `alignment` to customize the horizontal alignment\n- The `pinnedViews` property is especially useful for table or list-like layouts with sticky headers or footers\n\nThis API allows you to efficiently manage vertically growing content while offering customization for layout and scrolling behavior.\n","routePath":"/doc/Views/Layout/LazyVStack/","lang":"en","toc":[{"id":"lazyvstack","text":"LazyVStack","depth":2,"charIndex":211},{"id":"type-functioncomponentlazyvstackprops","text":"Type: `FunctionComponent<LazyVStackProps>`","depth":2,"charIndex":226},{"id":"lazyvstackprops","text":"LazyVStackProps","depth":2,"charIndex":545},{"id":"pinnedscrollviews","text":"PinnedScrollViews","depth":2,"charIndex":2359},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2687},{"id":"explanation","text":"Explanation:","depth":3,"charIndex":3150},{"id":"notes","text":"Notes","depth":2,"charIndex":3448}],"frontmatter":{},"version":"","description":"The LazyVStack component is part of the Scripting app's UI library. It arranges its children in a vertical stack, creating and displaying items only as needed, optimizing performance for large data sets."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const groups = useMemo(() => {\n    const groups: {\n      name: string\n      items: number[]\n    }[] = []\n\n    for (let i = 1; i < 10; i++) {\n      const list: {\n        name: string\n        items: number[]\n      } = {\n        name: \"Group \" + i,\n        items: []\n      }\n\n      for (let j = 0; j < 10; j++) {\n        list.items.push(i * 10 + j)\n      }\n\n      groups.push(list)\n    }\n\n    return groups\n  }, [])\n\n  return <NavigationStack>\n    <ScrollView\n      navigationTitle={\"LazyVStack\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <LazyVStack\n        alignment={\"leading\"}\n        spacing={10}\n        pinnedViews={\"sectionHeaders\"}\n      >\n        {groups.map(group =>\n          <Section\n            header={\n              <HStack\n                background={\"purple\"}\n              >\n                <Text>{group.name}</Text>\n                <Spacer />\n              </HStack>\n            }\n          >\n            {group.items.map(item =>\n              <Text>Row {item}</Text>\n            )}\n          </Section>\n        )}\n      </LazyVStack>\n    </ScrollView>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Layout/LazyVStack/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"VStack","content":"The `VStack` component in the Scripting app is a layout view that arranges its child views vertically. It provides flexible options for aligning its subviews and controlling the spacing between them.\n\n***\n\n## **`VStack` Component**\n\n### **Type Declaration**\n\n```ts\ndeclare const VStack: FunctionComponent<VStackProps>\n```\n\n### **Description**\n\nThe `VStack` component arranges its child views in a vertical line, making it ideal for creating vertically stacked layouts. You can customize the alignment of subviews and the spacing between them to suit your design needs.\n\n***\n\n## **Properties**\n\n### `alignment` (Optional)\n\n- **Type**: `HorizontalAlignment`\n- **Default**: `\"center\"`\n- **Description**: Determines the horizontal alignment of the subviews within the stack. The alignment specifies how views are positioned relative to each other horizontally when placed vertically in the `VStack`.\n- **Accepted Values**:\n  - `\"leading\"`: Aligns views to the left.\n  - `\"center\"`: Centers views horizontally.\n  - `\"trailing\"`: Aligns views to the right.\n\n#### **Example**\n\n```tsx\n<VStack alignment=\"leading\">\n  <Text>Leading Aligned</Text>\n  <Text>Another Item</Text>\n</VStack>\n```\n\n***\n\n### `spacing` (Optional)\n\n- **Type**: `number | undefined`\n- **Default**: Automatically calculated based on the child views if not specified.\n- **Description**: Sets the distance in pixels between adjacent subviews. Use `undefined` to let the stack automatically determine the optimal spacing.\n\n#### **Example**\n\n```tsx\n<VStack spacing={10}>\n  <Text>Item 1</Text>\n  <Text>Item 2</Text>\n</VStack>\n```\n\n***\n\n### `children` (Optional)\n\n- **Type**:\n  ```ts\n  (VirtualNode | undefined | null | (VirtualNode | undefined | null)[])[] | VirtualNode | undefined\n  ```\n- **Description**: The child elements to display within the stack. You can pass individual elements, arrays of elements, or `undefined`/`null` values. Nullish values are ignored, allowing for dynamic layouts.\n\n#### **Example**\n\n```tsx\n<VStack>\n  <Text>First Item</Text>\n  <Image systemName=\"star\" />\n</VStack>\n```\n\n***\n\n## **`HorizontalAlignment` Type**\n\nHorizontal alignment guides control how views are positioned relative to each other when placed vertically in a `VStack`.\n\n### **Type Declaration**\n\n```ts\ntype HorizontalAlignment = 'leading' | 'center' | 'trailing'\n```\n\n### **Alignment Options**\n\n- **`leading`**: Aligns all subviews to the left edge of the stack.\n- **`center`**: Centers all subviews horizontally.\n- **`trailing`**: Aligns all subviews to the right edge of the stack.\n\n### **Visual Guide**\n\nBelow is an illustration of the three alignment options:\n\n***\n\n## **Usage Example**\n\n```tsx\n<VStack alignment=\"leading\" spacing={10}>\n  <Image systemName=\"globe\" />\n  <Text>Leading Aligned Item</Text>\n  <Text>Another Item</Text>\n</VStack>\n```\n\n### **Explanation**\n\n1. **`alignment=\"leading\"`**: Aligns all subviews to the left.\n2. **`spacing={10}`**: Adds 10 pixels of space between each subview.\n3. Contains two child views:\n   - An `Image` view displaying a system icon.\n   - Two `Text` views displaying labeled items.\n\n***\n\n## **Best Practices**\n\n1. Use `alignment` to control horizontal positioning when stacking text and icons for better visual consistency.\n2. Leverage `spacing` to create breathable and aesthetically pleasing layouts.\n3. Pass dynamic or conditional children without worrying about `null` or `undefined` values.\n\nThis documentation ensures you can confidently use the `VStack` component to create clean, vertically stacked layouts in your Scripting app projects.\n","routePath":"/doc/Views/Layout/VStack/","lang":"en","toc":[{"id":"vstack-component","text":"**`VStack` Component**","depth":2,"charIndex":206},{"id":"type-declaration","text":"**Type Declaration**","depth":3,"charIndex":233},{"id":"description","text":"**Description**","depth":3,"charIndex":323},{"id":"properties","text":"**Properties**","depth":2,"charIndex":575},{"id":"alignment-optional","text":"`alignment` (Optional)","depth":3,"charIndex":594},{"id":"example","text":"**Example**","depth":4,"charIndex":1052},{"id":"spacing-optional","text":"`spacing` (Optional)","depth":3,"charIndex":1185},{"id":"example-1","text":"**Example**","depth":4,"charIndex":1480},{"id":"children-optional","text":"`children` (Optional)","depth":3,"charIndex":1591},{"id":"example-2","text":"**Example**","depth":4,"charIndex":1954},{"id":"horizontalalignment-type","text":"**`HorizontalAlignment` Type**","depth":2,"charIndex":2064},{"id":"type-declaration-1","text":"**Type Declaration**","depth":3,"charIndex":2222},{"id":"alignment-options","text":"**Alignment Options**","depth":3,"charIndex":2320},{"id":"visual-guide","text":"**Visual Guide**","depth":3,"charIndex":2537},{"id":"usage-example","text":"**Usage Example**","depth":2,"charIndex":2622},{"id":"explanation","text":"**Explanation**","depth":3,"charIndex":2803},{"id":"best-practices","text":"**Best Practices**","depth":2,"charIndex":3086}],"frontmatter":{},"version":"","description":"The VStack component in the Scripting app is a layout view that arranges its child views vertically. It provides flexible options for aligning its subviews and controlling the spacing between them."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const list = [0, 1, 2, 3, 4]\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"VStack\"}\n      alignment={\"leading\"}\n      spacing={10}\n    >\n      {list.map((_, index) =>\n        <Text>Item{index + 1}</Text>\n      )}\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Layout/VStack/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"ZStack","content":"The `ZStack` component in the Scripting app allows you to arrange subviews on top of each other in a layered stack. It provides flexibility in aligning the layers along both the x- and y-axes using predefined alignment guides.\n\n***\n\n## `ZStackProps`\n\nThe `ZStack` component accepts the following props:\n\n| Property    | Type                                                                                          | Default Value | Description                                                                                   |\n| ----------- | --------------------------------------------------------------------------------------------- | ------------- | --------------------------------------------------------------------------------------------- |\n| `alignment` | `Alignment` (optional)                                                                        | `\"center\"`    | Determines how the subviews are aligned along the x- and y-axes.                              |\n| `children`  | `(VirtualNode \\| undefined \\| null \\| (VirtualNode \\| undefined \\| null)[])[] \\| VirtualNode` | `undefined`   | The child components to be displayed in the stack. Can be a single node or an array of nodes. |\n\n***\n\n## `Alignment`\n\nThe `Alignment` type defines a set of common alignments for stacking views. These alignments combine horizontal and vertical guides. The diagram below illustrates these alignments:\n\n### Supported Values:\n\n| Value                         | Description                                                         |\n| ----------------------------- | ------------------------------------------------------------------- |\n| `\"top\"`                       | Aligns views at the top edge of the stack.                          |\n| `\"center\"`                    | Centers views along both horizontal and vertical axes.              |\n| `\"bottom\"`                    | Aligns views at the bottom edge of the stack.                       |\n| `\"leading\"`                   | Aligns views at the leading edge (left in left-to-right layouts).   |\n| `\"trailing\"`                  | Aligns views at the trailing edge (right in left-to-right layouts). |\n| `\"bottomLeading\"`             | Aligns views at the bottom-left corner.                             |\n| `\"bottomTrailing\"`            | Aligns views at the bottom-right corner.                            |\n| `\"centerFirstTextBaseline\"`   | Aligns views at the center using the first text baseline.           |\n| `\"centerLastTextBaseline\"`    | Aligns views at the center using the last text baseline.            |\n| `\"leadingFirstTextBaseline\"`  | Aligns views at the leading edge using the first text baseline.     |\n| `\"leadingLastTextBaseline\"`   | Aligns views at the leading edge using the last text baseline.      |\n| `\"topLeading\"`                | Aligns views at the top-left corner.                                |\n| `\"topTrailing\"`               | Aligns views at the top-right corner.                               |\n| `\"trailingFirstTextBaseline\"` | Aligns views at the trailing edge using the first text baseline.    |\n| `\"trailingLastTextBaseline\"`  | Aligns views at the trailing edge using the last text baseline.     |\n\n***\n\n## `ZStack` Component\n\nThe `ZStack` is a function component that arranges its children in a layered stack. Each child is placed relative to the alignment defined in the `alignment` property.\n\n### Importing the Component\n\nTo use the `ZStack` component, ensure you import it from the Scripting app's `scripting` package:\n\n```tsx\n```\n\n***\n\n## Example Usage\n\n### 1. Basic Example\n\nAlign child views at the top:\n\n```tsx\n<ZStack alignment=\"top\">\n  <Image systemName=\"globe\" />\n  <Text>\n    Hello world.\n  </Text>\n</ZStack>\n```\n\n### 2. Advanced Alignments\n\nUse complex alignments such as `bottomLeading` to position child elements:\n\n```tsx\n<ZStack alignment=\"bottomLeading\">\n  <Rectangle fill=\"gray\" />\n  <Text>\n    Bottom Leading Text\n  </Text>\n</ZStack>\n```\n\n### 3. Nested `ZStack` Example\n\nCombine `ZStack` with other layout components for complex arrangements:\n\n```tsx\n<ZStack alignment=\"center\">\n  <Rectangle fill=\"blue\" />\n  <ZStack alignment=\"topTrailing\">\n    <Image systemName=\"star\" />\n    <Text>\n      Nested ZStack\n    </Text>\n  </ZStack>\n</ZStack>\n```\n\n***\n\n## Notes\n\n- **Performance Considerations**: Avoid adding too many child views to the `ZStack` to prevent potential performance bottlenecks in complex layouts.\n- **Composable Layouts**: Use `ZStack` alongside other components like `VStack` and `HStack` for flexible and dynamic UIs.\n","routePath":"/doc/Views/Layout/ZStack/","lang":"en","toc":[{"id":"zstackprops","text":"`ZStackProps`","depth":2,"charIndex":233},{"id":"alignment","text":"`Alignment`","depth":2,"charIndex":1206},{"id":"supported-values","text":"Supported Values:","depth":3,"charIndex":1404},{"id":"zstack-component","text":"`ZStack` Component","depth":2,"charIndex":3201},{"id":"importing-the-component","text":"Importing the Component","depth":3,"charIndex":3393},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":3538},{"id":"1-basic-example","text":"1. Basic Example","depth":3,"charIndex":3556},{"id":"2-advanced-alignments","text":"2. Advanced Alignments","depth":3,"charIndex":3723},{"id":"3-nested-zstack-example","text":"3. Nested `ZStack` Example","depth":3,"charIndex":3955},{"id":"notes","text":"Notes","depth":2,"charIndex":4265}],"frontmatter":{},"version":"","description":"The ZStack component in the Scripting app allows you to arrange subviews on top of each other in a layered stack. It provides flexibility in aligning the layers along both the x- and y-axes using predefined alignment guides."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const colors: Color[] = [\n    \"red\",\n    \"orange\",\n    \"yellow\",\n    \"green\",\n    \"blue\",\n    \"purple\",\n  ]\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"ZStack\"}\n    >\n      <Section\n        header={\n          <Text\n            textCase={null}\n          >ZStack</Text>\n        }\n      >\n        <ZStack>\n          {colors.map((color, index) =>\n            <Rectangle\n              fill={color}\n              frame={{\n                width: 100,\n                height: 100,\n              }}\n              offset={{\n                x: index * 10,\n                y: index * 10\n              }}\n            />\n          )}\n        </ZStack>\n      </Section>\n\n      <Section\n        header={\n          <Text\n            textCase={null}\n          >background</Text>\n        }\n      >\n        <Text\n          background={{\n            content: <Rectangle\n              fill={\"systemBlue\"}\n              frame={{\n                width: 100,\n                height: 50,\n              }}\n            />,\n            alignment: \"center\",\n          }}\n        >Hello Scripting!</Text>\n      </Section>\n\n      <Section\n        header={\n          <Text\n            textCase={null}\n          >overlay</Text>\n        }\n      >\n        <Circle\n          fill={\"yellow\"}\n          frame={{\n            width: 100,\n            height: 100,\n          }}\n          overlay={{\n            content: <Rectangle\n              fill={\"blue\"}\n              frame={{\n                width: 50,\n                height: 50,\n              }}\n            />,\n            alignment: \"center\"\n          }}\n        />\n      </Section>\n\n      <Section\n        title={\"containerBackground (iOS 18.0+)\"}\n      >\n        <Button\n          title={\"Present\"}\n          action={() => {\n            Navigation.present({\n              element: <ContainerBackgroundExample />,\n              modalPresentationStyle: \"pageSheet\"\n            })\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nfunction ContainerBackgroundExample() {\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"containerBackground\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />,\n      }}\n    >\n      <NavigationLink\n        title={\"Red Page\"}\n        destination={\n          <VStack\n            navigationContainerBackground={\"red\"}\n            frame={{\n              maxWidth: 'infinity',\n              maxHeight: 'infinity'\n            }}\n          >\n            <Text>A red page</Text>\n          </VStack>\n        }\n      />\n      <NavigationLink\n        title={\"Blue Page\"}\n        destination={\n          <VStack\n            navigationContainerBackground={\"blue\"}\n            frame={{\n              maxWidth: 'infinity',\n              maxHeight: 'infinity'\n            }}\n          >\n            <Text>A blue page</Text>\n          </VStack>\n        }\n      />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Layout/ZStack/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Link","content":"The `Link` component provides a way to create tappable controls that navigate to a specified URL. This component can be used to open web pages, app-specific URLs, or other schemes.\n\n> **Note**: If the `Link` component is used within a widget, the `widgetURL` modifier will be ignored.\n\n### Props\n\n| Name       | Type                      | Description                                                                  |\n| ---------- | ------------------------- | ---------------------------------------------------------------------------- |\n| `url`      | `string`                  | The destination URL to open when tapped.                                     |\n| `children` | `string` \\| `VirtualNode` | The content displayed inside the link. Can be plain text or a custom layout. |\n\n### Example\n\n```tsx\n<Link url={Script.createOpenURLScheme('Script A')}>\n  Open Script A\n</Link>\n\n<Link url=\"https://example.com\">\n  <HStack>\n    <Image\n      systemName=\"globe\"\n      width={20}\n      height={20}\n      padding={{ trailing: 8 }}\n    />\n    <Text>Open Link</Text>\n  </HStack>\n</Link>\n```\n\nThis component supports both simple text and complex layouts as its children. When tapped, it opens the provided `url` using the appropriate handler (e.g., Safari, another app, or a custom scheme).\n","routePath":"/doc/Views/Link","lang":"en","toc":[{"id":"props","text":"Props","depth":3,"charIndex":286},{"id":"example","text":"Example","depth":3,"charIndex":786}],"frontmatter":{},"version":"","description":"The Link component provides a way to create tappable controls that navigate to a specified URL. This component can be used to open web pages, app-specific URLs, or other schemes. Note: If the Link component is used within a widget, the widgetURL modifier will be ignored. Props Example This component supports both simple text and complex layouts as its children. When tapped, it opens the provided url using the appropriate handler (e.g., Safari, another app, or a custom scheme)."},{"title":"DisclosureGroup","content":"The `DisclosureGroup` component allows you to organize related content into collapsible sections. This is useful for grouping items in a list, especially when dealing with hierarchical or optional content.\n\nThis example demonstrates how to create a top-level disclosure group that can be toggled open or closed, and how to nest additional `DisclosureGroup` components for sub-sections.\n\n***\n\n## Overview\n\nYou will learn how to:\n\n- Use `DisclosureGroup` to create expandable sections\n- Bind the expanded state to local component state\n- Nest disclosure groups to represent hierarchical content\n- Combine with other controls such as `Toggle`, `Text`, and `Button`\n\n***\n\n## Example Code\n\n### 1. Import Dependencies\n\n```tsx\n```\n\n### 2. Define Component State\n\nManage the expanded state and toggle values using `useState`:\n\n```tsx\nconst [topExpanded, setTopExpanded] = useState(true)\nconst [oneIsOn, setOneIsOn] = useState(false)\nconst [twoIsOn, setTwoIsOn] = useState(true)\n```\n\n### 3. Layout UI with Disclosure Groups\n\nThe main layout includes a `List` within a `NavigationStack`. A `Button` is provided to toggle the top-level group manually. The `DisclosureGroup` itself contains multiple child views and a nested `DisclosureGroup`:\n\n```tsx\nreturn <NavigationStack>\n  <List\n    navigationTitle={\"DislcosureGroup\"}\n    navigationBarTitleDisplayMode={\"inline\"}\n  >\n    <Button\n      title={\"Toggle expanded\"}\n      action={() => setTopExpanded(!topExpanded)}\n    />\n    <DisclosureGroup\n      title={\"Items\"}\n      isExpanded={topExpanded}\n      onChanged={setTopExpanded}\n    >\n      <Toggle\n        title={\"Toggle 1\"}\n        value={oneIsOn}\n        onChanged={setOneIsOn}\n      />\n      <Toggle\n        title={\"Toggle 2\"}\n        value={twoIsOn}\n        onChanged={setTwoIsOn}\n      />\n      <DisclosureGroup\n        title={\"Sub-items\"}\n      >\n        <Text>Sub-item 1</Text>\n      </DisclosureGroup>\n    </DisclosureGroup>\n  </List>\n</NavigationStack>\n```\n\n### 4. Present the View and Exit\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Key Concepts\n\n- **DisclosureGroup**: An expandable view that reveals or hides its content.\n- **isExpanded**: Binds the expanded/collapsed state to a Boolean value.\n- **onChanged**: Callback that triggers when the user expands or collapses the group.\n- **Nested Groups**: You can include one `DisclosureGroup` inside another to create a hierarchy.\n- **Integration**: Works seamlessly with controls such as `Toggle`, `Text`, `Button`, etc.\n\n***\n\n## Use Cases\n\n- Grouping settings into categories\n- Creating collapsible FAQs or toolboxes\n- Displaying nested data like folders, sections, or filters\n\nThis pattern provides a clean and user-friendly way to organize complex or optional content within a scrollable list.\n","routePath":"/doc/Views/List/DisclosureGroup/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":392},{"id":"example-code","text":"Example Code","depth":2,"charIndex":668},{"id":"1-import-dependencies","text":"1. Import Dependencies","depth":3,"charIndex":685},{"id":"2-define-component-state","text":"2. Define Component State","depth":3,"charIndex":725},{"id":"3-layout-ui-with-disclosure-groups","text":"3. Layout UI with Disclosure Groups","depth":3,"charIndex":975},{"id":"4-present-the-view-and-exit","text":"4. Present the View and Exit","depth":3,"charIndex":1959},{"id":"key-concepts","text":"Key Concepts","depth":2,"charIndex":2118},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2565}],"frontmatter":{},"version":"","description":"The DisclosureGroup component allows you to organize related content into collapsible sections. This is useful for grouping items in a list, especially when dealing with hierarchical or optional content. This example demonstrates how to create a top-level disclosure group that can be toggled open or closed, and how to nest additional DisclosureGroup components for sub-sections."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [topExpanded, setTopExpanded] = useState(true)\n  const [oneIsOn, setOneIsOn] = useState(false)\n  const [twoIsOn, setTwoIsOn] = useState(true)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"DislcosureGroup\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Button\n        title={\"Toggle expanded\"}\n        action={() => setTopExpanded(!topExpanded)}\n      />\n      <DisclosureGroup\n        title={\"Items\"}\n        isExpanded={topExpanded}\n        onChanged={setTopExpanded}\n      >\n        <Toggle\n          title={\"Toggle 1\"}\n          value={oneIsOn}\n          onChanged={setOneIsOn}\n        />\n        <Toggle\n          title={\"Toggle 2\"}\n          value={twoIsOn}\n          onChanged={setTwoIsOn}\n        />\n\n        <DisclosureGroup\n          title={\"Sub-items\"}\n        >\n          <Text>Sub-item 1</Text>\n        </DisclosureGroup>\n      </DisclosureGroup>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/List/DisclosureGroup/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Display data inside a row","content":"This example demonstrates how to use the `List` component to present structured data using custom row layouts. Each row displays a person's name and phone number in a clean and readable format, using stack-based layout components inspired by SwiftUI.\n\n## Overview\n\nYou will learn how to:\n\n- Define a custom row component (`PersonRowView`)\n- Use `List` to display a collection of items\n- Apply text styling and system icons\n- Structure layouts using `VStack` and `HStack`\n\n***\n\n## Example Code\n\n### 1. Import Dependencies and Define Data\n\n```tsx\n\n\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n```\n\n### 2. Create a Row Component\n\nThe `PersonRowView` component renders the content of a single list row. It uses a vertical stack to separate the name and phone number, with appropriate font styles and colors.\n\n```tsx\nfunction PersonRowView({\n  person\n}: {\n  person: Person\n}) {\n  return <VStack\n    alignment={\"leading\"}\n    spacing={3}\n  >\n    <Text\n      foregroundStyle={\"label\"}\n      font={\"headline\"}\n    >{person.name}</Text>\n    <HStack\n      spacing={3}\n      foregroundStyle={\"secondaryLabel\"}\n      font={\"subheadline\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n```\n\n### 3. Display the List in a Navigation Stack\n\nUse `NavigationStack` and `List` to display all rows. The navigation title is set to describe the purpose of the view.\n\n```tsx\nfunction Example() {\n  const staff: Person[] = [\n    {\n      name: \"Juan Chavez\",\n      phoneNumber: \"(408) 555-4301\",\n    },\n    {\n      name: \"Mei Chen\",\n      phoneNumber: \"(919) 555-2481\"\n    }\n  ]\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Display data inside a row\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {staff.map(person =>\n        <PersonRowView\n          person={person}\n        />\n      )}\n    </List>\n  </NavigationStack>\n}\n```\n\n### 4. Present the View\n\nUse `Navigation.present` to show the view, then exit the script after dismissal:\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Summary\n\nThis pattern shows how to **display data inside a row** by:\n\n- Structuring UI with layout components (`VStack`, `HStack`)\n- Defining reusable, typed row components\n- Presenting data collections cleanly using `List`\n- Integrating icons and labels for better visual clarity\n\nIt is ideal for rendering lists of structured objects such as contacts, messages, or any custom data rows.\n","routePath":"/doc/Views/List/Display data inside a row/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":252},{"id":"example-code","text":"Example Code","depth":2,"charIndex":477},{"id":"1-import-dependencies-and-define-data","text":"1. Import Dependencies and Define Data","depth":3,"charIndex":494},{"id":"2-create-a-row-component","text":"2. Create a Row Component","depth":3,"charIndex":607},{"id":"3-display-the-list-in-a-navigation-stack","text":"3. Display the List in a Navigation Stack","depth":3,"charIndex":1263},{"id":"4-present-the-view","text":"4. Present the View","depth":3,"charIndex":1918},{"id":"summary","text":"Summary","depth":2,"charIndex":2150}],"frontmatter":{},"version":"","description":"This example demonstrates how to use the List component to present structured data using custom row layouts. Each row displays a person's name and phone number in a clean and readable format, using stack-based layout components inspired by SwiftUI."},{"title":"Example","content":"```tsx\n\n\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\nfunction PersonRowView({\n  person\n}: {\n  person: Person\n}) {\n  return <VStack\n    alignment={\"leading\"}\n    spacing={3}\n  >\n    <Text\n      foregroundStyle={\"label\"}\n      font={\"headline\"}\n    >{person.name}</Text>\n    <HStack\n      spacing={3}\n      foregroundStyle={\"secondaryLabel\"}\n      font={\"subheadline\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction Example() {\n  const staff: Person[] = [\n    {\n      name: \"Juan Chavez\",\n      phoneNumber: \"(408) 555-4301\",\n    },\n    {\n      name: \"Mei Chen\",\n      phoneNumber: \"(919) 555-2481\"\n    }\n  ]\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Display data inside a row\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {staff.map(person =>\n        <PersonRowView\n          person={person}\n        />\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/List/Display data inside a row/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Editable List","content":"This example demonstrates how to build an **editable list** in the Scripting app using `List`, `ForEach`, and `EditButton` components. The list supports item deletion and reordering with built-in editing controls.\n\n***\n\n## Overview\n\nYou will learn how to:\n\n- Display a list of items using `ForEach`\n- Enable deletion and reordering of items\n- Use `EditButton` to toggle editing mode\n- Handle state updates using `useState`\n\n***\n\n## Example Code\n\n### 1. Import Required Modules\n\n```tsx\n```\n\n### 2. Define Component State\n\nThe list is initialized with an array of `Color` strings:\n\n```tsx\nconst [colors, setColors] = useState<Color[]>([\n  \"red\",\n  \"orange\",\n  \"yellow\",\n  \"green\",\n  \"blue\",\n  \"purple\",\n])\n```\n\n### 3. Handle Item Deletion\n\nThe `onDelete` function removes items from the list based on selected indices:\n\n```tsx\nfunction onDelete(indices: number[]) {\n  setColors(colors.filter((_, index) => !indices.includes(index)))\n}\n```\n\n### 4. Handle Item Reordering\n\nThe `onMove` function repositions selected items to a new offset in the list:\n\n```tsx\nfunction onMove(indices: number[], newOffset: number) {\n  const movingItems = indices.map(index => colors[index])\n  const newColors = colors.filter((_, index) => !indices.includes(index))\n  newColors.splice(newOffset, 0, ...movingItems)\n  setColors(newColors)\n}\n```\n\n### 5. Build the Editable List\n\nThe main UI is constructed using a `NavigationStack` and a `List` containing a `ForEach` loop. The `EditButton` is added to the toolbar to enable editing mode:\n\n```tsx\nreturn <NavigationStack>\n  <List\n    navigationTitle={\"Editable List\"}\n    navigationBarTitleDisplayMode={\"inline\"}\n    toolbar={{\n      confirmationAction: [\n        <EditButton />,\n      ]\n    }}\n  >\n    <ForEach\n      count={colors.length}\n      itemBuilder={index =>\n        <Text\n          key={colors[index]} // A unique key is required!\n        >{colors[index]}</Text>\n      }\n      onDelete={onDelete}\n      onMove={onMove}\n    />\n  </List>\n</NavigationStack>\n```\n\n### 6. Launch the View\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Key Components\n\n- **List**: Displays a scrollable, editable list of items.\n- **ForEach**: Dynamically generates views based on item count.\n- **EditButton**: Automatically enables editing mode in the list when tapped.\n- **onDelete / onMove**: Callback functions triggered during item removal or reordering.\n- **useState**: Tracks the current array of items in the list.\n\n***\n\n## Notes\n\n- Always provide a unique `key` for each item in `ForEach` to ensure correct rendering.\n- Reordering and deletion are only available while in editing mode, which is toggled using `EditButton`.\n\n***\n\n## Use Cases\n\n- Reorderable lists (e.g., task prioritization)\n- Editable collections (e.g., color palette, items, settings)\n- Dynamic UI that responds to user input\n\nThis example provides a flexible foundation for interactive lists in your custom scripts or tools.\n","routePath":"/doc/Views/List/Editable List/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":220},{"id":"example-code","text":"Example Code","depth":2,"charIndex":429},{"id":"1-import-required-modules","text":"1. Import Required Modules","depth":3,"charIndex":446},{"id":"2-define-component-state","text":"2. Define Component State","depth":3,"charIndex":490},{"id":"3-handle-item-deletion","text":"3. Handle Item Deletion","depth":3,"charIndex":709},{"id":"4-handle-item-reordering","text":"4. Handle Item Reordering","depth":3,"charIndex":938},{"id":"5-build-the-editable-list","text":"5. Build the Editable List","depth":3,"charIndex":1322},{"id":"6-launch-the-view","text":"6. Launch the View","depth":3,"charIndex":1995},{"id":"key-components","text":"Key Components","depth":2,"charIndex":2144},{"id":"notes","text":"Notes","depth":2,"charIndex":2522},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":2731}],"frontmatter":{},"version":"","description":"This example demonstrates how to build an editable list in the Scripting app using List, ForEach, and EditButton components. The list supports item deletion and reordering with built-in editing controls."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [colors, setColors] = useState<Color[]>([\n    \"red\",\n    \"orange\",\n    \"yellow\",\n    \"green\",\n    \"blue\",\n    \"purple\",\n  ])\n\n  function onDelete(indices: number[]) {\n    setColors(colors.filter((_, index) => !indices.includes(index)))\n  }\n\n  function onMove(indices: number[], newOffset: number) {\n    const movingItems = indices.map(index => colors[index])\n    const newColors = colors.filter((_, index) => !indices.includes(index))\n    newColors.splice(newOffset, 0, ...movingItems)\n    setColors(newColors)\n  }\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Editable List\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        confirmationAction: [\n          <EditButton />,\n        ]\n      }}\n    >\n      <ForEach\n        count={colors.length}\n        itemBuilder={index =>\n          <Text\n            key={colors[index]} // Must provide a unique key!!!\n          >{colors[index]}</Text>\n        }\n        onDelete={onDelete}\n        onMove={onMove}\n      />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/List/Editable List/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"List interaction","content":"This example demonstrates how to implement interactive list items in the **Scripting** app using **swipe gestures**. By leveraging `leadingSwipeActions` and `trailingSwipeActions`, you can provide contextual actions such as marking a message as unread, deleting a message, or flagging it.\n\n***\n\n## Overview\n\nYou will learn how to:\n\n- Display a list of messages using a custom cell layout\n- Implement swipe actions on both leading and trailing edges\n- Configure swipe behavior (e.g. disabling full swipe)\n- Use `Button`, `Label`, and `Circle` for interactive UI elements\n\n***\n\n## Example Code\n\n### 1. Define Message Data Type\n\n```ts\ntype Message = {\n  from: string\n  content: string\n  isUnread: boolean\n}\n```\n\n### 2. Create a Custom Message Cell\n\nEach message is rendered with a colored indicator (for unread status), sender name, and content using `HStack` and `VStack`.\n\n```tsx\nfunction MessageCell({\n  message\n}: {\n  message: Message\n}) {\n  return <HStack>\n    <Circle\n      fill={message.isUnread ? \"systemBlue\" : \"clear\"}\n      frame={{\n        width: 16,\n        height: 16,\n      }}\n    />\n    <VStack alignment={\"leading\"}>\n      <Text font={\"headline\"}>{message.from}</Text>\n      <Text>{message.content}</Text>\n    </VStack>\n  </HStack>\n}\n```\n\n### 3. Manage State and Actions\n\n```tsx\nconst [messages, setMessages] = useState<Message[]>(...)\n\nfunction toggleUnread(message: Message) {\n  setMessages(messages.map(item =>\n    item !== message ? item : { ...message, isUnread: !item.isUnread }\n  ))\n}\n\nfunction deleteMessage(message: Message) {\n  setMessages(messages.filter(item => item !== message))\n}\n```\n\n### 4. Construct the List with Swipe Actions\n\n```tsx\nreturn <NavigationStack>\n  <List\n    navigationTitle={\"Messages\"}\n    navigationBarTitleDisplayMode={\"inline\"}\n    listStyle={\"inset\"}\n  >\n    {messages.map(message =>\n      <MessageCell\n        message={message}\n        leadingSwipeActions={{\n          allowsFullSwipe: false,\n          actions: [\n            <Button\n              action={() => toggleUnread(message)}\n              tint={\"systemBlue\"}\n            >\n              {message.isUnread\n                ? <Label title={\"Read\"} systemImage={\"envelope.open\"} />\n                : <Label title={\"Unread\"} systemImage={\"envelope.badge\"} />\n              }\n            </Button>\n          ]\n        }}\n        trailingSwipeActions={{\n          actions: [\n            <Button\n              role={\"destructive\"}\n              action={() => deleteMessage(message)}\n            >\n              <Label title={\"Delete\"} systemImage={\"trash\"} />\n            </Button>,\n            <Button\n              action={() => {}}\n              tint={\"systemOrange\"}\n            >\n              <Label title={\"Flag\"} systemImage={\"flag\"} />\n            </Button>\n          ]\n        }}\n      />\n    )}\n  </List>\n</NavigationStack>\n```\n\n### 5. Present the View and Exit\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Key Features\n\n- **leadingSwipeActions**: Add actions triggered by swiping from the leading edge (left-to-right in LTR layouts).\n- **trailingSwipeActions**: Add actions triggered by swiping from the trailing edge.\n- **allowsFullSwipe**: When set to `false`, prevents full swipe from automatically triggering the first action.\n- **Button Roles**: Use roles like `\"destructive\"` to style buttons (e.g., red for delete).\n- **tint**: Customize button color for better visual context.\n\n***\n\n## Use Cases\n\n- **Email/Messaging Scripts**: Mark messages as read/unread, delete, archive, or flag.\n- **To-Do Lists**: Complete or remove tasks with quick gestures.\n- **Custom Tools**: Attach context-specific actions to list items.\n\nSwipe actions provide an efficient and intuitive way for users to perform actions directly within list views, improving interaction speed and user experience.\n","routePath":"/doc/Views/List/List interaction/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":295},{"id":"example-code","text":"Example Code","depth":2,"charIndex":576},{"id":"1-define-message-data-type","text":"1. Define Message Data Type","depth":3,"charIndex":593},{"id":"2-create-a-custom-message-cell","text":"2. Create a Custom Message Cell","depth":3,"charIndex":709},{"id":"3-manage-state-and-actions","text":"3. Manage State and Actions","depth":3,"charIndex":1253},{"id":"4-construct-the-list-with-swipe-actions","text":"4. Construct the List with Swipe Actions","depth":3,"charIndex":1614},{"id":"5-present-the-view-and-exit","text":"5. Present the View and Exit","depth":3,"charIndex":2844},{"id":"key-features","text":"Key Features","depth":2,"charIndex":3003},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":3491}],"frontmatter":{},"version":"","description":"This example demonstrates how to implement interactive list items in the Scripting app using swipe gestures. By leveraging leadingSwipeActions and trailingSwipeActions, you can provide contextual actions such as marking a message as unread, deleting a message, or flagging it."},{"title":"Example","content":"```tsx\n\n\ntype Message = {\n  from: string\n  content: string\n  isUnread: boolean\n}\n\nfunction MessageCell({\n  message\n}: {\n  message: Message\n}) {\n  return <HStack>\n    <Circle\n      fill={message.isUnread ? \"systemBlue\" : \"clear\"}\n      frame={{\n        width: 16,\n        height: 16,\n      }}\n    />\n    <VStack\n      alignment={\"leading\"}\n    >\n      <Text font={\"headline\"}>{message.from}</Text>\n      <Text>{message.content}</Text>\n    </VStack>\n  </HStack>\n}\n\nfunction Example() {\n  const [messages, setMessages] = useState<Message[]>(() => [\n    {\n      from: \"Maria Ruiz\",\n      content: \"If you have a list of messages, you can add an action to toggle a message as unread on a swipe from the leading edge, and actions to delete or flag messages on a trailing edge swipe.\",\n      isUnread: true,\n    },\n    {\n      from: \"Mei Chen\",\n      content: \"Actions appear in the order you list them, starting from the swipe’s originating edge. In the example, the Delete action appears closest to the screen’s trailing edge\",\n      isUnread: true,\n    },\n    {\n      from: \"Maria Ruiz\",\n      content: \"By default, the user can perform the first action for a given swipe direction with a full swipe. The user can perform both the toggle unread and delete actions with full swipes. You can opt out of this behavior for an edge by setting the allowsFullSwipe parameter to false.\",\n      isUnread: false,\n    },\n    {\n      from: \"Mei Chen\",\n      content: \"When you set a role for a button using one of the values from the ButtonRole, system styles the button according to its role. In the example above, the delete action appears in red because it has the destructive role. If you want to set a different color, add the tint property to the button\",\n      isUnread: true,\n    }\n  ])\n\n  function toggleUnread(message: Message) {\n    setMessages(messages.map(item => item !== message ? item : {\n      ...message,\n      isUnread: !item.isUnread\n    }))\n  }\n\n  function deleteMessage(message: Message) {\n    setMessages(messages.filter(item => item !== message))\n  }\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Messages\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      listStyle={\"inset\"}\n    >\n      {messages.map(message =>\n        <MessageCell\n          message={message}\n          leadingSwipeActions={{\n            allowsFullSwipe: false,\n            actions: [\n              <Button\n                action={() => toggleUnread(message)}\n                tint={\"systemBlue\"}\n              >\n                {message.isUnread\n                  ? <Label title={\"Read\"} systemImage={\"envelope.open\"} />\n                  : <Label title={\"Unread\"} systemImage={\"envelope.badge\"} />\n                }\n              </Button>\n            ]\n          }}\n          trailingSwipeActions={{\n            actions: [\n              <Button\n                role={\"destructive\"}\n                action={() => deleteMessage(message)}\n              >\n                <Label title={\"Delete\"} systemImage={\"trash\"} />\n              </Button>,\n              <Button\n                action={() => { }}\n                tint={\"systemOrange\"}\n              >\n                <Label title={\"Flag\"} systemImage={\"flag\"} />\n              </Button>\n            ]\n          }}\n        />\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/List/List interaction/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"List style","content":"The `listStyle` property allows you to customize the behavior and appearance of a list in your UI when using the `List` view.\n\n## Property Declaration\n\n```tsx\nlistStyle?: ListStyle;\n```\n\n### Description\n\nThe `listStyle` property defines the visual style of a list, allowing you to choose from various predefined list styles.\n\n### Accepted Values\n\nThe `listStyle` property accepts the following string values:\n\n- **`automatic`**: Uses the platform’s default behavior and appearance for a list.\n- **`bordered`**: Displays a list with standard borders.\n- **`carousel`**: Applies a carousel-like appearance to the list.\n- **`elliptical`**: Gives the list an elliptical style.\n- **`grouped`**: Displays the list in a grouped format.\n- **`inset`**: Applies an inset appearance to the list.\n- **`insetGroup`**: Combines inset and grouped styles for the list.\n- **`plain`**: Displays the list in a plain style without additional decorations.\n- **`sidebar`**: Renders the list in a sidebar-like appearance.\n\n### Default Behavior\n\nIf `listStyle` is not specified, the default style is determined by the platform.\n\n## Usage Example\n\nHere’s how you can apply the `listStyle` property in your TypeScript code:\n\n### Example: Plain List Style\n\n```tsx\n<List\n  listStyle=\"plain\"\n>\n  <Text>Item 1</Text>\n  <Text>Item 2</Text>\n  <Text>Item 3</Text>\n</List>\n```\n\nThis creates a list with a plain style.\n\n### Example: Grouped List Style\n\n```tsx\n<List\n  listStyle=\"grouped\"\n>\n  <Section header={\n    <Text>Fruits</Text>\n  }>\n    <Text>Apple</Text>\n    <Text>Banana</Text>\n  </Section>\n  <Section header={\n    <Text>Vegetables</Text>\n  }>\n    <Text>Carrot</Text>\n    <Text>Broccoli</Text>\n  </Section>\n</List>\n```\n\nThis creates a grouped list with sections.\n\n### Example: Sidebar List Style\n\n```tsx\n<List\n  listStyle=\"sidebar\"\n>\n  <Text>Home</Text>\n  <Text>Settings</Text>\n  <Text>Profile</Text>\n</List>\n```\n\nThis creates a sidebar-style list.\n\n## Notes\n\n- The `listStyle` property directly maps to SwiftUI’s `listStyle` modifier.\n- Make sure to match the string value with one of the predefined styles listed above to avoid runtime errors.\n","routePath":"/doc/Views/List/List style/","lang":"en","toc":[{"id":"property-declaration","text":"Property Declaration","depth":2,"charIndex":127},{"id":"description","text":"Description","depth":3,"charIndex":187},{"id":"accepted-values","text":"Accepted Values","depth":3,"charIndex":326},{"id":"default-behavior","text":"Default Behavior","depth":3,"charIndex":999},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":1104},{"id":"example-plain-list-style","text":"Example: Plain List Style","depth":3,"charIndex":1198},{"id":"example-grouped-list-style","text":"Example: Grouped List Style","depth":3,"charIndex":1384},{"id":"example-sidebar-list-style","text":"Example: Sidebar List Style","depth":3,"charIndex":1736},{"id":"notes","text":"Notes","depth":2,"charIndex":1922}],"frontmatter":{},"version":"","description":"The listStyle property allows you to customize the behavior and appearance of a list in your UI when using the List view."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [listStyle, setListStyle] = useState<ListStyle>(\"automatic\")\n  const listStyleOptions = useMemo<ListStyle[]>(() => [\n    \"automatic\",\n    \"bordered\",\n    \"carousel\",\n    \"elliptical\",\n    \"grouped\",\n    \"inset\",\n    \"insetGroup\",\n    \"plain\",\n    \"sidebar\",\n  ], [])\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"List Style\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      listStyle={listStyle}\n    // listSectionSpacing={5} // apply for all sections\n    >\n      <Picker\n        title={\"ListStyle\"}\n        value={listStyle}\n        onChanged={setListStyle as any}\n        pickerStyle={\"menu\"}\n      >\n        {listStyleOptions.map(listStyle =>\n          <Text tag={listStyle}>{listStyle}</Text>\n        )}\n      </Picker>\n\n      <Section>\n        <Text\n          badge={10} // Use a badge to convey optional, supplementary information about a view\n        >Recents</Text>\n        <Text>Favorites</Text>\n      </Section>\n\n      <Section\n        header={<Text>Colors</Text>}\n        listItemTint={\"systemBlue\"}\n      >\n        <Text>Red</Text>\n        <Text>Blue</Text>\n      </Section>\n\n      <Section\n        header={<Text>Shapes</Text>}\n      >\n        <Text>Rectangle</Text>\n        <Text>Circle</Text>\n      </Section>\n\n      <Section\n        header={<Text>Borders</Text>}\n        listSectionSpacing={10} // specify on an individual Section\n      >\n        <Text>Dashed</Text>\n        <Text>Solid</Text>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/List/List style/list_style","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Refresable List","content":"Marks a scrollable view as **refreshable**, enabling the user to pull down to trigger an asynchronous data reload.\n\n## Type\n\n```ts\nrefreshable?: () => Promise<void>\n```\n\n***\n\n## Overview\n\nUse the `refreshable` modifier on scrollable views—such as `<List>`—to implement pull-to-refresh functionality. When the user pulls down past the top of the view, the framework executes the asynchronous handler defined by `refreshable`.\n\nInside the handler, you can perform any asynchronous operations (e.g., fetching network data or updating local state), and once the operation completes, the refresh control will automatically dismiss.\n\nThis behavior closely mirrors SwiftUI’s [`refreshable`]() modifier.\n\n***\n\n## Usage Example\n\n```tsx\n<List\n  navigationTitle=\"Refreshable List\"\n  navigationBarTitleDisplayMode=\"inline\"\n  refreshable={refresh}\n/>\n```\n\n### Full Example\n\n```tsx\nfunction Example() {\n  const [data, setData] = useState(generateRandomList)\n\n  function generateRandomList() {\n    const data: number[] = []\n    const count = Math.ceil(Math.random() * 100 + 10)\n\n    for (let i = 0; i < count; i++) {\n      const num = Math.ceil(Math.random() * 1000)\n      data.push(num)\n    }\n\n    return data\n  }\n\n  async function refresh() {\n    return new Promise<void>(resolve => {\n      setTimeout(() => {\n        setData(generateRandomList())\n        resolve()\n      }, 2000)\n    })\n  }\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"Refreshable List\"\n      navigationBarTitleDisplayMode=\"inline\"\n      refreshable={refresh}\n    >\n      <Section header={\n        <Text textCase={null}>Pull down to refresh</Text>\n      }>\n        {data.map(item =>\n          <Text>Number: {item}</Text>\n        )}\n      </Section>\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## Behavior Notes\n\n- The `refreshable` function **must return a `Promise<void>`**. The refresh control remains visible until the promise resolves.\n- Use `await` inside the refresh function to perform async tasks:\n\n  ```ts\n  refreshable={async () => {\n    const result = await fetchData()\n    updateState(result)\n  }}\n  ```\n- This modifier is only effective on **scrollable containers**, such as `<List>`.\n- You should update the relevant state inside the handler to reflect new data.\n- Avoid long-running or blocking tasks without feedback; always resolve the promise in a timely manner to dismiss the refresh spinner.\n\n***\n\n## Best Practices\n\n- Keep refresh logic short and efficient.\n- Always **resolve** the promise to ensure the UI doesn’t hang.\n- If needed, use a short delay to simulate refresh animations during development:\n\n  ```ts\n  await new Promise(resolve => setTimeout(resolve, 1000))\n  ```\n","routePath":"/doc/Views/List/Refresable List/","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":116},{"id":"overview","text":"Overview","depth":2,"charIndex":175},{"id":"usage-example","text":"Usage Example","depth":2,"charIndex":702},{"id":"full-example","text":"Full Example","depth":3,"charIndex":843},{"id":"behavior-notes","text":"Behavior Notes","depth":2,"charIndex":1765},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":2390}],"frontmatter":{},"version":"","description":"Marks a scrollable view as refreshable, enabling the user to pull down to trigger an asynchronous data reload."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [data, setData] = useState(generateRandomList)\n\n  function generateRandomList() {\n    const data: number[] = []\n    const count = Math.ceil(Math.random() * 100 + 10)\n\n    for (let i = 0; i < count; i++) {\n      const num = Math.ceil(Math.random() * 1000)\n      data.push(num)\n    }\n\n    return data\n  }\n\n  async function refresh() {\n    return new Promise<void>(resolve => {\n      setTimeout(() => {\n        setData(generateRandomList())\n        resolve()\n      }, 1000 * 2)\n    })\n  }\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Refreshable List\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      refreshable={refresh}\n    >\n      <Section header={\n        <Text textCase={null}>Pull down to refresh</Text>\n      }>\n        {data.map(item =>\n          <Text>Number: {item}</Text>\n        )}\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/List/Refresable List/refreshable_list","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Represent data hierarchy in sections","content":"This example demonstrates how to use the `Section` component in the **Scripting** app to visually organize hierarchical data within a `List`. The content is structured by grouping related items—such as staff members by department—into labeled sections for better readability and navigation.\n\n***\n\n## Overview\n\nYou will learn how to:\n\n- Display structured data using `List` and `Section`\n- Group related items under section headers\n- Create reusable row components for clarity\n- Bind hierarchical data (Company → Departments → Staff) into a readable layout\n\n***\n\n## Data Model\n\nThe example defines a three-level hierarchy representing a company structure:\n\n```ts\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\ntype Department = {\n  name: string\n  staff: Person[]\n}\n\ntype Company = {\n  name: string\n  departments: Department[]\n}\n```\n\n### Sample Data\n\n```ts\nconst companyA: Company = {\n  name: \"Company A\",\n  departments: [\n    {\n      name: \"Sales\",\n      staff: [\n        { name: \"Juan Chavez\", phoneNumber: \"(408) 555-4301\" },\n        { name: \"Mei Chen\", phoneNumber: \"(919) 555-2481\" }\n      ]\n    },\n    {\n      name: \"Engineering\",\n      staff: [\n        { name: \"Bill James\", phoneNumber: \"(408) 555-4450\" },\n        { name: \"Anne Johnson\", phoneNumber: \"(417) 555-9311\" }\n      ]\n    }\n  ]\n}\n```\n\n***\n\n## Person Row Component\n\n`PersonRowView` is a reusable component that displays a person's name and phone number with appropriate formatting.\n\n```tsx\nfunction PersonRowView({ person }: { person: Person }) {\n  return <VStack alignment={\"leading\"} spacing={3}>\n    <Text font={\"headline\"} foregroundStyle={\"label\"}>{person.name}</Text>\n    <HStack spacing={3} font={\"subheadline\"} foregroundStyle={\"secondaryLabel\"}>\n      <Label title={person.phoneNumber} systemImage={\"phone\"} />\n    </HStack>\n  </VStack>\n}\n```\n\n***\n\n## Main View Layout\n\nThe main view uses a `NavigationStack` containing a `List` where each department is represented as a separate `Section`. The section header displays the department name, and each person is rendered using the `PersonRowView`.\n\n```tsx\nfunction Example() {\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Represent data hierarchy in sections\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {companyA.departments.map(department =>\n        <Section\n          header={<Text>{department.name}</Text>}\n        >\n          {department.staff.map(person =>\n            <PersonRowView person={person} />\n          )}\n        </Section>\n      )}\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## Entry Point\n\nThe script presents the view and exits upon dismissal:\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Key Components\n\n- **List**: Provides a scrollable container for content.\n- **Section**: Groups related items under a common header.\n- **NavigationStack**: Enables title display and navigation context.\n- **Reusable View**: `PersonRowView` ensures clean, consistent row formatting.\n\n***\n\n## Use Cases\n\n- Grouping contacts by department or team\n- Displaying categorized lists (e.g., tasks, inventory, regions)\n- Organizing any data set that has a parent-child structure\n\nUsing `Section` within `List` improves both visual structure and user comprehension when working with hierarchical data.\n","routePath":"/doc/Views/List/Represent data hierarchy in sections/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":297},{"id":"data-model","text":"Data Model","depth":2,"charIndex":562},{"id":"sample-data","text":"Sample Data","depth":3,"charIndex":841},{"id":"person-row-component","text":"Person Row Component","depth":2,"charIndex":1316},{"id":"main-view-layout","text":"Main View Layout","depth":2,"charIndex":1833},{"id":"entry-point","text":"Entry Point","depth":2,"charIndex":2558},{"id":"key-components","text":"Key Components","depth":2,"charIndex":2755},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":3044}],"frontmatter":{},"version":"","description":"This example demonstrates how to use the Section component in the Scripting app to visually organize hierarchical data within a List. The content is structured by grouping related items—such as staff members by department—into labeled sections for better readability and navigation."},{"title":"Example","content":"```tsx\n\n\ntype Department = {\n  name: string\n  staff: Person[]\n}\n\ntype Company = {\n  name: string\n  departments: Department[]\n}\n\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\nconst companyA: Company = {\n  name: \"Company A\",\n  departments: [\n    {\n      name: \"Sales\",\n      staff: [\n        {\n          name: \"Juan Chavez\",\n          phoneNumber: \"(408) 555-4301\",\n        },\n        {\n          name: \"Mei Chen\",\n          phoneNumber: \"(919) 555-2481\",\n        }\n      ]\n    },\n    {\n      name: \"Engineering\",\n      staff: [\n        {\n          name: \"Bill James\",\n          phoneNumber: \"(408) 555-4450\"\n        },\n        {\n          name: \"Anne Johnson\",\n          phoneNumber: \"(417) 555-9311\"\n        }\n      ]\n    }\n  ]\n}\n\nfunction PersonRowView({\n  person\n}: {\n  person: Person\n}) {\n  return <VStack\n    alignment={\"leading\"}\n    spacing={3}\n  >\n    <Text\n      foregroundStyle={\"label\"}\n      font={\"headline\"}\n    >{person.name}</Text>\n    <HStack\n      spacing={3}\n      foregroundStyle={\"secondaryLabel\"}\n      font={\"subheadline\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction Example() {\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Represent data hierarchy in sections\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {companyA.departments.map(department =>\n        <Section\n          header={\n            <Text>{department.name}</Text>\n          }\n        >\n          {department.staff.map(person =>\n            <PersonRowView\n              person={person}\n            />\n          )}\n        </Section>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/List/Represent data hierarchy in sections/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Selectable List","content":"`List.selection` provides **selection state binding** for the `List` component. It enables:\n\n- Single selection mode\n- Multiple selection mode\n- Integration with edit mode via `EditButton`\n- Automatic synchronization with user interaction\n\n***\n\n## 1. API Definition\n\n```ts\ntype ListProps = {\n  selection?: Observable<string | null> | Observable<string[]>\n  ...\n}\n\ndeclare const List: FunctionComponent<ListProps>\n```\n\n***\n\n## 2. selection Type Description\n\nThe selection mode is determined by the generic type of `Observable`:\n\n| Mode               | Observable Type              | Description                                   |\n| ------------------ | ---------------------------- | --------------------------------------------- |\n| Single selection   | `Observable<string \\| null>` | Only one item can be selected                 |\n| Multiple selection | `Observable<string[]>`       | Multiple items can be selected simultaneously |\n\n***\n\n## 3. Automatic Binding Rules with ForEach\n\nWhen `List` is bound to `selection`, **every item inside `ForEach.data` must conform to the following structure**:\n\n```ts\n{\n  id: string\n}\n```\n\nBinding behavior:\n\n1. The `id` property is automatically used as the **unique selection identifier**\n2. When a list item is tapped:\n\n   - Single selection mode: `selected.value` is automatically set to the tapped item’s `id`\n   - Multiple selection mode: the `id` is automatically added to or removed from `selected.value`\n3. Manual tap handling is not required\n4. The `id` value must remain unique and stable; otherwise, selection behavior becomes undefined\n\n***\n\n## 4. Single Selection Mode\n\n### 1. Definition\n\n```tsx\nconst selected = useObservable<string | null>(null)\n```\n\n### 2. Usage Example\n\n```tsx\nfunction View() {\n  const selected = useObservable<string | null>(null)\n\n  const options = useObservable<{ id: string }[]>(() =>\n    new Array(10).fill(0).map((_, i) => ({ \n      id: i.toString() \n    }))\n  )\n\n  return <NavigationStack>\n    <List selection={selected}>\n      <ForEach\n        data={options}\n        builder={item =>\n          <Text>{item.id}</Text>\n        }\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n### 3. State Description\n\n- `null`: no item is currently selected\n- `\"3\"`: the item whose `id` is `\"3\"` is selected\n\n***\n\n## 5. Multiple Selection Mode\n\n### 1. Definition\n\n```tsx\nconst selected = useObservable<string[]>([])\n```\n\n### 2. Usage Example\n\n```tsx\nfunction View() {\n  const dismiss = Navigation.useDismiss()\n  const selected = useObservable<string[]>([])\n\n  const options = useObservable<{ id: string }[]>(() =>\n    new Array(30).fill(0).map((_, i) => ({\n      id: i.toString()\n    }))\n  )\n\n  console.log(selected.value)\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"Page Title\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />,\n        topBarTrailing: <EditButton />\n      }}\n      selection={selected}\n    >\n      <ForEach\n        data={options}\n        builder={item =>\n          <Text>{item.id}</Text>\n        }\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n### 3. State Description\n\n`selected.value` is always an array of strings, for example:\n\n```ts\n[\"2\", \"5\", \"8\"]\n```\n\nThis indicates that three items are currently selected.\n\n***\n\n## 6. Interaction Between selection and EditButton\n\nWhen `List` is bound to `selection`:\n\n1. `EditButton` automatically enables list editing mode\n2. While in edit mode:\n\n   - Single selection: tapping an item replaces the current selection\n   - Multiple selection: multiple items can be selected simultaneously\n3. After exiting edit mode:\n\n   - `selected.value` is **automatically reset**\n\n     - Single selection resets to `null`\n     - Multiple selection resets to an empty array `[]`\n\nThis behavior matches SwiftUI’s native edit mode behavior.\n\n***\n\n## 7. Programmatic Control of selection\n\nIn addition to user interaction, selection can be modified by code.\n\n### Single Selection\n\n```ts\nselected.setValue(\"5\")\n```\n\n### Multiple Selection\n\n```ts\nselected.setValue([\"1\", \"3\", \"7\"])\n```\n\nThe UI will update automatically to reflect the new selection state.\n\n***\n\n## 8. Compatibility with NavigationStack\n\n`List.selection` is fully compatible with `NavigationStack` and does not affect:\n\n- Navigation behavior\n- Toolbar layout\n- Edit mode interactions\n- Back navigation behavior\n\nRecommended structure:\n\n```tsx\n<NavigationStack>\n  <List selection={selected}>\n    ...\n  </List>\n</NavigationStack>\n```\n\n***\n\n## 9. Common Errors and Misuse\n\n### 1. Incorrect selection Type\n\nIncorrect:\n\n```ts\nconst selected = useObservable<number | null>(null)\n```\n\nCorrect:\n\n```ts\nconst selected = useObservable<string | null>(null)\n```\n\nCurrently, only `string` is supported as the selection identifier type.\n\n***\n\n### 2. Incorrect Initialization for Multiple Selection\n\nIncorrect:\n\n```ts\nconst selected = useObservable<string[]>(null)\n```\n\nCorrect:\n\n```ts\nconst selected = useObservable<string[]>([])\n```\n\n***\n\n### 3. Missing id in ForEach.data\n\nIncorrect:\n\n```tsx\nconst options = [{ name: \"A\" }, { name: \"B\" }]\n```\n\nThis will cause:\n\n- Selection to fail\n- Unstable checked state\n- List reuse inconsistencies\n\n***\n\n## 10. Typical Use Cases\n\n`List.selection` is suitable for:\n\n- Single-choice settings (themes, languages, preferences)\n- Batch deletion\n- Batch export\n- Batch sharing\n- File managers\n- Contact pickers\n- Task lists with selection\n","routePath":"/doc/Views/List/Selectable List","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":245},{"id":"2-selection-type-description","text":"2. selection Type Description","depth":2,"charIndex":423},{"id":"3-automatic-binding-rules-with-foreach","text":"3. Automatic Binding Rules with ForEach","depth":2,"charIndex":942},{"id":"4-single-selection-mode","text":"4. Single Selection Mode","depth":2,"charIndex":1595},{"id":"1-definition","text":"1. Definition","depth":3,"charIndex":1624},{"id":"2-usage-example","text":"2. Usage Example","depth":3,"charIndex":1707},{"id":"3-state-description","text":"3. State Description","depth":3,"charIndex":2160},{"id":"5-multiple-selection-mode","text":"5. Multiple Selection Mode","depth":2,"charIndex":2282},{"id":"1-definition-1","text":"1. Definition","depth":3,"charIndex":2313},{"id":"2-usage-example-1","text":"2. Usage Example","depth":3,"charIndex":2389},{"id":"3-state-description-1","text":"3. State Description","depth":3,"charIndex":3155},{"id":"6-interaction-between-selection-and-editbutton","text":"6. Interaction Between selection and EditButton","depth":2,"charIndex":3332},{"id":"7-programmatic-control-of-selection","text":"7. Programmatic Control of selection","depth":2,"charIndex":3885},{"id":"single-selection","text":"Single Selection","depth":3,"charIndex":3995},{"id":"multiple-selection","text":"Multiple Selection","depth":3,"charIndex":4051},{"id":"8-compatibility-with-navigationstack","text":"8. Compatibility with NavigationStack","depth":2,"charIndex":4196},{"id":"9-common-errors-and-misuse","text":"9. Common Errors and Misuse","depth":2,"charIndex":4538},{"id":"1-incorrect-selection-type","text":"1. Incorrect selection Type","depth":3,"charIndex":4570},{"id":"2-incorrect-initialization-for-multiple-selection","text":"2. Incorrect Initialization for Multiple Selection","depth":3,"charIndex":4829},{"id":"3-missing-id-in-foreachdata","text":"3. Missing id in ForEach.data","depth":3,"charIndex":5026},{"id":"10-typical-use-cases","text":"10. Typical Use Cases","depth":2,"charIndex":5230}],"frontmatter":{},"version":"","description":"List.selection provides selection state binding for the List component. It enables: Single selection modeMultiple selection modeIntegration with edit mode via EditButtonAutomatic synchronization with user interaction"},{"title":"Use list for navigations","content":"This example demonstrates how to build a navigable list-based interface in the **Scripting** app. It organizes structured data into expandable sections using `DisclosureGroup`, and allows users to navigate to detail views using `NavigationLink`.\n\n***\n\n## Overview\n\nYou will learn how to:\n\n- Use `List` to display a directory of departments and staff\n- Use `DisclosureGroup` to group related items under collapsible headers\n- Use `NavigationLink` to navigate to a detailed view for each item\n- Build reusable view components for clarity and modularity\n\n***\n\n## Data Model\n\nThe example defines a nested data structure representing a company, its departments, and the staff within each department.\n\n```ts\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\ntype Department = {\n  name: string\n  staff: Person[]\n}\n\ntype Company = {\n  name: string\n  departments: Department[]\n}\n```\n\n### Sample Data\n\n```ts\nconst companyA: Company = {\n  name: \"Company A\",\n  departments: [\n    {\n      name: \"Sales\",\n      staff: [\n        { name: \"Juan Chavez\", phoneNumber: \"(408) 555-4301\" },\n        { name: \"Mei Chen\", phoneNumber: \"(919) 555-2481\" }\n      ]\n    },\n    {\n      name: \"Engineering\",\n      staff: [\n        { name: \"Bill James\", phoneNumber: \"(408) 555-4450\" },\n        { name: \"Anne Johnson\", phoneNumber: \"(417) 555-9311\" }\n      ]\n    }\n  ]\n}\n```\n\n***\n\n## View Components\n\n### `PersonRowView`\n\nA reusable component to display a person's name and phone number in a vertically stacked layout.\n\n```tsx\nfunction PersonRowView({ person }: { person: Person }) {\n  return <VStack alignment={\"leading\"} spacing={3}>\n    <Text font={\"headline\"} foregroundStyle={\"label\"}>{person.name}</Text>\n    <HStack spacing={3} font={\"subheadline\"} foregroundStyle={\"secondaryLabel\"}>\n      <Label title={person.phoneNumber} systemImage={\"phone\"} />\n    </HStack>\n  </VStack>\n}\n```\n\n### `PersonDetailView`\n\nDisplays detailed information about a selected person.\n\n```tsx\nfunction PersonDetailView({ person }: { person: Person }) {\n  return <VStack>\n    <Text font={\"title\"} foregroundStyle={\"label\"}>{person.name}</Text>\n    <HStack foregroundStyle={\"secondaryLabel\"}>\n      <Label title={person.phoneNumber} systemImage={\"phone\"} />\n    </HStack>\n  </VStack>\n}\n```\n\n***\n\n## Main View Layout\n\nThe root view uses a `NavigationStack` and displays departments grouped in a `List`. Each `DisclosureGroup` expands to show staff members. Selecting a person navigates to their detail view.\n\n```tsx\nfunction Example() {\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Staff Directory\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {companyA.departments.map(department =>\n        <DisclosureGroup title={department.name}>\n          {department.staff.map(person =>\n            <NavigationLink\n              destination={<PersonDetailView person={person} />}\n            >\n              <PersonRowView person={person} />\n            </NavigationLink>\n          )}\n        </DisclosureGroup>\n      )}\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## Launching the View\n\n```tsx\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Key Components\n\n- **List**: Displays a vertically scrollable list of items.\n- **DisclosureGroup**: Organizes content into expandable/collapsible sections.\n- **NavigationLink**: Enables navigation to another view when tapped.\n- **NavigationStack**: Provides navigation context for view transitions.\n\n***\n\n## Use Cases\n\n- Building directory-style interfaces (e.g., org charts, contact lists)\n- Organizing hierarchical data with drill-down navigation\n- Providing a structured browsing experience\n\nThis example offers a clean and scalable pattern for navigating through structured lists and accessing detailed information with ease.\n","routePath":"/doc/Views/List/Use list for navigations/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":252},{"id":"data-model","text":"Data Model","depth":2,"charIndex":557},{"id":"sample-data","text":"Sample Data","depth":3,"charIndex":881},{"id":"view-components","text":"View Components","depth":2,"charIndex":1356},{"id":"personrowview","text":"`PersonRowView`","depth":3,"charIndex":1376},{"id":"persondetailview","text":"`PersonDetailView`","depth":3,"charIndex":1865},{"id":"main-view-layout","text":"Main View Layout","depth":2,"charIndex":2253},{"id":"launching-the-view","text":"Launching the View","depth":2,"charIndex":3042},{"id":"key-components","text":"Key Components","depth":2,"charIndex":3190},{"id":"use-cases","text":"Use Cases","depth":2,"charIndex":3497}],"frontmatter":{},"version":"","description":"This example demonstrates how to build a navigable list-based interface in the Scripting app. It organizes structured data into expandable sections using DisclosureGroup, and allows users to navigate to detail views using NavigationLink."},{"title":"Example","content":"```tsx\n\n\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\ntype Department = {\n  name: string\n  staff: Person[]\n}\n\ntype Company = {\n  name: string\n  departments: Department[]\n}\n\nconst companyA: Company = {\n  name: \"Company A\",\n  departments: [\n    {\n      name: \"Sales\",\n      staff: [\n        {\n          name: \"Juan Chavez\",\n          phoneNumber: \"(408) 555-4301\",\n        },\n        {\n          name: \"Mei Chen\",\n          phoneNumber: \"(919) 555-2481\",\n        }\n      ]\n    },\n    {\n      name: \"Engineering\",\n      staff: [\n        {\n          name: \"Bill James\",\n          phoneNumber: \"(408) 555-4450\"\n        },\n        {\n          name: \"Anne Johnson\",\n          phoneNumber: \"(417) 555-9311\"\n        }\n      ]\n    }\n  ]\n}\n\nfunction PersonRowView({\n  person\n}: {\n  person: Person\n}) {\n  return <VStack\n    alignment={\"leading\"}\n    spacing={3}\n  >\n    <Text\n      foregroundStyle={\"label\"}\n      font={\"headline\"}\n    >{person.name}</Text>\n    <HStack\n      spacing={3}\n      foregroundStyle={\"secondaryLabel\"}\n      font={\"subheadline\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction Example() {\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Staff Directory\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {companyA.departments.map(department =>\n        <DisclosureGroup\n          title={department.name}\n        >\n          {department.staff.map(person =>\n            <NavigationLink\n              destination={\n                <PersonDetailView\n                  person={person}\n                />\n              }\n            >\n              <PersonRowView\n                person={person}\n              />\n            </NavigationLink>\n          )}\n        </DisclosureGroup>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nfunction PersonDetailView({\n  person\n}: {\n  person: Person\n}) {\n\n  return <VStack>\n    <Text\n      font={\"title\"}\n      foregroundStyle={\"label\"}\n    >{person.name}</Text>\n    <HStack\n      foregroundStyle={\"secondaryLabel\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/List/Use list for navigations/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"LivePhotoView","content":"`LivePhoto` represents a system Live Photo, which consists of:\n\n- A high-resolution still image\n- A short video clip bound to that image\n\nIn Scripting, `LivePhoto` is a **system-managed object**. It cannot be instantiated directly with `new` and is typically obtained from:\n\n- A photo picker result\n- Asynchronous construction from local image and video files\n\nLivePhoto is commonly used to:\n\n- Display Live Photos in the UI\n- Access underlying image and video resources\n- Decompose, rebuild, or re-save Live Photos\n\n***\n\n## LivePhoto Class\n\n### size\n\n```ts\nreadonly size: Size\n```\n\nThe pixel size of the Live Photo, corresponding to its still image component.\n\nTypical use cases include layout calculation, scaling decisions, and inspecting the original resolution.\n\n***\n\n### getAssetResources()\n\n```ts\ngetAssetResources(): Promise<{\n  data: Data\n  assetLocalIdentifier: string\n  contentType: UTType\n  originalFilename: string\n  pixelHeight: number\n  pixelWidth: number\n}[]>\n```\n\nRetrieves the **underlying asset resources** of the Live Photo.\n\nA Live Photo usually contains at least:\n\n- One still image resource (JPEG / HEIC)\n- One video resource (QuickTime MOV)\n\nEach returned resource object includes:\n\n- `data`\n  The raw binary data of the resource\n\n- `assetLocalIdentifier`\n  The Photos framework local identifier for this resource\n\n- `contentType`\n  The uniform type identifier (UTType), indicating image or video\n\n- `originalFilename`\n  The original filename in the photo library\n\n- `pixelWidth` / `pixelHeight`\n  The actual resolution of the resource\n\nCommon scenarios include exporting Live Photos, splitting them into image and video files, or re-saving them without intermediate temporary files.\n\n***\n\n### LivePhoto.from(options)\n\n```ts\nstatic from(options: {\n  imagePath: string\n  videoPath: string\n  targetSize?: Size | null\n  placeholderImage: UIImage | null\n  contentMode?: \"aspectFit\" | \"aspectFill\"\n  onResult: (\n    result: LivePhoto | null,\n    info: {\n      error: string | null\n      degraded: boolean | null\n      cancelled: boolean | null\n    }\n  ) => void\n}): Promise<() => void>\n```\n\nAsynchronously constructs a Live Photo from a still image file and a matching video file.\n\nKey characteristics:\n\n- The operation is asynchronous\n- `onResult` may be invoked multiple times\n- Supports degraded (low-quality) intermediate results\n- Can be cancelled explicitly\n\n#### Parameters\n\n- `imagePath`\n  Path to the still image file (JPEG / HEIC)\n\n- `videoPath`\n  Path to the associated video file (MOV)\n\n- `targetSize`\n  The desired output size of the Live Photo\n  Pass `null` to preserve the original size\n\n- `placeholderImage`\n  A UIImage displayed while the Live Photo is loading\n\n- `contentMode`\n  How the placeholder image is rendered\n\n  - `aspectFit`: preserves aspect ratio\n  - `aspectFill`: fills the container, possibly cropping\n\n- `onResult(result, info)`\n  Callback invoked when loading completes or updates\n\n#### info Object\n\n- `error`\n  Error message if the request fails\n\n- `degraded`\n  Indicates whether the result is a lower-quality version\n\n- `cancelled`\n  Indicates whether the request was cancelled\n\n#### Return Value\n\nReturns a Promise that resolves to a **cancellation function**:\n\n```ts\n() => void\n```\n\nCalling this function cancels the Live Photo loading request.\n\n***\n\n## LivePhotoView\n\n`LivePhotoView` is a native UI component used to **display and play a Live Photo**, matching the behavior of the system Photos app.\n\nIt is purely a presentation component and does not handle loading, permissions, or persistence.\n\n***\n\n### LivePhotoViewProps\n\n```ts\ntype LivePhotoViewProps = {\n  livePhoto: Observable<LivePhoto | null>\n}\n```\n\n#### livePhoto\n\n- Type: `Observable<LivePhoto | null>`\n- Required\n\nAn observable binding to the Live Photo being displayed.\n\nUsing `Observable` allows:\n\n- Asynchronous loading workflows\n- Dynamic replacement of the Live Photo\n- Automatic UI updates without manual refresh logic\n\nWhen the observable value changes, `LivePhotoView` updates accordingly.\n\n***\n\n## LivePhotoView Example\n\nThe following concise example demonstrates how to display a Live Photo using `LivePhotoView`.\n\n```tsx\n\n\nfunction Example() {\n  const livePhoto = useObservable<LivePhoto | null>(null)\n\n  return <>\n    <Button\n      title=\"Set Live Photo\"\n      action={async () => {\n        const lp = await getLivePhotoSomehow()\n        livePhoto.setValue(lp)\n      }}\n    />\n\n    <LivePhotoView\n      livePhoto={livePhoto}\n      frame={{ idealHeight: 300 }}\n    />\n  </>\n}\n```\n\n### Explanation\n\n- `useObservable<LivePhoto | null>`\n  Declares an observable Live Photo state\n\n- `livePhoto.setValue(lp)`\n  Updates the observable once the Live Photo is available\n\n- `LivePhotoView`\n  Automatically renders and plays the Live Photo when the observable value is non-null\n\nThis pattern highlights the core design principles:\n\n- Data acquisition and UI presentation are decoupled\n- UI updates are driven by reactive state\n- No manual invalidation or redraw logic is required\n\n***\n\n## Design Notes\n\n- `LivePhoto` instances are system-managed objects\n- `LivePhotoView` must be driven by an `Observable`\n- A single LivePhoto can be shared across multiple views\n- The recommended pattern is always **state-driven rendering**\n\n***\n\n## Summary\n\nLive Photo support in Scripting consists of two core components:\n\n- **LivePhoto**\n  A data model for representing, constructing, and inspecting system Live Photos\n\n- **LivePhotoView**\n  A native UI component for rendering Live Photos with dynamic updates\n","routePath":"/doc/Views/LivePhotoView","lang":"en","toc":[{"id":"livephoto-class","text":"LivePhoto Class","depth":2,"charIndex":522},{"id":"size","text":"size","depth":3,"charIndex":542},{"id":"getassetresources","text":"getAssetResources()","depth":3,"charIndex":773},{"id":"livephotofromoptions","text":"LivePhoto.from(options)","depth":3,"charIndex":1714},{"id":"parameters","text":"Parameters","depth":4,"charIndex":2384},{"id":"info-object","text":"info Object","depth":4,"charIndex":2934},{"id":"return-value","text":"Return Value","depth":4,"charIndex":3133},{"id":"livephotoview","text":"LivePhotoView","depth":2,"charIndex":3307},{"id":"livephotoviewprops","text":"LivePhotoViewProps","depth":3,"charIndex":3560},{"id":"livephoto","text":"livePhoto","depth":4,"charIndex":3667},{"id":"livephotoview-example","text":"LivePhotoView Example","depth":2,"charIndex":4024},{"id":"explanation","text":"Explanation","depth":3,"charIndex":4512},{"id":"design-notes","text":"Design Notes","depth":2,"charIndex":5007},{"id":"summary","text":"Summary","depth":2,"charIndex":5253}],"frontmatter":{},"version":"","description":"LivePhoto represents a system Live Photo, which consists of: A high-resolution still imageA short video clip bound to that image In Scripting, LivePhoto is a system-managed object. It cannot be instantiated directly with new and is typically obtained from: A photo picker resultAsynchronous construction from local image and video files LivePhoto is commonly used to: Display Live Photos in the UIAccess underlying image and video resourcesDecompose, rebuild, or re-save Live Photos"},{"title":"Markdown","content":"The `Markdown` component renders styled Markdown content within your script’s user interface. It supports different visual themes and syntax highlighter styles for displaying code blocks, making it ideal for rendering documentation, previews, or custom rich-text content.\n\n***\n\n## Import\n\n```ts\n```\n\n***\n\n## Usage\n\n```tsx\n<Markdown content=\"# Hello\\nThis is a **markdown** view.\" />\n```\n\n***\n\n## Props\n\n### `content: string` **(required)**\n\nThe Markdown-formatted text to display. This should follow standard Markdown syntax.\n\n```tsx\n<Markdown content=\"## Features\\n- Supports **bold**, *italic*, and `code` blocks.\" />\n```\n\n***\n\n### `theme?: 'basic' | 'github' | 'docC'`\n\nSets the visual theme for the Markdown content. Available options:\n\n- `'basic'`: A simple, neutral theme.\n- `'github'`: GitHub-style styling (default for code-like docs).\n- `'docC'`: A theme inspired by Apple's DocC documentation style.\n\n```tsx\n<Markdown content=\"**Hello**\" theme=\"docC\" />\n```\n\n***\n\n### `highlighterTheme?: 'midnight' | 'presentation' | 'sundellsColors' | 'sunset' | 'wwdc17' | 'wwdc18'`\n\nSpecifies a syntax highlighting theme for code blocks within the Markdown content. If not set, no highlighting theme is applied by default.\n\nAvailable options:\n\n- `'midnight'`\n- `'presentation'`\n- `'sundellsColors'`\n- `'sunset'`\n- `'wwdc17'`\n- `'wwdc18'`\n\n````tsx\n<Markdown\n  content=\"```js\\nconsole.log('Hello')\\n```\"\n  highlighterTheme=\"wwdc18\"\n/>\n````\n\n***\n\n### `useDefaultHighlighterTheme?: boolean`\n\nIf set to `true`, the Markdown view will automatically use the default highlighter theme based on the system’s color scheme (light or dark).\n\n> ⚠️ This has no effect if `highlighterTheme` is explicitly set.\n\n````tsx\n<Markdown\n  content=\"```swift\\nprint(\\\"Hello\\\")\\n```\"\n  useDefaultHighlighterTheme={true}\n/>\n````\n\n***\n\n### `scrollable?: boolean`\n\nDefault: `true`\n\nControls whether the Markdown view is scrollable. Set to `false` to embed static Markdown content in a fixed area (e.g. inside a scrollable parent container).\n\n```tsx\n<Markdown content=\"# Title\" scrollable={false} />\n```\n\n***\n\n## Example\n\n```tsx\n<Markdown\n  content={`\n# Welcome to Scripting\n\nHere's a quick example:\n\n\\`\\`\\`ts\nconst hello = \"world\"\nconsole.log(hello)\n\\`\\`\\`\n  `}\n  theme=\"github\"\n  highlighterTheme=\"sunset\"\n/>\n```\n","routePath":"/doc/Views/Markdown","lang":"en","toc":[{"id":"import","text":"Import","depth":2,"charIndex":278},{"id":"usage","text":"Usage","depth":2,"charIndex":305},{"id":"props","text":"Props","depth":2,"charIndex":393},{"id":"content-string-required","text":"`content: string` **(required)**","depth":3,"charIndex":403},{"id":"theme-basic--github--docc","text":"`theme?: 'basic' | 'github' | 'docC'`","depth":3,"charIndex":630},{"id":"highlightertheme-midnight--presentation--sundellscolors--sunset--wwdc17--wwdc18","text":"`highlighterTheme?: 'midnight' | 'presentation' | 'sundellsColors' | 'sunset' | 'wwdc17' | 'wwdc18'`","depth":3,"charIndex":974},{"id":"usedefaulthighlightertheme-boolean","text":"`useDefaultHighlighterTheme?: boolean`","depth":3,"charIndex":1441},{"id":"scrollable-boolean","text":"`scrollable?: boolean`","depth":3,"charIndex":1805},{"id":"example","text":"Example","depth":2,"charIndex":2077}],"frontmatter":{},"version":"","description":"The Markdown component renders styled Markdown content within your script’s user interface. It supports different visual themes and syntax highlighter styles for displaying code blocks, making it ideal for rendering documentation, previews, or custom rich-text content."},{"title":"Menu","content":"The `Menu` component in Scripting is a user interface control that presents a list of actions or nested submenus. It functions as a container for contextual actions and supports both text-based and custom visual labels. Inspired by SwiftUI’s `Menu`, this component is especially useful in toolbars, context menus, and compact UI layouts.\n\n***\n\n## Purpose\n\nUse `Menu` to group multiple related actions under a single interaction point. A menu can include `Button` components and even other nested `Menu` components for hierarchical command structures.\n\n***\n\n## Props\n\n```ts\ntype MenuProps = {\n  primaryAction?: () => void\n  children?: VirtualNode | (VirtualNode | undefined | null)[] \n} & (\n  | {\n      title: string\n      systemImage?: string\n    }\n  | {\n      label: VirtualNode\n    }\n)\n```\n\n### Base Properties\n\n| Property        | Type                             | Description                                                                                                    |\n| --------------- | -------------------------------- | -------------------------------------------------------------------------------------------------------------- |\n| `primaryAction` | `() => void` (optional)          | An action that executes when the menu is tapped directly, without expanding it. Useful for a default behavior. |\n| `children`      | `VirtualNode` \\| `VirtualNode[]` | The menu’s content—usually a list of `Button` components or nested `Menu` components.                          |\n\n### Label Configuration (choose one of the following)\n\nYou must specify **either** a text-based `title` or a custom `label`.\n\n#### Option 1: `title` with optional system image\n\n| Property      | Type                | Description                                                     |\n| ------------- | ------------------- | --------------------------------------------------------------- |\n| `title`       | `string`            | A text string describing the menu’s purpose.                    |\n| `systemImage` | `string` (optional) | The name of a system SF Symbol image to display with the title. |\n\n#### Option 2: `label` (custom view)\n\n| Property | Type          | Description                                                                      |\n| -------- | ------------- | -------------------------------------------------------------------------------- |\n| `label`  | `VirtualNode` | A custom view node (e.g., `Text`, `Image`, `HStack`) to use as the menu’s label. |\n\n***\n\n## Example\n\n```tsx\n<Menu title=\"Actions\">\n  <Button title=\"Rename\" action={rename} />\n  <Button title=\"Delete\" action={delete} />\n  <Menu title=\"Copy\">\n    <Button title=\"Copy\" action={copy} />\n    <Button title=\"Copy Formatted\" action={copyFormatted} />\n  </Menu>\n</Menu>\n```\n\nIn this example:\n\n- A top-level menu labeled **\"Actions\"** contains:\n\n  - A \"Rename\" button\n  - A \"Delete\" button\n  - A nested **\"Copy\"** submenu with two more buttons\n\n***\n\n## Example with `primaryAction` and `systemImage`\n\n```tsx\n<Menu\n  title=\"More\"\n  systemImage=\"ellipsis\"\n  primaryAction={() => console.log(\"Menu tapped\")}\n>\n  <Button title=\"Settings\" action={openSettings} />\n  <Button title=\"Help\" action={openHelp} />\n</Menu>\n```\n\n- If the user taps the menu directly, `primaryAction` is executed.\n- If the user long-presses or clicks to expand, the menu shows its child items.\n\n***\n\n## Example with Custom Label\n\n```tsx\n<Menu\n  label={\n    <HStack>\n      <Image systemName=\"gear\" />\n      <Text>Options</Text>\n    </HStack>\n  }\n>\n  <Button title=\"Configure\" action={configure} />\n</Menu>\n```\n\nThis example uses a custom label combining an icon and text.\n\n***\n\n## Notes\n\n- Menus are often used inside `toolbar`, `contextMenu`, or as part of compact user interfaces.\n- Menus can be nested without restriction to create multi-level action hierarchies.\n- Use `primaryAction` for lightweight actions that don't require expansion.\n","routePath":"/doc/Views/Menu/","lang":"en","toc":[{"id":"purpose","text":"Purpose","depth":2,"charIndex":344},{"id":"props","text":"Props","depth":2,"charIndex":557},{"id":"base-properties","text":"Base Properties","depth":3,"charIndex":793},{"id":"label-configuration-choose-one-of-the-following","text":"Label Configuration (choose one of the following)","depth":3,"charIndex":1487},{"id":"option-1-title-with-optional-system-image","text":"Option 1: `title` with optional system image","depth":4,"charIndex":1613},{"id":"option-2-label-custom-view","text":"Option 2: `label` (custom view)","depth":4,"charIndex":2089},{"id":"example","text":"Example","depth":2,"charIndex":2469},{"id":"example-with-primaryaction-and-systemimage","text":"Example with `primaryAction` and `systemImage`","depth":2,"charIndex":2921},{"id":"example-with-custom-label","text":"Example with Custom Label","depth":2,"charIndex":3340},{"id":"notes","text":"Notes","depth":2,"charIndex":3617}],"frontmatter":{},"version":"","description":"The Menu component in Scripting is a user interface control that presents a list of actions or nested submenus. It functions as a container for contextual actions and supports both text-based and custom visual labels. Inspired by SwiftUI’s Menu, this component is especially useful in toolbars, context menus, and compact UI layouts."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Menu\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n\n      <Section\n        header={\n          <Text>Menu</Text>\n        }\n      >\n        <Menu\n          title={\"Open Menu\"}\n        >\n          <Button\n            title=\"Rename\"\n            action={() => console.log(\"Rename\")}\n          />\n          <Button\n            title=\"Delete\"\n            role={\"destructive\"}\n            action={() => console.log(\"Delete\")}\n          />\n          <Menu title=\"Copy\">\n            <Button\n              title=\"Copy\"\n              action={() => console.log(\"Copy\")}\n            />\n            <Button\n              title=\"Copy Formated\"\n              action={() => console.log(\"Copy fomatted\")}\n            />\n          </Menu>\n        </Menu>\n      </Section>\n\n      <Section\n        header={\n          <Text>ContextMenu</Text>\n        }\n      >\n        <Text\n          foregroundStyle={\"link\"}\n          contextMenu={{\n            menuItems: <Group>\n              <Button\n                title=\"Add\"\n                action={() => {\n                  // Add\n                }}\n              />\n              <Button\n                title=\"Delete\"\n                role=\"destructive\"\n                action={() => {\n                  // Delete\n                }}\n              />\n            </Group>\n          }}\n        >Long Press to open context menu</Text>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Menu/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Modal presentaions","content":"The Scripting app supports SwiftUI-style modal view presentations through declarative properties applied to UI components. These include support for `sheet`, `popover`, `fullScreenCover`, `alert`, and `confirmationDialog`. Each of these is defined using structured configuration objects that allow you to present views based on application state.\n\n***\n\n## Alert\n\nDisplays an alert with a title, optional message, and one or more actions when the specified condition is true.\n\n```ts\nalert?: {\n  title: string\n  isPresented: boolean\n  onChanged: (isPresented: boolean) => void\n  actions: VirtualNode\n  message?: VirtualNode\n}\n```\n\n### Properties\n\n- **`title`**: A string used as the title of the alert.\n- **`isPresented`**: A boolean value that controls the visibility of the alert.\n- **`onChanged`**: A callback function invoked when the `isPresented` value changes. You must update this value to `false` when dismissing the alert.\n- **`actions`**: A `VirtualNode` representing the alert’s actions.\n- **`message`** (optional): A `VirtualNode` that describes the alert’s message content.\n\n***\n\n## Confirmation Dialog\n\nDisplays a confirmation dialog with a title, optional message, and a set of actions. The dialog is shown when the `isPresented` condition is true.\n\n```ts\nconfirmationDialog?: {\n  title: string\n  titleVisibility?: Visibility\n  isPresented: boolean\n  onChanged: (isPresented: boolean) => void\n  actions: VirtualNode\n  message?: VirtualNode\n}\n```\n\n### Properties\n\n- **`title`**: The title text for the dialog.\n- **`titleVisibility`** (optional): Determines the visibility of the title. Defaults to `\"automatic\"`.\n- **`isPresented`**: Controls whether the dialog is currently visible.\n- **`onChanged`**: A callback that updates the `isPresented` state when the dialog is dismissed.\n- **`actions`**: A `VirtualNode` representing the dialog’s action buttons.\n- **`message`** (optional): A `VirtualNode` providing a descriptive message.\n\n```ts\ntype Visibility = \"automatic\" | \"hidden\" | \"visible\"\n```\n\n***\n\n## Sheet\n\nPresents a modal sheet from the bottom of the screen when the `isPresented` condition is true. Multiple sheets can be registered using an array of presentation objects.\n\n```ts\nsheet?: ModalPresentation | ModalPresentation[]\n```\n\n***\n\n## Full Screen Cover\n\nPresents a modal view that covers the entire screen. Multiple views can be registered using an array of presentation objects.\n\n```ts\nfullScreenCover?: ModalPresentation | ModalPresentation[]\n```\n\n***\n\n## Popover\n\nPresents a popover when the `isPresented` condition is true. Popovers can be configured with arrow direction and adaptation strategies.\n\n```ts\npopover?: PopoverPresentation | PopoverPresentation[]\n```\n\n### PopoverPresentation\n\n```ts\ntype PopoverPresentation = ModalPresentation & {\n  arrowEdge?: Edge\n  presentationCompactAdaptation?: PresentationAdaptation | {\n    horizontal: PresentationAdaptation\n    vertical: PresentationAdaptation\n  }\n}\n```\n\n#### Properties\n\n- **`arrowEdge`** (optional): Defines the edge of the anchor that the popover arrow points to. Defaults to `\"top\"`.\n- **`presentationCompactAdaptation`** (optional): Specifies how the presentation adapts in compact size classes.\n\n```ts\ntype Edge = \"top\" | \"bottom\" | \"leading\" | \"trailing\"\n```\n\n***\n\n## ModalPresentation\n\nDefines a common interface used by `sheet`, `popover`, and `fullScreenCover`.\n\n```ts\ntype ModalPresentation = {\n  isPresented: boolean\n  onChanged: (isPresented: boolean) => void\n  content: VirtualNode\n}\n```\n\n### Properties\n\n- **`isPresented`**: A boolean value indicating whether the modal is shown.\n- **`onChanged`**: A callback that updates the `isPresented` state when the modal is dismissed.\n- **`content`**: A `VirtualNode` representing the modal view content.\n\n***\n\n## PresentationAdaptation\n\nSpecifies the strategy used when adapting modal presentations to different size classes.\n\n```ts\ntype PresentationAdaptation =\n  | \"automatic\"\n  | \"fullScreenCover\"\n  | \"none\"\n  | \"popover\"\n  | \"sheet\"\n```\n\n- **`automatic`**: Uses the system default adaptation.\n- **`fullScreenCover`**: Prefers a full-screen cover style.\n- **`popover`**: Prefers a popover style.\n- **`sheet`**: Prefers a sheet style.\n- **`none`**: Disables adaptation if possible.\n\n***\n\n## Example Usage\n\n### Presenting a Sheet\n\n```tsx\n<Button\n  title={\"Present\"}\n  action={() => setIsPresented(true)}\n  sheet={{\n    isPresented: isPresented,\n    onChanged: setIsPresented,\n    content: <VStack>\n      <Text>Sheet content</Text>\n      <Button title={\"Dismiss\"} action={() => setIsPresented(false)} />\n    </VStack>\n  }}\n/>\n```\n\n### Presenting a Popover\n\n```tsx\n<Button\n  title={\"Show Popover\"}\n  action={() => setIsPresented(true)}\n  popover={{\n    isPresented: isPresented,\n    onChanged: setIsPresented,\n    presentationCompactAdaptation: \"popover\",\n    content: <Text>Popover content</Text>,\n    arrowEdge: \"top\",\n  }}\n/>\n```\n\n### Presenting a Full Screen Cover\n\n```tsx\n<Button\n  title={\"Present\"}\n  action={() => setIsPresented(true)}\n  fullScreenCover={{\n    isPresented: isPresented,\n    onChanged: setIsPresented,\n    content: <VStack>\n      <Text>A full-screen modal view.</Text>\n    </VStack>\n  }}\n/>\n```\n\n### Configuring Sheet Height\n\n```tsx\nsheet={{\n  isPresented: isPresented,\n  onChanged: setIsPresented,\n  content: <VStack\n    presentationDetents={[200, \"medium\", \"large\"]}\n    presentationDragIndicator={\"visible\"}\n  >\n    <Text>Resizable sheet</Text>\n  </VStack>\n}}\n```\n\n### Presenting an Alert\n\n```tsx\n<Button\n  title={\"Present\"}\n  action={() => setIsPresented(true)}\n  alert={{\n    isPresented: isPresented,\n    onChanged: setIsPresented,\n    title: \"Alert\",\n    message: <Text>Everything is OK</Text>,\n    actions: <Button title={\"OK\"} action={() => {}} />\n  }}\n/>\n```\n\n### Presenting a Confirmation Dialog\n\n```tsx\n<Button\n  title={\"Present\"}\n  action={() => setIsPresented(true)}\n  confirmationDialog={{\n    isPresented,\n    onChanged: setIsPresented,\n    title: \"Do you want to delete this image?\",\n    actions: <Button title={\"Delete\"} role={\"destructive\"} action={() => {}} />\n  }}\n/>\n```\n","routePath":"/doc/Views/Modal presentaions/","lang":"en","toc":[{"id":"alert","text":"Alert","depth":2,"charIndex":353},{"id":"properties","text":"Properties","depth":3,"charIndex":629},{"id":"confirmation-dialog","text":"Confirmation Dialog","depth":2,"charIndex":1092},{"id":"properties-1","text":"Properties","depth":3,"charIndex":1461},{"id":"sheet","text":"Sheet","depth":2,"charIndex":2016},{"id":"full-screen-cover","text":"Full Screen Cover","depth":2,"charIndex":2260},{"id":"popover","text":"Popover","depth":2,"charIndex":2483},{"id":"popoverpresentation","text":"PopoverPresentation","depth":3,"charIndex":2697},{"id":"properties-2","text":"Properties","depth":4,"charIndex":2944},{"id":"modalpresentation","text":"ModalPresentation","depth":2,"charIndex":3261},{"id":"properties-3","text":"Properties","depth":3,"charIndex":3492},{"id":"presentationadaptation","text":"PresentationAdaptation","depth":2,"charIndex":3756},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":4237},{"id":"presenting-a-sheet","text":"Presenting a Sheet","depth":3,"charIndex":4255},{"id":"presenting-a-popover","text":"Presenting a Popover","depth":3,"charIndex":4578},{"id":"presenting-a-full-screen-cover","text":"Presenting a Full Screen Cover","depth":3,"charIndex":4880},{"id":"configuring-sheet-height","text":"Configuring Sheet Height","depth":3,"charIndex":5165},{"id":"presenting-an-alert","text":"Presenting an Alert","depth":3,"charIndex":5437},{"id":"presenting-a-confirmation-dialog","text":"Presenting a Confirmation Dialog","depth":3,"charIndex":5739}],"frontmatter":{},"version":"","description":"The Scripting app supports SwiftUI-style modal view presentations through declarative properties applied to UI components. These include support for sheet, popover, fullScreenCover, alert, and confirmationDialog. Each of these is defined using structured configuration objects that allow you to present views based on application state."},{"title":"Example","content":"```tsx\n\n\nfunction SheetExample() {\n  const [\n    isPresented,\n    setIsPresented\n  ] = useState(false)\n\n  return <Section\n    header={\n      <Text>Showing a sheet</Text>\n    }\n  >\n    <Button\n      title={\"Present\"}\n      action={() => setIsPresented(true)}\n      sheet={{\n        isPresented: isPresented,\n        onChanged: setIsPresented,\n        content: <VStack\n          presentationDragIndicator={\"visible\"}\n        >\n          <Text\n            font={\"title\"}\n            padding={50}\n          >\n            Sheet content\n          </Text>\n          <Button\n            title={\"Dismiss\"}\n            action={() => setIsPresented(false)}\n          />\n        </VStack>\n      }}\n    />\n  </Section>\n}\n\nfunction PopoverExample() {\n  const [isPresented, setIsPresented] = useState(false)\n\n  return <Section\n    header={\n      <Text>Showing a popover</Text>\n    }\n  >\n    <Button\n      title={\"Show Popover\"}\n      action={() => {\n        setIsPresented(true)\n      }}\n      popover={{\n        isPresented: isPresented,\n        onChanged: setIsPresented,\n        presentationCompactAdaptation: \"popover\",\n        content: <Text padding>Popover content</Text>,\n        arrowEdge: \"top\",\n      }}\n    />\n  </Section>\n}\n\nfunction FullScreenCoverExample() {\n  const [isPresented, setIsPresented] = useState(false)\n\n  return <Section\n    header={\n      <Text>Showing a full screen cover</Text>\n    }\n  >\n    <Button\n      title={\"Present\"}\n      action={() => setIsPresented(true)}\n      fullScreenCover={{\n        isPresented: isPresented,\n        onChanged: setIsPresented,\n        content: <VStack\n          onTapGesture={() => setIsPresented(false)}\n          foregroundStyle={\"white\"}\n          frame={{\n            maxHeight: \"infinity\",\n            maxWidth: \"infinity\",\n          }}\n          background={\"blue\"}\n          ignoresSafeArea\n        >\n          <Text>A full-screen modal view.</Text>\n          <Text>Tap to dismiss</Text>\n        </VStack>\n      }}\n    />\n  </Section>\n}\n\nfunction ConfiguringSheetHeightExample() {\n  const [isPresented, setIsPresented] = useState(false)\n\n  return <Section\n    header={\n      <Text>Configuring sheet height</Text>\n    }\n  >\n    <Button\n      title={\"Present\"}\n      action={() => setIsPresented(true)}\n      sheet={{\n        isPresented: isPresented,\n        onChanged: setIsPresented,\n        content: <VStack\n          presentationDragIndicator={\"visible\"}\n          presentationDetents={[\n            200, // fixed height\n            \"medium\",\n            \"large\"\n          ]}\n        >\n          <Text\n            font={\"title\"}\n            padding={50}\n          >\n            Drag the indicator to resize the sheet height.\n          </Text>\n          <Button\n            title={\"Dismiss\"}\n            action={() => setIsPresented(false)}\n          />\n        </VStack>\n      }}\n    />\n  </Section>\n}\n\nfunction PresentAlertExample() {\n  const [isPresented, setIsPresented] = useState(false)\n\n  return <Section\n    header={\n      <Text>Present a alert view</Text>\n    }\n  >\n    <Button\n      title={\"Present\"}\n      action={() => setIsPresented(true)}\n      alert={{\n        isPresented: isPresented,\n        onChanged: setIsPresented,\n        actions: <Button\n          title={\"OK\"}\n          action={() => { }}\n        />,\n        title: \"Alert\",\n        message: <Text>Everything is OK</Text>\n      }}\n    />\n  </Section>\n}\n\nfunction PresentConfirmationDialogExample() {\n  const [isPresented, setIsPresented] = useState(false)\n\n  return <Section\n    header={\n      <Text>Present a confirmation dialog</Text>\n    }\n  >\n    <Button\n      title={\"Present\"}\n      action={() => {\n        setIsPresented(true)\n      }}\n      confirmationDialog={{\n        isPresented,\n        onChanged: setIsPresented,\n        title: \"Do you want to delete this image?\",\n        actions: <Button\n          title={\"Delete\"}\n          role={\"destructive\"}\n          action={() => {\n            Dialog.alert({\n              message: \"The image has been deleted.\"\n            })\n          }}\n        />\n      }}\n    />\n  </Section>\n}\n\nfunction Example() {\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Modal presentations\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <SheetExample />\n      <ConfiguringSheetHeightExample />\n      <FullScreenCoverExample />\n      <PopoverExample />\n      <PresentAlertExample />\n      <PresentConfirmationDialogExample />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Modal presentaions/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"NamespaceReader","content":"`NamespaceReader` is used to **create and manage a geometry animation namespace (Namespace)**.\nThis namespace is the **foundational requirement** for enabling:\n\n- `matchedGeometryEffect` (component-level geometry animation)\n- `matchedTransitionSource` (page-level navigation transition)\n- `navigationTransition` (such as zoom transitions)\n\nYou can think of `NamespaceReader` as:\n\n> A “geometry animation coordinate provider” that defines which views belong to the **same animation scope**.\n\n***\n\n## 1. Role of NamespaceReader\n\n`NamespaceReader` is **not a visual UI component**. It is a **namespace generator** whose responsibilities are:\n\n- Creating a brand-new `NamespaceID`\n- Exposing that namespace via a render function\n- Defining the **boundary of a geometry animation group**\n\nIn Scripting, this corresponds conceptually to SwiftUI’s:\n\n- `@Namespace`\n- `Namespace.ID`\n\n***\n\n## 2. Basic Usage Pattern\n\n### 2.1 Minimal Structure\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    // All views inside this scope\n    // can use this namespace for matched geometry animations\n  )}\n</NamespaceReader>\n```\n\nExplanation:\n\n- `NamespaceReader` accepts a **function as its child**\n- This function receives a single argument: `namespace`\n- The returned `namespace` is the unique animation scope for all child views\n\n***\n\n## 3. The True Purpose of a Namespace\n\n### 3.1 What a Namespace Really Does\n\nThe real purpose of a `namespace` is to:\n\n- Declare a group of views as **eligible for shared geometry animation**\n- Explicitly define **which views are allowed to match each other**\n\nWithout using the same `namespace`:\n\n- Even if two views have the **same `id`**\n- **No geometry animation will ever happen**\n\n***\n\n### 3.2 Isolation Provided by Namespaces\n\n| Condition                              | Geometry Matching Occurs |\n| -------------------------------------- | ------------------------ |\n| Same `id` + Same `namespace`           | Yes                      |\n| Same `id` + Different `namespace`      | No                       |\n| Different `id` + Same `namespace`      | No                       |\n| Different `id` + Different `namespace` | No                       |\n\nConclusion:\n\n> **Both `id` and `namespace` must match exactly for geometry animation to be established.**\n\n***\n\n## 4. Relationship with the Geometry Animation System\n\n### 4.1 Relationship with matchedGeometryEffect\n\n- `matchedGeometryEffect` relies on `namespace` to establish cross-view geometry mapping\n- `NamespaceReader` is a **mandatory prerequisite** for `matchedGeometryEffect`\n- Without `NamespaceReader`:\n\n  - `matchedGeometryEffect` cannot function\n\n***\n\n### 4.2 Relationship with matchedTransitionSource\n\n- Page-level navigation transitions also depend on `namespace` to pair:\n\n  - The source view\n  - The destination page\n- `NamespaceReader` is used to:\n\n  - Create the namespace on the source page\n  - Pass the same namespace into the destination page\n\n***\n\n## 5. Basic NamespaceReader Example (Component-Level)\n\n```tsx\nconst expanded = useObservable(false)\n\n<NamespaceReader>\n  {namespace => (\n    <VStack>\n      {!expanded.value && (\n        <Circle\n          matchedGeometryEffect={{\n            id: \"shape\",\n            namespace\n          }}\n          onTapGesture={() => {\n            expanded.setValue(true)\n          }}\n        />\n      )}\n\n      {expanded.value && (\n        <Circle\n          frame={{ width: 200, height: 200 }}\n          matchedGeometryEffect={{\n            id: \"shape\",\n            namespace,\n            isSource: false\n          }}\n        />\n      )}\n    </VStack>\n  )}\n</NamespaceReader>\n```\n\nIn this example:\n\n- `NamespaceReader` provides the animation coordinate system\n- Both `Circle` views share:\n\n  - The same `id`\n  - The same `namespace`\n- Therefore, they are geometrically linked\n\n***\n\n## 6. Typical NamespaceReader Structure in Navigation Transitions\n\n```tsx\n<NamespaceReader>\n  {namespace => (\n    <NavigationLink\n      destination={\n        <DetailPage\n          navigationTransition={{\n            type: \"zoom\",\n            namespace,\n            sourceID: \"cover\"\n          }}\n        />\n      }\n    >\n      <Image\n        source=\"cover\"\n        matchedTransitionSource={{\n          id: \"cover\",\n          namespace\n        }}\n      />\n    </NavigationLink>\n  )}\n</NamespaceReader>\n```\n\nThis structure demonstrates:\n\n- `namespace` is created by `NamespaceReader`\n- The same `namespace` is used by:\n\n  - The source view\n  - The destination page\n- This enables full page-level shared-geometry transitions\n\n***\n\n## 7. Namespace Lifecycle and Scope\n\n### 7.1 Lifecycle\n\n- Every time `NamespaceReader` is created:\n\n  - A **new namespace instance** is generated\n- The namespace:\n\n  - Exists only within the current component tree\n  - Is destroyed automatically when the component is unmounted\n\n***\n\n### 7.2 Scope\n\n- A namespace is valid **only inside the render function of its `NamespaceReader`**\n- It is **not shared automatically across component hierarchies**\n- If cross-component sharing is required:\n\n  - The namespace must be passed explicitly via props\n\n***\n\n## 8. Common Errors and Debugging Tips\n\n### 8.1 Geometry Animations Do Not Trigger\n\nCheck the following:\n\n- Is `NamespaceReader` actually present?\n- Is the `namespace` correctly received and passed?\n- Are both source and target using **the exact same namespace instance**?\n\n***\n\n### 8.2 Animations Are Unstable or Occasionally Fail\n\nCommon cause:\n\n- `NamespaceReader` is being conditionally rendered and destroyed repeatedly\n- Each destruction/recreation produces a **new namespace**\n- The old and new views are no longer in the same animation coordinate system\n\nRecommendation:\n\n- Place `NamespaceReader` in a **stable parent node**\n- Avoid wrapping it in `if` or ternary conditions\n\n***\n\n### 8.3 Nested NamespaceReader Causing Unexpected Behavior\n\nSymptoms:\n\n- `id` appears to be correct\n- But geometry matching still fails\n\nLikely cause:\n\n- Source and target views are actually using **different NamespaceReader instances**\n- Even though their `id` values are the same\n\n***\n\n## 9. Design Guidelines\n\n1. Use **one NamespaceReader per independent animation region**\n2. Do not create a separate NamespaceReader for every individual view\n3. For page-level transitions:\n\n   - Place `NamespaceReader` near the page root\n4. For component-level animations:\n\n   - Place `NamespaceReader` around the logical animation group\n5. Inside the same namespace:\n\n   - Do not reuse the same `id` for unrelated views\n\n***\n\n## 10. Recommended Use Cases\n\nAppropriate scenarios for using `NamespaceReader`:\n\n- Card → Detail shared-element transitions\n- Tab indicator geometry animation\n- Image zoom previews\n- List item → Detail content transitions\n- Spatially continuous multi-view animations\n\nScenarios where `NamespaceReader` is **not required**:\n\n- Simple opacity or scale animations\n- Single-view internal transitions\n- Animations that do not involve cross-view geometry matching\n","routePath":"/doc/Views/NamespaceReader","lang":"en","toc":[{"id":"1-role-of-namespacereader","text":"1. Role of NamespaceReader","depth":2,"charIndex":496},{"id":"2-basic-usage-pattern","text":"2. Basic Usage Pattern","depth":2,"charIndex":881},{"id":"21-minimal-structure","text":"2.1 Minimal Structure","depth":3,"charIndex":908},{"id":"3-the-true-purpose-of-a-namespace","text":"3. The True Purpose of a Namespace","depth":2,"charIndex":1313},{"id":"31-what-a-namespace-really-does","text":"3.1 What a Namespace Really Does","depth":3,"charIndex":1352},{"id":"32-isolation-provided-by-namespaces","text":"3.2 Isolation Provided by Namespaces","depth":3,"charIndex":1705},{"id":"4-relationship-with-the-geometry-animation-system","text":"4. Relationship with the Geometry Animation System","depth":2,"charIndex":2280},{"id":"41-relationship-with-matchedgeometryeffect","text":"4.1 Relationship with matchedGeometryEffect","depth":3,"charIndex":2335},{"id":"42-relationship-with-matchedtransitionsource","text":"4.2 Relationship with matchedTransitionSource","depth":3,"charIndex":2633},{"id":"5-basic-namespacereader-example-component-level","text":"5. Basic NamespaceReader Example (Component-Level)","depth":2,"charIndex":2939},{"id":"6-typical-namespacereader-structure-in-navigation-transitions","text":"6. Typical NamespaceReader Structure in Navigation Transitions","depth":2,"charIndex":3807},{"id":"7-namespace-lifecycle-and-scope","text":"7. Namespace Lifecycle and Scope","depth":2,"charIndex":4535},{"id":"71-lifecycle","text":"7.1 Lifecycle","depth":3,"charIndex":4572},{"id":"72-scope","text":"7.2 Scope","depth":3,"charIndex":4818},{"id":"8-common-errors-and-debugging-tips","text":"8. Common Errors and Debugging Tips","depth":2,"charIndex":5086},{"id":"81-geometry-animations-do-not-trigger","text":"8.1 Geometry Animations Do Not Trigger","depth":3,"charIndex":5126},{"id":"82-animations-are-unstable-or-occasionally-fail","text":"8.2 Animations Are Unstable or Occasionally Fail","depth":3,"charIndex":5365},{"id":"83-nested-namespacereader-causing-unexpected-behavior","text":"8.3 Nested NamespaceReader Causing Unexpected Behavior","depth":3,"charIndex":5776},{"id":"9-design-guidelines","text":"9. Design Guidelines","depth":2,"charIndex":6064},{"id":"10-recommended-use-cases","text":"10. Recommended Use Cases","depth":2,"charIndex":6492}],"frontmatter":{},"version":"","description":"NamespaceReader is used to create and manage a geometry animation namespace (Namespace).\nThis namespace is the foundational requirement for enabling: matchedGeometryEffect (component-level geometry animation)matchedTransitionSource (page-level navigation transition)navigationTransition (such as zoom transitions) You can think of NamespaceReader as: A “geometry animation coordinate provider” that defines which views belong to the same animation scope."},{"title":"Collapsed split views","content":"```tsx\n\n\nfunction Example() {\n  const [preferredColumn, setPreferredColumn] = useState<NavigationSplitViewColumn>(\"detail\")\n\n  return <NavigationSplitView\n    preferredCompactColumn={{\n      value: preferredColumn,\n      onChanged: (value) => {\n        console.log(\"preferredCompactColumn changed to\", value)\n        setPreferredColumn(value)\n      }\n    }}\n    sidebar={\n      <VStack\n        navigationContainerBackground={\"yellow\"}\n        frame={{\n          maxWidth: \"infinity\",\n          maxHeight: \"infinity\",\n        }}\n      >\n        <Text>Yellow</Text>\n      </VStack>\n    }\n  >\n    <VStack\n      navigationContainerBackground={\"blue\"}\n      frame={{\n        maxWidth: \"infinity\",\n        maxHeight: \"infinity\",\n      }}\n    >\n      <Text>Blue</Text>\n    </VStack>\n  </NavigationSplitView>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Navigation/NavigationSplitView (for iPad)/Collapsed split views","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Control column visibility","content":"```tsx\n\n\ntype Department = {\n  name: string\n  staff: Person[]\n}\n\ntype Company = {\n  name: string\n  departments: Department[]\n}\n\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\nconst companyA: Company = {\n  name: \"Company A\",\n  departments: [\n    {\n      name: \"Sales\",\n      staff: [\n        {\n          name: \"Juan Chavez\",\n          phoneNumber: \"(408) 555-4301\",\n        },\n        {\n          name: \"Mei Chen\",\n          phoneNumber: \"(919) 555-2481\",\n        }\n      ]\n    },\n    {\n      name: \"Engineering\",\n      staff: [\n        {\n          name: \"Bill James\",\n          phoneNumber: \"(408) 555-4450\"\n        },\n        {\n          name: \"Anne Johnson\",\n          phoneNumber: \"(417) 555-9311\"\n        }\n      ]\n    }\n  ]\n}\n\nconst companies: Company[] = [\n  {\n    name: \"Company A\",\n    departments: [\n      {\n        name: \"Sales\",\n        staff: [\n          {\n            name: \"Juan Chavez\",\n            phoneNumber: \"(408) 555-4301\",\n          },\n          {\n            name: \"Mei Chen\",\n            phoneNumber: \"(919) 555-2481\",\n          }\n        ]\n      },\n      {\n        name: \"Engineering\",\n        staff: [\n          {\n            name: \"Bill James\",\n            phoneNumber: \"(408) 555-4450\"\n          },\n          {\n            name: \"Anne Johnson\",\n            phoneNumber: \"(417) 555-9311\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    name: \"Company B\",\n    departments: [\n      {\n        name: \"Human resources\",\n        staff: [\n          {\n            name: \"Lily\",\n            phoneNumber: \"(111) 555-5552\"\n          },\n          {\n            name: \"Ross\",\n            phoneNumber: \"(222) 666-8888\"\n          }\n        ]\n      },\n      {\n        name: \"Sales\",\n        staff: [\n          {\n            name: \"John\",\n            phoneNumber: \"(1) 888-4444\"\n          }\n        ]\n      }\n    ]\n  }\n]\n\nfunction PersonRowView({\n  person\n}: {\n  person: Person\n}) {\n  return <VStack\n    alignment={\"leading\"}\n    spacing={3}\n  >\n    <Text\n      foregroundStyle={\"label\"}\n      font={\"headline\"}\n    >{person.name}</Text>\n    <HStack\n      spacing={3}\n      foregroundStyle={\"secondaryLabel\"}\n      font={\"subheadline\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction PersonDetailView({\n  person\n}: {\n  person: Person\n}) {\n\n  return <VStack>\n    <Text\n      font={\"title\"}\n      foregroundStyle={\"label\"}\n    >{person.name}</Text>\n    <HStack\n      foregroundStyle={\"secondaryLabel\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\n function Example() {\n  const [columnVisibility, setColumnVisibility] = useState<NavigationSplitViewVisibility>(\"detailOnly\")\n  const [selectedPerson, setSelectedPerson] = useState<Person>()\n\n  return <NavigationSplitView\n    columnVisibility={{\n      value: columnVisibility,\n      onChanged: (value) => {\n        console.log(\"columnVisibility changed to\", value)\n        setColumnVisibility(value)\n      },\n    }}\n    sidebar={\n      <List>\n        {companyA.departments[0].staff.map(person =>\n          <PersonRowView\n            person={person}\n            contentShape={\"rect\"}\n            onTapGesture={() => {\n              setSelectedPerson(person)\n            }}\n          />\n        )}\n      </List>\n    }\n  >\n    {selectedPerson != null\n      ? <PersonDetailView\n        person={selectedPerson}\n      />\n      : <Text>Please select a person.</Text>\n    }\n  </NavigationSplitView>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Navigation/NavigationSplitView (for iPad)/Control column visibility","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Three-column","content":"```tsx\n\n\ntype Department = {\n  name: string\n  staff: Person[]\n}\n\ntype Company = {\n  name: string\n  departments: Department[]\n}\n\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\nconst companyA: Company = {\n  name: \"Company A\",\n  departments: [\n    {\n      name: \"Sales\",\n      staff: [\n        {\n          name: \"Juan Chavez\",\n          phoneNumber: \"(408) 555-4301\",\n        },\n        {\n          name: \"Mei Chen\",\n          phoneNumber: \"(919) 555-2481\",\n        }\n      ]\n    },\n    {\n      name: \"Engineering\",\n      staff: [\n        {\n          name: \"Bill James\",\n          phoneNumber: \"(408) 555-4450\"\n        },\n        {\n          name: \"Anne Johnson\",\n          phoneNumber: \"(417) 555-9311\"\n        }\n      ]\n    }\n  ]\n}\n\nconst companies: Company[] = [\n  {\n    name: \"Company A\",\n    departments: [\n      {\n        name: \"Sales\",\n        staff: [\n          {\n            name: \"Juan Chavez\",\n            phoneNumber: \"(408) 555-4301\",\n          },\n          {\n            name: \"Mei Chen\",\n            phoneNumber: \"(919) 555-2481\",\n          }\n        ]\n      },\n      {\n        name: \"Engineering\",\n        staff: [\n          {\n            name: \"Bill James\",\n            phoneNumber: \"(408) 555-4450\"\n          },\n          {\n            name: \"Anne Johnson\",\n            phoneNumber: \"(417) 555-9311\"\n          }\n        ]\n      }\n    ]\n  },\n  {\n    name: \"Company B\",\n    departments: [\n      {\n        name: \"Human resources\",\n        staff: [\n          {\n            name: \"Lily\",\n            phoneNumber: \"(111) 555-5552\"\n          },\n          {\n            name: \"Ross\",\n            phoneNumber: \"(222) 666-8888\"\n          }\n        ]\n      },\n      {\n        name: \"Sales\",\n        staff: [\n          {\n            name: \"John\",\n            phoneNumber: \"(1) 888-4444\"\n          }\n        ]\n      }\n    ]\n  }\n]\n\nfunction PersonRowView({\n  person\n}: {\n  person: Person\n}) {\n  return <VStack\n    alignment={\"leading\"}\n    spacing={3}\n  >\n    <Text\n      foregroundStyle={\"label\"}\n      font={\"headline\"}\n    >{person.name}</Text>\n    <HStack\n      spacing={3}\n      foregroundStyle={\"secondaryLabel\"}\n      font={\"subheadline\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction PersonDetailView({\n  person\n}: {\n  person: Person\n}) {\n\n  return <VStack>\n    <Text\n      font={\"title\"}\n      foregroundStyle={\"label\"}\n    >{person.name}</Text>\n    <HStack\n      foregroundStyle={\"secondaryLabel\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction Example() {\n  const [selectedCompany, setSelectedCompany] = useState<Company>()\n  const [selectedPerson, setSelectedPerson] = useState<Person>()\n\n  return <NavigationSplitView\n    sidebar={\n      <List>\n        {companies.map(company =>\n          <Text\n            onTapGesture={() => {\n              setSelectedCompany(company)\n            }}\n          >{company.name}</Text>\n        )}\n      </List>\n    }\n    content={\n      selectedCompany != null\n        ? <List>\n          {selectedCompany.departments.map(department =>\n            <Section\n              header={<Text>{department.name}</Text>}\n            >\n              {department.staff.map(person =>\n                <PersonRowView\n                  person={person}\n                  contentShape={\"rect\"}\n                  onTapGesture={() => {\n                    setSelectedPerson(person)\n                  }}\n                />\n              )}\n            </Section>\n          )}\n        </List>\n        : <Text>Select a company</Text>\n    }\n  >\n    {selectedPerson != null\n      ? <PersonDetailView\n        person={selectedPerson}\n      /> :\n      <Text>Select a person</Text>}\n  </NavigationSplitView>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Navigation/NavigationSplitView (for iPad)/Three-column","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Two-column","content":"```tsx\n\n\ntype Department = {\n  name: string\n  staff: Person[]\n}\n\ntype Company = {\n  name: string\n  departments: Department[]\n}\n\ntype Person = {\n  name: string\n  phoneNumber: string\n}\n\nconst companyA: Company = {\n  name: \"Company A\",\n  departments: [\n    {\n      name: \"Sales\",\n      staff: [\n        {\n          name: \"Juan Chavez\",\n          phoneNumber: \"(408) 555-4301\",\n        },\n        {\n          name: \"Mei Chen\",\n          phoneNumber: \"(919) 555-2481\",\n        }\n      ]\n    },\n    {\n      name: \"Engineering\",\n      staff: [\n        {\n          name: \"Bill James\",\n          phoneNumber: \"(408) 555-4450\"\n        },\n        {\n          name: \"Anne Johnson\",\n          phoneNumber: \"(417) 555-9311\"\n        }\n      ]\n    }\n  ]\n}\n\nfunction PersonRowView({\n  person\n}: {\n  person: Person\n}) {\n  return <VStack\n    alignment={\"leading\"}\n    spacing={3}\n  >\n    <Text\n      foregroundStyle={\"label\"}\n      font={\"headline\"}\n    >{person.name}</Text>\n    <HStack\n      spacing={3}\n      foregroundStyle={\"secondaryLabel\"}\n      font={\"subheadline\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction PersonDetailView({\n  person\n}: {\n  person: Person\n}) {\n\n  return <VStack>\n    <Text\n      font={\"title\"}\n      foregroundStyle={\"label\"}\n    >{person.name}</Text>\n    <HStack\n      foregroundStyle={\"secondaryLabel\"}\n    >\n      <Label\n        title={person.phoneNumber}\n        systemImage={\"phone\"}\n      />\n    </HStack>\n  </VStack>\n}\n\nfunction Example() {\n  const [selectedPerson, setSelectedPerson] = useState<Person>()\n\n  return <NavigationSplitView\n    sidebar={\n      <List>\n        {companyA.departments[0].staff.map(person =>\n          <PersonRowView\n            person={person}\n            contentShape={\"rect\"}\n            onTapGesture={() => {\n              setSelectedPerson(person)\n            }}\n          />\n        )}\n      </List>\n    }\n  >\n    {selectedPerson != null\n      ? <PersonDetailView\n        person={selectedPerson}\n      />\n      : <Text>Please select a person.</Text>\n    }\n  </NavigationSplitView>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Navigation/NavigationSplitView (for iPad)/Two-column","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"NavigationStack with path","content":"`NavigationStack.path` provides **observable, programmatic control over the navigation stack**. It allows direct manipulation of the navigation history using a bound observable array.\n\nIt enables:\n\n- Programmatic navigation\n- Multi-level stack control\n- Returning to the root view\n- Dynamic page resolution via `NavigationDestination`\n\n***\n\n## 1. API Definition\n\n```ts\ntype NavigationStackProps = {\n  path?: Observable<string[]>\n  ...\n}\n\ndeclare const NavigationStack: FunctionComponent<NavigationStackProps>\n```\n\n***\n\n## 2. Type and Semantics of path\n\n```ts\npath?: Observable<string[]>\n```\n\n`path` is an observable string array representing the **current navigation stack**.\n\nRules:\n\n- Each `string` represents a unique page identifier\n- The array order defines the navigation order\n- The last element is the currently visible page\n- An empty array represents the root view\n\nExamples:\n\n```ts\n[]\n```\n\nRepresents the root view\n\n```ts\n[\"a\"]\n```\n\nRepresents navigation to page `a`\n\n```ts\n[\"a\", \"b\"]\n```\n\nRepresents navigation to page `a`, then to page `b`, with `b` as the active page\n\n***\n\n## 3. Basic Usage Example\n\n```tsx\nfunction Page() {\n  const path = useObservable<string[]>([\"a\"])\n\n  return <NavigationStack\n    path={path}\n  >\n    <VStack\n      navigationTitle=\"Navigation Demo\"\n      navigationDestination={\n        <NavigationDestination>\n          {(page) =>\n            <VStack>\n              <Text>\n                Current page:\n                {page}\n              </Text>\n              {path.value.length > 1\n                && <Button\n                  title=\"Go to Root\"\n                  action={() => {\n                    path.setValue([])\n                  }}\n                />}\n            </VStack>\n          }\n        </NavigationDestination>\n      }\n    >\n      <Button\n        title=\"Show page a\"\n        action={() => {\n          path.setValue([\"a\"])\n        }}\n      />\n      <Button\n        title=\"Show page b\"\n        action={() => {\n          path.setValue([\"b\"])\n        }}\n      />\n      <Button\n        title=\"Show page a then b\"\n        action={() => {\n          path.setValue([\"a\", \"b\"])\n        }}\n      />\n    </VStack>\n  </NavigationStack>\n}\n```\n\n***\n\n## 4. How path Controls Navigation\n\n### 4.1 path as the Single Source of Navigation State\n\nWhen `path` is bound:\n\n- The full navigation stack is determined exclusively by `path.value`\n- UI navigation state stays fully synchronized with `path`\n- Implicit push/pop navigation is replaced by explicit state control\n\n***\n\n### 4.2 Pushing Pages\n\n```ts\npath.setValue([\"a\"])\n```\n\nSystem behavior:\n\n- Pushes page `a` onto the stack\n- Displays page `a`\n\n```ts\npath.setValue([\"a\", \"b\"])\n```\n\nSystem behavior:\n\n- Pushes page `a`\n- Then pushes page `b`\n- Displays page `b`\n\n***\n\n### 4.3 Popping Pages and Returning to Root\n\n```ts\npath.setValue([])\n```\n\nSystem behavior:\n\n- Clears the entire navigation stack\n- Immediately returns to the root view\n\n***\n\n## 5. Relationship Between path and NavigationDestination\n\n`NavigationDestination` dynamically renders destination views based on the **current value of `path`**:\n\n```tsx\n<NavigationDestination>\n  {(page) => ...}\n</NavigationDestination>\n```\n\nRules:\n\n- `page` is always equal to the **last element of `path.value`**\n- When `path` changes:\n\n  - `page` updates automatically\n  - The destination view re-renders automatically\n\nMapping result examples:\n\n```ts\n[\"a\"]        -> page === \"a\"\n[\"a\", \"b\"]   -> page === \"b\"\n```\n\n***\n\n## 6. Controlling Navigation with Buttons\n\nNavigate to page `a`:\n\n```ts\npath.setValue([\"a\"])\n```\n\nNavigate to page `b`:\n\n```ts\npath.setValue([\"b\"])\n```\n\nNavigate through multiple pages:\n\n```ts\npath.setValue([\"a\", \"b\"])\n```\n\nReturn to the root view:\n\n```ts\npath.setValue([])\n```\n\n***\n\n## 7. Synchronization with System Back Gestures\n\nWhen the user navigates back using:\n\n- The system back gesture\n- The navigation bar back button\n\nThen:\n\n- `path.value` is automatically updated\n- The navigation stack and UI remain fully synchronized\n- No manual back handling is required\n\n***\n\n## 8. Typical Use Cases\n\n`NavigationStack.path` is suitable for:\n\n- Deep linking\n- Multi-step navigation flows\n- Programmatic routing\n- Script-driven navigation\n- Navigation state restoration\n- Wizard-style navigation\n- Cross-page navigation control\n\n***\n\n## 9. Common Errors\n\n### 9.1 Incorrect Initialization\n\nIncorrect:\n\n```ts\nconst path = useObservable<string[]>(null)\n```\n\nCorrect:\n\n```ts\nconst path = useObservable<string[]>([])\n```\n\n***\n\n### 9.2 Invalid Path Element Types\n\nIncorrect:\n\n```ts\npath.setValue([1, 2])\n```\n\nCorrect:\n\n```ts\npath.setValue([\"1\", \"2\"])\n```\n\nCurrently, only `string[]` is supported as the navigation path type.\n\n***\n\n## 10. Difference Between Using path and Default NavigationStack\n\n| Feature                   | Without path  | With path        |\n| ------------------------- | ------------- | ---------------- |\n| Manual push/pop           | Supported     | Not recommended  |\n| Programmatic navigation   | Not supported | Fully supported  |\n| Multi-level routing       | Limited       | Fully supported  |\n| State restoration         | Difficult     | Simple           |\n| Centralized routing state | Not available | Fully controlled |\n","routePath":"/doc/Views/Navigation/NavigationStack/NavigationStack with path","lang":"en","toc":[{"id":"1-api-definition","text":"1. API Definition","depth":2,"charIndex":341},{"id":"2-type-and-semantics-of-path","text":"2. Type and Semantics of path","depth":2,"charIndex":519},{"id":"3-basic-usage-example","text":"3. Basic Usage Example","depth":2,"charIndex":1088},{"id":"4-how-path-controls-navigation","text":"4. How path Controls Navigation","depth":2,"charIndex":2190},{"id":"41-path-as-the-single-source-of-navigation-state","text":"4.1 path as the Single Source of Navigation State","depth":3,"charIndex":2226},{"id":"42-pushing-pages","text":"4.2 Pushing Pages","depth":3,"charIndex":2508},{"id":"43-popping-pages-and-returning-to-root","text":"4.3 Popping Pages and Returning to Root","depth":3,"charIndex":2757},{"id":"5-relationship-between-path-and-navigationdestination","text":"5. Relationship Between path and NavigationDestination","depth":2,"charIndex":2931},{"id":"6-controlling-navigation-with-buttons","text":"6. Controlling Navigation with Buttons","depth":2,"charIndex":3455},{"id":"7-synchronization-with-system-back-gestures","text":"7. Synchronization with System Back Gestures","depth":2,"charIndex":3739},{"id":"8-typical-use-cases","text":"8. Typical Use Cases","depth":2,"charIndex":4032},{"id":"9-common-errors","text":"9. Common Errors","depth":2,"charIndex":4288},{"id":"91-incorrect-initialization","text":"9.1 Incorrect Initialization","depth":3,"charIndex":4309},{"id":"92-invalid-path-element-types","text":"9.2 Invalid Path Element Types","depth":3,"charIndex":4476},{"id":"10-difference-between-using-path-and-default-navigationstack","text":"10. Difference Between Using path and Default NavigationStack","depth":2,"charIndex":4679}],"frontmatter":{},"version":"","description":"NavigationStack.path provides observable, programmatic control over the navigation stack. It allows direct manipulation of the navigation history using a bound observable array. It enables: Programmatic navigationMulti-level stack controlReturning to the root viewDynamic page resolution via NavigationDestination"},{"title":"Use with NavigationLink","content":"```tsx\n\n\nfunction NavigationDetailView({\n  color\n}: {\n  color: Color\n}) {\n\n  return <VStack\n    navigationContainerBackground={color}\n    frame={{\n      maxWidth: \"infinity\",\n      maxHeight: \"infinity\"\n    }}\n  >\n    <Text>{color}</Text>\n  </VStack>\n}\n\n\nfunction Example() {\n  const colors: Color[] = [\n    \"red\", \"green\", \"blue\", \"orange\", \"purple\"\n  ]\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"NavigationStack with links\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      {colors.map(color =>\n        <NavigationLink\n          destination={\n            <NavigationDetailView\n              color={color}\n            />\n          }\n        >\n          <Text>Navigation to {color} view</Text>\n        </NavigationLink>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Navigation/NavigationStack/Use with NavigationLink","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Use with navigationDestination","content":"```tsx\n\n\nfunction NavigationDetailView({\n  color\n}: {\n  color: Color\n}) {\n\n  return <VStack\n    navigationContainerBackground={color}\n    frame={{\n      maxWidth: \"infinity\",\n      maxHeight: \"infinity\"\n    }}\n  >\n    <Text>{color}</Text>\n  </VStack>\n}\n\nfunction Example() {\n  const colors: Color[] = [\n    \"red\", \"green\", \"blue\", \"orange\", \"purple\"\n  ]\n  const [selectedColor, setSelectedColor] = useState<Color | null>()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"With Navigation Destination\"}\n      navigationDestination={{\n        isPresented: selectedColor != null,\n        onChanged: value => {\n          if (!value) {\n            setSelectedColor(null)\n          }\n        },\n        content: selectedColor != null\n          ? <NavigationDetailView\n            color={selectedColor}\n          />\n          : <Text>Select a color</Text>\n      }}\n    >\n      {colors.map(color =>\n        <HStack\n          contentShape={\"rect\"}\n          onTapGesture={() => {\n            setSelectedColor(color)\n          }}\n        >\n          <Text>Navigation to {color} view</Text>\n          <Spacer />\n          <Image\n            systemName={\"chevron.right\"}\n            foregroundStyle={\"secondaryLabel\"}\n          />\n        </HStack>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Navigation/NavigationStack/Use with navigationDestination","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"TabView with badge","content":"```tsx\n\n\nfunction Example() {\n  const [tabIndex, setTabIndex] = useState(0)\n\n  return <TabView\n    tabIndex={tabIndex}\n    onTabIndexChanged={setTabIndex}\n  >\n    <ReceivedView\n      tag={0}\n      tabItem={\n        <Label\n          title={\"Received\"}\n          systemImage={\"tray.and.arrow.down.fill\"}\n        />\n      }\n      badge={2}\n    />\n    <SendView\n      tag={1}\n      tabItem={\n        <Label\n          title={\"Send\"}\n          systemImage={\"tray.and.arrow.up.fill\"}\n        />\n      }\n    />\n    <AccountView\n      tag={2}\n      badge={\"!\"}\n      tabItem={\n        <Label\n          title={\"Account\"}\n          systemImage={\"person.crop.circle.fill\"}\n        />\n      }\n    />\n  </TabView>\n}\n\nfunction ReceivedView() {\n  return <Text>Received view</Text>\n}\n\nfunction SendView() {\n  return <Text>Send view</Text>\n}\n\nfunction AccountView() {\n  return <Text>Account view</Text>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Navigation/TabView/TabView with badge","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"TabView with multiple scrolling pages","content":"```tsx\n\n\nfunction Example() {\n  const colors: Color[] = [\n    \"red\",\n    \"green\",\n    \"blue\",\n    \"purple\"\n  ]\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"TabView\"}\n    >\n      <TabView\n        tabViewStyle={\"page\"}\n        frame={{\n          height: 200\n        }}\n      >\n        {colors.map(color =>\n          <ColorView\n            color={color}\n          />\n        )}\n      </TabView>\n    </VStack>\n  </NavigationStack>\n}\n\nfunction ColorView({\n  color,\n}: {\n  color: Color\n}) {\n  return <VStack\n    frame={{\n      maxWidth: \"infinity\",\n      maxHeight: \"infinity\"\n    }}\n    background={color}\n  >\n    <Text>{color}</Text>\n  </VStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Navigation/TabView/TabView with multiple scrolling pages","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"TabView","content":"Scripting provides a modern Tab system aligned with iOS 18+:\n\n- `TabView` — container that manages multiple tabs and switching between them\n- `Tab` — a single tab and its associated content\n- `TabSection` — a way to group tabs into sections, each with its own configuration and header\n\nCombined with TabView-level options and `TabViewCustomization`, this enables rich tab layouts, including sidebar representations, customization, and persistence.\n\nThis document focuses on:\n\n- How to structure tab content using `TabView`, `Tab`, and `TabSection`\n- How to configure tab bar and sidebar behaviors\n- How to use `TabViewCustomization` to persist and restore user customizations\n\n***\n\n## 1. Basic Usage: TabView + Tab\n\nIn the simplest case, `TabView` hosts multiple `Tab` elements. Each `Tab` defines:\n\n- A title and system image for the tab item\n- A value used for selection\n- An optional role (for example `search`)\n- The actual view content\n\n```tsx\n\n\nfunction RootView() {\n  const selection = useObservable<number>(0)\n\n  return (\n    <TabView selection={selection}>\n      <Tab\n        title=\"Home\"\n        systemImage=\"house.fill\"\n        value={0}\n      >\n        <HomeView />\n      </Tab>\n\n      <Tab\n        title=\"Search\"\n        systemImage=\"magnifyingglass\"\n        value={1}\n        role=\"search\"\n      >\n        <SearchView />\n      </Tab>\n\n      <Tab\n        title=\"Settings\"\n        systemImage=\"gearshape.fill\"\n        value={2}\n      >\n        <SettingsView />\n      </Tab>\n    </TabView>\n  )\n}\n```\n\nKey points:\n\n- `TabView selection={selection}` binds the **current tab** to an observable value.\n- Each `Tab`’s `value` must match the observable’s type (`number` or `string`).\n- Tabs with `role=\"search\"` integrate with `tabViewSearchActivation` behavior (see below).\n\n***\n\n## 2. Grouping Tabs with TabSection\n\nWhen you have many tabs, or when you want a sidebar-like structure, use `TabSection` to group related tabs.\n\nThe structure becomes:\n\n```text\nTabView\n ├─ TabSection\n │   ├─ Tab\n │   ├─ Tab\n │   └─ ...\n ├─ TabSection\n │   ├─ Tab\n │   └─ ...\n```\n\n### 2.1 Using `title` as a section header\n\n```tsx\nfunction MailRootView() {\n  const selection = useObservable<string>('inbox')\n\n  return (\n    <TabView selection={selection}>\n      <TabSection title=\"Mailboxes\">\n        <Tab\n          title=\"Inbox\"\n          systemImage=\"tray.full.fill\"\n          value=\"inbox\"\n        >\n          <InboxView />\n        </Tab>\n\n        <Tab\n          title=\"Sent\"\n          systemImage=\"paperplane.fill\"\n          value=\"sent\"\n        >\n          <SentView />\n        </Tab>\n      </TabSection>\n\n      <TabSection title=\"Labels\">\n        <Tab\n          title=\"Important\"\n          systemImage=\"star.fill\"\n          value=\"important\"\n        >\n          <ImportantView />\n        </Tab>\n      </TabSection>\n    </TabView>\n  )\n}\n```\n\n### 2.2 Using `header` for a custom section header\n\nIf you need a richer header (icon + text + description, etc.), use `header` instead of `title`:\n\n```tsx\n<TabSection\n  header={\n    <HStack spacing={8}>\n      <Image systemName=\"folder.fill\" />\n      <VStack alignment=\"leading\">\n        <Text fontWeight=\"bold\">Projects</Text>\n        <Text fontSize={12} foregroundColor=\"secondary\">\n          Recently opened projects\n        </Text>\n      </VStack>\n    </HStack>\n  }\n>\n  <Tab title=\"Project A\" systemImage=\"doc.fill\" value=\"projectA\">\n    <ProjectAView />\n  </Tab>\n\n  <Tab title=\"Project B\" systemImage=\"doc.fill\" value=\"projectB\">\n    <ProjectBView />\n  </Tab>\n</TabSection>\n```\n\n`title` and `header` are mutually exclusive: use one or the other per section.\n\n***\n\n## 3. Section-Level Configuration: Layout, Actions, Drag & Drop\n\n`TabSection` can control how a section is presented and how it behaves.\n\n### 3.1 `tabPlacement`\n\nControls where and how the section’s tabs appear. Common values:\n\n- `automatic` — let the system decide based on environment.\n- `pinned` — pins tabs so they remain visible in the bar.\n- `sidebarOnly` — show tabs only in the sidebar representation.\n\nExample: a section that only appears in the sidebar:\n\n```tsx\n<TabSection\n  title=\"Tags\"\n  tabPlacement=\"sidebarOnly\"\n>\n  <Tab title=\"Important\" systemImage=\"star.fill\" value=\"important\">\n    <ImportantView />\n  </Tab>\n</TabSection>\n```\n\n### 3.2 `sectionActions`\n\nProvides extra actions associated with a section, such as “Add” or “More”.\n\n```tsx\n<TabSection\n  title=\"Lists\"\n  sectionActions={\n    <Button\n      title=\"Add\"\n      systemImage=\"plus\"\n      action={addNewList}\n    />\n  }\n>\n  <Tab title=\"Today\" systemImage=\"sun.max.fill\" value=\"today\">\n    <TodayView />\n  </Tab>\n</TabSection>\n```\n\n### 3.3 Visibility and customization behavior\n\nAt the section level you can configure:\n\n- Default visibility in different placements (tab bar, sidebar)\n- Customization behavior (whether users can reorder or adjust the section)\n\nTypical use-case: a section that users can reorder in a Tab layout editor:\n\n```tsx\n<TabSection\n  title=\"Files\"\n  customizationID=\"files-section\"\n  customizationBehavior=\"reorderable\"\n>\n  <Tab title=\"Recent\" systemImage=\"clock.fill\" value=\"recent\">\n    <RecentFilesView />\n  </Tab>\n</TabSection>\n```\n\n### 3.4 Drag & drop integration\n\nBoth `TabSection` and `Tab` can participate in drag & drop via:\n\n- `draggable` — logical drag identifier\n- `dropDestination` — handler for dropped items\n\nExample:\n\n```tsx\n<TabSection\n  title=\"Files\"\n  draggable=\"files-section\"\n  dropDestination={items => handleDroppedItems(items)}\n>\n  <Tab title=\"Recent\" systemImage=\"clock.fill\" value=\"recent\">\n    <RecentFilesView />\n  </Tab>\n</TabSection>\n```\n\n***\n\n## 4. TabView-Level Configuration\n\nOn the TabView (or the view owning the TabView) you can configure global behavior such as:\n\n- Tab bar minimization\n- Bottom accessories\n- Search activation behavior\n- Sidebar header/footer/bottom bar\n- Customization state (`tabViewCustomization`)\n\n### 4.1 `tabBarMinimizeBehavior` (iOS 26.0+)\n\nControls how the tab bar minimizes in response to scrolling:\n\n- `automatic`\n- `never`\n- `onScrollDown`\n- `onScrollUp`\n\n```tsx\n<TabView\n  selection={selection}\n  tabBarMinimizeBehavior=\"onScrollDown\"\n>\n  {/* sections + tabs */}\n</TabView>\n```\n\n### 4.2 `tabViewBottomAccessory` (iOS 26.0+)\n\nPlaces a view at the bottom of the TabView—below the tab bar or tab area.\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewBottomAccessory={\n    <HStack spacing={8}>\n      <Text fontSize={12}>Swipe left or right to switch tabs</Text>\n      <Spacer />\n      <Button title=\"Got it\" action={dismissHint} />\n    </HStack>\n  }\n>\n  {/* sections + tabs */}\n</TabView>\n```\n\n### 4.3 `tabViewSearchActivation` (iOS 26.0+)\n\nConfigures how search is activated for tabs with `role=\"search\"`:\n\n- `automatic`\n- `searchTabSelection` — activate search when the search tab is selected\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewSearchActivation=\"searchTabSelection\"\n>\n  <Tab title=\"Home\" systemImage=\"house.fill\" value=\"home\">\n    <HomeView />\n  </Tab>\n\n  <Tab\n    title=\"Search\"\n    systemImage=\"magnifyingglass\"\n    value=\"search\"\n    role=\"search\"\n  >\n    <SearchView />\n  </Tab>\n</TabView>\n```\n\n### 4.4 Sidebar-specific views (iOS 18.0+)\n\nFor sidebar-style TabView, you can add:\n\n- `tabViewSidebarHeader` — top area (user info, app logo, etc.)\n- `tabViewSidebarFooter` — bottom area (settings, logout)\n- `tabViewSidebarBottomBar` — bar between main content and bottom edge\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewSidebarHeader={\n    <VStack alignment=\"leading\" spacing={4}>\n      <Image systemName=\"person.circle.fill\" fontSize={32} />\n      <Text fontWeight=\"bold\">User Name</Text>\n      <Text fontSize={12} foregroundColor=\"secondary\">\n        Welcome back\n      </Text>\n    </VStack>\n  }\n  tabViewSidebarFooter={\n    <Button title=\"Settings\" systemImage=\"gearshape\" action={openSettings} />\n  }\n  tabViewSidebarBottomBar={\n    <Button title=\"Upgrade to Pro\" systemImage=\"star.fill\" action={upgrade} />\n  }\n>\n  {/* sections + tabs */}\n</TabView>\n```\n\n***\n\n## 5. TabViewCustomization: Persisting Layout and Visibility\n\n`TabViewCustomization` is the core object that represents the customization state of a TabView. It can:\n\n- Track section order\n- Track tab order within each section\n- Track tab visibility (tab bar vs sidebar)\n- Reset section order or visibility\n- Be serialized to / from `Data` for persistence\n\nThe typical pattern is:\n\n1. Initialize `TabViewCustomization` from storage (if present), otherwise create a new instance.\n2. Observe changes to it and save serialized data back to storage.\n3. Use it to query and modify section and tab customizations.\n4. Pass it into the TabView via `tabViewCustomization`.\n\n### 5.1 Initializing and persisting TabViewCustomization\n\nBelow is the **correct example** using `useObservable` and `Storage`:\n\n```tsx\nconst customization = useObservable<TabViewCustomization>(() => {\n  const data = Storage.get('tab_customization')\n  if (data) {\n    return TabViewCustomization.fromData(data) ?? new TabViewCustomization()\n  }\n  return new TabViewCustomization()\n})\n\nuseEffect(() => {\n  const listener = (newValue: TabViewCustomization) => {\n    const data = newValue.toData()\n    if (data) {\n      Storage.set('tab_customization', data)\n    }\n  }\n  customization.subscribe(listener)\n  return () => {\n    customization.unsubscribe(listener)\n  }\n}, [])\n```\n\nExplanation:\n\n- The initializer:\n\n  - Reads raw `Data` from `Storage` using the key `tab_customization`.\n  - Uses `TabViewCustomization.fromData(data)` to recreate a customization object.\n  - Falls back to `new TabViewCustomization()` if the data is invalid or missing.\n- The `useEffect`:\n\n  - Subscribes to changes on the observable.\n  - Every time the `TabViewCustomization` changes, `toData()` is called and persisted.\n  - Cleans up the subscription on unmount.\n\nThis ensures the layout is restored on launch and any user changes are saved automatically.\n\n### 5.2 Using TabViewCustomization with TabView\n\nYou typically pass the observable itself into the TabView:\n\n```tsx\n<TabView\n  selection={selection}\n  tabViewCustomization={customization}\n>\n  {/* TabSection + Tab structure */}\n</TabView>\n```\n\nInternally, the Tab system updates the `TabViewCustomization` object as the user edits the layout, reorders sections, hides tabs, and so on. The observable subscription persists these updates.\n\n### 5.3 Working with sections: getSection and section order\n\nYou can query a section by its `customizationID`:\n\n```tsx\nconst filesSection = customization.value.getSection('files-section')\n```\n\nA section customization can:\n\n- Expose `tabOrder`: the array of tab IDs in this section (or `null` if not customized).\n- Provide `resetTabOrder()`: to restore the original system-defined order of tabs in this section.\n\nExample:\n\n```tsx\nfunction resetFilesSectionOrder() {\n  const section = customization.value.getSection('files-section')\n  section?.resetTabOrder()\n}\n```\n\n### 5.4 Working with tabs: getTab and visibility\n\nYou can query a tab by its `customizationID`:\n\n```tsx\nconst importantTab = customization.value.getTab('important-tab')\n```\n\nA tab customization exposes:\n\n- `tabBarVisibility` — read-only current visibility in the tab bar.\n- `sidebarVisibility` — read/write visibility in the sidebar representation.\n\nExample: hiding a tab from the sidebar only:\n\n```tsx\nconst importantTab = customization.value.getTab('important-tab')\nif (importantTab) {\n  importantTab.sidebarVisibility = 'hidden'\n}\n```\n\nThis allows you to:\n\n- Implement “show/hide in sidebar” toggles.\n- Sync visibility with user preferences or other settings.\n\n### 5.5 Global resets: section order and visibility\n\nTwo convenience methods reset parts of the customization:\n\n```tsx\ncustomization.value.resetSectionOrder()\ncustomization.value.resetVisibility()\n```\n\nTypical usage: a “Reset layout” button.\n\n```tsx\n<Button\n  title=\"Restore Default Layout\"\n  action={() => {\n    customization.value.resetSectionOrder()\n    customization.value.resetVisibility()\n  }}\n/>\n```\n\nThis restores both:\n\n- Section ordering\n- Tab visibility (in tab bar and sidebar)\n\nto their original default state.\n\n***\n\n## 6. Relationship with `tabItem`-based API\n\nEarlier examples in the project may use a `tabItem` view modifier to configure tab labels. That approach is documented elsewhere and is suitable for simple Tab views.\n\nHowever, for:\n\n- Grouped tabs (`TabSection`)\n- Sidebar representations\n- Tab reordering and visibility customization (`TabViewCustomization`)\n- Per-section actions and layouts\n\nyou should use the `TabView + Tab + TabSection + TabViewCustomization` structure described here.\n\nIt provides a clearer model, matches modern iOS Tab APIs, and is designed to work seamlessly with customization and persistence.\n","routePath":"/doc/Views/Navigation/TabView/TabView","lang":"en","toc":[{"id":"1-basic-usage-tabview--tab","text":"1. Basic Usage: TabView + Tab","depth":2,"charIndex":682},{"id":"2-grouping-tabs-with-tabsection","text":"2. Grouping Tabs with TabSection","depth":2,"charIndex":1786},{"id":"21-using-title-as-a-section-header","text":"2.1 Using `title` as a section header","depth":3,"charIndex":2067},{"id":"22-using-header-for-a-custom-section-header","text":"2.2 Using `header` for a custom section header","depth":3,"charIndex":2833},{"id":"3-section-level-configuration-layout-actions-drag--drop","text":"3. Section-Level Configuration: Layout, Actions, Drag & Drop","depth":2,"charIndex":3602},{"id":"31-tabplacement","text":"3.1 `tabPlacement`","depth":3,"charIndex":3740},{"id":"32-sectionactions","text":"3.2 `sectionActions`","depth":3,"charIndex":4250},{"id":"33-visibility-and-customization-behavior","text":"3.3 Visibility and customization behavior","depth":3,"charIndex":4609},{"id":"34-drag--drop-integration","text":"3.4 Drag & drop integration","depth":3,"charIndex":5137},{"id":"4-tabview-level-configuration","text":"4. TabView-Level Configuration","depth":2,"charIndex":5574},{"id":"41-tabbarminimizebehavior-ios-260","text":"4.1 `tabBarMinimizeBehavior` (iOS 26.0+)","depth":3,"charIndex":5857},{"id":"42-tabviewbottomaccessory-ios-260","text":"4.2 `tabViewBottomAccessory` (iOS 26.0+)","depth":3,"charIndex":6146},{"id":"43-tabviewsearchactivation-ios-260","text":"4.3 `tabViewSearchActivation` (iOS 26.0+)","depth":3,"charIndex":6559},{"id":"44-sidebar-specific-views-ios-180","text":"4.4 Sidebar-specific views (iOS 18.0+)","depth":3,"charIndex":7081},{"id":"5-tabviewcustomization-persisting-layout-and-visibility","text":"5. TabViewCustomization: Persisting Layout and Visibility","depth":2,"charIndex":7954},{"id":"51-initializing-and-persisting-tabviewcustomization","text":"5.1 Initializing and persisting TabViewCustomization","depth":3,"charIndex":8619},{"id":"52-using-tabviewcustomization-with-tabview","text":"5.2 Using TabViewCustomization with TabView","depth":3,"charIndex":9853},{"id":"53-working-with-sections-getsection-and-section-order","text":"5.3 Working with sections: getSection and section order","depth":3,"charIndex":10290},{"id":"54-working-with-tabs-gettab-and-visibility","text":"5.4 Working with tabs: getTab and visibility","depth":3,"charIndex":10855},{"id":"55-global-resets-section-order-and-visibility","text":"5.5 Global resets: section order and visibility","depth":3,"charIndex":11519},{"id":"6-relationship-with-tabitem-based-api","text":"6. Relationship with `tabItem`-based API","depth":2,"charIndex":12049}],"frontmatter":{},"version":"","description":"Scripting provides a modern Tab system aligned with iOS 18+: TabView — container that manages multiple tabs and switching between themTab — a single tab and its associated contentTabSection — a way to group tabs into sections, each with its own configuration and header Combined with TabView-level options and TabViewCustomization, this enables rich tab layouts, including sidebar representations, customization, and persistence. This document focuses on: How to structure tab content using TabView, Tab, and TabSectionHow to configure tab bar and sidebar behaviorsHow to use TabViewCustomization to persist and restore user customizations"},{"title":"Dismissing a presented view","content":"This example demonstrates how to **programmatically dismiss a presented view** using the `Navigation.useDismiss` hook. It is useful when you want to close a custom view in response to user interaction, such as tapping a button or a text label.\n\n***\n\n## Purpose\n\nYou will learn how to:\n\n- Access the dismiss function via `Navigation.useDismiss`\n- Call the dismiss function to close the currently presented view\n- Safely exit the script using `Script.exit` to avoid memory leaks\n\n***\n\n## Example Code\n\n```tsx\n\n\nfunction View() {\n  // Access the `dismiss` function of the context.\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Dismiss a view\"}\n    >\n      <Text\n        foregroundStyle={'link'}\n        onTapGesture={() => {\n          dismiss()\n        }}\n      >Tap and dismiss</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <View />\n  })\n\n  // Avoiding memory leaks.\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Key Concepts\n\n### `Navigation.useDismiss()`\n\nThis hook returns the `dismiss` function from the current view context. When called, it dismisses the view presented via `Navigation.present()`.\n\n### When to use it\n\n- To manually close a presented UI view\n- As part of form submission, cancellation, or navigation control logic\n\n### Example usage\n\nIn the example, a tappable `Text` is rendered:\n\n```tsx\n<Text\n  foregroundStyle={'link'}\n  onTapGesture={() => {\n    dismiss()\n  }}\n>\n  Tap and dismiss\n</Text>\n```\n\nTapping the text triggers `dismiss()`, closing the view.\n\n***\n\n## Best Practices\n\n- Always call `Script.exit()` after `Navigation.present()` completes to avoid memory leaks.\n- Wrap your view in `NavigationStack` to support title bars and navigation behavior.\n- Ensure `useDismiss` is only used inside the component tree presented via `Navigation.present()`.\n\n***\n\n## Result\n\nThis script will present a simple view with a link-style text labeled **“Tap and dismiss”**. When the user taps it, the view will close.\n","routePath":"/doc/Views/Present views/Dismissing a presented view/","lang":"en","toc":[{"id":"purpose","text":"Purpose","depth":2,"charIndex":250},{"id":"example-code","text":"Example Code","depth":2,"charIndex":483},{"id":"key-concepts","text":"Key Concepts","depth":2,"charIndex":1024},{"id":"navigationusedismiss","text":"`Navigation.useDismiss()`","depth":3,"charIndex":1041},{"id":"when-to-use-it","text":"When to use it","depth":3,"charIndex":1218},{"id":"example-usage","text":"Example usage","depth":3,"charIndex":1351},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":1597},{"id":"result","text":"Result","depth":2,"charIndex":1898}],"frontmatter":{},"version":"","description":"This example demonstrates how to programmatically dismiss a presented view using the Navigation.useDismiss hook. It is useful when you want to close a custom view in response to user interaction, such as tapping a button or a text label."},{"title":"Example","content":"```tsx\n\n\nfunction View() {\n  // Access the `dismiss` function of the context.\n  const dismiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Dismiss a view\"}\n    >\n      <Text\n        foregroundStyle={'link'}\n        onTapGesture={() => {\n          dismiss()\n        }}\n      >Tap and dismiss</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <View />\n  })\n\n  // Avoiding memory leaks.\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Present views/Dismissing a presented view/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Present a simple view","content":"This example demonstrates how to display a basic UI screen in the Scripting app using the `Navigation.present` API. It also shows how to set up navigation-related features such as the navigation stack and page title.\n\n***\n\n## Overview\n\nYou will learn how to:\n\n- Present a custom view using `Navigation.present`\n- Create a structured layout using `NavigationStack` and `VStack`\n- Set the navigation bar title using `navigationTitle`\n\n***\n\n## Example Code\n\n```tsx\n\n\nfunction View() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Present a simple view\"}\n    >\n      <Text>Hello Scripting!</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <View />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n## Key Components\n\n### `Navigation.present(options)`\n\nThis function displays the given UI element modally as a full screen page. It takes an `element` property that defines the root view to show.\n\n```ts\nawait Navigation.present({\n  element: <View />\n})\n```\n\n### `NavigationStack`\n\nThis component provides a navigation container that supports title display, navigation bar buttons, and structured transitions. It must be the outermost wrapper for views that use navigation features.\n\n### `VStack`\n\nA vertical layout container that stacks children in a top-to-bottom arrangement. In this example, it holds a single `Text` component.\n\n### `navigationTitle`\n\nSet on `VStack`, this prop sets the title shown in the navigation bar.\n\n***\n\n## Output\n\nThis example displays a simple page with the title **\"Present a simple view\"** and a message reading **\"Hello Scripting!\"** in the center of the screen.\n\n***\n\n## Notes\n\n- Always wrap your views in `NavigationStack` if you want navigation behavior like back buttons, titles, or toolbars.\n- Don’t forget to call `Script.exit()` after `Navigation.present()` resolves to avoid memory leaks.\n","routePath":"/doc/Views/Present views/Present a simple view/","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":223},{"id":"example-code","text":"Example Code","depth":2,"charIndex":438},{"id":"key-components","text":"Key Components","depth":2,"charIndex":765},{"id":"navigationpresentoptions","text":"`Navigation.present(options)`","depth":3,"charIndex":784},{"id":"navigationstack","text":"`NavigationStack`","depth":3,"charIndex":1023},{"id":"vstack","text":"`VStack`","depth":3,"charIndex":1248},{"id":"navigationtitle","text":"`navigationTitle`","depth":3,"charIndex":1397},{"id":"output","text":"Output","depth":2,"charIndex":1497},{"id":"notes","text":"Notes","depth":2,"charIndex":1667}],"frontmatter":{},"version":"","description":"This example demonstrates how to display a basic UI screen in the Scripting app using the Navigation.present API. It also shows how to set up navigation-related features such as the navigation stack and page title."},{"title":"Example","content":"```tsx\n\n\nfunction View() {\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Present a simple view\"}\n    >\n      <Text>Hello Scripting!</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <View />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Present views/Present a simple view/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"SVG","content":"The `SVG` component is used to display SVG (Scalable Vector Graphics) images. It supports loading SVG content from the following sources:\n\n- A **remote URL**\n- A **local file path**\n- **Inline SVG code**\n\nSVGs are rendered as bitmap images. You can choose to render them in **template mode** to apply tint colors using `foregroundColor`.\n\n***\n\n## Import\n\n```tsx\n```\n\n***\n\n## Props\n\n### Image Source (choose exactly one)\n\n| Prop       | Type                                   | Description                            |\n| ---------- | -------------------------------------- | -------------------------------------- |\n| `url`      | `string \\| DynamicImageSource<string>` | Displays an SVG from a network URL     |\n| `filePath` | `string \\| DynamicImageSource<string>` | Displays an SVG from a local file path |\n| `code`     | `string \\| DynamicImageSource<string>` | Displays an SVG from inline SVG code   |\n\n> These three props are mutually exclusive — only one should be provided.\n\n***\n\n### Rendering Behavior (`ImageRenderingBehaviorProps`)\n\n| Prop                          | Type                                        | Default      | Description                                                     |\n| ----------------------------- | ------------------------------------------- | ------------ | --------------------------------------------------------------- |\n| `resizable`                   | `boolean \\| object`                         | `false`      | Controls whether the image resizes to fit its frame (see below) |\n| `renderingMode`               | `'original' \\| 'template'`                  | `'original'` | Use `\"template\"` to allow tinting via `foregroundColor`         |\n| `interpolation`               | `'none' \\| 'low' \\| 'medium' \\| 'high'`     | `'medium'`   | Sets interpolation quality when scaling the image               |\n| `antialiased`                 | `boolean`                                   | `false`      | Whether the image should use anti-aliasing                      |\n| `widgetAccentedRenderingMode` | `WidgetAccentedRenderingMode` (Widget-only) | —            | Defines how the image renders in Widget accented mode           |\n\n***\n\n### `resizable` Prop Details\n\n| Type                          | Meaning                                                                    |\n| ----------------------------- | -------------------------------------------------------------------------- |\n| `true`                        | Image resizes to fit its container (stretch)                               |\n| `false`                       | Image maintains original size                                              |\n| `{ capInsets, resizingMode }` | Allows defining cap insets and resizing mode (for 9-patch or tiled images) |\n\n***\n\n## Examples\n\n### Display SVG from a local file (template mode with tint)\n\n```tsx\n<SVG\n  filePath=\"/path/to/local/image.svg\"\n  resizable\n  frame={{ width: 50, height: 50 }}\n  renderingMode=\"template\"\n  foregroundColor=\"red\"\n/>\n```\n\n***\n\n### Display SVG from inline code\n\n```tsx\n<SVG\n  code={`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100\" height=\"100\">\n    <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"green\" stroke-width=\"4\" fill=\"yellow\" />\n  </svg>`}\n  frame={{ width: 100, height: 100 }}\n/>\n```\n\n***\n\n## Notes\n\n- SVGs are now rendered **as bitmap images** only.\n- The `vectorDrawing` prop has been removed and is no longer supported.\n- To apply tinting, use `renderingMode=\"template\"` along with `foregroundColor`.\n- Only one of `url`, `filePath`, or `code` may be specified at a time.\n","routePath":"/doc/Views/SVG","lang":"en","toc":[{"id":"import","text":"Import","depth":2,"charIndex":344},{"id":"props","text":"Props","depth":2,"charIndex":372},{"id":"image-source-choose-exactly-one","text":"Image Source (choose exactly one)","depth":3,"charIndex":382},{"id":"rendering-behavior-imagerenderingbehaviorprops","text":"Rendering Behavior (`ImageRenderingBehaviorProps`)","depth":3,"charIndex":987},{"id":"resizable-prop-details","text":"`resizable` Prop Details","depth":3,"charIndex":2176},{"id":"examples","text":"Examples","depth":2,"charIndex":2767},{"id":"display-svg-from-a-local-file-template-mode-with-tint","text":"Display SVG from a local file (template mode with tint)","depth":3,"charIndex":2780},{"id":"display-svg-from-inline-code","text":"Display SVG from inline code","depth":3,"charIndex":3003},{"id":"notes","text":"Notes","depth":2,"charIndex":3270}],"frontmatter":{},"version":"","description":"The SVG component is used to display SVG (Scalable Vector Graphics) images. It supports loading SVG content from the following sources: A remote URLA local file pathInline SVG code SVGs are rendered as bitmap images. You can choose to render them in template mode to apply tint colors using foregroundColor."},{"title":"Scroll views","content":"The `ScrollView` component displays its content within a scrollable region. As the user performs scroll gestures, the visible portion of the content is updated accordingly. You can scroll vertically, horizontally, or in both directions using the `axes` prop.\n\n## Type\n\n```ts\ntype ScrollViewProps = {\n  axes?: AxisSet\n  children?: VirtualNode | VirtualNode[] | (VirtualNode | undefined | null)[]\n}\n```\n\n## Overview\n\n- Scroll direction is controlled by the `axes` property.\n- Contents are placed inside children, typically using layouts like `<VStack>` or `<HStack>`.\n- Zooming is not supported.\n\n## Default Behavior\n\n- The default scroll axis is **vertical**.\n- Scroll indicators are shown based on platform conventions unless configured via modifiers.\n\n## Example\n\n```tsx\n<ScrollView>\n  <VStack>\n    {new Array(100).fill('').map((_, index) => (\n      <Text>Row {index}</Text>\n    ))}\n  </VStack>\n</ScrollView>\n```\n\n***\n\n## ScrollView Modifiers\n\nYou can apply the following view modifiers to configure scroll-related behavior.\n\n***\n\n## `scrollIndicator`\n\nControls the visibility of scroll indicators.\n\n### Type\n\n```ts\nscrollIndicator?: ScrollScrollIndicatorVisibility | {\n  visibility: ScrollScrollIndicatorVisibility\n  axes: AxisSet\n}\n```\n\n### `ScrollScrollIndicatorVisibility` options:\n\n- `\"automatic\"`: Follows platform default behavior.\n- `\"visible\"`: Indicators appear but may auto-hide based on OS behavior.\n- `\"hidden\"`: Hidden unless overridden by system behavior.\n- `\"never\"`: Never show indicators.\n\n### Example\n\n```tsx\n<ScrollView scrollIndicator=\"never\">\n  <VStack>{/* content */}</VStack>\n</ScrollView>\n```\n\nWith axis-specific visibility:\n\n```tsx\n<ScrollView\n  scrollIndicator={{\n    visibility: \"hidden\",\n    axes: \"vertical\"\n  }}\n>\n  <VStack>{/* content */}</VStack>\n</ScrollView>\n```\n\n***\n\n## `scrollDisabled`\n\nEnables or disables scrolling behavior entirely.\n\n### Type\n\n```ts\nscrollDisabled?: boolean\n```\n\n### Example\n\n```tsx\n<ScrollView scrollDisabled>\n  <Text>This scroll view is locked.</Text>\n</ScrollView>\n```\n\n***\n\n## `scrollClipDisabled`\n\nControls whether the scroll view clips content that extends beyond its bounds.\n\n### Type\n\n```ts\nscrollClipDisabled?: boolean\n```\n\n### Example\n\n```tsx\n<ScrollView scrollClipDisabled>\n  {/* Content may overflow scroll bounds visually */}\n</ScrollView>\n```\n\n***\n\n## `scrollDismissesKeyboard`\n\nDetermines how the scroll interaction affects the software keyboard.\n\n### Type\n\n```ts\nscrollDismissesKeyboard?: ScrollDismissesKeyboardMode\n```\n\n### Options\n\n- `\"automatic\"`: Default behavior based on context.\n- `\"immediately\"`: Dismiss keyboard as soon as scrolling starts.\n- `\"interactively\"`: Allow user to drag to dismiss keyboard.\n- `\"never\"`: Scrolling will not dismiss the keyboard.\n\n### Example\n\n```tsx\n<ScrollView scrollDismissesKeyboard=\"interactively\">\n  {/* Content with text input */}\n</ScrollView>\n```\n\n***\n\n## `defaultScrollAnchor`\n\nDefines which point in the content should be visible initially or stay anchored when content size changes.\n\n### Type\n\n```ts\ndefaultScrollAnchor?: KeywordPoint | Point\n```\n\n### `KeywordPoint` values\n\n- `\"top\"`, `\"bottom\"`, `\"leading\"`, `\"trailing\"`, `\"center\"`, `\"topLeading\"`, `\"bottomTrailing\"` etc.\n\n### Example\n\n```tsx\n<ScrollView defaultScrollAnchor=\"bottom\">\n  <VStack>\n    {/* New content will appear anchored to the bottom */}\n  </VStack>\n</ScrollView>\n```\n\n***\n\n## `AxisSet`\n\nDefines the scrollable directions for a scroll view.\n\n### Type\n\n```ts\ntype AxisSet = 'vertical' | 'horizontal' | 'all'\n```\n\n### Usage\n\n```tsx\n<ScrollView axes=\"horizontal\">\n  <HStack>{/* horizontally scrollable content */}</HStack>\n</ScrollView>\n```\n\n***\n\n## `scrollTargetLayout`\n\nApplies this modifier to layout containers such as LazyHStack, LazyVStack, HStack, or VStack that represent the main repeating content inside a ScrollView.\n\n### Type\n\n```ts\nscrollTargetLayout?: boolean\n```\n\n### Usage\n\nWhen set to `true`, this modifier designates the associated layout container as a scroll target region within the `ScrollView`. It allows the scroll behavior system to determine how scrolling should align to elements within the container.\n\n```tsx\n<ScrollView axes=\"horizontal\">\n  <LazyHStack scrollTargetLayout>\n    {items.map(item => <Text>{item.title}</Text>)}\n  </LazyHStack>\n</ScrollView>\n```\n\n***\n\n## `scrollTargetBehavior`\n\nDefines how scrollable views behave when aligning content to scroll targets.\n\n### Type\n\n```ts\nscrollTargetBehavior?: ScrollTargetBehavior\n```\n\n```ts\ntype ScrollTargetBehavior =\n  | \"paging\"\n  | \"viewAligned\"\n  | \"viewAlignedLimitAutomatic\"\n  | \"viewAlignedLimitAlways\"\n  | \"viewAlignedLimitNever\"\n  | \"viewAlignedLimitAlwaysByFew\"\n  | \"viewAlignedLimitAlwaysByOne\"\n```\n\n#### Description of Variants\n\n- **`\"paging\"`**: Scrolls one page at a time, aligned to the container’s dimensions.\n- **`\"viewAligned\"`**: Scrolls to align views directly, based on view frames.\n- **`\"viewAlignedLimitAutomatic\"`**: Limits scrolling in compact horizontal size classes, but allows full scrolling otherwise.\n- **`\"viewAlignedLimitAlways\"`**: Always restricts scrolling to a limited number of items.\n- **`\"viewAlignedLimitNever\"`**: Allows unrestricted scrolling without view-based limitations.\n- **`\"viewAlignedLimitAlwaysByFew\"`** *(iOS 18.0+)*: Limits scrolling to a small number of views per gesture, automatically determined.\n- **`\"viewAlignedLimitAlwaysByOne\"`** *(iOS 18.0+)*: Restricts each scroll gesture to advance exactly one view at a time.\n\n### Description\n\nThis modifier configures the scroll behavior, such as paging and alignment strategy, for views within a scrollable container.\n\n***\n\n## `scrollContentBackground`\n\nSpecifies the visibility of the background for scrollable views, such as `ScrollView`, within the current view context.\n\n### Type\n\n```ts\nscrollContentBackground?: Visibility\n```\n\n### Description\n\nThis modifier controls whether the default background behind scrollable content (typically a system-provided background) is shown, hidden, or determined automatically based on system behavior.\n\nIt is commonly used when customizing the appearance of scrollable views or when layering custom backgrounds behind scroll content.\n\n### Visibility Options\n\n- **`'automatic'`**\n  The system decides whether the background should be visible based on the current context and platform conventions.\n\n- **`'hidden'`**\n  Hides the scroll view’s default background, allowing custom background layers or transparent effects.\n\n- **`'visible'`**\n  Forces the default scroll content background to be shown, even if a custom background is present.\n\n### Example: Hiding Scroll Background\n\n```tsx\n<List scrollContentBackground=\"hidden\">\n  <Text>No background here</Text>\n</List>\n```\n\nThis example removes the default background from the scroll view, making it fully transparent or allowing underlying views to show through.\n\n***\n\n## Summary\n\n| Modifier / Prop           | Description                                                              |\n| ------------------------- | ------------------------------------------------------------------------ |\n| `axes`                    | Defines scroll direction (`vertical`, `horizontal`, or `all`)            |\n| `scrollIndicator`         | Controls scroll indicator visibility and supports axis-specific config   |\n| `scrollDisabled`          | Disables scrolling entirely when set to `true`                           |\n| `scrollClipDisabled`      | Prevents clipping of content that overflows the scroll bounds            |\n| `scrollDismissesKeyboard` | Configures how scrolling interacts with the software keyboard            |\n| `defaultScrollAnchor`     | Sets the initial or persistent scroll anchor point in the content        |\n| `scrollTargetLayout`      | Marks a container (like `LazyHStack`) as the scroll target for alignment |\n| `scrollTargetBehavior`    | Determines how content aligns and scrolls within the scroll view         |\n| `scrollContentBackground` | Sets the visibility of the scroll view’s default background              |\n","routePath":"/doc/Views/Scroll views/","lang":"en","toc":[{"id":"type","text":"Type","depth":2,"charIndex":260},{"id":"overview","text":"Overview","depth":2,"charIndex":402},{"id":"default-behavior","text":"Default Behavior","depth":2,"charIndex":595},{"id":"example","text":"Example","depth":2,"charIndex":753},{"id":"scrollview-modifiers","text":"ScrollView Modifiers","depth":2,"charIndex":920},{"id":"scrollindicator","text":"`scrollIndicator`","depth":2,"charIndex":1032},{"id":"type-1","text":"Type","depth":3,"charIndex":1876},{"id":"scrollscrollindicatorvisibility-options","text":"`ScrollScrollIndicatorVisibility` options:","depth":3,"charIndex":1240},{"id":"example-1","text":"Example","depth":3,"charIndex":1922},{"id":"scrolldisabled","text":"`scrollDisabled`","depth":2,"charIndex":1805},{"id":"type-2","text":"Type","depth":3,"charIndex":2142},{"id":"example-2","text":"Example","depth":3,"charIndex":2192},{"id":"scrollclipdisabled","text":"`scrollClipDisabled`","depth":2,"charIndex":2037},{"id":"type-3","text":"Type","depth":3,"charIndex":2422},{"id":"example-3","text":"Example","depth":3,"charIndex":2743},{"id":"scrolldismisseskeyboard","text":"`scrollDismissesKeyboard`","depth":2,"charIndex":2322},{"id":"type-4","text":"Type","depth":3,"charIndex":3008},{"id":"options","text":"Options","depth":3,"charIndex":2497},{"id":"example-4","text":"Example","depth":3,"charIndex":3202},{"id":"defaultscrollanchor","text":"`defaultScrollAnchor`","depth":2,"charIndex":2874},{"id":"type-5","text":"Type","depth":3,"charIndex":3438},{"id":"keywordpoint-values","text":"`KeywordPoint` values","depth":3,"charIndex":3072},{"id":"example-5","text":"Example","depth":3,"charIndex":6552},{"id":"axisset","text":"`AxisSet`","depth":2,"charIndex":3370},{"id":"type-6","text":"Type","depth":3,"charIndex":3822},{"id":"usage","text":"Usage","depth":3,"charIndex":3508},{"id":"scrolltargetlayout","text":"`scrollTargetLayout`","depth":2,"charIndex":3640},{"id":"type-7","text":"Type","depth":3,"charIndex":4391},{"id":"usage-1","text":"Usage","depth":3,"charIndex":3872},{"id":"scrolltargetbehavior","text":"`scrollTargetBehavior`","depth":2,"charIndex":4286},{"id":"type-8","text":"Type","depth":3,"charIndex":5748},{"id":"description-of-variants","text":"Description of Variants","depth":4,"charIndex":4683},{"id":"description","text":"Description","depth":3,"charIndex":4684},{"id":"scrollcontentbackground","text":"`scrollContentBackground`","depth":2,"charIndex":5597},{"id":"type-9","text":"Type","depth":3,"charIndex":-1},{"id":"description-1","text":"Description","depth":3,"charIndex":5448},{"id":"visibility-options","text":"Visibility Options","depth":3,"charIndex":6149},{"id":"example-hiding-scroll-background","text":"Example: Hiding Scroll Background","depth":3,"charIndex":6552},{"id":"summary","text":"Summary","depth":2,"charIndex":6831}],"frontmatter":{},"version":"","description":"The ScrollView component displays its content within a scrollable region. As the user performs scroll gestures, the visible portion of the content is updated accordingly. You can scroll vertically, horizontally, or in both directions using the axes prop."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const colors: Color[] = [\n    \"systemRed\",\n    \"systemOrange\",\n    \"systemYellow\",\n    \"systemGreen\",\n    \"systemBlue\",\n    \"systemPurple\",\n    \"systemIndigo\",\n    \"systemPink\",\n  ]\n  const [scrollAnchor, setScrollAnchor] = useState<KeywordPoint>(\"bottom\")\n\n  return <NavigationStack>\n    <ScrollView\n      navigationTitle={\"ScrollView\"}\n      defaultScrollAnchor={scrollAnchor}\n      navigationBarTitleDisplayMode={\"inline\"}\n      key={scrollAnchor}\n    >\n      <VStack\n        spacing={16}\n        padding\n      >\n        <Picker\n          title={\"Default Scroll Anchor\"}\n          value={scrollAnchor}\n          onChanged={setScrollAnchor as any}\n          pickerStyle={\"menu\"}\n        >\n          <Text tag={\"top\"}>Top</Text>\n          <Text tag={\"center\"}>Center</Text>\n          <Text tag={\"bottom\"}>Bottom</Text>\n        </Picker>\n\n        <ScrollView\n          axes={\"horizontal\"}\n          frame={{\n            height: 64\n          }}\n        >\n          <HStack spacing={8}>\n            <ForEach\n              count={15}\n              itemBuilder={index =>\n                <RoundedRectangle\n                  key={index.toString()}\n                  fill={\"systemIndigo\"}\n                  cornerRadius={6}\n                  frame={{\n                    width: 64,\n                    height: 64,\n                  }}\n                  overlay={\n                    <Text>{index}</Text>\n                  }\n                />\n              }\n            />\n          </HStack>\n        </ScrollView>\n\n        <ForEach\n          count={colors.length}\n          itemBuilder={index => {\n            const color = colors[index]\n            return <RoundedRectangle\n              key={color}\n              fill={color}\n              cornerRadius={16}\n              frame={{\n                height: 100\n              }}\n            />\n          }}\n        />\n      </VStack>\n    </ScrollView>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n\n```\n","routePath":"/doc/Views/Scroll views/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"ScrollViewReader","content":"The **ScrollViewReader** component equivalent to SwiftUI’s ScrollViewReader, allowing scripts to programmatically control scrolling position within scrollable content such as `List` or `ScrollView`.\n\n***\n\n# ScrollViewProxy\n\n`ScrollViewProxy` represents the programmatic interface for controlling scrolling. It is provided by `ScrollViewReader` during rendering.\n\n```ts\ninterface ScrollViewProxy {\n    scrollTo: (id: string | number, anchor?: KeywordPoint | Point) => void\n}\n```\n\n## Methods\n\n### scrollTo(id, anchor?)\n\nScrolls the closest scrollable container until the element with the specified `key` becomes visible.\n\n#### Parameters\n\n| Parameter | Type           | Required | Description |                                                                                                          |\n| --------- | -------------- | -------- | ----------- | -------------------------------------------------------------------------------------------------------- |\n| id        | `string`       | `number` | Yes         | The `key` of the target element. Must match the `key` assigned to a child inside the scrollable content. |\n| anchor    | `KeywordPoint` | `Point`  | No          | Controls how the target is aligned within the visible area. Optional.                                    |\n\n### KeywordPoint\n\nPredefined scroll alignment keywords:\n\n- `'top'`\n- `'center'`\n- `'bottom'`\n\n### Point\n\nPrecise alignment coordinates:\n\n```ts\ntype Point = {\n  x: number\n  y: number\n}\n```\n\n***\n\n# ScrollViewReader Component\n\n```ts\ntype ScrollViewReaderProps = {\n    children: (scrollViewProxy: ScrollViewProxy) => VirtualNode;\n};\ndeclare const ScrollViewReader: FunctionComponent<ScrollViewReaderProps>;\n```\n\n## Props\n\n| Name     | Type                                      | Required | Description                                                                  |\n| -------- | ----------------------------------------- | -------- | ---------------------------------------------------------------------------- |\n| children | `(proxy: ScrollViewProxy) => VirtualNode` | Yes      | A function that receives a `ScrollViewProxy` and returns scrollable content. |\n\n***\n\n# Behavior and Usage Notes\n\n1. ScrollViewReader must wrap a `List`, `ScrollView`, or another scrollable container.\n2. The `proxy` is created once during rendering. Use `useRef` if you need to store it.\n3. `scrollTo` works only with elements that have a **unique `key`**.\n4. Using `withAnimation` enables smooth scrolling.\n5. The API follows React’s identity model, but scroll behavior matches SwiftUI.\n\n***\n\n# Example Usage\n\n```tsx\nimport {\n  Button,\n  Navigation,\n  NavigationStack,\n  Script,\n  Text,\n  List,\n  ScrollViewReader,\n  ScrollView,\n  VStack,\n  useRef,\n  ScrollViewProxy,\n  withAnimation\n} from \"scripting\"\n\n\nfunction Item({ index }: { index: number }) {\n  return <Text>\n    Item - {index}\n  </Text>\n}\n\nfunction View() {\n  const dismiss = Navigation.useDismiss()\n  const proxyRef = useRef<ScrollViewProxy>()\n\n  return <NavigationStack>\n    <VStack navigationTitle=\"ScrollViewReader\">\n\n      <ScrollViewReader>\n        {(proxy) => {\n          // Store the proxy instance\n          proxyRef.current = proxy\n\n          return <List>\n            {new Array(100).fill(0).map((_, index) =>\n              <Item\n                key={index}\n                index={index}\n              />\n            )}\n            <Text key=\"bottom\">\n              Bottom\n            </Text>\n          </List>\n        }}\n      </ScrollViewReader>\n\n      <Button\n        title=\"Jump\"\n        action={() => {\n          if (proxyRef.current == null) {\n            console.log(\"no proxy found\")\n            return\n          }\n\n          const index = Math.random() * 100 | 0\n\n          withAnimation(() => {\n            proxyRef.current?.scrollTo(index)\n\n            // Scroll to the element identified by key=\"bottom\"\n            // proxyRef.current?.scrollTo(\"bottom\", \"bottom\")\n          })\n        }}\n      />\n\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <View />\n  })\n  Script.exit()\n}\n\nrun()\n```\n\n***\n\n# How `key` Works in Scripting\n\nScripting does not support `.id()` as in SwiftUI.\nInstead:\n\n```tsx\n<Text key=\"bottom\">Bottom</Text>\n```\n\n- `key` identifies the element within the virtual node tree\n- `scrollTo(\"bottom\")` will scroll to this element\n- `key` must be stable and unique, similar to React and SwiftUI’s `.id()`\n\n***\n\n# Animation Support\n\nScroll operations can be wrapped in `withAnimation` to enable smooth transitions:\n\n```tsx\nwithAnimation(() => {\n  proxy.scrollTo(\"targetKey\", \"center\")\n})\n```\n\nThe animation behavior follows SwiftUI’s animation engine.\n\n***\n\n# Important Notes\n\n1. Every scroll target must have a unique `key`.\n2. `scrollTo` will not work without a matching `key`.\n3. The scrollable content must be inside the same ScrollViewReader.\n4. The alignment anchor is optional but useful for precise positioning.\n5. The API mirrors SwiftUI’s ScrollViewReader logic but adopts React-style identity handling.\n","routePath":"/doc/Views/ScrollViewReader","lang":"en","toc":[{"id":"methods","text":"Methods","depth":2,"charIndex":479},{"id":"scrolltoid-anchor","text":"scrollTo(id, anchor?)","depth":3,"charIndex":491},{"id":"parameters","text":"Parameters","depth":4,"charIndex":620},{"id":"keywordpoint","text":"KeywordPoint","depth":3,"charIndex":1290},{"id":"point","text":"Point","depth":3,"charIndex":1384},{"id":"props","text":"Props","depth":2,"charIndex":1698}],"frontmatter":{},"version":"","description":"The ScrollViewReader component equivalent to SwiftUI’s ScrollViewReader, allowing scripts to programmatically control scrolling position within scrollable content such as List or ScrollView. ScrollViewProxy represents the programmatic interface for controlling scrolling. It is provided by ScrollViewReader during rendering."},{"title":"Search","content":"The Scripting app supports advanced search interactions similar to SwiftUI. You can add a search bar, control its visibility and placement, react to changes in input, and display dynamic suggestions.\n\n***\n\n## `searchable`\n\nMarks a view as searchable by displaying a search field and binding it to a state value.\n\n### Type\n\n```ts\nsearchable?: {\n  value: string\n  onChanged: (value: string) => void\n  placement?: SearchFieldPlacement\n  prompt?: string\n  presented?: {\n    value: boolean\n    onChanged: (value: boolean) => void\n  }\n}\n```\n\n### Description\n\n- Displays a search field in the view (typically above a `<List>`).\n- The `value` is the current search query, which you control via state.\n- The `onChanged` callback updates the state when the user types.\n- Optionally provide a `prompt` as placeholder text.\n- Use `placement` to customize where the search field appears.\n- Use `presented` to programmatically show or dismiss the search field.\n\n### Example\n\n```tsx\nfunction SearchExample() {\n  const [query, setQuery] = useState(\"\")\n  const [showSearch, setShowSearch] = useState(false)\n\n  return (\n    <List\n      searchable={{\n        value: query,\n        onChanged: setQuery,\n        placement: \"navigationBarDrawer\",\n        prompt: \"Search items\",\n        presented: {\n          value: showSearch,\n          onChanged: setShowSearch,\n        }\n      }}\n    >\n      <Text>Searching: {query}</Text>\n    </List>\n  )\n}\n```\n\n### `SearchFieldPlacement` options\n\n| Value                                   | Description                                                |\n| --------------------------------------- | ---------------------------------------------------------- |\n| `'automatic'`                           | Default behavior, automatically selected placement.        |\n| `'navigationBarDrawer'`                 | Appears as a drawer below the navigation bar.              |\n| `'navigationBarDrawerAlwaysDisplay'`    | Always shows the drawer, even when inactive.               |\n| `'navigationBarDrawerAutomaticDisplay'` | Shows drawer only when needed.                             |\n| `'toolbar'`                             | Displays the search field in the toolbar.                  |\n| `'sidebar'`                             | Places the search field in the sidebar (iPad/macOS-style). |\n\n***\n\n## `searchSuggestions`\n\nDisplays a list of suggestions below the search field as the user types.\n\n### Type\n\n```ts\nsearchSuggestions?: VirtualNode\n```\n\n### Description\n\nUse this to return a list of suggestions, typically based on the user's input.\n\n### Example\n\n```tsx\nconst suggestions = useMemo(() => [\n  {\n    label: \"🍎 Apple\",\n    value: \"Apple\"\n  },\n  {\n    label: \"🍌 Bananer\",\n    value: \"Bananer\"\n  }\n], [])\nconst filteredSuggestions = useMemo(() => {\n  if (!/\\S+/.test(query)) {\n    return suggestions\n  }\n  const q = query.toLowerCase()\n  return suggestions.filter(s =>\n    s.label.toLowerCase().includes(q) ||\n    s.value.toLowerCase().includes(q))\n}, [query, suggestions])\n\n<List\n  searchable={{\n    value: query,\n    onChanged: setQuery\n  }}\n  searchSuggestions={\n    <>\n      {filteredSuggestions.map(s =>\n        <Text\n          searchCompletion={s.value}\n        >{s.label}</Text>\n      )}\n    </>\n  }\n/>\n```\n\n***\n\n## `searchSuggestionsVisibility`\n\nControls when and where search suggestions are shown.\n\n### Type\n\n```ts\nsearchSuggestionsVisibility?: {\n  visibility: 'visible' | 'hidden'\n  placements: SearchSuggestionsPlacementSet\n}\n```\n\n### `SearchSuggestionsPlacementSet` options\n\n| Value       | Description                                 |\n| ----------- | ------------------------------------------- |\n| `'content'` | Shows suggestions inline with the content.  |\n| `'menu'`    | Shows suggestions in a popover or dropdown. |\n| `'all'`     | Applies to all available placements.        |\n\n### Example\n\n```tsx\n<List\n  searchSuggestionsVisibility={{\n    visibility: 'visible',\n    placements: 'menu'\n  }}\n/>\n```\n\n***\n\n## `searchCompletion`\n\nAssociates a tappable search suggestion with a complete search query string.\n\n### Type\n\n```ts\nsearchCompletion?: string\n```\n\n### Description\n\nApply this modifier to suggestion views (such as `<Text>`) to indicate what value should be filled into the search field when the user taps the suggestion.\n\n### Example\n\n```tsx\n<Text searchCompletion=\"Mango\">🥭 Mango</Text>\n```\n\nWhen tapped, this will set the search field to `\"Mango\"`.\n\n***\n\n## Summary\n\n| Modifier                      | Purpose                                               |\n| ----------------------------- | ----------------------------------------------------- |\n| `searchable`                  | Adds a search field with bindings and customization.  |\n| `searchSuggestions`           | Provides a list of custom suggestions.                |\n| `searchSuggestionsVisibility` | Controls where and when suggestions are shown.        |\n| `searchCompletion`            | Defines the value used when a suggestion is selected. |\n\nThese modifiers work together to create a responsive, interactive search experience in any scrollable view like `<List>`.\n","routePath":"/doc/Views/Search/","lang":"en","toc":[{"id":"searchable","text":"`searchable`","depth":2,"charIndex":206},{"id":"type","text":"Type","depth":3,"charIndex":313},{"id":"description","text":"Description","depth":3,"charIndex":536},{"id":"example","text":"Example","depth":3,"charIndex":948},{"id":"searchfieldplacement-options","text":"`SearchFieldPlacement` options","depth":3,"charIndex":1429},{"id":"searchsuggestions","text":"`searchSuggestions`","depth":2,"charIndex":2311},{"id":"type-1","text":"Type","depth":3,"charIndex":2409},{"id":"description-1","text":"Description","depth":3,"charIndex":2462},{"id":"example-1","text":"Example","depth":3,"charIndex":2559},{"id":"searchsuggestionsvisibility","text":"`searchSuggestionsVisibility`","depth":2,"charIndex":3242},{"id":"type-2","text":"Type","depth":3,"charIndex":3331},{"id":"searchsuggestionsplacementset-options","text":"`SearchSuggestionsPlacementSet` options","depth":3,"charIndex":3465},{"id":"example-2","text":"Example","depth":3,"charIndex":3821},{"id":"searchcompletion","text":"`searchCompletion`","depth":2,"charIndex":3948},{"id":"type-3","text":"Type","depth":3,"charIndex":4049},{"id":"description-2","text":"Description","depth":3,"charIndex":4096},{"id":"example-3","text":"Example","depth":3,"charIndex":4270},{"id":"summary","text":"Summary","depth":2,"charIndex":4406}],"frontmatter":{},"version":"","description":"The Scripting app supports advanced search interactions similar to SwiftUI. You can add a search bar, control its visibility and placement, react to changes in input, and display dynamic suggestions."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [searchText, setSearchText] = useState(\"\")\n  const languages = useMemo(() => [\n    \"Java\",\n    \"Objective-C\",\n    \"Swift\",\n    \"Python\",\n    \"JavaScript\",\n    \"C++\",\n    \"Ruby\",\n    \"Lua\"\n  ], [])\n\n  const filteredLanguages = useMemo(() => {\n    if (searchText.length === 0) {\n      return languages\n    }\n\n    const text = searchText.toLowerCase()\n\n    return languages.filter(language =>\n      language.toLowerCase().includes(text)\n    )\n  }, [searchText, languages])\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Searchable List\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      searchable={{\n        value: searchText,\n        onChanged: setSearchText,\n      }}\n    >\n      {filteredLanguages.map(language =>\n        <Text>{language}</Text>\n      )}\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Search/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Shapes","content":"Scripting provides a suite of shape components for creating scalable, vector-based UI elements such as rectangles, circles, capsules, ellipses, and rounded rectangles. These shapes support customizable fill, stroke, trimming, and sizing, making them ideal for dashboards, decorative elements, and interactive visuals.\n\n***\n\n## Common `ShapeProps`\n\nAll shape components support the following properties for visual customization:\n\n```ts\ntype ShapeProps = {\n  trim?: {\n    from: number\n    to: number\n  }\n  fill?: ShapeStyle | DynamicShapeStyle\n  stroke?: ShapeStyle | DynamicShapeStyle | {\n    shapeStyle: ShapeStyle | DynamicShapeStyle\n    strokeStyle: StrokeStyle\n  }\n  strokeLineWidth?: number // Deprecated\n}\n```\n\n### Property Descriptions\n\n| Property          | Type                                                                 | Description                                                                                              |\n| ----------------- | -------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- |\n| `trim`            | `{ from: number; to: number }`                                       | Renders only a portion of the shape’s path. Both `from` and `to` are fractions between `0.0` and `1.0`.  |\n| `fill`            | `ShapeStyle` \\| `DynamicShapeStyle`                                  | Fills the shape with a solid color or gradient.                                                          |\n| `stroke`          | `ShapeStyle` \\| `DynamicShapeStyle` \\| `{ shapeStyle, strokeStyle }` | Outlines the shape with a customizable stroke. Supports color, gradient, and stroke style configuration. |\n| `strokeLineWidth` | `number` (Deprecated)                                                | Sets the stroke width. Prefer `strokeStyle.lineWidth` for more control.                                  |\n\n***\n\n## StrokeStyle\n\nTo define the appearance of a shape’s stroke, you can use the `strokeStyle` object:\n\n```ts\ntype StrokeStyle = {\n  lineWidth?: number\n  lineCap?: 'butt' | 'round' | 'square'\n  lineJoin?: 'bevel' | 'miter' | 'round'\n  mitterLimit?: number\n  dash?: number[]\n  dashPhase?: number\n}\n```\n\n### StrokeStyle Options\n\n| Property      | Description                                                                                 |\n| ------------- | ------------------------------------------------------------------------------------------- |\n| `lineWidth`   | Width of the stroke line in points.                                                         |\n| `lineCap`     | Shape of the endpoints: `\"butt\"` (flat), `\"round\"` (rounded), or `\"square\"` (square-ended). |\n| `lineJoin`    | Join style for corners: `\"miter\"`, `\"round\"`, or `\"bevel\"`.                                 |\n| `mitterLimit` | Limit for miter joins. Used when `lineJoin` is `\"miter\"`.                                   |\n| `dash`        | Array of numbers that define the lengths of painted and unpainted segments.                 |\n| `dashPhase`   | How far into the dash pattern to start the drawing.                                         |\n\n***\n\n## Supported Shape Components\n\n### `Rectangle`\n\nA basic rectangle.\n\n```tsx\n<Rectangle\n  fill=\"orange\"\n  stroke={{\n    shapeStyle: \"red\",\n    strokeStyle: {\n      lineWidth: 3,\n      lineJoin: \"round\"\n    }\n  }}\n  frame={{ width: 100, height: 100 }}\n/>\n```\n\n***\n\n### `RoundedRectangle`\n\nA rectangle with uniformly or dimensionally rounded corners.\n\n```tsx\n<RoundedRectangle\n  fill=\"blue\"\n  cornerRadius={16}\n  frame={{ width: 100, height: 100 }}\n/>\n```\n\n***\n\n### `UnevenRoundedRectangle`\n\nA rectangle with individually configurable corner radii.\n\n```tsx\n<UnevenRoundedRectangle\n  fill=\"brown\"\n  topLeadingRadius={16}\n  topTrailingRadius={0}\n  bottomLeadingRadius={0}\n  bottomTrailingRadius={16}\n  frame={{ width: 100, height: 50 }}\n/>\n```\n\n***\n\n### `Circle`\n\nA circle centered within its frame.\n\n```tsx\n<Circle\n  stroke=\"purple\"\n  strokeLineWidth={4}\n  frame={{ width: 100, height: 100 }}\n/>\n```\n\n***\n\n### `Capsule`\n\nAn elongated shape with fully rounded ends.\n\n```tsx\n<Capsule\n  fill=\"systemIndigo\"\n  frame={{ width: 100, height: 40 }}\n/>\n```\n\n***\n\n### `Ellipse`\n\nAn oval shape fitted inside a rectangular frame.\n\n```tsx\n<Ellipse\n  fill=\"green\"\n  frame={{ width: 40, height: 100 }}\n/>\n```\n\n***\n\n## Notes\n\n- To apply advanced stroke customization (e.g. dashed outlines), use the `strokeStyle` object.\n- The `strokeLineWidth` property is deprecated and should be replaced with `stroke.strokeStyle.lineWidth`.\n- The `trim` modifier is particularly useful for animations (e.g., animated drawing of progress rings).\n- All shapes are compatible with layout modifiers like `frame`, `padding`, and `background`.\n","routePath":"/doc/Views/Shapes/","lang":"en","toc":[{"id":"common-shapeprops","text":"Common `ShapeProps`","depth":2,"charIndex":324},{"id":"property-descriptions","text":"Property Descriptions","depth":3,"charIndex":716},{"id":"strokestyle","text":"StrokeStyle","depth":2,"charIndex":1949},{"id":"strokestyle-options","text":"StrokeStyle Options","depth":3,"charIndex":2248},{"id":"supported-shape-components","text":"Supported Shape Components","depth":2,"charIndex":3175},{"id":"rectangle","text":"`Rectangle`","depth":3,"charIndex":3206},{"id":"roundedrectangle","text":"`RoundedRectangle`","depth":3,"charIndex":3437},{"id":"unevenroundedrectangle","text":"`UnevenRoundedRectangle`","depth":3,"charIndex":3633},{"id":"circle","text":"`Circle`","depth":3,"charIndex":3919},{"id":"capsule","text":"`Capsule`","depth":3,"charIndex":4076},{"id":"ellipse","text":"`Ellipse`","depth":3,"charIndex":4224},{"id":"notes","text":"Notes","depth":2,"charIndex":4370}],"frontmatter":{},"version":"","description":"Scripting provides a suite of shape components for creating scalable, vector-based UI elements such as rectangles, circles, capsules, ellipses, and rounded rectangles. These shapes support customizable fill, stroke, trimming, and sizing, making them ideal for dashboards, decorative elements, and interactive visuals."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Shapes\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <Section\n        header={\n          <Text>Rectangle</Text>\n        }\n      >\n        <Rectangle\n          fill={\"orange\"}\n          stroke={{\n            shapeStyle: \"red\",\n            strokeStyle: {\n              lineWidth: 3,\n            }\n          }}\n          frame={{\n            width: 100,\n            height: 100,\n          }}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>RoundedRectangle</Text>\n        }\n      >\n        <RoundedRectangle\n          fill={\"blue\"}\n          cornerRadius={16}\n          frame={{\n            width: 100,\n            height: 100,\n          }}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>Circle</Text>\n        }\n      >\n        <Circle\n          stroke={{\n            shapeStyle: \"purple\",\n            strokeStyle: {\n              lineWidth: 4,\n            }\n          }}\n          frame={{\n            width: 100,\n            height: 100,\n          }}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>Capsule</Text>\n        }\n      >\n        <Capsule\n          fill={\"systemIndigo\"}\n          frame={{\n            width: 100,\n            height: 40,\n          }}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>Ellipse</Text>\n        }\n      >\n        <Ellipse\n          fill={\"green\"}\n          frame={{\n            width: 40,\n            height: 100,\n          }}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text>UnevenRoundedRectangle</Text>\n        }\n      >\n        <UnevenRoundedRectangle\n          fill={\"brown\"}\n          topLeadingRadius={16}\n          topTrailingRadius={0}\n          bottomLeadingRadius={0}\n          bottomTrailingRadius={16}\n          frame={{\n            width: 100,\n            height: 50,\n          }}\n        />\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Shapes/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Keyboard","content":"The `Keyboard` API, along with the `useKeyboardVisible` hook, allows you to interact with the software keyboard in the Scripting app. You can check the keyboard's visibility, hide it, listen for visibility changes, and access the current visibility state reactively in functional components.\n\n***\n\n## Overview\n\nThe `Keyboard` API enables:\n\n1. Checking if the keyboard is currently visible.\n2. Hiding the keyboard programmatically.\n3. Listening for keyboard visibility changes.\n4. Using the `useKeyboardVisible` hook for a reactive approach to track the keyboard's visibility.\n\n***\n\n## Module: `Keyboard`\n\n### Properties\n\n- **`visible: boolean`**\\\n  A read-only property that indicates whether the keyboard is currently visible.\n  - `true`: The keyboard is visible.\n  - `false`: The keyboard is hidden.\n\n***\n\n### Methods\n\n#### `Keyboard.hide(): void`\n\nHides the keyboard if it is currently visible.\n\n- **Usage**:\n  - If the keyboard is already hidden, this method does nothing.\n  - Typically used to programmatically dismiss the keyboard.\n\n***\n\n#### `Keyboard.addVisibilityListener(listener: (visible: boolean) => void): void`\n\nAdds a listener function that is triggered whenever the keyboard's visibility changes.\n\n- **Parameters**:\n  - `listener: (visible: boolean) => void`: A callback function that receives a `visible` parameter:\n    - `true`: Keyboard becomes visible.\n    - `false`: Keyboard becomes hidden.\n\n- **Usage**:\n  - Use this method to execute custom logic when the keyboard appears or disappears.\n\n***\n\n#### `Keyboard.removeVisibilityListener(listener: (visible: boolean) => void): void`\n\nRemoves a previously added visibility listener.\n\n- **Parameters**:\n  - `listener: (visible: boolean) => void`: The callback function to remove. It must match a function previously added with `addVisibilityListener`.\n\n***\n\n## Hook: `useKeyboardVisible`\n\n### `useKeyboardVisible(): boolean`\n\nA hook to access the current keyboard visibility state. The hook provides a reactive way to track whether the keyboard is visible.\n\n- **Returns**:\n  - `true`: The keyboard is currently visible.\n  - `false`: The keyboard is currently hidden.\n\n- **Usage**:\n  - This hook is ideal for functional components to conditionally render UI elements or execute logic based on the keyboard's visibility state.\n\n***\n\n## Example Usage\n\n### Check Keyboard Visibility with `Keyboard.visible`\n\n```ts\nif (Keyboard.visible) {\n  console.log(\"The keyboard is visible.\")\n} else {\n  console.log(\"The keyboard is hidden.\")\n}\n```\n\n***\n\n### Hide the Keyboard\n\n```ts\nKeyboard.hide()\nconsole.log(\"Keyboard hidden programmatically.\")\n```\n\n***\n\n### Add and Remove a Visibility Listener\n\n```ts\n// Define the listener\nfunction handleKeyboardVisibility(visible: boolean) {\n  if (visible) {\n    console.log(\"Keyboard is now visible.\")\n  } else {\n    console.log(\"Keyboard is now hidden.\")\n  }\n}\n\n// Add the listener\nKeyboard.addVisibilityListener(handleKeyboardVisibility)\n\n// Remove the listener\nKeyboard.removeVisibilityListener(handleKeyboardVisibility)\nconsole.log(\"Keyboard visibility listener removed.\")\n```\n\n***\n\n### Use `useKeyboardVisible` in a Functional Component\n\n```tsx\n\n\nfunction KeyboardStatus() {\n  const isKeyboardVisible = useKeyboardVisible()\n\n  return (\n    <VStack>\n      {isKeyboardVisible ? (\n        <Text>The keyboard is currently visible.</Text>\n      ) : (\n        <Text>The keyboard is currently hidden.</Text>\n      )}\n    </VStack>\n  )\n}\n```\n\n***\n\n## Notes\n\n1. **Reactive State with Hook**: Use the `useKeyboardVisible` hook in functional components for a clean and reactive way to track keyboard visibility.\n2. **Static State with `Keyboard.visible`**: Use the `Keyboard.visible` property for quick, non-reactive checks.\n3. **Event Listeners**: Add multiple visibility listeners with `addVisibilityListener` as needed, and ensure you remove them when no longer required to prevent memory leaks.\n4. **Programmatic Dismissal**: The `Keyboard.hide()` method is useful for scenarios where you want to close the keyboard, such as when submitting a form or tapping outside an input field.\n","routePath":"/doc/Views/Text input/Keyboard","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":298},{"id":"module-keyboard","text":"Module: `Keyboard`","depth":2,"charIndex":582},{"id":"properties","text":"Properties","depth":3,"charIndex":605},{"id":"methods","text":"Methods","depth":3,"charIndex":808},{"id":"keyboardhide-void","text":"`Keyboard.hide(): void`","depth":4,"charIndex":821},{"id":"keyboardaddvisibilitylistenerlistener-visible-boolean--void-void","text":"`Keyboard.addVisibilityListener(listener: (visible: boolean) => void): void`","depth":4,"charIndex":1044},{"id":"keyboardremovevisibilitylistenerlistener-visible-boolean--void-void","text":"`Keyboard.removeVisibilityListener(listener: (visible: boolean) => void): void`","depth":4,"charIndex":1519},{"id":"hook-usekeyboardvisible","text":"Hook: `useKeyboardVisible`","depth":2,"charIndex":1827},{"id":"usekeyboardvisible-boolean","text":"`useKeyboardVisible(): boolean`","depth":3,"charIndex":1858},{"id":"example-usage","text":"Example Usage","depth":2,"charIndex":2300},{"id":"check-keyboard-visibility-with-keyboardvisible","text":"Check Keyboard Visibility with `Keyboard.visible`","depth":3,"charIndex":2318},{"id":"hide-the-keyboard","text":"Hide the Keyboard","depth":3,"charIndex":2507},{"id":"add-and-remove-a-visibility-listener","text":"Add and Remove a Visibility Listener","depth":3,"charIndex":2611},{"id":"use-usekeyboardvisible-in-a-functional-component","text":"Use `useKeyboardVisible` in a Functional Component","depth":3,"charIndex":3082},{"id":"notes","text":"Notes","depth":2,"charIndex":3440}],"frontmatter":{},"version":"","description":"The Keyboard API, along with the useKeyboardVisible hook, allows you to interact with the software keyboard in the Scripting app. You can check the keyboard's visibility, hide it, listen for visibility changes, and access the current visibility state reactively in functional components."},{"title":"SecureField","content":"The `SecureField` component in Scripting provides a secure, private text input field intended for entering sensitive information such as passwords. The entered text is visually obscured and not displayed in plain text, mirroring the behavior of SwiftUI’s `SecureField`.\n\nThis component is useful in authentication forms, PIN inputs, or any context where user privacy is essential.\n\n***\n\n## Props\n\n```ts\ntype SecureFieldProps = (\n  | { title: string }\n  | { label: VirtualNode }\n) & {\n  value: string\n  onChanged: (value: string) => void\n  prompt?: string\n  autofocus?: boolean\n  onFocus?: () => void\n  onBlur?: () => void\n}\n```\n\n### Property Descriptions\n\n| Property    | Type                      | Description                                                                       |\n| ----------- | ------------------------- | --------------------------------------------------------------------------------- |\n| `title`     | `string`                  | A simple string label displayed with the field. *(Use either `title` or `label`)* |\n| `label`     | `VirtualNode`             | A custom view node label. *(Use instead of `title`)*                              |\n| `value`     | `string`                  | The current value of the secure text field.                                       |\n| `onChanged` | `(value: string) => void` | Callback function invoked when the value changes.                                 |\n| `prompt`    | `string` (optional)       | A placeholder prompt shown when the field is empty.                               |\n| `autofocus` | `boolean` (optional)      | Automatically focuses the field on mount. Defaults to `false`.                    |\n| `onFocus`   | `() => void` (optional)   | Callback triggered when the field receives focus.                                 |\n| `onBlur`    | `() => void` (optional)   | Callback triggered when the field loses focus.                                    |\n\n***\n\n## Example\n\n```tsx\n\n\nfunction LoginForm() {\n  const [password, setPassword] = useState(\"\")\n\n  return <VStack padding>\n    <SecureField\n      title=\"Password\"\n      value={password}\n      onChanged={setPassword}\n      prompt=\"Enter your password\"\n    />\n  </VStack>\n}\n```\n\nIn this example:\n\n- A secure input field is used to capture a password.\n- The input is visually hidden to ensure privacy.\n- The `prompt` guides the user when no text is entered.\n\n***\n\n## Notes\n\n- Either `title` or `label` must be provided (but not both).\n- The field behaves similarly to `TextField`, with added security features for sensitive input.\n- This component is suitable for use in login, signup, and settings forms where password entry is required.\n","routePath":"/doc/Views/Text input/SecureField/","lang":"en","toc":[{"id":"props","text":"Props","depth":2,"charIndex":387},{"id":"property-descriptions","text":"Property Descriptions","depth":3,"charIndex":629},{"id":"example","text":"Example","depth":2,"charIndex":1942},{"id":"notes","text":"Notes","depth":2,"charIndex":2398}],"frontmatter":{},"version":"","description":"The SecureField component in Scripting provides a secure, private text input field intended for entering sensitive information such as passwords. The entered text is visually obscured and not displayed in plain text, mirroring the behavior of SwiftUI’s SecureField. This component is useful in authentication forms, PIN inputs, or any context where user privacy is essential."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [password, setPassword] = useState('')\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"SecureField\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <SecureField\n        title={\"Password\"}\n        value={password}\n        onChanged={setPassword}\n        prompt={\"Enter password\"}\n      />\n      <Text>Password: {password}</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Text input/SecureField/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"TextField","content":"The `TextField` component in the Scripting app provides a declarative way to create a text input field, similar to SwiftUI’s `TextField`. It supports both single-line and multiline input, custom labels, placeholder prompts, scroll direction, focus handling, and line constraints.\n\nThis component is ideal for collecting short inputs like usernames or longer inputs like messages, with seamless integration into reactive view hierarchies.\n\n***\n\n## Props\n\n```ts\ntype TextFieldProps = (\n  | { title: string }\n  | { label: VirtualNode }\n) & {\n  value: string\n  onChanged: (value: string) => void\n  prompt?: string\n  axis?: Axis\n  autofocus?: boolean\n  onFocus?: () => void\n  onBlur?: () => void\n}\n```\n\n### Property Details\n\n| Property    | Type                                      | Description                                                                              |\n| ----------- | ----------------------------------------- | ---------------------------------------------------------------------------------------- |\n| `title`     | `string`                                  | A simple string label displayed alongside the field. *(Required if `label` is not used)* |\n| `label`     | `VirtualNode`                             | A custom node-based label. *(Use instead of `title`)*                                    |\n| `value`     | `string`                                  | The current text input value.                                                            |\n| `onChanged` | `(value: string) => void`                 | Callback triggered whenever the input text changes.                                      |\n| `prompt`    | `string` (optional)                       | A hint or placeholder to guide the user’s input.                                         |\n| `axis`      | `\"horizontal\"` \\| `\"vertical\"` (optional) | Scroll direction when content exceeds bounds. Use `\"vertical\"` for multiline support.    |\n| `autofocus` | `boolean` (optional)                      | If `true`, the field receives focus on mount. Default is `false`.                        |\n| `onFocus`   | `() => void` (optional)                   | Called when the field gains focus.                                                       |\n| `onBlur`    | `() => void` (optional)                   | Called when the field loses focus.                                                       |\n\n***\n\n## Example: Multiline, Vertically Scrollable TextField\n\n```tsx\n\n\nfunction ScrollableTextInput() {\n  const [text, setText] = useState(\"\")\n\n  return <VStack padding>\n    <TextField\n      title=\"Message\"\n      value={text}\n      onChanged={setText}\n      prompt=\"Enter your message\"\n      axis=\"vertical\"\n      lineLimit={{ min: 3, max: 8 }}\n    />\n  </VStack>\n}\n```\n\n### Behavior\n\n- The field grows from 3 to 8 lines in height as text is entered.\n- When content exceeds 8 lines, it becomes scrollable.\n- The `prompt` is shown as placeholder text until input is provided.\n\n***\n\n## Example: Basic Single-Line TextField\n\n```tsx\n\n\nfunction UsernameInput() {\n  const [username, setUsername] = useState(\"\")\n\n  return <VStack padding>\n    <TextField\n      title=\"Username\"\n      value={username}\n      onChanged={setUsername}\n      prompt=\"Enter your username\"\n    />\n    <Text>Username: {username}</Text>\n  </VStack>\n}\n```\n\n***\n\n## Notes\n\n- You must provide either `title` or `label`, not both.\n- For multiline input, set `axis=\"vertical\"` and define a `lineLimit`.\n- `TextField` integrates seamlessly with state hooks like `useState` to enable real-time reactivity.\n- Focus and blur events are helpful for validating or tracking input behavior.\n","routePath":"/doc/Views/Text input/TextField/","lang":"en","toc":[{"id":"props","text":"Props","depth":2,"charIndex":444},{"id":"property-details","text":"Property Details","depth":3,"charIndex":698},{"id":"example-multiline-vertically-scrollable-textfield","text":"Example: Multiline, Vertically Scrollable TextField","depth":2,"charIndex":2387},{"id":"behavior","text":"Behavior","depth":3,"charIndex":2752},{"id":"example-basic-single-line-textfield","text":"Example: Basic Single-Line TextField","depth":2,"charIndex":2962},{"id":"notes","text":"Notes","depth":2,"charIndex":3308}],"frontmatter":{},"version":"","description":"The TextField component in the Scripting app provides a declarative way to create a text input field, similar to SwiftUI’s TextField. It supports both single-line and multiline input, custom labels, placeholder prompts, scroll direction, focus handling, and line constraints. This component is ideal for collecting short inputs like usernames or longer inputs like messages, with seamless integration into reactive view hierarchies."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [username, setUsername] = useState('')\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"TextField\"}\n    >\n      <TextField\n        title={\"Username\"}\n        value={username}\n        onChanged={setUsername}\n        prompt={\"Enter username\"}\n      />\n      <Text>Username: {username}</Text>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n```\n","routePath":"/doc/Views/Text input/TextField/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Time-based label views","content":"Scripting provides a set of convenient time-related label components that wrap SwiftUI's `Text` styles. These components allow you to display live-updating or formatted date and time strings in widgets and views, with support for dynamic behaviors like relative time and timers.\n\n***\n\n## `DateLabel`\n\nDisplays a dynamic label representing a single point in time using a specified style. This is ideal for widgets that need to show time-based data even when not actively running.\n\n### Props\n\n```ts\ntype DateLabelProps = {\n  timestamp: number\n  style: 'date' | 'time' | 'timer' | 'relative' | 'offset'\n}\n```\n\n- `timestamp`: A UNIX timestamp in milliseconds representing the date to be\n\n- `style`: The display style. Can be:\n  - `\"date\"`: e.g. `\"June 3, 2019\"`\n  - `\"time\"`: e.g. `\"11:23PM\"`\n  - `\"timer\"`: a running timer string\n  - `\"relative\"`: e.g. `\"2 hours, 23 minutes\"`\n  - `\"offset\"`: e.g. `+2 hours`, `-3 months`\n\n### Example\n\n```tsx\n<DateLabel\n  timestamp={Date.now()}\n  style=\"date\"\n/>\n\n<DateLabel\n  timestamp={Date.now()}\n  style=\"timer\"\n/>\n```\n\n***\n\n## `DateRangeLabel`\n\nDisplays a localized textual representation of a time range between two dates.\n\n### Props\n\n```ts\ntype DateRangeLabelProps = {\n  from: number\n  to: number\n}\n```\n\n| Property | Description                               |\n| -------- | ----------------------------------------- |\n| `from`   | The start date timestamp in milliseconds. |\n| `to`     | The end date timestamp in milliseconds.   |\n\n### Example\n\n```tsx\n<DateRangeLabel\n  from={Date.now()}\n  to={Date.now() + 1000 * 60}\n/>\n```\n\n***\n\n## `DateIntervalLabel`\n\nDisplays a formatted time interval, typically between two times on the same day (e.g., for event scheduling).\n\n### Props\n\nSame as `DateRangeLabelProps`:\n\n```ts\ntype DateIntervalLabelProps = {\n  from: number\n  to: number\n}\n```\n\n### Example\n\n```tsx\nlet fromDate = new Date()\nfromDate.setHours(9)\nfromDate.setMinutes(30)\n\nlet toDate = new Date()\ntoDate.setHours(15)\ntoDate.setMinutes(30)\n\n<DateIntervalLabel\n  from={fromDate.getTime()}\n  to={toDate.getTime()}\n/>\n```\n\nOutput example: `\"9:30 AM – 3:30 PM\"`\n\n***\n\n## `TimerIntervalLabel`\n\nDisplays a live-updating timer counting up or down between two timestamps. Optionally, the timer can pause at a specific point.\n\n### Props\n\n```ts\ntype TimerIntervalLabelProps = {\n  from: number\n  to: number\n  pauseTime?: number\n  countsDown?: boolean\n  showsHours?: boolean\n}\n```\n\n| Property     | Description                                                                                         |\n| ------------ | --------------------------------------------------------------------------------------------------- |\n| `from`       | Start timestamp of the interval.                                                                    |\n| `to`         | End timestamp of the interval.                                                                      |\n| `pauseTime`  | (Optional) A timestamp at which the timer should pause. If undefined, the timer runs to completion. |\n| `countsDown` | (Optional) Whether to count down. Defaults to `true`.                                               |\n| `showsHours` | (Optional) Whether to show the hour component when over 60 minutes. Defaults to `true`.             |\n\n### Example\n\n```tsx\n<TimerIntervalLabel\n  from={Date.now()}\n  to={Date.now() + 1000 * 60 * 12}\n  pauseTime={Date.now() + 1000 * 60 * 10}\n/>\n```\n\nThis displays a countdown from 12 minutes and pauses at the 10-minute mark.\n","routePath":"/doc/Views/Time-based label views","lang":"en","toc":[{"id":"datelabel","text":"`DateLabel`","depth":2,"charIndex":285},{"id":"props","text":"Props","depth":3,"charIndex":480},{"id":"example","text":"Example","depth":3,"charIndex":920},{"id":"daterangelabel","text":"`DateRangeLabel`","depth":2,"charIndex":1060},{"id":"props-1","text":"Props","depth":3,"charIndex":1161},{"id":"example-1","text":"Example","depth":3,"charIndex":1471},{"id":"dateintervallabel","text":"`DateIntervalLabel`","depth":2,"charIndex":1570},{"id":"props-2","text":"Props","depth":3,"charIndex":1705},{"id":"example-2","text":"Example","depth":3,"charIndex":1821},{"id":"timerintervallabel","text":"`TimerIntervalLabel`","depth":2,"charIndex":2103},{"id":"props-3","text":"Props","depth":3,"charIndex":2257},{"id":"example-3","text":"Example","depth":3,"charIndex":3243}],"frontmatter":{},"version":"","description":"Scripting provides a set of convenient time-related label components that wrap SwiftUI's Text styles. These components allow you to display live-updating or formatted date and time strings in widgets and views, with support for dynamic behaviors like relative time and timers."},{"title":"Toolbars","content":"The `toolbar` property allows you to populate the navigation bar, bottom toolbar, or keyboard accessory area with custom UI elements. This system is modeled after SwiftUI’s toolbar API and provides fine-grained placement control across various regions of the user interface.\n\nThis feature is useful for adding primary or contextual actions, organizing control groups, and enhancing keyboard interactions.\n\n***\n\n## Definition\n\n```ts\ntoolbar?: ToolBarProps\n```\n\n### ToolBarProps\n\n```ts\ntype ToolBarProps = {\n  bottomBar?: VirtualNode | VirtualNode[]\n  cancellationAction?: VirtualNode | VirtualNode[]\n  confirmationAction?: VirtualNode | VirtualNode[]\n  destructiveAction?: VirtualNode | VirtualNode[]\n  keyboard?: VirtualNode | VirtualNode[]\n  navigation?: VirtualNode | VirtualNode[]\n  primaryAction?: VirtualNode | VirtualNode[]\n  principal?: VirtualNode | VirtualNode[]\n  topBarLeading?: VirtualNode | VirtualNode[]\n  topBarTrailing?: VirtualNode | VirtualNode[]\n}\n```\n\n***\n\n## Placement Options\n\nEach property of `ToolBarProps` determines where the specified items will be placed. You can use either a single `VirtualNode` or an array of nodes for each region.\n\n- **`automatic`** *(implicit)*: Lets the system decide optimal placement based on context. Not explicitly defined as a prop.\n- **`bottomBar`**: Adds items to the bottom toolbar.\n- **`cancellationAction`**: Represents a cancellation action, typically used in modal contexts.\n- **`confirmationAction`**: Represents a confirmation action, typically used in modal contexts.\n- **`destructiveAction`**: Represents a destructive action, often styled with visual emphasis (e.g., red).\n- **`keyboard`**: Displays the item in the keyboard accessory view when a text input is focused.\n- **`navigation`**: Represents a navigation action (e.g., back or close).\n- **`primaryAction`**: Marks an item as the primary action in the current context.\n- **`principal`**: Positions the item in the center of the top navigation bar.\n- **`topBarLeading`**: Places items on the leading edge (left in LTR languages) of the top navigation bar.\n- **`topBarTrailing`**: Places items on the trailing edge (right in LTR languages) of the top navigation bar.\n\n***\n\n## Example\n\n```tsx\n<VStack\n  navigationTitle={\"Toolbars\"}\n  navigationBarTitleDisplayMode={\"inline\"}\n  toolbar={{\n    topBarTrailing: [\n      <Button\n        title={\"Select\"}\n        action={() => {}}\n      />,\n      <ControlGroup\n        label={\n          <Button\n            title={\"Add\"}\n            systemImage={\"plus\"}\n            action={() => {}}\n          />\n        }\n        controlGroupStyle={\"palette\"}\n      >\n        <Button\n          title={\"New\"}\n          systemImage={\"plus\"}\n          action={() => {}}\n        />\n        <Button\n          title={\"Import\"}\n          systemImage={\"square.and.arrow.down\"}\n          action={() => {}}\n        />\n      </ControlGroup>\n    ],\n    bottomBar: [\n      <Button\n        title={\"New Sub Category\"}\n        action={() => {}}\n      />,\n      <Button\n        title={\"Add category\"}\n        action={() => {}}\n      />\n    ],\n    keyboard: <HStack padding>\n      <Spacer />\n      <Button\n        title={\"Done\"}\n        action={() => {\n          Keyboard.hide()\n        }}\n      />\n    </HStack>\n  }}\n>\n  <TextField\n    title={\"TextField\"}\n    value={text}\n    onChanged={setText}\n    textFieldStyle={\"roundedBorder\"}\n    prompt={\"Focus to show the keyboard toolbar\"}\n  />\n</VStack>\n```\n\nThis example demonstrates:\n\n- A **top bar** with a \"Select\" button and a **control group** offering \"New\" and \"Import\" options.\n- A **bottom toolbar** with actions for creating categories.\n- A **keyboard accessory view** with a “Done” button aligned to the right, which hides the keyboard when pressed.\n\n***\n\n## Notes\n\n- All toolbar items support dynamic updates—changes in state will automatically reflect in the toolbar UI.\n- Items placed in the `keyboard` section will only be visible when a text input field is focused.\n- `ControlGroup` components are useful for grouping related toolbar buttons visually and functionally.\n","routePath":"/doc/Views/Toolbars/","lang":"en","toc":[{"id":"definition","text":"Definition","depth":2,"charIndex":411},{"id":"toolbarprops","text":"ToolBarProps","depth":3,"charIndex":460},{"id":"placement-options","text":"Placement Options","depth":2,"charIndex":977},{"id":"example","text":"Example","depth":2,"charIndex":2198},{"id":"notes","text":"Notes","depth":2,"charIndex":3749}],"frontmatter":{},"version":"","description":"The toolbar property allows you to populate the navigation bar, bottom toolbar, or keyboard accessory area with custom UI elements. This system is modeled after SwiftUI’s toolbar API and provides fine-grained placement control across various regions of the user interface. This feature is useful for adding primary or contextual actions, organizing control groups, and enhancing keyboard interactions."},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const [text, setText] = useState(\"\")\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"Toolbars\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        topBarTrailing: [\n          <Button\n            title={\"Select\"}\n            action={() => { }}\n          />,\n          <ControlGroup\n            label={\n              <Button\n                title={\"Add\"}\n                systemImage={\"plus\"}\n                action={() => { }}\n              />\n            }\n            controlGroupStyle={\"palette\"}\n          >\n            <Button\n              title={\"New\"}\n              systemImage={\"plus\"}\n              action={() => { }}\n            />\n            <Button\n              title={\"Import\"}\n              systemImage={\"square.and.arrow.down\"}\n              action={() => { }}\n            />\n          </ControlGroup>\n        ],\n        bottomBar: [\n          <Button\n            title={\"New Sub Category\"}\n            action={() => { }}\n          />,\n          <Button\n            title={\"Add category\"}\n            action={() => { }}\n          />\n        ],\n        keyboard: <HStack\n          padding\n        >\n          <Spacer />\n          <Button\n            title={\"Done\"}\n            action={() => {\n              Keyboard.hide()\n            }}\n          />\n        </HStack>\n      }}\n      padding\n    >\n      <TextField\n        title={\"TextField\"}\n        value={text}\n        onChanged={setText}\n        textFieldStyle={\"roundedBorder\"}\n        prompt={\"Focus to show the keyboard toolbar\"}\n      />\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/Toolbars/index_example","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"VideoPreviewView","content":"`VideoPreviewView` is a UI component that displays the live camera preview associated with a `VideoRecorder` instance.\nIt renders the real-time output of the recorder’s capture session and serves as the visual foundation for custom camera interfaces.\n\n`VideoPreviewView` does **not** control recording behavior. All recording logic—preparation, start, pause, resume, stop, and disposal—is handled exclusively by `VideoRecorder`.\n\n***\n\n## Purpose and Responsibilities\n\n- Display the live camera preview from a `VideoRecorder`\n- Automatically follow the lifecycle of the recorder’s capture session\n- Serve as a composable preview layer for custom camera UIs\n- Support layout and sizing through standard view props such as `frame` and `aspectRatio`\n\n***\n\n## Component Definition\n\n```ts\ntype VideoPreviewViewProps = {\n  recorder: VideoRecorder\n}\n\ndeclare const VideoPreviewView: FunctionComponent<VideoPreviewViewProps>\n```\n\n***\n\n## Props\n\n### recorder\n\n```ts\nrecorder: VideoRecorder\n```\n\nThe `VideoRecorder` instance that provides the preview source.\n\n#### Behavior\n\n- After `recorder.prepare()` completes successfully, the preview becomes available.\n- When `recorder.dispose()` is called, the preview stops and underlying resources are released.\n- `VideoPreviewView` does not own the recorder lifecycle; it only references it.\n\n***\n\n## Relationship to VideoRecorder State\n\nThe preview behavior typically correlates with `VideoRecorder.state` as follows (exact behavior may vary slightly by system):\n\n| Recorder State | Preview Behavior                    |\n| -------------- | ----------------------------------- |\n| `idle`         | No preview or empty output          |\n| `preparing`    | Preview may not yet be available    |\n| `ready`        | Preview is available                |\n| `recording`    | Live, continuously updating preview |\n| `paused`       | Usually frozen at the last frame    |\n| `finishing`    | Preview stops updating              |\n| `finished`     | Preview stopped                     |\n| `failed`       | Preview unavailable                 |\n\n***\n\n## Recommended Lifecycle Management\n\n`VideoRecorder` should be created at the page level and disposed of when the page is dismissed.\n\nRecommended practices:\n\n- Create the recorder using `useMemo` to avoid unnecessary re-instantiation.\n- Assign `onStateChanged` inside `useEffect`.\n- Call `recorder.dispose()` in the cleanup function.\n- Always call `await recorder.prepare()` before starting a recording.\n\n***\n\n## Complete Example\n\n```tsx\nfunction View() {\n  // Access dismiss function.\n  const dismiss = Navigation.useDismiss()\n  const recorder = useMemo(() => {\n    return new VideoRecorder({\n      camera: {\n        position: \"front\",\n      },\n      frameRate: 30,\n      audioEnabled: true,\n      orientation: \"portrait\",\n      sessionPreset: \"hd1280x720\",\n      videoCodec: \"hevc\"\n    })\n  }, [])\n  const [state, setState] = useState<VideoRecorderState>(\"idle\")\n\n  useEffect(() => {\n    recorder.onStateChanged = (state, details) => {\n      setState(state)\n\n      if (state === \"failed\") {\n        Dialog.alert(details!)\n      }\n    }\n\n    return () => {\n      recorder.dispose()\n    }\n  }, [])\n\n  return <NavigationStack>\n    <List\n      navigationTitle=\"Page Title\"\n      navigationBarTitleDisplayMode=\"inline\"\n      toolbar={{\n        topBarLeading: <Button\n          title=\"Done\"\n          action={dismiss}\n        />\n      }}\n    >\n      <Text>State: {state}</Text>\n\n      <Button\n        title=\"Start\"\n        action={async () => {\n          await recorder.prepare()\n          recorder.startRecording(\n            Path.join(\n              FileManager.documentsDirectory,\n              \"test.mov\"\n            )\n          )\n        }}\n      />\n\n      <Button\n        title=\"Pause\"\n        action={() => {\n          recorder.pauseRecording()\n        }}\n      />\n\n      <Button\n        title=\"Resume\"\n        action={() => {\n          recorder.resumeRecording()\n        }}\n      />\n\n      <Button\n        title=\"Stop\"\n        action={async () => {\n          await recorder.stopRecording()\n        }}\n      />\n\n      <VideoPreviewView\n        recorder={recorder}\n        frame={{\n          width: 300\n        }}\n        aspectRatio={{\n          value: 3 / 4,\n          contentMode: \"fill\"\n        }}\n      />\n    </List>\n  </NavigationStack>\n}\n```\n\n***\n\n## Layout and Rendering Guidance\n\n### Controlling Size with `frame`\n\n`VideoPreviewView` supports standard layout props such as `frame`.\n\nExamples:\n\n- Specify only `width` and rely on `aspectRatio` to determine height\n- Specify both `width` and `height` to force a fixed size (may crop or stretch depending on aspect ratio)\n\n***\n\n### Controlling Aspect Ratio\n\n```tsx\n<VideoPreviewView\n  recorder={recorder}\n  aspectRatio={{\n    value: 3 / 4,\n    contentMode: \"fill\"\n  }}\n/>\n```\n\n- `value`: width-to-height ratio\n- `contentMode: \"fill\"`: fills the view and crops if necessary\n- Use `contentMode: \"fit\"` (if supported by your common props) to fully contain the preview with possible letterboxing\n\n***\n\n## Important Notes\n\n### Preparation Is Required\n\nBinding a `VideoRecorder` to `VideoPreviewView` does not automatically start the capture session.\n\nIf `prepare()` is not called:\n\n- The preview may remain empty\n- The preview may become available only intermittently\n- Relying on implicit behavior is discouraged\n\nBest practice: explicitly call `await recorder.prepare()` before recording, as shown in the example.\n\n***\n\n### Resource Cleanup\n\n- Always call `recorder.dispose()` when leaving the page or when the preview is no longer needed.\n- Failing to dispose may keep the camera active, increase power usage, or block subsequent camera access.\n\n***\n\n### Error Handling\n\nWhen `state === \"failed\"`:\n\n- Display `details` to the user (for example, using `Dialog.alert`)\n- Disable recording controls\n- Optionally allow retry by calling `await recorder.reset()` followed by `prepare()`\n\n***\n\n## Responsibility Boundary\n\n- **VideoRecorder**\n  Controls recording logic, state transitions, and resource management.\n\n- **VideoPreviewView**\n  Renders the camera preview and participates only in UI layout.\n\nThis separation keeps recording logic deterministic and the UI layer composable.\n","routePath":"/doc/Views/VideoPreviewView","lang":"en","toc":[{"id":"purpose-and-responsibilities","text":"Purpose and Responsibilities","depth":2,"charIndex":435},{"id":"component-definition","text":"Component Definition","depth":2,"charIndex":752},{"id":"props","text":"Props","depth":2,"charIndex":926},{"id":"recorder","text":"recorder","depth":3,"charIndex":936},{"id":"behavior","text":"Behavior","depth":4,"charIndex":1049},{"id":"relationship-to-videorecorder-state","text":"Relationship to VideoRecorder State","depth":2,"charIndex":1331},{"id":"recommended-lifecycle-management","text":"Recommended Lifecycle Management","depth":2,"charIndex":2074},{"id":"complete-example","text":"Complete Example","depth":2,"charIndex":2484},{"id":"layout-and-rendering-guidance","text":"Layout and Rendering Guidance","depth":2,"charIndex":4332},{"id":"controlling-size-with-frame","text":"Controlling Size with `frame`","depth":3,"charIndex":4366},{"id":"controlling-aspect-ratio","text":"Controlling Aspect Ratio","depth":3,"charIndex":4661},{"id":"important-notes","text":"Important Notes","depth":2,"charIndex":5031},{"id":"preparation-is-required","text":"Preparation Is Required","depth":3,"charIndex":5051},{"id":"resource-cleanup","text":"Resource Cleanup","depth":3,"charIndex":5450},{"id":"error-handling","text":"Error Handling","depth":3,"charIndex":5682},{"id":"responsibility-boundary","text":"Responsibility Boundary","depth":2,"charIndex":5918}],"frontmatter":{},"version":"","description":"VideoPreviewView is a UI component that displays the live camera preview associated with a VideoRecorder instance.\nIt renders the real-time output of the recorder’s capture session and serves as the visual foundation for custom camera interfaces. VideoPreviewView does not control recording behavior. All recording logic—preparation, start, pause, resume, stop, and disposal—is handled exclusively by VideoRecorder."},{"title":"ControlGroup","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [style, setStyle] = useState<ControlGroupStyle>(\"palette\")\n  const styles = useMemo<ControlGroupStyle[]>(() => [\n    'automatic',\n    'compactMenu',\n    'menu',\n    'navigation',\n    'palette'\n  ], [])\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"ControlGroup\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />,\n        confirmationAction: [\n          <ControlGroup\n            label={\n              <Label\n                title={\"Plus\"}\n                systemImage={\"plus\"}\n              />\n            }\n            controlGroupStyle={style}\n          >\n            <Button\n              title={\"Edit\"}\n              systemImage={\"pencil\"}\n              action={() => { }}\n            />\n            <Button\n              title={\"Delete\"}\n              systemImage={\"trash\"}\n              role={\"destructive\"}\n              action={() => { }}\n            />\n          </ControlGroup>\n        ]\n      }}\n    >\n      <Picker\n        title={\"Control Group Style\"}\n        value={style}\n        onChanged={setStyle as any}\n      >\n        {styles.map(style =>\n          <Text tag={style}>{style}</Text>\n        )}\n      </Picker>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/View groupings/ControlGroup","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"ForEach","content":"The `ForEach` component renders a dynamic list of child views. It is used to display collections, create editable lists, and enable system-standard interactions such as swipe-to-delete. It is fully integrated with the Scripting app’s `Observable` state system and mirrors the design of SwiftUI’s `ForEach`.\n\n`ForEach` supports two usage modes:\n\n1. **Deprecated mode**: `count + itemBuilder`\n2. **Recommended mode**: `data: Observable<T[]> + builder`\n\n***\n\n# 1. Type Definitions\n\n## ForEachDeprecatedProps (Not Recommended)\n\n```ts\ntype ForEachDeprecatedProps = {\n  count: number;\n  itemBuilder: (index: number) => VirtualNode;\n  onDelete?: (indices: number[]) => void;\n  onMove?: (indices: number[], newOffset: number) => void;\n};\n```\n\n### Property Details\n\n#### count: number\n\nSpecifies how many items to render. The `itemBuilder` function will be called for indices from 0 to `count - 1`.\n\n#### itemBuilder(index)\n\nBuilds a `VirtualNode` for each index.\n\n#### onDelete(indices)\n\nEnables system-standard swipe-to-delete when the ForEach is placed inside a `List`.\nThis callback is invoked after the row has already been removed from the list UI.\nYou must manually delete the corresponding items from your data source inside this callback.\n\n#### onMove(indices, newOffset)\n\nEnables drag-to-reorder behavior.\nTo disable item movement, pass `null`.\n\n***\n\n# 2. ForEachProps (Recommended)\n\n```ts\ntype ForEachProps<T extends { id: string }> =\n  | ForEachDeprecatedProps\n  | {\n      data: Observable<T[]>;\n      builder: (item: T, index: number) => VirtualNode;\n      editActions?: \"delete\" | \"move\" | \"all\" | null;\n    };\n```\n\n### Property Details\n\n#### data: Observable\\<T\\[]>\n\nAn observable array of items.\nEach item **must** contain a unique `id: string`.\n\nBenefits of using `Observable<T[]>`:\n\n- Automatic refresh when the collection changes\n- Supports animation\n- Behavior closer to SwiftUI’s `ForEach($items)`\n- Integrates cleanly with `List`, `NavigationStack`, and other components\n\n#### builder(item, index)\n\nBuilds a VirtualNode for the element at the given index.\n\n**Important: You must provide a unique `key` (usually `item.id`) on the returned node.**\n\n#### editActions: \"delete\" | \"move\" | \"all\" | null\n\nDefines the editing capabilities of the ForEach component.\n\n| Value      | Description                        |\n| ---------- | ---------------------------------- |\n| `\"delete\"` | Enables deletion only              |\n| `\"move\"`   | Enables reordering only            |\n| `\"all\"`    | Enables both deletion and movement |\n| `null`     | No editing actions (default)       |\n\nWhen used inside a `List`, these actions automatically map to system-standard interactions.\n\n***\n\n# 3. ForEachComponent Interface\n\n```ts\ninterface ForEachComponent {\n  <T extends { id: string }>(props: ForEachProps<T>): VirtualNode;\n}\n```\n\nThe component is generic and supports any item type containing an `id`.\n\n***\n\n# 4. Enabling System-Standard Deletion (Example)\n\nWhen `ForEach` is placed inside a `List`, using `data` and `builder` will automatically activate swipe-to-delete. The only requirement is that each item has a unique `id`.\n\n### Example\n\n```tsx\nfunction View() {\n  const fruits = useObservable(() =>\n    [\"Apple\", \"Bananer\", \"Papaya\", \"Mango\"].map((name, index) => ({\n      id: index.toString(),\n      name,\n    }))\n  );\n\n  return (\n    <NavigationStack>\n      <List\n        navigationTitle=\"Fruits\"\n        toolbar={{\n          topBarTrailing: <EditButton />,\n        }}>\n        <ForEach data={fruits} builder={(item, index) => <Text key={item.id}>{item.name}</Text>} />\n      </List>\n    </NavigationStack>\n  );\n}\n```\n\n***\n\n# 5. Best Practices and Usage Guidelines\n\n### 1. Prefer the `data: Observable<T[]>` API\n\nThis mode provides:\n\n- Better performance\n- Full type inference\n- Proper list diffing and animations\n- Consistent behavior with SwiftUI\n\n### 2. Every item must have a unique `id: string`\n\nThis ensures:\n\n- Correct diff computation\n- Smooth animations\n- Accurate deletion and movement behavior\n\n### 3. Always define `key={item.id}` in the builder\n\nFailing to do so may result in:\n\n- Broken animations\n- Incorrect row updates\n- Misaligned delete/move behavior\n\n### 4. To support editing, place ForEach inside a `List`\n\nAnd optionally add an `EditButton`, for example:\n\n```tsx\ntoolbar={{\n  topBarTrailing: <EditButton />\n}}\n```\n","routePath":"/doc/Views/View groupings/ForEach/","lang":"en","toc":[{"id":"foreachdeprecatedprops-not-recommended","text":"ForEachDeprecatedProps (Not Recommended)","depth":2,"charIndex":479},{"id":"property-details","text":"Property Details","depth":3,"charIndex":735},{"id":"count-number","text":"count: number","depth":4,"charIndex":757},{"id":"itembuilderindex","text":"itemBuilder(index)","depth":4,"charIndex":891},{"id":"ondeleteindices","text":"onDelete(indices)","depth":4,"charIndex":956},{"id":"onmoveindices-newoffset","text":"onMove(indices, newOffset)","depth":4,"charIndex":1240},{"id":"property-details-1","text":"Property Details","depth":3,"charIndex":1621},{"id":"data-observablet","text":"data: Observable<T[]>","depth":4,"charIndex":-1},{"id":"builderitem-index","text":"builder(item, index)","depth":4,"charIndex":1985},{"id":"editactions-delete--move--all--null","text":"editActions: \"delete\" | \"move\" | \"all\" | null","depth":4,"charIndex":2160},{"id":"example","text":"Example","depth":3,"charIndex":3126},{"id":"1-prefer-the-data-observablet-api","text":"1. Prefer the `data: Observable<T[]>` API","depth":3,"charIndex":3670},{"id":"2-every-item-must-have-a-unique-id-string","text":"2. Every item must have a unique `id: string`","depth":3,"charIndex":3854},{"id":"3-always-define-keyitemid-in-the-builder","text":"3. Always define `key={item.id}` in the builder","depth":3,"charIndex":4010},{"id":"4-to-support-editing-place-foreach-inside-a-list","text":"4. To support editing, place ForEach inside a `List`","depth":3,"charIndex":4175}],"frontmatter":{},"version":"","description":"The ForEach component renders a dynamic list of child views. It is used to display collections, create editable lists, and enable system-standard interactions such as swipe-to-delete. It is fully integrated with the Scripting app’s Observable state system and mirrors the design of SwiftUI’s ForEach. ForEach supports two usage modes: Deprecated mode: count + itemBuilderRecommended mode: data: Observable<T[]> + builder"},{"title":"Example","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n\n  const namedFonts = useObservable(() => {\n    return [\n      \"largeTitle\",\n      \"title\",\n      \"headline\",\n      \"body\",\n      \"caption\"\n    ].map(e => ({\n      id: e,\n      name: e as Font\n    }))\n  })\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Iterating\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n        header={\n          <Text\n            textCase={null}\n          >ForEach</Text>\n        }\n      >\n        <ForEach\n          data={namedFonts}\n          builder={(namedFont) => {\n            return <Text\n              key={namedFont.id}\n              font={namedFont.name}\n            >{namedFont.name}</Text>\n          }}\n        />\n      </Section>\n\n      <Section\n        header={\n          <Text\n            textCase={null}\n          >Iterating in code block</Text>\n        }\n      >\n        <VStack>\n          {namedFonts.value.map(namedFont =>\n            <Text\n              font={namedFont.name}\n            >{namedFont.name}</Text>\n          )}\n        </VStack>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/View groupings/ForEach/iterating","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Form","content":"```tsx\n\n\ntype NotifyMeAboutType = \"directMessages\" | \"mentions\" | \"anything\"\ntype ProfileImageSize = \"large\" | \"medium\" | \"small\"\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [notifyMeAbout, setNotifyMeAbout] = useState<NotifyMeAboutType>(\"directMessages\")\n  const [playNotificationSounds, setPlayNotificationSounds] = useState(true)\n  const [profileImageSize, setprofileImageSize] = useState<ProfileImageSize>(\"medium\")\n  const [sendReadReceipts, setSendReadReceipts] = useState(false)\n\n  return <NavigationStack>\n    <Form\n      navigationTitle={\"Form\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <Section\n        header={<Text>Notifications</Text>}\n      >\n        <Picker\n          title={\"Notify Me About\"}\n          value={notifyMeAbout}\n          onChanged={setNotifyMeAbout as any}\n        >\n          <Text\n            tag={\"directMessages\"}\n          >Direct Messages</Text>\n          <Text\n            tag={\"mentions\"}\n          >Mentions</Text>\n          <Text\n            tag={\"anything\"}\n          >Anything</Text>\n        </Picker>\n\n        <Toggle\n          title={\"Play notification sounds\"}\n          value={playNotificationSounds}\n          onChanged={setPlayNotificationSounds}\n        />\n        <Toggle\n          title={\"Send read receipts\"}\n          value={sendReadReceipts}\n          onChanged={setSendReadReceipts}\n        />\n      </Section>\n\n      <Section\n        header={<Text>User Profiles</Text>}\n      >\n        <Picker\n          title={\"Profile Image Size\"}\n          value={profileImageSize}\n          onChanged={setprofileImageSize as any}\n        >\n          <Text\n            tag={\"large\"}\n          >Large</Text>\n          <Text\n            tag={\"medium\"}\n          >Medium</Text>\n          <Text\n            tag={\"small\"}\n          >Small</Text>\n        </Picker>\n\n        <Button\n          title={\"Clear Image Cache\"}\n          action={() => { }}\n        />\n      </Section>\n    </Form>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/View groupings/Form","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Group","content":"```tsx\n\n\nfunction Example() {\n  const dimiss = Navigation.useDismiss()\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Group\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dimiss}\n        />\n      }}\n    >\n      <Section\n        footer={\n          <Text>Apply the headline font to all Text views</Text>\n        }\n      >\n        <Group\n          font={\"headline\"}\n        >\n          <Text>Scripting</Text>\n          <Text>TypeScript</Text>\n          <Text>TSX</Text>\n        </Group>\n      </Section>\n\n      <Section\n        footer={\n          <Text>Group some views as a view</Text>\n        }\n      >\n        <VStack>\n          <Group\n            foregroundStyle={\"red\"}\n          >\n            <Text>1</Text>\n            <Text>2</Text>\n            <Text>3</Text>\n            <Text>4</Text>\n            <Text>5</Text>\n            <Text>6</Text>\n            <Text>7</Text>\n          </Group>\n          <Text>8</Text>\n        </VStack>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/View groupings/Group","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"GroupBox","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [userAgreed, setUserAgreed] = useState(false)\n  const agreementText = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"\n\n  return <NavigationStack>\n    <VStack\n      navigationTitle={\"GroupBox\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />\n      }}\n    >\n      <GroupBox\n        label={\n          <Label\n            title={\"End-User Agreement\"}\n            systemImage={\"building.columns\"}\n          />\n        }\n      >\n        <ScrollView\n          frame={{\n            height: 100,\n          }}\n        >\n          <Text>{agreementText}</Text>\n        </ScrollView>\n        <Toggle\n          value={userAgreed}\n          onChanged={setUserAgreed}\n        >\n          <Text>I agree to the above terms</Text>\n        </Toggle>\n      </GroupBox>\n    </VStack>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/View groupings/GroupBox","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"Section","content":"```tsx\n\n\nfunction Example() {\n  const dismiss = Navigation.useDismiss()\n  const [isExpanded, setIsExpanded] = useState(true)\n\n  return <NavigationStack>\n    <List\n      navigationTitle={\"Section\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n      toolbar={{\n        cancellationAction: <Button\n          title={\"Done\"}\n          action={dismiss}\n        />,\n      }}\n    >\n      <Section>\n        <Text>Row 1</Text>\n        <Text>Row 2</Text>\n        <Text>Row 3</Text>\n        <Text>Row 4</Text>\n      </Section>\n\n      <Section\n        header={<Text>Section with header</Text>}\n      >\n        <Text>Row 1</Text>\n        <Text>Row 2</Text>\n        <Text>Row 3</Text>\n        <Text>Row 4</Text>\n      </Section>\n\n      <Section\n        footer={<Text>Section with footer</Text>}\n      >\n        <Text>Row 1</Text>\n        <Text>Row 2</Text>\n        <Text>Row 3</Text>\n        <Text>Row 4</Text>\n      </Section>\n\n      <Section\n        header={\n          <Text\n            onTapGesture={() => setIsExpanded(!isExpanded)}\n          >Collapsable Section</Text>\n        }\n        isExpanded={isExpanded}\n        onChanged={setIsExpanded}\n      >\n        <Text>Row 1</Text>\n        <Text>Row 2</Text>\n        <Text>Row 3</Text>\n        <Text>Row 4</Text>\n      </Section>\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/View groupings/Section","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"WebView","content":"```tsx\n\n\nfunction WebViewControllerExample() {\n  const [logs, setLogs] = useState<{\n    content: string\n    error: boolean\n  }[]>([])\n\n  function addLog(content: string, error = false) {\n    setLogs(logs => [...logs, { content, error }])\n  }\n\n  async function runCode() {\n    setLogs([])\n    const controller = new WebViewController()\n\n    addLog(\"WebViewController created.\")\n    addLog(\"Start loading...\")\n\n    if (await controller.loadURL(\"https://github.com\")) {\n      addLog(\"Website is loaded.\")\n      addLog(\"Calling controller.evaluateJavaScript...\")\n      const title = await controller.evaluateJavaScript<string>(\"document.title\")\n\n      if (title != null) {\n        addLog(`Title: ${title}`)\n      } else {\n        addLog(\"Failed to get the title.\", true)\n      }\n    } else {\n      addLog(\"Failed to load the website.\", true)\n    }\n\n    controller.dispose()\n    addLog(\"The controller is disposed.\")\n  }\n\n  return <Section\n    header={\n      <Text>WebView controller</Text>\n    }\n  >\n    <VStack\n      frame={{\n        maxWidth: \"infinity\"\n      }}\n      alignment={\"leading\"}\n    >\n      <Text font={\"headline\"}>This example will follow these steps:</Text>\n      <VStack\n        padding={{\n          leading: 16\n        }}\n        spacing={16}\n        foregroundStyle={\"secondaryLabel\"}\n        alignment={\"leading\"}\n      >\n        <Text>Create a WebViewController instane</Text>\n        <Text>Load https://github.com</Text>\n        <Text>Call evaluateJavaScript and get the title of the website</Text>\n      </VStack>\n      <HStack\n        alignment={\"center\"}\n        frame={{\n          maxWidth: \"infinity\"\n        }}\n      >\n        <Button\n          title={\"Run\"}\n          action={runCode}\n        />\n      </HStack>\n\n      <VStack\n        alignment={\"leading\"}\n        spacing={8}\n      >\n        {logs.map(log =>\n          <Text\n            font={\"caption\"}\n            monospaced\n            padding={{\n              leading: 16\n            }}\n            foregroundStyle={log.error ? \"systemRed\" : \"systemGreen\"}\n          >{log.content}</Text>\n        )}\n      </VStack>\n    </VStack>\n  </Section>\n}\n\nfunction PresentWebViewExample() {\n\n  function run() {\n    const controller = new WebViewController()\n    controller.loadURL(\"https://github.com\")\n\n    controller.present({\n      fullscreen: true,\n      navigationTitle: \"Github\"\n    }).then(() => {\n      console.log(\"WebView is dismissed\")\n      controller.dispose()\n    })\n  }\n\n  return <Section\n    header={\n      <Text>Present a WebView as a independent page</Text>\n    }\n  >\n    <Button\n      title={\"Present\"}\n      action={run}\n    />\n  </Section>\n}\n\nfunction EmbedAWebViewExample() {\n  const controller = useMemo(() => new WebViewController(), [])\n  const [url, setUrl] = useState(\"\")\n\n  return <Section\n    header={\n      <Text>Embed a WebView</Text>\n    }\n  >\n    <VStack>\n      <HStack>\n        <Button action={() => {\n          controller.goBack()\n        }}>\n          <Image\n            systemName={\"arrow.left\"}\n          />\n        </Button>\n        <Button action={() => {\n          controller.goForward()\n        }}>\n          <Image\n            systemName={\"arrow.right\"}\n          />\n        </Button>\n        <Button action={() => {\n          controller.reload()\n        }}>\n          <Image\n            systemName={\"arrow.clockwise\"}\n          />\n        </Button>\n        <TextField\n          title={\"Website URL\"}\n          textFieldStyle={\"roundedBorder\"}\n          value={url}\n          onChanged={setUrl}\n          keyboardType={\"URL\"}\n          textInputAutocapitalization={\"never\"}\n          frame={{\n            maxWidth: \"infinity\"\n          }}\n        />\n        <Button\n          action={() => controller.loadURL(url)}\n        >\n          <Image\n            systemName={\"arrow.right.circle\"}\n          />\n        </Button>\n      </HStack>\n      <WebView\n        controller={controller}\n        frame={{\n          height: 400\n        }}\n      />\n    </VStack>\n  </Section>\n}\n\nfunction Example() {\n  return <NavigationStack>\n    <List\n      navigationTitle={\"WebView\"}\n      navigationBarTitleDisplayMode={\"inline\"}\n    >\n      <WebViewControllerExample />\n      <PresentWebViewExample />\n      <EmbedAWebViewExample />\n    </List>\n  </NavigationStack>\n}\n\nasync function run() {\n  await Navigation.present({\n    element: <Example />\n  })\n\n  Script.exit()\n}\n\nrun()\n\n```\n","routePath":"/doc/Views/WebView","lang":"en","toc":[],"frontmatter":{},"version":""},{"title":"AccessoryWidgetBackground","content":"An adaptive background view that provides a standard appearance based on the widget’s environment.\n\n## Overview\n\nThe `AccessoryWidgetBackground` component is designed to be used inside accessory widgets—such as Lock Screen widgets or StandBy widgets—where it applies a system-defined background appropriate for the widget's context.\n\nUsing this view ensures that your widget maintains visual consistency with the surrounding system UI, adapting automatically to light and dark modes, transparency effects, and other environmental styling set by the system.\n\nYou typically use `AccessoryWidgetBackground` as a background layer in combination with other views, such as `ZStack`, to provide system-adaptive styling while layering custom content above it.\n\n## Example\n\n```tsx\n\n\nfunction AccessoryView() {\n  return (\n    <ZStack>\n      <AccessoryWidgetBackground />\n      <Text font=\"caption\">Weather</Text>\n    </ZStack>\n  )\n}\n```\n\nIn this example, `AccessoryWidgetBackground` provides the adaptive system background, and the `Text` element is rendered on top of it. This layout is useful for Lock Screen widgets where consistent and legible appearance is important.\n\n## Best Practices\n\n- Always place `AccessoryWidgetBackground` beneath your content using a stacking layout like `ZStack`.\n- Do not apply custom colors or effects directly to `AccessoryWidgetBackground`; it automatically adapts to system appearance.\n- Combine it with other SwiftUI-inspired components to maintain a consistent style with iOS system widgets.\n\n## Compatibility\n\nThis component is intended for use in accessory widgets and may not have any visual effect outside that context. Use it to ensure your widget blends seamlessly with the native iOS design system.\n","routePath":"/doc/Widget/AccessoryWidgetBackground","lang":"en","toc":[{"id":"overview","text":"Overview","depth":2,"charIndex":100},{"id":"example","text":"Example","depth":2,"charIndex":753},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":1164},{"id":"compatibility","text":"Compatibility","depth":2,"charIndex":1522}],"frontmatter":{},"version":"","description":"An adaptive background view that provides a standard appearance based on the widget’s environment."},{"title":"Animation for Widget and LiveActivity","content":"These APIs allow you to display animation in a widget.\n\n## `AnimatedFrames` Component\n\n### Description\n\nThe `AnimatedFrames` component allows you to display a frame animation in a widget by cycling through the provided child views as frames. The duration of the animation is customizable, and each frame corresponds to a view passed in as a child element.\n\n### Props\n\n- **`duration`**: `DurationInSeconds`\\\n  The animation duration, in seconds.\n\n- **`children`**: `VirtualNode[]`\\\n  The array of views to toggle as the frames of the animation. Each child will be displayed sequentially during the animation.\n\n### Example\n\n```tsx\n<AnimatedFrames duration={4}>\n  <Circle fill=\"red\" frame={{width: 20, height: 20}} />\n  <Circle fill=\"red\" frame={{width: 25, height: 25}} />\n  <Circle fill=\"red\" frame={{width: 30, height: 30}} />\n  <Circle fill=\"red\" frame={{width: 35, height: 35}} />\n</AnimatedFrames>\n```\n\n***\n\n## `AnimatedGif` Component\n\n### Description\n\nThe `AnimatedGif` component renders an animated GIF in a widget. You can provide a custom path to the GIF file, and optionally, a duration for the animation.\n\n### Props\n\n- **`path`**: `string`\\\n  The file path of the GIF image.\n\n- **`duration`**: `DurationInSeconds` *(Optional)*\\\n  The animation duration in seconds. If not provided, the default duration is used.\n\n### Example\n\n```tsx\n<AnimatedGif\n  path={Path.join(Script.directory, \"test.gif\")}\n  duration={4}\n/>\n```\n\n***\n\n## `SwingAnimation` Type\n\n### Description\n\nThe `SwingAnimation` type defines the configuration for animating a view in a swinging motion along the X and Y axes.\n\n### Props\n\n- **`duration`**: `DurationInSeconds`\\\n  The animation duration, in seconds.\n\n- **`distance`**: `number`\\\n  The distance the view swings along the given axis.\n\n***\n\n## `ClockHandRotationEffectPeriod` Type\n\n### Description\n\nThe `ClockHandRotationEffectPeriod` type is used to define the period of rotation for the clock hand effect. You can use predefined values like `\"hourHand\"`, `\"minuteHand\"`, or `\"secondHand\"`, or provide a custom duration.\n\n***\n\n## `AnimatedImage` Component\n\n### Description\n\nThe `AnimatedImage` component renders an animated image in a widget. You can display either `SFSymbol` images or `UIImage` objects. The animation duration and content mode (fit or fill) can be customized.\n\n### Props\n\n- **`systemImages`**: `(string | { name: string; variableValue: number })[]` *(Optional)*\\\n  An array of `SFSymbol` names and variable values to display as a sequence of animated images.\n\n- **`images`**: `UIImage[]` *(Optional)*\\\n  An array of `UIImage` objects to use as the animated frames.\n\n- **`contentMode`**: `ContentMode` *(Optional)*\\\n  A flag indicating whether the image should fit or fill the parent context. The default is `\"fit\"`.\\\n  Possible values: `\"fit\"`, `\"fill\"`.\n\n- **`duration`**: `DurationInSeconds`\\\n  The animation duration, in seconds.\n\n### Example (using `SFSymbol`)\n\n```tsx\n<AnimatedImage\n  duration={6}\n  systemImages={[\n    {name: \"chart.bar.fill\", variableValue: 0},\n    {name: \"chart.bar.fill\", variableValue: 0.3},\n    {name: \"chart.bar.fill\", variableValue: 0.6},\n    {name: \"chart.bar.fill\", variableValue: 1},\n  ]}\n  contentMode=\"fit\"\n/>\n```\n\n### Example (using `UIImage`)\n\n```tsx\nconst image1 = Path.join(Script.directory, \"image1.png\")\nconst image2 = Path.join(Script.directory, \"image2.png\")\n\n<AnimatedImage\n  duration={4}\n  images={[\n    UIImage.fromFile(image1),\n    UIImage.fromFile(image2),\n  ]}\n  contentMode=\"fill\"\n/>\n```\n\n***\n\n## `CommonViewProps` Type\n\n### Description\n\nThis type defines common properties for views that support animation effects, including swing animations and clock hand rotation effects.\n\n### Props\n\n- **`swingAnimation`**: `{ x?: SwingAnimation, y?: SwingAnimation }` *(Optional)*\\\n  Defines the animation configuration for swinging the view along the X and/or Y axis. Each axis can have its own animation settings:\n  - **`x`**: The animation configuration for the horizontal axis.\n  - **`y`**: The animation configuration for the vertical axis.\n\n- **`clockHandRotationEffect`**: `ClockHandRotationEffectPeriod | { anchor: KeywordPoint | Point, period: ClockHandRotationEffectPeriod }` *(Optional)*\\\n  Defines the rotation effect for simulating a clock hand. You can specify the anchor point (optional) and the period (e.g., `\"hourHand\"`, `\"minuteHand\"`, `\"secondHand\"`), or provide a custom duration for the rotation.\n\n### Example (Swing Animation)\n\n```tsx\n<Circle\n  fill=\"systemRed\"\n  frame={{width: 50, height: 50}}\n  swingAnimation={{\n    x: {duration: 4, distance: 250},\n    y: {duration: 2, distance: 50},\n  }}\n/>\n```\n\n### Example (Clock Hand Rotation Effect)\n\n```tsx\n<Circle\n  fill=\"systemBlue\"\n  frame={{width: 50, height: 50}}\n  clockHandRotationEffect=\"minuteHand\"\n/>\n```\n","routePath":"/doc/Widget/Animation for Widget and LiveActivity","lang":"en","toc":[{"id":"animatedframes-component","text":"`AnimatedFrames` Component","depth":2,"charIndex":56},{"id":"description","text":"Description","depth":3,"charIndex":87},{"id":"props","text":"Props","depth":3,"charIndex":357},{"id":"example","text":"Example","depth":3,"charIndex":609},{"id":"animatedgif-component","text":"`AnimatedGif` Component","depth":2,"charIndex":911},{"id":"description-1","text":"Description","depth":3,"charIndex":939},{"id":"props-1","text":"Props","depth":3,"charIndex":1115},{"id":"example-1","text":"Example","depth":3,"charIndex":1322},{"id":"swinganimation-type","text":"`SwingAnimation` Type","depth":2,"charIndex":1432},{"id":"description-2","text":"Description","depth":3,"charIndex":1458},{"id":"props-2","text":"Props","depth":3,"charIndex":1594},{"id":"clockhandrotationeffectperiod-type","text":"`ClockHandRotationEffectPeriod` Type","depth":2,"charIndex":1770},{"id":"description-3","text":"Description","depth":3,"charIndex":1811},{"id":"animatedimage-component","text":"`AnimatedImage` Component","depth":2,"charIndex":2057},{"id":"description-4","text":"Description","depth":3,"charIndex":2087},{"id":"props-3","text":"Props","depth":3,"charIndex":2310},{"id":"example-using-sfsymbol","text":"Example (using `SFSymbol`)","depth":3,"charIndex":2883},{"id":"example-using-uiimage","text":"Example (using `UIImage`)","depth":3,"charIndex":3199},{"id":"commonviewprops-type","text":"`CommonViewProps` Type","depth":2,"charIndex":3493},{"id":"description-5","text":"Description","depth":3,"charIndex":3520},{"id":"props-4","text":"Props","depth":3,"charIndex":3676},{"id":"example-swing-animation","text":"Example (Swing Animation)","depth":3,"charIndex":4408},{"id":"example-clock-hand-rotation-effect","text":"Example (Clock Hand Rotation Effect)","depth":3,"charIndex":4613}],"frontmatter":{},"version":"","description":"These APIs allow you to display animation in a widget."},{"title":"Tinted Mode Adaptation Guide","content":"iOS 18 introduces a new widget rendering mode called **accented mode**, which tints the widget’s content using system-defined accent colors. To support this behavior in your widgets, the **Scripting** app provides three view modifiers:\n\n- `widgetAccentable`\n- `widgetAccentedRenderingMode`\n- `widgetBackground`\n\nThese modifiers allow you to control which parts of your widget participate in the system’s accenting logic, enabling more expressive and adaptable designs.\n\n***\n\n## `widgetAccentable`\n\n### Description\n\nMarks a view and all of its subviews as part of the **accented group**. When a widget is displayed in **accented rendering mode**, the system applies a distinct tint color to the accented group and another to the default group. The colors are applied as if views were template images — the system ignores any explicit color and only uses the view’s alpha channel.\n\nThis modifier helps create layered visual effects, especially useful in tinted widgets where you want to differentiate between elements.\n\n### Usage\n\n```tsx\n<VStack>\n  <Text\n    widgetAccentable\n    font=\"caption\"\n  >\n    MON\n  </Text>\n  <Text font=\"title\">\n    6\n  </Text>\n</VStack>\n```\n\nIn the above example:\n\n- The first `Text` is added to the **accented group**, and will be tinted with the accent color.\n- The second `Text` belongs to the **default group**, and will be tinted with the default (typically lighter) color.\n\n***\n\n## `widgetAccentedRenderingMode` (for `Image` components)\n\n### Description\n\nDefines how an `Image` should be rendered when displayed in **accented widget mode**. This modifier allows you to fine-tune how image content responds to system tinting.\n\n### Available Modes\n\n- `'accented'`: Renders the image as part of the **accented group**, using the accent color.\n- `'accentedDesaturated'`: Converts the image’s luminance to alpha and applies the accent color.\n- `'desaturated'`: Converts the image’s luminance to alpha and applies the default group color.\n- `'fullColor'`: Preserves the image’s original colors with no tinting — available only on iOS.\n\n### Usage\n\n```tsx\n<Image\n  filePath=\"/path/to/image.png\"\n  widgetAccentedRenderingMode=\"fullColor\"\n/>\n```\n\nThis ensures the image will retain its full color and not be affected by system tints — useful for branding elements or complex images where tinting would degrade clarity.\n\n***\n\n## `widgetBackground`\n\n### Description\n\nThe `widgetBackground` modifier allows you to define background colors or shapes in a way that automatically adapts to **accented mode**. When the widget is displayed in accented mode, the background is **automatically hidden** to avoid being forced into a white or unintended rendering by the system.\n\nThis modifier is especially important because iOS 18 **ignores background colors** in accented mode, unless transparency (`alpha`) is used. With `widgetBackground`, you can safely define decorative backgrounds without worrying about white overlays.\n\n### Supported Formats\n\nYou can use the following formats:\n\n#### Solid Color\n\n```tsx\n<Text widgetBackground=\"systemGray5\">\n  Hello\n</Text>\n```\n\n#### Dynamic Light/Dark Color\n\n```tsx\n<Text\n  widgetBackground={{\n    light: \"white\",\n    dark: \"black\"\n  }}\n>\n  Mode-aware Background\n</Text>\n```\n\n#### Shape with Style\n\n```tsx\n<Text\n  widgetBackground={{\n    style: \"systemGray6\",\n    shape: {\n      type: \"rect\",\n      cornerRadius: 12,\n      style: \"continuous\"\n    }\n  }}\n>\n  Shaped Background\n</Text>\n```\n\n### Notes\n\n- Background is hidden in **accented mode**.\n- Background is fully rendered in **default or full-color modes**.\n- Works seamlessly with `widgetAccentable` and layering effects.\n\n***\n\n## Behavior Notes (iOS 18+ Specific)\n\n- In **tinted mode**, **all colors (including background colors)** are ignored unless alpha is less than `1`. This means setting a solid background color will be rendered as white if not made semi-transparent.\n- Use `alpha` values to introduce visual hierarchy. For example, a fully opaque accentable element (`alpha = 1`) will be strongly tinted, while one with `alpha = 0.3` will appear more subtle.\n- **Do not rely on color values** directly for styling in accented widgets — use tint layering via the accent group instead.\n- **Use `widgetBackground`** instead of `background` when defining decorative backgrounds, to ensure proper behavior under accenting.\n\n***\n\n## Example\n\n```tsx\n<VStack\n  widgetBackground={{\n    style: \"systemGray6\",\n    shape: {\n      type: \"rect\",\n      cornerRadius: 12\n    }\n  }}\n  spacing={4}\n>\n  <Image\n    filePath=\"/path/to/icons/calendar.png\"\n    widgetAccentedRenderingMode=\"accentedDesaturated\"\n  />\n  <Text widgetAccentable font=\"caption\">\n    MON\n  </Text>\n  <Text font=\"title\">\n    6\n  </Text>\n</VStack>\n```\n\nThis layout:\n\n- Applies a rounded background that is visible only in non-accented modes.\n- Places the icon and weekday label in the **accented group**.\n- Leaves the date number in the **default group**.\n- Maintains consistent visual separation, even with iOS's tinting behavior.\n\n***\n\n## Tips\n\n- Use `widgetAccentable` to group multiple views into the accent layer — don’t apply it to the entire widget unless necessary.\n- For icons or logos, consider using `widgetAccentedRenderingMode=\"fullColor\"` if the image must retain its original branding.\n- Use `widgetBackground` in place of `background` to ensure backgrounds disappear cleanly in accented mode.\n- Use semi-transparent fills (`alpha < 1`) for layered effects that survive tint flattening.\n\n***\n\nThis setup ensures your widgets are fully optimized for iOS 18’s dynamic accenting system, while retaining control over visual composition and user experience.\n","routePath":"/doc/Widget/Tinted Mode Adaptation Guide","lang":"en","toc":[{"id":"widgetaccentable","text":"`widgetAccentable`","depth":2,"charIndex":475},{"id":"description","text":"Description","depth":3,"charIndex":498},{"id":"usage","text":"Usage","depth":3,"charIndex":1018},{"id":"widgetaccentedrenderingmode-for-image-components","text":"`widgetAccentedRenderingMode` (for `Image` components)","depth":2,"charIndex":1411},{"id":"description-1","text":"Description","depth":3,"charIndex":1470},{"id":"available-modes","text":"Available Modes","depth":3,"charIndex":1658},{"id":"usage-1","text":"Usage","depth":3,"charIndex":2062},{"id":"widgetbackground","text":"`widgetBackground`","depth":2,"charIndex":2347},{"id":"description-2","text":"Description","depth":3,"charIndex":2370},{"id":"supported-formats","text":"Supported Formats","depth":3,"charIndex":2940},{"id":"solid-color","text":"Solid Color","depth":4,"charIndex":2999},{"id":"dynamic-lightdark-color","text":"Dynamic Light/Dark Color","depth":4,"charIndex":3083},{"id":"shape-with-style","text":"Shape with Style","depth":4,"charIndex":3231},{"id":"notes","text":"Notes","depth":3,"charIndex":3444},{"id":"behavior-notes-ios-18-specific","text":"Behavior Notes (iOS 18+ Specific)","depth":2,"charIndex":3638},{"id":"example","text":"Example","depth":2,"charIndex":4343},{"id":"tips","text":"Tips","depth":2,"charIndex":5009}],"frontmatter":{},"version":"","description":"iOS 18 introduces a new widget rendering mode called accented mode, which tints the widget’s content using system-defined accent colors. To support this behavior in your widgets, the Scripting app provides three view modifiers: widgetAccentablewidgetAccentedRenderingModewidgetBackground These modifiers allow you to control which parts of your widget participate in the system’s accenting logic, enabling more expressive and adaptable designs."},{"title":"Widget API","content":"The `Widget` class provides static methods and properties to interact with home screen widgets created using the Scripting app. This API enables rendering widgets, handling configuration parameters, previewing widget layouts, and managing widget timelines.\n\n***\n\n## Class: `Widget`\n\nThis class cannot be instantiated. All its members are static.\n\n***\n\n### Properties\n\n#### `Widget.family: WidgetFamily`\n\nReturns the widget family configured by the user. The `WidgetFamily` determines the size and layout constraints of the widget.\nCommon values include:\n\n- `\"systemSmall\"` – small widget\n- `\"systemMedium\"` – medium widget\n- `\"systemLarge\"` – large widget\n- `\"accessoryRectangular\"` – Lock Screen rectangular widget\n- `\"accessoryCircular\"` – Lock Screen circular widget\n\n> **Type:** `WidgetFamily`\n\n***\n\n#### `Widget.displaySize: WidgetDisplaySize`\n\nReturns the widget’s display size in points (width and height), depending on its family and the device's screen.\n\n> **Type:** `{ width: number; height: number }`\n\n***\n\n#### `Widget.parameter: string`\n\nReturns the value of the parameter configured in the widget’s settings when the script is executed via a home screen widget tap.\nThis is useful for customizing widget content dynamically based on user-defined input.\n\n> **Type:** `string`\n\n***\n\n### Methods\n\n#### `Widget.present(element: VirtualNode, reloadPolicy?: WidgetReloadPolicy): void`\n\nRenders the widget UI using a React-like virtual node (`JSX.Element`).\nYou can optionally specify a reload policy to instruct the system when to request an updated timeline.\n\n##### Parameters\n\n- `element` (`VirtualNode`) – A JSX element representing the widget UI tree.\n- `reloadPolicy` (`WidgetReloadPolicy`, optional) – Specifies when WidgetKit should request a new timeline. Defaults to `atEnd`.\n\n##### Example\n\n```tsx\nfunction WidgetView() {\n  return <VStack>\n    <Image\n      systemName=\"globe\"\n      resizable\n      scaleToFit\n      frame={{\n        width: 28,\n        height: 28\n      }}\n    />\n    <Text>Hello Scripting!</Text>\n  </VStack>\n}\n\nWidget.present(<WidgetView />, {\n  policy: \"after\",\n  date: new Date(Date.now() + 1000 * 60 * 5) // 5 minutes later\n})\n```\n\n> **Returns:** `void`\n\n***\n\n#### `Widget.preview(options?: PreviewOptions): Promise<void>`\n\nPreviews the widget with the specified configuration. This method is available only in `index.tsx`, not in `widget.tsx` or `intent.tsx`.\n\n##### Parameters\n\n- `options` (optional) – Configuration for previewing the widget.\n\n```ts\ninterface PreviewOptions {\n  family?: WidgetFamily\n  parameters?: {\n    options: Record<string, string> // Map of parameter names to JSON stringified values\n    default: string                 // The default parameter key to use\n  }\n}\n```\n\n##### Example\n\n```tsx\nconst options = {\n  \"Param 1\": JSON.stringify({ color: \"red\" }),\n  \"Param 2\": JSON.stringify({ color: \"blue\" }),\n}\n\nawait Widget.preview({\n  family: \"systemSmall\",\n  parameters: {\n    options,\n    default: \"Param 1\"\n  }\n})\nconsole.log(\"Widget preview dismissed\")\n```\n\n> **Returns:** `Promise<void>`\n> Throws an error if parameters are not formatted correctly.\n\n***\n\n#### `Widget.reloadAll(): void`\n\nRequests WidgetKit to reload the timelines for **all** widgets created using the Scripting app.\nThis is useful when the data or appearance of widgets may have changed and needs to be refreshed.\n\n> **Returns:** `void`\n\n***\n\n## Related Types\n\n### `WidgetFamily`\n\nA string enum representing available widget sizes. Typical values:\n\n```ts\ntype WidgetFamily =\n  | \"systemSmall\"\n  | \"systemMedium\"\n  | \"systemLarge\"\n  | \"accessoryCircular\"\n  | \"accessoryRectangular\"\n```\n\n***\n\n### `WidgetDisplaySize`\n\nAn object representing the widget’s current width and height in points:\n\n```ts\ninterface WidgetDisplaySize {\n  width: number\n  height: number\n}\n```\n\n***\n\n### `WidgetReloadPolicy`\n\nAn object specifying when WidgetKit should request a new timeline:\n\n```ts\ntype WidgetReloadPolicy =\n  | { policy: \"atEnd\" } // Reload after the timeline ends (default)\n  | { policy: \"after\", date: Date } // Reload after a specific date\n```\n\n***\n\n## Usage Notes\n\n- `Widget.present` should be used inside `widget.tsx` to define and display the actual widget content.\n- `Widget.preview` is a development utility used in `index.tsx` to simulate how widgets look and behave with different parameters.\n- You must call `Script.exit()` at the end of the widget script to ensure proper lifecycle handling.\n- When using parameters, remember to parse `Widget.parameter` as JSON if it contains structured data.\n","routePath":"/doc/Widget/Widget API","lang":"en","toc":[{"id":"class-widget","text":"Class: `Widget`","depth":2,"charIndex":263},{"id":"properties","text":"Properties","depth":3,"charIndex":352},{"id":"widgetfamily-widgetfamily","text":"`Widget.family: WidgetFamily`","depth":4,"charIndex":368},{"id":"widgetdisplaysize-widgetdisplaysize","text":"`Widget.displaySize: WidgetDisplaySize`","depth":4,"charIndex":804},{"id":"widgetparameter-string","text":"`Widget.parameter: string`","depth":4,"charIndex":1018},{"id":"methods","text":"Methods","depth":3,"charIndex":1295},{"id":"widgetpresentelement-virtualnode-reloadpolicy-widgetreloadpolicy-void","text":"`Widget.present(element: VirtualNode, reloadPolicy?: WidgetReloadPolicy): void`","depth":4,"charIndex":1308},{"id":"widgetpreviewoptions-previewoptions-promisevoid","text":"`Widget.preview(options?: PreviewOptions): Promise<void>`","depth":4,"charIndex":2197},{"id":"widgetreloadall-void","text":"`Widget.reloadAll(): void`","depth":4,"charIndex":3118},{"id":"related-types","text":"Related Types","depth":2,"charIndex":3374},{"id":"widgetfamily","text":"`WidgetFamily`","depth":3,"charIndex":3392},{"id":"widgetdisplaysize","text":"`WidgetDisplaySize`","depth":3,"charIndex":3622},{"id":"widgetreloadpolicy","text":"`WidgetReloadPolicy`","depth":3,"charIndex":3801},{"id":"usage-notes","text":"Usage Notes","depth":2,"charIndex":4073}],"frontmatter":{},"version":"","description":"The Widget class provides static methods and properties to interact with home screen widgets created using the Scripting app. This API enables rendering widgets, handling configuration parameters, previewing widget layouts, and managing widget timelines."},{"title":"Widget Background in Tinted Mode","content":"The `widgetBackground` modifier is used to define background styles specifically for **widgets**, with behavior optimized for **iOS 18’s accented (tinted)** rendering mode.\n\n## Purpose\n\nIn **accented mode**, iOS displays nearly all view colors—including backgrounds—as white, unless the view is explicitly marked with `widgetAccentable`. This can cause unintended visual issues in widgets.\n\nThe `widgetBackground` modifier addresses this by:\n\n- **Automatically hiding the background** when the widget is displayed in accented mode.\n- **Rendering the background normally** in all other display modes (default or full-color).\n\nThis ensures your widget layout remains visually consistent and unaffected by system-imposed tinting rules.\n\n***\n\n## Supported Background Variants\n\nThe `widgetBackground` modifier accepts several input formats:\n\n### 1. **Solid Color (ShapeStyle)**\n\nApply a simple color to the background.\n\n```tsx\n<Text widgetBackground=\"systemBlue\">\n  Hello\n</Text>\n```\n\n***\n\n### 2. **Dynamic Color (DynamicShapeStyle)**\n\nApply different styles for light and dark modes.\n\n```tsx\n<Text\n  widgetBackground={{\n    light: \"white\",\n    dark: \"black\"\n  }}\n>\n  Mode-aware Background\n</Text>\n```\n\n***\n\n### 3. **Shape with Fill Style**\n\nUse a **shape** along with a **fill style**. This form provides structured and stylized backgrounds.\n\n```tsx\n<Text\n  widgetBackground={{\n    style: \"systemGray6\",\n    shape: {\n      type: \"rect\",\n      cornerRadius: 12,\n      style: \"continuous\"\n    }\n  }}\n>\n  Rounded Background\n</Text>\n```\n\nYou may use any supported built-in or custom shape types, such as:\n\n- `'rect'`, `'circle'`, `'capsule'`, `'ellipse'`, `'buttonBorder'`, `'containerRelative'`\n- Custom rounded rectangles with `cornerRadius`, `cornerSize`, or `cornerRadii`\n\n***\n\n## Behavior in Accented Mode\n\n- **In accented (tinted) mode**: The background is **automatically hidden** to prevent it from rendering as solid white.\n- **In default and full-color modes**: The background displays as defined.\n\nThis conditional behavior ensures better design control and visual integrity across widget contexts.\n\n***\n\n## Best Practices\n\n- Use `widgetBackground` only in **widget-specific views**.\n- Do not use it for essential visual meaning, since the background may be hidden in accented mode.\n- Combine it with `widgetAccentable` to precisely control which parts of the widget are subject to system tinting.\n","routePath":"/doc/Widget/Widget Background in Tinted Mode","lang":"en","toc":[{"id":"purpose","text":"Purpose","depth":2,"charIndex":174},{"id":"supported-background-variants","text":"Supported Background Variants","depth":2,"charIndex":739},{"id":"1-solid-color-shapestyle","text":"1. **Solid Color (ShapeStyle)**","depth":3,"charIndex":837},{"id":"2-dynamic-color-dynamicshapestyle","text":"2. **Dynamic Color (DynamicShapeStyle)**","depth":3,"charIndex":985},{"id":"3-shape-with-fill-style","text":"3. **Shape with Fill Style**","depth":3,"charIndex":1203},{"id":"behavior-in-accented-mode","text":"Behavior in Accented Mode","depth":2,"charIndex":1774},{"id":"best-practices","text":"Best Practices","depth":2,"charIndex":2108}],"frontmatter":{},"version":"","description":"The widgetBackground modifier is used to define background styles specifically for widgets, with behavior optimized for iOS 18’s accented (tinted) rendering mode."},{"title":"Widget Quick Start","content":"**Scripting** is an app that allows you to create iOS Home Screen widgets using **TypeScript** and React-like **TSX** syntax.\nYou can define your widget’s UI inside a `widget.tsx` file using SwiftUI-inspired components.\n\n***\n\n## 1. Quick Start\n\n### Step 1: Create a Script Project\n\n1. Open the **Scripting** app.\n2. Create a new script project and give your widget a name.\n\n### Step 2: Add a `widget.tsx` File\n\n1. In the project, create a new file named `widget.tsx`.\n2. Define your widget’s interface using a functional component.\n3. Import the required components and APIs from the `scripting` package.\n\n#### Example:\n\n```tsx\n// widget.tsx\n\n\nfunction MyWidgetView() {\n  return (\n    <VStack>\n      <Text>Hello world</Text>\n    </VStack>\n  )\n}\n\nWidget.present(<MyWidgetView />)\n```\n\nCalling `Widget.present()` renders the widget on the Home Screen.\n\n***\n\n## 2. Accessing the Widget Context\n\nYou can use the following `Widget` API properties to adapt layout and content:\n\n| Property             | Description                                                                      |\n| -------------------- | -------------------------------------------------------------------------------- |\n| `Widget.displaySize` | The actual pixel size of the widget at runtime.                                  |\n| `Widget.family`      | The widget size: `'small'`, `'medium'`, or `'large'`.                            |\n| `Widget.parameter`   | The user-defined custom parameter configured in the Home Screen widget settings. |\n\nThese properties help you dynamically adjust content and layout based on the widget’s size or user preferences.\n\n***\n\n## 3. Add to Home Screen\n\n1. Add the **Scripting** widget to your iOS Home Screen.\n2. Long-press the widget and tap **Edit Widget**.\n3. Select the script you created and configure its **Parameter** if needed.\n\nOnce configured, the UI defined in your `widget.tsx` file will appear directly on the Home Screen.\n\n***\n\n## 4. Building the View\n\nUse SwiftUI-inspired built-in components such as `VStack`, `HStack`, `Text`, and `Image` to compose your widget UI.\nYou can also separate logic and UI across multiple files and import them as needed.\n\n***\n\n## 5. Development Constraints and Best Practices\n\n### Hooks Are Not Active in Widgets\n\nWhile you can technically use React hooks such as `useState` or `useEffect`, they **don’t take effect** inside widgets because widgets are **rendered once** and have no persistent interactive lifecycle.\nAvoid relying on dynamic state logic.\n\n### Memory Limit\n\niOS enforces an approximate **30 MB memory limit** per widget. To stay within it:\n\n- Avoid deep view hierarchies.\n- Minimize image usage.\n- Avoid memory leaks or large data references.\n\nIf a widget fails to render or appears blank, it’s often due to exceeding this limit.\n\n### Context Is Immediately Destroyed\n\nAfter calling `Widget.present(...)`, the current execution context is **immediately destroyed**:\n\n- Prepare all data before calling `Widget.present()`.\n- Do not place code after `Widget.present()`, as it will never run.\n- Treat the widget function as a one-time UI renderer.\n\n***\n\n## 6. Interaction Support\n\nAlthough widgets are mostly static, **basic interactivity** can be achieved via **AppIntent**:\n\n- Use `<Button>` or `<Toggle>` components to trigger AppIntents.\n- See the **Interactive Widget** and **LiveActivity** documentation for more details.\n\n***\n\n## 7. View Compatibility\n\n**Not all SwiftUI views are supported** in WidgetKit.\nSome layout containers and visual effects are unavailable.\nRefer to Apple’s official documentation: [Supported SwiftUI views in WidgetKit]().\n\n***\n\n## 8. Widget Preview Limitations\n\nWidget previews inside the **Scripting** app are only **approximations**.\nThe actual rendering on the Home Screen may differ slightly in:\n\n- Text alignment\n- Widget size\n- Corner radius\n- Layout behavior\n\nAlways **test on the Home Screen** to verify the final layout.\n\n***\n\n## 9. Refreshing Widgets\n\n### General Refresh Methods\n\n- Call `Widget.reloadAll()` to refresh **all** widgets (both user and developer kinds).\n- You can invoke it in `index.tsx` or inside an AppIntent.\n- Alternatively, use the **Refresh Widgets** button in the Scripting app during development.\n\nThis enables rapid iteration on layout and logic.\n\n***\n\n### New: User Widgets vs Developer Widgets\n\nScripting now distinguishes between two kinds of widgets:\n\n| Type             | Description                                                                  |\n| ---------------- | ---------------------------------------------------------------------------- |\n| **User Widgets** | Regular widgets intended for end-users to add and use on the Home Screen.    |\n| **Test Widgets** | Developer-only widgets used for debugging and previewing during development. |\n\nEach kind has its own `kind` identifier, allowing isolation between user and developer widgets.\nThis ensures that refreshing test widgets doesn’t affect the user’s actual widgets.\n\n***\n\n### New Refresh Methods\n\n| Method                       | Description                                                                         |\n| ---------------------------- | ----------------------------------------------------------------------------------- |\n| `Widget.reloadUserWidgets()` | Refreshes **User Widgets only**, without affecting any developer Test Widgets.      |\n| `Widget.reloadTestWidgets()` | Refreshes **Test Widgets only**, without affecting user widgets on the Home Screen. |\n\nThese methods were introduced to **isolate user and developer environments**.\nWhen developing, refreshing Test Widgets won’t disturb any user widgets already installed.\n\n#### Example\n\n```tsx\n// During development\nawait Widget.reloadTestWidgets()\n\n// When publishing or updating user widgets\nawait Widget.reloadUserWidgets()\n```\n\n#### Usage Recommendations\n\n- **During development:** use `Widget.reloadTestWidgets()` for testing.\n- **For production or user updates:** use `Widget.reloadUserWidgets()` or `Widget.reloadAll()`.\n\nThis separation helps prevent interference between development experiments and user-facing widgets.\n\n***\n\n## 10. Documentation and Support\n\n- Refer to the **Views Documentation** for a complete list of available components and modifiers.\n- Check the **API Documentation** for advanced integrations (e.g., Calendar, FileManager, AVPlayer, etc.).\n\n***\n\n## 11. Using `Widget.preview` for In-App Development Preview\n\nDuring development, you can use `Widget.preview()` in your `index.tsx` to preview layout and parameter configurations **without leaving the app**.\n\n### Method: `Widget.preview(options)`\n\nThis method simulates widget rendering for various sizes and parameters, suitable for **development-only testing**.\nIt can **only** be called from the **`index.tsx` environment** (not from `widget.tsx` or `intent.tsx`).\n\n### Parameters\n\n| Property             | Type                     | Description                                                               |                 |                                                               |\n| -------------------- | ------------------------ | ------------------------------------------------------------------------- | --------------- | ------------------------------------------------------------- |\n| `family`             | `'systemSmall'`          | `'systemMedium'`                                                          | `'systemLarge'` | Optional. The preview widget size (default: `'systemSmall'`). |\n| `parameters.options` | `Record<string, string>` | Key–value map of parameter options. Values must be JSON-parsable strings. |                 |                                                               |\n| `parameters.default` | `string`                 | Specifies which parameter option to use by default.                       |                 |                                                               |\n\n### Example\n\n```tsx\nconst options = {\n  \"Param 1\": JSON.stringify({ color: \"red\" }),\n  \"Param 2\": JSON.stringify({ color: \"blue\" }),\n}\n\nawait Widget.preview({\n  family: \"systemSmall\",\n  parameters: {\n    options,\n    default: \"Param 1\"\n  }\n})\nconsole.log(\"Widget preview dismissed\")\n```\n\nThis allows testing visual differences under different parameter inputs such as colors, text, or layout configurations.\n\n### Notes\n\n- Must be called **from `index.tsx`** — not from `widget.tsx` or `intent.tsx`.\n- If the parameter format is invalid, an error will be thrown.\n- Preview results are still subject to the [limitations listed in Section 8](); always verify the final look on the Home Screen.\n","routePath":"/doc/Widget/Widget Quick Start","lang":"en","toc":[{"id":"1-quick-start","text":"1. Quick Start","depth":2,"charIndex":226},{"id":"step-1-create-a-script-project","text":"Step 1: Create a Script Project","depth":3,"charIndex":245},{"id":"step-2-add-a-widgettsx-file","text":"Step 2: Add a `widget.tsx` File","depth":3,"charIndex":374},{"id":"example","text":"Example:","depth":4,"charIndex":606},{"id":"2-accessing-the-widget-context","text":"2. Accessing the Widget Context","depth":2,"charIndex":856},{"id":"3-add-to-home-screen","text":"3. Add to Home Screen","depth":2,"charIndex":1631},{"id":"4-building-the-view","text":"4. Building the View","depth":2,"charIndex":1946},{"id":"5-development-constraints-and-best-practices","text":"5. Development Constraints and Best Practices","depth":2,"charIndex":2177},{"id":"hooks-are-not-active-in-widgets","text":"Hooks Are Not Active in Widgets","depth":3,"charIndex":2227},{"id":"memory-limit","text":"Memory Limit","depth":3,"charIndex":2506},{"id":"context-is-immediately-destroyed","text":"Context Is Immediately Destroyed","depth":3,"charIndex":2797},{"id":"6-interaction-support","text":"6. Interaction Support","depth":2,"charIndex":3116},{"id":"7-view-compatibility","text":"7. View Compatibility","depth":2,"charIndex":3396},{"id":"8-widget-preview-limitations","text":"8. Widget Preview Limitations","depth":2,"charIndex":3624},{"id":"9-refreshing-widgets","text":"9. Refreshing Widgets","depth":2,"charIndex":3932},{"id":"general-refresh-methods","text":"General Refresh Methods","depth":3,"charIndex":3958},{"id":"new-user-widgets-vs-developer-widgets","text":"New: User Widgets vs Developer Widgets","depth":3,"charIndex":4284},{"id":"new-refresh-methods","text":"New Refresh Methods","depth":3,"charIndex":4974},{"id":"example-1","text":"Example","depth":4,"charIndex":5646},{"id":"usage-recommendations","text":"Usage Recommendations","depth":4,"charIndex":5805},{"id":"10-documentation-and-support","text":"10. Documentation and Support","depth":2,"charIndex":6108},{"id":"11-using-widgetpreview-for-in-app-development-preview","text":"11. Using `Widget.preview` for In-App Development Preview","depth":2,"charIndex":6353},{"id":"method-widgetpreviewoptions","text":"Method: `Widget.preview(options)`","depth":3,"charIndex":6563},{"id":"parameters","text":"Parameters","depth":3,"charIndex":6823},{"id":"example-2","text":"Example","depth":3,"charIndex":7890},{"id":"notes","text":"Notes","depth":3,"charIndex":8299}],"frontmatter":{},"version":"","description":"Scripting is an app that allows you to create iOS Home Screen widgets using TypeScript and React-like TSX syntax.\nYou can define your widget’s UI inside a widget.tsx file using SwiftUI-inspired components."},{"title":"Privacy Policy","content":"## Introduction\n\nWelcome to Scripting! Your privacy is important to us. This Privacy Policy explains how your data is handled when you use our app.\n\n## No Data Collection\n\nThe Scripting app does not collect or store any personal data. All activities and data generated through the app remain on your device.\n\n## Voluntary Communication\n\nIf you choose to contact us via email, we may receive and store the information you provide, such as your name, email address, and any message content. This information is used solely to respond to your inquiry and will not be shared with third parties.\n\n## Third-Party Integrations\n\nThe Scripting app may interact with third-party services, such as the Shortcuts app or other integrations on your device. Any data shared through these integrations is managed entirely by those services and is not collected by us.\n\nWhen you use Third-Party Model Integration features, the provided API Key is stored locally on the device and is only used to send and receive requests to the AI model for your tasks. The app does not collect, transmit, or use the API Key for any other purpose.\n\n## Health Data and HealthKit\n\nScripting provides an optional interface to Apple’s HealthKit framework, allowing scripts you write to read from and write to your Health data on device. We respect your privacy and have designed this feature so that:\n\n### No Storage or Analysis\n\nScripting does not collect, transmit, analyze, or store any of your HealthKit data. All health-related operations occur entirely within your device.\n\n### User Control & Consent\n\nAccess to your Health data is controlled by you. Whenever a script requests permission to read or write HealthKit samples, iOS will prompt you to grant or deny that permission. You remain in full control and can revoke access at any time in your system Settings.\n\n### Script-Only Access\n\nHealthKit permissions granted are scoped only to the scripts you run within Scripting. Neither the app itself nor its developers can access your Health data outside of those scripts.\n\n### Transparency\n\nAny script that uses HealthKit APIs must explicitly request the types of data it needs. You can review those requests before granting permission, ensuring you know exactly which health metrics are involved.\n\n## Data Security\n\nAs the Scripting app does not collect or store data, there is no risk of unauthorized access to your personal information. Any data shared voluntarily via email will be handled with care and securely stored.\n\n## Changes to This Privacy Policy\n\nWe may update this Privacy Policy from time to time. Any changes will be posted on this page, and the \"Last Updated\" date will be revised accordingly.\n\n## Contact Us\n\nIf you have any questions or concerns about this Privacy Policy, please reach out to us at:\n\nEmail: [tilfon@live.com]()\n","routePath":"/privacy/policy","lang":"en","toc":[{"id":"introduction","text":"Introduction","depth":2,"charIndex":0},{"id":"no-data-collection","text":"No Data Collection","depth":2,"charIndex":149},{"id":"voluntary-communication","text":"Voluntary Communication","depth":2,"charIndex":309},{"id":"third-party-integrations","text":"Third-Party Integrations","depth":2,"charIndex":592},{"id":"health-data-and-healthkit","text":"Health Data and HealthKit","depth":2,"charIndex":1116},{"id":"no-storage-or-analysis","text":"No Storage or Analysis","depth":3,"charIndex":1365},{"id":"user-control--consent","text":"User Control & Consent","depth":3,"charIndex":1543},{"id":"script-only-access","text":"Script-Only Access","depth":3,"charIndex":1835},{"id":"transparency","text":"Transparency","depth":3,"charIndex":2043},{"id":"data-security","text":"Data Security","depth":2,"charIndex":2269},{"id":"changes-to-this-privacy-policy","text":"Changes to This Privacy Policy","depth":2,"charIndex":2496},{"id":"contact-us","text":"Contact Us","depth":2,"charIndex":2683}],"frontmatter":{"title":"Privacy Policy"},"version":""},{"title":"Terms of Service & EULA","content":"## General\n\nWelcome to the Scripting App! Before using this application, please read this agreement carefully. This agreement applies to all users of the application, including free users and Scripting Pro users.\n\n## End-User License Agreement (EULA)\n\n- **License Scope:** You are granted a non-exclusive, non-transferable license for personal use only.\n\n- **Intellectual Property:** All content, designs, and code of this application belong to the developer and are protected by law.\n\n- **Prohibited Actions:** You may not reverse engineer, modify, or distribute this application.\n\n- **Termination:** We reserve the right to terminate your use of this application if you violate the terms.\n\n## Terms of Service\n\n- **Service Description:** This application provides a script development environment and advanced features (e.g., custom themes, code templates).\n  Subscription Plans:\n\n- **One-time purchase:** Unlock all features with lifetime validity.\n  - Monthly and annual subscriptions: Automatically renew services.\n\n  - Purchase and Confirmation: You can confirm the purchase of the Scripting Pro subscription via your iTunes account. Payment will be charged to your iTunes account upon confirmation of purchase.\n\n- **Canceling Subscriptions:** You can cancel your subscriptions anytime through your iTunes account settings. To avoid auto-renewal, the subscription must be canceled at least 24 hours before the current subscription period ends. If not canceled within this time frame, the subscription will auto-renew.\n\n- **Renewals and Charges:** Within 24 hours before the end of the current subscription period, the subscription will automatically renew, and the associated fee will be charged to your iTunes account. The renewal fee will match the initial subscription price unless you have changed the subscription plan.\n\n- **Free Trial Notice:** After the free trial period ends, the subscription will automatically renew into a paid plan, and the corresponding fee will be charged to your iTunes account. If you do not cancel during the trial period, it will be deemed that you accept the subscription terms.\n\n- **Third-Party Model Integration:** Scripting App acts as a bridge to external AI models, relying entirely on the user-provided API Key to interact with these services (e.g., OpenAI GPT). All AI-related interactions comply with the third-party model provider’s terms of use.\n\n- **Privacy Policy:** For more details, please refer to our [Privacy Policy]()\n\n## Limitation of Liability\n\nThis application is provided \"as is,\" and the developer is not responsible for any direct or indirect losses arising from the use of this application.\n\n## Dispute Resolution and Governing Law\n\n- **Governing Law:** This agreement is governed by the laws of your jurisdiction.\n\n- **Dispute Resolution:** Both parties should resolve disputes amicably, and unresolved issues shall be handled in accordance with the law.\n\n## Contact Us\n\nIf you have any questions, please contact us via:\n\nEmail: [tilfon@live.com]()\n\nWebsite: scripting.fun\n","routePath":"/privacy/service","lang":"en","toc":[{"id":"general","text":"General","depth":2,"charIndex":0},{"id":"end-user-license-agreement-eula","text":"End-User License Agreement (EULA)","depth":2,"charIndex":214},{"id":"terms-of-service","text":"Terms of Service","depth":2,"charIndex":692},{"id":"limitation-of-liability","text":"Limitation of Liability","depth":2,"charIndex":2479},{"id":"dispute-resolution-and-governing-law","text":"Dispute Resolution and Governing Law","depth":2,"charIndex":2659},{"id":"contact-us","text":"Contact Us","depth":2,"charIndex":2924}],"frontmatter":{"title":"Terms of Service & EULA"},"version":""}]