"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["23431"],{68026(e,s,r){r.r(s),r.d(s,{default:()=>d});var n=r(74848),i=r(28453);function o(e){let s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"CustomKeyboard"})," 是 Scripting 提供的全局命名空间，用于开发 iOS 自定义键盘扩展。在 ",(0,n.jsx)(s.code,{children:"keyboard.tsx"})," 脚本中使用该 API，可以渲染自定义键盘 UI，并访问当前输入状态、插入文本、控制光标、监听输入事件、调整高度，并在多个脚本之间导航切换。"]}),"\n",(0,n.jsxs)(s.h2,{id:"一使用环境与前提",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#一使用环境与前提",children:"#"}),"一、使用环境与前提"]}),"\n",(0,n.jsxs)(s.h3,{id:"环境要求",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#环境要求",children:"#"}),"环境要求"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["必须在脚本项目中创建名为 ",(0,n.jsx)(s.strong,{children:(0,n.jsx)(s.code,{children:"keyboard.tsx"})})," 的文件；"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["所有 ",(0,n.jsx)(s.code,{children:"CustomKeyboard"})," 方法 ",(0,n.jsx)(s.strong,{children:"仅可在键盘扩展环境中使用"}),"；"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["在 ",(0,n.jsxs)(s.strong,{children:["App 脚本、Intent (",(0,n.jsx)(s.code,{children:"intent.tsx"}),")、小组件 (",(0,n.jsx)(s.code,{children:"widget.tsx"}),") 中无法使用此 API"]}),"；"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"系统设置路径："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"txt",children:(0,n.jsx)(s.code,{children:(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"设置 > 通用 > 键盘 > 键盘 > 添加新键盘 > 选择 Scripting"})})})})}),"\n",(0,n.jsxs)(s.p,{children:["添加后，进入 Scripting 键盘详情页，开启 ",(0,n.jsx)(s.strong,{children:"允许完全访问"}),"，以启用网络请求、剪贴板访问等高级功能。"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"二展示键盘-ui",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#二展示键盘-ui",children:"#"}),"二、展示键盘 UI"]}),"\n",(0,n.jsxs)(s.h3,{id:"presentnode-virtualnode-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#presentnode-virtualnode-void",children:"#"}),(0,n.jsx)(s.code,{children:"present(node: VirtualNode): void"})]}),"\n",(0,n.jsxs)(s.p,{children:["用于展示自定义键盘界面。必须在 ",(0,n.jsx)(s.code,{children:"keyboard.tsx"})," 中调用一次。"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"() {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">你好，世界</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".present"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />)"})]})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"三输入状态查询",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#三输入状态查询",children:"#"}),"三、输入状态查询"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"属性名"}),(0,n.jsx)(s.th,{children:"类型"}),(0,n.jsx)(s.th,{children:"说明"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textBeforeCursor"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<string | null>"})}),(0,n.jsx)(s.td,{children:"光标前的文本"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textAfterCursor"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<string | null>"})}),(0,n.jsx)(s.td,{children:"光标后的文本"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"selectedText"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<string | null>"})}),(0,n.jsx)(s.td,{children:"当前选中的文本（如有）"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"hasText"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<boolean>"})}),(0,n.jsx)(s.td,{children:"输入框是否包含文本内容"})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"四输入特征traits",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#四输入特征traits",children:"#"}),"四、输入特征（traits）"]}),"\n",(0,n.jsxs)(s.h3,{id:"usetraits-textinputtraits",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#usetraits-textinputtraits",children:"#"}),(0,n.jsx)(s.code,{children:"useTraits(): TextInputTraits"})]}),"\n",(0,n.jsxs)(s.p,{children:["获取当前输入框的系统特征（如键盘类型、返回键样式等）。值在 ",(0,n.jsx)(s.code,{children:"textDidChange"})," 和 ",(0,n.jsx)(s.code,{children:"selectionDidChange"})," 事件中自动更新。"]}),"\n",(0,n.jsxs)(s.h3,{id:"traits-textinputtraits",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#traits-textinputtraits",children:"#"}),(0,n.jsx)(s.code,{children:"traits: TextInputTraits"})]}),"\n",(0,n.jsxs)(s.p,{children:["为静态快照，不会自动更新。建议在组件中使用 ",(0,n.jsx)(s.code,{children:"useTraits()"}),"。"]}),"\n",(0,n.jsx)(s.p,{children:"常见字段包括："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"keyboardType"}),"：如 ",(0,n.jsx)(s.code,{children:"'default'"}),", ",(0,n.jsx)(s.code,{children:"'emailAddress'"}),", ",(0,n.jsx)(s.code,{children:"'numberPad'"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"returnKeyType"}),"：如 ",(0,n.jsx)(s.code,{children:"'done'"}),", ",(0,n.jsx)(s.code,{children:"'go'"}),", ",(0,n.jsx)(s.code,{children:"'search'"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"textContentType"}),"：如 ",(0,n.jsx)(s.code,{children:"'username'"}),", ",(0,n.jsx)(s.code,{children:"'password'"}),", ",(0,n.jsx)(s.code,{children:"'oneTimeCode'"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"keyboardAppearance"}),"：",(0,n.jsx)(s.code,{children:"'light'"}),", ",(0,n.jsx)(s.code,{children:"'dark'"})," 等"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"五文本操作",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#五文本操作",children:"#"}),"五、文本操作"]}),"\n",(0,n.jsxs)(s.h3,{id:"inserttexttext-string-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#inserttexttext-string-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"insertText(text: string): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"在光标处插入文本。"}),"\n",(0,n.jsxs)(s.h3,{id:"deletebackward-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#deletebackward-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"deleteBackward(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"删除光标前的一个字符。"}),"\n",(0,n.jsxs)(s.h3,{id:"movecursoroffset-number-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#movecursoroffset-number-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"moveCursor(offset: number): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"移动光标位置。负数为向左，正数为向右。"}),"\n",(0,n.jsxs)(s.h3,{id:"setmarkedtexttext-location-length-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#setmarkedtexttext-location-length-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"setMarkedText(text, location, length): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"设置标记文本（用于拼音输入等组合输入）。"}),"\n",(0,n.jsxs)(s.h3,{id:"unmarktext-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#unmarktext-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"unmarkText(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"取消当前标记文本。"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"六键盘行为控制",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#六键盘行为控制",children:"#"}),"六、键盘行为控制"]}),"\n",(0,n.jsxs)(s.h3,{id:"dismiss-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dismiss-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"dismiss(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"关闭键盘。"}),"\n",(0,n.jsxs)(s.h3,{id:"nextkeyboard-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#nextkeyboard-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"nextKeyboard(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"切换至系统中的下一个键盘。"}),"\n",(0,n.jsxs)(s.h3,{id:"requestheightheight-number-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#requestheightheight-number-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"requestHeight(height: number): Promise<void>"})]}),"\n",(0,n.jsxs)(s.p,{children:["请求调整键盘高度（单位为 pt）。推荐范围为 ",(0,n.jsx)(s.strong,{children:"216~360pt"}),"，超出范围可能被系统忽略。"]}),"\n",(0,n.jsxs)(s.h3,{id:"sethasdictationkeyvalue-boolean-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#sethasdictationkeyvalue-boolean-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"setHasDictationKey(value: boolean): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"设置是否显示语音输入按钮（麦克风图标）。"}),"\n",(0,n.jsxs)(s.h3,{id:"settoolbarvisiblevisible-boolean-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#settoolbarvisiblevisible-boolean-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"setToolbarVisible(visible: boolean): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"控制顶部工具栏的显示/隐藏。默认显示，适用于调试等场景。"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"七导航控制",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#七导航控制",children:"#"}),"七、导航控制"]}),"\n",(0,n.jsxs)(s.h3,{id:"dismisstohome-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dismisstohome-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"dismissToHome(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"关闭当前键盘脚本，返回 Scripting 键盘首页（脚本列表）。适用于用户在多个脚本之间自由切换的场景。"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".dismissToHome"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]})})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"八用户反馈",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#八用户反馈",children:"#"}),"八、用户反馈"]}),"\n",(0,n.jsxs)(s.h3,{id:"playinputclick-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#playinputclick-void",children:"#"}),(0,n.jsx)(s.code,{children:"playInputClick(): void"})]}),"\n",(0,n.jsx)(s.p,{children:"播放标准键盘按键音，建议在模拟按键操作时调用，提升交互体验。"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".playInputClick"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]})})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"九事件监听",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#九事件监听",children:"#"}),"九、事件监听"]}),"\n",(0,n.jsxs)(s.h3,{id:"addlistenerevent-callback-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#addlistenerevent-callback-void",children:"#"}),(0,n.jsx)(s.code,{children:"addListener(event, callback): void"})]}),"\n",(0,n.jsx)(s.p,{children:"注册事件监听器："}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"事件名"}),(0,n.jsx)(s.th,{children:"回调参数"}),(0,n.jsx)(s.th,{children:"说明"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textWillChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"() => void"})}),(0,n.jsx)(s.td,{children:"文本将要变更"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textDidChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"(traits: TextInputTraits) => void"})}),(0,n.jsx)(s.td,{children:"文本已变更"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"selectionWillChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"() => void"})}),(0,n.jsx)(s.td,{children:"光标将变更"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"selectionDidChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"(traits: TextInputTraits) => void"})}),(0,n.jsx)(s.td,{children:"光标已变更"})]})]})]}),"\n",(0,n.jsxs)(s.h3,{id:"removelistenerevent-callback-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#removelistenerevent-callback-void",children:"#"}),(0,n.jsx)(s.code,{children:"removeListener(event, callback): void"})]}),"\n",(0,n.jsx)(s.p,{children:"移除指定监听器。"}),"\n",(0,n.jsxs)(s.h3,{id:"removealllistenersevent-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#removealllistenersevent-void",children:"#"}),(0,n.jsx)(s.code,{children:"removeAllListeners(event): void"})]}),"\n",(0,n.jsx)(s.p,{children:"移除指定事件的所有监听器。"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"十完整示例",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#十完整示例",children:"#"}),"十、完整示例"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"() {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" traits"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".useTraits"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" insert"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" async"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".playInputClick"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    await"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".insertText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(text)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" spacing"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"12"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">输入类型：{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"traits"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".keyboardType}</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"HStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" spacing"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"10"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"你"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" insert"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"你"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"好"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" insert"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"好"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"← 删除"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".deleteBackward"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"返回首页"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".dismissToHome"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"HStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".present"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />)"})]})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"十一开发建议",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#十一开发建议",children:"#"}),"十一、开发建议"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsxs)(s.strong,{children:["必须调用 ",(0,n.jsx)(s.code,{children:"present()"})," 并且仅调用一次"]}),"；"]}),"\n",(0,n.jsx)(s.li,{children:"合理设置键盘高度，避免 UI 被遮挡；"}),"\n",(0,n.jsxs)(s.li,{children:["使用 ",(0,n.jsx)(s.code,{children:"useTraits()"})," 获取输入上下文信息；"]}),"\n",(0,n.jsxs)(s.li,{children:["调用 ",(0,n.jsx)(s.code,{children:"dismissToHome()"})," 可以让用户在多个键盘脚本之间切换；"]}),"\n",(0,n.jsxs)(s.li,{children:["通过 ",(0,n.jsx)(s.code,{children:"playInputClick()"})," 提升按键交互体验；"]}),"\n",(0,n.jsxs)(s.li,{children:["删除文本前请先判断 ",(0,n.jsx)(s.code,{children:"hasText"})," 是否为 true；"]}),"\n",(0,n.jsx)(s.li,{children:"监听事件时注意避免重复注册和内存泄漏；"}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["v2.4.6%2Fzh%2Fguide%2FCustom%20Keyboard.md"]={toc:[{id:"一使用环境与前提",text:"一、使用环境与前提",depth:2},{id:"环境要求",text:"环境要求",depth:3},{id:"二展示键盘-ui",text:"二、展示键盘 UI",depth:2},{id:"presentnode-virtualnode-void",text:"`present(node: VirtualNode): void`",depth:3},{id:"三输入状态查询",text:"三、输入状态查询",depth:2},{id:"四输入特征traits",text:"四、输入特征（traits）",depth:2},{id:"usetraits-textinputtraits",text:"`useTraits(): TextInputTraits`",depth:3},{id:"traits-textinputtraits",text:"`traits: TextInputTraits`",depth:3},{id:"五文本操作",text:"五、文本操作",depth:2},{id:"inserttexttext-string-promisevoid",text:"`insertText(text: string): Promise<void>`",depth:3},{id:"deletebackward-promisevoid",text:"`deleteBackward(): Promise<void>`",depth:3},{id:"movecursoroffset-number-promisevoid",text:"`moveCursor(offset: number): Promise<void>`",depth:3},{id:"setmarkedtexttext-location-length-promisevoid",text:"`setMarkedText(text, location, length): Promise<void>`",depth:3},{id:"unmarktext-promisevoid",text:"`unmarkText(): Promise<void>`",depth:3},{id:"六键盘行为控制",text:"六、键盘行为控制",depth:2},{id:"dismiss-promisevoid",text:"`dismiss(): Promise<void>`",depth:3},{id:"nextkeyboard-promisevoid",text:"`nextKeyboard(): Promise<void>`",depth:3},{id:"requestheightheight-number-promisevoid",text:"`requestHeight(height: number): Promise<void>`",depth:3},{id:"sethasdictationkeyvalue-boolean-promisevoid",text:"`setHasDictationKey(value: boolean): Promise<void>`",depth:3},{id:"settoolbarvisiblevisible-boolean-promisevoid",text:"`setToolbarVisible(visible: boolean): Promise<void>`",depth:3},{id:"七导航控制",text:"七、导航控制",depth:2},{id:"dismisstohome-promisevoid",text:"`dismissToHome(): Promise<void>`",depth:3},{id:"八用户反馈",text:"八、用户反馈",depth:2},{id:"playinputclick-void",text:"`playInputClick(): void`",depth:3},{id:"九事件监听",text:"九、事件监听",depth:2},{id:"addlistenerevent-callback-void",text:"`addListener(event, callback): void`",depth:3},{id:"removelistenerevent-callback-void",text:"`removeListener(event, callback): void`",depth:3},{id:"removealllistenersevent-void",text:"`removeAllListeners(event): void`",depth:3},{id:"十完整示例",text:"十、完整示例",depth:2},{id:"十一开发建议",text:"十一、开发建议",depth:2}],title:"自定义键盘",headingTitle:"",frontmatter:{title:"自定义键盘",description:"创建具有独特布局和功能的自定义键盘。",tag:"PRO"}}}}]);