"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["15099"],{8150(n,s,e){e.r(s),e.d(s,{default:()=>c});var r=e(74848),i=e(28453);function l(n){let s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"matchedTransitionSource"})," 用于 ",(0,r.jsx)(s.strong,{children:"标记某个视图作为“导航转场动画的几何源视图”"}),"，使该视图在页面跳转时可以作为："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"缩放动画的起点"}),"\n",(0,r.jsx)(s.li,{children:"位置过渡的起点"}),"\n",(0,r.jsx)(s.li,{children:"共享几何动画的起始帧"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["该能力对应 SwiftUI 中的 ",(0,r.jsx)(s.code,{children:"matchedTransitionSource"}),"，主要用于："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"页面级导航动画"}),"\n",(0,r.jsx)(s.li,{children:"Zoom（缩放）转场"}),"\n",(0,r.jsx)(s.li,{children:"Hero 动画（共享元素转场）"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["它 ",(0,r.jsx)(s.strong,{children:"只用于导航转场"}),"，不用于组件级几何联动（组件级联动应使用 ",(0,r.jsx)(s.code,{children:"matchedGeometryEffect"}),"）。"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"一api-定义",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#一api-定义",children:"#"}),"一、API 定义"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(s.code,{children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"/**"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" * Identifies this view as the source of a navigation transition, such as a zoom transition."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" * "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"@available"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" iOS 18.0+"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:" */"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"matchedTransitionSource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" string "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" number"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  namespace: NamespaceID"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"二核心作用",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#二核心作用",children:"#"}),"二、核心作用"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"matchedTransitionSource"})," 的核心作用是："]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"在一次导航跳转中，指定“从哪个视图开始做几何过渡动画”。"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"它解决的问题是："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"页面跳转时视图“瞬间消失 + 新页面突然出现”的割裂感"}),"\n",(0,r.jsx)(s.li,{children:"图片、卡片、头像等元素在跳转时缺乏空间连续性"}),"\n",(0,r.jsx)(s.li,{children:"无法实现从“点击的那个元素”缩放进入目标页面的效果"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["通过 ",(0,r.jsx)(s.code,{children:"matchedTransitionSource"}),"，可以实现典型的："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"图片 → 图片详情页的缩放动画"}),"\n",(0,r.jsx)(s.li,{children:"卡片 → 详情页的 Hero 动画"}),"\n",(0,r.jsx)(s.li,{children:"头像 → 个人主页的放大过渡"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"三参数详解",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#三参数详解",children:"#"}),"三、参数详解"]}),"\n",(0,r.jsxs)(s.h3,{id:"1-id转场源唯一标识",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-id转场源唯一标识",children:"#"}),"1. id（转场源唯一标识）"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" string "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" number"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"含义："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"标识“这是哪一个转场源视图”"}),"\n",(0,r.jsxs)(s.li,{children:["必须与目标页面中 ",(0,r.jsx)(s.code,{children:"navigationTransition.sourceID"})," 完全一致"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"规则："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["同一个 ",(0,r.jsx)(s.code,{children:"namespace"})," 内："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"})," 必须唯一"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"一次导航转场中："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["只能有一个 ",(0,r.jsx)(s.code,{children:"matchedTransitionSource"})," 与 ",(0,r.jsx)(s.code,{children:"sourceID"})," 对应"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"2-namespace转场命名空间",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-namespace转场命名空间",children:"#"}),"2. namespace（转场命名空间）"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"namespace"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" NamespaceID"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"含义："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"用于把“源视图”和“目标页面”放入同一个转场作用域"}),"\n",(0,r.jsxs)(s.li,{children:["由 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})," 创建并注入"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"规则："}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["源视图与目标页面 ",(0,r.jsx)(s.strong,{children:"必须使用同一个 namespace"})]}),"\n",(0,r.jsxs)(s.li,{children:["不同 namespace 之间 ",(0,r.jsx)(s.strong,{children:"绝对不会发生转场匹配"})]}),"\n",(0,r.jsxs)(s.li,{children:["即使 ",(0,r.jsx)(s.code,{children:"id"})," 相同，只要 namespace 不同，也不会触发动画"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"四matchedtransitionsource-的工作机制",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#四matchedtransitionsource-的工作机制",children:"#"}),"四、matchedTransitionSource 的工作机制"]}),"\n",(0,r.jsx)(s.p,{children:"一次完整的导航缩放转场，必须同时满足以下四个条件："}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.strong,{children:["源视图定义了 ",(0,r.jsx)(s.code,{children:"matchedTransitionSource"})]})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.strong,{children:["目标页面定义了 ",(0,r.jsx)(s.code,{children:"navigationTransition"})]})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"sourceID === matchedTransitionSource.id"})})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsxs)(s.strong,{children:["两者使用的是同一个 ",(0,r.jsx)(s.code,{children:"namespace"})]})}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"只有在这四个条件全部满足时，系统才会："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"读取源视图的："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"真实 Frame"}),"\n",(0,r.jsx)(s.li,{children:"屏幕位置"}),"\n",(0,r.jsx)(s.li,{children:"缩放比例"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"读取目标页面的最终布局 Frame"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"自动计算："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"初始缩放比例"}),"\n",(0,r.jsx)(s.li,{children:"平移路径"}),"\n",(0,r.jsx)(s.li,{children:"最终尺寸"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"并生成完整的缩放过渡动画"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"五最小可用示例图片缩放进入详情页",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#五最小可用示例图片缩放进入详情页",children:"#"}),"五、最小可用示例：图片缩放进入详情页"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  {namespace "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationLink"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      destination"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DetailPage"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          navigationTransition"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "zoom"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            namespace"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            sourceID"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "cover"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        />"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    >"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Image"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        source"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"cover"'})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        frame"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          width"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 120"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          height"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 160"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        matchedTransitionSource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "cover"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          namespace"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      />"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationLink"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"该示例实现的效果",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#该示例实现的效果",children:"#"}),"该示例实现的效果"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"用户点击封面图片"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["页面开始跳转到 ",(0,r.jsx)(s.code,{children:"DetailPage"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"新页面并不是“直接出现”"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"而是："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"从点击的那张图片位置开始"}),"\n",(0,r.jsx)(s.li,{children:"按比例放大"}),"\n",(0,r.jsx)(s.li,{children:"平滑过渡到详情页的最终布局"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"六卡片--详情页-hero-动画示例",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#六卡片--详情页-hero-动画示例",children:"#"}),"六、卡片 → 详情页 Hero 动画示例"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  {namespace "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationLink"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      destination"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DetailPage"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          navigationTransition"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "zoom"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            namespace"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            sourceID"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "card-1"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        />"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    >"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        frame"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          width"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 280"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          height"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 180"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        background"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"systemGray6"'})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        matchedTransitionSource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "card-1"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          namespace"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      >"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">Card Title</"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationLink"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,r.jsx)(s.p,{children:"该示例实现："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"整个卡片作为转场起点"}),"\n",(0,r.jsx)(s.li,{children:"跳转后卡片“变形为”详情页容器"}),"\n",(0,r.jsx)(s.li,{children:"具备典型的 Hero 动画特征"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"七matchedtransitionsource-与-matchedgeometryeffect-的本质区别",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#七matchedtransitionsource-与-matchedgeometryeffect-的本质区别",children:"#"}),"七、matchedTransitionSource 与 matchedGeometryEffect 的本质区别"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"对比项"}),(0,r.jsx)(s.th,{children:"matchedTransitionSource"}),(0,r.jsx)(s.th,{children:"matchedGeometryEffect"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"使用场景"}),(0,r.jsx)(s.td,{children:"页面级导航转场"}),(0,r.jsx)(s.td,{children:"组件级几何联动"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"是否依赖 Navigation"}),(0,r.jsx)(s.td,{children:"是"}),(0,r.jsx)(s.td,{children:"否"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"是否支持多个元素同步"}),(0,r.jsx)(s.td,{children:"否"}),(0,r.jsx)(s.td,{children:"是"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"是否需要 sourceID"}),(0,r.jsx)(s.td,{children:"是"}),(0,r.jsx)(s.td,{children:"否"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"是否控制 properties"}),(0,r.jsx)(s.td,{children:"否"}),(0,r.jsx)(s.td,{children:"是"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"是否支持布局内动画"}),(0,r.jsx)(s.td,{children:"否"}),(0,r.jsx)(s.td,{children:"是"})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"一句话总结："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"matchedTransitionSource"}),"：",(0,r.jsx)(s.strong,{children:"只负责“从哪儿开始跳页面”"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"matchedGeometryEffect"}),"：",(0,r.jsx)(s.strong,{children:"负责“布局内部怎么动”"})]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"八常见错误与排查要点",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#八常见错误与排查要点",children:"#"}),"八、常见错误与排查要点"]}),"\n",(0,r.jsxs)(s.h3,{id:"1-动画完全不生效",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-动画完全不生效",children:"#"}),"1. 动画完全不生效"]}),"\n",(0,r.jsx)(s.p,{children:"请检查："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"sourceID"})," 是否与 ",(0,r.jsx)(s.code,{children:"matchedTransitionSource.id"})," 完全一致"]}),"\n",(0,r.jsxs)(s.li,{children:["是否使用了同一个 ",(0,r.jsx)(s.code,{children:"namespace"})]}),"\n",(0,r.jsxs)(s.li,{children:["是否真的发生了 ",(0,r.jsx)(s.code,{children:"NavigationLink"})," 跳转"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"2-动画方向异常或缩放错位",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-动画方向异常或缩放错位",children:"#"}),"2. 动画方向异常或缩放错位"]}),"\n",(0,r.jsx)(s.p,{children:"常见原因："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["源视图有 ",(0,r.jsx)(s.code,{children:"scaleEffect"}),"、",(0,r.jsx)(s.code,{children:"offset"})," 等变换"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"源视图所在的容器使用了："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"clipShape"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"mask"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"containerShape"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"这些变换会影响系统获取“真实几何 Frame”。"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"3-同时存在多个-source",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#3-同时存在多个-source",children:"#"}),"3. 同时存在多个 source"]}),"\n",(0,r.jsx)(s.p,{children:"错误示例："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"同一个页面中："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["多个视图都使用了相同 ",(0,r.jsx)(s.code,{children:"id"})]}),"\n",(0,r.jsxs)(s.li,{children:["且都设置了 ",(0,r.jsx)(s.code,{children:"matchedTransitionSource"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"后果："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"系统无法判定哪个才是转场源"}),"\n",(0,r.jsx)(s.li,{children:"动画结果不可预测"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"九使用限制说明",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#九使用限制说明",children:"#"}),"九、使用限制说明"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"matchedTransitionSource"})," 仅适用于："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"NavigationLink"})}),"\n",(0,r.jsx)(s.li,{children:"基于 Navigation 的页面跳转"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"在以下环境中不支持或行为受限："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Widget"}),"\n",(0,r.jsx)(s.li,{children:"Live Activity"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"不适用于："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"组件内部状态切换"}),"\n",(0,r.jsx)(s.li,{children:"tab 切换"}),"\n",(0,r.jsx)(s.li,{children:"展开折叠菜单"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["这些场景应使用 ",(0,r.jsx)(s.code,{children:"matchedGeometryEffect"}),"。"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"十适用场景总结",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#十适用场景总结",children:"#"}),"十、适用场景总结"]}),"\n",(0,r.jsxs)(s.p,{children:["非常适合使用 ",(0,r.jsx)(s.code,{children:"matchedTransitionSource"})," 的场景："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"图片点击 → 图片详情页"}),"\n",(0,r.jsx)(s.li,{children:"文章封面 → 阅读页"}),"\n",(0,r.jsx)(s.li,{children:"商品卡片 → 商品详情页"}),"\n",(0,r.jsx)(s.li,{children:"用户头像 → 个人主页"}),"\n",(0,r.jsx)(s.li,{children:"卡片列表 → 大卡详情页"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"不适合使用的场景："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"高频切换的 UI 状态"}),"\n",(0,r.jsx)(s.li,{children:"大量小组件同时动画"}),"\n",(0,r.jsx)(s.li,{children:"实时刷新型界面"}),"\n"]})]})}function c(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...n.components};return s?(0,r.jsx)(s,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["TestFlight%2Fzh%2Fguide%2FView%20Modifiers%2FmatchedTransitionSource.md"]={toc:[{id:"一api-定义",text:"一、API 定义",depth:2},{id:"二核心作用",text:"二、核心作用",depth:2},{id:"三参数详解",text:"三、参数详解",depth:2},{id:"1-id转场源唯一标识",text:"1. id（转场源唯一标识）",depth:3},{id:"2-namespace转场命名空间",text:"2. namespace（转场命名空间）",depth:3},{id:"四matchedtransitionsource-的工作机制",text:"四、matchedTransitionSource 的工作机制",depth:2},{id:"五最小可用示例图片缩放进入详情页",text:"五、最小可用示例：图片缩放进入详情页",depth:2},{id:"该示例实现的效果",text:"该示例实现的效果",depth:3},{id:"六卡片--详情页-hero-动画示例",text:"六、卡片 → 详情页 Hero 动画示例",depth:2},{id:"七matchedtransitionsource-与-matchedgeometryeffect-的本质区别",text:"七、matchedTransitionSource 与 matchedGeometryEffect 的本质区别",depth:2},{id:"八常见错误与排查要点",text:"八、常见错误与排查要点",depth:2},{id:"1-动画完全不生效",text:"1. 动画完全不生效",depth:3},{id:"2-动画方向异常或缩放错位",text:"2. 动画方向异常或缩放错位",depth:3},{id:"3-同时存在多个-source",text:"3. 同时存在多个 source",depth:3},{id:"九使用限制说明",text:"九、使用限制说明",depth:2},{id:"十适用场景总结",text:"十、适用场景总结",depth:2}],title:"匹配过渡源（matchedTransitionSource）",headingTitle:"",frontmatter:{title:"匹配过渡源（matchedTransitionSource）",description:"该视图修饰符允许你标记一个视图为导航过渡的几何源。"}}}}]);