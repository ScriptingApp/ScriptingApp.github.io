"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["26265"],{9632(e,s,r){r.r(s),r.d(s,{default:()=>l});var n=r(74848),i=r(28453);function o(e){let s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"onDropContent"})," is a view modifier provided by Scripting that allows a view to act as a ",(0,n.jsx)(s.strong,{children:"drop target"}),", receiving files, images, or text dragged in from other applications."]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"overview",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#overview",children:"#"}),"Overview"]}),"\n",(0,n.jsxs)(s.p,{children:["With ",(0,n.jsx)(s.code,{children:"onDropContent"}),", you can:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Receive drag-and-drop content from other apps"}),"\n",(0,n.jsx)(s.li,{children:"Restrict acceptable content using UTType identifiers"}),"\n",(0,n.jsx)(s.li,{children:"Track whether a drag operation is hovering over the view"}),"\n",(0,n.jsxs)(s.li,{children:["Start loading dropped content through ",(0,n.jsx)(s.code,{children:"ItemProvider"})]}),"\n",(0,n.jsx)(s.li,{children:"Establish persistent access to security-scoped files when needed"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"modifier-definition",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#modifier-definition",children:"#"}),"Modifier Definition"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"onDropContent"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  types"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" UTType[]"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  isTarget: {"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    onChanged: (value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" Observable"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  perform: (attachments"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" ItemProvider"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[]) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"parameters",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#parameters",children:"#"}),"Parameters"]}),"\n",(0,n.jsxs)(s.h3,{id:"types",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#types",children:"#"}),"types"]}),"\n",(0,n.jsx)(s.p,{children:"Specifies the list of content types that the view can accept, expressed as UTType strings."}),"\n",(0,n.jsx)(s.p,{children:"If the drag operation does not contain any of the specified types:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"The view does not activate as a drop target"}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"isTarget"})," does not update"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"perform"})," is not called"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Example:"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"types"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.image"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "public.movie"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]})})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h3,{id:"istarget",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#istarget",children:"#"}),"isTarget"]}),"\n",(0,n.jsx)(s.p,{children:"Indicates whether the drag operation is currently hovering over the view."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["The value is ",(0,n.jsx)(s.code,{children:"true"})," when the drag enters the viewâ€™s area"]}),"\n",(0,n.jsxs)(s.li,{children:["The value is ",(0,n.jsx)(s.code,{children:"false"})," when the drag exits the area"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Two forms are supported:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"Binding object form"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(s.code,{children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  onChanged"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (value"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"Observable form"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"Observable"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["The observable form works well with ",(0,n.jsx)(s.code,{children:"useObservable"})," and provides a more concise reactive binding."]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h3,{id:"perform",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#perform",children:"#"}),"perform"]}),"\n",(0,n.jsxs)(s.p,{children:["Called when content matching the specified ",(0,n.jsx)(s.code,{children:"types"})," is dropped onto the view."]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"perform"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (attachments"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" ItemProvider"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[]) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"attachments"})," is an array of ",(0,n.jsx)(s.code,{children:"ItemProvider"})]}),"\n",(0,n.jsxs)(s.li,{children:["Each ",(0,n.jsx)(s.code,{children:"ItemProvider"})," represents one dropped item"]}),"\n",(0,n.jsx)(s.li,{children:"The return value indicates whether the drop was successfully handled"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Return value semantics:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Return ",(0,n.jsx)(s.code,{children:"true"})," to indicate the drop was accepted"]}),"\n",(0,n.jsxs)(s.li,{children:["Return ",(0,n.jsx)(s.code,{children:"false"})," to indicate the drop was not handled"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"execution-rules-for-perform",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#execution-rules-for-perform",children:"#"}),"Execution Rules for perform"]}),"\n",(0,n.jsxs)(s.p,{children:["The following rules must be followed inside ",(0,n.jsx)(s.code,{children:"perform"}),":"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Loading of ",(0,n.jsx)(s.code,{children:"ItemProvider"})," contents must be ",(0,n.jsxs)(s.strong,{children:["started synchronously within the execution scope of ",(0,n.jsx)(s.code,{children:"perform"})]})]}),"\n",(0,n.jsxs)(s.li,{children:["Asynchronous completion is allowed using ",(0,n.jsx)(s.code,{children:"Promise"})," or ",(0,n.jsx)(s.code,{children:"then"})]}),"\n",(0,n.jsx)(s.li,{children:"Loading must not be initiated later from a different callback or event"}),"\n",(0,n.jsxs)(s.li,{children:["If ",(0,n.jsx)(s.code,{children:"perform"})," returns ",(0,n.jsx)(s.code,{children:"false"}),", the system treats the drop as unhandled"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Reasoning:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Dropped content is protected by system security rules"}),"\n",(0,n.jsxs)(s.li,{children:["Access to the dropped payload is only valid while ",(0,n.jsx)(s.code,{children:"perform"})," is executing"]}),"\n",(0,n.jsx)(s.li,{children:"If loading does not begin within this scope, the content may no longer be accessible"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"working-with-itemprovider",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#working-with-itemprovider",children:"#"}),"Working with ItemProvider"]}),"\n",(0,n.jsxs)(s.p,{children:["Within ",(0,n.jsx)(s.code,{children:"perform"}),", you should inspect each ",(0,n.jsx)(s.code,{children:"ItemProvider"})," and start loading based on its capabilities."]}),"\n",(0,n.jsx)(s.p,{children:"Typical steps include:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Checking type conformance using ",(0,n.jsx)(s.code,{children:"hasItemConforming"})]}),"\n",(0,n.jsx)(s.li,{children:"Selecting an appropriate loading method"}),"\n",(0,n.jsx)(s.li,{children:"Handling files, images, or text accordingly"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"example-usage",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#example-usage",children:"#"}),"Example Usage"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" isTarget"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useObservable"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  onDropContent"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    types"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.image"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "public.movie"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"]"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    isTarget"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" isTarget"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"    perform"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (attachments) "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"      const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" images"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" UIImage"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" []"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"      const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" videos"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" []"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"      let"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" found "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" false"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"      for"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" attachment"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" of"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" attachments) {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"        if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"attachment"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".hasItemConforming"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.png"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")) {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          found "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"          attachment"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".loadUIImage"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(image "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"            if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (image "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" null"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:") {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"              images"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".push"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(image)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          })"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        } "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"attachment"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".hasItemConforming"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.movie"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")) {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          found "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"          attachment"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".loadFilePath"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.movie"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"            if"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (filePath "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" null"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:") {"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"              // Create a bookmark for the security-scoped file"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"              FileManager"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".addFileBookmark"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath)"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"              videos"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".push"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          })"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"      return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" found"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }}"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  ..."})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"security-scoped-file-access",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#security-scoped-file-access",children:"#"}),"Security-Scoped File Access"]}),"\n",(0,n.jsxs)(s.p,{children:["File paths obtained via ",(0,n.jsx)(s.code,{children:"onDropContent"})," are typically ",(0,n.jsx)(s.strong,{children:"security-scoped resources"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"These paths may become invalid when:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"perform"})," returns"]}),"\n",(0,n.jsx)(s.li,{children:"The app restarts"}),"\n",(0,n.jsx)(s.li,{children:"The script lifecycle ends"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"To retain long-term access, you should create a file bookmark as soon as the path is obtained."}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"filemanageraddfilebookmark",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#filemanageraddfilebookmark",children:"#"}),"FileManager.addFileBookmark"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FileManager"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".addFileBookmark"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(path: string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" name"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" string): string "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" null"})]})})})}),"\n",(0,n.jsx)(s.p,{children:"Description:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Creates a security-scoped bookmark for a file or folder"}),"\n",(0,n.jsxs)(s.li,{children:["Intended for paths obtained via APIs such as ",(0,n.jsx)(s.code,{children:"Photos"})," or ",(0,n.jsx)(s.code,{children:"onDropContent"})]}),"\n",(0,n.jsxs)(s.li,{children:["Returns the bookmark name, or ",(0,n.jsx)(s.code,{children:"null"})," if creation fails"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Example:"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" bookmarkName"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" FileManager"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".addFileBookmark"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath)"})]})})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"filemanagerremovefilebookmark",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#filemanagerremovefilebookmark",children:"#"}),"FileManager.removeFileBookmark"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FileManager"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".removeFileBookmark"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(name: string): boolean"})]})})})}),"\n",(0,n.jsx)(s.p,{children:"Description:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Removes a previously created file bookmark"}),"\n",(0,n.jsx)(s.li,{children:"Should be called when access to the file is no longer needed"}),"\n",(0,n.jsx)(s.li,{children:"Returns whether the removal was successful"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Example:"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"FileManager"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".removeFileBookmark"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(bookmarkName)"})]})})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"usage-recommendations",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#usage-recommendations",children:"#"}),"Usage Recommendations"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Specify ",(0,n.jsx)(s.code,{children:"types"})," as precisely as possible"]}),"\n",(0,n.jsxs)(s.li,{children:["Use ",(0,n.jsx)(s.code,{children:"perform"})," only to start loading, not to wait for results"]}),"\n",(0,n.jsx)(s.li,{children:"Load images and lightweight data as objects when appropriate"}),"\n",(0,n.jsx)(s.li,{children:"Prefer file paths for large resources such as videos or documents"}),"\n",(0,n.jsx)(s.li,{children:"Create bookmarks for files that require long-term access"}),"\n",(0,n.jsx)(s.li,{children:"Remove bookmarks when the associated files are no longer needed"}),"\n"]})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["TestFlight%2Fen%2Fguide%2FChangelog%2F2.4.6%2FonDropContent.md"]={toc:[{id:"overview",text:"Overview",depth:2},{id:"modifier-definition",text:"Modifier Definition",depth:2},{id:"parameters",text:"Parameters",depth:2},{id:"types",text:"types",depth:3},{id:"istarget",text:"isTarget",depth:3},{id:"perform",text:"perform",depth:3},{id:"execution-rules-for-perform",text:"Execution Rules for perform",depth:2},{id:"working-with-itemprovider",text:"Working with ItemProvider",depth:2},{id:"example-usage",text:"Example Usage",depth:2},{id:"security-scoped-file-access",text:"Security-Scoped File Access",depth:2},{id:"filemanageraddfilebookmark",text:"FileManager.addFileBookmark",depth:2},{id:"filemanagerremovefilebookmark",text:"FileManager.removeFileBookmark",depth:2},{id:"usage-recommendations",text:"Usage Recommendations",depth:2}],title:"onDropContent",headingTitle:"",frontmatter:{title:"onDropContent",description:"New Observable support, perform function has been adjusted, return an array of ItemProvider objects for deferred loading data."}}}}]);