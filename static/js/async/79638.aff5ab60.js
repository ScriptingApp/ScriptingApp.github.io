"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["79638"],{69237(e,s,r){r.r(s),r.d(s,{default:()=>d});var n=r(74848),i=r(28453);function l(e){let s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"VideoRecorderPreviewView"})," 是用于显示 ",(0,n.jsx)(s.code,{children:"VideoRecorder"})," 实时视频画面的预览视图组件。\n它本身 ",(0,n.jsx)(s.strong,{children:"不负责任何录制逻辑"}),"，仅用于将 ",(0,n.jsx)(s.code,{children:"VideoRecorder.session"})," 中的视频流渲染到 UI 层，并提供必要的显示与裁剪能力。"]}),"\n",(0,n.jsxs)(s.p,{children:["该组件通常与 ",(0,n.jsx)(s.code,{children:"VideoRecorder"})," 搭配使用，用于："]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"实时显示摄像头画面"}),"\n",(0,n.jsx)(s.li,{children:"支持不同的视频填充模式（videoGravity）"}),"\n",(0,n.jsx)(s.li,{children:"处理镜像显示（常用于前置摄像头）"}),"\n",(0,n.jsx)(s.li,{children:"支持圆角、裁剪等视觉效果"}),"\n",(0,n.jsx)(s.li,{children:"与手势系统组合实现缩放、对焦等交互"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"设计原则",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#设计原则",children:"#"}),"设计原则"]}),"\n",(0,n.jsxs)(s.h3,{id:"视图与录制逻辑解耦",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#视图与录制逻辑解耦",children:"#"}),"视图与录制逻辑解耦"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"VideoRecorderPreviewView"})," ",(0,n.jsx)(s.strong,{children:"不持有录制状态"})]}),"\n",(0,n.jsxs)(s.li,{children:["不触发 ",(0,n.jsx)(s.code,{children:"prepare / start / stop"})]}),"\n",(0,n.jsxs)(s.li,{children:["不感知 ",(0,n.jsx)(s.code,{children:"VideoRecorder.State"})]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["它只依赖 ",(0,n.jsx)(s.code,{children:"VideoRecorder.session"}),"，并在内部将其绑定到系统的预览渲染层。"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h3,{id:"单向依赖关系",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#单向依赖关系",children:"#"}),"单向依赖关系"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"txt",children:(0,n.jsx)(s.code,{children:(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"VideoRecorder  ──▶  AVCaptureSession  ──▶  VideoRecorderPreviewView"})})})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["Session 由 ",(0,n.jsx)(s.code,{children:"VideoRecorder"})," 管理"]}),"\n",(0,n.jsx)(s.li,{children:"PreviewView 只负责显示"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"props-定义",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#props-定义",children:"#"}),"Props 定义"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" VideoRecorderPreviewViewProps"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  videoGravity"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "resizeAspect"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "resizeAspectFill"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "resize"'})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  isVideoMirrored"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  cornerRadius"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" number"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  masksToBounds"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"videogravity",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#videogravity",children:"#"}),"videoGravity"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"videoGravity"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "resizeAspect"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "resizeAspectFill"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "resize"'})]})})})}),"\n",(0,n.jsxs)(s.p,{children:["控制视频内容在视图中的填充方式，对应 ",(0,n.jsx)(s.code,{children:"AVLayerVideoGravity"}),"："]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"resizeAspect"}),"\n等比例缩放，完整显示视频内容，可能留黑边"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"resizeAspectFill"}),"（默认）\n等比例填充，可能裁剪边缘"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"resize"}),"\n拉伸填满视图，不保持比例"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"适合根据 UI 设计需求选择。"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"isvideomirrored",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#isvideomirrored",children:"#"}),"isVideoMirrored"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"isVideoMirrored"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,n.jsx)(s.p,{children:"是否镜像显示视频画面，常用于前置摄像头。"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"true"}),"\n画面左右翻转，符合自拍预期"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"false"}),"（默认）\n保持原始方向"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsxs)(s.p,{children:["注意：\n该属性只影响",(0,n.jsx)(s.strong,{children:"预览显示"}),"，不影响最终录制文件是否镜像。"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"cornerradius",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#cornerradius",children:"#"}),"cornerRadius"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"cornerRadius"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" number"})]})})})}),"\n",(0,n.jsx)(s.p,{children:"设置预览视图背景的圆角半径。"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["默认值：",(0,n.jsx)(s.code,{children:"0"})]}),"\n",(0,n.jsx)(s.li,{children:"仅对视图背景生效"}),"\n",(0,n.jsxs)(s.li,{children:["若需要裁剪视频内容，需要同时设置 ",(0,n.jsx)(s.code,{children:"masksToBounds = true"})]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"maskstobounds",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#maskstobounds",children:"#"}),"masksToBounds"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"masksToBounds"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,n.jsx)(s.p,{children:"是否裁剪子内容到视图边界。"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"false"}),"（默认）\n圆角仅作用于背景，不裁剪视频内容"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"true"}),"\n视频画面会被裁剪到圆角区域"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["通常与 ",(0,n.jsx)(s.code,{children:"cornerRadius"})," 配合使用。"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"生命周期与更新行为",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#生命周期与更新行为",children:"#"}),"生命周期与更新行为"]}),"\n",(0,n.jsxs)(s.h3,{id:"与-swiftui--声明式-ui-的关系",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#与-swiftui--声明式-ui-的关系",children:"#"}),"与 SwiftUI / 声明式 UI 的关系"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"VideoRecorderPreviewView"})," 是一个声明式组件，其底层通常对应一个持久存在的原生预览视图（如 ",(0,n.jsx)(s.code,{children:"AVCaptureVideoPreviewLayer"}),"）。"]}),"\n",(0,n.jsx)(s.p,{children:"在以下情况下需要特别注意："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"重新创建视图实例"}),"\n会导致底层预览层重新绑定 session"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"频繁触发视图重建"}),"\n可能引起短暂卡顿或画面闪烁"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h3,{id:"key-的重要性",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#key-的重要性",children:"#"}),"key 的重要性"]}),"\n",(0,n.jsx)(s.p,{children:"在动态 UI 场景中（例如切换摄像头、切换配置）："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VideoRecorderPreviewView"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  key"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"videoRecorder"'})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  ..."})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"/>"})})]})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["建议显式提供稳定且唯一的 ",(0,n.jsx)(s.code,{children:"key"})]}),"\n",(0,n.jsxs)(s.li,{children:["用于确保预览视图与当前 ",(0,n.jsx)(s.code,{children:"AVCaptureSession"})," 正确绑定"]}),"\n",(0,n.jsx)(s.li,{children:"防止 SwiftUI / React-style diff 误判导致多次销毁与重建"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"与-videorecorder-的协作方式",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#与-videorecorder-的协作方式",children:"#"}),"与 VideoRecorder 的协作方式"]}),"\n",(0,n.jsxs)(s.h3,{id:"会话来源",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#会话来源",children:"#"}),"会话来源"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"VideoRecorderPreviewView"})," 内部使用的是："]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VideoRecorder"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".session"})]})})})}),"\n",(0,n.jsxs)(s.p,{children:["该 session 的生命周期由 ",(0,n.jsx)(s.code,{children:"VideoRecorder"})," 控制。"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h3,{id:"会话重置时的行为",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#会话重置时的行为",children:"#"}),"会话重置时的行为"]}),"\n",(0,n.jsx)(s.p,{children:"当调用："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" VideoRecorder"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".reset"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]})})})}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["底层 ",(0,n.jsx)(s.code,{children:"AVCaptureSession"})," 会被关闭"]}),"\n",(0,n.jsx)(s.li,{children:"预览画面会停止更新或变为空白"}),"\n",(0,n.jsxs)(s.li,{children:["重新 ",(0,n.jsx)(s.code,{children:"prepare"})," 后画面恢复"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"PreviewView 本身无需额外处理。"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"手势与交互组合方式",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#手势与交互组合方式",children:"#"}),"手势与交互（组合方式）"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"VideoRecorderPreviewView"})," 本身 ",(0,n.jsx)(s.strong,{children:"不内置任何手势逻辑"}),"，但可以与手势系统组合使用："]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VideoRecorderPreviewView"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  gesture"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"    MagnifyGesture"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      .onChanged"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(details "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"        VideoRecorder"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".setZoomFactor"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"..."}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      })"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"/>"})})]})})}),"\n",(0,n.jsx)(s.p,{children:"常见交互包括："}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["双指缩放 → 调用 ",(0,n.jsx)(s.code,{children:"setZoomFactor"})]}),"\n",(0,n.jsxs)(s.li,{children:["单击 → 转换为归一化坐标后调用 ",(0,n.jsx)(s.code,{children:"setFocusPoint"})]}),"\n",(0,n.jsx)(s.li,{children:"长按 → 锁定曝光"}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"常见使用建议",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#常见使用建议",children:"#"}),"常见使用建议"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["不要在 ",(0,n.jsx)(s.code,{children:"recording"})," 状态频繁重建 PreviewView"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"切换摄像头时建议："}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"reset"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.code,{children:"prepare"})}),"\n",(0,n.jsx)(s.li,{children:"保持 PreviewView key 稳定"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"镜像、圆角等视觉效果应优先放在 PreviewView 层处理"}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["所有录制控制逻辑应通过 ",(0,n.jsx)(s.code,{children:"VideoRecorder"})," API 完成"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"典型使用示例简化",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#典型使用示例简化",children:"#"}),"典型使用示例（简化）"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VideoRecorderPreviewView"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  key"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"videoRecorder"'})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  videoGravity"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"resizeAspectFill"'})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  isVideoMirrored"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  cornerRadius"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"12"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  masksToBounds"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"/>"})})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"总结",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#总结",children:"#"}),"总结"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"VideoRecorderPreviewView"})," 是一个 ",(0,n.jsx)(s.strong,{children:"纯显示组件"}),"："]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"负责实时视频画面的渲染"}),"\n",(0,n.jsx)(s.li,{children:"不参与录制状态与控制"}),"\n",(0,n.jsxs)(s.li,{children:["与 ",(0,n.jsx)(s.code,{children:"VideoRecorder"})," 通过 ",(0,n.jsx)(s.code,{children:"AVCaptureSession"})," 单向协作"]}),"\n",(0,n.jsx)(s.li,{children:"适合与手势、布局、动画等 UI 能力自由组合"}),"\n"]})]})}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["TestFlight%2Fzh%2Fguide%2FDevice%20Capabilities%2FVideoRecorder%2FVideoRecorderPreviewView.md"]={toc:[{id:"设计原则",text:"设计原则",depth:2},{id:"视图与录制逻辑解耦",text:"视图与录制逻辑解耦",depth:3},{id:"单向依赖关系",text:"单向依赖关系",depth:3},{id:"props-定义",text:"Props 定义",depth:2},{id:"videogravity",text:"videoGravity",depth:2},{id:"isvideomirrored",text:"isVideoMirrored",depth:2},{id:"cornerradius",text:"cornerRadius",depth:2},{id:"maskstobounds",text:"masksToBounds",depth:2},{id:"生命周期与更新行为",text:"生命周期与更新行为",depth:2},{id:"与-swiftui--声明式-ui-的关系",text:"与 SwiftUI / 声明式 UI 的关系",depth:3},{id:"key-的重要性",text:"key 的重要性",depth:3},{id:"与-videorecorder-的协作方式",text:"与 VideoRecorder 的协作方式",depth:2},{id:"会话来源",text:"会话来源",depth:3},{id:"会话重置时的行为",text:"会话重置时的行为",depth:3},{id:"手势与交互组合方式",text:"手势与交互（组合方式）",depth:2},{id:"常见使用建议",text:"常见使用建议",depth:2},{id:"典型使用示例简化",text:"典型使用示例（简化）",depth:2},{id:"总结",text:"总结",depth:2}],title:"视频预览",headingTitle:"",frontmatter:{title:"视频预览",description:"使用 VideoRecorderPreviewView UI组件进行视频预览",tag:"PRO"}}}}]);