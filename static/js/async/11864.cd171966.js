"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["11864"],{96075(e,r,s){s.r(r),s.d(r,{default:()=>l});var n=s(74848),i=s(28453);function c(e){let r={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"BluetoothPeripheral"})," 表示一个 BLE 外围设备对象，支持读取设备信息、连接状态、发现服务与特征值、读取写入数据、订阅通知等。它是蓝牙通信的主要交互对象。"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h2,{id:"属性只读",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#属性只读",children:"#"}),"属性（只读）"]}),"\n",(0,n.jsxs)(r.h3,{id:"id-string",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#id-string",children:"#"}),(0,n.jsx)(r.code,{children:"id: string"})]}),"\n",(0,n.jsx)(r.p,{children:"设备唯一标识符（UUID 格式），可用于标识并连接该设备。此值在 App 生命周期中保持不变。"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"name-string--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#name-string--null",children:"#"}),(0,n.jsx)(r.code,{children:"name: string | null"})]}),"\n",(0,n.jsxs)(r.p,{children:["设备的名称，可能为 ",(0,n.jsx)(r.code,{children:"null"}),"（例如设备未广播名称）。"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"isconnected-boolean",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#isconnected-boolean",children:"#"}),(0,n.jsx)(r.code,{children:"isConnected: boolean"})]}),"\n",(0,n.jsx)(r.p,{children:"是否已连接到设备："}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"true"}),": 已连接，可以进行数据交互"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"false"}),": 未连接或已断开"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"cansendwritewithoutresponse-boolean",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#cansendwritewithoutresponse-boolean",children:"#"}),(0,n.jsx)(r.code,{children:"canSendWriteWithoutResponse: boolean"})]}),"\n",(0,n.jsx)(r.p,{children:"是否允许进行无响应写入："}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"true"}),": 可发送无响应数据（",(0,n.jsx)(r.code,{children:"writeWithoutResponse"}),"）"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"false"}),": 需等待写入响应（使用 ",(0,n.jsx)(r.code,{children:"write"}),"）"]}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["当该值变为 ",(0,n.jsx)(r.code,{children:"true"})," 时会触发 ",(0,n.jsx)(r.code,{children:"onReadyToSendWriteWithoutResponse"})," 事件。"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"ancsauthorized-boolean",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ancsauthorized-boolean",children:"#"}),(0,n.jsx)(r.code,{children:"ancsAuthorized: boolean"})]}),"\n",(0,n.jsx)(r.p,{children:"是否已授权使用 Apple Notification Center Service（仅适用于支持 ANCS 的设备）。"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"services-bluetoothservice--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#services-bluetoothservice--null",children:"#"}),(0,n.jsx)(r.code,{children:"services: BluetoothService[] | null"})]}),"\n",(0,n.jsxs)(r.p,{children:["已发现的服务列表，如果尚未调用 ",(0,n.jsx)(r.code,{children:"discoverServices()"}),"，此值为 ",(0,n.jsx)(r.code,{children:"null"}),"。"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h2,{id:"事件回调可选",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#事件回调可选",children:"#"}),"事件回调（可选）"]}),"\n",(0,n.jsxs)(r.h3,{id:"onconnected---void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#onconnected---void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onConnected: (() => void) | null"})]}),"\n",(0,n.jsx)(r.p,{children:"连接成功时触发。"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"ondisconnected-error-error--null-isreconnecting-boolean--void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ondisconnected-error-error--null-isreconnecting-boolean--void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onDisconnected: ((error: Error | null, isReconnecting: boolean) => void) | null"})]}),"\n",(0,n.jsx)(r.p,{children:"断开连接时触发。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"error"}),": 若为非主动断开，则包含错误信息；否则为 ",(0,n.jsx)(r.code,{children:"null"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"isReconnecting"}),": 是否正在尝试重连"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"onconnectfailed-error-error--void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#onconnectfailed-error-error--void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onConnectFailed: ((error: Error) => void) | null"})]}),"\n",(0,n.jsx)(r.p,{children:"连接失败时触发。"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"onnamechanged-name-string--null--void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#onnamechanged-name-string--null--void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onNameChanged: ((name: string | null) => void) | null"})]}),"\n",(0,n.jsx)(r.p,{children:"设备名称发生变更时触发。"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"ondiscoverservices-error-error--null-services-bluetoothservice--null--void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ondiscoverservices-error-error--null-services-bluetoothservice--null--void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onDiscoverServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null"})]}),"\n",(0,n.jsxs)(r.p,{children:["调用 ",(0,n.jsx)(r.code,{children:"discoverServices()"})," 后，服务发现完成时触发。"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"ondiscovercharacteristics-error-error--null-characteristics-bluetoothcharacteristic--null--void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ondiscovercharacteristics-error-error--null-characteristics-bluetoothcharacteristic--null--void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onDiscoverCharacteristics: ((error: Error | null, characteristics: BluetoothCharacteristic[] | null) => void) | null"})]}),"\n",(0,n.jsxs)(r.p,{children:["调用 ",(0,n.jsx)(r.code,{children:"discoverCharacteristics()"})," 后，特征值发现完成时触发。"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"ondiscoverincludedservices-error-error--null-services-bluetoothservice--null--void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ondiscoverincludedservices-error-error--null-services-bluetoothservice--null--void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onDiscoverIncludedServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null"})]}),"\n",(0,n.jsxs)(r.p,{children:["调用 ",(0,n.jsx)(r.code,{children:"discoverIncludedServices()"})," 后，包含服务发现完成时触发。"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"onreadytosendwritewithoutresponse---void--null",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#onreadytosendwritewithoutresponse---void--null",children:"#"}),(0,n.jsx)(r.code,{children:"onReadyToSendWriteWithoutResponse: (() => void) | null"})]}),"\n",(0,n.jsx)(r.p,{children:"设备准备好接收新的无响应写入时触发。"}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h2,{id:"方法",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#方法",children:"#"}),"方法"]}),"\n",(0,n.jsxs)(r.h3,{id:"readvaluecharacteristic-bluetoothcharacteristic-promisedata",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#readvaluecharacteristic-bluetoothcharacteristic-promisedata",children:"#"}),(0,n.jsx)(r.code,{children:"readValue(characteristic: BluetoothCharacteristic): Promise<Data>"})]}),"\n",(0,n.jsx)(r.p,{children:"读取指定特征值的内容。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"characteristic"}),": 要读取的特征值对象"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<Data>"}),"，表示读取到的数据"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"maxwritevaluelengthwritetype-withresponse--withoutresponse-number",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#maxwritevaluelengthwritetype-withresponse--withoutresponse-number",children:"#"}),(0,n.jsx)(r.code,{children:'maxWriteValueLength(writeType: "withResponse" | "withoutResponse"): number'})]}),"\n",(0,n.jsx)(r.p,{children:"获取设备支持的最大写入字节数。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"writeType"}),": ",(0,n.jsx)(r.code,{children:'"withResponse"'})," 或 ",(0,n.jsx)(r.code,{children:'"withoutResponse"'})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：可写入的最大字节数（",(0,n.jsx)(r.code,{children:"number"}),"）"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"writevaluecharacteristic-value-writetype-promisevoid",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#writevaluecharacteristic-value-writetype-promisevoid",children:"#"}),(0,n.jsx)(r.code,{children:"writeValue(characteristic, value, writeType): Promise<void>"})]}),"\n",(0,n.jsx)(r.p,{children:"向特征值写入数据。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"characteristic"}),": 要写入的特征值对象"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"value"}),": 要写入的 ",(0,n.jsx)(r.code,{children:"Data"})," 数据"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"writeType"}),": 写入类型 ",(0,n.jsx)(r.code,{children:'"withResponse"'})," 或 ",(0,n.jsx)(r.code,{children:'"withoutResponse"'})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<void>"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"subscribecharacteristic-handler-promisevoid",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#subscribecharacteristic-handler-promisevoid",children:"#"}),(0,n.jsx)(r.code,{children:"subscribe(characteristic, handler): Promise<void>"})]}),"\n",(0,n.jsx)(r.p,{children:"订阅特征值通知或指示。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"要求"}),"：该特征值必须包含 ",(0,n.jsx)(r.code,{children:'"notify"'})," 或 ",(0,n.jsx)(r.code,{children:'"indicate"'})," 属性"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"characteristic"}),": 要订阅的特征值"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"handler(error, value)"}),": 通知触发时回调函数"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"error"}),": 出错时为 ",(0,n.jsx)(r.code,{children:"Error"}),"，否则为 ",(0,n.jsx)(r.code,{children:"null"})]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"value"}),": 通知传递的 ",(0,n.jsx)(r.code,{children:"Data"})," 数据，可能为 ",(0,n.jsx)(r.code,{children:"null"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<void>"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"unsubscribecharacteristic-promisevoid",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#unsubscribecharacteristic-promisevoid",children:"#"}),(0,n.jsx)(r.code,{children:"unsubscribe(characteristic): Promise<void>"})]}),"\n",(0,n.jsx)(r.p,{children:"取消特征值的通知订阅。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"characteristic"}),": 要取消订阅的特征值"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<void>"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"discoverservicesserviceuuids-string-promisevoid",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#discoverservicesserviceuuids-string-promisevoid",children:"#"}),(0,n.jsx)(r.code,{children:"discoverServices(serviceUUIDs?: string[]): Promise<void>"})]}),"\n",(0,n.jsx)(r.p,{children:"发现设备提供的服务。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"serviceUUIDs"}),": 可选服务 UUID 列表，用于筛选"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<void>"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"discoverincludedservicesservice-includedserviceuuids-promisevoid",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#discoverincludedservicesservice-includedserviceuuids-promisevoid",children:"#"}),(0,n.jsx)(r.code,{children:"discoverIncludedServices(service, includedServiceUUIDs?): Promise<void>"})]}),"\n",(0,n.jsx)(r.p,{children:"发现指定服务中嵌套的服务。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"service"}),": 要发现的服务"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"includedServiceUUIDs"}),": 可选的服务 UUID 筛选"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<void>"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"discovercharacteristicsservice-characteristicuuids-promisevoid",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#discovercharacteristicsservice-characteristicuuids-promisevoid",children:"#"}),(0,n.jsx)(r.code,{children:"discoverCharacteristics(service, characteristicUUIDs?): Promise<void>"})]}),"\n",(0,n.jsx)(r.p,{children:"发现指定服务中的特征值。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"参数"}),"："]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"service"}),": 要发现的服务"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"characteristicUUIDs"}),": 可选的特征值 UUID 筛选"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<void>"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"readrssi-promisenumber",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#readrssi-promisenumber",children:"#"}),(0,n.jsx)(r.code,{children:"readRSSI(): Promise<number>"})]}),"\n",(0,n.jsx)(r.p,{children:"读取当前设备的信号强度（RSSI，单位 dBm）。"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"返回"}),"：",(0,n.jsx)(r.code,{children:"Promise<number>"})]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h2,{id:"示例",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#示例",children:"#"}),"示例"]}),"\n",(0,n.jsxs)(r.h3,{id:"连接设备并读取特征值",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#连接设备并读取特征值",children:"#"}),"连接设备并读取特征值"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(r.code,{children:[(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" BluetoothCentralManager"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".connect"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(peripheral)"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" peripheral"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".discoverServices"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsx)(r.span,{className:"line"}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" service"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" of"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" peripheral"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:".services "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"??"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" []) {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"  await"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" peripheral"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".discoverCharacteristics"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(service)"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"  for"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" char"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" of"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" service"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:".characteristics "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"??"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" []) {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"    if"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"char"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"properties"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".includes"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"read"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:")) {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"      const"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" value"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" peripheral"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".readValue"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(char)"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"      console"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"读取到值:"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" value"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:"?.toRawString"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"())"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h3,{id:"写入数据并订阅通知",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#写入数据并订阅通知",children:"#"}),"写入数据并订阅通知"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(r.code,{children:[(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" data"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" Data"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".fromRawString"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"hello"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" peripheral"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".writeValue"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(characteristic"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" data"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "withResponse"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsx)(r.span,{className:"line"}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" peripheral"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".subscribe"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"(characteristic"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" (error"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" value) "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"  if"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"error "}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-keyword)"},children:"&&"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:" value) {"})]}),"\n",(0,n.jsxs)(r.span,{className:"line",children:[(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:"    console"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"收到通知:"'}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-constant)"},children:" value"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-token-function)"},children:".toHexString"}),(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"())"})]}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(r.span,{className:"line",children:(0,n.jsx)(r.span,{style:{color:"var(--shiki-foreground)"},children:"})"})})]})})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsxs)(r.h2,{id:"注意事项",children:[(0,n.jsx)(r.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#注意事项",children:"#"}),"注意事项"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["所有操作前必须确保设备已连接，并通过 ",(0,n.jsx)(r.code,{children:"discoverServices()"})," 和 ",(0,n.jsx)(r.code,{children:"discoverCharacteristics()"})," 获取服务和特征值。"]}),"\n",(0,n.jsxs)(r.li,{children:["订阅通知后应在合适时机调用 ",(0,n.jsx)(r.code,{children:"unsubscribe()"})," 释放资源。"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"canSendWriteWithoutResponse"})," 为 ",(0,n.jsx)(r.code,{children:"false"})," 时不应进行无响应写入。"]}),"\n"]})]})}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["zh%2Fdoc%2FDevice%20Capabilities%2FBluetooth%2FBluetoothPeripheral.md"]={toc:[{id:"属性只读",text:"属性（只读）",depth:2},{id:"id-string",text:"`id: string`",depth:3},{id:"name-string--null",text:"`name: string | null`",depth:3},{id:"isconnected-boolean",text:"`isConnected: boolean`",depth:3},{id:"cansendwritewithoutresponse-boolean",text:"`canSendWriteWithoutResponse: boolean`",depth:3},{id:"ancsauthorized-boolean",text:"`ancsAuthorized: boolean`",depth:3},{id:"services-bluetoothservice--null",text:"`services: BluetoothService[] | null`",depth:3},{id:"事件回调可选",text:"事件回调（可选）",depth:2},{id:"onconnected---void--null",text:"`onConnected: (() => void) | null`",depth:3},{id:"ondisconnected-error-error--null-isreconnecting-boolean--void--null",text:"`onDisconnected: ((error: Error | null, isReconnecting: boolean) => void) | null`",depth:3},{id:"onconnectfailed-error-error--void--null",text:"`onConnectFailed: ((error: Error) => void) | null`",depth:3},{id:"onnamechanged-name-string--null--void--null",text:"`onNameChanged: ((name: string | null) => void) | null`",depth:3},{id:"ondiscoverservices-error-error--null-services-bluetoothservice--null--void--null",text:"`onDiscoverServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null`",depth:3},{id:"ondiscovercharacteristics-error-error--null-characteristics-bluetoothcharacteristic--null--void--null",text:"`onDiscoverCharacteristics: ((error: Error | null, characteristics: BluetoothCharacteristic[] | null) => void) | null`",depth:3},{id:"ondiscoverincludedservices-error-error--null-services-bluetoothservice--null--void--null",text:"`onDiscoverIncludedServices: ((error: Error | null, services: BluetoothService[] | null) => void) | null`",depth:3},{id:"onreadytosendwritewithoutresponse---void--null",text:"`onReadyToSendWriteWithoutResponse: (() => void) | null`",depth:3},{id:"方法",text:"方法",depth:2},{id:"readvaluecharacteristic-bluetoothcharacteristic-promisedata",text:"`readValue(characteristic: BluetoothCharacteristic): Promise<Data>`",depth:3},{id:"maxwritevaluelengthwritetype-withresponse--withoutresponse-number",text:'`maxWriteValueLength(writeType: "withResponse" | "withoutResponse"): number`',depth:3},{id:"writevaluecharacteristic-value-writetype-promisevoid",text:"`writeValue(characteristic, value, writeType): Promise<void>`",depth:3},{id:"subscribecharacteristic-handler-promisevoid",text:"`subscribe(characteristic, handler): Promise<void>`",depth:3},{id:"unsubscribecharacteristic-promisevoid",text:"`unsubscribe(characteristic): Promise<void>`",depth:3},{id:"discoverservicesserviceuuids-string-promisevoid",text:"`discoverServices(serviceUUIDs?: string[]): Promise<void>`",depth:3},{id:"discoverincludedservicesservice-includedserviceuuids-promisevoid",text:"`discoverIncludedServices(service, includedServiceUUIDs?): Promise<void>`",depth:3},{id:"discovercharacteristicsservice-characteristicuuids-promisevoid",text:"`discoverCharacteristics(service, characteristicUUIDs?): Promise<void>`",depth:3},{id:"readrssi-promisenumber",text:"`readRSSI(): Promise<number>`",depth:3},{id:"示例",text:"示例",depth:2},{id:"连接设备并读取特征值",text:"连接设备并读取特征值",depth:3},{id:"写入数据并订阅通知",text:"写入数据并订阅通知",depth:3},{id:"注意事项",text:"注意事项",depth:2}],title:"蓝牙外设",headingTitle:"",frontmatter:{title:"蓝牙外设",description:"表示一个 BLE 外围设备对象，支持读取设备信息、连接状态、发现服务与特征值、读取写入数据、订阅通知等。",tag:"PRO"}}}}]);