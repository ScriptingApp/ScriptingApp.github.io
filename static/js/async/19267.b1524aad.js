"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["19267"],{42126(s,e,r){r.r(e),r.d(e,{default:()=>l});var n=r(74848),i=r(28453);function o(s){let e={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:["The ",(0,n.jsx)(e.code,{children:"HttpServer"})," class provides a lightweight local HTTP server that can handle HTTP requests, serve static files, and manage WebSocket connections. It is commonly used for local debugging, communication between devices, and serving simple web APIs inside scripts."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"overview",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#overview",children:"#"}),"Overview"]}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"HttpServer"})," supports:"]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Handling custom HTTP routes with programmable handlers"}),"\n",(0,n.jsx)(e.li,{children:"Serving static files or directories"}),"\n",(0,n.jsx)(e.li,{children:"Managing WebSocket connections for real-time communication"}),"\n",(0,n.jsx)(e.li,{children:"Listening on both IPv4 and IPv6"}),"\n",(0,n.jsx)(e.li,{children:"Configurable ports (including automatic random ports)"}),"\n",(0,n.jsx)(e.li,{children:"Server state tracking"}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"properties",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#properties",children:"#"}),"Properties"]}),"\n",(0,n.jsxs)(e.h3,{id:"state-httpserverstate",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#state-httpserverstate",children:"#"}),(0,n.jsx)(e.code,{children:"state: HttpServerState"})]}),"\n",(0,n.jsx)(e.p,{children:"The current state of the server."}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"State"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:'"starting"'})}),(0,n.jsx)(e.td,{children:"The server is starting."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:'"running"'})}),(0,n.jsx)(e.td,{children:"The server is running."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:'"stopping"'})}),(0,n.jsx)(e.td,{children:"The server is stopping."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:'"stopped"'})}),(0,n.jsx)(e.td,{children:"The server is stopped."})]})]})]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"port-number--null",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#port-number--null",children:"#"}),(0,n.jsx)(e.code,{children:"port: number | null"})]}),"\n",(0,n.jsxs)(e.p,{children:["The port number the server is listening on.\nIf the server is not running, this value is ",(0,n.jsx)(e.code,{children:"null"}),"."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"isipv4-boolean",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#isipv4-boolean",children:"#"}),(0,n.jsx)(e.code,{children:"isIPv4: boolean"})]}),"\n",(0,n.jsxs)(e.p,{children:["Indicates whether the server is listening on an IPv4 address.\nIf ",(0,n.jsx)(e.code,{children:"false"}),", the server may be using IPv6."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"listenaddressipv4-string--null",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#listenaddressipv4-string--null",children:"#"}),(0,n.jsx)(e.code,{children:"listenAddressIPv4: string | null"})]}),"\n",(0,n.jsxs)(e.p,{children:["The IPv4 address to listen on.\nOnly used when ",(0,n.jsx)(e.code,{children:"forceIPv4"})," is set to ",(0,n.jsx)(e.code,{children:"true"}),"."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"listenaddressipv6-string--null",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#listenaddressipv6-string--null",children:"#"}),(0,n.jsx)(e.code,{children:"listenAddressIPv6: string | null"})]}),"\n",(0,n.jsxs)(e.p,{children:["The IPv6 address to listen on.\nOnly used when ",(0,n.jsx)(e.code,{children:"forceIPv6"})," is set to ",(0,n.jsx)(e.code,{children:"true"}),"."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"methods",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#methods",children:"#"}),"Methods"]}),"\n",(0,n.jsxs)(e.h3,{id:"registerhandlerpath-string-handler-request-httprequest--httpresponse-void",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#registerhandlerpath-string-handler-request-httprequest--httpresponse-void",children:"#"}),(0,n.jsx)(e.code,{children:"registerHandler(path: string, handler: (request: HttpRequest) => HttpResponse): void"})]}),"\n",(0,n.jsx)(e.p,{children:"Registers a handler for a specific request path."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Name"}),(0,n.jsx)(e.th,{children:"Type"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"path"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"string"})}),(0,n.jsxs)(e.td,{children:["The route path (supports parameters, e.g., ",(0,n.jsx)(e.code,{children:"/user/:id"}),")."]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"handler"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"(request: HttpRequest) => HttpResponse"})}),(0,n.jsx)(e.td,{children:"The handler function that processes the request and returns a response."})]})]})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Example:"})}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" new"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" HttpServer"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".registerHandler"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/hello"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (req) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" HttpResponse"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".ok"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"HttpResponseBody"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".text"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Hello, world!"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"))"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"})"})})]})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"registerfilepath-string-filepath-string-void",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#registerfilepath-string-filepath-string-void",children:"#"}),(0,n.jsx)(e.code,{children:"registerFile(path: string, filePath: string): void"})]}),"\n",(0,n.jsx)(e.p,{children:"Registers a single static file for a specific path."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Name"}),(0,n.jsx)(e.th,{children:"Type"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"path"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"string"})}),(0,n.jsx)(e.td,{children:"The HTTP request path."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"filePath"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"string"})}),(0,n.jsx)(e.td,{children:"The local file path to serve."})]})]})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Example:"})}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".registerFile"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/readme"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" Path"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".join"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Script"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:".directory"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "README.md"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"))"})]})})})}),"\n",(0,n.jsxs)(e.p,{children:["Accessing ",(0,n.jsx)(e.code,{children:"/readme"})," in the browser returns the file content."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"registerfilesfromdirectorypath-string-directory-string-options--defaults-string--void",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#registerfilesfromdirectorypath-string-directory-string-options--defaults-string--void",children:"#"}),(0,n.jsx)(e.code,{children:"registerFilesFromDirectory(path: string, directory: string, options?: { defaults?: string[] }): void"})]}),"\n",(0,n.jsx)(e.p,{children:"Registers a directory of static files to serve."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Name"}),(0,n.jsx)(e.th,{children:"Type"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"path"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"string"})}),(0,n.jsxs)(e.td,{children:["The URL path template, e.g., ",(0,n.jsx)(e.code,{children:"/static/:file"}),"."]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"directory"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"string"})}),(0,n.jsx)(e.td,{children:"The directory path to serve from."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"options.defaults"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"string[]"})}),(0,n.jsxs)(e.td,{children:["Default files to serve if no filename is provided (default: ",(0,n.jsx)(e.code,{children:'["index.html", "default.html"]'}),")."]})]})]})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Example:"})}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".registerFilesFromDirectory"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/static/:file"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" Path"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".join"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Script"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:".directory"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "html"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  defaults"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"index.html"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "index.htm"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"})"})})]})})}),"\n",(0,n.jsxs)(e.p,{children:["When accessing ",(0,n.jsx)(e.code,{children:"/static/"}),", the server automatically serves the default index file."]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"registerwebsocketpath-string-handlers-websockethandlers-void",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#registerwebsocketpath-string-handlers-websockethandlers-void",children:"#"}),(0,n.jsx)(e.code,{children:"registerWebsocket(path: string, handlers: WebSocketHandlers): void"})]}),"\n",(0,n.jsx)(e.p,{children:"Registers a WebSocket handler for the specified path."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Name"}),(0,n.jsx)(e.th,{children:"Type"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"path"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"string"})}),(0,n.jsx)(e.td,{children:"The WebSocket endpoint path."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"handlers"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"WebSocketHandlers"})}),(0,n.jsx)(e.td,{children:"The WebSocket event handler functions."})]})]})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"WebSocketHandlers type definition:"})}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"interface"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" WebSocketHandlers"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  onPong"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" WebSocketSession"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" void"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  onConnected"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" WebSocketSession"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" void"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  onDisconnected"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" WebSocketSession"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" void"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  handleText"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" WebSocketSession"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" text"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" void"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  handleBinary"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" WebSocketSession"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" data"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" Data"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" void"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Example:"})}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" connectedSessions"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" WebSocketSession"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" []"})]}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".registerWebsocket"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/ws"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  onConnected"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"    connectedSessions"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".push"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(session)"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  onDisconnected"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"    connectedSessions"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".splice"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"connectedSessions"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".indexOf"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(session)"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 1"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  handleText"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" text) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"    session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".writeText"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Echo: "'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" +"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" text)"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"})"})})]})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"startoptions--port-number-forceipv4-boolean--string--null",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#startoptions--port-number-forceipv4-boolean--string--null",children:"#"}),(0,n.jsx)(e.code,{children:"start(options?: { port?: number; forceIPv4?: boolean }): string | null"})]}),"\n",(0,n.jsx)(e.p,{children:"Starts the HTTP server."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Parameters:"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Name"}),(0,n.jsx)(e.th,{children:"Type"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"options.port"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"number"})}),(0,n.jsxs)(e.td,{children:["The port to listen on (default: ",(0,n.jsx)(e.code,{children:"8080"}),"). If ",(0,n.jsx)(e.code,{children:"0"})," is specified, a random available port is chosen."]})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"options.forceIPv4"})}),(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"boolean"})}),(0,n.jsxs)(e.td,{children:["Whether to force IPv4 listening (default: ",(0,n.jsx)(e.code,{children:"false"}),")."]})]})]})]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Returns:"})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["Returns ",(0,n.jsx)(e.code,{children:"null"})," if the server starts successfully."]}),"\n",(0,n.jsx)(e.li,{children:"Returns an error message string if the server fails to start."}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Example:"})}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" error"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".start"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"({ port"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 8080"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" })"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (error) {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"  console"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".error"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Failed to start:"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" error)"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"} "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"  console"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Server running on port:"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:".port)"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"stop-void",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#stop-void",children:"#"}),(0,n.jsx)(e.code,{children:"stop(): void"})]}),"\n",(0,n.jsx)(e.p,{children:"Stops the HTTP server and releases its resources."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Example:"})}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".stop"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"console"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Server stopped"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})]})]})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"type-definitions",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#type-definitions",children:"#"}),"Type Definitions"]}),"\n",(0,n.jsxs)(e.h3,{id:"httpserverstate",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#httpserverstate",children:"#"}),(0,n.jsx)(e.code,{children:"HttpServerState"})]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" HttpServerState"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "starting"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "running"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "stopping"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "stopped"'})]})})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"websocketsession",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#websocketsession",children:"#"}),(0,n.jsx)(e.code,{children:"WebSocketSession"})]}),"\n",(0,n.jsx)(e.p,{children:"Represents a live WebSocket connection."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"Methods:"})}),"\n",(0,n.jsxs)(e.table,{children:[(0,n.jsx)(e.thead,{children:(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.th,{children:"Method"}),(0,n.jsx)(e.th,{children:"Description"})]})}),(0,n.jsxs)(e.tbody,{children:[(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"writeText(text: string)"})}),(0,n.jsx)(e.td,{children:"Sends a text message to the client."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"writeData(data: Data)"})}),(0,n.jsx)(e.td,{children:"Sends a binary message to the client."})]}),(0,n.jsxs)(e.tr,{children:[(0,n.jsx)(e.td,{children:(0,n.jsx)(e.code,{children:"close()"})}),(0,n.jsx)(e.td,{children:"Closes the connection."})]})]})]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"full-example",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#full-example",children:"#"}),"Full Example"]}),"\n",(0,n.jsx)(e.p,{children:"Below is a complete example of a working HTTP + WebSocket server:"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" new"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" HttpServer"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// Register a simple HTTP route"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".registerHandler"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/api/hello"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (req) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" HttpResponse"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".ok"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"HttpResponseBody"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".text"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Hello from Scripting Server"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"))"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"})"})}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// Serve static files from a directory"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".registerFilesFromDirectory"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/public/:file"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" Path"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".join"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Script"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:".directory"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "html"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"))"})]}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// WebSocket chat example"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".registerWebsocket"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"/chat"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  onConnected"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"    console"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Client connected"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"    session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".writeText"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Welcome to the chat"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  handleText"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" text) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"    console"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Received:"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" text)"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"    session"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".writeText"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"You said: "'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" +"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" text)"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"})"})}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"// Start the server"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" error"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".start"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"({ port"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 8080"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" })"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"if"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (error) {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"  console"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".error"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Server failed to start:"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" error)"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"} "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"  console"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"HTTP Server started on port:"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" server"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:".port)"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})})]})}function l(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(o,{...s})}):o(s)}l.__RSPRESS_PAGE_META={},l.__RSPRESS_PAGE_META["en%2Fdoc%2FUtilities%2FHttpServer%2FHttpServer.mdx"]={toc:[{id:"overview",text:"Overview",depth:2},{id:"properties",text:"Properties",depth:2},{id:"state-httpserverstate",text:"`state: HttpServerState`",depth:3},{id:"port-number--null",text:"`port: number | null`",depth:3},{id:"isipv4-boolean",text:"`isIPv4: boolean`",depth:3},{id:"listenaddressipv4-string--null",text:"`listenAddressIPv4: string | null`",depth:3},{id:"listenaddressipv6-string--null",text:"`listenAddressIPv6: string | null`",depth:3},{id:"methods",text:"Methods",depth:2},{id:"registerhandlerpath-string-handler-request-httprequest--httpresponse-void",text:"`registerHandler(path: string, handler: (request: HttpRequest) => HttpResponse): void`",depth:3},{id:"registerfilepath-string-filepath-string-void",text:"`registerFile(path: string, filePath: string): void`",depth:3},{id:"registerfilesfromdirectorypath-string-directory-string-options--defaults-string--void",text:"`registerFilesFromDirectory(path: string, directory: string, options?: { defaults?: string[] }): void`",depth:3},{id:"registerwebsocketpath-string-handlers-websockethandlers-void",text:"`registerWebsocket(path: string, handlers: WebSocketHandlers): void`",depth:3},{id:"startoptions--port-number-forceipv4-boolean--string--null",text:"`start(options?: { port?: number; forceIPv4?: boolean }): string | null`",depth:3},{id:"stop-void",text:"`stop(): void`",depth:3},{id:"type-definitions",text:"Type Definitions",depth:2},{id:"httpserverstate",text:"`HttpServerState`",depth:3},{id:"websocketsession",text:"`WebSocketSession`",depth:3},{id:"full-example",text:"Full Example",depth:2}],title:"HttpServer",headingTitle:"",frontmatter:{title:"HttpServer",tag:"PRO"}}}}]);