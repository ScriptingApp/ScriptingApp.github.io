"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["43198"],{83885(r,e,n){n.r(e),n.d(e,{default:()=>d});var s=n(74848),i=n(28453);function l(r){let e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:"Scripting 提供了一套与 SwiftUI Drag & Drop 行为模型高度一致的 API，用于在脚本中实现视图间、应用内或跨应用的拖拽与放置操作。"}),"\n",(0,s.jsx)(e.p,{children:"该能力主要由以下三部分构成："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"onDrag"}),"：将当前视图声明为拖拽源"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"onDrop"}),"：将当前视图声明为放置目标"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"DropInfo / ItemProvider / UTType"}),"：描述拖拽内容与状态的上下文对象"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"拖拽与放置是一个严格受系统控制的交互流程，部分 API 只能在特定回调中调用，文档中会明确指出这些限制。"}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h2,{id:"核心数据类型",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#核心数据类型",children:"#"}),"核心数据类型"]}),"\n",(0,s.jsxs)(e.h3,{id:"dropinfo",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dropinfo",children:"#"}),"DropInfo"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"DropInfo"})," 描述一次拖拽在当前放置视图上的实时状态。该对象仅在 ",(0,s.jsx)(e.code,{children:"onDrop"})," 相关回调中有效。"]}),"\n",(0,s.jsxs)(e.h4,{id:"属性",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#属性",children:"#"}),"属性"]}),"\n",(0,s.jsxs)(e.h5,{id:"location-point",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#location-point",children:"#"}),"location: Point"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"表示拖拽当前位置"}),"\n",(0,s.jsxs)(e.li,{children:["坐标空间为 ",(0,s.jsx)(e.strong,{children:"放置视图自身的本地坐标系"})]}),"\n",(0,s.jsx)(e.li,{children:"可用于实现基于位置的高亮、插入指示线、排序逻辑等"}),"\n"]}),"\n",(0,s.jsxs)(e.h4,{id:"方法",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#方法",children:"#"}),"方法"]}),"\n",(0,s.jsxs)(e.h5,{id:"hasitemsconformingtypes-uttype-boolean",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#hasitemsconformingtypes-uttype-boolean",children:"#"}),"hasItemsConforming(types: UTType[]): boolean"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"用于判断拖拽内容中，是否至少有一个项目符合指定的 UTType"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"常用于："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"validateDrop"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"dropEntered"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.code,{children:"dropUpdated"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"不会实际加载数据，仅用于能力判断"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.h5,{id:"itemproviderstypes-uttype-itemprovider",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#itemproviderstypes-uttype-itemprovider",children:"#"}),"itemProviders(types: UTType[]): ItemProvider[]"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["返回符合指定 UTType 的 ",(0,s.jsx)(e.code,{children:"ItemProvider"})," 列表"]}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsxs)(e.strong,{children:["仅允许在 ",(0,s.jsx)(e.code,{children:"performDrop"})," 回调中调用"]})}),"\n",(0,s.jsx)(e.li,{children:"在该方法返回后，系统将撤销对拖拽数据的访问权限"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsxs)(e.p,{children:["重要约束\n必须在 ",(0,s.jsx)(e.code,{children:"performDrop"})," 方法作用域内 ",(0,s.jsx)(e.strong,{children:"立即开始"})," 对 ItemProvider 的数据加载（如 ",(0,s.jsx)(e.code,{children:"loadData"}),"、",(0,s.jsx)(e.code,{children:"loadText"}),"）。\n不允许延迟到其他回调或异步逻辑中再发起加载。"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h2,{id:"dropoperation",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dropoperation",children:"#"}),"DropOperation"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"DropOperation"})," 用于描述当前拖拽更新阶段，目标视图期望执行的操作类型。"]}),"\n",(0,s.jsx)(e.p,{children:"可选值如下："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'"copy"'}),"\n表示复制数据（最常见，用于文件、文本、图片等）"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'"move"'}),"\n表示移动数据（通常仅用于应用内部拖拽）"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'"cancel"'}),"\n取消本次拖拽，不执行任何数据传输"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:'"forbidden"'}),"\n明确禁止当前拖拽行为，系统通常会显示禁止指示"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"DropOperation"})," 通常由 ",(0,s.jsx)(e.code,{children:"dropUpdated"})," 回调返回，用于动态控制拖拽行为。"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h2,{id:"dragdropprops",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dragdropprops",children:"#"}),"DragDropProps"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.code,{children:"DragDropProps"})," 是所有支持拖拽与放置能力的视图可选属性集合。"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h2,{id:"ondrag",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ondrag",children:"#"}),"onDrag"]}),"\n",(0,s.jsxs)(e.h3,{id:"用途",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#用途",children:"#"}),"用途"]}),"\n",(0,s.jsxs)(e.p,{children:["将当前视图声明为 ",(0,s.jsx)(e.strong,{children:"拖拽源"}),"，允许用户从该视图开始一次拖拽操作。"]}),"\n",(0,s.jsxs)(e.h3,{id:"定义",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#定义",children:"#"}),"定义"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsxs)(e.code,{children:[(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"onDrag"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  data"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ItemProvider"})]}),"\n",(0,s.jsx)(e.span,{className:"line",children:(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  preview: VirtualNode"})}),"\n",(0,s.jsx)(e.span,{className:"line",children:(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,s.jsxs)(e.h3,{id:"参数说明",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#参数说明",children:"#"}),"参数说明"]}),"\n",(0,s.jsxs)(e.h4,{id:"data",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#data",children:"#"}),"data"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"data"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ItemProvider"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["返回一个 ",(0,s.jsx)(e.code,{children:"ItemProvider"})]}),"\n",(0,s.jsx)(e.li,{children:"用于描述拖拽时传递的数据内容"}),"\n",(0,s.jsx)(e.li,{children:"支持文本、图片、文件、URL、自定义类型等"}),"\n",(0,s.jsx)(e.li,{children:"每次拖拽开始时调用"}),"\n"]}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"建议\n仅在该回调中构造 ItemProvider，不要复用旧实例，以确保数据状态正确。"}),"\n"]}),"\n",(0,s.jsxs)(e.h4,{id:"preview",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#preview",children:"#"}),"preview"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"preview"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" VirtualNode"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"指定拖拽开始后显示的预览视图"}),"\n",(0,s.jsx)(e.li,{children:"系统会自动将其渲染为拖拽浮层"}),"\n",(0,s.jsx)(e.li,{children:"预览视图默认居中于源视图"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h2,{id:"ondrop",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ondrop",children:"#"}),"onDrop"]}),"\n",(0,s.jsxs)(e.h3,{id:"用途-1",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#用途-1",children:"#"}),"用途"]}),"\n",(0,s.jsxs)(e.p,{children:["将当前视图声明为 ",(0,s.jsx)(e.strong,{children:"放置目标"}),"，并通过一组回调精细控制拖拽验证、状态变化与最终数据接收。"]}),"\n",(0,s.jsxs)(e.h3,{id:"定义-1",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#定义-1",children:"#"}),"定义"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsxs)(e.code,{children:[(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"onDrop"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  types"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" UTType[]"})]}),"\n",(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  validateDrop"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  dropEntered"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]}),"\n",(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  dropUpdated"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" DropOperation "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" null"})]}),"\n",(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  dropExited"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]}),"\n",(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  performDrop: (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,s.jsx)(e.span,{className:"line",children:(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h3,{id:"ondroptypes",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#ondroptypes",children:"#"}),"onDrop.types"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"types"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" UTType[]"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["声明该视图 ",(0,s.jsx)(e.strong,{children:"允许接收的内容类型"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"如果拖拽内容不包含任意一个匹配类型："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"放置区域不会激活"}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"validateDrop"})," 不会被调用"]}),"\n",(0,s.jsx)(e.li,{children:"视觉高亮不会出现"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h3,{id:"validatedrop",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#validatedrop",children:"#"}),"validateDrop"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"validateDrop"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"用于判断是否允许开始一次放置操作"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["返回 ",(0,s.jsx)(e.code,{children:"false"})," 将直接拒绝拖拽"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"常见用途："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"检查类型数量"}),"\n",(0,s.jsx)(e.li,{children:"校验业务状态（如只允许空列表接收）"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:["默认行为：始终返回 ",(0,s.jsx)(e.code,{children:"true"})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h3,{id:"dropentered",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dropentered",children:"#"}),"dropEntered"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"dropEntered"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"当拖拽进入放置区域时触发"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"通常用于："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"显示高亮"}),"\n",(0,s.jsx)(e.li,{children:"显示插入占位符"}),"\n",(0,s.jsx)(e.li,{children:"触发动画状态"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h3,{id:"dropupdated",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dropupdated",children:"#"}),"dropUpdated"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"dropUpdated"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" DropOperation "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" null"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"当拖拽在放置区域内部移动时反复调用"}),"\n",(0,s.jsxs)(e.li,{children:["用于动态返回期望的 ",(0,s.jsx)(e.code,{children:"DropOperation"})]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"返回值说明："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["返回具体的 ",(0,s.jsx)(e.code,{children:"DropOperation"}),"：更新当前拖拽行为"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:["返回 ",(0,s.jsx)(e.code,{children:"null"}),"："]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"使用上一次返回的有效值"}),"\n",(0,s.jsxs)(e.li,{children:["若没有历史值，默认使用 ",(0,s.jsx)(e.code,{children:'"copy"'})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h3,{id:"dropexited",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dropexited",children:"#"}),"dropExited"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"dropExited"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"当拖拽离开放置区域时触发"}),"\n",(0,s.jsx)(e.li,{children:"常用于清理高亮、移除占位 UI"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h3,{id:"performdrop",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#performdrop",children:"#"}),"performDrop"]}),"\n",(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,s.jsx)(e.code,{children:(0,s.jsxs)(e.span,{className:"line",children:[(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"performDrop"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (info"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" DropInfo"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,s.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"最关键的回调"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"表示用户已松手，系统允许你读取拖拽数据"}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"返回值："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"true"}),"：表示成功接收并处理了拖拽"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"false"}),"：表示放置失败"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.h4,{id:"重要约束必须遵守",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#重要约束必须遵守",children:"#"}),"重要约束（必须遵守）"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"必须在该方法作用域内："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["调用 ",(0,s.jsx)(e.code,{children:"info.itemProviders(...)"})]}),"\n",(0,s.jsx)(e.li,{children:"并立即开始数据加载"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"不允许："}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"将 ItemProvider 保存到外部"}),"\n",(0,s.jsx)(e.li,{children:"在异步回调中延迟访问拖拽数据"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"这是系统级安全限制，不遵守将导致数据无法访问。"}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h2,{id:"典型使用流程总结",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#典型使用流程总结",children:"#"}),"典型使用流程总结"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["用户从 ",(0,s.jsx)(e.code,{children:"onDrag"})," 视图开始拖拽"]}),"\n",(0,s.jsxs)(e.li,{children:["系统根据 ",(0,s.jsx)(e.code,{children:"onDrop.types"})," 判断是否激活目标"]}),"\n",(0,s.jsxs)(e.li,{children:["调用 ",(0,s.jsx)(e.code,{children:"validateDrop"})]}),"\n",(0,s.jsxs)(e.li,{children:["进入放置区域 → ",(0,s.jsx)(e.code,{children:"dropEntered"})]}),"\n",(0,s.jsxs)(e.li,{children:["移动过程中 → 多次 ",(0,s.jsx)(e.code,{children:"dropUpdated"})]}),"\n",(0,s.jsxs)(e.li,{children:["离开区域 → ",(0,s.jsx)(e.code,{children:"dropExited"})]}),"\n",(0,s.jsxs)(e.li,{children:["松手 → ",(0,s.jsx)(e.code,{children:"performDrop"})]}),"\n",(0,s.jsxs)(e.li,{children:["在 ",(0,s.jsx)(e.code,{children:"performDrop"})," 中读取并处理数据"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.h2,{id:"设计建议与最佳实践",children:[(0,s.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#设计建议与最佳实践",children:"#"}),"设计建议与最佳实践"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["始终精确声明 ",(0,s.jsx)(e.code,{children:"UTType"}),"，避免过于宽泛"]}),"\n",(0,s.jsxs)(e.li,{children:["在 ",(0,s.jsx)(e.code,{children:"dropUpdated"})," 中返回 ",(0,s.jsx)(e.code,{children:'"forbidden"'})," 可显式阻止非法拖拽"]}),"\n",(0,s.jsxs)(e.li,{children:["复杂数据解析逻辑应在 ",(0,s.jsx)(e.code,{children:"ItemProvider"})," 加载完成后的异步回调中完成，而不是在 ",(0,s.jsx)(e.code,{children:"performDrop"})," 中同步阻塞"]}),"\n",(0,s.jsx)(e.li,{children:"跨应用拖拽时，优先使用系统标准类型（text、image、file、url）"}),"\n"]})]})}function d(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}={...(0,i.R)(),...r.components};return e?(0,s.jsx)(e,{...r,children:(0,s.jsx)(l,{...r})}):l(r)}d.__RSPRESS_PAGE_META={},d.__RSPRESS_PAGE_META["v2%2Fzh%2Fguide%2FView%20Modifiers%2FonDrag%20and%20onDrop%20View%20Modifiers.md"]={toc:[{id:"核心数据类型",text:"核心数据类型",depth:2},{id:"dropinfo",text:"DropInfo",depth:3},{id:"属性",text:"属性",depth:4},{id:"方法",text:"方法",depth:4},{id:"dropoperation",text:"DropOperation",depth:2},{id:"dragdropprops",text:"DragDropProps",depth:2},{id:"ondrag",text:"onDrag",depth:2},{id:"用途",text:"用途",depth:3},{id:"定义",text:"定义",depth:3},{id:"参数说明",text:"参数说明",depth:3},{id:"data",text:"data",depth:4},{id:"preview",text:"preview",depth:4},{id:"ondrop",text:"onDrop",depth:2},{id:"用途-1",text:"用途",depth:3},{id:"定义-1",text:"定义",depth:3},{id:"ondroptypes",text:"onDrop.types",depth:3},{id:"validatedrop",text:"validateDrop",depth:3},{id:"dropentered",text:"dropEntered",depth:3},{id:"dropupdated",text:"dropUpdated",depth:3},{id:"dropexited",text:"dropExited",depth:3},{id:"performdrop",text:"performDrop",depth:3},{id:"重要约束必须遵守",text:"重要约束（必须遵守）",depth:4},{id:"典型使用流程总结",text:"典型使用流程总结",depth:2},{id:"设计建议与最佳实践",text:"设计建议与最佳实践",depth:2}],title:"onDrag 和 onDrop 修饰符",headingTitle:"",frontmatter:{title:"onDrag 和 onDrop 修饰符",description:"这些 API 允许视图作为拖动源、拖放目标或者同时，支持内部应用和跨应用拖拽。"}}}}]);