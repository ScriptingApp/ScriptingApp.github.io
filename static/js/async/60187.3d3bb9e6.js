"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["60187"],{23113(n,s,e){e.r(s),e.d(s,{default:()=>a});var r=e(74848),i=e(28453);function l(n){let s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"本章节介绍 SQLite 数据库的打开方式、连接配置以及与连接生命周期相关的行为说明。"}),"\n",(0,r.jsxs)(s.p,{children:["SQLite 在 Scripting 中以",(0,r.jsx)(s.strong,{children:"全局命名空间"}),"的形式提供，无需导入即可直接使用。"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"打开数据库",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#打开数据库",children:"#"}),"打开数据库"]}),"\n",(0,r.jsxs)(s.h3,{id:"打开磁盘数据库",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#打开磁盘数据库",children:"#"}),"打开磁盘数据库"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" dbPath"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" Path"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".join"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"  FileManager"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".appGroupDocumentsDirectory"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "app.db"'})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" SQLite"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".open"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(dbPath)"})]})]})})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"SQLite.open"})," 用于打开或创建一个位于脚本数据目录中的 SQLite 数据库。"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"如果数据库文件不存在，将自动创建"}),"\n",(0,r.jsxs)(s.li,{children:["多次调用 ",(0,r.jsx)(s.code,{children:"open"})," 打开同一路径，内部会复用数据库资源"]}),"\n",(0,r.jsxs)(s.li,{children:["返回的 ",(0,r.jsx)(s.code,{children:"Database"})," 实例用于后续所有数据库操作"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"打开内存数据库",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#打开内存数据库",children:"#"}),"打开内存数据库"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" SQLite"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".openInMemory"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"temp"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})]})})})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"SQLite.openInMemory"})," 用于创建一个仅存在于内存中的数据库。"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"内存数据库不会写入磁盘"}),"\n",(0,r.jsx)(s.li,{children:"当脚本结束或数据库被释放时，数据将全部丢失"}),"\n",(0,r.jsx)(s.li,{children:"适用于临时计算、测试或中间结果处理场景"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"name"})," 参数用于区分不同的内存数据库实例。"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"数据库配置configuration",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#数据库配置configuration",children:"#"}),"数据库配置（Configuration）"]}),"\n",(0,r.jsx)(s.p,{children:"在打开数据库时，可以传入可选的配置对象："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" SQLite"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".open"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(dbPath"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  foreignKeysEnabled"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" true"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  readonly"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" false"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  journalMode"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "wal"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  busyMode"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 5"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  maximumReaderCount"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 5"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  label"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "main-db"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"})"})})]})})}),"\n",(0,r.jsxs)(s.h3,{id:"foreignkeysenabled",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#foreignkeysenabled",children:"#"}),"foreignKeysEnabled"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"foreignKeysEnabled"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"是否启用外键约束。"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"true"}),"：启用 SQLite 外键约束（等同于 ",(0,r.jsx)(s.code,{children:"PRAGMA foreign_keys = ON"}),"）"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"false"}),"：禁用外键约束"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"建议在需要使用外键约束时显式开启。"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"readonly",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#readonly",children:"#"}),"readonly"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"readonly"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"是否以只读模式打开数据库。"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"true"}),"：数据库仅允许查询操作，所有写操作将失败"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"false"}),"：允许读写操作"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"只读模式适用于："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"数据浏览工具"}),"\n",(0,r.jsx)(s.li,{children:"只读分析脚本"}),"\n",(0,r.jsx)(s.li,{children:"防止意外修改数据的场景"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"journalmode",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#journalmode",children:"#"}),"journalMode"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"journalMode"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "wal"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "default"'})]})})})}),"\n",(0,r.jsx)(s.p,{children:"设置数据库的日志模式。"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:'"wal"'}),"：启用 Write-Ahead Logging，适合并发读写场景"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:'"default"'}),"：使用 SQLite 默认日志模式"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["在多数应用场景下，推荐使用 ",(0,r.jsx)(s.code,{children:'"wal"'}),"。"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"busymode",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#busymode",children:"#"}),"busyMode"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"busyMode"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "immediateError"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" |"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" number"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"控制数据库被锁定时的行为。"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:'"immediateError"'}),"：如果数据库被占用，立即抛出错误"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"number"}),"：表示等待锁释放的最长时间（单位：秒）"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"示例："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"busyMode"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 3"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"表示在数据库被锁定时，最多等待 3 秒。"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"maximumreadercount",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#maximumreadercount",children:"#"}),"maximumReaderCount"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"maximumReaderCount"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" number"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"限制同时存在的最大读取连接数量。"}),"\n",(0,r.jsx)(s.p,{children:"该配置用于控制并发读取行为，防止在高并发场景下占用过多系统资源。"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"较小的值可以减少资源占用"}),"\n",(0,r.jsx)(s.li,{children:"较大的值可以提高并发读取能力"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"label",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#label",children:"#"}),"label"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"label"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" string "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" null"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"为数据库连接指定一个可读标签。"}),"\n",(0,r.jsx)(s.p,{children:"该标签主要用于："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"调试"}),"\n",(0,r.jsx)(s.li,{children:"日志输出"}),"\n",(0,r.jsx)(s.li,{children:"内部诊断"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"对数据库行为本身没有影响。"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"database-实例说明",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#database-实例说明",children:"#"}),"Database 实例说明"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"SQLite.open"})," 和 ",(0,r.jsx)(s.code,{children:"SQLite.openInMemory"})," 返回一个 ",(0,r.jsx)(s.code,{children:"Database"})," 实例。"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(s.code,{children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" Database"})]})})})}),"\n",(0,r.jsx)(s.p,{children:"该实例："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"表示一个逻辑数据库连接"}),"\n",(0,r.jsx)(s.li,{children:"是所有 SQL 执行、事务和 Schema 操作的入口"}),"\n",(0,r.jsx)(s.li,{children:"不暴露底层连接、线程或队列细节"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"开发者无需关心数据库连接的创建、销毁或线程调度。"}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"并发与线程模型说明",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#并发与线程模型说明",children:"#"}),"并发与线程模型说明"]}),"\n",(0,r.jsx)(s.p,{children:"SQLite 的并发控制和线程调度由 Scripting 内部处理："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"JavaScript 侧不会直接接触多线程"}),"\n",(0,r.jsx)(s.li,{children:"所有数据库操作通过内部队列串行或受控并发执行"}),"\n",(0,r.jsxs)(s.li,{children:["配置项（如 ",(0,r.jsx)(s.code,{children:"busyMode"}),"、",(0,r.jsx)(s.code,{children:"maximumReaderCount"}),"）用于影响内部调度策略"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"这使得 SQLite API 在脚本层面具备以下特性："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"行为可预测"}),"\n",(0,r.jsx)(s.li,{children:"不需要手动加锁"}),"\n",(0,r.jsx)(s.li,{children:"不会出现跨线程访问问题"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"使用建议",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#使用建议",children:"#"}),"使用建议"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"需要长期持久化数据时，使用磁盘数据库"}),"\n",(0,r.jsx)(s.li,{children:"临时计算或测试场景，使用内存数据库"}),"\n",(0,r.jsxs)(s.li,{children:["有外键依赖时，显式开启 ",(0,r.jsx)(s.code,{children:"foreignKeysEnabled"})]}),"\n",(0,r.jsxs)(s.li,{children:["并发读写较多时，启用 ",(0,r.jsx)(s.code,{children:'"wal"'})," 日志模式"]}),"\n",(0,r.jsx)(s.li,{children:"工具型脚本或分析脚本可考虑只读模式"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"下一步",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#下一步",children:"#"}),"下一步"]}),"\n",(0,r.jsx)(s.p,{children:"完成数据库连接后，通常会继续以下操作："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"执行 SQL 与查询数据"}),"\n",(0,r.jsx)(s.li,{children:"使用事务批量写入数据"}),"\n",(0,r.jsx)(s.li,{children:"创建或管理表和索引"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"请继续阅读后续文档："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"Executing SQL & Queries"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"Transactions"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.strong,{children:"Schema Management"})}),"\n"]})]})}function a(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...n.components};return s?(0,r.jsx)(s,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["TestFlight%2Fzh%2Fguide%2FUtilities%2FSQLite%2FDatabase%20and%20Connection.md"]={toc:[{id:"打开数据库",text:"打开数据库",depth:2},{id:"打开磁盘数据库",text:"打开磁盘数据库",depth:3},{id:"打开内存数据库",text:"打开内存数据库",depth:3},{id:"数据库配置configuration",text:"数据库配置（Configuration）",depth:2},{id:"foreignkeysenabled",text:"foreignKeysEnabled",depth:3},{id:"readonly",text:"readonly",depth:3},{id:"journalmode",text:"journalMode",depth:3},{id:"busymode",text:"busyMode",depth:3},{id:"maximumreadercount",text:"maximumReaderCount",depth:3},{id:"label",text:"label",depth:3},{id:"database-实例说明",text:"Database 实例说明",depth:2},{id:"并发与线程模型说明",text:"并发与线程模型说明",depth:2},{id:"使用建议",text:"使用建议",depth:2},{id:"下一步",text:"下一步",depth:2}],title:"数据库和连接",headingTitle:"",frontmatter:{title:"数据库和连接",description:"介绍 SQLite 数据库的打开方式、连接配置以及与连接生命周期相关的行为说明",tag:"PRO"}}}}]);