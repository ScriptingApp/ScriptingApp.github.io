"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["31494"],{39845(e,s,n){n.r(s),n.d(s,{default:()=>c});var r=n(74848),i=n(28453);function l(e){let s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 用于 ",(0,r.jsx)(s.strong,{children:"创建并管理一个几何动画命名空间（Namespace）"}),"。\n该命名空间是实现以下能力的",(0,r.jsx)(s.strong,{children:"前提条件"}),"："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"matchedGeometryEffect"}),"（组件级几何联动动画）"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"matchedTransitionSource"}),"（页面级导航转场动画）"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"navigationTransition"}),"（如 zoom 转场）"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["可以将 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})," 理解为："]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["一个“动画坐标系提供者”，用于告诉系统：哪些视图属于",(0,r.jsx)(s.strong,{children:"同一组几何动画作用域"}),"。"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"一api-角色说明",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#一api-角色说明",children:"#"}),"一、API 角色说明"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 并不是一个普通的 UI 组件，而是一个 ",(0,r.jsx)(s.strong,{children:"命名空间生成器"}),"，用于："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["创建一个全新的 ",(0,r.jsx)(s.code,{children:"NamespaceID"})]}),"\n",(0,r.jsx)(s.li,{children:"通过 render function 方式暴露给子视图使用"}),"\n",(0,r.jsx)(s.li,{children:"作为几何匹配动画系统的“分组边界”"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"它在 Scripting 中对应 SwiftUI 的："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"@Namespace"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.code,{children:"Namespace.ID"})}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"二基本使用方式",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#二基本使用方式",children:"#"}),"二、基本使用方式"]}),"\n",(0,r.jsxs)(s.h3,{id:"1-最小用法结构",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-最小用法结构",children:"#"}),"1. 最小用法结构"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  {namespace "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 在这个作用域内"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // 使用 namespace 绑定 matchedGeometryEffect 或 matchedTransitionSource"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,r.jsx)(s.p,{children:"说明："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 是一个 ",(0,r.jsx)(s.strong,{children:"函数式子节点组件"})]}),"\n",(0,r.jsx)(s.li,{children:"其子节点必须是一个函数"}),"\n",(0,r.jsxs)(s.li,{children:["该函数的参数 ",(0,r.jsx)(s.code,{children:"namespace"})," 即为当前创建的命名空间实例"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"三namespace-的本质作用",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#三namespace-的本质作用",children:"#"}),"三、Namespace 的本质作用"]}),"\n",(0,r.jsxs)(s.h3,{id:"1-命名空间的真正含义",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-命名空间的真正含义",children:"#"}),"1. 命名空间的真正含义"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"namespace"})," 的本质作用是："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"把一组“逻辑上可能互相关联的视图”"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"显式地声明为："}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"“它们允许进行几何匹配动画”"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["如果没有相同的 ",(0,r.jsx)(s.code,{children:"namespace"}),"："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["即使两个视图的 ",(0,r.jsx)(s.code,{children:"id"})," 完全一致"]}),"\n",(0,r.jsxs)(s.li,{children:["依然 ",(0,r.jsx)(s.strong,{children:"不会产生任何几何动画"})]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"2-namespace-的隔离能力",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-namespace-的隔离能力",children:"#"}),"2. Namespace 的隔离能力"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"情况"}),(0,r.jsx)(s.th,{children:"是否发生几何匹配"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["相同 ",(0,r.jsx)(s.code,{children:"id"})," + 相同 ",(0,r.jsx)(s.code,{children:"namespace"})]}),(0,r.jsx)(s.td,{children:"会"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["相同 ",(0,r.jsx)(s.code,{children:"id"})," + 不同 ",(0,r.jsx)(s.code,{children:"namespace"})]}),(0,r.jsx)(s.td,{children:"不会"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["不同 ",(0,r.jsx)(s.code,{children:"id"})," + 相同 ",(0,r.jsx)(s.code,{children:"namespace"})]}),(0,r.jsx)(s.td,{children:"不会"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:["不同 ",(0,r.jsx)(s.code,{children:"id"})," + 不同 ",(0,r.jsx)(s.code,{children:"namespace"})]}),(0,r.jsx)(s.td,{children:"不会"})]})]})]}),"\n",(0,r.jsx)(s.p,{children:"结论："}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsxs)(s.strong,{children:["必须同时满足 ",(0,r.jsx)(s.code,{children:"id"})," 与 ",(0,r.jsx)(s.code,{children:"namespace"})," 完全一致，系统才会建立几何匹配关系。"]})}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"四namespacereader-与几何动画系统的关系",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#四namespacereader-与几何动画系统的关系",children:"#"}),"四、NamespaceReader 与几何动画系统的关系"]}),"\n",(0,r.jsxs)(s.h3,{id:"1-与-matchedgeometryeffect-的关系",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-与-matchedgeometryeffect-的关系",children:"#"}),"1. 与 matchedGeometryEffect 的关系"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"matchedGeometryEffect"})," 依赖 ",(0,r.jsx)(s.code,{children:"namespace"})," 建立“跨视图几何映射”"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 是 ",(0,r.jsx)(s.code,{children:"matchedGeometryEffect"})," 的 ",(0,r.jsx)(s.strong,{children:"前置条件"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["没有 ",(0,r.jsx)(s.code,{children:"NamespaceReader"}),"："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"matchedGeometryEffect"})," 无法工作"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"2-与-matchedtransitionsource-的关系",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-与-matchedtransitionsource-的关系",children:"#"}),"2. 与 matchedTransitionSource 的关系"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["页面级转场动画依赖 ",(0,r.jsx)(s.code,{children:"namespace"})," 来配对："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"转场源视图"}),"\n",(0,r.jsx)(s.li,{children:"目标页面"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 用于："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"在源页面生成 namespace"}),"\n",(0,r.jsx)(s.li,{children:"并传递给目标页面作为统一坐标系统"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"五最基础的-namespacereader-示例组件级",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#五最基础的-namespacereader-示例组件级",children:"#"}),"五、最基础的 NamespaceReader 示例（组件级）"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" expanded"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useObservable"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  {namespace "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      {"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"!"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"expanded"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Circle"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          matchedGeometryEffect"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "shape"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            namespace"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          onTapGesture"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"            expanded"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".setValue"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        />"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      )}"})}),"\n",(0,r.jsx)(s.span,{className:"line"}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      {"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"expanded"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"&&"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Circle"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          frame"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{ width"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 200"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" height"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" 200"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" }}"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          matchedGeometryEffect"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "shape"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            namespace"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            isSource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" false"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        />"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,r.jsx)(s.p,{children:"该示例中："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 负责创建动画坐标系"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["两个 ",(0,r.jsx)(s.code,{children:"Circle"})," 因为："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"id"})," 相同"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"namespace"})," 相同\n从而建立起几何联动关系"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"六导航转场中的-namespacereader-典型结构",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#六导航转场中的-namespacereader-典型结构",children:"#"}),"六、导航转场中的 NamespaceReader 典型结构"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,r.jsxs)(s.code,{children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  {namespace "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationLink"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      destination"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"DetailPage"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          navigationTransition"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            type"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "zoom"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            namespace"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"            sourceID"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "cover"'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        />"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    >"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Image"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        source"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"cover"'})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        matchedTransitionSource"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "cover"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          namespace"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      />"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationLink"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )}"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NamespaceReader"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,r.jsx)(s.p,{children:"该结构说明："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"namespace"})," 由 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})," 生成"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"同时被："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"源视图使用"}),"\n",(0,r.jsx)(s.li,{children:"目标页面使用"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"从而建立完整的页面级共享几何动画"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"七命名空间的生命周期与作用范围",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#七命名空间的生命周期与作用范围",children:"#"}),"七、命名空间的生命周期与作用范围"]}),"\n",(0,r.jsxs)(s.h3,{id:"1-生命周期",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-生命周期",children:"#"}),"1. 生命周期"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 每次创建："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["都会生成一个 ",(0,r.jsx)(s.strong,{children:"全新的 namespace"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"该 namespace 的生命周期："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"仅存在于当前组件树"}),"\n",(0,r.jsx)(s.li,{children:"随组件卸载而销毁"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"2-作用范围",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-作用范围",children:"#"}),"2. 作用范围"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"namespace 只对其 render function 内部的视图生效"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"不可跨越组件树自动共享"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"如果需要跨组件共享："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["必须通过 props 显式传递 ",(0,r.jsx)(s.code,{children:"namespace"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"八常见错误与排查要点",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#八常见错误与排查要点",children:"#"}),"八、常见错误与排查要点"]}),"\n",(0,r.jsxs)(s.h3,{id:"1-动画完全不生效",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-动画完全不生效",children:"#"}),"1. 动画完全不生效"]}),"\n",(0,r.jsx)(s.p,{children:"请检查："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["是否真的使用了 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})]}),"\n",(0,r.jsxs)(s.li,{children:["是否正确接收并传递了 ",(0,r.jsx)(s.code,{children:"namespace"})]}),"\n",(0,r.jsxs)(s.li,{children:["source 与 target 是否引用的是 ",(0,r.jsx)(s.strong,{children:"同一个 namespace 实例"})]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"2-动画偶尔失效不稳定",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-动画偶尔失效不稳定",children:"#"}),"2. 动画偶尔失效、不稳定"]}),"\n",(0,r.jsx)(s.p,{children:"常见原因："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"NamespaceReader"})," 被条件渲染反复销毁与重建"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"每次重建都会生成新的 namespace"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"导致旧视图与新视图："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"实际上不在同一个动画坐标系中"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"建议："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["将 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})," 放在 ",(0,r.jsx)(s.strong,{children:"稳定的父级节点"})]}),"\n",(0,r.jsxs)(s.li,{children:["避免在 ",(0,r.jsx)(s.code,{children:"if / ternary"})," 结构中频繁切换"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h3,{id:"3-多个-namespacereader-嵌套导致动画错乱",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#3-多个-namespacereader-嵌套导致动画错乱",children:"#"}),"3. 多个 NamespaceReader 嵌套导致动画错乱"]}),"\n",(0,r.jsx)(s.p,{children:"问题表现："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"id 相同"}),"\n",(0,r.jsx)(s.li,{children:"但实际 namespace 不同"}),"\n",(0,r.jsx)(s.li,{children:"系统无法建立匹配关系"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"排查思路："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"确认 source 与 target 是否真的来自："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["同一个 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})," 实例"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"九设计层面的使用建议",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#九设计层面的使用建议",children:"#"}),"九、设计层面的使用建议"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["一个独立动画区域使用一个 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["不要为每一个视图都单独创建 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"页面级动画："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"NamespaceReader 应放在整个页面的根节点"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"组件级动画："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"NamespaceReader 应包裹同一个逻辑模块"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"同一个 namespace 内："}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["不要复用相同的 ",(0,r.jsx)(s.code,{children:"id"})," 给不相关的视图"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"十适用场景总结",children:[(0,r.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#十适用场景总结",children:"#"}),"十、适用场景总结"]}),"\n",(0,r.jsxs)(s.p,{children:["适合使用 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})," 的场景："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"卡片 → 详情页的共享元素动画"}),"\n",(0,r.jsx)(s.li,{children:"Tab 指示器几何联动"}),"\n",(0,r.jsx)(s.li,{children:"图片放大预览"}),"\n",(0,r.jsx)(s.li,{children:"列表项 → 详情内容过渡"}),"\n",(0,r.jsx)(s.li,{children:"多视图间的空间连续动画"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["不需要使用 ",(0,r.jsx)(s.code,{children:"NamespaceReader"})," 的场景："]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"普通 opacity / scale 动画"}),"\n",(0,r.jsx)(s.li,{children:"单视图内部的简单过渡"}),"\n",(0,r.jsx)(s.li,{children:"不涉及跨视图几何同步的动画"}),"\n"]})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fguide%2FChangelog%2F2.4.4%2FNamespaceReader.md"]={toc:[{id:"一api-角色说明",text:"一、API 角色说明",depth:2},{id:"二基本使用方式",text:"二、基本使用方式",depth:2},{id:"1-最小用法结构",text:"1. 最小用法结构",depth:3},{id:"三namespace-的本质作用",text:"三、Namespace 的本质作用",depth:2},{id:"1-命名空间的真正含义",text:"1. 命名空间的真正含义",depth:3},{id:"2-namespace-的隔离能力",text:"2. Namespace 的隔离能力",depth:3},{id:"四namespacereader-与几何动画系统的关系",text:"四、NamespaceReader 与几何动画系统的关系",depth:2},{id:"1-与-matchedgeometryeffect-的关系",text:"1. 与 matchedGeometryEffect 的关系",depth:3},{id:"2-与-matchedtransitionsource-的关系",text:"2. 与 matchedTransitionSource 的关系",depth:3},{id:"五最基础的-namespacereader-示例组件级",text:"五、最基础的 NamespaceReader 示例（组件级）",depth:2},{id:"六导航转场中的-namespacereader-典型结构",text:"六、导航转场中的 NamespaceReader 典型结构",depth:2},{id:"七命名空间的生命周期与作用范围",text:"七、命名空间的生命周期与作用范围",depth:2},{id:"1-生命周期",text:"1. 生命周期",depth:3},{id:"2-作用范围",text:"2. 作用范围",depth:3},{id:"八常见错误与排查要点",text:"八、常见错误与排查要点",depth:2},{id:"1-动画完全不生效",text:"1. 动画完全不生效",depth:3},{id:"2-动画偶尔失效不稳定",text:"2. 动画偶尔失效、不稳定",depth:3},{id:"3-多个-namespacereader-嵌套导致动画错乱",text:"3. 多个 NamespaceReader 嵌套导致动画错乱",depth:3},{id:"九设计层面的使用建议",text:"九、设计层面的使用建议",depth:2},{id:"十适用场景总结",text:"十、适用场景总结",depth:2}],title:"命名空间读取器（NamespaceReader）",headingTitle:"",frontmatter:{title:"命名空间读取器（NamespaceReader）",description:"该视图用于创建和管理几何动画命名空间。"}}}}]);