"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["38546"],{19529(s,e,n){n.r(e),n.d(e,{default:()=>o});var r=n(74848),i=n(28453);function l(s){let e={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...s.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"本章节介绍如何在 SQLite 中执行 SQL 语句、绑定参数以及查询数据。"}),"\n",(0,r.jsxs)(e.p,{children:["所有操作均通过 ",(0,r.jsx)(e.code,{children:"Database"})," 实例完成，SQLite 会在内部处理连接、线程与调度细节，JavaScript 侧只需关注 SQL 与数据本身。"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h2,{id:"执行-sql",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#执行-sql",children:"#"}),"执行 SQL"]}),"\n",(0,r.jsxs)(e.h3,{id:"execute",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#execute",children:"#"}),"execute"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".execute"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(sql: string"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" arguments"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" Arguments): "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<void>"})]})})})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"execute"})," 用于执行不返回结果集的 一个或多个 SQL 语句，常用于："]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"创建或修改表结构"}),"\n",(0,r.jsx)(e.li,{children:"插入、更新、删除数据"}),"\n",(0,r.jsx)(e.li,{children:"执行 PRAGMA 语句"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"示例："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".execute"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "CREATE TABLE user (id INTEGER PRIMARY KEY, name TEXT, age INTEGER)"'})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".execute"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "UPDATE user SET age = ? WHERE name = ?"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  ["}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"19"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "Tom"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h2,{id:"参数绑定arguments",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#参数绑定arguments",children:"#"}),"参数绑定（Arguments）"]}),"\n",(0,r.jsxs)(e.p,{children:["SQLite 支持两种参数绑定方式：",(0,r.jsx)(e.strong,{children:"位置参数"})," 和 ",(0,r.jsx)(e.strong,{children:"命名参数"}),"。"]}),"\n",(0,r.jsxs)(e.h3,{id:"位置参数",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#位置参数",children:"#"}),"位置参数"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".execute"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "INSERT INTO user (name, age) VALUES (?, ?)"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  ["}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Tom"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 18"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsxs)(e.p,{children:["参数数组中的值会按顺序绑定到 SQL 中的 ",(0,r.jsx)(e.code,{children:"?"})," 占位符。"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h3,{id:"命名参数",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#命名参数",children:"#"}),"命名参数"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".execute"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "INSERT INTO user (name, age) VALUES (:name, :age)"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  { name"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "Lucy"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" age"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" 20"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" }"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsx)(e.p,{children:"命名参数通过对象形式传入，键名需与 SQL 中的参数名一致。"}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h3,{id:"databasevalue-类型",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#databasevalue-类型",children:"#"}),"DatabaseValue 类型"]}),"\n",(0,r.jsx)(e.p,{children:"参数值支持以下类型："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"string"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"number"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"boolean"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"Data"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"Date"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"null"})}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"Date"})," 和 ",(0,r.jsx)(e.code,{children:"Data"})," 会按照 SQLite 约定方式进行转换和存储。"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h2,{id:"查询数据",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#查询数据",children:"#"}),"查询数据"]}),"\n",(0,r.jsx)(e.p,{children:"SQLite 提供三种查询方法，适用于不同的使用场景。"}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h3,{id:"fetchall",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#fetchall",children:"#"}),"fetchAll"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".fetchAll"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"T"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:">(sql: string"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" arguments"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" Arguments): "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"T"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"[]"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,r.jsxs)(e.p,{children:["执行查询并返回",(0,r.jsx)(e.strong,{children:"所有结果行"}),"。"]}),"\n",(0,r.jsx)(e.p,{children:"示例："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" users"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".fetchAll"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"<{ name"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"; age"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" number"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" }>("})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "SELECT name, age FROM user"'})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsx)(e.p,{children:"当查询没有返回任何结果时，返回空数组。"}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h3,{id:"fetchone",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#fetchone",children:"#"}),"fetchOne"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".fetchOne"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"T"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:">(sql: string"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" arguments"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" Arguments): "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"T"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,r.jsxs)(e.p,{children:["执行查询并返回",(0,r.jsx)(e.strong,{children:"第一行结果"}),"。"]}),"\n",(0,r.jsx)(e.p,{children:"示例："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" user"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".fetchOne"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"<{ name"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" }>("})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "SELECT name FROM user WHERE age = ?"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  ["}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"18"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsx)(e.p,{children:"使用场景："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"明确只期望一条结果（如按主键查询）"}),"\n",(0,r.jsxs)(e.li,{children:["查询聚合结果（如 ",(0,r.jsx)(e.code,{children:"COUNT(*)"}),"）"]}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"如果查询未返回任何结果，该方法将抛出错误。"}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h3,{id:"fetchset",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#fetchset",children:"#"}),"fetchSet"]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsx)(e.code,{children:(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".fetchSet"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"T"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:">(sql: string"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" arguments"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" Arguments): "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"T"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"[]"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,r.jsx)(e.p,{children:"执行查询并返回去重后的结果集合。"}),"\n",(0,r.jsx)(e.p,{children:"该方法适用于以下场景："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"查询某一列的唯一值集合"}),"\n",(0,r.jsx)(e.li,{children:"需要在逻辑层面消除重复结果"}),"\n"]}),"\n",(0,r.jsx)(e.p,{children:"示例："}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" names"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".fetchSet"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"<{ name"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" }>("})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'  "SELECT name FROM user"'})}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})})]})})}),"\n",(0,r.jsx)(e.p,{children:"返回结果中不会包含重复记录。"}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h2,{id:"类型映射说明",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#类型映射说明",children:"#"}),"类型映射说明"]}),"\n",(0,r.jsx)(e.p,{children:"查询结果中的字段值会自动映射为 JavaScript 类型："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["SQLite INTEGER → ",(0,r.jsx)(e.code,{children:"number"})]}),"\n",(0,r.jsxs)(e.li,{children:["SQLite REAL → ",(0,r.jsx)(e.code,{children:"number"})]}),"\n",(0,r.jsxs)(e.li,{children:["SQLite TEXT → ",(0,r.jsx)(e.code,{children:"string"})]}),"\n",(0,r.jsxs)(e.li,{children:["SQLite BLOB → ",(0,r.jsx)(e.code,{children:"Data"})]}),"\n",(0,r.jsxs)(e.li,{children:["SQLite NULL → ",(0,r.jsx)(e.code,{children:"null"})]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["返回对象的结构由查询语句决定，SQLite 不会强制要求与泛型 ",(0,r.jsx)(e.code,{children:"T"})," 完全匹配，但建议保持一致以提高可读性与类型安全。"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h2,{id:"错误处理",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#错误处理",children:"#"}),"错误处理"]}),"\n",(0,r.jsx)(e.p,{children:"以下情况会导致方法抛出错误："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"SQL 语法错误"}),"\n",(0,r.jsx)(e.li,{children:"参数数量或名称不匹配"}),"\n",(0,r.jsx)(e.li,{children:"违反约束（如唯一键、外键）"}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"fetchOne"})," 查询未返回结果"]}),"\n",(0,r.jsxs)(e.li,{children:["数据库被锁定且 ",(0,r.jsx)(e.code,{children:"busyMode"})," 超时"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["建议在需要时使用 ",(0,r.jsx)(e.code,{children:"try / catch"})," 捕获错误："]}),"\n",(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,r.jsxs)(e.code,{children:[(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"try"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"  await"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" db"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".execute"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"INSERT INTO user (name) VALUES (?)"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Tom"'}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"])"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"} "}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"catch"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (e) {"})]}),"\n",(0,r.jsxs)(e.span,{className:"line",children:[(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"  console"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".error"}),(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(e)"})]}),"\n",(0,r.jsx)(e.span,{className:"line",children:(0,r.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h2,{id:"使用建议",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#使用建议",children:"#"}),"使用建议"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["使用 ",(0,r.jsx)(e.code,{children:"execute"})," 执行无返回结果的 SQL"]}),"\n",(0,r.jsxs)(e.li,{children:["查询多行数据时使用 ",(0,r.jsx)(e.code,{children:"fetchAll"})]}),"\n",(0,r.jsxs)(e.li,{children:["明确只需要一行结果时使用 ",(0,r.jsx)(e.code,{children:"fetchOne"})]}),"\n",(0,r.jsxs)(e.li,{children:["需要去重结果时使用 ",(0,r.jsx)(e.code,{children:"fetchSet"})]}),"\n",(0,r.jsx)(e.li,{children:"优先使用参数绑定，避免字符串拼接 SQL"}),"\n",(0,r.jsx)(e.li,{children:"复杂写操作应放入事务中执行"}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.h2,{id:"下一步",children:[(0,r.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#下一步",children:"#"}),"下一步"]}),"\n",(0,r.jsx)(e.p,{children:"当需要保证多条写操作的原子性，或在失败时自动回滚，请继续阅读："}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"Transactions"})}),"\n"]})]})}function o(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,r.jsx)(e,{...s,children:(0,r.jsx)(l,{...s})}):l(s)}o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["TestFlight%2Fzh%2Fguide%2FChangelog%2F2.4.7%2FSQLite%2FExecuting%20SQL%20and%20Query.md"]={toc:[{id:"执行-sql",text:"执行 SQL",depth:2},{id:"execute",text:"execute",depth:3},{id:"参数绑定arguments",text:"参数绑定（Arguments）",depth:2},{id:"位置参数",text:"位置参数",depth:3},{id:"命名参数",text:"命名参数",depth:3},{id:"databasevalue-类型",text:"DatabaseValue 类型",depth:3},{id:"查询数据",text:"查询数据",depth:2},{id:"fetchall",text:"fetchAll",depth:3},{id:"fetchone",text:"fetchOne",depth:3},{id:"fetchset",text:"fetchSet",depth:3},{id:"类型映射说明",text:"类型映射说明",depth:2},{id:"错误处理",text:"错误处理",depth:2},{id:"使用建议",text:"使用建议",depth:2},{id:"下一步",text:"下一步",depth:2}],title:"执行 SQL 和查询",headingTitle:"",frontmatter:{title:"执行 SQL 和查询",description:"介绍如何使用 SQLite 执行 SQL 语句、绑定参数以及查询数据。",tag:"PRO"}}}}]);