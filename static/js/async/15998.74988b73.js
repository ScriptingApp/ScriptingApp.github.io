"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["15998"],{59533(r,s,n){n.r(s),n.d(s,{default:()=>o});var e=n(74848),i=n(28453);function l(r){let s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...r.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.p,{children:["本篇文档详细说明 Assistant Tool 在 ",(0,e.jsx)(s.strong,{children:"脚本编辑器环境（scriptEditorOnly）"})," 下可使用的编辑器能力，包括 ",(0,e.jsx)(s.code,{children:"ScriptEditorProvider"})," 接口本身，以及与之配套的 ",(0,e.jsx)(s.code,{children:"ScriptEditorFileOperation"}),"、",(0,e.jsx)(s.code,{children:"ScriptLintError"})," 等类型。"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"一scripteditorprovider-的定位与职责",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#一scripteditorprovider-的定位与职责",children:"#"}),"一、ScriptEditorProvider 的定位与职责"]}),"\n",(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.code,{children:"ScriptEditorProvider"})," 是 Assistant Tool 与 ",(0,e.jsx)(s.strong,{children:"脚本编辑器（Script Editor）"})," 之间的通信接口。"]}),"\n",(0,e.jsx)(s.p,{children:"当满足以下条件时，工具的执行函数会收到该对象："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"assistant_tool.json"})," 中设置了 ",(0,e.jsx)(s.code,{children:"scriptEditorOnly: true"})]}),"\n",(0,e.jsx)(s.li,{children:"工具在脚本编辑器环境中被执行（包括测试函数）"}),"\n"]}),"\n",(0,e.jsx)(s.p,{children:"它的核心职责是："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"提供对脚本项目文件系统的受控访问"}),"\n",(0,e.jsx)(s.li,{children:"支持结构化、可追踪的文件修改"}),"\n",(0,e.jsx)(s.li,{children:"提供 lint / 语法检查结果"}),"\n",(0,e.jsx)(s.li,{children:"支持 diff 预览而非直接破坏性修改"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"二项目级信息接口",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#二项目级信息接口",children:"#"}),"二、项目级信息接口"]}),"\n",(0,e.jsxs)(s.h3,{id:"scriptname",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#scriptname",children:"#"}),(0,e.jsx)(s.code,{children:"scriptName"})]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"readonly scriptName"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" string"})]})})})}),"\n",(0,e.jsx)(s.p,{children:"表示当前脚本项目的名称。"}),"\n",(0,e.jsx)(s.p,{children:"常见用途："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["在返回 ",(0,e.jsx)(s.code,{children:"message"})," 中标注作用范围"]}),"\n",(0,e.jsxs)(s.li,{children:["在日志或 ",(0,e.jsx)(s.code,{children:"AssistantTool.report"})," 中显示上下文信息"]}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"三文件与目录查询接口",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#三文件与目录查询接口",children:"#"}),"三、文件与目录查询接口"]}),"\n",(0,e.jsxs)(s.h3,{id:"判断文件是否存在",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#判断文件是否存在",children:"#"}),"判断文件是否存在"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"exists"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(relativePath: string): boolean"})]})})})}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"relativePath"})," 为相对于脚本项目根目录的路径"]}),"\n",(0,e.jsx)(s.li,{children:"用于安全检查或条件性创建文件"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"获取所有文件夹",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#获取所有文件夹",children:"#"}),"获取所有文件夹"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getAllFolders"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(): string[]"})]})})})}),"\n",(0,e.jsx)(s.p,{children:"返回项目中所有文件夹路径（相对路径）。"}),"\n",(0,e.jsx)(s.p,{children:"典型用途："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"批量生成文件"}),"\n",(0,e.jsx)(s.li,{children:"判断项目结构"}),"\n",(0,e.jsx)(s.li,{children:"构建导航或分组逻辑"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"获取所有文件",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#获取所有文件",children:"#"}),"获取所有文件"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getAllFiles"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(): string[]"})]})})})}),"\n",(0,e.jsx)(s.p,{children:"返回项目中所有文件路径（相对路径）。"}),"\n",(0,e.jsx)(s.p,{children:"典型用途："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"全项目扫描"}),"\n",(0,e.jsx)(s.li,{children:"批量格式化 / 搜索 / 替换"}),"\n",(0,e.jsx)(s.li,{children:"lint 错误定位"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"四文件内容读取与写入",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#四文件内容读取与写入",children:"#"}),"四、文件内容读取与写入"]}),"\n",(0,e.jsxs)(s.h3,{id:"读取文件内容",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#读取文件内容",children:"#"}),"读取文件内容"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getFileContent"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(relativePath: string): "}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"string "}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" null"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["文件不存在时返回 ",(0,e.jsx)(s.code,{children:"null"})]}),"\n",(0,e.jsxs)(s.li,{children:["建议在调用前用 ",(0,e.jsx)(s.code,{children:"exists"})," 或空值判断"]}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"更新整个文件内容",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#更新整个文件内容",children:"#"}),"更新整个文件内容"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"updateFileContent"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(relativePath: string"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" content: string): "}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"用新内容完全替换原文件"}),"\n",(0,e.jsx)(s.li,{children:"适合格式化、重写等确定性操作"}),"\n",(0,e.jsx)(s.li,{children:"不建议在复杂编辑场景下频繁使用"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"写入文件自动创建",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#写入文件自动创建",children:"#"}),"写入文件（自动创建）"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"writeToFile"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(relativePath: string"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" content: string): "}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"文件不存在时自动创建"}),"\n",(0,e.jsx)(s.li,{children:"文件存在时覆盖"}),"\n",(0,e.jsx)(s.li,{children:"常用于生成新文件或模板"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"五结构化编辑接口推荐",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#五结构化编辑接口推荐",children:"#"}),"五、结构化编辑接口（推荐）"]}),"\n",(0,e.jsxs)(s.p,{children:["相比直接整体替换文件内容，",(0,e.jsx)(s.strong,{children:"结构化编辑接口更安全、更可控"}),"。"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"scripteditorfileoperation-类型",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#scripteditorfileoperation-类型",children:"#"}),"ScriptEditorFileOperation 类型"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" ScriptEditorFileOperation"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  startLine"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" number"})]}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  content"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" string"})]}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,e.jsx)(s.p,{children:"语义说明："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"startLine"}),"：",(0,e.jsx)(s.strong,{children:"基于 1 的行号"})]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"content"}),"：要插入或替换的文本内容"]}),"\n",(0,e.jsx)(s.li,{children:"不包含结束行，具体行为由调用接口决定"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"插入内容",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#插入内容",children:"#"}),"插入内容"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"insertContent"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  relativePath: string"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  operations: ScriptEditorFileOperation[]"})}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"): "}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})]})})}),"\n",(0,e.jsx)(s.p,{children:"行为说明："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["在指定行号 ",(0,e.jsx)(s.strong,{children:"之前"})," 插入内容"]}),"\n",(0,e.jsx)(s.li,{children:"多个 operation 按数组顺序依次执行"}),"\n",(0,e.jsx)(s.li,{children:"行号以原始文件为基准，建议从后往前插入以避免偏移"}),"\n"]}),"\n",(0,e.jsx)(s.p,{children:"适合场景："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"插入 import / 注释 / 新函数"}),"\n",(0,e.jsx)(s.li,{children:"自动补充代码块"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"替换内容",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#替换内容",children:"#"}),"替换内容"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"replaceInFile"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  relativePath: string"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  operations: ScriptEditorFileOperation[]"})}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"): "}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Promise"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})]})})}),"\n",(0,e.jsx)(s.p,{children:"行为说明："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["从 ",(0,e.jsx)(s.code,{children:"startLine"})," 开始替换对应行内容"]}),"\n",(0,e.jsx)(s.li,{children:"通常用于精确替换某一行或一段代码"}),"\n",(0,e.jsx)(s.li,{children:"不适合模糊搜索型替换"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"六diff-预览接口",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#六diff-预览接口",children:"#"}),"六、Diff 预览接口"]}),"\n",(0,e.jsxs)(s.h3,{id:"opendiffeditor",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#opendiffeditor",children:"#"}),(0,e.jsx)(s.code,{children:"openDiffEditor"})]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"openDiffEditor"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(relativePath: string"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" content: string): "}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"void"})]})})})}),"\n",(0,e.jsxs)(s.p,{children:["该方法用于 ",(0,e.jsx)(s.strong,{children:"在不真正写入文件的前提下"}),"，向用户展示："]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"当前文件内容 vs 预期新内容"}),"\n",(0,e.jsx)(s.li,{children:"清晰的改动范围"}),"\n"]}),"\n",(0,e.jsx)(s.p,{children:"推荐用法："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"Approval Request 阶段"}),"\n",(0,e.jsx)(s.li,{children:"作为 previewButton 的 action"}),"\n",(0,e.jsx)(s.li,{children:"所有批量或破坏性修改前"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"七lint-与语法错误信息",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#七lint-与语法错误信息",children:"#"}),"七、Lint 与语法错误信息"]}),"\n",(0,e.jsxs)(s.h3,{id:"scriptlinterror-类型",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#scriptlinterror-类型",children:"#"}),"ScriptLintError 类型"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"type"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" ScriptLintError"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  line"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" number"})]}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  message"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" string"})]}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,e.jsx)(s.p,{children:"表示脚本中的一个 lint 或语法错误。"}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"获取-lint-错误",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#获取-lint-错误",children:"#"}),"获取 lint 错误"]}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsx)(s.code,{children:(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"getLintErrors"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(): Record"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"string"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ScriptLintError[]"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,e.jsx)(s.p,{children:"返回结构："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"key：文件路径（relativePath）"}),"\n",(0,e.jsx)(s.li,{children:"value：该文件中的 lint 错误数组"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"典型使用模式",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#典型使用模式",children:"#"}),"典型使用模式"]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"扫描所有 lint 错误"}),"\n",(0,e.jsx)(s.li,{children:"定位错误行"}),"\n",(0,e.jsx)(s.li,{children:"自动修复简单问题（需谨慎）"}),"\n",(0,e.jsx)(s.li,{children:"汇总错误信息返回给 Assistant"}),"\n"]}),"\n",(0,e.jsx)(s.p,{children:"示例："}),"\n",(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,e.jsxs)(s.code,{children:[(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" errors"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" editor"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".getLintErrors"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,e.jsx)(s.span,{className:"line"}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"for"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" file"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" in"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" errors) {"})]}),"\n",(0,e.jsxs)(s.span,{className:"line",children:[(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  for"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" error"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" of"}),(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" errors[file]) {"})]}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // error.line"})}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"    // error.message"})}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,e.jsx)(s.span,{className:"line",children:(0,e.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"八scripteditorprovider-的使用边界",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#八scripteditorprovider-的使用边界",children:"#"}),"八、ScriptEditorProvider 的使用边界"]}),"\n",(0,e.jsx)(s.p,{children:"重要约束与建议："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["所有路径必须是 ",(0,e.jsx)(s.strong,{children:"相对路径"})]}),"\n",(0,e.jsx)(s.li,{children:"不应假设文件内容一定存在"}),"\n",(0,e.jsx)(s.li,{children:"不要并发修改同一个文件"}),"\n",(0,e.jsx)(s.li,{children:"尽量使用结构化编辑接口而非全文替换"}),"\n",(0,e.jsx)(s.li,{children:"批量修改时优先提供 diff 预览"}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"九编辑器类-assistant-tool-的推荐模式",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#九编辑器类-assistant-tool-的推荐模式",children:"#"}),"九、编辑器类 Assistant Tool 的推荐模式"]}),"\n",(0,e.jsx)(s.p,{children:"一个成熟的编辑器类工具通常遵循以下流程："}),"\n",(0,e.jsxs)(s.ol,{children:["\n",(0,e.jsxs)(s.li,{children:["\n",(0,e.jsxs)(s.p,{children:["使用 ",(0,e.jsx)(s.code,{children:"getAllFiles"})," / ",(0,e.jsx)(s.code,{children:"getLintErrors"})," 扫描项目"]}),"\n"]}),"\n",(0,e.jsxs)(s.li,{children:["\n",(0,e.jsx)(s.p,{children:"计算将要发生的修改"}),"\n"]}),"\n",(0,e.jsxs)(s.li,{children:["\n",(0,e.jsx)(s.p,{children:"在 Approval Request 阶段："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"提供清晰说明"}),"\n",(0,e.jsxs)(s.li,{children:["使用 ",(0,e.jsx)(s.code,{children:"openDiffEditor"})," 作为 preview"]}),"\n"]}),"\n"]}),"\n",(0,e.jsxs)(s.li,{children:["\n",(0,e.jsx)(s.p,{children:"在 Execute 阶段："}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"严格按确认结果执行"}),"\n",(0,e.jsx)(s.li,{children:"使用结构化编辑 API"}),"\n"]}),"\n"]}),"\n",(0,e.jsxs)(s.li,{children:["\n",(0,e.jsx)(s.p,{children:"返回简洁、结构化的执行结果"}),"\n"]}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h2,{id:"十小结",children:[(0,e.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#十小结",children:"#"}),"十、小结"]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"ScriptEditorProvider"})," 是 Assistant Tool 与脚本编辑器之间的桥梁"]}),"\n",(0,e.jsxs)(s.li,{children:["它提供 ",(0,e.jsx)(s.strong,{children:"受控、结构化、可预览"})," 的文件操作能力"]}),"\n",(0,e.jsx)(s.li,{children:"编辑器类工具应优先考虑用户可理解性与可回滚性"}),"\n",(0,e.jsx)(s.li,{children:"结合 Approval + preview，可以构建高信任度的编辑体验"}),"\n"]})]})}function o(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...r.components};return s?(0,e.jsx)(s,{...r,children:(0,e.jsx)(l,{...r})}):l(r)}o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["TestFlight%2Fzh%2Fguide%2FAssistantTool%2FScriptEditorProvider%20and%20Editor%20Types.md"]={toc:[{id:"一scripteditorprovider-的定位与职责",text:"一、ScriptEditorProvider 的定位与职责",depth:2},{id:"二项目级信息接口",text:"二、项目级信息接口",depth:2},{id:"scriptname",text:"`scriptName`",depth:3},{id:"三文件与目录查询接口",text:"三、文件与目录查询接口",depth:2},{id:"判断文件是否存在",text:"判断文件是否存在",depth:3},{id:"获取所有文件夹",text:"获取所有文件夹",depth:3},{id:"获取所有文件",text:"获取所有文件",depth:3},{id:"四文件内容读取与写入",text:"四、文件内容读取与写入",depth:2},{id:"读取文件内容",text:"读取文件内容",depth:3},{id:"更新整个文件内容",text:"更新整个文件内容",depth:3},{id:"写入文件自动创建",text:"写入文件（自动创建）",depth:3},{id:"五结构化编辑接口推荐",text:"五、结构化编辑接口（推荐）",depth:2},{id:"scripteditorfileoperation-类型",text:"ScriptEditorFileOperation 类型",depth:3},{id:"插入内容",text:"插入内容",depth:3},{id:"替换内容",text:"替换内容",depth:3},{id:"六diff-预览接口",text:"六、Diff 预览接口",depth:2},{id:"opendiffeditor",text:"`openDiffEditor`",depth:3},{id:"七lint-与语法错误信息",text:"七、Lint 与语法错误信息",depth:2},{id:"scriptlinterror-类型",text:"ScriptLintError 类型",depth:3},{id:"获取-lint-错误",text:"获取 lint 错误",depth:3},{id:"典型使用模式",text:"典型使用模式",depth:3},{id:"八scripteditorprovider-的使用边界",text:"八、ScriptEditorProvider 的使用边界",depth:2},{id:"九编辑器类-assistant-tool-的推荐模式",text:"九、编辑器类 Assistant Tool 的推荐模式",depth:2},{id:"十小结",text:"十、小结",depth:2}],title:"ScriptEditorProvider 及编辑器相关类型详解",headingTitle:"",frontmatter:{title:"ScriptEditorProvider 及编辑器相关类型详解",description:"了解 ScriptEditorProvider 及编辑器相关类型。",tag:"PRO"}}}}]);