"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["78471"],{55482(s,e,r){r.r(e),r.d(e,{default:()=>o});var n=r(74848),i=r(28453);function l(s){let e={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,i.R)(),...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"onDropContent"})," 是 Scripting 提供的一个视图修饰符，用于将当前视图设置为",(0,n.jsx)(e.strong,{children:"拖放目标（Drop Target）"}),"，以接收从其他 App 拖拽进入的文件、图片或文本内容。"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"功能说明",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#功能说明",children:"#"}),"功能说明"]}),"\n",(0,n.jsxs)(e.p,{children:["通过 ",(0,n.jsx)(e.code,{children:"onDropContent"}),"，你可以实现以下能力："]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"接收来自其他 App 的拖拽内容"}),"\n",(0,n.jsx)(e.li,{children:"使用 UTType 精确限制可接收的数据类型"}),"\n",(0,n.jsx)(e.li,{children:"实时感知拖拽指针是否悬停在视图上方"}),"\n",(0,n.jsxs)(e.li,{children:["在内容被放下时，通过 ",(0,n.jsx)(e.code,{children:"ItemProvider"})," 启动数据加载流程"]}),"\n",(0,n.jsx)(e.li,{children:"对安全作用域文件建立持久访问权限"}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"修饰符定义",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#修饰符定义",children:"#"}),"修饰符定义"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"onDropContent"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  types"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" UTType[]"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  isTarget: {"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    value"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    onChanged: (value"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  } "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" Observable"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  perform: (attachments"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" ItemProvider"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"[]) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"参数说明",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#参数说明",children:"#"}),"参数说明"]}),"\n",(0,n.jsxs)(e.h3,{id:"types",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#types",children:"#"}),"types"]}),"\n",(0,n.jsxs)(e.p,{children:["用于指定当前视图",(0,n.jsx)(e.strong,{children:"可以接收的内容类型列表"}),"，类型值为 UTType 字符串。"]}),"\n",(0,n.jsx)(e.p,{children:"当拖拽内容不包含任意匹配的类型时："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"当前视图不会激活为放置目标"}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"isTarget"})," 不会发生变化"]}),"\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"perform"})," 不会被调用"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"示例："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"types"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.image"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "public.movie"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]})})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"istarget",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#istarget",children:"#"}),"isTarget"]}),"\n",(0,n.jsx)(e.p,{children:"用于表示拖拽操作是否悬停在当前视图上方。"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["当拖拽进入视图区域时，值为 ",(0,n.jsx)(e.code,{children:"true"})]}),"\n",(0,n.jsxs)(e.li,{children:["当拖拽移出视图区域时，值为 ",(0,n.jsx)(e.code,{children:"false"})]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"支持以下两种形式："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsx)(e.p,{children:"绑定对象形式"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsxs)(e.code,{children:[(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"{"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  value"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  onChanged"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (value"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" boolean"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" void"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["\n",(0,n.jsx)(e.p,{children:"Observable 形式"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"Observable"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"boolean"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.p,{children:["Observable 形式适合与 ",(0,n.jsx)(e.code,{children:"useObservable"})," 搭配使用，语义更简洁。"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h3,{id:"perform",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#perform",children:"#"}),"perform"]}),"\n",(0,n.jsxs)(e.p,{children:["当符合 ",(0,n.jsx)(e.code,{children:"types"})," 要求的内容被成功放下时触发。"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"perform"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (attachments"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" ItemProvider"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"[]) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" boolean"})]})})})}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["参数 ",(0,n.jsx)(e.code,{children:"attachments"})," 为 ",(0,n.jsx)(e.code,{children:"ItemProvider"})," 数组"]}),"\n",(0,n.jsxs)(e.li,{children:["每一个 ",(0,n.jsx)(e.code,{children:"ItemProvider"})," 表示一个被拖入的内容项"]}),"\n",(0,n.jsx)(e.li,{children:"函数返回值表示是否成功处理了此次拖放操作"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"返回值说明："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["返回 ",(0,n.jsx)(e.code,{children:"true"})," 表示拖放被成功接收"]}),"\n",(0,n.jsxs)(e.li,{children:["返回 ",(0,n.jsx)(e.code,{children:"false"})," 表示未处理该拖放内容"]}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"perform-的执行规则重要",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#perform-的执行规则重要",children:"#"}),"perform 的执行规则（重要）"]}),"\n",(0,n.jsxs)(e.p,{children:["在 ",(0,n.jsx)(e.code,{children:"perform"})," 中需要遵循以下规则："]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["必须在 ",(0,n.jsx)(e.code,{children:"perform"})," 函数的同步执行过程中",(0,n.jsx)(e.strong,{children:"启动对 ItemProvider 的加载"})]}),"\n",(0,n.jsxs)(e.li,{children:["允许使用 ",(0,n.jsx)(e.code,{children:"Promise"})," / ",(0,n.jsx)(e.code,{children:"then"})," 等方式延迟完成加载"]}),"\n",(0,n.jsxs)(e.li,{children:["不允许在 ",(0,n.jsx)(e.code,{children:"perform"})," 返回之后，再通过其他回调或事件启动加载"]}),"\n",(0,n.jsxs)(e.li,{children:["返回 ",(0,n.jsx)(e.code,{children:"false"})," 时，系统会认为该拖放未被接受"]}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"原因说明："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"拖放内容受系统安全机制保护"}),"\n",(0,n.jsxs)(e.li,{children:["只有在 ",(0,n.jsx)(e.code,{children:"perform"})," 执行期间，脚本才拥有对拖放数据的访问权限"]}),"\n",(0,n.jsx)(e.li,{children:"若未在此期间启动加载，后续将无法访问对应资源"}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"itemprovider-的使用方式",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#itemprovider-的使用方式",children:"#"}),"ItemProvider 的使用方式"]}),"\n",(0,n.jsxs)(e.p,{children:["在 ",(0,n.jsx)(e.code,{children:"perform"})," 中，开发者应当通过 ",(0,n.jsx)(e.code,{children:"ItemProvider"})," 判断类型并启动加载。"]}),"\n",(0,n.jsx)(e.p,{children:"常见流程包括："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["使用 ",(0,n.jsx)(e.code,{children:"hasItemConforming"})," 判断内容类型"]}),"\n",(0,n.jsx)(e.li,{children:"根据内容类型选择合适的加载方式"}),"\n",(0,n.jsx)(e.li,{children:"对文件类资源获取路径并进行后续处理"}),"\n"]}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"示例用法",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#示例用法",children:"#"}),"示例用法"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" isTarget"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" useObservable"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"false"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"  onDropContent"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    types"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.image"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "public.movie"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"]"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    isTarget"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" isTarget"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:"    perform"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (attachments) "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"      const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" images"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:" UIImage"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" []"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"      const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" videos"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"[] "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" []"})]}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"      let"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" found "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" false"})]}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"      for"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" attachment"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" of"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" attachments) {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"        if"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"attachment"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".hasItemConforming"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.png"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")) {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          found "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"          attachment"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".loadUIImage"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"()"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(image "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"            if"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (image "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" null"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"              images"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".push"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(image)"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"            }"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          })"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        } "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" if"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" ("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"attachment"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".hasItemConforming"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.movie"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")) {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          found "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" true"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"          attachment"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".loadFilePath"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"public.movie"'}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:")"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".then"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"            if"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" (filePath "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"!="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" null"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-comment)"},children:"              // 为安全作用域文件创建书签"})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"              FileManager"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".addFileBookmark"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath)"})]}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"              videos"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".push"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath)"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"            }"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"          })"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"        }"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"      }"})}),"\n",(0,n.jsx)(e.span,{className:"line"}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"      return"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" found"})]}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  }}"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:">"})}),"\n",(0,n.jsx)(e.span,{className:"line",children:(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"  ..."})}),"\n",(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"</"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:">"})]})]})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"安全作用域文件访问",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#安全作用域文件访问",children:"#"}),"安全作用域文件访问"]}),"\n",(0,n.jsxs)(e.p,{children:["通过 ",(0,n.jsx)(e.code,{children:"onDropContent"})," 获取的文件路径，通常属于",(0,n.jsx)(e.strong,{children:"安全作用域资源"}),"。"]}),"\n",(0,n.jsx)(e.p,{children:"这类路径在以下情况下可能失效："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:"perform"})," 返回之后"]}),"\n",(0,n.jsx)(e.li,{children:"App 重启"}),"\n",(0,n.jsx)(e.li,{children:"脚本生命周期结束"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"为保证后续仍可访问文件，建议在获取路径后创建文件书签。"}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"filemanageraddfilebookmark",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#filemanageraddfilebookmark",children:"#"}),"FileManager.addFileBookmark"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"FileManager"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".addFileBookmark"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(path: string"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" name"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:" string): string "}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" null"})]})})})}),"\n",(0,n.jsx)(e.p,{children:"说明："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"为指定文件或文件夹创建安全作用域书签"}),"\n",(0,n.jsxs)(e.li,{children:["适用于通过 ",(0,n.jsx)(e.code,{children:"Photos"}),"、",(0,n.jsx)(e.code,{children:"onDropContent"})," 等 API 获取的路径"]}),"\n",(0,n.jsx)(e.li,{children:"返回书签名称，用于后续访问或移除"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"示例："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" bookmarkName"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:" FileManager"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".addFileBookmark"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(filePath)"})]})})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"filemanagerremovefilebookmark",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#filemanagerremovefilebookmark",children:"#"}),"FileManager.removeFileBookmark"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"FileManager"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".removeFileBookmark"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(name: string): boolean"})]})})})}),"\n",(0,n.jsx)(e.p,{children:"说明："}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"移除指定名称的文件书签"}),"\n",(0,n.jsx)(e.li,{children:"当不再需要访问对应文件时应及时调用"}),"\n",(0,n.jsx)(e.li,{children:"返回是否成功移除"}),"\n"]}),"\n",(0,n.jsx)(e.p,{children:"示例："}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(e.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{className:"line",children:[(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-constant)"},children:"FileManager"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-token-function)"},children:".removeFileBookmark"}),(0,n.jsx)(e.span,{style:{color:"var(--shiki-foreground)"},children:"(bookmarkName)"})]})})})}),"\n",(0,n.jsx)(e.hr,{}),"\n",(0,n.jsxs)(e.h2,{id:"使用建议",children:[(0,n.jsx)(e.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#使用建议",children:"#"}),"使用建议"]}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["在 ",(0,n.jsx)(e.code,{children:"types"})," 中尽量明确声明可接收的内容类型"]}),"\n",(0,n.jsxs)(e.li,{children:["在 ",(0,n.jsx)(e.code,{children:"perform"})," 中只负责启动加载，不要等待加载完成"]}),"\n",(0,n.jsx)(e.li,{children:"对图片等轻量内容可直接加载为对象"}),"\n",(0,n.jsx)(e.li,{children:"对视频、音频、文档等资源优先使用文件路径"}),"\n",(0,n.jsx)(e.li,{children:"对需要长期访问的文件务必创建书签"}),"\n",(0,n.jsx)(e.li,{children:"在资源不再使用时移除对应书签"}),"\n"]})]})}function o(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(l,{...s})}):l(s)}o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["zh%2Fdoc%2FView%20Modifiers%2FonDropContent.md"]={toc:[{id:"功能说明",text:"功能说明",depth:2},{id:"修饰符定义",text:"修饰符定义",depth:2},{id:"参数说明",text:"参数说明",depth:2},{id:"types",text:"types",depth:3},{id:"istarget",text:"isTarget",depth:3},{id:"perform",text:"perform",depth:3},{id:"perform-的执行规则重要",text:"perform 的执行规则（重要）",depth:2},{id:"itemprovider-的使用方式",text:"ItemProvider 的使用方式",depth:2},{id:"示例用法",text:"示例用法",depth:2},{id:"安全作用域文件访问",text:"安全作用域文件访问",depth:2},{id:"filemanageraddfilebookmark",text:"FileManager.addFileBookmark",depth:2},{id:"filemanagerremovefilebookmark",text:"FileManager.removeFileBookmark",depth:2},{id:"使用建议",text:"使用建议",depth:2}],title:"接收外部拖拽内容",headingTitle:"",frontmatter:{title:"接收外部拖拽内容"}}}}]);