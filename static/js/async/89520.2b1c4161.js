"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["89520"],{58675(e,s,r){r.r(s),r.d(s,{default:()=>o});var n=r(74848),i=r(28453);function t(e){let s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"CustomKeyboard"})," namespace provides a comprehensive API for building fully custom keyboard UIs in the Scripting app. It allows you to create JSX-based keyboards, insert or modify text, query input state, respond to user interaction, and control keyboard layout or navigation."]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"1-environment--setup",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-environment--setup",children:"#"}),"1. Environment & Setup"]}),"\n",(0,n.jsxs)(s.h3,{id:"requirements",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#requirements",children:"#"}),"Requirements"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["You must define your keyboard interface in a file named ",(0,n.jsx)(s.code,{children:"**keyboard.tsx**"})," inside your script project."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"CustomKeyboard"})," API is ",(0,n.jsx)(s.strong,{children:"only available in the keyboard extension environment"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["It is ",(0,n.jsx)(s.strong,{children:"not available"})," in App scripts, Intents (",(0,n.jsx)(s.code,{children:"intent.tsx"}),"), or Widgets (",(0,n.jsx)(s.code,{children:"widget.tsx"}),")."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"You must enable the keyboard in iOS settings:"}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"txt",children:(0,n.jsx)(s.code,{children:(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{children:"Settings > General > Keyboard > Keyboards > Add New Keyboard > Scripting"})})})})}),"\n",(0,n.jsxs)(s.p,{children:["Then tap the ",(0,n.jsx)(s.strong,{children:"Scripting Keyboard"})," and enable ",(0,n.jsx)(s.strong,{children:"Allow Full Access"})," to unlock clipboard and network features."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"2-presentation",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-presentation",children:"#"}),"2. Presentation"]}),"\n",(0,n.jsxs)(s.h3,{id:"presentnode-virtualnode-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#presentnode-virtualnode-void",children:"#"}),(0,n.jsx)(s.code,{children:"present(node: VirtualNode): void"})]}),"\n",(0,n.jsxs)(s.p,{children:["Renders your custom keyboard UI using the given JSX node. This function ",(0,n.jsx)(s.strong,{children:"must be called once"})," in ",(0,n.jsx)(s.code,{children:"keyboard.tsx"}),"."]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"() {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">Hello from keyboard</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".present"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />)"})]})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"3-text-input-state",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#3-text-input-state",children:"#"}),"3. Text Input State"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Property"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textBeforeCursor"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<string | null>"})}),(0,n.jsx)(s.td,{children:"Text before the cursor"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textAfterCursor"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<string | null>"})}),(0,n.jsx)(s.td,{children:"Text after the cursor"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"selectedText"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<string | null>"})}),(0,n.jsx)(s.td,{children:"Currently selected text"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"hasText"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"Promise<boolean>"})}),(0,n.jsx)(s.td,{children:"Whether the text input contains any text"})]})]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"4-input-traits",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#4-input-traits",children:"#"}),"4. Input Traits"]}),"\n",(0,n.jsxs)(s.h3,{id:"usetraits-textinputtraits",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#usetraits-textinputtraits",children:"#"}),(0,n.jsx)(s.code,{children:"useTraits(): TextInputTraits"})]}),"\n",(0,n.jsxs)(s.p,{children:["Hook to retrieve the current input traits (e.g., keyboard type, return key style). It automatically updates when ",(0,n.jsx)(s.code,{children:"textDidChange"})," or ",(0,n.jsx)(s.code,{children:"selectionDidChange"})," events occur."]}),"\n",(0,n.jsxs)(s.h3,{id:"traits-textinputtraits",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#traits-textinputtraits",children:"#"}),(0,n.jsx)(s.code,{children:"traits: TextInputTraits"})]}),"\n",(0,n.jsxs)(s.p,{children:["A snapshot of the traits at the last change. Prefer ",(0,n.jsx)(s.code,{children:"useTraits()"})," in JSX components for reactivity."]}),"\n",(0,n.jsxs)(s.h4,{id:"example-fields",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#example-fields",children:"#"}),"Example fields:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"keyboardType"}),": ",(0,n.jsx)(s.code,{children:"'default'"}),", ",(0,n.jsx)(s.code,{children:"'numberPad'"}),", ",(0,n.jsx)(s.code,{children:"'emailAddress'"}),"..."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"returnKeyType"}),": ",(0,n.jsx)(s.code,{children:"'go'"}),", ",(0,n.jsx)(s.code,{children:"'search'"}),", ",(0,n.jsx)(s.code,{children:"'done'"}),"..."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"autocapitalizationType"}),": ",(0,n.jsx)(s.code,{children:"'none'"}),", ",(0,n.jsx)(s.code,{children:"'sentences'"}),", etc."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"textContentType"}),": semantic input hints like ",(0,n.jsx)(s.code,{children:"'username'"}),", ",(0,n.jsx)(s.code,{children:"'oneTimeCode'"}),", etc."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"keyboardAppearance"}),": ",(0,n.jsx)(s.code,{children:"'light'"}),", ",(0,n.jsx)(s.code,{children:"'dark'"}),", etc."]}),"\n"]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"5-text-manipulation",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#5-text-manipulation",children:"#"}),"5. Text Manipulation"]}),"\n",(0,n.jsxs)(s.h3,{id:"inserttexttext-string-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#inserttexttext-string-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"insertText(text: string): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Insert text at the current cursor position."}),"\n",(0,n.jsxs)(s.h3,{id:"deletebackward-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#deletebackward-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"deleteBackward(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Delete one character before the cursor."}),"\n",(0,n.jsxs)(s.h3,{id:"movecursoroffset-number-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#movecursoroffset-number-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"moveCursor(offset: number): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Move the cursor by a number of characters. Negative = left; Positive = right."}),"\n",(0,n.jsxs)(s.h3,{id:"setmarkedtexttext-location-length-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#setmarkedtexttext-location-length-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"setMarkedText(text, location, length): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Mark a portion of inserted text (used in composition scenarios like Pinyin input)."}),"\n",(0,n.jsxs)(s.h3,{id:"unmarktext-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#unmarktext-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"unmarkText(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Clear any currently marked text."}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"6-keyboard-behavior-control",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#6-keyboard-behavior-control",children:"#"}),"6. Keyboard Behavior Control"]}),"\n",(0,n.jsxs)(s.h3,{id:"dismiss-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dismiss-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"dismiss(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Dismiss the keyboard view."}),"\n",(0,n.jsxs)(s.h3,{id:"nextkeyboard-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#nextkeyboard-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"nextKeyboard(): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Switch to the next system keyboard."}),"\n",(0,n.jsxs)(s.h3,{id:"requestheightheight-number-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#requestheightheight-number-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"requestHeight(height: number): Promise<void>"})]}),"\n",(0,n.jsxs)(s.p,{children:["Request a new keyboard height in points. Recommended range is ",(0,n.jsx)(s.strong,{children:"216–360pt"}),"."]}),"\n",(0,n.jsxs)(s.h3,{id:"sethasdictationkeyvalue-boolean-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#sethasdictationkeyvalue-boolean-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"setHasDictationKey(value: boolean): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Control whether the dictation (microphone) key is shown."}),"\n",(0,n.jsxs)(s.h3,{id:"settoolbarvisiblevisible-boolean-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#settoolbarvisiblevisible-boolean-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"setToolbarVisible(visible: boolean): Promise<void>"})]}),"\n",(0,n.jsx)(s.p,{children:"Show or hide the custom keyboard toolbar. Useful for debugging."}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"7-navigation",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#7-navigation",children:"#"}),"7. Navigation"]}),"\n",(0,n.jsxs)(s.h3,{id:"dismisstohome-promisevoid",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#dismisstohome-promisevoid",children:"#"}),(0,n.jsx)(s.code,{children:"dismissToHome(): Promise<void>"})]}),"\n",(0,n.jsxs)(s.p,{children:["Dismisses the currently active keyboard script and returns to the ",(0,n.jsx)(s.strong,{children:"Scripting keyboard home screen"})," (script list). Useful for letting users choose another script."]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"await"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".dismissToHome"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]})})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"8-user-feedback",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#8-user-feedback",children:"#"}),"8. User Feedback"]}),"\n",(0,n.jsxs)(s.h3,{id:"playinputclick-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#playinputclick-void",children:"#"}),(0,n.jsx)(s.code,{children:"playInputClick(): void"})]}),"\n",(0,n.jsx)(s.p,{children:"Play the standard system keyboard click sound. Useful when simulating real key taps."}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,n.jsx)(s.code,{children:(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".playInputClick"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]})})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"9-event-listeners",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#9-event-listeners",children:"#"}),"9. Event Listeners"]}),"\n",(0,n.jsxs)(s.h3,{id:"addlistenerevent-callback-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#addlistenerevent-callback-void",children:"#"}),(0,n.jsx)(s.code,{children:"addListener(event, callback): void"})]}),"\n",(0,n.jsx)(s.p,{children:"Register a listener for keyboard or text input changes."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Event"}),(0,n.jsx)(s.th,{children:"Callback Signature"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textWillChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"() => void"})}),(0,n.jsx)(s.td,{children:"Before text changes"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"textDidChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"(traits: TextInputTraits) => void"})}),(0,n.jsx)(s.td,{children:"After text changes"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"selectionWillChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"() => void"})}),(0,n.jsx)(s.td,{children:"Before cursor/selection changes"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"selectionDidChange"})}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"(traits: TextInputTraits) => void"})}),(0,n.jsx)(s.td,{children:"After cursor/selection changes"})]})]})]}),"\n",(0,n.jsxs)(s.h3,{id:"removelistenerevent-callback-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#removelistenerevent-callback-void",children:"#"}),(0,n.jsx)(s.code,{children:"removeListener(event, callback): void"})]}),"\n",(0,n.jsx)(s.p,{children:"Remove a specific listener."}),"\n",(0,n.jsxs)(s.h3,{id:"removealllistenersevent-void",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#removealllistenersevent-void",children:"#"}),(0,n.jsx)(s.code,{children:"removeAllListeners(event): void"})]}),"\n",(0,n.jsx)(s.p,{children:"Remove all listeners for a given event type."}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"10-full-example",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#10-full-example",children:"#"}),"10. Full Example"]}),"\n",(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,n.jsxs)(s.code,{children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"() {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" traits"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".useTraits"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" insert"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" async"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" string"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:") "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".playInputClick"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    await"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".insertText"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(text)"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ("})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" spacing"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"12"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">Input type: {"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"traits"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".keyboardType}</"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Text"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"HStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" spacing"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"10"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}>"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"你"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" insert"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"你"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"好"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" insert"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"好"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"←"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".deleteBackward"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        <"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" title"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Back"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" action"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".dismissToHome"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()} />"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"HStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})}),"\n",(0,n.jsx)(s.span,{className:"line"}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"CustomKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".present"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(<"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"MyKeyboard"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" />)"})]})]})})}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.h2,{id:"11-best-practices",children:[(0,n.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#11-best-practices",children:"#"}),"11. Best Practices"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsxs)(s.strong,{children:["Call ",(0,n.jsx)(s.code,{children:"present()"})," only once"]})," in your ",(0,n.jsx)(s.code,{children:"keyboard.tsx"})," file."]}),"\n",(0,n.jsxs)(s.li,{children:["Use ",(0,n.jsx)(s.code,{children:"requestHeight()"})," to ensure appropriate layout on different screen sizes."]}),"\n",(0,n.jsxs)(s.li,{children:["Prefer ",(0,n.jsx)(s.code,{children:"useTraits()"})," for reactive input context access in JSX."]}),"\n",(0,n.jsxs)(s.li,{children:["Use ",(0,n.jsx)(s.code,{children:"dismissToHome()"})," instead of ",(0,n.jsx)(s.code,{children:"dismiss()"})," if you want to return to the script list."]}),"\n",(0,n.jsxs)(s.li,{children:["Call ",(0,n.jsx)(s.code,{children:"playInputClick()"})," when simulating key taps for user feedback."]}),"\n",(0,n.jsxs)(s.li,{children:["Always check for ",(0,n.jsx)(s.code,{children:"hasText"})," before calling ",(0,n.jsx)(s.code,{children:"deleteBackward()"}),"."]}),"\n"]})]})}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}o.__RSPRESS_PAGE_META={},o.__RSPRESS_PAGE_META["TestFlight%2Fen%2Fguide%2FCustom%20Keyboard.md"]={toc:[{id:"1-environment--setup",text:"1. Environment & Setup",depth:2},{id:"requirements",text:"Requirements",depth:3},{id:"2-presentation",text:"2. Presentation",depth:2},{id:"presentnode-virtualnode-void",text:"`present(node: VirtualNode): void`",depth:3},{id:"3-text-input-state",text:"3. Text Input State",depth:2},{id:"4-input-traits",text:"4. Input Traits",depth:2},{id:"usetraits-textinputtraits",text:"`useTraits(): TextInputTraits`",depth:3},{id:"traits-textinputtraits",text:"`traits: TextInputTraits`",depth:3},{id:"example-fields",text:"Example fields:",depth:4},{id:"5-text-manipulation",text:"5. Text Manipulation",depth:2},{id:"inserttexttext-string-promisevoid",text:"`insertText(text: string): Promise<void>`",depth:3},{id:"deletebackward-promisevoid",text:"`deleteBackward(): Promise<void>`",depth:3},{id:"movecursoroffset-number-promisevoid",text:"`moveCursor(offset: number): Promise<void>`",depth:3},{id:"setmarkedtexttext-location-length-promisevoid",text:"`setMarkedText(text, location, length): Promise<void>`",depth:3},{id:"unmarktext-promisevoid",text:"`unmarkText(): Promise<void>`",depth:3},{id:"6-keyboard-behavior-control",text:"6. Keyboard Behavior Control",depth:2},{id:"dismiss-promisevoid",text:"`dismiss(): Promise<void>`",depth:3},{id:"nextkeyboard-promisevoid",text:"`nextKeyboard(): Promise<void>`",depth:3},{id:"requestheightheight-number-promisevoid",text:"`requestHeight(height: number): Promise<void>`",depth:3},{id:"sethasdictationkeyvalue-boolean-promisevoid",text:"`setHasDictationKey(value: boolean): Promise<void>`",depth:3},{id:"settoolbarvisiblevisible-boolean-promisevoid",text:"`setToolbarVisible(visible: boolean): Promise<void>`",depth:3},{id:"7-navigation",text:"7. Navigation",depth:2},{id:"dismisstohome-promisevoid",text:"`dismissToHome(): Promise<void>`",depth:3},{id:"8-user-feedback",text:"8. User Feedback",depth:2},{id:"playinputclick-void",text:"`playInputClick(): void`",depth:3},{id:"9-event-listeners",text:"9. Event Listeners",depth:2},{id:"addlistenerevent-callback-void",text:"`addListener(event, callback): void`",depth:3},{id:"removelistenerevent-callback-void",text:"`removeListener(event, callback): void`",depth:3},{id:"removealllistenersevent-void",text:"`removeAllListeners(event): void`",depth:3},{id:"10-full-example",text:"10. Full Example",depth:2},{id:"11-best-practices",text:"11. Best Practices",depth:2}],title:"Custom Keyboard",headingTitle:"",frontmatter:{title:"Custom Keyboard",description:"Create custom keyboards with unique layouts and functionalities.",tag:"PRO"}}}}]);