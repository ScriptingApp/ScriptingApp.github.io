"use strict";(self.rspackChunktest=self.rspackChunktest||[]).push([["31281"],{17e3(e,s,n){n.r(s),n.d(s,{default:()=>a});var i=n(74848),r=n(28453);function l(e){let s={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"AVPlayerView"})," is a video playback component introduced in Scripting that wraps the system-native ",(0,i.jsx)(s.code,{children:"AVPlayerViewController"}),".\nUnlike ",(0,i.jsx)(s.code,{children:"VideoPlayer"}),", ",(0,i.jsx)(s.code,{children:"AVPlayerView"})," ",(0,i.jsx)(s.strong,{children:"fully supports system Picture in Picture (PiP)"})," and exposes PiP lifecycle state to scripts."]}),"\n",(0,i.jsxs)(s.p,{children:["This component is intended for ",(0,i.jsx)(s.strong,{children:"media-centric scenarios"})," where native playback behavior, PiP, Now Playing integration, and background playback are required."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"1-when-to-use-avplayerview",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#1-when-to-use-avplayerview",children:"#"}),"1. When to Use AVPlayerView"]}),"\n",(0,i.jsxs)(s.p,{children:["Use ",(0,i.jsx)(s.code,{children:"AVPlayerView"})," when you need:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"System Picture in Picture (PiP) for video"}),"\n",(0,i.jsx)(s.li,{children:"Native playback controls"}),"\n",(0,i.jsx)(s.li,{children:"Integration with Now Playing / Control Center / Lock Screen"}),"\n",(0,i.jsx)(s.li,{children:"Automatic PiP when entering background"}),"\n",(0,i.jsx)(s.li,{children:"Fine-grained observation of PiP lifecycle"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["If you do ",(0,i.jsx)(s.strong,{children:"not"})," need PiP, ",(0,i.jsx)(s.code,{children:"VideoPlayer"})," remains a lighter alternative."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"2-core-properties-explained",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#2-core-properties-explained",children:"#"}),"2. Core Properties Explained"]}),"\n",(0,i.jsxs)(s.h3,{id:"21-player",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#21-player",children:"#"}),"2.1 ",(0,i.jsx)(s.code,{children:"player"})]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,i.jsx)(s.code,{children:(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" AVPlayer"})]})})})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"The underlying media player"}),"\n",(0,i.jsx)(s.li,{children:"Fully managed by the developer"}),"\n",(0,i.jsx)(s.li,{children:"Supports local files, remote URLs, HLS streams, etc."}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"AVPlayerView"})," ",(0,i.jsx)(s.strong,{children:"does not own the player lifecycle"}),".\nThe player must remain alive while PiP is active."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"22-pipstatus",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#22-pipstatus",children:"#"}),"2.2 ",(0,i.jsx)(s.code,{children:"pipStatus"})]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,i.jsx)(s.code,{children:(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"pipStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" Observable"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"<"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"PIPStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:">"})]})})})}),"\n",(0,i.jsx)(s.p,{children:"Provides real-time updates for the PiP lifecycle."}),"\n",(0,i.jsx)(s.p,{children:"Possible values:"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Value"}),(0,i.jsx)(s.th,{children:"Meaning"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"willStart"})}),(0,i.jsx)(s.td,{children:"PiP is about to start"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"didStart"})}),(0,i.jsx)(s.td,{children:"PiP has started"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"willStop"})}),(0,i.jsx)(s.td,{children:"PiP is about to stop"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"didStop"})}),(0,i.jsx)(s.td,{children:"PiP has stopped"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"undefined / null"})}),(0,i.jsx)(s.td,{children:"No PiP activity yet"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:["This value is ",(0,i.jsx)(s.strong,{children:"system-controlled"}),".\nYou should ",(0,i.jsx)(s.strong,{children:"observe it only"}),", never assign values manually."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"3-picture-in-picture-configuration",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#3-picture-in-picture-configuration",children:"#"}),"3. Picture in Picture Configuration"]}),"\n",(0,i.jsxs)(s.h3,{id:"31-allowspictureinpictureplayback",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#31-allowspictureinpictureplayback",children:"#"}),"3.1 ",(0,i.jsx)(s.code,{children:"allowsPictureInPicturePlayback"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Enables or disables PiP entirely"}),"\n",(0,i.jsxs)(s.li,{children:["Default: ",(0,i.jsx)(s.code,{children:"true"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["When set to ",(0,i.jsx)(s.code,{children:"false"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"PiP controls are hidden"}),"\n",(0,i.jsx)(s.li,{children:"PiP cannot be activated"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"32-canstartpictureinpictureautomaticallyfrominline",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#32-canstartpictureinpictureautomaticallyfrominline",children:"#"}),"3.2 ",(0,i.jsx)(s.code,{children:"canStartPictureInPictureAutomaticallyFromInline"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"If enabled, PiP starts automatically when:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"The app moves to background"}),"\n",(0,i.jsx)(s.li,{children:"Video is playing inline"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Default: ",(0,i.jsx)(s.code,{children:"false"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Recommended for:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Media apps"}),"\n",(0,i.jsx)(s.li,{children:"Continuous playback experiences"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"33-updatesnowplayinginfocenter",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#33-updatesnowplayinginfocenter",children:"#"}),"3.3 ",(0,i.jsx)(s.code,{children:"updatesNowPlayingInfoCenter"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"Controls automatic updates to:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Lock screen"}),"\n",(0,i.jsx)(s.li,{children:"Control Center"}),"\n",(0,i.jsx)(s.li,{children:"External playback controls"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Default: ",(0,i.jsx)(s.code,{children:"true"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Should generally remain enabled for video playback apps."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"4-full-screen-playback-behavior",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#4-full-screen-playback-behavior",children:"#"}),"4. Full-Screen Playback Behavior"]}),"\n",(0,i.jsxs)(s.h3,{id:"41-entersfullscreenwhenplaybackbegins",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#41-entersfullscreenwhenplaybackbegins",children:"#"}),"4.1 ",(0,i.jsx)(s.code,{children:"entersFullScreenWhenPlaybackBegins"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Automatically enters full screen on play"}),"\n",(0,i.jsxs)(s.li,{children:["Default: ",(0,i.jsx)(s.code,{children:"false"})]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"42-exitsfullscreenwhenplaybackends",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#42-exitsfullscreenwhenplaybackends",children:"#"}),"4.2 ",(0,i.jsx)(s.code,{children:"exitsFullScreenWhenPlaybackEnds"})]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Automatically exits full screen on completion"}),"\n",(0,i.jsxs)(s.li,{children:["Default: ",(0,i.jsx)(s.code,{children:"false"})]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"5-video-scaling-videogravity",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#5-video-scaling-videogravity",children:"#"}),"5. Video Scaling (",(0,i.jsx)(s.code,{children:"videoGravity"}),")"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"ts",children:(0,i.jsx)(s.code,{children:(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"videoGravity"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" AVLayerVideoGravity"})]})})})}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Value"}),(0,i.jsx)(s.th,{children:"Behavior"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"resize"})}),(0,i.jsx)(s.td,{children:"Stretch to fill (no aspect ratio)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"resizeAspect"})}),(0,i.jsx)(s.td,{children:"Preserve aspect ratio, fit inside (default)"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"resizeAspectFill"})}),(0,i.jsx)(s.td,{children:"Preserve aspect ratio, fill and crop"})]})]})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"6-complete-demo-example",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#6-complete-demo-example",children:"#"}),"6. Complete Demo Example"]}),"\n",(0,i.jsx)(s.p,{children:"The following example demonstrates:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Creating and configuring ",(0,i.jsx)(s.code,{children:"AVPlayer"})]}),"\n",(0,i.jsx)(s.li,{children:"Activating audio playback session"}),"\n",(0,i.jsx)(s.li,{children:"Observing PiP lifecycle"}),"\n",(0,i.jsx)(s.li,{children:"Controlling playback state"}),"\n",(0,i.jsx)(s.li,{children:"Proper cleanup"}),"\n"]}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(s.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"tsx",children:(0,i.jsxs)(s.code,{children:[(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" Example"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"() {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" dismiss"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" Navigation"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".useDismiss"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"status"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" setStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"] "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useState"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"TimeControlStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">("})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    TimeControlStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".paused"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  )"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" pipstatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useObservable"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"<"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"PIPStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">()"})]}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"  console"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".log"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"pipstatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".value)"})]}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  const"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" useMemo"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(() "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    const"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" new"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:" AVPlayer"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".setSource"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'      "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"'})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    )"})}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"."}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"onTimeControlStatusChanged"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" status "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      setStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(status)"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    SharedAudioSession"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".setActive"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"true"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:")"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"    SharedAudioSession"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".setCategory"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"("})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'      "playback"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      ["}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"defaultToSpeaker"'}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"]"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    )"})}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    return"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" player"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" [])"})]}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"  useEffect"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"(() "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"    return"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" () "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"      player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".dispose"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    }"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  }"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" [])"})]}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"  return"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationStack"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    <"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      navigationTitle"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"VideoPlayer"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      navigationBarTitleDisplayMode"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"inline"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"      toolbar"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{{"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        cancellationAction"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" <"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          title"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"Done"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"          action"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{dismiss}"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        />"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      }}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    >"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"AVPlayerView"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{player}"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        pipStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{pipstatus}"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        canStartPictureInPictureAutomaticallyFromInline"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        updatesNowPlayingInfoCenter"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        entersFullScreenWhenPlaybackBegins"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      />"})}),"\n",(0,i.jsx)(s.span,{className:"line"}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      <"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"Button"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        title"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          status "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"==="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" TimeControlStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".paused"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"            ?"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "Play"'})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"            :"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:' "Pause"'})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"        action"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"{() "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"          if"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" (status "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"==="}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:" TimeControlStatus"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:".paused) {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"            player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".play"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          } "}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"else"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:" {"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"            player"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".pause"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"()"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"          }"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"        }}"})}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"      />"})}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"    </"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"VStack"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,i.jsxs)(s.span,{className:"line",children:[(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"  </"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"NavigationStack"}),(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:">"})]}),"\n",(0,i.jsx)(s.span,{className:"line",children:(0,i.jsx)(s.span,{style:{color:"var(--shiki-foreground)"},children:"}"})})]})})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"7-pip-lifecycle-notes",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#7-pip-lifecycle-notes",children:"#"}),"7. PiP Lifecycle Notes"]}),"\n",(0,i.jsx)(s.p,{children:"Typical PiP state progression:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"willStart"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"didStart"})}),"\n",(0,i.jsx)(s.li,{children:"PiP running"}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"willStop"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"didStop"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["The system may skip stages in error or interruption scenarios.\nAlways treat ",(0,i.jsx)(s.code,{children:"didStart"})," and ",(0,i.jsx)(s.code,{children:"didStop"})," as authoritative."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"8-important-notes-and-constraints",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#8-important-notes-and-constraints",children:"#"}),"8. Important Notes and Constraints"]}),"\n",(0,i.jsxs)(s.h3,{id:"81-avplayerview-pip-is-system-level-pip",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#81-avplayerview-pip-is-system-level-pip",children:"#"}),"8.1 AVPlayerView PiP is System-Level PiP"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Uses native video PiP"}),"\n",(0,i.jsx)(s.li,{children:"Completely separate from Scriptingâ€™s custom PiP View Modifiers"}),"\n",(0,i.jsx)(s.li,{children:"These two mechanisms must not be mixed"}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"82-audio-session-is-required",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#82-audio-session-is-required",children:"#"}),"8.2 Audio Session Is Required"]}),"\n",(0,i.jsx)(s.p,{children:"For PiP to work reliably:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"An active audio session is required"}),"\n",(0,i.jsxs)(s.li,{children:["Category should be ",(0,i.jsx)(s.code,{children:"playback"})]}),"\n",(0,i.jsx)(s.li,{children:"Background audio capability must be enabled"}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"Failing to configure the audio session may cause PiP to fail silently."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h3,{id:"83-do-not-dispose-avplayer-while-pip-is-active",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#83-do-not-dispose-avplayer-while-pip-is-active",children:"#"}),"8.3 Do Not Dispose AVPlayer While PiP Is Active"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Disposing or replacing ",(0,i.jsx)(s.code,{children:"AVPlayer"})," during PiP"]}),"\n",(0,i.jsx)(s.li,{children:"Will force PiP to stop unexpectedly"}),"\n",(0,i.jsx)(s.li,{children:"May result in system errors"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Always wait until ",(0,i.jsx)(s.code,{children:"pipStatus"})," reaches ",(0,i.jsx)(s.code,{children:"didStop"})," before releasing the player."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.h2,{id:"9-recommended-best-practices",children:[(0,i.jsx)(s.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#9-recommended-best-practices",children:"#"}),"9. Recommended Best Practices"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Use ",(0,i.jsx)(s.code,{children:"AVPlayerView"})," exclusively for video PiP"]}),"\n",(0,i.jsxs)(s.li,{children:["Treat ",(0,i.jsx)(s.code,{children:"pipStatus"})," as read-only state"]}),"\n",(0,i.jsxs)(s.li,{children:["Keep ",(0,i.jsx)(s.code,{children:"AVPlayer"})," lifecycle stable during PiP"]}),"\n",(0,i.jsx)(s.li,{children:"Configure audio session explicitly"}),"\n",(0,i.jsx)(s.li,{children:"Avoid frequent player replacement"}),"\n",(0,i.jsx)(s.li,{children:"Clean up resources only after PiP has fully stopped"}),"\n"]})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["en%2Fdoc%2FViews%2FAVPlayerView.mdx"]={toc:[{id:"1-when-to-use-avplayerview",text:"1. When to Use AVPlayerView",depth:2},{id:"2-core-properties-explained",text:"2. Core Properties Explained",depth:2},{id:"21-player",text:"2.1 `player`",depth:3},{id:"22-pipstatus",text:"2.2 `pipStatus`",depth:3},{id:"3-picture-in-picture-configuration",text:"3. Picture in Picture Configuration",depth:2},{id:"31-allowspictureinpictureplayback",text:"3.1 `allowsPictureInPicturePlayback`",depth:3},{id:"32-canstartpictureinpictureautomaticallyfrominline",text:"3.2 `canStartPictureInPictureAutomaticallyFromInline`",depth:3},{id:"33-updatesnowplayinginfocenter",text:"3.3 `updatesNowPlayingInfoCenter`",depth:3},{id:"4-full-screen-playback-behavior",text:"4. Full-Screen Playback Behavior",depth:2},{id:"41-entersfullscreenwhenplaybackbegins",text:"4.1 `entersFullScreenWhenPlaybackBegins`",depth:3},{id:"42-exitsfullscreenwhenplaybackends",text:"4.2 `exitsFullScreenWhenPlaybackEnds`",depth:3},{id:"5-video-scaling-videogravity",text:"5. Video Scaling (`videoGravity`)",depth:2},{id:"6-complete-demo-example",text:"6. Complete Demo Example",depth:2},{id:"7-pip-lifecycle-notes",text:"7. PiP Lifecycle Notes",depth:2},{id:"8-important-notes-and-constraints",text:"8. Important Notes and Constraints",depth:2},{id:"81-avplayerview-pip-is-system-level-pip",text:"8.1 AVPlayerView PiP is System-Level PiP",depth:3},{id:"82-audio-session-is-required",text:"8.2 Audio Session Is Required",depth:3},{id:"83-do-not-dispose-avplayer-while-pip-is-active",text:"8.3 Do Not Dispose AVPlayer While PiP Is Active",depth:3},{id:"9-recommended-best-practices",text:"9. Recommended Best Practices",depth:2}],title:"AVPlayerView",headingTitle:"",frontmatter:{title:"AVPlayerView"}}}}]);