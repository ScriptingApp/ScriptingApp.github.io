"use strict";(self.webpackChunkscripting_doc=self.webpackChunkscripting_doc||[]).push([["24"],{8498:function(e,n,r){r.r(n),r.d(n,{default:()=>i});var s=r(5893),a=r(65);function d(e){let n=Object.assign({h1:"h1",a:"a",p:"p",code:"code",h2:"h2",ul:"ul",li:"li",h3:"h3",pre:"pre",hr:"hr",ol:"ol",strong:"strong"},(0,a.ah)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"assistant",children:["Assistant",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#assistant",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Assistant"})," 模块提供了强大的 API，使您能够从助手请求结构化的 JSON 数据。此功能可用于自动化任务，例如提取账单详情、分类支出或解析文本数据。"]}),"\n",(0,s.jsxs)(n.h2,{id:"isavailable-变量",children:[(0,s.jsx)(n.code,{children:"isAvailable"})," 变量",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#isavailable-变量",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"表示 Assistant API 是否可用"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"这个状态根据您当前选择的 AI 提供商以及是否配置了一个可用的 API Key 判断。"}),"\n",(0,s.jsx)(n.li,{children:"如何没有提供 API Key，Assistant API 将不可用，尝试调用会失败。"}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"requeststructureddata-方法",children:[(0,s.jsx)(n.code,{children:"requestStructuredData"})," 方法",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#requeststructureddata-方法",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"方法描述",children:["方法描述",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#方法描述",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"requestStructuredData"})," 允许用户向助手发送文本提示，并根据定义的 JSON 结构模式获取结构化数据。"]}),"\n",(0,s.jsxs)(n.h3,{id:"语法",children:["语法",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#语法",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"function requestStructuredData<R>(prompt: string, schema: JSONSchemaArray | JSONSchemaObject): Promise<R>;\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"参数",children:["参数",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#参数",children:"#"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"prompt"})," (",(0,s.jsx)(n.code,{children:"string"}),")：提供给助手的输入提示，描述要解析的内容。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"schema"})," (",(0,s.jsx)(n.code,{children:"JSONSchemaArray | JSONSchemaObject"}),")：预期的输出 JSON 结构模式，定义返回数据的格式。"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"返回值",children:["返回值",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#返回值",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["返回解析为符合 ",(0,s.jsx)(n.code,{children:"schema"})," 定义的结构化 JSON 数据的 ",(0,s.jsx)(n.code,{children:"Promise"}),"，数据类型为 ",(0,s.jsx)(n.code,{children:"R"}),"。"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"json-结构模式定义",children:["JSON 结构模式定义",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#json-结构模式定义",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["在 ",(0,s.jsx)(n.code,{children:"requestStructuredData"})," 方法中，",(0,s.jsx)(n.code,{children:"schema"})," 参数用于定义返回数据的 JSON 结构，其数据类型如下："]}),"\n",(0,s.jsxs)(n.h3,{id:"jsonschematype",children:[(0,s.jsx)(n.code,{children:"JSONSchemaType"}),(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#jsonschematype",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"type JSONSchemaType = JSONSchemaPrimitive | JSONSchemaArray | JSONSchemaObject;\n"})}),"\n",(0,s.jsx)(n.p,{children:"基础数据类型定义："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'type JSONSchemaPrimitive = {\n    type: "string" | "number" | "boolean";\n    required?: boolean;\n    description: string;\n};\n'})}),"\n",(0,s.jsx)(n.p,{children:"数组类型定义："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'type JSONSchemaArray = {\n    type: "array";\n    items: JSONSchemaType;\n    required?: boolean;\n    description: string;\n};\n'})}),"\n",(0,s.jsx)(n.p,{children:"对象类型定义："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'type JSONSchemaObject = {\n    type: "object";\n    properties: Record<string, JSONSchemaType>;\n    required?: boolean;\n    description: string;\n};\n'})}),"\n",(0,s.jsxs)(n.h3,{id:"示例",children:["示例",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const schema: JSONSchemaObject = {\n    type: "object",\n    properties: {\n        totalAmount: {\n            type: "number",\n            required: true,\n            description: "账单总金额",\n        },\n        category: {\n            type: "string",\n            required: true,\n            description: "账单分类",\n        },\n        date: {\n            type: "string",\n            required: false,\n            description: "账单日期",\n        },\n        location: {\n            type: "string",\n            required: false,\n            description: "账单发生地点",\n        },\n    },\n};\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"示例用法",children:["示例用法",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#示例用法",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"解析账单信息",children:["解析账单信息",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#解析账单信息",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"假设我们有一张账单，需要提取其中的金额、日期、分类和地点信息。"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const someBillDetails = `\n- 金额: $15.00\n- 日期: 2024-03-11 14:30\n- 位置: 市中心停车场\n- 分类: 停车费\n`;\n\nconst prompt = `请解析以下账单并输出结构化数据: ${someBillDetails}`;\n\nconst data = await Assistant.requestStructuredData(prompt, schema);\nconsole.log(data);\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"可能的返回结果",children:["可能的返回结果",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#可能的返回结果",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "totalAmount": 15.0,\n    "category": "停车费",\n    "date": "2024-03-11 14:30",\n    "location": "市中心停车场"\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.h2,{id:"使用注意事项",children:["使用注意事项",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#使用注意事项",children:"#"})]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["确保 ",(0,s.jsx)(n.code,{children:"schema"})," 定义准确"]}),"：JSON 结构模式应与实际需要的数据格式一致。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"required"})," 属性的使用"]}),"：如果某字段必须返回，请将 ",(0,s.jsx)(n.code,{children:"required"})," 设为 ",(0,s.jsx)(n.code,{children:"true"}),"。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:["尽可能提供清晰的 ",(0,s.jsx)(n.code,{children:"prompt"})]}),"：更详细的 ",(0,s.jsx)(n.code,{children:"prompt"})," 可提高助手返回数据的准确性。"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"错误处理"}),"：",(0,s.jsx)(n.code,{children:"requestStructuredData"})," 返回 ",(0,s.jsx)(n.code,{children:"Promise"}),"，应使用 ",(0,s.jsx)(n.code,{children:"try-catch"})," 处理可能的错误。"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"示例错误处理："}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'try {\n    const data = await Assistant.requestStructuredData(prompt, schema);\n    console.log("解析结果:", data);\n} catch (error) {\n    console.error("解析失败:", error);\n}\n'})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}let i=c;c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["zh%2Fguide%2Fdocs%2Fassistant.md"]={toc:[{text:"`isAvailable` 变量",id:"isavailable-变量",depth:2},{text:"`requestStructuredData` 方法",id:"requeststructureddata-方法",depth:2},{text:"方法描述",id:"方法描述",depth:3},{text:"语法",id:"语法",depth:3},{text:"参数",id:"参数",depth:3},{text:"返回值",id:"返回值",depth:3},{text:"JSON 结构模式定义",id:"json-结构模式定义",depth:2},{text:"`JSONSchemaType`",id:"jsonschematype",depth:3},{text:"示例",id:"示例",depth:3},{text:"示例用法",id:"示例用法",depth:2},{text:"解析账单信息",id:"解析账单信息",depth:3},{text:"可能的返回结果",id:"可能的返回结果",depth:3},{text:"使用注意事项",id:"使用注意事项",depth:2}],title:"Assistant",headingTitle:"Assistant",frontmatter:{}}}}]);